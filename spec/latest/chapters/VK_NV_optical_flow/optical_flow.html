<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Optical Flow :: Vulkan Documentation Project</title>
    <meta name="generator" content="Antora 3.1.4">
    <link rel="stylesheet" href="../../../../_/css/site.css">
    <link rel="apple-touch-icon" sizes="180x180" href="../../../../_/img/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="../../../../_/img/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="../../../../_/img/favicon-16x16.png">
    <link rel="manifest" href="../../../../_/static/site.webmanifest">
    <link rel="mask-icon" href="../../../../_/img/safari-pinned-tab.svg" color="#a41e22">
    <meta name="msapplication-TileColor" content="#ffc40d">
    <meta name="theme-color" content="#ffffff">
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="../../../.."><img class="navbar-item" alt="Vulkan White Label" src="../../../../_/Vulkan_Docs.svg" /></a>
      <div class="navbar-item search hide-for-print">
        <div id="search-field" class="field has-filter">
          <label for="search-input"></label>
          <input id="search-input" type="text" placeholder="Search the docs">
          <label class="filter checkbox">
            <input type="checkbox" data-facet-filter="component:spec" checked> In this component
          </label>
        </div>
      </div>
      <button class="navbar-burger" aria-controls="topbar-nav" aria-expanded="false" aria-label="Toggle main menu">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <!-- <a class="navbar-item" href="#">Home</a> -->
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Specs</a>
          <div class="navbar-dropdown is-right">
            <a class="navbar-item" href="../../../../spec/latest/chapters/introduction.html">Vulkan 1.3</a>
            <a class="navbar-item" href="https://registry.khronos.org/OpenGL/specs/gl/GLSLangSpec.4.60.html">GLSL</a>
            <a class="navbar-item" href="../../../../guide/latest/hlsl.html">HLSL</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Education</a>
          <div class="navbar-dropdown is-right">
            <a class="navbar-item" href="../../../../features/latest/features/index.html">Vulkan Feature Descriptions</a>
            <a class="navbar-item" href="../../../../guide/latest/index.html">Vulkan Guide</a>
            <a class="navbar-item" href="../../../../samples/latest/README.html">Vulkan Samples</a>
            <a class="navbar-item" href="../../../../tutorial/latest/index.html">Vulkan Tutorial</a>
            <a class="navbar-item" href="https://www.youtube.com/c/vulkan">YouTube</a>
            <a class="navbar-item" href="https://vulkan.org">More Info at Vulkan.org</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Feedback</a>
          <div class="navbar-dropdown is-right">
            <a class="navbar-item" href="https://github.com/KhronosGroup/Vulkan-Site/issues/new/choose" target="_blank">Report a Problem</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Community</a>
          <div class="navbar-dropdown is-right">
            <a class="navbar-item" href="https://discord.gg/vulkan">Vulkan Discord</a>
            <a class="navbar-item" href="https://reddit.com/r/vulkan">Reddit</a>
            <a class="navbar-item" href="https://stackoverflow.com/questions/tagged/vulkan">Stack Overflow</a>
            <a class="navbar-item" href="https://fosstodon.org/@vulkan">Mastodon</a>
          </div>
        </div>
      </div>
    </div>
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="spec" data-version="latest">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <button class="nav-menu-toggle" aria-label="Toggle expand/collapse all" style="display: none"></button>
    <h3 class="title"><a href="../../index.html">Vulkan Specification</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../introduction.html">Introduction</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../fundamentals.html">Fundamentals</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../initialization.html">Initialization</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../devsandqueues.html">Devices and Queues</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../cmdbuffers.html">Command Buffers</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../synchronization.html">Synchronization and Cache Control</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../renderpass.html">Render Pass</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../shaders.html">Shaders</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../pipelines.html">Pipelines</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../memory.html">Memory Allocation</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../resources.html">Resource Creation</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../samplers.html">Samplers</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../descriptorsets.html">Resource Descriptors</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../interfaces.html">Shader Interfaces</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../textures.html">Image Operations</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../fragmentdensitymapops.html">Fragment Density Map Operations</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../queries.html">Queries</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../clears.html">Clear Commands</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../copies.html">Copy Commands</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../drawing.html">Drawing Commands</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../fxvertex.html">Fixed-Function Vertex Processing</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../tessellation.html">Tessellation</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../geometry.html">Geometry Shading</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../VK_NV_mesh_shader/mesh.html">Mesh Shading</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../VK_HUAWEI_cluster_culling_shader/clusterculling.html">Cluster Culling Shading</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../vertexpostproc.html">Fixed-Function Vertex Post-Processing</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../primsrast.html">Rasterization</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../fragops.html">Fragment Operations</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../framebuffer.html">The Framebuffer</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../dispatch.html">Dispatching Commands</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../device_generated_commands/generatedcommands.html">Device-Generated Commands</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../sparsemem.html">Sparse Resources</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../VK_KHR_surface/wsi.html">Window System Integration (WSI)</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../VK_KHR_deferred_host_operations/deferred_host_operations.html">Deferred Host Operations</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../VK_EXT_private_data.html">Private Data</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../accelstructures.html">Acceleration Structures</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../VK_EXT_opacity_micromap/micromaps.html">Micromap</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../raytraversal.html">Ray Traversal</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../raytracing.html">Ray Tracing</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../VK_NV_memory_decompression.html">Memory Decompression</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../videocoding.html">Video Coding</a>
  </li>
  <li class="nav-item is-current-page" data-depth="1">
    <a class="nav-link" href="optical_flow.html">Optical Flow</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../executiongraphs.html">Execution Graphs</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../extensions.html">Extending Vulkan</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../features.html">Features</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../limits.html">Limits</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../formats.html">Formats</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../capabilities.html">Additional Capabilities</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../debugging.html">Debugging</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../../appendices/spirvenv.html">Vulkan Environment for SPIR-V</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../../appendices/memorymodel.html">Memory Model</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../../appendices/compressedtex.html">Compressed Image Formats</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../../appendices/versions.html">Core Revisions (Informative)</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../../appendices/extensions.html">Layers &amp; Extensions (Informative)</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../../appendices/roadmap.html">Vulkan Roadmap Milestones</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../../appendices/boilerplate.html">API Boilerplate</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../../appendices/invariance.html">Invariance</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../../appendices/glossary.html">Lexicon</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../../appendices/credits.html">Credits (Informative)</a>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">Vulkan Specification</span>
    <span class="version">latest</span>
  </div>
  <ul class="components">
    <li class="component">
      <div class="title"><a href="../../../../tutorial/latest/00_Introduction.html">Khronos Vulkan Tutorial</a></div>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../tutorial/latest/00_Introduction.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <div class="title"><a href="../../../../features/latest/features/index.html">Vulkan Feature Descriptions</a></div>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../features/latest/features/index.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <div class="title"><a href="../../../../guide/latest/index.html">Vulkan Guide</a></div>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../guide/latest/index.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <div class="title"><a href="../../../../samples/latest/README.html">Vulkan Samples</a></div>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../samples/latest/README.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component is-current">
      <div class="title"><a href="../../index.html">Vulkan Specification</a></div>
      <ul class="versions">
        <li class="version is-current is-latest">
          <a href="../../index.html">latest</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="../../index.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="../../index.html">Vulkan Specification</a></li>
    <li><a href="optical_flow.html">Optical Flow</a></li>
  </ul>
</nav>
</div>
  <div class="content">
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
<article class="doc">
<h1 class="page">Optical Flow</h1>
<div class="sect1">
<h2 id="_optical_flow_queues"><a class="anchor" href="#_optical_flow_queues"></a>Optical Flow Queues</h2>
<div class="sectionbody">
<div class="paragraph">
<p><code><code>VK_NV_optical_flow</code></code> adds an optical flow queue type bit
<code>VK_QUEUE_OPTICAL_FLOW_BIT_NV</code> to <a href="../devsandqueues.html#VkQueueFlagBits" class="xref page">VkQueueFlagBits</a>.
Optical flow operations are supported by queues with an advertised queue
capability of <code>VK_QUEUE_OPTICAL_FLOW_BIT_NV</code>.
As in the case of other queue types, an application <strong>must</strong> use
<a href="../devsandqueues.html#vkGetPhysicalDeviceQueueFamilyProperties" class="xref page">vkGetPhysicalDeviceQueueFamilyProperties</a> to query whether the physical
device has support for the Optical Flow Queue.
When the implementation reports the <code>VK_QUEUE_OPTICAL_FLOW_BIT_NV</code> bit
for a queue family, it advertises general support for Vulkan queue
operations described in <a href="../devsandqueues.html#devsandqueues" class="xref page">Devices and Queues</a>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="opticalflow-formats"><a class="anchor" href="#opticalflow-formats"></a>Optical Flow Image Formats</h2>
<div class="sectionbody">
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>To enumerate the supported image formats for a specific optical flow usage,
call:</p>
</div>
<div class="paragraph">
<p>Unresolved include directive in modules/ROOT/pages/chapters/VK_NV_optical_flow/optical_flow.adoc - include::partial$gen/api/protos/vkGetPhysicalDeviceOpticalFlowImageFormatsNV.adoc[]</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>physicalDevice</code> is the physical device being queried.</p>
</li>
<li>
<p><a id="opticalflow-getimageformat-pOpticalFlowImageFormatInfo"></a>
<code>pOpticalFlowImageFormatInfo</code> is a pointer to a
<code>VkOpticalFlowImageFormatInfoNV</code> structure specifying the optical
flow usage for which information is returned.</p>
</li>
<li>
<p><a id="opticalflow-getimageformat-pFormatCount"></a> <code>pFormatCount</code> is a
pointer to an integer related to the number of optical flow properties
available or queried, as described below.</p>
</li>
<li>
<p><a id="opticalflow-getimageformat-pImageFormatProperties"></a>
<code>pImageFormatProperties</code> is a pointer to an array of
<code>VkOpticalFlowImageFormatPropertiesNV</code> structures in which supported
formats and image parameters are returned.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>If <code>pImageFormatProperties</code> is <code>NULL</code>, then the number of optical flow
properties supported for the given <code>physicalDevice</code> is returned in
<code>pFormatCount</code>.
Otherwise, <code>pFormatCount</code> <strong>must</strong> point to a variable set by the
application to the number of elements in the <code>pImageFormatProperties</code>
array, and on return the variable is overwritten with the number of values
actually written to <code>pImageFormatProperties</code>.
If the value of <code>pFormatCount</code> is less than the number of optical flow
properties supported, at most <code>pFormatCount</code> values will be written to
<code>pImageFormatProperties</code>, and <code>VK_INCOMPLETE</code> will be returned
instead of <code>VK_SUCCESS</code>, to indicate that not all the available values
were returned.</p>
</div>
<div class="paragraph">
<p>Before creating an image to be used as an optical flow frame, obtain the
supported image creation parameters by querying with
<a href="../formats.html#vkGetPhysicalDeviceFormatProperties2" class="xref page">vkGetPhysicalDeviceFormatProperties2</a> and
<a href="../capabilities.html#vkGetPhysicalDeviceImageFormatProperties2" class="xref page">vkGetPhysicalDeviceImageFormatProperties2</a> using one of the reported
formats and adding <code>VkOpticalFlowImageFormatInfoNV</code> to the <code>pNext</code>
chain of <a href="../capabilities.html#VkPhysicalDeviceImageFormatInfo2" class="xref page">VkPhysicalDeviceImageFormatInfo2</a>.</p>
</div>
<div class="paragraph">
<p>When querying the parameters with
<a href="../capabilities.html#vkGetPhysicalDeviceImageFormatProperties2" class="xref page">vkGetPhysicalDeviceImageFormatProperties2</a> for images used for optical
flow operations, the <code>VkOpticalFlowImageFormatInfoNV</code>::<code>usage</code> field
<strong>must</strong> contain one or more of the bits defined in
<code>VkOpticalFlowUsageFlagBitsNV</code>.</p>
</div>
<div class="paragraph">
<p>Unresolved include directive in modules/ROOT/pages/chapters/VK_NV_optical_flow/optical_flow.adoc - include::partial$gen/validity/protos/vkGetPhysicalDeviceOpticalFlowImageFormatsNV.adoc[]</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p><code>VK_FORMAT_B8G8R8A8_UNORM</code>, <code>VK_FORMAT_R8_UNORM</code> and
<code>VK_FORMAT_G8_B8R8_2PLANE_420_UNORM</code> are initially supported for images
with <a href="#opticalflow-usage">optical usage</a>
<code>VK_OPTICAL_FLOW_USAGE_INPUT_BIT_NV</code>.</p>
</div>
<div class="paragraph">
<p><code>VK_FORMAT_R16G16_SFIXED5_NV</code> is initially supported for images with
<a href="#opticalflow-usage">optical flow usage</a>
<code>VK_OPTICAL_FLOW_USAGE_OUTPUT_BIT_NV</code>,
<code>VK_OPTICAL_FLOW_USAGE_HINT_BIT_NV</code> and
<code>VK_OPTICAL_FLOW_USAGE_GLOBAL_FLOW_BIT_NV</code>.</p>
</div>
<div class="paragraph">
<p><code>VK_FORMAT_R8_UINT</code> and <code>VK_FORMAT_R32_UINT</code> are initially supported
for images with <a href="#opticalflow-usage">optical flow usage</a>
<code>VK_OPTICAL_FLOW_USAGE_COST_BIT_NV</code>.
It is recommended to use <code>VK_FORMAT_R8_UINT</code> because of the lower
bandwidth.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>VkOpticalFlowImageFormatInfoNV</code> structure is defined as:</p>
</div>
<div class="paragraph">
<p>Unresolved include directive in modules/ROOT/pages/chapters/VK_NV_optical_flow/optical_flow.adoc - include::partial$gen/api/structs/VkOpticalFlowImageFormatInfoNV.adoc[]</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is a <a href="../fundamentals.html#VkStructureType" class="xref page">VkStructureType</a> value identifying this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><a id="opticalflow-usage"></a> <code>usage</code> is a bitmask of
<code>VkOpticalFlowUsageFlagBitsNV</code> describing the intended optical flow
usage of the image.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Unresolved include directive in modules/ROOT/pages/chapters/VK_NV_optical_flow/optical_flow.adoc - include::partial$gen/validity/structs/VkOpticalFlowImageFormatInfoNV.adoc[]</p>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Bits which <strong>can</strong> be set in <code>VkOpticalFlowImageFormatInfoNV</code>::<code>usage</code>,
controlling optical flow usage, are:</p>
</div>
<div class="paragraph">
<p>Unresolved include directive in modules/ROOT/pages/chapters/VK_NV_optical_flow/optical_flow.adoc - include::partial$gen/api/enums/VkOpticalFlowUsageFlagBitsNV.adoc[]</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>VK_OPTICAL_FLOW_USAGE_INPUT_BIT_NV</code> specifies that the image <strong>can</strong>
be used as input or reference frame for an optical flow operation.</p>
</li>
<li>
<p><code>VK_OPTICAL_FLOW_USAGE_OUTPUT_BIT_NV</code> specifies that the image <strong>can</strong>
be used as output flow vector map for an optical flow operation.</p>
</li>
<li>
<p><code>VK_OPTICAL_FLOW_USAGE_HINT_BIT_NV</code> specifies that the image <strong>can</strong> be
used as hint flow vector map for an optical flow operation.</p>
</li>
<li>
<p><code>VK_OPTICAL_FLOW_USAGE_COST_BIT_NV</code> specifies that the image <strong>can</strong> be
used as output cost map for an optical flow operation.</p>
</li>
<li>
<p><code>VK_OPTICAL_FLOW_USAGE_GLOBAL_FLOW_BIT_NV</code> specifies that the image
<strong>can</strong> be used as global flow vector for an optical flow operation.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Unresolved include directive in modules/ROOT/pages/chapters/VK_NV_optical_flow/optical_flow.adoc - include::partial$gen/api/flags/VkOpticalFlowUsageFlagsNV.adoc[]</p>
</div>
<div class="paragraph">
<p><code>VkOpticalFlowUsageFlagsNV</code> is a bitmask type for setting a mask of zero
or more <code>VkOpticalFlowUsageFlagBitsNV</code>.</p>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>VkOpticalFlowImageFormatPropertiesNV</code> structure is defined as:</p>
</div>
<div class="paragraph">
<p>Unresolved include directive in modules/ROOT/pages/chapters/VK_NV_optical_flow/optical_flow.adoc - include::partial$gen/api/structs/VkOpticalFlowImageFormatPropertiesNV.adoc[]</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is a <a href="../fundamentals.html#VkStructureType" class="xref page">VkStructureType</a> value identifying this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><a id="opticalflow-format"></a> <code>format</code> is a <a href="../formats.html#VkFormat" class="xref page">VkFormat</a> that specifies
the format that can be used with the specified optical flow image
usages.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Unresolved include directive in modules/ROOT/pages/chapters/VK_NV_optical_flow/optical_flow.adoc - include::partial$gen/validity/structs/VkOpticalFlowImageFormatPropertiesNV.adoc[]</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="opticalflow-session"><a class="anchor" href="#opticalflow-session"></a>Optical Flow Session</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="opticalflow-session-object"><a class="anchor" href="#opticalflow-session-object"></a>Optical Flow Session Object</h3>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Optical flow session objects are abstracted and represented by
<code>VkOpticalFlowSessionNV</code> handles:</p>
</div>
<div class="paragraph">
<p>Unresolved include directive in modules/ROOT/pages/chapters/VK_NV_optical_flow/optical_flow.adoc - include::partial$gen/api/handles/VkOpticalFlowSessionNV.adoc[]</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="opticalflow-session-creation"><a class="anchor" href="#opticalflow-session-creation"></a>Creating an Optical Flow Session</h4>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>To create an optical flow session object, call:</p>
</div>
<div class="paragraph">
<p>Unresolved include directive in modules/ROOT/pages/chapters/VK_NV_optical_flow/optical_flow.adoc - include::partial$gen/api/protos/vkCreateOpticalFlowSessionNV.adoc[]</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>device</code> is the logical device that creates the optical flow session
object.</p>
</li>
<li>
<p><code>pCreateInfo</code> is a pointer to a
<code>VkOpticalFlowSessionCreateInfoNV</code> structure containing parameters
specifying the creation of the optical flow session.</p>
</li>
<li>
<p><code>pAllocator</code> controls host memory allocation as described in the
<a href="../memory.html#memory-allocation" class="xref page">Memory Allocation</a> chapter.</p>
</li>
<li>
<p><code>pSession</code> is a pointer to a <code>VkOpticalFlowSessionNV</code> handle
specifying the optical flow session object which will be created by this
function when it returns <code>VK_SUCCESS</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Unresolved include directive in modules/ROOT/pages/chapters/VK_NV_optical_flow/optical_flow.adoc - include::partial$gen/validity/protos/vkCreateOpticalFlowSessionNV.adoc[]</p>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>VkOpticalFlowSessionCreateInfoNV</code> structure is defined as:</p>
</div>
<div class="paragraph">
<p>Unresolved include directive in modules/ROOT/pages/chapters/VK_NV_optical_flow/optical_flow.adoc - include::partial$gen/api/structs/VkOpticalFlowSessionCreateInfoNV.adoc[]</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is a <a href="../fundamentals.html#VkStructureType" class="xref page">VkStructureType</a> value identifying this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>width</code> is the width in pixels of the input or reference frame to be
bound to this optical flow session.</p>
</li>
<li>
<p><code>height</code> is the height in pixels of the input or reference frame to
be bound to this optical flow session.</p>
</li>
<li>
<p><code>imageFormat</code> is the <a href="../formats.html#VkFormat" class="xref page">VkFormat</a> of the input and reference frame
to be bound to this optical flow session.</p>
</li>
<li>
<p><code>flowVectorFormat</code> is the <a href="../formats.html#VkFormat" class="xref page">VkFormat</a> of the flow vector maps
(output or hint) to be bound to this optical flow session.</p>
</li>
<li>
<p><code>costFormat</code> is the <a href="../formats.html#VkFormat" class="xref page">VkFormat</a> of the cost maps to be bound to
this optical flow session.</p>
</li>
<li>
<p><code>outputGridSize</code> is exactly one bit of
<code>VkOpticalFlowGridSizeFlagsNV</code> specifying the grid size of the
output flow and cost maps to be bound to this optical flow session.
The size of the output flow and cost maps is determined by
<code>VkOpticalFlowSessionCreateInfoNV</code>::<code>width</code> and
<code>VkOpticalFlowSessionCreateInfoNV</code>::<code>height</code> divided by
<code>VkOpticalFlowSessionCreateInfoNV</code>::<code>outputGridSize</code>.</p>
</li>
<li>
<p><code>hintGridSize</code> is one exactly bit of
<code>VkOpticalFlowGridSizeFlagsNV</code> specifying the grid size of the hint
flow vector maps to be bound to this optical flow session.
The size of the hint maps is determined by
<code>VkOpticalFlowSessionCreateInfoNV</code>::<code>width</code> and
<code>VkOpticalFlowSessionCreateInfoNV</code>::<code>height</code> divided by
<code>VkOpticalFlowSessionCreateInfoNV</code>::<code>hintGridSize</code>.</p>
</li>
<li>
<p><code>performanceLevel</code> is the <code>VkOpticalFlowPerformanceLevelNV</code> used
for this optical flow session.</p>
</li>
<li>
<p><code>flags</code> are the <code>VkOpticalFlowSessionCreateFlagsNV</code> used for
this optical flow session.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkOpticalFlowSessionCreateInfoNV-width-07581" href="#VUID-VkOpticalFlowSessionCreateInfoNV-width-07581"></a> <span class="vuid">VUID-VkOpticalFlowSessionCreateInfoNV-width-07581</span><br>

<code>width</code> <strong>must</strong> be greater than or equal to
<code>VkPhysicalDeviceOpticalFlowPropertiesNV</code>::<code>minWidth</code> and less
than or equal to
<code>VkPhysicalDeviceOpticalFlowPropertiesNV</code>::<code>maxWidth</code></p>
</li>
<li>
<p><a id="VUID-VkOpticalFlowSessionCreateInfoNV-height-07582" href="#VUID-VkOpticalFlowSessionCreateInfoNV-height-07582"></a> <span class="vuid">VUID-VkOpticalFlowSessionCreateInfoNV-height-07582</span><br>

<code>height</code> <strong>must</strong> be greater than or equal to
<code>VkPhysicalDeviceOpticalFlowPropertiesNV</code>::<code>minHeight</code> and less
than or equal to
<code>VkPhysicalDeviceOpticalFlowPropertiesNV</code>::<code>maxHeight</code></p>
</li>
<li>
<p><a id="VUID-VkOpticalFlowSessionCreateInfoNV-imageFormat-07583" href="#VUID-VkOpticalFlowSessionCreateInfoNV-imageFormat-07583"></a> <span class="vuid">VUID-VkOpticalFlowSessionCreateInfoNV-imageFormat-07583</span><br>

<code>imageFormat</code> <strong>must</strong> be one of the formats returned by
<code>vkGetPhysicalDeviceOpticalFlowImageFormatsNV</code> for
<code>VK_OPTICAL_FLOW_USAGE_INPUT_BIT_NV</code></p>
</li>
<li>
<p><a id="VUID-VkOpticalFlowSessionCreateInfoNV-flowVectorFormat-07584" href="#VUID-VkOpticalFlowSessionCreateInfoNV-flowVectorFormat-07584"></a> <span class="vuid">VUID-VkOpticalFlowSessionCreateInfoNV-flowVectorFormat-07584</span><br>

<code>flowVectorFormat</code> <strong>must</strong> be one of the formats returned by
<code>vkGetPhysicalDeviceOpticalFlowImageFormatsNV</code> for
<code>VK_OPTICAL_FLOW_USAGE_OUTPUT_BIT_NV</code></p>
</li>
<li>
<p><a id="VUID-VkOpticalFlowSessionCreateInfoNV-costFormat-07585" href="#VUID-VkOpticalFlowSessionCreateInfoNV-costFormat-07585"></a> <span class="vuid">VUID-VkOpticalFlowSessionCreateInfoNV-costFormat-07585</span><br>

<code>costFormat</code> <strong>must</strong> be one of the formats returned by
<code>vkGetPhysicalDeviceOpticalFlowImageFormatsNV</code> for
<code>VK_OPTICAL_FLOW_USAGE_COST_BIT_NV</code> if
<code>VK_OPTICAL_FLOW_SESSION_CREATE_ENABLE_COST_BIT_NV</code> is set in
<code>flags</code></p>
</li>
<li>
<p><a id="VUID-VkOpticalFlowSessionCreateInfoNV-outputGridSize-07586" href="#VUID-VkOpticalFlowSessionCreateInfoNV-outputGridSize-07586"></a> <span class="vuid">VUID-VkOpticalFlowSessionCreateInfoNV-outputGridSize-07586</span><br>

<code>outputGridSize</code> <strong>must</strong> be exactly one of the bits reported in
<code>VkPhysicalDeviceOpticalFlowPropertiesNV</code>::<code>supportedOutputGridSizes</code></p>
</li>
<li>
<p><a id="VUID-VkOpticalFlowSessionCreateInfoNV-hintGridSize-07587" href="#VUID-VkOpticalFlowSessionCreateInfoNV-hintGridSize-07587"></a> <span class="vuid">VUID-VkOpticalFlowSessionCreateInfoNV-hintGridSize-07587</span><br>

<code>hintGridSize</code> <strong>must</strong> be exactly one of the bits reported in
<code>VkPhysicalDeviceOpticalFlowPropertiesNV</code>::<code>supportedHintGridSizes</code>
if <code>VK_OPTICAL_FLOW_SESSION_CREATE_ENABLE_HINT_BIT_NV</code> is set in
<code>flags</code></p>
</li>
<li>
<p><a id="VUID-VkOpticalFlowSessionCreateInfoNV-flags-07588" href="#VUID-VkOpticalFlowSessionCreateInfoNV-flags-07588"></a> <span class="vuid">VUID-VkOpticalFlowSessionCreateInfoNV-flags-07588</span><br>

<code>VK_OPTICAL_FLOW_SESSION_CREATE_ENABLE_HINT_BIT_NV</code> <strong>must</strong> not be set
in <code>flags</code> if
<code>VkPhysicalDeviceOpticalFlowPropertiesNV</code>::<code>hintSupported</code> is
<code>VK_FALSE</code></p>
</li>
<li>
<p><a id="VUID-VkOpticalFlowSessionCreateInfoNV-flags-07589" href="#VUID-VkOpticalFlowSessionCreateInfoNV-flags-07589"></a> <span class="vuid">VUID-VkOpticalFlowSessionCreateInfoNV-flags-07589</span><br>

<code>VK_OPTICAL_FLOW_SESSION_CREATE_ENABLE_COST_BIT_NV</code> <strong>must</strong> not be set
in <code>flags</code> if
<code>VkPhysicalDeviceOpticalFlowPropertiesNV</code>::<code>costSupported</code> is
<code>VK_FALSE</code></p>
</li>
<li>
<p><a id="VUID-VkOpticalFlowSessionCreateInfoNV-flags-07590" href="#VUID-VkOpticalFlowSessionCreateInfoNV-flags-07590"></a> <span class="vuid">VUID-VkOpticalFlowSessionCreateInfoNV-flags-07590</span><br>

<code>VK_OPTICAL_FLOW_SESSION_CREATE_ENABLE_GLOBAL_FLOW_BIT_NV</code> <strong>must</strong> not
be set in <code>flags</code> if
<code>VkPhysicalDeviceOpticalFlowPropertiesNV</code>::<code>globalFlowSupported</code>
is <code>VK_FALSE</code></p>
</li>
<li>
<p><a id="VUID-VkOpticalFlowSessionCreateInfoNV-flags-07591" href="#VUID-VkOpticalFlowSessionCreateInfoNV-flags-07591"></a> <span class="vuid">VUID-VkOpticalFlowSessionCreateInfoNV-flags-07591</span><br>

<code>VK_OPTICAL_FLOW_SESSION_CREATE_ALLOW_REGIONS_BIT_NV</code> <strong>must</strong> not be
set in <code>flags</code> if
<code>VkPhysicalDeviceOpticalFlowPropertiesNV</code>::<code>maxNumRegionsOfInterest</code>
is 0</p>
</li>
<li>
<p><a id="VUID-VkOpticalFlowSessionCreateInfoNV-flags-07592" href="#VUID-VkOpticalFlowSessionCreateInfoNV-flags-07592"></a> <span class="vuid">VUID-VkOpticalFlowSessionCreateInfoNV-flags-07592</span><br>

<code>VK_OPTICAL_FLOW_SESSION_CREATE_BOTH_DIRECTIONS_BIT_NV</code> <strong>must</strong> not be
set in <code>flags</code> if
<code>VkPhysicalDeviceOpticalFlowPropertiesNV</code>::<code>bidirectionalFlowSupported</code>
is <code>VK_FALSE</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="paragraph">
<p>Unresolved include directive in modules/ROOT/pages/chapters/VK_NV_optical_flow/optical_flow.adoc - include::partial$gen/validity/structs/VkOpticalFlowSessionCreateInfoNV.adoc[]</p>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>VkOpticalFlowSessionCreatePrivateDataInfoNV</code> structure is for NV
internal use only and is defined as:</p>
</div>
<div class="paragraph">
<p>Unresolved include directive in modules/ROOT/pages/chapters/VK_NV_optical_flow/optical_flow.adoc - include::partial$gen/api/structs/VkOpticalFlowSessionCreatePrivateDataInfoNV.adoc[]</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is a <a href="../fundamentals.html#VkStructureType" class="xref page">VkStructureType</a> value identifying this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>id</code> is an identifier for data which is passed at a memory location
specified in
<code>VkOpticalFlowSessionCreatePrivateDataInfoNV</code>::<code>pPrivateData</code>.</p>
</li>
<li>
<p><code>size</code> is the size of data in bytes which is passed at a memory
location specified in
<code>VkOpticalFlowSessionCreatePrivateDataInfoNV</code>::<code>pPrivateData</code>.</p>
</li>
<li>
<p><code>pPrivateData</code> is a pointer to NV internal data.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Unresolved include directive in modules/ROOT/pages/chapters/VK_NV_optical_flow/optical_flow.adoc - include::partial$gen/validity/structs/VkOpticalFlowSessionCreatePrivateDataInfoNV.adoc[]</p>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Optical flow vectors are generated block-wise, one vector for each block of
NxN pixels (referred to as grid).</p>
</div>
<div class="paragraph">
<p>Bits which <strong>can</strong> be set in
<code>VkOpticalFlowSessionCreateInfoNV</code>::<code>outputGridSize</code> and
<code>VkOpticalFlowSessionCreateInfoNV</code>::<code>hintGridSize</code>, or which are
returned in
<code>VkPhysicalDeviceOpticalFlowPropertiesNV</code>::<code>supportedOutputGridSizes</code>
and
<code>VkPhysicalDeviceOpticalFlowPropertiesNV</code>::<code>supportedHintGridSizes</code>
controlling optical flow grid sizes, are:</p>
</div>
<div class="paragraph">
<p>Unresolved include directive in modules/ROOT/pages/chapters/VK_NV_optical_flow/optical_flow.adoc - include::partial$gen/api/enums/VkOpticalFlowGridSizeFlagBitsNV.adoc[]</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>VK_OPTICAL_FLOW_GRID_SIZE_1X1_BIT_NV</code> specifies that grid is 1x1
pixel.</p>
</li>
<li>
<p><code>VK_OPTICAL_FLOW_GRID_SIZE_2X2_BIT_NV</code> specifies that grid is 2x2
pixel.</p>
</li>
<li>
<p><code>VK_OPTICAL_FLOW_GRID_SIZE_4X4_BIT_NV</code> specifies that grid is 4x4
pixel.</p>
</li>
<li>
<p><code>VK_OPTICAL_FLOW_GRID_SIZE_8X8_BIT_NV</code> specifies that grid is 8x8
pixel.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Unresolved include directive in modules/ROOT/pages/chapters/VK_NV_optical_flow/optical_flow.adoc - include::partial$gen/api/flags/VkOpticalFlowGridSizeFlagsNV.adoc[]</p>
</div>
<div class="paragraph">
<p><code>VkOpticalFlowGridSizeFlagsNV</code> is a bitmask type for setting a mask of
zero or more <code>VkOpticalFlowGridSizeFlagBitsNV</code>.</p>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Optical flow exposes performance levels which the application <strong>can</strong> choose
based on the desired performance and quality requirement.</p>
</div>
<div class="paragraph">
<p>The optical flow performance level types are defined with the following:</p>
</div>
<div class="paragraph">
<p>Unresolved include directive in modules/ROOT/pages/chapters/VK_NV_optical_flow/optical_flow.adoc - include::partial$gen/api/enums/VkOpticalFlowPerformanceLevelNV.adoc[]</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>VK_OPTICAL_FLOW_PERFORMANCE_LEVEL_SLOW_NV</code> is a level with slower
performance but higher quality.</p>
</li>
<li>
<p><code>VK_OPTICAL_FLOW_PERFORMANCE_LEVEL_MEDIUM_NV</code> is a level with medium
performance and medium quality.</p>
</li>
<li>
<p><code>VK_OPTICAL_FLOW_PERFORMANCE_LEVEL_FAST_NV</code> is a preset with higher
performance but lower quality.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Bits which <strong>can</strong> be set in
<code>VkOpticalFlowSessionCreateInfoNV</code>::<code>flags</code>, controlling optical
flow session operations, are:</p>
</div>
<div class="paragraph">
<p>Unresolved include directive in modules/ROOT/pages/chapters/VK_NV_optical_flow/optical_flow.adoc - include::partial$gen/api/enums/VkOpticalFlowSessionCreateFlagBitsNV.adoc[]</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>VK_OPTICAL_FLOW_SESSION_CREATE_ENABLE_HINT_BIT_NV</code> specifies that a
<a href="../resources.html#VkImageView" class="xref page">VkImageView</a> with external flow vectors will be used as hints in
performing the motion search and <strong>must</strong> be bound to
<code>VK_OPTICAL_FLOW_SESSION_BINDING_POINT_HINT_NV</code>.</p>
</li>
<li>
<p><code>VK_OPTICAL_FLOW_SESSION_CREATE_ENABLE_COST_BIT_NV</code> specifies that
the cost for the forward flow is generated in a <a href="../resources.html#VkImageView" class="xref page">VkImageView</a> which
<strong>must</strong> be bound to <code>VK_OPTICAL_FLOW_SESSION_BINDING_POINT_COST_NV</code>.
Additionally, if
<code>VK_OPTICAL_FLOW_SESSION_CREATE_BOTH_DIRECTIONS_BIT_NV</code> is also set,
the cost for backward flow is generated in a <a href="../resources.html#VkImageView" class="xref page">VkImageView</a> which
<strong>must</strong> be bound to
<code>VK_OPTICAL_FLOW_SESSION_BINDING_POINT_BACKWARD_COST_NV</code>.
The cost is the confidence level of the flow vector for each grid in the
frame.
The Cost implies how (in)accurate the flow vector is.
Higher cost value implies the flow vector to be less accurate and
vice-versa.</p>
</li>
<li>
<p><code>VK_OPTICAL_FLOW_SESSION_CREATE_ENABLE_GLOBAL_FLOW_BIT_NV</code> specifies
that a global flow vector is estimated from forward flow in a single
pixel <a href="../resources.html#VkImageView" class="xref page">VkImageView</a> which <strong>must</strong> be bound to
<code>VK_OPTICAL_FLOW_SESSION_BINDING_POINT_GLOBAL_FLOW_NV</code>.</p>
</li>
<li>
<p><code>VK_OPTICAL_FLOW_SESSION_CREATE_ALLOW_REGIONS_BIT_NV</code> specifies that
regions of interest <strong>can</strong> be specified in
<code>VkOpticalFlowExecuteInfoNV</code>.</p>
</li>
<li>
<p><code>VK_OPTICAL_FLOW_SESSION_CREATE_BOTH_DIRECTIONS_BIT_NV</code> specifies
that backward flow is generated in addition to forward flow which is
always generated.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p><code>VkOpticalFlowSessionCreateFlagsNV</code> is a bitmask type for setting a mask
of zero or more <code>VkOpticalFlowSessionCreateFlagBitsNV</code>.</p>
</div>
<div class="paragraph">
<p>Unresolved include directive in modules/ROOT/pages/chapters/VK_NV_optical_flow/optical_flow.adoc - include::partial$gen/api/flags/VkOpticalFlowSessionCreateFlagsNV.adoc[]</p>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="opticalflow-session-destruction"><a class="anchor" href="#opticalflow-session-destruction"></a>Destroying an Optical Flow Session</h4>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>To destroy an optical flow session object, call:</p>
</div>
<div class="paragraph">
<p>Unresolved include directive in modules/ROOT/pages/chapters/VK_NV_optical_flow/optical_flow.adoc - include::partial$gen/api/protos/vkDestroyOpticalFlowSessionNV.adoc[]</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>device</code> is the device that was used for the creation of the optical
flow session.</p>
</li>
<li>
<p><code>session</code> is the optical flow session to be destroyed.</p>
</li>
<li>
<p><code>pAllocator</code> controls host memory allocation as described in the
<a href="../memory.html#memory-allocation" class="xref page">Memory Allocation</a> chapter.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Unresolved include directive in modules/ROOT/pages/chapters/VK_NV_optical_flow/optical_flow.adoc - include::partial$gen/validity/protos/vkDestroyOpticalFlowSessionNV.adoc[]</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="opticalflow-session-binding-images"><a class="anchor" href="#opticalflow-session-binding-images"></a>Binding Vulkan Image Views to an Optical Flow Session</h3>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>To bind a vulkan image to an optical flow session object, call:</p>
</div>
<div class="paragraph">
<p>Unresolved include directive in modules/ROOT/pages/chapters/VK_NV_optical_flow/optical_flow.adoc - include::partial$gen/api/protos/vkBindOpticalFlowSessionImageNV.adoc[]</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>device</code> is the device which owns the optical flow session object
<code>session</code>.</p>
</li>
<li>
<p><code>session</code> is the optical flow session object to which the image view
is to be bound.</p>
</li>
<li>
<p><code>bindingPoint</code> specifies the binding point
<code>VkOpticalFlowSessionBindingPointNV</code> to which the image view is
bound.</p>
</li>
<li>
<p><code>view</code> is a <a href="../resources.html#VkImageView" class="xref page">VkImageView</a> to be bound.</p>
</li>
<li>
<p>layout <strong>must</strong> specify the layout that the image subresources accessible
from <code>view</code> will be in at the time the optical flow vectors are
calculated with <code>vkCmdOpticalFlowExecuteNV</code> on a <code>VkDevice</code>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Unresolved include directive in modules/ROOT/pages/chapters/VK_NV_optical_flow/optical_flow.adoc - include::partial$gen/validity/protos/vkBindOpticalFlowSessionImageNV.adoc[]</p>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The optical flow session binding points are defined with the following:</p>
</div>
<div class="paragraph">
<p>Unresolved include directive in modules/ROOT/pages/chapters/VK_NV_optical_flow/optical_flow.adoc - include::partial$gen/api/enums/VkOpticalFlowSessionBindingPointNV.adoc[]</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>VK_OPTICAL_FLOW_SESSION_BINDING_POINT_INPUT_NV</code> specifies the
binding point for the input frame.</p>
</li>
<li>
<p><code>VK_OPTICAL_FLOW_SESSION_BINDING_POINT_REFERENCE_NV</code> specifies the
binding point for the input reference frame.</p>
</li>
<li>
<p><code>VK_OPTICAL_FLOW_SESSION_BINDING_POINT_HINT_NV</code> specifies the
binding point for the optional external hint flow vectors.</p>
</li>
<li>
<p><code>VK_OPTICAL_FLOW_SESSION_BINDING_POINT_FLOW_VECTOR_NV</code> specifies the
binding point for output flow vectors of default forward flow
calculation.</p>
</li>
<li>
<p><code>VK_OPTICAL_FLOW_SESSION_BINDING_POINT_BACKWARD_FLOW_VECTOR_NV</code>
specifies the binding point for the optional output flow vector map of
optional backward flow calculation.</p>
</li>
<li>
<p><code>VK_OPTICAL_FLOW_SESSION_BINDING_POINT_COST_NV</code> specifies the
binding point for the optional output cost map of default forward flow
calculation.</p>
</li>
<li>
<p><code>VK_OPTICAL_FLOW_SESSION_BINDING_POINT_BACKWARD_COST_NV</code> specifies
the binding point for the optional output cost map of optional backward
flow calculation.</p>
</li>
<li>
<p><code>VK_OPTICAL_FLOW_SESSION_BINDING_POINT_GLOBAL_FLOW_NV</code> specifies the
binding point for the optional global flow value of default forward flow
calculation.</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="opticalflow-operations"><a class="anchor" href="#opticalflow-operations"></a>Optical Flow Execution</h3>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Default direction of flow estimation is forward which calculates the optical
flow from input frame to reference frame.
Optionally backward flow estimation can be additionally calculated.
An output flow vector (Vx, Vy) means that current pixel (x, y) of input
frame can be found at location (x+Vx, y+Vy) in reference frame.
A backward flow vector (Vx, Vy) means that current pixel (x, y) of reference
frame can be found at location (x+Vx, y+Vy) in input frame.</p>
</div>
<div class="paragraph">
<p>To calculate optical flow vectors from two input frames, call:</p>
</div>
<div class="paragraph">
<p>Unresolved include directive in modules/ROOT/pages/chapters/VK_NV_optical_flow/optical_flow.adoc - include::partial$gen/api/protos/vkCmdOpticalFlowExecuteNV.adoc[]</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>commandBuffer</code> is the command buffer into which the command will be
recorded.</p>
</li>
<li>
<p><code>session</code> is the optical flow session object on which this command
is operating.</p>
</li>
<li>
<p><code>pExecuteInfo</code> Info is a pointer to a
<code>VkOpticalFlowExecuteInfoNV</code>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Unresolved include directive in modules/ROOT/pages/chapters/VK_NV_optical_flow/optical_flow.adoc - include::partial$gen/validity/protos/vkCmdOpticalFlowExecuteNV.adoc[]</p>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>VkOpticalFlowExecuteInfoNV</code> structure is defined as:</p>
</div>
<div class="paragraph">
<p>Unresolved include directive in modules/ROOT/pages/chapters/VK_NV_optical_flow/optical_flow.adoc - include::partial$gen/api/structs/VkOpticalFlowExecuteInfoNV.adoc[]</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is a <a href="../fundamentals.html#VkStructureType" class="xref page">VkStructureType</a> value identifying this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>flags</code> are the <code>VkOpticalFlowExecuteFlagsNV</code> used for this
command.</p>
</li>
<li>
<p><code>regionCount</code> is the number of regions of interest specified in
<code>pRegions</code>.</p>
</li>
<li>
<p><code>pRegions</code> is a pointer to <code>regionCount</code> <code>VkRect2D</code> regions
of interest.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkOpticalFlowExecuteInfoNV-regionCount-07593" href="#VUID-VkOpticalFlowExecuteInfoNV-regionCount-07593"></a> <span class="vuid">VUID-VkOpticalFlowExecuteInfoNV-regionCount-07593</span><br>

<code>regionCount</code> <strong>must</strong> be 0 if
<code>VK_OPTICAL_FLOW_SESSION_CREATE_ALLOW_REGIONS_BIT_NV</code> was not set
for <code>VkOpticalFlowSessionNV</code> on which this command is operating</p>
</li>
</ul>
</div>
</div>
</div>
<div class="paragraph">
<p>Unresolved include directive in modules/ROOT/pages/chapters/VK_NV_optical_flow/optical_flow.adoc - include::partial$gen/validity/structs/VkOpticalFlowExecuteInfoNV.adoc[]</p>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Bits which <strong>can</strong> be set in <code>VkOpticalFlowExecuteInfoNV</code>::<code>flags</code>,
controlling optical flow execution, are:</p>
</div>
<div class="paragraph">
<p>Unresolved include directive in modules/ROOT/pages/chapters/VK_NV_optical_flow/optical_flow.adoc - include::partial$gen/api/enums/VkOpticalFlowExecuteFlagBitsNV.adoc[]</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>VK_OPTICAL_FLOW_EXECUTE_DISABLE_TEMPORAL_HINTS_BIT_NV</code> specifies
that temporal hints from previously generated flow vectors are not used.
If temporal hints are enabled, optical flow vectors from previous
<code>vkCmdOpticalFlowExecuteNV</code> call are automatically used as hints for
the current <code>vkCmdOpticalFlowExecuteNV</code> call, to take advantage of
temporal correlation in a video sequence.
Temporal hints should be disabled if there is a-priori knowledge of no
temporal correlation (e.g. a scene change, independent successive frame
pairs).</p>
</li>
</ul>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p><code>VkOpticalFlowExecuteFlagsNV</code> is a bitmask type for setting a mask of
zero or more <code>VkOpticalFlowExecuteFlagBitsNV</code>.</p>
</div>
<div class="paragraph">
<p>Unresolved include directive in modules/ROOT/pages/chapters/VK_NV_optical_flow/optical_flow.adoc - include::partial$gen/api/flags/VkOpticalFlowExecuteFlagsNV.adoc[]</p>
</div>
</div>
</div>
</div>
</div>
</div>
</article>
  </div>
</main>
</div>
<script id="site-script" src="../../../../_/js/site.js" data-ui-root-path="../../../../_"></script>
<script async src="../../../../_/js/vendor/highlight.js"></script>
<script src="../../../../_/js/vendor/lunr.js"></script>
<script src="../../../../_/js/search-ui.js" id="search-ui-script" data-site-root-path="../../../.." data-snippet-length="100" data-stylesheet="../../../../_/css/search.css"></script>
<script async src="../../../../search-index.js"></script>
  </body>
</html>
