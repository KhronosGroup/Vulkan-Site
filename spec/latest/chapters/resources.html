<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Resource Creation :: Vulkan Documentation Project</title>
    <meta name="generator" content="Antora 3.1.4">
    <link rel="stylesheet" href="../../../_/css/site.css">
    <link rel="apple-touch-icon" sizes="180x180" href="../../../_/img/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="../../../_/img/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="../../../_/img/favicon-16x16.png">
    <link rel="manifest" href="../../../_/static/site.webmanifest">
    <link rel="mask-icon" href="../../../_/img/safari-pinned-tab.svg" color="#a41e22">
    <meta name="msapplication-TileColor" content="#ffc40d">
    <meta name="theme-color" content="#ffffff">
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="../../.."><img class="navbar-item" alt="Vulkan White Label" src="../../../_/Vulkan_Docs.svg" /></a>
      <div class="navbar-item search hide-for-print">
        <div id="search-field" class="field has-filter">
          <label for="search-input"></label>
          <input id="search-input" type="text" placeholder="Search the docs">
          <label class="filter checkbox">
            <input type="checkbox" data-facet-filter="component:spec" checked> In this component
          </label>
        </div>
      </div>
      <button class="navbar-burger" aria-controls="topbar-nav" aria-expanded="false" aria-label="Toggle main menu">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <!-- <a class="navbar-item" href="#">Home</a> -->
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Specs</a>
          <div class="navbar-dropdown is-right">
            <a class="navbar-item" href="../../../spec/latest/chapters/introduction.html">Vulkan 1.3</a>
            <a class="navbar-item" href="https://registry.khronos.org/OpenGL/specs/gl/GLSLangSpec.4.60.html">GLSL</a>
            <a class="navbar-item" href="../../../guide/latest/hlsl.html">HLSL</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Education</a>
          <div class="navbar-dropdown is-right">
            <a class="navbar-item" href="../../../features/latest/features/index.html">Vulkan Feature Descriptions</a>
            <a class="navbar-item" href="../../../guide/latest/index.html">Vulkan Guide</a>
            <a class="navbar-item" href="../../../samples/latest/README.html">Vulkan Samples</a>
            <a class="navbar-item" href="../../../tutorial/latest/index.html">Vulkan Tutorial</a>
            <a class="navbar-item" href="https://www.youtube.com/c/vulkan">YouTube</a>
            <a class="navbar-item" href="https://vulkan.org">More Info at Vulkan.org</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Feedback</a>
          <div class="navbar-dropdown is-right">
            <a class="navbar-item" href="https://github.com/KhronosGroup/Vulkan-Site/issues/new/choose" target="_blank">Report a Problem</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Community</a>
          <div class="navbar-dropdown is-right">
            <a class="navbar-item" href="https://discord.gg/vulkan">Vulkan Discord</a>
            <a class="navbar-item" href="https://reddit.com/r/vulkan">Reddit</a>
            <a class="navbar-item" href="https://stackoverflow.com/questions/tagged/vulkan">Stack Overflow</a>
            <a class="navbar-item" href="https://fosstodon.org/@vulkan">Mastodon</a>
          </div>
        </div>
      </div>
    </div>
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="spec" data-version="latest">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <button class="nav-menu-toggle" aria-label="Toggle expand/collapse all" style="display: none"></button>
    <h3 class="title"><a href="../index.html">Vulkan Specification</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="introduction.html">Introduction</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="fundamentals.html">Fundamentals</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="initialization.html">Initialization</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="devsandqueues.html">Devices and Queues</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="cmdbuffers.html">Command Buffers</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="synchronization.html">Synchronization and Cache Control</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="renderpass.html">Render Pass</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="shaders.html">Shaders</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="pipelines.html">Pipelines</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="memory.html">Memory Allocation</a>
  </li>
  <li class="nav-item is-current-page" data-depth="1">
    <a class="nav-link" href="resources.html">Resource Creation</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="samplers.html">Samplers</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="descriptorsets.html">Resource Descriptors</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="interfaces.html">Shader Interfaces</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="textures.html">Image Operations</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="fragmentdensitymapops.html">Fragment Density Map Operations</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="queries.html">Queries</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="clears.html">Clear Commands</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="copies.html">Copy Commands</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="drawing.html">Drawing Commands</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="fxvertex.html">Fixed-Function Vertex Processing</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="tessellation.html">Tessellation</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="geometry.html">Geometry Shading</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="VK_NV_mesh_shader/mesh.html">Mesh Shading</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="VK_HUAWEI_cluster_culling_shader/clusterculling.html">Cluster Culling Shading</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="vertexpostproc.html">Fixed-Function Vertex Post-Processing</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="primsrast.html">Rasterization</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="fragops.html">Fragment Operations</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="framebuffer.html">The Framebuffer</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="dispatch.html">Dispatching Commands</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="device_generated_commands/generatedcommands.html">Device-Generated Commands</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="sparsemem.html">Sparse Resources</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="VK_KHR_surface/wsi.html">Window System Integration (WSI)</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="VK_KHR_deferred_host_operations/deferred_host_operations.html">Deferred Host Operations</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="VK_EXT_private_data.html">Private Data</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="accelstructures.html">Acceleration Structures</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="VK_EXT_opacity_micromap/micromaps.html">Micromap</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="raytraversal.html">Ray Traversal</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="raytracing.html">Ray Tracing</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="VK_NV_memory_decompression.html">Memory Decompression</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="videocoding.html">Video Coding</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="VK_NV_optical_flow/optical_flow.html">Optical Flow</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="executiongraphs.html">Execution Graphs</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="extensions.html">Extending Vulkan</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="features.html">Features</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="limits.html">Limits</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="formats.html">Formats</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="capabilities.html">Additional Capabilities</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="debugging.html">Debugging</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../appendices/spirvenv.html">Vulkan Environment for SPIR-V</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../appendices/memorymodel.html">Memory Model</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../appendices/compressedtex.html">Compressed Image Formats</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../appendices/versions.html">Core Revisions (Informative)</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../appendices/extensions.html">Layers &amp; Extensions (Informative)</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../appendices/roadmap.html">Vulkan Roadmap Milestones</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../appendices/boilerplate.html">API Boilerplate</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../appendices/invariance.html">Invariance</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../appendices/glossary.html">Lexicon</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../appendices/credits.html">Credits (Informative)</a>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">Vulkan Specification</span>
    <span class="version">latest</span>
  </div>
  <ul class="components">
    <li class="component">
      <div class="title"><a href="../../../tutorial/latest/00_Introduction.html">Khronos Vulkan Tutorial</a></div>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../tutorial/latest/00_Introduction.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <div class="title"><a href="../../../features/latest/features/index.html">Vulkan Feature Descriptions</a></div>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../features/latest/features/index.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <div class="title"><a href="../../../guide/latest/index.html">Vulkan Guide</a></div>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../guide/latest/index.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <div class="title"><a href="../../../samples/latest/README.html">Vulkan Samples</a></div>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../samples/latest/README.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component is-current">
      <div class="title"><a href="../index.html">Vulkan Specification</a></div>
      <ul class="versions">
        <li class="version is-current is-latest">
          <a href="../index.html">latest</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="../index.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="../index.html">Vulkan Specification</a></li>
    <li><a href="resources.html">Resource Creation</a></li>
  </ul>
</nav>
</div>
  <div class="content">
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
<article class="doc">
<h1 class="page">Resource Creation</h1>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>Vulkan supports two primary resource types: <em>buffers</em> and <em>images</em>.
Resources are views of memory with associated formatting and dimensionality.
Buffers provide access to raw arrays of bytes, whereas images <strong>can</strong> be
multidimensional and <strong>may</strong> have associated metadata.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="resources-buffers"><a class="anchor" href="#resources-buffers"></a>Buffers</h2>
<div class="sectionbody">
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Buffers represent linear arrays of data which are used for various purposes
by binding them to a graphics or compute pipeline via descriptor sets or
certain commands, or by directly specifying them as parameters to certain
commands.</p>
</div>
<div class="paragraph">
<p>Buffers are represented by <code>VkBuffer</code> handles:</p>
</div>
<div id="VkBuffer" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_VERSION_1_0
VK_DEFINE_NON_DISPATCHABLE_HANDLE(VkBuffer)</code></pre>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>To create buffers, call:</p>
</div>
<div id="vkCreateBuffer" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_VERSION_1_0
VkResult vkCreateBuffer(
    VkDevice                                    device,
    const VkBufferCreateInfo*                   pCreateInfo,
    const VkAllocationCallbacks*                pAllocator,
    VkBuffer*                                   pBuffer);</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>device</code> is the logical device that creates the buffer object.</p>
</li>
<li>
<p><code>pCreateInfo</code> is a pointer to a <a href="#VkBufferCreateInfo">VkBufferCreateInfo</a> structure
containing parameters affecting creation of the buffer.</p>
</li>
<li>
<p><code>pAllocator</code> controls host memory allocation as described in the
<a href="memory.html#memory-allocation" class="xref page">Memory Allocation</a> chapter.</p>
</li>
<li>
<p><code>pBuffer</code> is a pointer to a <a href="#VkBuffer">VkBuffer</a> handle in which the
resulting buffer object is returned.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCreateBuffer-device-09664" href="#VUID-vkCreateBuffer-device-09664"></a> <span class="vuid">VUID-vkCreateBuffer-device-09664</span><br>

    <code>device</code> <strong>must</strong> support at least one queue family with one of the
<code>VK_QUEUE_SPARSE_BINDING_BIT</code>,
    <code>VK_QUEUE_TRANSFER_BIT</code>, <code>VK_QUEUE_COMPUTE_BIT</code>, or
    <code>VK_QUEUE_GRAPHICS_BIT</code> capabilities</p>
</li>
<li>
<p><a id="VUID-vkCreateBuffer-flags-00911" href="#VUID-vkCreateBuffer-flags-00911"></a> <span class="vuid">VUID-vkCreateBuffer-flags-00911</span><br>

If the <code>flags</code> member of <code>pCreateInfo</code> includes
<code>VK_BUFFER_CREATE_SPARSE_BINDING_BIT</code>,
creating this <code>VkBuffer</code> <strong>must</strong> not cause the total required sparse
memory for all currently valid sparse resources on the device to exceed
<code>VkPhysicalDeviceLimits</code>::<code>sparseAddressSpaceSize</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCreateBuffer-device-parameter" href="#VUID-vkCreateBuffer-device-parameter"></a> <span class="vuid">VUID-vkCreateBuffer-device-parameter</span><br>
 <code>device</code> <strong>must</strong> be a valid <a href="devsandqueues.html#VkDevice" class="xref page">VkDevice</a> handle</p>
</li>
<li>
<p><a id="VUID-vkCreateBuffer-pCreateInfo-parameter" href="#VUID-vkCreateBuffer-pCreateInfo-parameter"></a> <span class="vuid">VUID-vkCreateBuffer-pCreateInfo-parameter</span><br>
 <code>pCreateInfo</code> <strong>must</strong> be a valid pointer to a valid <a href="#VkBufferCreateInfo">VkBufferCreateInfo</a> structure</p>
</li>
<li>
<p><a id="VUID-vkCreateBuffer-pAllocator-parameter" href="#VUID-vkCreateBuffer-pAllocator-parameter"></a> <span class="vuid">VUID-vkCreateBuffer-pAllocator-parameter</span><br>
 If <code>pAllocator</code> is not <code>NULL</code>, <code>pAllocator</code> <strong>must</strong> be a valid pointer to a valid <a href="memory.html#VkAllocationCallbacks" class="xref page">VkAllocationCallbacks</a> structure</p>
</li>
<li>
<p><a id="VUID-vkCreateBuffer-pBuffer-parameter" href="#VUID-vkCreateBuffer-pBuffer-parameter"></a> <span class="vuid">VUID-vkCreateBuffer-pBuffer-parameter</span><br>
 <code>pBuffer</code> <strong>must</strong> be a valid pointer to a <a href="#VkBuffer">VkBuffer</a> handle</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Return Codes</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><a href="fundamentals.html#fundamentals-successcodes" class="xref page">Success</a></dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><code>VK_SUCCESS</code></p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1"><a href="fundamentals.html#fundamentals-errorcodes" class="xref page">Failure</a></dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><code>VK_ERROR_OUT_OF_HOST_MEMORY</code></p>
</li>
<li>
<p><code>VK_ERROR_OUT_OF_DEVICE_MEMORY</code></p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>VkBufferCreateInfo</code> structure is defined as:</p>
</div>
<div id="VkBufferCreateInfo" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_VERSION_1_0
typedef struct VkBufferCreateInfo {
    VkStructureType        sType;
    const void*            pNext;
    VkBufferCreateFlags    flags;
    VkDeviceSize           size;
    VkBufferUsageFlags     usage;
    VkSharingMode          sharingMode;
    uint32_t               queueFamilyIndexCount;
    const uint32_t*        pQueueFamilyIndices;
} VkBufferCreateInfo;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is a <a href="fundamentals.html#VkStructureType" class="xref page">VkStructureType</a> value identifying this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>flags</code> is a bitmask of <a href="#VkBufferCreateFlagBits">VkBufferCreateFlagBits</a> specifying
additional parameters of the buffer.</p>
</li>
<li>
<p><code>size</code> is the size in bytes of the buffer to be created.</p>
</li>
<li>
<p><code>usage</code> is a bitmask of <a href="#VkBufferUsageFlagBits">VkBufferUsageFlagBits</a> specifying
allowed usages of the buffer.</p>
</li>
<li>
<p><code>sharingMode</code> is a <a href="#VkSharingMode">VkSharingMode</a> value specifying the sharing
mode of the buffer when it will be accessed by multiple queue families.</p>
</li>
<li>
<p><code>queueFamilyIndexCount</code> is the number of entries in the
<code>pQueueFamilyIndices</code> array.</p>
</li>
<li>
<p><code>pQueueFamilyIndices</code> is a pointer to an array of queue families
that will access this buffer.
It is ignored if <code>sharingMode</code> is not
<code>VK_SHARING_MODE_CONCURRENT</code>.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkBufferCreateInfo-None-09499" href="#VUID-VkBufferCreateInfo-None-09499"></a> <span class="vuid">VUID-VkBufferCreateInfo-None-09499</span><br>


<code>usage</code> <strong>must</strong> be a valid combination of <a href="#VkBufferUsageFlagBits">VkBufferUsageFlagBits</a>
values</p>
</li>
<li>
<p><a id="VUID-VkBufferCreateInfo-None-09500" href="#VUID-VkBufferCreateInfo-None-09500"></a> <span class="vuid">VUID-VkBufferCreateInfo-None-09500</span><br>


<code>usage</code> <strong>must</strong> not be 0</p>
</li>
<li>
<p><a id="VUID-VkBufferCreateInfo-size-00912" href="#VUID-VkBufferCreateInfo-size-00912"></a> <span class="vuid">VUID-VkBufferCreateInfo-size-00912</span><br>

<code>size</code> <strong>must</strong> be greater than <code>0</code></p>
</li>
<li>
<p><a id="VUID-VkBufferCreateInfo-sharingMode-00913" href="#VUID-VkBufferCreateInfo-sharingMode-00913"></a> <span class="vuid">VUID-VkBufferCreateInfo-sharingMode-00913</span><br>

If <code>sharingMode</code> is <code>VK_SHARING_MODE_CONCURRENT</code>,
<code>pQueueFamilyIndices</code> <strong>must</strong> be a valid pointer to an array of
<code>queueFamilyIndexCount</code> <code>uint32_t</code> values</p>
</li>
<li>
<p><a id="VUID-VkBufferCreateInfo-sharingMode-00914" href="#VUID-VkBufferCreateInfo-sharingMode-00914"></a> <span class="vuid">VUID-VkBufferCreateInfo-sharingMode-00914</span><br>

If <code>sharingMode</code> is <code>VK_SHARING_MODE_CONCURRENT</code>,
<code>queueFamilyIndexCount</code> <strong>must</strong> be greater than <code>1</code></p>
</li>
<li>
<p><a id="VUID-VkBufferCreateInfo-sharingMode-01419" href="#VUID-VkBufferCreateInfo-sharingMode-01419"></a> <span class="vuid">VUID-VkBufferCreateInfo-sharingMode-01419</span><br>

If <code>sharingMode</code> is <code>VK_SHARING_MODE_CONCURRENT</code>, each element
of <code>pQueueFamilyIndices</code> <strong>must</strong> be unique and <strong>must</strong> be less than
<code>pQueueFamilyPropertyCount</code> returned by
either <a href="devsandqueues.html#vkGetPhysicalDeviceQueueFamilyProperties2" class="xref page">vkGetPhysicalDeviceQueueFamilyProperties2</a> or
<a href="devsandqueues.html#vkGetPhysicalDeviceQueueFamilyProperties" class="xref page">vkGetPhysicalDeviceQueueFamilyProperties</a> for the
<code>physicalDevice</code> that was used to create <code>device</code></p>
</li>
<li>
<p><a id="VUID-VkBufferCreateInfo-flags-00915" href="#VUID-VkBufferCreateInfo-flags-00915"></a> <span class="vuid">VUID-VkBufferCreateInfo-flags-00915</span><br>

If the <a href="features.html#features-sparseBinding" class="xref page"><code>sparseBinding</code></a> feature is not
enabled,
<code>flags</code> <strong>must</strong> not contain <code>VK_BUFFER_CREATE_SPARSE_BINDING_BIT</code></p>
</li>
<li>
<p><a id="VUID-VkBufferCreateInfo-flags-00916" href="#VUID-VkBufferCreateInfo-flags-00916"></a> <span class="vuid">VUID-VkBufferCreateInfo-flags-00916</span><br>

If the <a href="features.html#features-sparseResidencyBuffer" class="xref page"><code>sparseResidencyBuffer</code></a>
feature is not enabled,
<code>flags</code> <strong>must</strong> not contain
<code>VK_BUFFER_CREATE_SPARSE_RESIDENCY_BIT</code></p>
</li>
<li>
<p><a id="VUID-VkBufferCreateInfo-flags-00917" href="#VUID-VkBufferCreateInfo-flags-00917"></a> <span class="vuid">VUID-VkBufferCreateInfo-flags-00917</span><br>

If the <a href="features.html#features-sparseResidencyAliased" class="xref page"><code>sparseResidencyAliased</code></a>
feature is not enabled,
<code>flags</code> <strong>must</strong> not contain <code>VK_BUFFER_CREATE_SPARSE_ALIASED_BIT</code></p>
</li>
<li>
<p><a id="VUID-VkBufferCreateInfo-flags-00918" href="#VUID-VkBufferCreateInfo-flags-00918"></a> <span class="vuid">VUID-VkBufferCreateInfo-flags-00918</span><br>

If <code>flags</code> contains <code>VK_BUFFER_CREATE_SPARSE_RESIDENCY_BIT</code> or
<code>VK_BUFFER_CREATE_SPARSE_ALIASED_BIT</code>, it <strong>must</strong> also contain
<code>VK_BUFFER_CREATE_SPARSE_BINDING_BIT</code></p>
</li>
<li>
<p><a id="VUID-VkBufferCreateInfo-pNext-00920" href="#VUID-VkBufferCreateInfo-pNext-00920"></a> <span class="vuid">VUID-VkBufferCreateInfo-pNext-00920</span><br>

If the <code>pNext</code> chain includes a
<a href="#VkExternalMemoryBufferCreateInfo">VkExternalMemoryBufferCreateInfo</a> structure, its <code>handleTypes</code>
member <strong>must</strong> only contain bits that are also in
<a href="capabilities.html#VkExternalBufferProperties" class="xref page">VkExternalBufferProperties</a>::<code>externalMemoryProperties.compatibleHandleTypes</code>,
as returned by <a href="capabilities.html#vkGetPhysicalDeviceExternalBufferProperties" class="xref page">vkGetPhysicalDeviceExternalBufferProperties</a> with
<code>pExternalBufferInfo-&gt;handleType</code> equal to any one of the handle
types specified in
<a href="#VkExternalMemoryBufferCreateInfo">VkExternalMemoryBufferCreateInfo</a>::<code>handleTypes</code></p>
</li>
<li>
<p><a id="VUID-VkBufferCreateInfo-flags-01887" href="#VUID-VkBufferCreateInfo-flags-01887"></a> <span class="vuid">VUID-VkBufferCreateInfo-flags-01887</span><br>

If the <a href="features.html#features-protectedMemory" class="xref page"><code>protectedMemory</code></a> feature is
not enabled, <code>flags</code> <strong>must</strong> not contain
<code>VK_BUFFER_CREATE_PROTECTED_BIT</code></p>
</li>
<li>
<p><a id="VUID-VkBufferCreateInfo-None-01888" href="#VUID-VkBufferCreateInfo-None-01888"></a> <span class="vuid">VUID-VkBufferCreateInfo-None-01888</span><br>

If any of the bits <code>VK_BUFFER_CREATE_SPARSE_BINDING_BIT</code>,
<code>VK_BUFFER_CREATE_SPARSE_RESIDENCY_BIT</code>, or
<code>VK_BUFFER_CREATE_SPARSE_ALIASED_BIT</code> are set,
<code>VK_BUFFER_CREATE_PROTECTED_BIT</code> <strong>must</strong> not also be set</p>
</li>
<li>
<p><a id="VUID-VkBufferCreateInfo-opaqueCaptureAddress-03337" href="#VUID-VkBufferCreateInfo-opaqueCaptureAddress-03337"></a> <span class="vuid">VUID-VkBufferCreateInfo-opaqueCaptureAddress-03337</span><br>

If
<a href="#VkBufferOpaqueCaptureAddressCreateInfo">VkBufferOpaqueCaptureAddressCreateInfo</a>::<code>opaqueCaptureAddress</code>
is not zero, <code>flags</code> <strong>must</strong> include
<code>VK_BUFFER_CREATE_DEVICE_ADDRESS_CAPTURE_REPLAY_BIT</code></p>
</li>
<li>
<p><a id="VUID-VkBufferCreateInfo-flags-03338" href="#VUID-VkBufferCreateInfo-flags-03338"></a> <span class="vuid">VUID-VkBufferCreateInfo-flags-03338</span><br>

If <code>flags</code> includes
<code>VK_BUFFER_CREATE_DEVICE_ADDRESS_CAPTURE_REPLAY_BIT</code>, the
<a href="features.html#features-bufferDeviceAddressCaptureReplay" class="xref page">    <code>bufferDeviceAddressCaptureReplay</code></a> feature
<strong>must</strong> be enabled</p>
</li>
<li>
<p><a id="VUID-VkBufferCreateInfo-size-06409" href="#VUID-VkBufferCreateInfo-size-06409"></a> <span class="vuid">VUID-VkBufferCreateInfo-size-06409</span><br>

<code>size</code> <strong>must</strong> be less than or equal to
<a href="limits.html#VkPhysicalDeviceMaintenance4Properties" class="xref page">VkPhysicalDeviceMaintenance4Properties</a>::<code>maxBufferSize</code></p>
</li>
<li>
<p><a id="VUID-VkBufferCreateInfo-flags-09641" href="#VUID-VkBufferCreateInfo-flags-09641"></a> <span class="vuid">VUID-VkBufferCreateInfo-flags-09641</span><br>

If <code>flags</code> includes <code>VK_BUFFER_CREATE_PROTECTED_BIT</code>, then
<code>usage</code> <strong>must</strong> not contain any of the following bits</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkBufferCreateInfo-sType-sType" href="#VUID-VkBufferCreateInfo-sType-sType"></a> <span class="vuid">VUID-VkBufferCreateInfo-sType-sType</span><br>
 <code>sType</code> <strong>must</strong> be <code>VK_STRUCTURE_TYPE_BUFFER_CREATE_INFO</code></p>
</li>
<li>
<p><a id="VUID-VkBufferCreateInfo-pNext-pNext" href="#VUID-VkBufferCreateInfo-pNext-pNext"></a> <span class="vuid">VUID-VkBufferCreateInfo-pNext-pNext</span><br>
 Each <code>pNext</code> member of any structure (including this one) in the <code>pNext</code> chain <strong>must</strong> be either <code>NULL</code> or a pointer to a valid instance of <a href="#VkBufferOpaqueCaptureAddressCreateInfo">VkBufferOpaqueCaptureAddressCreateInfo</a> or <a href="#VkExternalMemoryBufferCreateInfo">VkExternalMemoryBufferCreateInfo</a></p>
</li>
<li>
<p><a id="VUID-VkBufferCreateInfo-sType-unique" href="#VUID-VkBufferCreateInfo-sType-unique"></a> <span class="vuid">VUID-VkBufferCreateInfo-sType-unique</span><br>
 The <code>sType</code> value of each struct in the <code>pNext</code> chain <strong>must</strong> be unique</p>
</li>
<li>
<p><a id="VUID-VkBufferCreateInfo-flags-parameter" href="#VUID-VkBufferCreateInfo-flags-parameter"></a> <span class="vuid">VUID-VkBufferCreateInfo-flags-parameter</span><br>
 <code>flags</code> <strong>must</strong> be a valid combination of <a href="#VkBufferCreateFlagBits">VkBufferCreateFlagBits</a> values</p>
</li>
<li>
<p><a id="VUID-VkBufferCreateInfo-sharingMode-parameter" href="#VUID-VkBufferCreateInfo-sharingMode-parameter"></a> <span class="vuid">VUID-VkBufferCreateInfo-sharingMode-parameter</span><br>
 <code>sharingMode</code> <strong>must</strong> be a valid <a href="#VkSharingMode">VkSharingMode</a> value</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Bits which <strong>can</strong> be set in <a href="#VkBufferCreateInfo">VkBufferCreateInfo</a>::<code>usage</code>, specifying
usage behavior of a buffer, are:</p>
</div>
<div id="VkBufferUsageFlagBits" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_VERSION_1_0
typedef enum VkBufferUsageFlagBits {
    VK_BUFFER_USAGE_TRANSFER_SRC_BIT = 0x00000001,
    VK_BUFFER_USAGE_TRANSFER_DST_BIT = 0x00000002,
    VK_BUFFER_USAGE_UNIFORM_TEXEL_BUFFER_BIT = 0x00000004,
    VK_BUFFER_USAGE_STORAGE_TEXEL_BUFFER_BIT = 0x00000008,
    VK_BUFFER_USAGE_UNIFORM_BUFFER_BIT = 0x00000010,
    VK_BUFFER_USAGE_STORAGE_BUFFER_BIT = 0x00000020,
    VK_BUFFER_USAGE_INDEX_BUFFER_BIT = 0x00000040,
    VK_BUFFER_USAGE_VERTEX_BUFFER_BIT = 0x00000080,
    VK_BUFFER_USAGE_INDIRECT_BUFFER_BIT = 0x00000100,
  // Provided by VK_VERSION_1_2
    VK_BUFFER_USAGE_SHADER_DEVICE_ADDRESS_BIT = 0x00020000,
} VkBufferUsageFlagBits;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>VK_BUFFER_USAGE_TRANSFER_SRC_BIT</code> specifies that the buffer <strong>can</strong> be
used as the source of a <em>transfer command</em> (see the definition of
<a href="synchronization.html#synchronization-pipeline-stages-transfer" class="xref page">    <code>VK_PIPELINE_STAGE_TRANSFER_BIT</code></a>).</p>
</li>
<li>
<p><code>VK_BUFFER_USAGE_TRANSFER_DST_BIT</code> specifies that the buffer <strong>can</strong> be
used as the destination of a transfer command.</p>
</li>
<li>
<p><code>VK_BUFFER_USAGE_UNIFORM_TEXEL_BUFFER_BIT</code> specifies that the buffer
<strong>can</strong> be used to create a <code>VkBufferView</code> suitable for occupying a
<code>VkDescriptorSet</code> slot of type
<code>VK_DESCRIPTOR_TYPE_UNIFORM_TEXEL_BUFFER</code>.</p>
</li>
<li>
<p><code>VK_BUFFER_USAGE_STORAGE_TEXEL_BUFFER_BIT</code> specifies that the buffer
<strong>can</strong> be used to create a <code>VkBufferView</code> suitable for occupying a
<code>VkDescriptorSet</code> slot of type
<code>VK_DESCRIPTOR_TYPE_STORAGE_TEXEL_BUFFER</code>.</p>
</li>
<li>
<p><code>VK_BUFFER_USAGE_UNIFORM_BUFFER_BIT</code> specifies that the buffer <strong>can</strong>
be used in a <code>VkDescriptorBufferInfo</code> suitable for occupying a
<code>VkDescriptorSet</code> slot either of type
<code>VK_DESCRIPTOR_TYPE_UNIFORM_BUFFER</code> or
<code>VK_DESCRIPTOR_TYPE_UNIFORM_BUFFER_DYNAMIC</code>.</p>
</li>
<li>
<p><code>VK_BUFFER_USAGE_STORAGE_BUFFER_BIT</code> specifies that the buffer <strong>can</strong>
be used in a <code>VkDescriptorBufferInfo</code> suitable for occupying a
<code>VkDescriptorSet</code> slot either of type
<code>VK_DESCRIPTOR_TYPE_STORAGE_BUFFER</code> or
<code>VK_DESCRIPTOR_TYPE_STORAGE_BUFFER_DYNAMIC</code>.</p>
</li>
<li>
<p><code>VK_BUFFER_USAGE_INDEX_BUFFER_BIT</code> specifies that the buffer is
suitable for passing as the <code>buffer</code> parameter to
<a href="drawing.html#vkCmdBindIndexBuffer" class="xref page">vkCmdBindIndexBuffer</a>.</p>
</li>
<li>
<p><code>VK_BUFFER_USAGE_VERTEX_BUFFER_BIT</code> specifies that the buffer is
suitable for passing as an element of the <code>pBuffers</code> array to
<a href="fxvertex.html#vkCmdBindVertexBuffers" class="xref page">vkCmdBindVertexBuffers</a>.</p>
</li>
<li>
<p><code>VK_BUFFER_USAGE_INDIRECT_BUFFER_BIT</code> specifies that the buffer is
suitable for passing as the <code>buffer</code> parameter to
<a href="drawing.html#vkCmdDrawIndirect" class="xref page">vkCmdDrawIndirect</a>, <a href="drawing.html#vkCmdDrawIndexedIndirect" class="xref page">vkCmdDrawIndexedIndirect</a>,
or <a href="dispatch.html#vkCmdDispatchIndirect" class="xref page">vkCmdDispatchIndirect</a>.</p>
</li>
<li>
<p><code>VK_BUFFER_USAGE_SHADER_DEVICE_ADDRESS_BIT</code> specifies that the
buffer <strong>can</strong> be used to retrieve a buffer device address via
<a href="descriptorsets.html#vkGetBufferDeviceAddress" class="xref page">vkGetBufferDeviceAddress</a> and use that address to access the
buffer&#8217;s memory from a shader.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div id="VkBufferUsageFlags" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_VERSION_1_0
typedef VkFlags VkBufferUsageFlags;</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>VkBufferUsageFlags</code> is a bitmask type for setting a mask of zero or
more <a href="#VkBufferUsageFlagBits">VkBufferUsageFlagBits</a>.</p>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Bits which <strong>can</strong> be set in <a href="#VkBufferCreateInfo">VkBufferCreateInfo</a>::<code>flags</code>, specifying
additional parameters of a buffer, are:</p>
</div>
<div id="VkBufferCreateFlagBits" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_VERSION_1_0
typedef enum VkBufferCreateFlagBits {
    VK_BUFFER_CREATE_SPARSE_BINDING_BIT = 0x00000001,
    VK_BUFFER_CREATE_SPARSE_RESIDENCY_BIT = 0x00000002,
    VK_BUFFER_CREATE_SPARSE_ALIASED_BIT = 0x00000004,
  // Provided by VK_VERSION_1_1
    VK_BUFFER_CREATE_PROTECTED_BIT = 0x00000008,
  // Provided by VK_VERSION_1_2
    VK_BUFFER_CREATE_DEVICE_ADDRESS_CAPTURE_REPLAY_BIT = 0x00000010,
} VkBufferCreateFlagBits;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>VK_BUFFER_CREATE_SPARSE_BINDING_BIT</code> specifies that the buffer will
be backed using sparse memory binding.</p>
</li>
<li>
<p><code>VK_BUFFER_CREATE_SPARSE_RESIDENCY_BIT</code> specifies that the buffer
<strong>can</strong> be partially backed using sparse memory binding.
Buffers created with this flag <strong>must</strong> also be created with the
<code>VK_BUFFER_CREATE_SPARSE_BINDING_BIT</code> flag.</p>
</li>
<li>
<p><code>VK_BUFFER_CREATE_SPARSE_ALIASED_BIT</code> specifies that the buffer will
be backed using sparse memory binding with memory ranges that might also
simultaneously be backing another buffer (or another portion of the same
buffer).
Buffers created with this flag <strong>must</strong> also be created with the
<code>VK_BUFFER_CREATE_SPARSE_BINDING_BIT</code> flag.</p>
</li>
<li>
<p><code>VK_BUFFER_CREATE_PROTECTED_BIT</code> specifies that the buffer is a
protected buffer.</p>
</li>
<li>
<p><code>VK_BUFFER_CREATE_DEVICE_ADDRESS_CAPTURE_REPLAY_BIT</code> specifies that
the buffer&#8217;s address <strong>can</strong> be saved and reused on a subsequent run (e.g.
for trace capture and replay), see
<a href="#VkBufferOpaqueCaptureAddressCreateInfo">VkBufferOpaqueCaptureAddressCreateInfo</a> for more detail.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>See <a href="sparsemem.html#sparsememory-sparseresourcefeatures" class="xref page">Sparse Resource Features</a> and
<a href="features.html#features" class="xref page">Physical Device Features</a> for details of the sparse memory
features supported on a device.</p>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div id="VkBufferCreateFlags" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_VERSION_1_0
typedef VkFlags VkBufferCreateFlags;</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>VkBufferCreateFlags</code> is a bitmask type for setting a mask of zero or
more <a href="#VkBufferCreateFlagBits">VkBufferCreateFlagBits</a>.</p>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>To define a set of external memory handle types that <strong>may</strong> be used as backing
store for a buffer, add a <a href="#VkExternalMemoryBufferCreateInfo">VkExternalMemoryBufferCreateInfo</a> structure
to the <code>pNext</code> chain of the <a href="#VkBufferCreateInfo">VkBufferCreateInfo</a> structure.
The <code>VkExternalMemoryBufferCreateInfo</code> structure is defined as:</p>
</div>
<div id="VkExternalMemoryBufferCreateInfo" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_VERSION_1_1
typedef struct VkExternalMemoryBufferCreateInfo {
    VkStructureType                    sType;
    const void*                        pNext;
    VkExternalMemoryHandleTypeFlags    handleTypes;
} VkExternalMemoryBufferCreateInfo;</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>A <code>VkExternalMemoryBufferCreateInfo</code> structure with a non-zero
<code>handleTypes</code> field must be included in the creation parameters for a
buffer that will be bound to memory that is either exported or imported.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is a <a href="fundamentals.html#VkStructureType" class="xref page">VkStructureType</a> value identifying this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>handleTypes</code> is zero or a bitmask of
<a href="capabilities.html#VkExternalMemoryHandleTypeFlagBits" class="xref page">VkExternalMemoryHandleTypeFlagBits</a> specifying one or more external
memory handle types.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkExternalMemoryBufferCreateInfo-sType-sType" href="#VUID-VkExternalMemoryBufferCreateInfo-sType-sType"></a> <span class="vuid">VUID-VkExternalMemoryBufferCreateInfo-sType-sType</span><br>
 <code>sType</code> <strong>must</strong> be <code>VK_STRUCTURE_TYPE_EXTERNAL_MEMORY_BUFFER_CREATE_INFO</code></p>
</li>
<li>
<p><a id="VUID-VkExternalMemoryBufferCreateInfo-handleTypes-parameter" href="#VUID-VkExternalMemoryBufferCreateInfo-handleTypes-parameter"></a> <span class="vuid">VUID-VkExternalMemoryBufferCreateInfo-handleTypes-parameter</span><br>
 <code>handleTypes</code> <strong>must</strong> be a valid combination of <a href="capabilities.html#VkExternalMemoryHandleTypeFlagBits" class="xref page">VkExternalMemoryHandleTypeFlagBits</a> values</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>To request a specific device address for a buffer, add a
<a href="#VkBufferOpaqueCaptureAddressCreateInfo">VkBufferOpaqueCaptureAddressCreateInfo</a> structure to the <code>pNext</code>
chain of the <a href="#VkBufferCreateInfo">VkBufferCreateInfo</a> structure.
The <code>VkBufferOpaqueCaptureAddressCreateInfo</code> structure is defined as:</p>
</div>
<div id="VkBufferOpaqueCaptureAddressCreateInfo" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_VERSION_1_2
typedef struct VkBufferOpaqueCaptureAddressCreateInfo {
    VkStructureType    sType;
    const void*        pNext;
    uint64_t           opaqueCaptureAddress;
} VkBufferOpaqueCaptureAddressCreateInfo;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is a <a href="fundamentals.html#VkStructureType" class="xref page">VkStructureType</a> value identifying this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>opaqueCaptureAddress</code> is the opaque capture address requested for
the buffer.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>If <code>opaqueCaptureAddress</code> is zero, no specific address is requested.</p>
</div>
<div class="paragraph">
<p>If <code>opaqueCaptureAddress</code> is not zero, then it <strong>should</strong> be an address
retrieved from <a href="descriptorsets.html#vkGetBufferOpaqueCaptureAddress" class="xref page">vkGetBufferOpaqueCaptureAddress</a> for an identically
created buffer on the same implementation.</p>
</div>
<div class="paragraph">
<p>If this structure is not present, it is as if <code>opaqueCaptureAddress</code> is
zero.</p>
</div>
<div class="paragraph">
<p>Apps <strong>should</strong> avoid creating buffers with app-provided addresses and
implementation-provided addresses in the same process, to reduce the
likelihood of <code>VK_ERROR_INVALID_OPAQUE_CAPTURE_ADDRESS</code> errors.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>The expected usage for this is that a trace capture/replay tool will add the
<code>VK_BUFFER_CREATE_DEVICE_ADDRESS_CAPTURE_REPLAY_BIT</code> flag to all buffers
that use <code>VK_BUFFER_USAGE_SHADER_DEVICE_ADDRESS_BIT</code>, and during capture
will save the queried opaque device addresses in the trace.
During replay, the buffers will be created specifying the original address
so any address values stored in the trace data will remain valid.</p>
</div>
<div class="paragraph">
<p>Implementations are expected to separate such buffers in the GPU address
space so normal allocations will avoid using these addresses.
Apps/tools should avoid mixing app-provided and implementation-provided
addresses for buffers created with
<code>VK_BUFFER_CREATE_DEVICE_ADDRESS_CAPTURE_REPLAY_BIT</code>, to avoid address
space allocation conflicts.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkBufferOpaqueCaptureAddressCreateInfo-sType-sType" href="#VUID-VkBufferOpaqueCaptureAddressCreateInfo-sType-sType"></a> <span class="vuid">VUID-VkBufferOpaqueCaptureAddressCreateInfo-sType-sType</span><br>
 <code>sType</code> <strong>must</strong> be <code>VK_STRUCTURE_TYPE_BUFFER_OPAQUE_CAPTURE_ADDRESS_CREATE_INFO</code></p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>To destroy a buffer, call:</p>
</div>
<div id="vkDestroyBuffer" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_VERSION_1_0
void vkDestroyBuffer(
    VkDevice                                    device,
    VkBuffer                                    buffer,
    const VkAllocationCallbacks*                pAllocator);</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>device</code> is the logical device that destroys the buffer.</p>
</li>
<li>
<p><code>buffer</code> is the buffer to destroy.</p>
</li>
<li>
<p><code>pAllocator</code> controls host memory allocation as described in the
<a href="memory.html#memory-allocation" class="xref page">Memory Allocation</a> chapter.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkDestroyBuffer-buffer-00922" href="#VUID-vkDestroyBuffer-buffer-00922"></a> <span class="vuid">VUID-vkDestroyBuffer-buffer-00922</span><br>

All submitted commands that refer to <code>buffer</code>, either directly or
via a <code>VkBufferView</code>, <strong>must</strong> have completed execution</p>
</li>
<li>
<p><a id="VUID-vkDestroyBuffer-buffer-00923" href="#VUID-vkDestroyBuffer-buffer-00923"></a> <span class="vuid">VUID-vkDestroyBuffer-buffer-00923</span><br>

If <code>VkAllocationCallbacks</code> were provided when <code>buffer</code> was
created, a compatible set of callbacks <strong>must</strong> be provided here</p>
</li>
<li>
<p><a id="VUID-vkDestroyBuffer-buffer-00924" href="#VUID-vkDestroyBuffer-buffer-00924"></a> <span class="vuid">VUID-vkDestroyBuffer-buffer-00924</span><br>

If no <code>VkAllocationCallbacks</code> were provided when <code>buffer</code> was
created, <code>pAllocator</code> <strong>must</strong> be <code>NULL</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkDestroyBuffer-device-parameter" href="#VUID-vkDestroyBuffer-device-parameter"></a> <span class="vuid">VUID-vkDestroyBuffer-device-parameter</span><br>
 <code>device</code> <strong>must</strong> be a valid <a href="devsandqueues.html#VkDevice" class="xref page">VkDevice</a> handle</p>
</li>
<li>
<p><a id="VUID-vkDestroyBuffer-buffer-parameter" href="#VUID-vkDestroyBuffer-buffer-parameter"></a> <span class="vuid">VUID-vkDestroyBuffer-buffer-parameter</span><br>
 If <code>buffer</code> is not <a href="../appendices/boilerplate.html#VK_NULL_HANDLE" class="xref page">VK_NULL_HANDLE</a>, <code>buffer</code> <strong>must</strong> be a valid <a href="#VkBuffer">VkBuffer</a> handle</p>
</li>
<li>
<p><a id="VUID-vkDestroyBuffer-pAllocator-parameter" href="#VUID-vkDestroyBuffer-pAllocator-parameter"></a> <span class="vuid">VUID-vkDestroyBuffer-pAllocator-parameter</span><br>
 If <code>pAllocator</code> is not <code>NULL</code>, <code>pAllocator</code> <strong>must</strong> be a valid pointer to a valid <a href="memory.html#VkAllocationCallbacks" class="xref page">VkAllocationCallbacks</a> structure</p>
</li>
<li>
<p><a id="VUID-vkDestroyBuffer-buffer-parent" href="#VUID-vkDestroyBuffer-buffer-parent"></a> <span class="vuid">VUID-vkDestroyBuffer-buffer-parent</span><br>
 If <code>buffer</code> is a valid handle, it <strong>must</strong> have been created, allocated, or retrieved from <code>device</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Host Synchronization</div>
<div class="ulist">
<ul>
<li>
<p>Host access to <code>buffer</code> <strong>must</strong> be externally synchronized</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="resources-buffer-views"><a class="anchor" href="#resources-buffer-views"></a>Buffer Views</h2>
<div class="sectionbody">
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>A <em>buffer view</em> represents a contiguous range of a buffer and a specific
format to be used to interpret the data.
Buffer views are used to enable shaders to access buffer contents using
<a href="textures.html#textures" class="xref page">image operations</a>.
In order to create a valid buffer view, the buffer <strong>must</strong> have been created
with at least one of the following usage flags:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>VK_BUFFER_USAGE_UNIFORM_TEXEL_BUFFER_BIT</code></p>
</li>
<li>
<p><code>VK_BUFFER_USAGE_STORAGE_TEXEL_BUFFER_BIT</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Buffer views are represented by <code>VkBufferView</code> handles:</p>
</div>
<div id="VkBufferView" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_VERSION_1_0
VK_DEFINE_NON_DISPATCHABLE_HANDLE(VkBufferView)</code></pre>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>To create a buffer view, call:</p>
</div>
<div id="vkCreateBufferView" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_VERSION_1_0
VkResult vkCreateBufferView(
    VkDevice                                    device,
    const VkBufferViewCreateInfo*               pCreateInfo,
    const VkAllocationCallbacks*                pAllocator,
    VkBufferView*                               pView);</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>device</code> is the logical device that creates the buffer view.</p>
</li>
<li>
<p><code>pCreateInfo</code> is a pointer to a <a href="#VkBufferViewCreateInfo">VkBufferViewCreateInfo</a>
structure containing parameters to be used to create the buffer view.</p>
</li>
<li>
<p><code>pAllocator</code> controls host memory allocation as described in the
<a href="memory.html#memory-allocation" class="xref page">Memory Allocation</a> chapter.</p>
</li>
<li>
<p><code>pView</code> is a pointer to a <a href="#VkBufferView">VkBufferView</a> handle in which the
resulting buffer view object is returned.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCreateBufferView-device-09665" href="#VUID-vkCreateBufferView-device-09665"></a> <span class="vuid">VUID-vkCreateBufferView-device-09665</span><br>

<code>device</code> <strong>must</strong> support at least one queue family with one of the
<code>VK_QUEUE_COMPUTE_BIT</code> or <code>VK_QUEUE_GRAPHICS_BIT</code> capabilities</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCreateBufferView-device-parameter" href="#VUID-vkCreateBufferView-device-parameter"></a> <span class="vuid">VUID-vkCreateBufferView-device-parameter</span><br>
 <code>device</code> <strong>must</strong> be a valid <a href="devsandqueues.html#VkDevice" class="xref page">VkDevice</a> handle</p>
</li>
<li>
<p><a id="VUID-vkCreateBufferView-pCreateInfo-parameter" href="#VUID-vkCreateBufferView-pCreateInfo-parameter"></a> <span class="vuid">VUID-vkCreateBufferView-pCreateInfo-parameter</span><br>
 <code>pCreateInfo</code> <strong>must</strong> be a valid pointer to a valid <a href="#VkBufferViewCreateInfo">VkBufferViewCreateInfo</a> structure</p>
</li>
<li>
<p><a id="VUID-vkCreateBufferView-pAllocator-parameter" href="#VUID-vkCreateBufferView-pAllocator-parameter"></a> <span class="vuid">VUID-vkCreateBufferView-pAllocator-parameter</span><br>
 If <code>pAllocator</code> is not <code>NULL</code>, <code>pAllocator</code> <strong>must</strong> be a valid pointer to a valid <a href="memory.html#VkAllocationCallbacks" class="xref page">VkAllocationCallbacks</a> structure</p>
</li>
<li>
<p><a id="VUID-vkCreateBufferView-pView-parameter" href="#VUID-vkCreateBufferView-pView-parameter"></a> <span class="vuid">VUID-vkCreateBufferView-pView-parameter</span><br>
 <code>pView</code> <strong>must</strong> be a valid pointer to a <a href="#VkBufferView">VkBufferView</a> handle</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Return Codes</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><a href="fundamentals.html#fundamentals-successcodes" class="xref page">Success</a></dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><code>VK_SUCCESS</code></p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1"><a href="fundamentals.html#fundamentals-errorcodes" class="xref page">Failure</a></dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><code>VK_ERROR_OUT_OF_HOST_MEMORY</code></p>
</li>
<li>
<p><code>VK_ERROR_OUT_OF_DEVICE_MEMORY</code></p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>VkBufferViewCreateInfo</code> structure is defined as:</p>
</div>
<div id="VkBufferViewCreateInfo" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_VERSION_1_0
typedef struct VkBufferViewCreateInfo {
    VkStructureType            sType;
    const void*                pNext;
    VkBufferViewCreateFlags    flags;
    VkBuffer                   buffer;
    VkFormat                   format;
    VkDeviceSize               offset;
    VkDeviceSize               range;
} VkBufferViewCreateInfo;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is a <a href="fundamentals.html#VkStructureType" class="xref page">VkStructureType</a> value identifying this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>flags</code> is reserved for future use.</p>
</li>
<li>
<p><code>buffer</code> is a <a href="#VkBuffer">VkBuffer</a> on which the view will be created.</p>
</li>
<li>
<p><code>format</code> is a <a href="formats.html#VkFormat" class="xref page">VkFormat</a> describing the format of the data
elements in the buffer.</p>
</li>
<li>
<p><code>offset</code> is an offset in bytes from the base address of the buffer.
Accesses to the buffer view from shaders use addressing that is relative
to this starting offset.</p>
</li>
<li>
<p><code>range</code> is a size in bytes of the buffer view.
If <code>range</code> is equal to <code>VK_WHOLE_SIZE</code>, the range from
<code>offset</code> to the end of the buffer is used.
If <code>VK_WHOLE_SIZE</code> is used and the remaining size of the buffer is
not a multiple of the <a href="formats.html#texel-block-size" class="xref page">texel block size</a> of
<code>format</code>, the nearest smaller multiple is used.</p>
</li>
</ul>
</div>
<div id="resources-buffer-views-usage" class="paragraph">
<p>The buffer view has a <em>buffer view usage</em> identifying which descriptor types
can be created from it.
This usage
is equal to the <a href="#VkBufferCreateInfo">VkBufferCreateInfo</a>::<code>usage</code> value used to create
<code>buffer</code>.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkBufferViewCreateInfo-offset-00925" href="#VUID-VkBufferViewCreateInfo-offset-00925"></a> <span class="vuid">VUID-VkBufferViewCreateInfo-offset-00925</span><br>

<code>offset</code> <strong>must</strong> be less than the size of <code>buffer</code></p>
</li>
<li>
<p><a id="VUID-VkBufferViewCreateInfo-range-00928" href="#VUID-VkBufferViewCreateInfo-range-00928"></a> <span class="vuid">VUID-VkBufferViewCreateInfo-range-00928</span><br>

If <code>range</code> is not equal to <code>VK_WHOLE_SIZE</code>, <code>range</code> <strong>must</strong> be
greater than <code>0</code></p>
</li>
<li>
<p><a id="VUID-VkBufferViewCreateInfo-range-00929" href="#VUID-VkBufferViewCreateInfo-range-00929"></a> <span class="vuid">VUID-VkBufferViewCreateInfo-range-00929</span><br>

If <code>range</code> is not equal to <code>VK_WHOLE_SIZE</code>, <code>range</code> <strong>must</strong> be
an integer multiple of the texel block size of <code>format</code></p>
</li>
<li>
<p><a id="VUID-VkBufferViewCreateInfo-range-00930" href="#VUID-VkBufferViewCreateInfo-range-00930"></a> <span class="vuid">VUID-VkBufferViewCreateInfo-range-00930</span><br>

If <code>range</code> is not equal to <code>VK_WHOLE_SIZE</code>, the number of texel
buffer elements given by <span class="eq">(<code>range</code> / (texel block
size)  (texels per block))</span> where texel block size and
texels per block are as defined in the <a href="formats.html#formats-compatibility" class="xref page">    Compatible Formats</a> table for <code>format</code>, <strong>must</strong> be less than or equal
to <code>VkPhysicalDeviceLimits</code>::<code>maxTexelBufferElements</code></p>
</li>
<li>
<p><a id="VUID-VkBufferViewCreateInfo-offset-00931" href="#VUID-VkBufferViewCreateInfo-offset-00931"></a> <span class="vuid">VUID-VkBufferViewCreateInfo-offset-00931</span><br>

If <code>range</code> is not equal to <code>VK_WHOLE_SIZE</code>, the sum of
<code>offset</code> and <code>range</code> <strong>must</strong> be less than or equal to the size of
<code>buffer</code></p>
</li>
<li>
<p><a id="VUID-VkBufferViewCreateInfo-range-04059" href="#VUID-VkBufferViewCreateInfo-range-04059"></a> <span class="vuid">VUID-VkBufferViewCreateInfo-range-04059</span><br>

If <code>range</code> is equal to <code>VK_WHOLE_SIZE</code>, the number of texel
buffer elements given by <span class="eq">((size - <code>offset</code>) / (texel
block size)  (texels per block))</span> where size is the size
of <code>buffer</code>, and texel block size and texels per block are as
defined in the <a href="formats.html#formats-compatibility" class="xref page">Compatible Formats</a> table for
<code>format</code>, <strong>must</strong> be less than or equal to
<code>VkPhysicalDeviceLimits</code>::<code>maxTexelBufferElements</code></p>
</li>
<li>
<p><a id="VUID-VkBufferViewCreateInfo-buffer-00932" href="#VUID-VkBufferViewCreateInfo-buffer-00932"></a> <span class="vuid">VUID-VkBufferViewCreateInfo-buffer-00932</span><br>

<code>buffer</code> <strong>must</strong> have been created with a <code>usage</code> value containing
at least one of <code>VK_BUFFER_USAGE_UNIFORM_TEXEL_BUFFER_BIT</code> or
<code>VK_BUFFER_USAGE_STORAGE_TEXEL_BUFFER_BIT</code></p>
</li>
<li>
<p><a id="VUID-VkBufferViewCreateInfo-format-08778" href="#VUID-VkBufferViewCreateInfo-format-08778"></a> <span class="vuid">VUID-VkBufferViewCreateInfo-format-08778</span><br>

If the <a href="#resources-buffer-views-usage">buffer view usage</a> contains
<code>VK_BUFFER_USAGE_UNIFORM_TEXEL_BUFFER_BIT</code>, then
<a href="#resources-buffer-view-format-features">format features</a> of
<code>format</code> <strong>must</strong> contain
<code>VK_FORMAT_FEATURE_UNIFORM_TEXEL_BUFFER_BIT</code></p>
</li>
<li>
<p><a id="VUID-VkBufferViewCreateInfo-format-08779" href="#VUID-VkBufferViewCreateInfo-format-08779"></a> <span class="vuid">VUID-VkBufferViewCreateInfo-format-08779</span><br>

If the <a href="#resources-buffer-views-usage">buffer view usage</a> contains
<code>VK_BUFFER_USAGE_STORAGE_TEXEL_BUFFER_BIT</code>, then
<a href="#resources-buffer-view-format-features">format features</a> of
<code>format</code> <strong>must</strong> contain
<code>VK_FORMAT_FEATURE_STORAGE_TEXEL_BUFFER_BIT</code></p>
</li>
<li>
<p><a id="VUID-VkBufferViewCreateInfo-buffer-00935" href="#VUID-VkBufferViewCreateInfo-buffer-00935"></a> <span class="vuid">VUID-VkBufferViewCreateInfo-buffer-00935</span><br>

If <code>buffer</code> is non-sparse then it <strong>must</strong> be bound completely and
contiguously to a single <code>VkDeviceMemory</code> object</p>
</li>
<li>
<p><a id="VUID-VkBufferViewCreateInfo-offset-02749" href="#VUID-VkBufferViewCreateInfo-offset-02749"></a> <span class="vuid">VUID-VkBufferViewCreateInfo-offset-02749</span><br>

If the <a href="#features-texelBufferAlignment"><code>texelBufferAlignment</code></a>
feature is not enabled,
<code>offset</code> <strong>must</strong> be a multiple of
<code>VkPhysicalDeviceLimits</code>::<code>minTexelBufferOffsetAlignment</code></p>
</li>
<li>
<p><a id="VUID-VkBufferViewCreateInfo-buffer-02750" href="#VUID-VkBufferViewCreateInfo-buffer-02750"></a> <span class="vuid">VUID-VkBufferViewCreateInfo-buffer-02750</span><br>

If the <a href="#features-texelBufferAlignment"><code>texelBufferAlignment</code></a>
feature is enabled and if <code>buffer</code> was created with <code>usage</code>
containing <code>VK_BUFFER_USAGE_STORAGE_TEXEL_BUFFER_BIT</code>, <code>offset</code>
<strong>must</strong> be a multiple of the lesser of
<a href="limits.html#VkPhysicalDeviceTexelBufferAlignmentProperties" class="xref page">VkPhysicalDeviceTexelBufferAlignmentProperties</a>::<code>storageTexelBufferOffsetAlignmentBytes</code>
or, if
<a href="limits.html#VkPhysicalDeviceTexelBufferAlignmentProperties" class="xref page">VkPhysicalDeviceTexelBufferAlignmentProperties</a>::<code>storageTexelBufferOffsetSingleTexelAlignment</code>
is <code>VK_TRUE</code>, the size of a texel of the requested <code>format</code>.
If the size of a texel is a multiple of three bytes, then the size of a
single component of <code>format</code> is used instead</p>
</li>
<li>
<p><a id="VUID-VkBufferViewCreateInfo-buffer-02751" href="#VUID-VkBufferViewCreateInfo-buffer-02751"></a> <span class="vuid">VUID-VkBufferViewCreateInfo-buffer-02751</span><br>

If the <a href="#features-texelBufferAlignment"><code>texelBufferAlignment</code></a>
feature is enabled and if <code>buffer</code> was created with <code>usage</code>
containing <code>VK_BUFFER_USAGE_UNIFORM_TEXEL_BUFFER_BIT</code>, <code>offset</code>
<strong>must</strong> be a multiple of the lesser of
<a href="limits.html#VkPhysicalDeviceTexelBufferAlignmentProperties" class="xref page">VkPhysicalDeviceTexelBufferAlignmentProperties</a>::<code>uniformTexelBufferOffsetAlignmentBytes</code>
or, if
<a href="limits.html#VkPhysicalDeviceTexelBufferAlignmentProperties" class="xref page">VkPhysicalDeviceTexelBufferAlignmentProperties</a>::<code>uniformTexelBufferOffsetSingleTexelAlignment</code>
is <code>VK_TRUE</code>, the size of a texel of the requested <code>format</code>.
If the size of a texel is a multiple of three bytes, then the size of a
single component of <code>format</code> is used instead</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkBufferViewCreateInfo-sType-sType" href="#VUID-VkBufferViewCreateInfo-sType-sType"></a> <span class="vuid">VUID-VkBufferViewCreateInfo-sType-sType</span><br>
 <code>sType</code> <strong>must</strong> be <code>VK_STRUCTURE_TYPE_BUFFER_VIEW_CREATE_INFO</code></p>
</li>
<li>
<p><a id="VUID-VkBufferViewCreateInfo-pNext-pNext" href="#VUID-VkBufferViewCreateInfo-pNext-pNext"></a> <span class="vuid">VUID-VkBufferViewCreateInfo-pNext-pNext</span><br>
 <code>pNext</code> <strong>must</strong> be <code>NULL</code></p>
</li>
<li>
<p><a id="VUID-VkBufferViewCreateInfo-flags-zerobitmask" href="#VUID-VkBufferViewCreateInfo-flags-zerobitmask"></a> <span class="vuid">VUID-VkBufferViewCreateInfo-flags-zerobitmask</span><br>
 <code>flags</code> <strong>must</strong> be <code>0</code></p>
</li>
<li>
<p><a id="VUID-VkBufferViewCreateInfo-buffer-parameter" href="#VUID-VkBufferViewCreateInfo-buffer-parameter"></a> <span class="vuid">VUID-VkBufferViewCreateInfo-buffer-parameter</span><br>
 <code>buffer</code> <strong>must</strong> be a valid <a href="#VkBuffer">VkBuffer</a> handle</p>
</li>
<li>
<p><a id="VUID-VkBufferViewCreateInfo-format-parameter" href="#VUID-VkBufferViewCreateInfo-format-parameter"></a> <span class="vuid">VUID-VkBufferViewCreateInfo-format-parameter</span><br>
 <code>format</code> <strong>must</strong> be a valid <a href="formats.html#VkFormat" class="xref page">VkFormat</a> value</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div id="VkBufferViewCreateFlags" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_VERSION_1_0
typedef VkFlags VkBufferViewCreateFlags;</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>VkBufferViewCreateFlags</code> is a bitmask type for setting a mask, but is
currently reserved for future use.</p>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>To destroy a buffer view, call:</p>
</div>
<div id="vkDestroyBufferView" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_VERSION_1_0
void vkDestroyBufferView(
    VkDevice                                    device,
    VkBufferView                                bufferView,
    const VkAllocationCallbacks*                pAllocator);</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>device</code> is the logical device that destroys the buffer view.</p>
</li>
<li>
<p><code>bufferView</code> is the buffer view to destroy.</p>
</li>
<li>
<p><code>pAllocator</code> controls host memory allocation as described in the
<a href="memory.html#memory-allocation" class="xref page">Memory Allocation</a> chapter.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkDestroyBufferView-bufferView-00936" href="#VUID-vkDestroyBufferView-bufferView-00936"></a> <span class="vuid">VUID-vkDestroyBufferView-bufferView-00936</span><br>

All submitted commands that refer to <code>bufferView</code> <strong>must</strong> have
completed execution</p>
</li>
<li>
<p><a id="VUID-vkDestroyBufferView-bufferView-00937" href="#VUID-vkDestroyBufferView-bufferView-00937"></a> <span class="vuid">VUID-vkDestroyBufferView-bufferView-00937</span><br>

If <code>VkAllocationCallbacks</code> were provided when <code>bufferView</code> was
created, a compatible set of callbacks <strong>must</strong> be provided here</p>
</li>
<li>
<p><a id="VUID-vkDestroyBufferView-bufferView-00938" href="#VUID-vkDestroyBufferView-bufferView-00938"></a> <span class="vuid">VUID-vkDestroyBufferView-bufferView-00938</span><br>

If no <code>VkAllocationCallbacks</code> were provided when <code>bufferView</code>
was created, <code>pAllocator</code> <strong>must</strong> be <code>NULL</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkDestroyBufferView-device-parameter" href="#VUID-vkDestroyBufferView-device-parameter"></a> <span class="vuid">VUID-vkDestroyBufferView-device-parameter</span><br>
 <code>device</code> <strong>must</strong> be a valid <a href="devsandqueues.html#VkDevice" class="xref page">VkDevice</a> handle</p>
</li>
<li>
<p><a id="VUID-vkDestroyBufferView-bufferView-parameter" href="#VUID-vkDestroyBufferView-bufferView-parameter"></a> <span class="vuid">VUID-vkDestroyBufferView-bufferView-parameter</span><br>
 If <code>bufferView</code> is not <a href="../appendices/boilerplate.html#VK_NULL_HANDLE" class="xref page">VK_NULL_HANDLE</a>, <code>bufferView</code> <strong>must</strong> be a valid <a href="#VkBufferView">VkBufferView</a> handle</p>
</li>
<li>
<p><a id="VUID-vkDestroyBufferView-pAllocator-parameter" href="#VUID-vkDestroyBufferView-pAllocator-parameter"></a> <span class="vuid">VUID-vkDestroyBufferView-pAllocator-parameter</span><br>
 If <code>pAllocator</code> is not <code>NULL</code>, <code>pAllocator</code> <strong>must</strong> be a valid pointer to a valid <a href="memory.html#VkAllocationCallbacks" class="xref page">VkAllocationCallbacks</a> structure</p>
</li>
<li>
<p><a id="VUID-vkDestroyBufferView-bufferView-parent" href="#VUID-vkDestroyBufferView-bufferView-parent"></a> <span class="vuid">VUID-vkDestroyBufferView-bufferView-parent</span><br>
 If <code>bufferView</code> is a valid handle, it <strong>must</strong> have been created, allocated, or retrieved from <code>device</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Host Synchronization</div>
<div class="ulist">
<ul>
<li>
<p>Host access to <code>bufferView</code> <strong>must</strong> be externally synchronized</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="resources-buffer-view-format-features"><a class="anchor" href="#resources-buffer-view-format-features"></a>Buffer View Format Features</h3>
<div class="paragraph">
<p>Valid uses of a <a href="#VkBufferView">VkBufferView</a> <strong>may</strong> depend on the buffer view&#8217;s <em>format
features</em>, defined below.
Such constraints are documented in the affected valid usage statement.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>If Vulkan 1.3 is supported or the <code><code>VK_KHR_format_feature_flags2</code></code>
extension is supported, then the buffer view&#8217;s set of <em>format features</em>
is the value of <a href="formats.html#VkFormatProperties3" class="xref page">VkFormatProperties3</a>::<code>bufferFeatures</code> found by
calling <a href="formats.html#vkGetPhysicalDeviceFormatProperties2" class="xref page">vkGetPhysicalDeviceFormatProperties2</a> on the same
<code>format</code> as <a href="#VkBufferViewCreateInfo">VkBufferViewCreateInfo</a>::<code>format</code>.</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="resources-images"><a class="anchor" href="#resources-images"></a>Images</h2>
<div class="sectionbody">
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Images represent multidimensional - up to 3 - arrays of data which <strong>can</strong> be
used for various purposes (e.g. attachments, textures), by binding them to a
graphics or compute pipeline via descriptor sets, or by directly specifying
them as parameters to certain commands.</p>
</div>
<div class="paragraph">
<p>Images are represented by <code>VkImage</code> handles:</p>
</div>
<div id="VkImage" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_VERSION_1_0
VK_DEFINE_NON_DISPATCHABLE_HANDLE(VkImage)</code></pre>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>To create images, call:</p>
</div>
<div id="vkCreateImage" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_VERSION_1_0
VkResult vkCreateImage(
    VkDevice                                    device,
    const VkImageCreateInfo*                    pCreateInfo,
    const VkAllocationCallbacks*                pAllocator,
    VkImage*                                    pImage);</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>device</code> is the logical device that creates the image.</p>
</li>
<li>
<p><code>pCreateInfo</code> is a pointer to a <a href="#VkImageCreateInfo">VkImageCreateInfo</a> structure
containing parameters to be used to create the image.</p>
</li>
<li>
<p><code>pAllocator</code> controls host memory allocation as described in the
<a href="memory.html#memory-allocation" class="xref page">Memory Allocation</a> chapter.</p>
</li>
<li>
<p><code>pImage</code> is a pointer to a <a href="#VkImage">VkImage</a> handle in which the
resulting image object is returned.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCreateImage-device-09666" href="#VUID-vkCreateImage-device-09666"></a> <span class="vuid">VUID-vkCreateImage-device-09666</span><br>

    <code>device</code> <strong>must</strong> support at least one queue family with one of the
<code>VK_QUEUE_SPARSE_BINDING_BIT</code>,
    <code>VK_QUEUE_TRANSFER_BIT</code>, <code>VK_QUEUE_COMPUTE_BIT</code>, or
    <code>VK_QUEUE_GRAPHICS_BIT</code> capabilities</p>
</li>
<li>
<p><a id="VUID-vkCreateImage-flags-00939" href="#VUID-vkCreateImage-flags-00939"></a> <span class="vuid">VUID-vkCreateImage-flags-00939</span><br>

If the <code>flags</code> member of <code>pCreateInfo</code> includes
<code>VK_IMAGE_CREATE_SPARSE_BINDING_BIT</code>,
creating this <code>VkImage</code> <strong>must</strong> not cause the total required sparse
memory for all currently valid sparse resources on the device to exceed
<code>VkPhysicalDeviceLimits</code>::<code>sparseAddressSpaceSize</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCreateImage-device-parameter" href="#VUID-vkCreateImage-device-parameter"></a> <span class="vuid">VUID-vkCreateImage-device-parameter</span><br>
 <code>device</code> <strong>must</strong> be a valid <a href="devsandqueues.html#VkDevice" class="xref page">VkDevice</a> handle</p>
</li>
<li>
<p><a id="VUID-vkCreateImage-pCreateInfo-parameter" href="#VUID-vkCreateImage-pCreateInfo-parameter"></a> <span class="vuid">VUID-vkCreateImage-pCreateInfo-parameter</span><br>
 <code>pCreateInfo</code> <strong>must</strong> be a valid pointer to a valid <a href="#VkImageCreateInfo">VkImageCreateInfo</a> structure</p>
</li>
<li>
<p><a id="VUID-vkCreateImage-pAllocator-parameter" href="#VUID-vkCreateImage-pAllocator-parameter"></a> <span class="vuid">VUID-vkCreateImage-pAllocator-parameter</span><br>
 If <code>pAllocator</code> is not <code>NULL</code>, <code>pAllocator</code> <strong>must</strong> be a valid pointer to a valid <a href="memory.html#VkAllocationCallbacks" class="xref page">VkAllocationCallbacks</a> structure</p>
</li>
<li>
<p><a id="VUID-vkCreateImage-pImage-parameter" href="#VUID-vkCreateImage-pImage-parameter"></a> <span class="vuid">VUID-vkCreateImage-pImage-parameter</span><br>
 <code>pImage</code> <strong>must</strong> be a valid pointer to a <a href="#VkImage">VkImage</a> handle</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Return Codes</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><a href="fundamentals.html#fundamentals-successcodes" class="xref page">Success</a></dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><code>VK_SUCCESS</code></p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1"><a href="fundamentals.html#fundamentals-errorcodes" class="xref page">Failure</a></dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><code>VK_ERROR_OUT_OF_HOST_MEMORY</code></p>
</li>
<li>
<p><code>VK_ERROR_OUT_OF_DEVICE_MEMORY</code></p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>VkImageCreateInfo</code> structure is defined as:</p>
</div>
<div id="VkImageCreateInfo" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_VERSION_1_0
typedef struct VkImageCreateInfo {
    VkStructureType          sType;
    const void*              pNext;
    VkImageCreateFlags       flags;
    VkImageType              imageType;
    VkFormat                 format;
    VkExtent3D               extent;
    uint32_t                 mipLevels;
    uint32_t                 arrayLayers;
    VkSampleCountFlagBits    samples;
    VkImageTiling            tiling;
    VkImageUsageFlags        usage;
    VkSharingMode            sharingMode;
    uint32_t                 queueFamilyIndexCount;
    const uint32_t*          pQueueFamilyIndices;
    VkImageLayout            initialLayout;
} VkImageCreateInfo;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is a <a href="fundamentals.html#VkStructureType" class="xref page">VkStructureType</a> value identifying this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>flags</code> is a bitmask of <a href="#VkImageCreateFlagBits">VkImageCreateFlagBits</a> describing
additional parameters of the image.</p>
</li>
<li>
<p><code>imageType</code> is a <a href="#VkImageType">VkImageType</a> value specifying the basic
dimensionality of the image.
Layers in array textures do not count as a dimension for the purposes of
the image type.</p>
</li>
<li>
<p><code>format</code> is a <a href="formats.html#VkFormat" class="xref page">VkFormat</a> describing the format and type of the
texel blocks that will be contained in the image.</p>
</li>
<li>
<p><code>extent</code> is a <a href="fundamentals.html#VkExtent3D" class="xref page">VkExtent3D</a> describing the number of data
elements in each dimension of the base level.</p>
</li>
<li>
<p><code>mipLevels</code> describes the number of levels of detail available for
minified sampling of the image.</p>
</li>
<li>
<p><code>arrayLayers</code> is the number of layers in the image.</p>
</li>
<li>
<p><code>samples</code> is a <a href="limits.html#VkSampleCountFlagBits" class="xref page">VkSampleCountFlagBits</a> value specifying the
number of <a href="primsrast.html#primsrast-multisampling" class="xref page">samples per texel</a>.</p>
</li>
<li>
<p><code>tiling</code> is a <a href="#VkImageTiling">VkImageTiling</a> value specifying the tiling
arrangement of the texel blocks in memory.</p>
</li>
<li>
<p><code>usage</code> is a bitmask of <a href="#VkImageUsageFlagBits">VkImageUsageFlagBits</a> describing the
intended usage of the image.</p>
</li>
<li>
<p><code>sharingMode</code> is a <a href="#VkSharingMode">VkSharingMode</a> value specifying the sharing
mode of the image when it will be accessed by multiple queue families.</p>
</li>
<li>
<p><code>queueFamilyIndexCount</code> is the number of entries in the
<code>pQueueFamilyIndices</code> array.</p>
</li>
<li>
<p><code>pQueueFamilyIndices</code> is a pointer to an array of queue families
that will access this image.
It is ignored if <code>sharingMode</code> is not
<code>VK_SHARING_MODE_CONCURRENT</code>.</p>
</li>
<li>
<p><code>initialLayout</code> is a <a href="#VkImageLayout">VkImageLayout</a> value specifying the
initial <a href="#VkImageLayout">VkImageLayout</a> of all image subresources of the image.
See <a href="#resources-image-layouts">Image Layouts</a>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Images created with <code>tiling</code> equal to <code>VK_IMAGE_TILING_LINEAR</code> have
further restrictions on their limits and capabilities compared to images
created with <code>tiling</code> equal to <code>VK_IMAGE_TILING_OPTIMAL</code>.
Creation of images with tiling <code>VK_IMAGE_TILING_LINEAR</code> <strong>may</strong> not be
supported unless other parameters meet all of the constraints:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>imageType</code> is <code>VK_IMAGE_TYPE_2D</code></p>
</li>
<li>
<p><code>format</code> is not a depth/stencil format</p>
</li>
<li>
<p><code>mipLevels</code> is 1</p>
</li>
<li>
<p><code>arrayLayers</code> is 1</p>
</li>
<li>
<p><code>samples</code> is <code>VK_SAMPLE_COUNT_1_BIT</code></p>
</li>
<li>
<p><code>usage</code> only includes <code>VK_IMAGE_USAGE_TRANSFER_SRC_BIT</code> and/or
<code>VK_IMAGE_USAGE_TRANSFER_DST_BIT</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Images created with one of the <a href="formats.html#formats-requiring-sampler-ycbcr-conversion" class="xref page">formats that require a sampler YC<sub>B</sub>C<sub>R</sub> conversion</a>, have further
restrictions on their limits and capabilities compared to images created
with other formats.
Creation of images with a format requiring
<a href="formats.html#formats-requiring-sampler-ycbcr-conversion" class="xref page">YC<sub>B</sub>C<sub>R</sub> conversion</a> <strong>may</strong> not
be supported unless other parameters meet all of the constraints:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>imageType</code> is <code>VK_IMAGE_TYPE_2D</code></p>
</li>
<li>
<p><code>mipLevels</code> is 1</p>
</li>
<li>
<p><code>arrayLayers</code> is 1, unless
otherwise indicated by
<a href="capabilities.html#VkImageFormatProperties" class="xref page">VkImageFormatProperties</a>::<code>maxArrayLayers</code>, as returned by
<a href="capabilities.html#vkGetPhysicalDeviceImageFormatProperties" class="xref page">vkGetPhysicalDeviceImageFormatProperties</a></p>
</li>
<li>
<p><code>samples</code> is <code>VK_SAMPLE_COUNT_1_BIT</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Implementations <strong>may</strong> support additional limits and capabilities beyond those
listed above.</p>
</div>
<div class="paragraph">
<p>To determine the set of valid <code>usage</code> bits for a given format, call
<a href="formats.html#vkGetPhysicalDeviceFormatProperties" class="xref page">vkGetPhysicalDeviceFormatProperties</a>.</p>
</div>
<div class="paragraph">
<p>If the size of the resultant image would exceed <code>maxResourceSize</code>, then
<a href="#vkCreateImage">vkCreateImage</a> <strong>must</strong> fail and return
<code>VK_ERROR_OUT_OF_DEVICE_MEMORY</code>.
This failure <strong>may</strong> occur even when all image creation parameters satisfy
their valid usage requirements.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>For images created without <code>VK_IMAGE_CREATE_EXTENDED_USAGE_BIT</code> a
<code>usage</code> bit is valid if it is supported for the format the image is
created with.</p>
</div>
<div class="paragraph">
<p>For images created with <code>VK_IMAGE_CREATE_EXTENDED_USAGE_BIT</code> a
<code>usage</code> bit is valid if it is supported for at least one of the formats
a <code>VkImageView</code> created from the image <strong>can</strong> have (see
<a href="#resources-image-views">Image Views</a> for more detail).</p>
</div>
</td>
</tr>
</table>
</div>
<div id="resources-image-creation-limits" class="sidebarblock">
<div class="content">
<div class="title">Image Creation Limits</div>
<div class="paragraph">
<p>Valid values for some image creation parameters are limited by a numerical
upper bound or by inclusion in a bitset.
For example, <a href="#VkImageCreateInfo">VkImageCreateInfo</a>::<code>arrayLayers</code> is limited by
<code>imageCreateMaxArrayLayers</code>, defined below; and
<a href="#VkImageCreateInfo">VkImageCreateInfo</a>::<code>samples</code> is limited by
<code>imageCreateSampleCounts</code>, also defined below.</p>
</div>
<div class="paragraph">
<p>Several limiting values are defined below, as well as assisting values from
which the limiting values are derived.
The limiting values are referenced by the relevant valid usage statements of
<a href="#VkImageCreateInfo">VkImageCreateInfo</a>.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Let <code>VkBool32 imageCreateMaybeLinear</code> indicate if the resultant image
may be <a href="../appendices/glossary.html#glossary-linear-resource" class="xref page">linear</a>.
(The definition below is trivial because certain extensions are disabled
in this build of the specification).</p>
<div class="ulist">
<ul>
<li>
<p>If <code>tiling</code> is <code>VK_IMAGE_TILING_LINEAR</code>, then
<code>imageCreateMaybeLinear</code> is <code>VK_TRUE</code>.</p>
</li>
<li>
<p>If <code>tiling</code> is <code>VK_IMAGE_TILING_OPTIMAL</code>, then
<code>imageCreateMaybeLinear</code> is <code>VK_FALSE</code>.</p>
</li>
</ul>
</div>
</li>
<li>
<p>Let <code>VkFormatFeatureFlags imageCreateFormatFeatures</code> be the set of valid
<em>format features</em> available during image creation.</p>
<div class="ulist">
<ul>
<li>
<p>If <code>tiling</code> is <code>VK_IMAGE_TILING_LINEAR</code>, then
<code>imageCreateFormatFeatures</code> is the value of
<a href="formats.html#VkFormatProperties" class="xref page">VkFormatProperties</a>::<code>linearTilingFeatures</code> found by calling
<a href="formats.html#vkGetPhysicalDeviceFormatProperties" class="xref page">vkGetPhysicalDeviceFormatProperties</a> with parameter <code>format</code>
equal to <a href="#VkImageCreateInfo">VkImageCreateInfo</a>::<code>format</code>.</p>
</li>
<li>
<p>If <code>tiling</code> is <code>VK_IMAGE_TILING_OPTIMAL</code>,
then <code>imageCreateFormatFeatures</code> is the value of
<a href="formats.html#VkFormatProperties" class="xref page">VkFormatProperties</a>::<code>optimalTilingFeatures</code> found by calling
<a href="formats.html#vkGetPhysicalDeviceFormatProperties" class="xref page">vkGetPhysicalDeviceFormatProperties</a> with parameter <code>format</code>
equal to <a href="#VkImageCreateInfo">VkImageCreateInfo</a>::<code>format</code>.</p>
</li>
</ul>
</div>
</li>
<li>
<p>Let <code>VkImageFormatProperties2 imageCreateImageFormatPropertiesList[]</code> be
the list of structures obtained by calling
<a href="capabilities.html#vkGetPhysicalDeviceImageFormatProperties2" class="xref page">vkGetPhysicalDeviceImageFormatProperties2</a>, possibly multiple
times, as follows:</p>
<div class="ulist">
<ul>
<li>
<p>The parameters <a href="capabilities.html#VkPhysicalDeviceImageFormatInfo2" class="xref page">VkPhysicalDeviceImageFormatInfo2</a>::<code>format</code>,
<code>imageType</code>, <code>tiling</code>, <code>usage</code>, and <code>flags</code> <strong>must</strong> be
equal to those in <a href="#VkImageCreateInfo">VkImageCreateInfo</a>.</p>
</li>
<li>
<p>If <a href="#VkImageCreateInfo">VkImageCreateInfo</a>::<code>pNext</code> contains a
<a href="#VkExternalMemoryImageCreateInfo">VkExternalMemoryImageCreateInfo</a> structure whose
<code>handleTypes</code> is not <code>0</code>, then
<a href="capabilities.html#VkPhysicalDeviceImageFormatInfo2" class="xref page">VkPhysicalDeviceImageFormatInfo2</a>::<code>pNext</code> <strong>must</strong> contain a
<a href="capabilities.html#VkPhysicalDeviceExternalImageFormatInfo" class="xref page">VkPhysicalDeviceExternalImageFormatInfo</a> structure whose
<code>handleType</code> is not <code>0</code>; and
<a href="capabilities.html#vkGetPhysicalDeviceImageFormatProperties2" class="xref page">vkGetPhysicalDeviceImageFormatProperties2</a> <strong>must</strong> be called for
each handle type in
<a href="#VkExternalMemoryImageCreateInfo">VkExternalMemoryImageCreateInfo</a>::<code>handleTypes</code>, successively
setting
<a href="capabilities.html#VkPhysicalDeviceExternalImageFormatInfo" class="xref page">VkPhysicalDeviceExternalImageFormatInfo</a>::<code>handleType</code> on
each call.</p>
</li>
<li>
<p>If <a href="#VkImageCreateInfo">VkImageCreateInfo</a>::<code>pNext</code> contains no
<a href="#VkExternalMemoryImageCreateInfo">VkExternalMemoryImageCreateInfo</a> structure, or contains a
structure whose <code>handleTypes</code> is <code>0</code>, then
<a href="capabilities.html#VkPhysicalDeviceImageFormatInfo2" class="xref page">VkPhysicalDeviceImageFormatInfo2</a>::<code>pNext</code> <strong>must</strong> either
contain no <a href="capabilities.html#VkPhysicalDeviceExternalImageFormatInfo" class="xref page">VkPhysicalDeviceExternalImageFormatInfo</a> structure, or
contain a structure whose <code>handleType</code> is <code>0</code>.</p>
</li>
<li>
<p>If any call to <a href="capabilities.html#vkGetPhysicalDeviceImageFormatProperties2" class="xref page">vkGetPhysicalDeviceImageFormatProperties2</a> returns
an error, then <code>imageCreateImageFormatPropertiesList</code> is defined
to be the empty list.</p>
</li>
</ul>
</div>
</li>
<li>
<p>Let <code>uint32_t imageCreateMaxMipLevels</code> be
the minimum value of <a href="capabilities.html#VkImageFormatProperties" class="xref page">VkImageFormatProperties</a>::<code>maxMipLevels</code>
in <code>imageCreateImageFormatPropertiesList</code>.
The value is <strong>undefined</strong> if <code>imageCreateImageFormatPropertiesList</code> is
empty.</p>
</li>
<li>
<p>Let <code>uint32_t imageCreateMaxArrayLayers</code> be
the minimum value of <a href="capabilities.html#VkImageFormatProperties" class="xref page">VkImageFormatProperties</a>::<code>maxArrayLayers</code>
in <code>imageCreateImageFormatPropertiesList</code>.
The value is <strong>undefined</strong> if <code>imageCreateImageFormatPropertiesList</code> is
empty.</p>
</li>
<li>
<p>Let <code>VkExtent3D imageCreateMaxExtent</code> be
the component-wise minimum over all
<a href="capabilities.html#VkImageFormatProperties" class="xref page">VkImageFormatProperties</a>::<code>maxExtent</code> values in
<code>imageCreateImageFormatPropertiesList</code>.
The value is <strong>undefined</strong> if <code>imageCreateImageFormatPropertiesList</code> is
empty.</p>
</li>
<li>
<p>Let <code>VkSampleCountFlags imageCreateSampleCounts</code> be
the intersection of each
<a href="capabilities.html#VkImageFormatProperties" class="xref page">VkImageFormatProperties</a>::<code>sampleCounts</code> in
<code>imageCreateImageFormatPropertiesList</code>.
The value is <strong>undefined</strong> if <code>imageCreateImageFormatPropertiesList</code> is
empty.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkImageCreateInfo-imageCreateMaxMipLevels-02251" href="#VUID-VkImageCreateInfo-imageCreateMaxMipLevels-02251"></a> <span class="vuid">VUID-VkImageCreateInfo-imageCreateMaxMipLevels-02251</span><br>

Each of the following values (as described in
<a href="#resources-image-creation-limits">Image Creation Limits</a>) <strong>must</strong> not be
<strong>undefined</strong> : <code>imageCreateMaxMipLevels</code>,
<code>imageCreateMaxArrayLayers</code>, <code>imageCreateMaxExtent</code>, and
<code>imageCreateSampleCounts</code></p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-sharingMode-00941" href="#VUID-VkImageCreateInfo-sharingMode-00941"></a> <span class="vuid">VUID-VkImageCreateInfo-sharingMode-00941</span><br>

If <code>sharingMode</code> is <code>VK_SHARING_MODE_CONCURRENT</code>,
<code>pQueueFamilyIndices</code> <strong>must</strong> be a valid pointer to an array of
<code>queueFamilyIndexCount</code> <code>uint32_t</code> values</p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-sharingMode-00942" href="#VUID-VkImageCreateInfo-sharingMode-00942"></a> <span class="vuid">VUID-VkImageCreateInfo-sharingMode-00942</span><br>

If <code>sharingMode</code> is <code>VK_SHARING_MODE_CONCURRENT</code>,
<code>queueFamilyIndexCount</code> <strong>must</strong> be greater than <code>1</code></p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-sharingMode-01420" href="#VUID-VkImageCreateInfo-sharingMode-01420"></a> <span class="vuid">VUID-VkImageCreateInfo-sharingMode-01420</span><br>

If <code>sharingMode</code> is <code>VK_SHARING_MODE_CONCURRENT</code>, each element
of <code>pQueueFamilyIndices</code> <strong>must</strong> be unique and <strong>must</strong> be less than
<code>pQueueFamilyPropertyCount</code> returned by either
<a href="devsandqueues.html#vkGetPhysicalDeviceQueueFamilyProperties" class="xref page">vkGetPhysicalDeviceQueueFamilyProperties</a> or
<a href="devsandqueues.html#vkGetPhysicalDeviceQueueFamilyProperties2" class="xref page">vkGetPhysicalDeviceQueueFamilyProperties2</a> for the
<code>physicalDevice</code> that was used to create <code>device</code></p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-format-00943" href="#VUID-VkImageCreateInfo-format-00943"></a> <span class="vuid">VUID-VkImageCreateInfo-format-00943</span><br>

<code>format</code> <strong>must</strong> not be <code>VK_FORMAT_UNDEFINED</code></p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-extent-00944" href="#VUID-VkImageCreateInfo-extent-00944"></a> <span class="vuid">VUID-VkImageCreateInfo-extent-00944</span><br>

<code>extent.width</code> <strong>must</strong> be greater than <code>0</code></p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-extent-00945" href="#VUID-VkImageCreateInfo-extent-00945"></a> <span class="vuid">VUID-VkImageCreateInfo-extent-00945</span><br>

<code>extent.height</code> <strong>must</strong> be greater than <code>0</code></p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-extent-00946" href="#VUID-VkImageCreateInfo-extent-00946"></a> <span class="vuid">VUID-VkImageCreateInfo-extent-00946</span><br>

<code>extent.depth</code> <strong>must</strong> be greater than <code>0</code></p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-mipLevels-00947" href="#VUID-VkImageCreateInfo-mipLevels-00947"></a> <span class="vuid">VUID-VkImageCreateInfo-mipLevels-00947</span><br>

<code>mipLevels</code> <strong>must</strong> be greater than <code>0</code></p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-arrayLayers-00948" href="#VUID-VkImageCreateInfo-arrayLayers-00948"></a> <span class="vuid">VUID-VkImageCreateInfo-arrayLayers-00948</span><br>

<code>arrayLayers</code> <strong>must</strong> be greater than <code>0</code></p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-flags-00949" href="#VUID-VkImageCreateInfo-flags-00949"></a> <span class="vuid">VUID-VkImageCreateInfo-flags-00949</span><br>

If <code>flags</code> contains <code>VK_IMAGE_CREATE_CUBE_COMPATIBLE_BIT</code>,
<code>imageType</code> <strong>must</strong> be <code>VK_IMAGE_TYPE_2D</code></p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-flags-08865" href="#VUID-VkImageCreateInfo-flags-08865"></a> <span class="vuid">VUID-VkImageCreateInfo-flags-08865</span><br>

If <code>flags</code> contains <code>VK_IMAGE_CREATE_CUBE_COMPATIBLE_BIT</code>,
<code>extent.width</code> and <code>extent.height</code> <strong>must</strong> be equal</p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-flags-08866" href="#VUID-VkImageCreateInfo-flags-08866"></a> <span class="vuid">VUID-VkImageCreateInfo-flags-08866</span><br>

If <code>flags</code> contains <code>VK_IMAGE_CREATE_CUBE_COMPATIBLE_BIT</code>,
<code>arrayLayers</code> <strong>must</strong> be greater than or equal to 6</p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-imageType-10196" href="#VUID-VkImageCreateInfo-imageType-10196"></a> <span class="vuid">VUID-VkImageCreateInfo-imageType-10196</span><br>

If <code>imageType</code> is <code>VK_IMAGE_TYPE_3D</code> and <code>flags</code> contains
<code>VK_IMAGE_CREATE_2D_ARRAY_COMPATIBLE_BIT</code> then <code>flags</code> <strong>must</strong> not
contain any of <code>VK_IMAGE_CREATE_SPARSE_BINDING_BIT</code>,
<code>VK_IMAGE_CREATE_SPARSE_RESIDENCY_BIT</code>, and
<code>VK_IMAGE_CREATE_SPARSE_ALIASED_BIT</code></p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-flags-00950" href="#VUID-VkImageCreateInfo-flags-00950"></a> <span class="vuid">VUID-VkImageCreateInfo-flags-00950</span><br>

If <code>flags</code> contains <code>VK_IMAGE_CREATE_2D_ARRAY_COMPATIBLE_BIT</code>,
<code>imageType</code> <strong>must</strong> be <code>VK_IMAGE_TYPE_3D</code></p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-flags-09403" href="#VUID-VkImageCreateInfo-flags-09403"></a> <span class="vuid">VUID-VkImageCreateInfo-flags-09403</span><br>

If <code>flags</code> contains <code>VK_IMAGE_CREATE_2D_ARRAY_COMPATIBLE_BIT</code>,
<code>flags</code> <strong>must</strong> not include <code>VK_IMAGE_CREATE_SPARSE_ALIASED_BIT</code>,
<code>VK_IMAGE_CREATE_SPARSE_BINDING_BIT</code>, or
<code>VK_IMAGE_CREATE_SPARSE_RESIDENCY_BIT</code></p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-extent-02252" href="#VUID-VkImageCreateInfo-extent-02252"></a> <span class="vuid">VUID-VkImageCreateInfo-extent-02252</span><br>

<code>extent.width</code> <strong>must</strong> be less than or equal to
<code>imageCreateMaxExtent.width</code> (as defined in
<a href="#resources-image-creation-limits">Image Creation Limits</a>)</p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-extent-02253" href="#VUID-VkImageCreateInfo-extent-02253"></a> <span class="vuid">VUID-VkImageCreateInfo-extent-02253</span><br>

<code>extent.height</code> <strong>must</strong> be less than or equal to
<code>imageCreateMaxExtent.height</code> (as defined in
<a href="#resources-image-creation-limits">Image Creation Limits</a>)</p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-extent-02254" href="#VUID-VkImageCreateInfo-extent-02254"></a> <span class="vuid">VUID-VkImageCreateInfo-extent-02254</span><br>

<code>extent.depth</code> <strong>must</strong> be less than or equal to
<code>imageCreateMaxExtent.depth</code> (as defined in
<a href="#resources-image-creation-limits">Image Creation Limits</a>)</p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-imageType-00956" href="#VUID-VkImageCreateInfo-imageType-00956"></a> <span class="vuid">VUID-VkImageCreateInfo-imageType-00956</span><br>

If <code>imageType</code> is <code>VK_IMAGE_TYPE_1D</code>, both <code>extent.height</code>
and <code>extent.depth</code> <strong>must</strong> be <code>1</code></p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-imageType-00957" href="#VUID-VkImageCreateInfo-imageType-00957"></a> <span class="vuid">VUID-VkImageCreateInfo-imageType-00957</span><br>

If <code>imageType</code> is <code>VK_IMAGE_TYPE_2D</code>, <code>extent.depth</code> <strong>must</strong>
be <code>1</code></p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-mipLevels-00958" href="#VUID-VkImageCreateInfo-mipLevels-00958"></a> <span class="vuid">VUID-VkImageCreateInfo-mipLevels-00958</span><br>

<code>mipLevels</code> <strong>must</strong> be less than or equal to the number of levels in
the complete mipmap chain based on <span class="eq"><code>extent.width</code></span>,
<span class="eq"><code>extent.height</code></span>, and <span class="eq"><code>extent.depth</code></span></p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-mipLevels-02255" href="#VUID-VkImageCreateInfo-mipLevels-02255"></a> <span class="vuid">VUID-VkImageCreateInfo-mipLevels-02255</span><br>

<code>mipLevels</code> <strong>must</strong> be less than or equal to
<code>imageCreateMaxMipLevels</code> (as defined in
<a href="#resources-image-creation-limits">Image Creation Limits</a>)</p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-arrayLayers-02256" href="#VUID-VkImageCreateInfo-arrayLayers-02256"></a> <span class="vuid">VUID-VkImageCreateInfo-arrayLayers-02256</span><br>

<code>arrayLayers</code> <strong>must</strong> be less than or equal to
<code>imageCreateMaxArrayLayers</code> (as defined in
<a href="#resources-image-creation-limits">Image Creation Limits</a>)</p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-imageType-00961" href="#VUID-VkImageCreateInfo-imageType-00961"></a> <span class="vuid">VUID-VkImageCreateInfo-imageType-00961</span><br>

If <code>imageType</code> is <code>VK_IMAGE_TYPE_3D</code>, <code>arrayLayers</code> <strong>must</strong> be
<code>1</code></p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-samples-02257" href="#VUID-VkImageCreateInfo-samples-02257"></a> <span class="vuid">VUID-VkImageCreateInfo-samples-02257</span><br>

If <code>samples</code> is not <code>VK_SAMPLE_COUNT_1_BIT</code>, then
<code>imageType</code> <strong>must</strong> be <code>VK_IMAGE_TYPE_2D</code>, <code>flags</code> <strong>must</strong> not
contain <code>VK_IMAGE_CREATE_CUBE_COMPATIBLE_BIT</code>, <code>mipLevels</code> <strong>must</strong>
be equal to <code>1</code>, and <code>imageCreateMaybeLinear</code> (as defined in
<a href="#resources-image-creation-limits">Image Creation Limits</a>) <strong>must</strong> be
<code>VK_FALSE</code>,</p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-usage-00963" href="#VUID-VkImageCreateInfo-usage-00963"></a> <span class="vuid">VUID-VkImageCreateInfo-usage-00963</span><br>

If <code>usage</code> includes <code>VK_IMAGE_USAGE_TRANSIENT_ATTACHMENT_BIT</code>,
then bits other than <code>VK_IMAGE_USAGE_COLOR_ATTACHMENT_BIT</code>,
<code>VK_IMAGE_USAGE_DEPTH_STENCIL_ATTACHMENT_BIT</code>, and
<code>VK_IMAGE_USAGE_INPUT_ATTACHMENT_BIT</code> <strong>must</strong> not be set</p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-usage-00964" href="#VUID-VkImageCreateInfo-usage-00964"></a> <span class="vuid">VUID-VkImageCreateInfo-usage-00964</span><br>

If <code>usage</code> includes <code>VK_IMAGE_USAGE_COLOR_ATTACHMENT_BIT</code>,
<code>VK_IMAGE_USAGE_DEPTH_STENCIL_ATTACHMENT_BIT</code>,
<code>VK_IMAGE_USAGE_TRANSIENT_ATTACHMENT_BIT</code>, or
<code>VK_IMAGE_USAGE_INPUT_ATTACHMENT_BIT</code>, <code>extent.width</code> <strong>must</strong> be
less than or equal to
<code>VkPhysicalDeviceLimits</code>::<code>maxFramebufferWidth</code></p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-usage-00965" href="#VUID-VkImageCreateInfo-usage-00965"></a> <span class="vuid">VUID-VkImageCreateInfo-usage-00965</span><br>

If <code>usage</code> includes <code>VK_IMAGE_USAGE_COLOR_ATTACHMENT_BIT</code>,
<code>VK_IMAGE_USAGE_DEPTH_STENCIL_ATTACHMENT_BIT</code>,
<code>VK_IMAGE_USAGE_TRANSIENT_ATTACHMENT_BIT</code>, or
<code>VK_IMAGE_USAGE_INPUT_ATTACHMENT_BIT</code>, <code>extent.height</code> <strong>must</strong> be
less than or equal to
<code>VkPhysicalDeviceLimits</code>::<code>maxFramebufferHeight</code></p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-usage-00966" href="#VUID-VkImageCreateInfo-usage-00966"></a> <span class="vuid">VUID-VkImageCreateInfo-usage-00966</span><br>

If <code>usage</code> includes <code>VK_IMAGE_USAGE_TRANSIENT_ATTACHMENT_BIT</code>,
<code>usage</code> <strong>must</strong> also contain at least one of
<code>VK_IMAGE_USAGE_COLOR_ATTACHMENT_BIT</code>,
<code>VK_IMAGE_USAGE_DEPTH_STENCIL_ATTACHMENT_BIT</code>, or
<code>VK_IMAGE_USAGE_INPUT_ATTACHMENT_BIT</code></p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-samples-02258" href="#VUID-VkImageCreateInfo-samples-02258"></a> <span class="vuid">VUID-VkImageCreateInfo-samples-02258</span><br>

<code>samples</code> <strong>must</strong> be a valid <a href="limits.html#VkSampleCountFlagBits" class="xref page">VkSampleCountFlagBits</a> value that is
set in <code>imageCreateSampleCounts</code> (as defined in
<a href="#resources-image-creation-limits">Image Creation Limits</a>)</p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-usage-00968" href="#VUID-VkImageCreateInfo-usage-00968"></a> <span class="vuid">VUID-VkImageCreateInfo-usage-00968</span><br>

If the <a href="features.html#features-shaderStorageImageMultisample" class="xref page">    <code>shaderStorageImageMultisample</code></a> feature is not enabled, and
<code>usage</code> contains <code>VK_IMAGE_USAGE_STORAGE_BIT</code>, <code>samples</code>
<strong>must</strong> be <code>VK_SAMPLE_COUNT_1_BIT</code></p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-flags-00969" href="#VUID-VkImageCreateInfo-flags-00969"></a> <span class="vuid">VUID-VkImageCreateInfo-flags-00969</span><br>

If the <a href="features.html#features-sparseBinding" class="xref page"><code>sparseBinding</code></a> feature is not
enabled, <code>flags</code> <strong>must</strong> not contain
<code>VK_IMAGE_CREATE_SPARSE_BINDING_BIT</code></p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-flags-01924" href="#VUID-VkImageCreateInfo-flags-01924"></a> <span class="vuid">VUID-VkImageCreateInfo-flags-01924</span><br>

If the <a href="features.html#features-sparseResidencyAliased" class="xref page"><code>sparseResidencyAliased</code></a>
feature is not enabled, <code>flags</code> <strong>must</strong> not contain
<code>VK_IMAGE_CREATE_SPARSE_ALIASED_BIT</code></p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-tiling-04121" href="#VUID-VkImageCreateInfo-tiling-04121"></a> <span class="vuid">VUID-VkImageCreateInfo-tiling-04121</span><br>

If <code>tiling</code> is <code>VK_IMAGE_TILING_LINEAR</code>, <code>flags</code> <strong>must</strong> not
contain <code>VK_IMAGE_CREATE_SPARSE_RESIDENCY_BIT</code></p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-imageType-00970" href="#VUID-VkImageCreateInfo-imageType-00970"></a> <span class="vuid">VUID-VkImageCreateInfo-imageType-00970</span><br>

If <code>imageType</code> is <code>VK_IMAGE_TYPE_1D</code>, <code>flags</code> <strong>must</strong> not
contain <code>VK_IMAGE_CREATE_SPARSE_RESIDENCY_BIT</code></p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-imageType-00971" href="#VUID-VkImageCreateInfo-imageType-00971"></a> <span class="vuid">VUID-VkImageCreateInfo-imageType-00971</span><br>

If the <a href="features.html#features-sparseResidencyImage2D" class="xref page"><code>sparseResidencyImage2D</code></a>
feature is not enabled, and <code>imageType</code> is <code>VK_IMAGE_TYPE_2D</code>,
<code>flags</code> <strong>must</strong> not contain <code>VK_IMAGE_CREATE_SPARSE_RESIDENCY_BIT</code></p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-imageType-00972" href="#VUID-VkImageCreateInfo-imageType-00972"></a> <span class="vuid">VUID-VkImageCreateInfo-imageType-00972</span><br>

If the <a href="features.html#features-sparseResidencyImage3D" class="xref page"><code>sparseResidencyImage3D</code></a>
feature is not enabled, and <code>imageType</code> is <code>VK_IMAGE_TYPE_3D</code>,
<code>flags</code> <strong>must</strong> not contain <code>VK_IMAGE_CREATE_SPARSE_RESIDENCY_BIT</code></p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-imageType-00973" href="#VUID-VkImageCreateInfo-imageType-00973"></a> <span class="vuid">VUID-VkImageCreateInfo-imageType-00973</span><br>

If the <a href="features.html#features-sparseResidency2Samples" class="xref page">    <code>sparseResidency2Samples</code></a> feature is not enabled, <code>imageType</code>
is <code>VK_IMAGE_TYPE_2D</code>, and <code>samples</code> is
<code>VK_SAMPLE_COUNT_2_BIT</code>, <code>flags</code> <strong>must</strong> not contain
<code>VK_IMAGE_CREATE_SPARSE_RESIDENCY_BIT</code></p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-imageType-00974" href="#VUID-VkImageCreateInfo-imageType-00974"></a> <span class="vuid">VUID-VkImageCreateInfo-imageType-00974</span><br>

If the <a href="features.html#features-sparseResidency4Samples" class="xref page">    <code>sparseResidency4Samples</code></a> feature is not enabled, <code>imageType</code>
is <code>VK_IMAGE_TYPE_2D</code>, and <code>samples</code> is
<code>VK_SAMPLE_COUNT_4_BIT</code>, <code>flags</code> <strong>must</strong> not contain
<code>VK_IMAGE_CREATE_SPARSE_RESIDENCY_BIT</code></p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-imageType-00975" href="#VUID-VkImageCreateInfo-imageType-00975"></a> <span class="vuid">VUID-VkImageCreateInfo-imageType-00975</span><br>

If the <a href="features.html#features-sparseResidency8Samples" class="xref page">    <code>sparseResidency8Samples</code></a> feature is not enabled, <code>imageType</code>
is <code>VK_IMAGE_TYPE_2D</code>, and <code>samples</code> is
<code>VK_SAMPLE_COUNT_8_BIT</code>, <code>flags</code> <strong>must</strong> not contain
<code>VK_IMAGE_CREATE_SPARSE_RESIDENCY_BIT</code></p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-imageType-00976" href="#VUID-VkImageCreateInfo-imageType-00976"></a> <span class="vuid">VUID-VkImageCreateInfo-imageType-00976</span><br>

If the <a href="features.html#features-sparseResidency16Samples" class="xref page">    <code>sparseResidency16Samples</code></a> feature is not enabled, <code>imageType</code>
is <code>VK_IMAGE_TYPE_2D</code>, and <code>samples</code> is
<code>VK_SAMPLE_COUNT_16_BIT</code>, <code>flags</code> <strong>must</strong> not contain
<code>VK_IMAGE_CREATE_SPARSE_RESIDENCY_BIT</code></p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-flags-00987" href="#VUID-VkImageCreateInfo-flags-00987"></a> <span class="vuid">VUID-VkImageCreateInfo-flags-00987</span><br>

If <code>flags</code> contains <code>VK_IMAGE_CREATE_SPARSE_RESIDENCY_BIT</code> or
<code>VK_IMAGE_CREATE_SPARSE_ALIASED_BIT</code>, it <strong>must</strong> also contain
<code>VK_IMAGE_CREATE_SPARSE_BINDING_BIT</code></p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-None-01925" href="#VUID-VkImageCreateInfo-None-01925"></a> <span class="vuid">VUID-VkImageCreateInfo-None-01925</span><br>

If any of the bits <code>VK_IMAGE_CREATE_SPARSE_BINDING_BIT</code>,
<code>VK_IMAGE_CREATE_SPARSE_RESIDENCY_BIT</code>, or
<code>VK_IMAGE_CREATE_SPARSE_ALIASED_BIT</code> are set,
<code>VK_IMAGE_USAGE_TRANSIENT_ATTACHMENT_BIT</code> <strong>must</strong> not also be set</p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-flags-01890" href="#VUID-VkImageCreateInfo-flags-01890"></a> <span class="vuid">VUID-VkImageCreateInfo-flags-01890</span><br>

If the <a href="features.html#features-protectedMemory" class="xref page"><code>protectedMemory</code></a> feature is
not enabled, <code>flags</code> <strong>must</strong> not contain
<code>VK_IMAGE_CREATE_PROTECTED_BIT</code></p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-None-01891" href="#VUID-VkImageCreateInfo-None-01891"></a> <span class="vuid">VUID-VkImageCreateInfo-None-01891</span><br>

If any of the bits <code>VK_IMAGE_CREATE_SPARSE_BINDING_BIT</code>,
<code>VK_IMAGE_CREATE_SPARSE_RESIDENCY_BIT</code>, or
<code>VK_IMAGE_CREATE_SPARSE_ALIASED_BIT</code> are set,
<code>VK_IMAGE_CREATE_PROTECTED_BIT</code> <strong>must</strong> not also be set</p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-pNext-00990" href="#VUID-VkImageCreateInfo-pNext-00990"></a> <span class="vuid">VUID-VkImageCreateInfo-pNext-00990</span><br>

If the <code>pNext</code> chain includes a
<a href="#VkExternalMemoryImageCreateInfo">VkExternalMemoryImageCreateInfo</a> structure, its <code>handleTypes</code>
member <strong>must</strong> only contain bits that are also in
<a href="capabilities.html#VkExternalImageFormatProperties" class="xref page">VkExternalImageFormatProperties</a>::<code>externalMemoryProperties.compatibleHandleTypes</code>,
as returned by <a href="capabilities.html#vkGetPhysicalDeviceImageFormatProperties2" class="xref page">vkGetPhysicalDeviceImageFormatProperties2</a> with
<code>format</code>, <code>imageType</code>, <code>tiling</code>, <code>usage</code>, and
<code>flags</code> equal to those in this structure, and with a
<a href="capabilities.html#VkPhysicalDeviceExternalImageFormatInfo" class="xref page">VkPhysicalDeviceExternalImageFormatInfo</a> structure included in the
<code>pNext</code> chain, with a <code>handleType</code> equal to any one of the
handle types specified in
<a href="#VkExternalMemoryImageCreateInfo">VkExternalMemoryImageCreateInfo</a>::<code>handleTypes</code></p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-physicalDeviceCount-01421" href="#VUID-VkImageCreateInfo-physicalDeviceCount-01421"></a> <span class="vuid">VUID-VkImageCreateInfo-physicalDeviceCount-01421</span><br>

If the logical device was created with
<a href="devsandqueues.html#VkDeviceGroupDeviceCreateInfo" class="xref page">VkDeviceGroupDeviceCreateInfo</a>::<code>physicalDeviceCount</code> equal to
1, <code>flags</code> <strong>must</strong> not contain
<code>VK_IMAGE_CREATE_SPLIT_INSTANCE_BIND_REGIONS_BIT</code></p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-flags-02259" href="#VUID-VkImageCreateInfo-flags-02259"></a> <span class="vuid">VUID-VkImageCreateInfo-flags-02259</span><br>

If <code>flags</code> contains
<code>VK_IMAGE_CREATE_SPLIT_INSTANCE_BIND_REGIONS_BIT</code>, then
<code>mipLevels</code> <strong>must</strong> be one, <code>arrayLayers</code> <strong>must</strong> be one,
<code>imageType</code> <strong>must</strong> be <code>VK_IMAGE_TYPE_2D</code>.
and <code>imageCreateMaybeLinear</code> (as defined in
<a href="#resources-image-creation-limits">Image Creation Limits</a>) <strong>must</strong> be
<code>VK_FALSE</code></p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-flags-01572" href="#VUID-VkImageCreateInfo-flags-01572"></a> <span class="vuid">VUID-VkImageCreateInfo-flags-01572</span><br>

If <code>flags</code> contains
<code>VK_IMAGE_CREATE_BLOCK_TEXEL_VIEW_COMPATIBLE_BIT</code>, then <code>format</code>
<strong>must</strong> be a <a href="../appendices/compressedtex.html#compressed_image_formats" class="xref page">compressed image format</a></p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-flags-01573" href="#VUID-VkImageCreateInfo-flags-01573"></a> <span class="vuid">VUID-VkImageCreateInfo-flags-01573</span><br>

If <code>flags</code> contains
<code>VK_IMAGE_CREATE_BLOCK_TEXEL_VIEW_COMPATIBLE_BIT</code>, then <code>flags</code>
<strong>must</strong> also contain <code>VK_IMAGE_CREATE_MUTABLE_FORMAT_BIT</code></p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-initialLayout-00993" href="#VUID-VkImageCreateInfo-initialLayout-00993"></a> <span class="vuid">VUID-VkImageCreateInfo-initialLayout-00993</span><br>

<code>initialLayout</code> <strong>must</strong> be <code>VK_IMAGE_LAYOUT_UNDEFINED</code> or
<code>VK_IMAGE_LAYOUT_PREINITIALIZED</code></p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-pNext-01443" href="#VUID-VkImageCreateInfo-pNext-01443"></a> <span class="vuid">VUID-VkImageCreateInfo-pNext-01443</span><br>

If the <code>pNext</code> chain includes a
<a href="#VkExternalMemoryImageCreateInfo">VkExternalMemoryImageCreateInfo</a> or
<code>VkExternalMemoryImageCreateInfoNV</code> structure whose
<code>handleTypes</code> member is not <code>0</code>, <code>initialLayout</code> <strong>must</strong> be
<code>VK_IMAGE_LAYOUT_UNDEFINED</code></p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-format-06410" href="#VUID-VkImageCreateInfo-format-06410"></a> <span class="vuid">VUID-VkImageCreateInfo-format-06410</span><br>

If the image <code>format</code> is one of the
<a href="formats.html#formats-requiring-sampler-ycbcr-conversion" class="xref page">formats that require a    sampler YC<sub>B</sub>C<sub>R</sub> conversion</a>, <code>mipLevels</code> <strong>must</strong> be 1</p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-format-06411" href="#VUID-VkImageCreateInfo-format-06411"></a> <span class="vuid">VUID-VkImageCreateInfo-format-06411</span><br>

If the image <code>format</code> is one of the
<a href="formats.html#formats-requiring-sampler-ycbcr-conversion" class="xref page">formats that require a    sampler YC<sub>B</sub>C<sub>R</sub> conversion</a>, <code>samples</code> <strong>must</strong> be
<code>VK_SAMPLE_COUNT_1_BIT</code></p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-format-06412" href="#VUID-VkImageCreateInfo-format-06412"></a> <span class="vuid">VUID-VkImageCreateInfo-format-06412</span><br>

If the image <code>format</code> is one of the
<a href="formats.html#formats-requiring-sampler-ycbcr-conversion" class="xref page">formats that require a    sampler YC<sub>B</sub>C<sub>R</sub> conversion</a>, <code>imageType</code> <strong>must</strong> be
<code>VK_IMAGE_TYPE_2D</code></p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-imageCreateFormatFeatures-02260" href="#VUID-VkImageCreateInfo-imageCreateFormatFeatures-02260"></a> <span class="vuid">VUID-VkImageCreateInfo-imageCreateFormatFeatures-02260</span><br>

If <code>format</code> is a <em>multi-planar</em> format, and if
<code>imageCreateFormatFeatures</code> (as defined in
<a href="#resources-image-creation-limits">Image Creation Limits</a>) does not
contain <code>VK_FORMAT_FEATURE_DISJOINT_BIT</code>, then <code>flags</code> <strong>must</strong> not
contain <code>VK_IMAGE_CREATE_DISJOINT_BIT</code></p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-format-01577" href="#VUID-VkImageCreateInfo-format-01577"></a> <span class="vuid">VUID-VkImageCreateInfo-format-01577</span><br>

If <code>format</code> is not a <em>multi-planar</em> format, and <code>flags</code> does not
include <code>VK_IMAGE_CREATE_ALIAS_BIT</code>, <code>flags</code> <strong>must</strong> not contain
<code>VK_IMAGE_CREATE_DISJOINT_BIT</code></p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-format-04712" href="#VUID-VkImageCreateInfo-format-04712"></a> <span class="vuid">VUID-VkImageCreateInfo-format-04712</span><br>

If <code>format</code> has a <code>_422</code> or <code>_420</code> suffix, <code>extent.width</code>
<strong>must</strong> be a multiple of 2</p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-format-04713" href="#VUID-VkImageCreateInfo-format-04713"></a> <span class="vuid">VUID-VkImageCreateInfo-format-04713</span><br>

If <code>format</code> has a <code>_420</code> suffix, <code>extent.height</code> <strong>must</strong> be a
multiple of 2</p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-format-02795" href="#VUID-VkImageCreateInfo-format-02795"></a> <span class="vuid">VUID-VkImageCreateInfo-format-02795</span><br>

If <code>format</code> is a depth-stencil format, <code>usage</code> includes
<code>VK_IMAGE_USAGE_DEPTH_STENCIL_ATTACHMENT_BIT</code>, and the <code>pNext</code>
chain includes a <a href="#VkImageStencilUsageCreateInfo">VkImageStencilUsageCreateInfo</a> structure, then its
<a href="#VkImageStencilUsageCreateInfo">VkImageStencilUsageCreateInfo</a>::<code>stencilUsage</code> member <strong>must</strong>
also include <code>VK_IMAGE_USAGE_DEPTH_STENCIL_ATTACHMENT_BIT</code></p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-format-02796" href="#VUID-VkImageCreateInfo-format-02796"></a> <span class="vuid">VUID-VkImageCreateInfo-format-02796</span><br>

If <code>format</code> is a depth-stencil format, <code>usage</code> does not include
<code>VK_IMAGE_USAGE_DEPTH_STENCIL_ATTACHMENT_BIT</code>, and the <code>pNext</code>
chain includes a <a href="#VkImageStencilUsageCreateInfo">VkImageStencilUsageCreateInfo</a> structure, then its
<a href="#VkImageStencilUsageCreateInfo">VkImageStencilUsageCreateInfo</a>::<code>stencilUsage</code> member <strong>must</strong>
also not include <code>VK_IMAGE_USAGE_DEPTH_STENCIL_ATTACHMENT_BIT</code></p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-format-02797" href="#VUID-VkImageCreateInfo-format-02797"></a> <span class="vuid">VUID-VkImageCreateInfo-format-02797</span><br>

If <code>format</code> is a depth-stencil format, <code>usage</code> includes
<code>VK_IMAGE_USAGE_TRANSIENT_ATTACHMENT_BIT</code>, and the <code>pNext</code> chain
includes a <a href="#VkImageStencilUsageCreateInfo">VkImageStencilUsageCreateInfo</a> structure, then its
<a href="#VkImageStencilUsageCreateInfo">VkImageStencilUsageCreateInfo</a>::<code>stencilUsage</code> member <strong>must</strong>
also include <code>VK_IMAGE_USAGE_TRANSIENT_ATTACHMENT_BIT</code></p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-format-02798" href="#VUID-VkImageCreateInfo-format-02798"></a> <span class="vuid">VUID-VkImageCreateInfo-format-02798</span><br>

If <code>format</code> is a depth-stencil format, <code>usage</code> does not include
<code>VK_IMAGE_USAGE_TRANSIENT_ATTACHMENT_BIT</code>, and the <code>pNext</code> chain
includes a <a href="#VkImageStencilUsageCreateInfo">VkImageStencilUsageCreateInfo</a> structure, then its
<a href="#VkImageStencilUsageCreateInfo">VkImageStencilUsageCreateInfo</a>::<code>stencilUsage</code> member <strong>must</strong>
also not include <code>VK_IMAGE_USAGE_TRANSIENT_ATTACHMENT_BIT</code></p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-Format-02536" href="#VUID-VkImageCreateInfo-Format-02536"></a> <span class="vuid">VUID-VkImageCreateInfo-Format-02536</span><br>

If <code>Format</code> is a depth-stencil format and the <code>pNext</code> chain
includes a <a href="#VkImageStencilUsageCreateInfo">VkImageStencilUsageCreateInfo</a> structure with its
<code>stencilUsage</code> member including
<code>VK_IMAGE_USAGE_INPUT_ATTACHMENT_BIT</code>, <code>extent.width</code> <strong>must</strong> be
less than or equal to
<code>VkPhysicalDeviceLimits</code>::<code>maxFramebufferWidth</code></p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-format-02537" href="#VUID-VkImageCreateInfo-format-02537"></a> <span class="vuid">VUID-VkImageCreateInfo-format-02537</span><br>

If <code>format</code> is a depth-stencil format and the <code>pNext</code> chain
includes a <a href="#VkImageStencilUsageCreateInfo">VkImageStencilUsageCreateInfo</a> structure with its
<code>stencilUsage</code> member including
<code>VK_IMAGE_USAGE_INPUT_ATTACHMENT_BIT</code>, <code>extent.height</code> <strong>must</strong> be
less than or equal to
<code>VkPhysicalDeviceLimits</code>::<code>maxFramebufferHeight</code></p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-format-02538" href="#VUID-VkImageCreateInfo-format-02538"></a> <span class="vuid">VUID-VkImageCreateInfo-format-02538</span><br>

If the <a href="features.html#features-shaderStorageImageMultisample" class="xref page">    <code>shaderStorageImageMultisample</code></a> feature is not enabled,
<code>format</code> is a depth-stencil format and the <code>pNext</code> chain
includes a <a href="#VkImageStencilUsageCreateInfo">VkImageStencilUsageCreateInfo</a> structure with its
<code>stencilUsage</code> including <code>VK_IMAGE_USAGE_STORAGE_BIT</code>,
<code>samples</code> <strong>must</strong> be <code>VK_SAMPLE_COUNT_1_BIT</code></p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-pNext-06722" href="#VUID-VkImageCreateInfo-pNext-06722"></a> <span class="vuid">VUID-VkImageCreateInfo-pNext-06722</span><br>

If a <a href="#VkImageFormatListCreateInfo">VkImageFormatListCreateInfo</a> structure was included in the
<code>pNext</code> chain and <code>format</code> is not a
<a href="formats.html#formats-requiring-sampler-ycbcr-conversion" class="xref page">multi-planar</a> format and
<a href="#VkImageFormatListCreateInfo">VkImageFormatListCreateInfo</a>::<code>viewFormatCount</code> is not zero,
then each format in
<a href="#VkImageFormatListCreateInfo">VkImageFormatListCreateInfo</a>::<code>pViewFormats</code> <strong>must</strong> either be
compatible with the <code>format</code> as described in the
<a href="formats.html#formats-compatibility" class="xref page">compatibility table</a> or, if <code>flags</code>
contains <code>VK_IMAGE_CREATE_BLOCK_TEXEL_VIEW_COMPATIBLE_BIT</code>, be an
uncompressed format that is size-compatible with <code>format</code></p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-pNext-10062" href="#VUID-VkImageCreateInfo-pNext-10062"></a> <span class="vuid">VUID-VkImageCreateInfo-pNext-10062</span><br>

If a <a href="#VkImageFormatListCreateInfo">VkImageFormatListCreateInfo</a> structure was included in the
<code>pNext</code> chain and <code>format</code> is a
<a href="formats.html#formats-requiring-sampler-ycbcr-conversion" class="xref page">multi-planar</a> format and
<code>flags</code> contains <code>VK_IMAGE_CREATE_MUTABLE_FORMAT_BIT</code> and
<a href="#VkImageFormatListCreateInfo">VkImageFormatListCreateInfo</a>::<code>viewFormatCount</code> is not zero,
then each format in
<a href="#VkImageFormatListCreateInfo">VkImageFormatListCreateInfo</a>::<code>pViewFormats</code> <strong>must</strong> be
compatible with the <code>VkFormat</code> for the plane of the image format</p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-flags-04738" href="#VUID-VkImageCreateInfo-flags-04738"></a> <span class="vuid">VUID-VkImageCreateInfo-flags-04738</span><br>

If <code>flags</code> does not contain <code>VK_IMAGE_CREATE_MUTABLE_FORMAT_BIT</code>
and the <code>pNext</code> chain includes a <a href="#VkImageFormatListCreateInfo">VkImageFormatListCreateInfo</a>
structure, then <a href="#VkImageFormatListCreateInfo">VkImageFormatListCreateInfo</a>::<code>viewFormatCount</code>
<strong>must</strong> be <code>0</code> or <code>1</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkImageCreateInfo-sType-sType" href="#VUID-VkImageCreateInfo-sType-sType"></a> <span class="vuid">VUID-VkImageCreateInfo-sType-sType</span><br>
 <code>sType</code> <strong>must</strong> be <code>VK_STRUCTURE_TYPE_IMAGE_CREATE_INFO</code></p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-pNext-pNext" href="#VUID-VkImageCreateInfo-pNext-pNext"></a> <span class="vuid">VUID-VkImageCreateInfo-pNext-pNext</span><br>
 Each <code>pNext</code> member of any structure (including this one) in the <code>pNext</code> chain <strong>must</strong> be either <code>NULL</code> or a pointer to a valid instance of <a href="#VkExternalMemoryImageCreateInfo">VkExternalMemoryImageCreateInfo</a>, <a href="#VkImageFormatListCreateInfo">VkImageFormatListCreateInfo</a>, or <a href="#VkImageStencilUsageCreateInfo">VkImageStencilUsageCreateInfo</a></p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-sType-unique" href="#VUID-VkImageCreateInfo-sType-unique"></a> <span class="vuid">VUID-VkImageCreateInfo-sType-unique</span><br>
 The <code>sType</code> value of each struct in the <code>pNext</code> chain <strong>must</strong> be unique</p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-flags-parameter" href="#VUID-VkImageCreateInfo-flags-parameter"></a> <span class="vuid">VUID-VkImageCreateInfo-flags-parameter</span><br>
 <code>flags</code> <strong>must</strong> be a valid combination of <a href="#VkImageCreateFlagBits">VkImageCreateFlagBits</a> values</p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-imageType-parameter" href="#VUID-VkImageCreateInfo-imageType-parameter"></a> <span class="vuid">VUID-VkImageCreateInfo-imageType-parameter</span><br>
 <code>imageType</code> <strong>must</strong> be a valid <a href="#VkImageType">VkImageType</a> value</p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-format-parameter" href="#VUID-VkImageCreateInfo-format-parameter"></a> <span class="vuid">VUID-VkImageCreateInfo-format-parameter</span><br>
 <code>format</code> <strong>must</strong> be a valid <a href="formats.html#VkFormat" class="xref page">VkFormat</a> value</p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-samples-parameter" href="#VUID-VkImageCreateInfo-samples-parameter"></a> <span class="vuid">VUID-VkImageCreateInfo-samples-parameter</span><br>
 <code>samples</code> <strong>must</strong> be a valid <a href="limits.html#VkSampleCountFlagBits" class="xref page">VkSampleCountFlagBits</a> value</p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-tiling-parameter" href="#VUID-VkImageCreateInfo-tiling-parameter"></a> <span class="vuid">VUID-VkImageCreateInfo-tiling-parameter</span><br>
 <code>tiling</code> <strong>must</strong> be a valid <a href="#VkImageTiling">VkImageTiling</a> value</p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-usage-parameter" href="#VUID-VkImageCreateInfo-usage-parameter"></a> <span class="vuid">VUID-VkImageCreateInfo-usage-parameter</span><br>
 <code>usage</code> <strong>must</strong> be a valid combination of <a href="#VkImageUsageFlagBits">VkImageUsageFlagBits</a> values</p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-usage-requiredbitmask" href="#VUID-VkImageCreateInfo-usage-requiredbitmask"></a> <span class="vuid">VUID-VkImageCreateInfo-usage-requiredbitmask</span><br>
 <code>usage</code> <strong>must</strong> not be <code>0</code></p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-sharingMode-parameter" href="#VUID-VkImageCreateInfo-sharingMode-parameter"></a> <span class="vuid">VUID-VkImageCreateInfo-sharingMode-parameter</span><br>
 <code>sharingMode</code> <strong>must</strong> be a valid <a href="#VkSharingMode">VkSharingMode</a> value</p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-initialLayout-parameter" href="#VUID-VkImageCreateInfo-initialLayout-parameter"></a> <span class="vuid">VUID-VkImageCreateInfo-initialLayout-parameter</span><br>
 <code>initialLayout</code> <strong>must</strong> be a valid <a href="#VkImageLayout">VkImageLayout</a> value</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>VkImageStencilUsageCreateInfo</code> structure is defined as:</p>
</div>
<div id="VkImageStencilUsageCreateInfo" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_VERSION_1_2
typedef struct VkImageStencilUsageCreateInfo {
    VkStructureType      sType;
    const void*          pNext;
    VkImageUsageFlags    stencilUsage;
} VkImageStencilUsageCreateInfo;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is a <a href="fundamentals.html#VkStructureType" class="xref page">VkStructureType</a> value identifying this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>stencilUsage</code> is a bitmask of <a href="#VkImageUsageFlagBits">VkImageUsageFlagBits</a> describing
the intended usage of the stencil aspect of the image.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>If the <code>pNext</code> chain of <a href="#VkImageCreateInfo">VkImageCreateInfo</a> includes a
<code>VkImageStencilUsageCreateInfo</code> structure, then that structure includes
the usage flags specific to the stencil aspect of the image for an image
with a depth-stencil format.</p>
</div>
<div class="paragraph">
<p>This structure specifies image usages which only apply to the stencil aspect
of a depth/stencil format image.
When this structure is included in the <code>pNext</code> chain of
<a href="#VkImageCreateInfo">VkImageCreateInfo</a>, the stencil aspect of the image <strong>must</strong> only be used
as specified by <code>stencilUsage</code>.
When this structure is not included in the <code>pNext</code> chain of
<a href="#VkImageCreateInfo">VkImageCreateInfo</a>, the stencil aspect of an image <strong>must</strong> only be used
as specified by <a href="#VkImageCreateInfo">VkImageCreateInfo</a>::<code>usage</code>.
Use of other aspects of an image are unaffected by this structure.</p>
</div>
<div class="paragraph">
<p>This structure <strong>can</strong> also be included in the <code>pNext</code> chain of
<a href="capabilities.html#VkPhysicalDeviceImageFormatInfo2" class="xref page">VkPhysicalDeviceImageFormatInfo2</a> to query additional capabilities
specific to image creation parameter combinations including a separate set
of usage flags for the stencil aspect of the image using
<a href="capabilities.html#vkGetPhysicalDeviceImageFormatProperties2" class="xref page">vkGetPhysicalDeviceImageFormatProperties2</a>.
When this structure is not included in the <code>pNext</code> chain of
<code>VkPhysicalDeviceImageFormatInfo2</code> then the implicit value of
<code>stencilUsage</code> matches that of
<code>VkPhysicalDeviceImageFormatInfo2</code>::<code>usage</code>.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkImageStencilUsageCreateInfo-stencilUsage-02539" href="#VUID-VkImageStencilUsageCreateInfo-stencilUsage-02539"></a> <span class="vuid">VUID-VkImageStencilUsageCreateInfo-stencilUsage-02539</span><br>

If <code>stencilUsage</code> includes
<code>VK_IMAGE_USAGE_TRANSIENT_ATTACHMENT_BIT</code>, it <strong>must</strong> not include bits
other than <code>VK_IMAGE_USAGE_DEPTH_STENCIL_ATTACHMENT_BIT</code> or
<code>VK_IMAGE_USAGE_INPUT_ATTACHMENT_BIT</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkImageStencilUsageCreateInfo-sType-sType" href="#VUID-VkImageStencilUsageCreateInfo-sType-sType"></a> <span class="vuid">VUID-VkImageStencilUsageCreateInfo-sType-sType</span><br>
 <code>sType</code> <strong>must</strong> be <code>VK_STRUCTURE_TYPE_IMAGE_STENCIL_USAGE_CREATE_INFO</code></p>
</li>
<li>
<p><a id="VUID-VkImageStencilUsageCreateInfo-stencilUsage-parameter" href="#VUID-VkImageStencilUsageCreateInfo-stencilUsage-parameter"></a> <span class="vuid">VUID-VkImageStencilUsageCreateInfo-stencilUsage-parameter</span><br>
 <code>stencilUsage</code> <strong>must</strong> be a valid combination of <a href="#VkImageUsageFlagBits">VkImageUsageFlagBits</a> values</p>
</li>
<li>
<p><a id="VUID-VkImageStencilUsageCreateInfo-stencilUsage-requiredbitmask" href="#VUID-VkImageStencilUsageCreateInfo-stencilUsage-requiredbitmask"></a> <span class="vuid">VUID-VkImageStencilUsageCreateInfo-stencilUsage-requiredbitmask</span><br>
 <code>stencilUsage</code> <strong>must</strong> not be <code>0</code></p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>To define a set of external memory handle types that <strong>may</strong> be used as backing
store for an image, add a <a href="#VkExternalMemoryImageCreateInfo">VkExternalMemoryImageCreateInfo</a> structure to
the <code>pNext</code> chain of the <a href="#VkImageCreateInfo">VkImageCreateInfo</a> structure.
The <code>VkExternalMemoryImageCreateInfo</code> structure is defined as:</p>
</div>
<div id="VkExternalMemoryImageCreateInfo" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_VERSION_1_1
typedef struct VkExternalMemoryImageCreateInfo {
    VkStructureType                    sType;
    const void*                        pNext;
    VkExternalMemoryHandleTypeFlags    handleTypes;
} VkExternalMemoryImageCreateInfo;</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>A <code>VkExternalMemoryImageCreateInfo</code> structure with a non-zero
<code>handleTypes</code> field must be included in the creation parameters for an
image that will be bound to memory that is either exported or imported.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is a <a href="fundamentals.html#VkStructureType" class="xref page">VkStructureType</a> value identifying this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>handleTypes</code> is zero or a bitmask of
<a href="capabilities.html#VkExternalMemoryHandleTypeFlagBits" class="xref page">VkExternalMemoryHandleTypeFlagBits</a> specifying one or more external
memory handle types.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkExternalMemoryImageCreateInfo-sType-sType" href="#VUID-VkExternalMemoryImageCreateInfo-sType-sType"></a> <span class="vuid">VUID-VkExternalMemoryImageCreateInfo-sType-sType</span><br>
 <code>sType</code> <strong>must</strong> be <code>VK_STRUCTURE_TYPE_EXTERNAL_MEMORY_IMAGE_CREATE_INFO</code></p>
</li>
<li>
<p><a id="VUID-VkExternalMemoryImageCreateInfo-handleTypes-parameter" href="#VUID-VkExternalMemoryImageCreateInfo-handleTypes-parameter"></a> <span class="vuid">VUID-VkExternalMemoryImageCreateInfo-handleTypes-parameter</span><br>
 <code>handleTypes</code> <strong>must</strong> be a valid combination of <a href="capabilities.html#VkExternalMemoryHandleTypeFlagBits" class="xref page">VkExternalMemoryHandleTypeFlagBits</a> values</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>If the <code>pNext</code> chain of <a href="#VkImageCreateInfo">VkImageCreateInfo</a> includes a
<code>VkImageFormatListCreateInfo</code> structure, then that structure contains a
list of all formats that <strong>can</strong> be used when creating views of this image.</p>
</div>
<div class="paragraph">
<p>The <code>VkImageFormatListCreateInfo</code> structure is defined as:</p>
</div>
<div id="VkImageFormatListCreateInfo" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_VERSION_1_2
typedef struct VkImageFormatListCreateInfo {
    VkStructureType    sType;
    const void*        pNext;
    uint32_t           viewFormatCount;
    const VkFormat*    pViewFormats;
} VkImageFormatListCreateInfo;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is a <a href="fundamentals.html#VkStructureType" class="xref page">VkStructureType</a> value identifying this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>viewFormatCount</code> is the number of entries in the <code>pViewFormats</code>
array.</p>
</li>
<li>
<p><code>pViewFormats</code> is a pointer to an array of <a href="formats.html#VkFormat" class="xref page">VkFormat</a> values
specifying all formats which <strong>can</strong> be used when creating views of this
image.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>If <code>viewFormatCount</code> is zero, <code>pViewFormats</code> is ignored and the
image is created as if the <code>VkImageFormatListCreateInfo</code> structure were
not included in the <code>pNext</code> chain of <a href="#VkImageCreateInfo">VkImageCreateInfo</a>.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkImageFormatListCreateInfo-viewFormatCount-09540" href="#VUID-VkImageFormatListCreateInfo-viewFormatCount-09540"></a> <span class="vuid">VUID-VkImageFormatListCreateInfo-viewFormatCount-09540</span><br>

If <code>viewFormatCount</code> is not 0, each element of <code>pViewFormats</code>
<strong>must</strong> not be <code>VK_FORMAT_UNDEFINED</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkImageFormatListCreateInfo-sType-sType" href="#VUID-VkImageFormatListCreateInfo-sType-sType"></a> <span class="vuid">VUID-VkImageFormatListCreateInfo-sType-sType</span><br>
 <code>sType</code> <strong>must</strong> be <code>VK_STRUCTURE_TYPE_IMAGE_FORMAT_LIST_CREATE_INFO</code></p>
</li>
<li>
<p><a id="VUID-VkImageFormatListCreateInfo-pViewFormats-parameter" href="#VUID-VkImageFormatListCreateInfo-pViewFormats-parameter"></a> <span class="vuid">VUID-VkImageFormatListCreateInfo-pViewFormats-parameter</span><br>
 If <code>viewFormatCount</code> is not <code>0</code>, <code>pViewFormats</code> <strong>must</strong> be a valid pointer to an array of <code>viewFormatCount</code> valid <a href="formats.html#VkFormat" class="xref page">VkFormat</a> values</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Bits which <strong>can</strong> be set in</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#VkImageViewUsageCreateInfo">VkImageViewUsageCreateInfo</a>::<code>usage</code></p>
</li>
<li>
<p><a href="#VkImageStencilUsageCreateInfo">VkImageStencilUsageCreateInfo</a>::<code>stencilUsage</code></p>
</li>
<li>
<p><a href="#VkImageCreateInfo">VkImageCreateInfo</a>::<code>usage</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>specify intended usage of an image, and are:</p>
</div>
<div id="VkImageUsageFlagBits" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_VERSION_1_0
typedef enum VkImageUsageFlagBits {
    VK_IMAGE_USAGE_TRANSFER_SRC_BIT = 0x00000001,
    VK_IMAGE_USAGE_TRANSFER_DST_BIT = 0x00000002,
    VK_IMAGE_USAGE_SAMPLED_BIT = 0x00000004,
    VK_IMAGE_USAGE_STORAGE_BIT = 0x00000008,
    VK_IMAGE_USAGE_COLOR_ATTACHMENT_BIT = 0x00000010,
    VK_IMAGE_USAGE_DEPTH_STENCIL_ATTACHMENT_BIT = 0x00000020,
    VK_IMAGE_USAGE_TRANSIENT_ATTACHMENT_BIT = 0x00000040,
    VK_IMAGE_USAGE_INPUT_ATTACHMENT_BIT = 0x00000080,
} VkImageUsageFlagBits;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>VK_IMAGE_USAGE_TRANSFER_SRC_BIT</code> specifies that the image <strong>can</strong> be
used as the source of a transfer command.</p>
</li>
<li>
<p><code>VK_IMAGE_USAGE_TRANSFER_DST_BIT</code> specifies that the image <strong>can</strong> be
used as the destination of a transfer command.</p>
</li>
<li>
<p><code>VK_IMAGE_USAGE_SAMPLED_BIT</code> specifies that the image <strong>can</strong> be used
to create a <code>VkImageView</code> suitable for occupying a
<code>VkDescriptorSet</code> slot either of type
<code>VK_DESCRIPTOR_TYPE_SAMPLED_IMAGE</code> or
<code>VK_DESCRIPTOR_TYPE_COMBINED_IMAGE_SAMPLER</code>, and be sampled by a
shader.</p>
</li>
<li>
<p><code>VK_IMAGE_USAGE_STORAGE_BIT</code> specifies that the image <strong>can</strong> be used
to create a <code>VkImageView</code> suitable for occupying a
<code>VkDescriptorSet</code> slot of type
<code>VK_DESCRIPTOR_TYPE_STORAGE_IMAGE</code>.</p>
</li>
<li>
<p><code>VK_IMAGE_USAGE_COLOR_ATTACHMENT_BIT</code> specifies that the image <strong>can</strong>
be used to create a <code>VkImageView</code> suitable for use as a color or
resolve attachment in a <code>VkFramebuffer</code>.</p>
</li>
<li>
<p><code>VK_IMAGE_USAGE_DEPTH_STENCIL_ATTACHMENT_BIT</code> specifies that the
image <strong>can</strong> be used to create a <code>VkImageView</code> suitable for use as a
depth/stencil
or depth/stencil resolve
attachment in a <code>VkFramebuffer</code>.</p>
</li>
<li>
<p><code>VK_IMAGE_USAGE_TRANSIENT_ATTACHMENT_BIT</code> specifies that
implementations <strong>may</strong> support using <a href="memory.html#memory" class="xref page">memory allocations</a> with
the <code>VK_MEMORY_PROPERTY_LAZILY_ALLOCATED_BIT</code> to back an image with
this usage.
This bit <strong>can</strong> be set for any image that <strong>can</strong> be used to create a
<code>VkImageView</code> suitable for use as a color, resolve, depth/stencil,
or input attachment.</p>
</li>
<li>
<p><code>VK_IMAGE_USAGE_INPUT_ATTACHMENT_BIT</code> specifies that the image <strong>can</strong>
be used to create a <code>VkImageView</code> suitable for occupying
<code>VkDescriptorSet</code> slot of type
<code>VK_DESCRIPTOR_TYPE_INPUT_ATTACHMENT</code>; be read from a shader as an
input attachment; and be used as an input attachment in a framebuffer.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div id="VkImageUsageFlags" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_VERSION_1_0
typedef VkFlags VkImageUsageFlags;</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>VkImageUsageFlags</code> is a bitmask type for setting a mask of zero or more
<a href="#VkImageUsageFlagBits">VkImageUsageFlagBits</a>.</p>
</div>
<div id="valid-imageview-imageusage" class="paragraph">
<p>When creating a <code>VkImageView</code> one of the following
<a href="#VkImageUsageFlagBits">VkImageUsageFlagBits</a> <strong>must</strong> be set:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>VK_IMAGE_USAGE_SAMPLED_BIT</code></p>
</li>
<li>
<p><code>VK_IMAGE_USAGE_STORAGE_BIT</code></p>
</li>
<li>
<p><code>VK_IMAGE_USAGE_COLOR_ATTACHMENT_BIT</code></p>
</li>
<li>
<p><code>VK_IMAGE_USAGE_DEPTH_STENCIL_ATTACHMENT_BIT</code></p>
</li>
<li>
<p><code>VK_IMAGE_USAGE_INPUT_ATTACHMENT_BIT</code></p>
</li>
<li>
<p><code>VK_IMAGE_USAGE_TRANSIENT_ATTACHMENT_BIT</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Bits which <strong>can</strong> be set in <a href="#VkImageCreateInfo">VkImageCreateInfo</a>::<code>flags</code>, specifying
additional parameters of an image, are:</p>
</div>
<div id="VkImageCreateFlagBits" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_VERSION_1_0
typedef enum VkImageCreateFlagBits {
    VK_IMAGE_CREATE_SPARSE_BINDING_BIT = 0x00000001,
    VK_IMAGE_CREATE_SPARSE_RESIDENCY_BIT = 0x00000002,
    VK_IMAGE_CREATE_SPARSE_ALIASED_BIT = 0x00000004,
    VK_IMAGE_CREATE_MUTABLE_FORMAT_BIT = 0x00000008,
    VK_IMAGE_CREATE_CUBE_COMPATIBLE_BIT = 0x00000010,
  // Provided by VK_VERSION_1_1
    VK_IMAGE_CREATE_ALIAS_BIT = 0x00000400,
  // Provided by VK_VERSION_1_1
    VK_IMAGE_CREATE_SPLIT_INSTANCE_BIND_REGIONS_BIT = 0x00000040,
  // Provided by VK_VERSION_1_1
    VK_IMAGE_CREATE_2D_ARRAY_COMPATIBLE_BIT = 0x00000020,
  // Provided by VK_VERSION_1_1
    VK_IMAGE_CREATE_BLOCK_TEXEL_VIEW_COMPATIBLE_BIT = 0x00000080,
  // Provided by VK_VERSION_1_1
    VK_IMAGE_CREATE_EXTENDED_USAGE_BIT = 0x00000100,
  // Provided by VK_VERSION_1_1
    VK_IMAGE_CREATE_PROTECTED_BIT = 0x00000800,
  // Provided by VK_VERSION_1_1
    VK_IMAGE_CREATE_DISJOINT_BIT = 0x00000200,
} VkImageCreateFlagBits;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>VK_IMAGE_CREATE_SPARSE_BINDING_BIT</code> specifies that the image will
be backed using sparse memory binding.</p>
</li>
<li>
<p><code>VK_IMAGE_CREATE_SPARSE_RESIDENCY_BIT</code> specifies that the image <strong>can</strong>
be partially backed using sparse memory binding.
Images created with this flag <strong>must</strong> also be created with the
<code>VK_IMAGE_CREATE_SPARSE_BINDING_BIT</code> flag.</p>
</li>
<li>
<p><code>VK_IMAGE_CREATE_SPARSE_ALIASED_BIT</code> specifies that the image will
be backed using sparse memory binding with memory ranges that might also
simultaneously be backing another image (or another portion of the same
image).
Images created with this flag <strong>must</strong> also be created with the
<code>VK_IMAGE_CREATE_SPARSE_BINDING_BIT</code> flag.</p>
</li>
<li>
<p><code>VK_IMAGE_CREATE_MUTABLE_FORMAT_BIT</code> specifies that the image <strong>can</strong>
be used to create a <code>VkImageView</code> with a different format from the
image.
For <a href="formats.html#formats-requiring-sampler-ycbcr-conversion" class="xref page">multi-planar</a> formats,
<code>VK_IMAGE_CREATE_MUTABLE_FORMAT_BIT</code> specifies that a
<code>VkImageView</code> can be created of a <em>plane</em> of the image.</p>
</li>
<li>
<p><code>VK_IMAGE_CREATE_CUBE_COMPATIBLE_BIT</code> specifies that the image <strong>can</strong>
be used to create a <code>VkImageView</code> of type
<code>VK_IMAGE_VIEW_TYPE_CUBE</code> or <code>VK_IMAGE_VIEW_TYPE_CUBE_ARRAY</code>.</p>
</li>
<li>
<p><code>VK_IMAGE_CREATE_2D_ARRAY_COMPATIBLE_BIT</code> specifies that the image
<strong>can</strong> be used to create a <code>VkImageView</code> of type
<code>VK_IMAGE_VIEW_TYPE_2D</code> or <code>VK_IMAGE_VIEW_TYPE_2D_ARRAY</code>.</p>
</li>
<li>
<p><code>VK_IMAGE_CREATE_PROTECTED_BIT</code> specifies that the image is a
protected image.</p>
</li>
<li>
<p><code>VK_IMAGE_CREATE_SPLIT_INSTANCE_BIND_REGIONS_BIT</code> specifies that the
image <strong>can</strong> be used with a non-zero value of the
<code>splitInstanceBindRegionCount</code> member of a
<a href="#VkBindImageMemoryDeviceGroupInfo">VkBindImageMemoryDeviceGroupInfo</a> structure passed into
<a href="#vkBindImageMemory2">vkBindImageMemory2</a>.
This flag also has the effect of making the image use the standard
sparse image block dimensions.</p>
</li>
<li>
<p><code>VK_IMAGE_CREATE_BLOCK_TEXEL_VIEW_COMPATIBLE_BIT</code> specifies that the
image having a compressed format <strong>can</strong> be used to create a
<code>VkImageView</code> with an uncompressed format where each texel in the
image view corresponds to a compressed texel block of the image.</p>
</li>
<li>
<p><code>VK_IMAGE_CREATE_EXTENDED_USAGE_BIT</code> specifies that the image <strong>can</strong>
be created with usage flags that are not supported for the format the
image is created with but are supported for at least one format a
<code>VkImageView</code> created from the image <strong>can</strong> have.</p>
</li>
<li>
<p><code>VK_IMAGE_CREATE_DISJOINT_BIT</code> specifies that an image with a
<a href="formats.html#formats-requiring-sampler-ycbcr-conversion" class="xref page">multi-planar format</a> <strong>must</strong>
have each plane separately bound to memory, rather than having a single
memory binding for the whole image; the presence of this bit
distinguishes a <em>disjoint image</em> from an image without this bit set.</p>
</li>
<li>
<p><code>VK_IMAGE_CREATE_ALIAS_BIT</code> specifies that two images created with
    the same creation parameters and aliased to the same memory <strong>can</strong>
    interpret the contents of the memory consistently with each other,
    subject to the rules described in the <a href="#resources-memory-aliasing">Memory    Aliasing</a> section.
    This flag further specifies that each plane of a <em>disjoint</em> image <strong>can</strong>
    share an in-memory non-linear representation with single-plane images,
    and that a single-plane image <strong>can</strong> share an in-memory non-linear
    representation with a plane of a multi-planar disjoint image, according
    to the rules in <a href="formats.html#formats-compatible-planes" class="xref page">Compatible Formats of Planes of Multi-Planar Formats</a>.
    If the <code>pNext</code> chain includes a
<a href="#VkExternalMemoryImageCreateInfo">VkExternalMemoryImageCreateInfo</a>
    structure whose <code>handleTypes</code> member is not <code>0</code>, it is as if
    <code>VK_IMAGE_CREATE_ALIAS_BIT</code> is set.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>See <a href="sparsemem.html#sparsememory-sparseresourcefeatures" class="xref page">Sparse Resource Features</a> and
<a href="sparsemem.html#sparsememory-physicalfeatures" class="xref page">Sparse Physical Device Features</a> for more
details.</p>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div id="VkImageCreateFlags" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_VERSION_1_0
typedef VkFlags VkImageCreateFlags;</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>VkImageCreateFlags</code> is a bitmask type for setting a mask of zero or
more <a href="#VkImageCreateFlagBits">VkImageCreateFlagBits</a>.</p>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Possible values of <a href="#VkImageCreateInfo">VkImageCreateInfo</a>::<code>imageType</code>, specifying the
basic dimensionality of an image, are:</p>
</div>
<div id="VkImageType" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_VERSION_1_0
typedef enum VkImageType {
    VK_IMAGE_TYPE_1D = 0,
    VK_IMAGE_TYPE_2D = 1,
    VK_IMAGE_TYPE_3D = 2,
} VkImageType;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>VK_IMAGE_TYPE_1D</code> specifies a one-dimensional image.</p>
</li>
<li>
<p><code>VK_IMAGE_TYPE_2D</code> specifies a two-dimensional image.</p>
</li>
<li>
<p><code>VK_IMAGE_TYPE_3D</code> specifies a three-dimensional image.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Possible values of <a href="#VkImageCreateInfo">VkImageCreateInfo</a>::<code>tiling</code>, specifying the
tiling arrangement of texel blocks in an image, are:</p>
</div>
<div id="VkImageTiling" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_VERSION_1_0
typedef enum VkImageTiling {
    VK_IMAGE_TILING_OPTIMAL = 0,
    VK_IMAGE_TILING_LINEAR = 1,
} VkImageTiling;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>VK_IMAGE_TILING_OPTIMAL</code> specifies optimal tiling (texels are laid
out in an implementation-dependent arrangement, for more efficient
memory access).</p>
</li>
<li>
<p><code>VK_IMAGE_TILING_LINEAR</code> specifies linear tiling (texels are laid
out in memory in row-major order, possibly with some padding on each
row).</p>
</li>
</ul>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>To query the memory layout of an image subresource, call:</p>
</div>
<div id="vkGetImageSubresourceLayout" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_VERSION_1_0
void vkGetImageSubresourceLayout(
    VkDevice                                    device,
    VkImage                                     image,
    const VkImageSubresource*                   pSubresource,
    VkSubresourceLayout*                        pLayout);</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>device</code> is the logical device that owns the image.</p>
</li>
<li>
<p><code>image</code> is the image whose layout is being queried.</p>
</li>
<li>
<p><code>pSubresource</code> is a pointer to a <a href="#VkImageSubresource">VkImageSubresource</a> structure
selecting a specific image subresource from the image.</p>
</li>
<li>
<p><code>pLayout</code> is a pointer to a <a href="#VkSubresourceLayout">VkSubresourceLayout</a> structure in
which the layout is returned.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The image <strong>must</strong> be <a href="../appendices/glossary.html#glossary-linear-resource" class="xref page">linear</a>.
The
returned layout is valid for <a href="memory.html#memory-device-hostaccess" class="xref page">host access</a>.</p>
</div>
<div class="paragraph">
<p>If the image&#8217;s
format is a <a href="formats.html#formats-requiring-sampler-ycbcr-conversion" class="xref page">multi-planar format</a>, then <code>vkGetImageSubresourceLayout</code> describes one
plane
of the image.</p>
</div>
<div class="paragraph">
<p><code>vkGetImageSubresourceLayout</code> is invariant for the lifetime of a single
image.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkGetImageSubresourceLayout-image-07789" href="#VUID-vkGetImageSubresourceLayout-image-07789"></a> <span class="vuid">VUID-vkGetImageSubresourceLayout-image-07789</span><br>

<code>image</code> <strong>must</strong> have been created with <code>tiling</code> equal to
<code>VK_IMAGE_TILING_LINEAR</code></p>
</li>
</ul>
</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkGetImageSubresourceLayout-aspectMask-00997" href="#VUID-vkGetImageSubresourceLayout-aspectMask-00997"></a> <span class="vuid">VUID-vkGetImageSubresourceLayout-aspectMask-00997</span><br>

The <code>aspectMask</code> member of <code>pSubresource</code> <strong>must</strong> only have a
single bit set</p>
</li>
<li>
<p><a id="VUID-vkGetImageSubresourceLayout-mipLevel-01716" href="#VUID-vkGetImageSubresourceLayout-mipLevel-01716"></a> <span class="vuid">VUID-vkGetImageSubresourceLayout-mipLevel-01716</span><br>

The <code>mipLevel</code> member of <code>pSubresource</code> <strong>must</strong> be less than the
<code>mipLevels</code> specified in <code>image</code></p>
</li>
<li>
<p><a id="VUID-vkGetImageSubresourceLayout-arrayLayer-01717" href="#VUID-vkGetImageSubresourceLayout-arrayLayer-01717"></a> <span class="vuid">VUID-vkGetImageSubresourceLayout-arrayLayer-01717</span><br>

The <code>arrayLayer</code> member of <code>pSubresource</code> <strong>must</strong> be less than the
<code>arrayLayers</code> specified in <code>image</code></p>
</li>
<li>
<p><a id="VUID-vkGetImageSubresourceLayout-format-08886" href="#VUID-vkGetImageSubresourceLayout-format-08886"></a> <span class="vuid">VUID-vkGetImageSubresourceLayout-format-08886</span><br>

If <code>format</code> of the <code>image</code> is a color format
that is not a <a href="formats.html#formats-requiring-sampler-ycbcr-conversion" class="xref page">multi-planar    image format</a>,
and <code>tiling</code> of the <code>image</code> is
<code>VK_IMAGE_TILING_LINEAR</code> or <code>VK_IMAGE_TILING_OPTIMAL</code>, the
<code>aspectMask</code> member of <code>pSubresource</code> <strong>must</strong> be
<code>VK_IMAGE_ASPECT_COLOR_BIT</code></p>
</li>
<li>
<p><a id="VUID-vkGetImageSubresourceLayout-format-04462" href="#VUID-vkGetImageSubresourceLayout-format-04462"></a> <span class="vuid">VUID-vkGetImageSubresourceLayout-format-04462</span><br>

If <code>format</code> of the <code>image</code> has a depth component, the
<code>aspectMask</code> member of <code>pSubresource</code> <strong>must</strong> contain
<code>VK_IMAGE_ASPECT_DEPTH_BIT</code></p>
</li>
<li>
<p><a id="VUID-vkGetImageSubresourceLayout-format-04463" href="#VUID-vkGetImageSubresourceLayout-format-04463"></a> <span class="vuid">VUID-vkGetImageSubresourceLayout-format-04463</span><br>

If <code>format</code> of the <code>image</code> has a stencil component, the
<code>aspectMask</code> member of <code>pSubresource</code> <strong>must</strong> contain
<code>VK_IMAGE_ASPECT_STENCIL_BIT</code></p>
</li>
<li>
<p><a id="VUID-vkGetImageSubresourceLayout-format-04464" href="#VUID-vkGetImageSubresourceLayout-format-04464"></a> <span class="vuid">VUID-vkGetImageSubresourceLayout-format-04464</span><br>

If <code>format</code> of the <code>image</code> does not contain a stencil or
depth component, the <code>aspectMask</code> member of <code>pSubresource</code> <strong>must</strong>
not contain <code>VK_IMAGE_ASPECT_DEPTH_BIT</code> or
<code>VK_IMAGE_ASPECT_STENCIL_BIT</code></p>
</li>
<li>
<p><a id="VUID-vkGetImageSubresourceLayout-tiling-08717" href="#VUID-vkGetImageSubresourceLayout-tiling-08717"></a> <span class="vuid">VUID-vkGetImageSubresourceLayout-tiling-08717</span><br>

If the <code>tiling</code> of the <code>image</code> is
<code>VK_IMAGE_TILING_LINEAR</code> and has a
<a href="formats.html#formats-requiring-sampler-ycbcr-conversion" class="xref page">multi-planar image    format</a>, then the <code>aspectMask</code> member of <code>pSubresource</code> <strong>must</strong>
be a single valid <a href="formats.html#formats-planes-image-aspect" class="xref page">multi-planar aspect    mask</a> bit</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkGetImageSubresourceLayout-device-parameter" href="#VUID-vkGetImageSubresourceLayout-device-parameter"></a> <span class="vuid">VUID-vkGetImageSubresourceLayout-device-parameter</span><br>
 <code>device</code> <strong>must</strong> be a valid <a href="devsandqueues.html#VkDevice" class="xref page">VkDevice</a> handle</p>
</li>
<li>
<p><a id="VUID-vkGetImageSubresourceLayout-image-parameter" href="#VUID-vkGetImageSubresourceLayout-image-parameter"></a> <span class="vuid">VUID-vkGetImageSubresourceLayout-image-parameter</span><br>
 <code>image</code> <strong>must</strong> be a valid <a href="#VkImage">VkImage</a> handle</p>
</li>
<li>
<p><a id="VUID-vkGetImageSubresourceLayout-pSubresource-parameter" href="#VUID-vkGetImageSubresourceLayout-pSubresource-parameter"></a> <span class="vuid">VUID-vkGetImageSubresourceLayout-pSubresource-parameter</span><br>
 <code>pSubresource</code> <strong>must</strong> be a valid pointer to a valid <a href="#VkImageSubresource">VkImageSubresource</a> structure</p>
</li>
<li>
<p><a id="VUID-vkGetImageSubresourceLayout-pLayout-parameter" href="#VUID-vkGetImageSubresourceLayout-pLayout-parameter"></a> <span class="vuid">VUID-vkGetImageSubresourceLayout-pLayout-parameter</span><br>
 <code>pLayout</code> <strong>must</strong> be a valid pointer to a <a href="#VkSubresourceLayout">VkSubresourceLayout</a> structure</p>
</li>
<li>
<p><a id="VUID-vkGetImageSubresourceLayout-image-parent" href="#VUID-vkGetImageSubresourceLayout-image-parent"></a> <span class="vuid">VUID-vkGetImageSubresourceLayout-image-parent</span><br>
 <code>image</code> <strong>must</strong> have been created, allocated, or retrieved from <code>device</code></p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>VkImageSubresource</code> structure is defined as:</p>
</div>
<div id="VkImageSubresource" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_VERSION_1_0
typedef struct VkImageSubresource {
    VkImageAspectFlags    aspectMask;
    uint32_t              mipLevel;
    uint32_t              arrayLayer;
} VkImageSubresource;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>aspectMask</code> is a <a href="#VkImageAspectFlags">VkImageAspectFlags</a> value selecting the image
<em>aspect</em>.</p>
</li>
<li>
<p><code>mipLevel</code> selects the mipmap level.</p>
</li>
<li>
<p><code>arrayLayer</code> selects the array layer.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkImageSubresource-aspectMask-parameter" href="#VUID-VkImageSubresource-aspectMask-parameter"></a> <span class="vuid">VUID-VkImageSubresource-aspectMask-parameter</span><br>
 <code>aspectMask</code> <strong>must</strong> be a valid combination of <a href="#VkImageAspectFlagBits">VkImageAspectFlagBits</a> values</p>
</li>
<li>
<p><a id="VUID-VkImageSubresource-aspectMask-requiredbitmask" href="#VUID-VkImageSubresource-aspectMask-requiredbitmask"></a> <span class="vuid">VUID-VkImageSubresource-aspectMask-requiredbitmask</span><br>
 <code>aspectMask</code> <strong>must</strong> not be <code>0</code></p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Information about the layout of the image subresource is returned in a
<code>VkSubresourceLayout</code> structure:</p>
</div>
<div id="VkSubresourceLayout" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_VERSION_1_0
typedef struct VkSubresourceLayout {
    VkDeviceSize    offset;
    VkDeviceSize    size;
    VkDeviceSize    rowPitch;
    VkDeviceSize    arrayPitch;
    VkDeviceSize    depthPitch;
} VkSubresourceLayout;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>offset</code> is the byte offset from the start of the image
or the plane
where the image subresource begins.</p>
</li>
<li>
<p><code>size</code> is the size in bytes of the image subresource.
<code>size</code> includes any extra memory that is required based on
<code>rowPitch</code>.</p>
</li>
<li>
<p><code>rowPitch</code> describes the number of bytes between each row of texels
in an image.</p>
</li>
<li>
<p><code>arrayPitch</code> describes the number of bytes between each array layer
of an image.</p>
</li>
<li>
<p><code>depthPitch</code> describes the number of bytes between each slice of 3D
image.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>If the image is <a href="../appendices/glossary.html#glossary-linear-resource" class="xref page">linear</a>, then <code>rowPitch</code>,
<code>arrayPitch</code> and <code>depthPitch</code> describe the layout of the image
subresource in linear memory.
For uncompressed formats, <code>rowPitch</code> is the number of bytes between
texels with the same x coordinate in adjacent rows (y coordinates differ by
one).
<code>arrayPitch</code> is the number of bytes between texels with the same x and y
coordinate in adjacent array layers of the image (array layer values differ
by one).
<code>depthPitch</code> is the number of bytes between texels with the same x and y
coordinate in adjacent slices of a 3D image (z coordinates differ by one).
Expressed as an addressing formula, the starting byte of a texel in the
image subresource has address:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c hljs" data-lang="c">// (x,y,z,layer) are in texel coordinates
address(x,y,z,layer) = layer*arrayPitch + z*depthPitch + y*rowPitch + x*elementSize + offset</code></pre>
</div>
</div>
<div class="paragraph">
<p>For compressed formats, the <code>rowPitch</code> is the number of bytes between
compressed texel blocks in adjacent rows.
<code>arrayPitch</code> is the number of bytes between compressed texel blocks in
adjacent array layers.
<code>depthPitch</code> is the number of bytes between compressed texel blocks in
adjacent slices of a 3D image.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c hljs" data-lang="c">// (x,y,z,layer) are in compressed texel block coordinates
address(x,y,z,layer) = layer*arrayPitch + z*depthPitch + y*rowPitch + x*compressedTexelBlockByteSize + offset;</code></pre>
</div>
</div>
<div class="paragraph">
<p>The value of <code>arrayPitch</code> is <strong>undefined</strong> for images that were not created
as arrays.
<code>depthPitch</code> is defined only for 3D images.</p>
</div>
<div class="paragraph">
<p>If the image has a
<em>single-plane</em>
color format
, then the <code>aspectMask</code> member of <code>VkImageSubresource</code> <strong>must</strong> be
<code>VK_IMAGE_ASPECT_COLOR_BIT</code>.</p>
</div>
<div class="paragraph">
<p>If the image has a depth/stencil format
, then <code>aspectMask</code> <strong>must</strong> be either <code>VK_IMAGE_ASPECT_DEPTH_BIT</code> or
<code>VK_IMAGE_ASPECT_STENCIL_BIT</code>.
On implementations that store depth and stencil aspects separately, querying
each of these image subresource layouts will return a different <code>offset</code>
and <code>size</code> representing the region of memory used for that aspect.
On implementations that store depth and stencil aspects interleaved, the
same <code>offset</code> and <code>size</code> are returned and represent the interleaved
memory allocation.</p>
</div>
<div class="paragraph">
<p>If the image has a <a href="formats.html#formats-requiring-sampler-ycbcr-conversion" class="xref page">multi-planar format</a>
, then the <code>aspectMask</code> member of <code>VkImageSubresource</code> <strong>must</strong> be
<code>VK_IMAGE_ASPECT_PLANE_0_BIT</code>, <code>VK_IMAGE_ASPECT_PLANE_1_BIT</code>, or
(for 3-plane formats only) <code>VK_IMAGE_ASPECT_PLANE_2_BIT</code>.
Querying each of these image subresource layouts will return a different
<code>offset</code> and <code>size</code> representing the region of memory used for that
plane.
If the image is <em>disjoint</em>, then the <code>offset</code> is relative to the base
address of the plane.
If the image is <em>non-disjoint</em>, then the <code>offset</code> is relative to the
base address of the image.</p>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>To destroy an image, call:</p>
</div>
<div id="vkDestroyImage" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_VERSION_1_0
void vkDestroyImage(
    VkDevice                                    device,
    VkImage                                     image,
    const VkAllocationCallbacks*                pAllocator);</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>device</code> is the logical device that destroys the image.</p>
</li>
<li>
<p><code>image</code> is the image to destroy.</p>
</li>
<li>
<p><code>pAllocator</code> controls host memory allocation as described in the
<a href="memory.html#memory-allocation" class="xref page">Memory Allocation</a> chapter.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkDestroyImage-image-01000" href="#VUID-vkDestroyImage-image-01000"></a> <span class="vuid">VUID-vkDestroyImage-image-01000</span><br>

All submitted commands that refer to <code>image</code>, either directly or via
a <code>VkImageView</code>, <strong>must</strong> have completed execution</p>
</li>
<li>
<p><a id="VUID-vkDestroyImage-image-01001" href="#VUID-vkDestroyImage-image-01001"></a> <span class="vuid">VUID-vkDestroyImage-image-01001</span><br>

If <code>VkAllocationCallbacks</code> were provided when <code>image</code> was
created, a compatible set of callbacks <strong>must</strong> be provided here</p>
</li>
<li>
<p><a id="VUID-vkDestroyImage-image-01002" href="#VUID-vkDestroyImage-image-01002"></a> <span class="vuid">VUID-vkDestroyImage-image-01002</span><br>

If no <code>VkAllocationCallbacks</code> were provided when <code>image</code> was
created, <code>pAllocator</code> <strong>must</strong> be <code>NULL</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkDestroyImage-device-parameter" href="#VUID-vkDestroyImage-device-parameter"></a> <span class="vuid">VUID-vkDestroyImage-device-parameter</span><br>
 <code>device</code> <strong>must</strong> be a valid <a href="devsandqueues.html#VkDevice" class="xref page">VkDevice</a> handle</p>
</li>
<li>
<p><a id="VUID-vkDestroyImage-image-parameter" href="#VUID-vkDestroyImage-image-parameter"></a> <span class="vuid">VUID-vkDestroyImage-image-parameter</span><br>
 If <code>image</code> is not <a href="../appendices/boilerplate.html#VK_NULL_HANDLE" class="xref page">VK_NULL_HANDLE</a>, <code>image</code> <strong>must</strong> be a valid <a href="#VkImage">VkImage</a> handle</p>
</li>
<li>
<p><a id="VUID-vkDestroyImage-pAllocator-parameter" href="#VUID-vkDestroyImage-pAllocator-parameter"></a> <span class="vuid">VUID-vkDestroyImage-pAllocator-parameter</span><br>
 If <code>pAllocator</code> is not <code>NULL</code>, <code>pAllocator</code> <strong>must</strong> be a valid pointer to a valid <a href="memory.html#VkAllocationCallbacks" class="xref page">VkAllocationCallbacks</a> structure</p>
</li>
<li>
<p><a id="VUID-vkDestroyImage-image-parent" href="#VUID-vkDestroyImage-image-parent"></a> <span class="vuid">VUID-vkDestroyImage-image-parent</span><br>
 If <code>image</code> is a valid handle, it <strong>must</strong> have been created, allocated, or retrieved from <code>device</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Host Synchronization</div>
<div class="ulist">
<ul>
<li>
<p>Host access to <code>image</code> <strong>must</strong> be externally synchronized</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="resources-image-format-features"><a class="anchor" href="#resources-image-format-features"></a>Image Format Features</h3>
<div class="paragraph">
<p>Valid uses of a <a href="#VkImage">VkImage</a> <strong>may</strong> depend on the image&#8217;s <em>format features</em>,
defined below.
Such constraints are documented in the affected valid usage statement.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>If the image was created with <code>VK_IMAGE_TILING_LINEAR</code>, then its set
of <em>format features</em> is the value of
<a href="formats.html#VkFormatProperties" class="xref page">VkFormatProperties</a>::<code>linearTilingFeatures</code> found by calling
<a href="formats.html#vkGetPhysicalDeviceFormatProperties" class="xref page">vkGetPhysicalDeviceFormatProperties</a> on the same <code>format</code> as
<a href="#VkImageCreateInfo">VkImageCreateInfo</a>::<code>format</code>.</p>
</li>
<li>
<p>If the image was created with <code>VK_IMAGE_TILING_OPTIMAL</code>,
then its set of <em>format features</em> is the value of
<a href="formats.html#VkFormatProperties" class="xref page">VkFormatProperties</a>::<code>optimalTilingFeatures</code> found by calling
<a href="formats.html#vkGetPhysicalDeviceFormatProperties" class="xref page">vkGetPhysicalDeviceFormatProperties</a> on the same <code>format</code> as
<a href="#VkImageCreateInfo">VkImageCreateInfo</a>::<code>format</code>.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="resources-image-mip-level-sizing"><a class="anchor" href="#resources-image-mip-level-sizing"></a>Image Mip Level Sizing</h3>
<div class="paragraph">
<p>A <em>complete mipmap chain</em> is the full set of mip levels, from the largest
mip level provided, down to the <em>minimum mip level size</em>.</p>
</div>
<div class="sect3">
<h4 id="_conventional_images"><a class="anchor" href="#_conventional_images"></a>Conventional Images</h4>
<div class="paragraph">
<p>For conventional images, the dimensions of each successive mip level,
<span class="eq">n+1</span>, are:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"></dt>
<dd>
<p><span class="eq"><code>width</code><sub>n+1</sub> = max(<code>width</code><sub>n</sub>/2,
1)</span></p>
</dd>
<dt class="hdlist1"></dt>
<dd>
<p><span class="eq"><code>height</code><sub>n+1</sub> = max(<code>height</code><sub>n</sub>/2,
1)</span></p>
</dd>
<dt class="hdlist1"></dt>
<dd>
<p><span class="eq"><code>depth</code><sub>n+1</sub> = max(<code>depth</code><sub>n</sub>/2,
1)</span></p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>where <span class="eq"><code>width</code><sub>n</sub></span>, <span class="eq"><code>height</code><sub>n</sub></span>, and <span class="eq"><code>depth</code><sub>n</sub></span>
are the dimensions of the next larger mip level, <span class="eq">n</span>.</p>
</div>
<div class="paragraph">
<p>The minimum mip level size is:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>1 for one-dimensional images,</p>
</li>
<li>
<p>1x1 for two-dimensional images, and</p>
</li>
<li>
<p>1x1x1 for three-dimensional images.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The number of levels in a complete mipmap chain is:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"></dt>
<dd>
<p><span class="eq">log<sub>2</sub>(max(<code>width</code><sub>0</sub>, <code>height</code><sub>0</sub>,
<code>depth</code><sub>0</sub>)) +  1</span></p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>where <span class="eq"><code>width</code><sub>0</sub></span>, <span class="eq"><code>height</code><sub>0</sub></span>, and <span class="eq"><code>depth</code><sub>0</sub></span>
are the dimensions of the largest (most detailed) mip level, <code>0</code>.</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="resources-image-layouts"><a class="anchor" href="#resources-image-layouts"></a>Image Layouts</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Images are stored in implementation-dependent opaque layouts in memory.
Each layout has limitations on what kinds of operations are supported for
image subresources using the layout.
At any given time, the data representing an image subresource in memory
exists in a particular layout which is determined by the most recent layout
transition that was performed on that image subresource.
Applications have control over which layout each image subresource uses, and
<strong>can</strong> transition an image subresource from one layout to another.
Transitions <strong>can</strong> happen with an image memory barrier, included as part of a
<a href="synchronization.html#vkCmdPipelineBarrier" class="xref page">vkCmdPipelineBarrier</a> or a <a href="synchronization.html#vkCmdWaitEvents" class="xref page">vkCmdWaitEvents</a> command buffer command
(see <a href="synchronization.html#synchronization-image-memory-barriers" class="xref page">Image Memory Barriers</a>), or as part of a subpass
dependency within a render pass (see <code>VkSubpassDependency</code>).</p>
</div>
<div class="paragraph">
<p>Image layout is per-image subresource.
Separate image subresources of the same image <strong>can</strong> be in different layouts
at the same time, with the exception that depth and stencil aspects of a
given image subresource <strong>can</strong> only be in different layouts if the
<a href="features.html#features-separateDepthStencilLayouts" class="xref page"><code>separateDepthStencilLayouts</code></a>
feature is enabled.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Each layout <strong>may</strong> offer optimal performance for a specific usage of image
memory.
For example, an image with a layout of
<code>VK_IMAGE_LAYOUT_COLOR_ATTACHMENT_OPTIMAL</code> <strong>may</strong> provide optimal
performance for use as a color attachment, but be unsupported for use in
transfer commands.
Applications <strong>can</strong> transition an image subresource from one layout to another
in order to achieve optimal performance when the image subresource is used
for multiple kinds of operations.
After initialization, applications need not use any layout other than the
general layout, though this <strong>may</strong> produce suboptimal performance on some
implementations.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Upon creation, all image subresources of an image are initially in the same
layout, where that layout is selected by the
<code>VkImageCreateInfo</code>::<code>initialLayout</code> member.
The <code>initialLayout</code> <strong>must</strong> be either <code>VK_IMAGE_LAYOUT_UNDEFINED</code> or
<code>VK_IMAGE_LAYOUT_PREINITIALIZED</code>.
If it is <code>VK_IMAGE_LAYOUT_PREINITIALIZED</code>, then the image data <strong>can</strong> be
preinitialized by the host while using this layout, and the transition away
from this layout will preserve that data.
If it is <code>VK_IMAGE_LAYOUT_UNDEFINED</code>, then the contents of the data are
considered to be <strong>undefined</strong>, and the transition away from this layout is not
guaranteed to preserve that data.
For either of these initial layouts, any image subresources <strong>must</strong> be
transitioned to another layout before they are accessed by the device.</p>
</div>
<div class="paragraph">
<p>Host access to image memory is only well-defined for
<a href="../appendices/glossary.html#glossary-linear-resource" class="xref page">linear</a> images and for image subresources of
those images which are currently in either the
<code>VK_IMAGE_LAYOUT_PREINITIALIZED</code> or <code>VK_IMAGE_LAYOUT_GENERAL</code>
layout.
Calling <a href="#vkGetImageSubresourceLayout">vkGetImageSubresourceLayout</a> for a linear image returns a
subresource layout mapping that is valid for either of those image layouts.</p>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The set of image layouts consists of:</p>
</div>
<div id="VkImageLayout" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_VERSION_1_0
typedef enum VkImageLayout {
    VK_IMAGE_LAYOUT_UNDEFINED = 0,
    VK_IMAGE_LAYOUT_GENERAL = 1,
    VK_IMAGE_LAYOUT_COLOR_ATTACHMENT_OPTIMAL = 2,
    VK_IMAGE_LAYOUT_DEPTH_STENCIL_ATTACHMENT_OPTIMAL = 3,
    VK_IMAGE_LAYOUT_DEPTH_STENCIL_READ_ONLY_OPTIMAL = 4,
    VK_IMAGE_LAYOUT_SHADER_READ_ONLY_OPTIMAL = 5,
    VK_IMAGE_LAYOUT_TRANSFER_SRC_OPTIMAL = 6,
    VK_IMAGE_LAYOUT_TRANSFER_DST_OPTIMAL = 7,
    VK_IMAGE_LAYOUT_PREINITIALIZED = 8,
  // Provided by VK_VERSION_1_1
    VK_IMAGE_LAYOUT_DEPTH_READ_ONLY_STENCIL_ATTACHMENT_OPTIMAL = 1000117000,
  // Provided by VK_VERSION_1_1
    VK_IMAGE_LAYOUT_DEPTH_ATTACHMENT_STENCIL_READ_ONLY_OPTIMAL = 1000117001,
  // Provided by VK_VERSION_1_2
    VK_IMAGE_LAYOUT_DEPTH_ATTACHMENT_OPTIMAL = 1000241000,
  // Provided by VK_VERSION_1_2
    VK_IMAGE_LAYOUT_DEPTH_READ_ONLY_OPTIMAL = 1000241001,
  // Provided by VK_VERSION_1_2
    VK_IMAGE_LAYOUT_STENCIL_ATTACHMENT_OPTIMAL = 1000241002,
  // Provided by VK_VERSION_1_2
    VK_IMAGE_LAYOUT_STENCIL_READ_ONLY_OPTIMAL = 1000241003,
  // Provided by VK_VERSION_1_3
    VK_IMAGE_LAYOUT_READ_ONLY_OPTIMAL = 1000314000,
  // Provided by VK_VERSION_1_3
    VK_IMAGE_LAYOUT_ATTACHMENT_OPTIMAL = 1000314001,
} VkImageLayout;</code></pre>
</div>
</div>
<div class="paragraph">
<p>The type(s) of device access supported by each layout are:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>VK_IMAGE_LAYOUT_UNDEFINED</code> specifies that the layout is unknown.
Image memory <strong>cannot</strong> be transitioned into this layout.
This layout <strong>can</strong> be used as the <code>initialLayout</code> member of
<a href="#VkImageCreateInfo">VkImageCreateInfo</a>.
This layout <strong>can</strong> be used in place of the current image layout in a
layout transition, but doing so will cause the contents of the image&#8217;s
memory to be <strong>undefined</strong>.</p>
</li>
<li>
<p><code>VK_IMAGE_LAYOUT_PREINITIALIZED</code> specifies that an image&#8217;s memory is
in a defined layout and <strong>can</strong> be populated by data, but that it has not
yet been initialized by the driver.
Image memory <strong>cannot</strong> be transitioned into this layout.
This layout <strong>can</strong> be used as the <code>initialLayout</code> member of
<a href="#VkImageCreateInfo">VkImageCreateInfo</a>.
This layout is intended to be used as the initial layout for an image
whose contents are written by the host, and hence the data <strong>can</strong> be
written to memory immediately, without first executing a layout
transition.
Currently, <code>VK_IMAGE_LAYOUT_PREINITIALIZED</code> is only useful with
<a href="../appendices/glossary.html#glossary-linear-resource" class="xref page">linear</a> images because there is not a
standard layout defined for <code>VK_IMAGE_TILING_OPTIMAL</code> images.</p>
</li>
<li>
<p><code>VK_IMAGE_LAYOUT_GENERAL</code> supports all types of device access.</p>
</li>
<li>
<p><code>VK_IMAGE_LAYOUT_ATTACHMENT_OPTIMAL</code> specifies a layout that <strong>must</strong>
only be used with attachment accesses in the graphics pipeline.</p>
</li>
<li>
<p><code>VK_IMAGE_LAYOUT_READ_ONLY_OPTIMAL</code> specifies a layout allowing read
only access as an attachment, or in shaders as a sampled image, combined
image/sampler, or input attachment.</p>
</li>
<li>
<p><code>VK_IMAGE_LAYOUT_COLOR_ATTACHMENT_OPTIMAL</code> <strong>must</strong> only be used as a
color or resolve attachment in a <code>VkFramebuffer</code>.
This layout is valid only for image subresources of images created with
the <code>VK_IMAGE_USAGE_COLOR_ATTACHMENT_BIT</code> usage bit enabled.</p>
</li>
<li>
<p><code>VK_IMAGE_LAYOUT_DEPTH_STENCIL_ATTACHMENT_OPTIMAL</code> specifies a
layout for both the depth and stencil aspects of a depth/stencil format
image allowing read and write access as a depth/stencil attachment.
It is equivalent to <code>VK_IMAGE_LAYOUT_DEPTH_ATTACHMENT_OPTIMAL</code> and
<code>VK_IMAGE_LAYOUT_STENCIL_ATTACHMENT_OPTIMAL</code>.</p>
</li>
<li>
<p><code>VK_IMAGE_LAYOUT_DEPTH_STENCIL_READ_ONLY_OPTIMAL</code> specifies a layout
for both the depth and stencil aspects of a depth/stencil format image
allowing read only access as a depth/stencil attachment or in shaders as
a sampled image, combined image/sampler, or input attachment.
It is equivalent to <code>VK_IMAGE_LAYOUT_DEPTH_READ_ONLY_OPTIMAL</code> and
<code>VK_IMAGE_LAYOUT_STENCIL_READ_ONLY_OPTIMAL</code>.</p>
</li>
<li>
<p><code>VK_IMAGE_LAYOUT_DEPTH_READ_ONLY_STENCIL_ATTACHMENT_OPTIMAL</code>
specifies a layout for depth/stencil format images allowing read and
write access to the stencil aspect as a stencil attachment, and read
only access to the depth aspect as a depth attachment or in shaders as a
sampled image, combined image/sampler, or input attachment.
It is equivalent to <code>VK_IMAGE_LAYOUT_DEPTH_READ_ONLY_OPTIMAL</code> and
<code>VK_IMAGE_LAYOUT_STENCIL_ATTACHMENT_OPTIMAL</code>.</p>
</li>
<li>
<p><code>VK_IMAGE_LAYOUT_DEPTH_ATTACHMENT_STENCIL_READ_ONLY_OPTIMAL</code>
specifies a layout for depth/stencil format images allowing read and
write access to the depth aspect as a depth attachment, and read only
access to the stencil aspect as a stencil attachment or in shaders as a
sampled image, combined image/sampler, or input attachment.
It is equivalent to <code>VK_IMAGE_LAYOUT_DEPTH_ATTACHMENT_OPTIMAL</code> and
<code>VK_IMAGE_LAYOUT_STENCIL_READ_ONLY_OPTIMAL</code>.</p>
</li>
<li>
<p><code>VK_IMAGE_LAYOUT_DEPTH_ATTACHMENT_OPTIMAL</code> specifies a layout for
the depth aspect of a depth/stencil format image allowing read and write
access as a depth attachment.</p>
</li>
<li>
<p><code>VK_IMAGE_LAYOUT_DEPTH_READ_ONLY_OPTIMAL</code> specifies a layout for the
depth aspect of a depth/stencil format image allowing read-only access
as a depth attachment or in shaders as a sampled image, combined
image/sampler, or input attachment.</p>
</li>
<li>
<p><code>VK_IMAGE_LAYOUT_STENCIL_ATTACHMENT_OPTIMAL</code> specifies a layout for
the stencil aspect of a depth/stencil format image allowing read and
write access as a stencil attachment.</p>
</li>
<li>
<p><code>VK_IMAGE_LAYOUT_STENCIL_READ_ONLY_OPTIMAL</code> specifies a layout for
the stencil aspect of a depth/stencil format image allowing read-only
access as a stencil attachment or in shaders as a sampled image,
combined image/sampler, or input attachment.</p>
</li>
<li>
<p><code>VK_IMAGE_LAYOUT_SHADER_READ_ONLY_OPTIMAL</code> specifies a layout
allowing read-only access in a shader as a sampled image, combined
image/sampler, or input attachment.
This layout is valid only for image subresources of images created with
the <code>VK_IMAGE_USAGE_SAMPLED_BIT</code> or
<code>VK_IMAGE_USAGE_INPUT_ATTACHMENT_BIT</code> usage bits enabled.</p>
</li>
<li>
<p><code>VK_IMAGE_LAYOUT_TRANSFER_SRC_OPTIMAL</code> <strong>must</strong> only be used as a
source image of a transfer command (see the definition of
<a href="synchronization.html#synchronization-pipeline-stages-transfer" class="xref page">    <code>VK_PIPELINE_STAGE_TRANSFER_BIT</code></a>).
This layout is valid only for image subresources of images created with
the <code>VK_IMAGE_USAGE_TRANSFER_SRC_BIT</code> usage bit enabled.</p>
</li>
<li>
<p><code>VK_IMAGE_LAYOUT_TRANSFER_DST_OPTIMAL</code> <strong>must</strong> only be used as a
destination image of a transfer command.
This layout is valid only for image subresources of images created with
the <code>VK_IMAGE_USAGE_TRANSFER_DST_BIT</code> usage bit enabled.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The layout of each image subresource is not a state of the image subresource
itself, but is rather a property of how the data in memory is organized, and
thus for each mechanism of accessing an image in the API the application
<strong>must</strong> specify a parameter or structure member that indicates which image
layout the image subresource(s) are considered to be in when the image will
be accessed.
For transfer commands, this is a parameter to the command (see <a href="clears.html#clears" class="xref page">Clear Commands</a>
and <a href="copies.html#copies" class="xref page">Copy Commands</a>).
For use as a framebuffer attachment, this is a member in the substructures
of the <a href="renderpass.html#VkRenderPassCreateInfo" class="xref page">VkRenderPassCreateInfo</a> (see <a href="renderpass.html#renderpass" class="xref page">Render Pass</a>).
For use in a descriptor set, this is a member in the
<code>VkDescriptorImageInfo</code> structure (see <a href="descriptorsets.html#descriptorsets-updates" class="xref page">Descriptor Set Updates</a>).</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="resources-image-layouts-matching-rule"><a class="anchor" href="#resources-image-layouts-matching-rule"></a>Image Layout Matching Rules</h3>
<div class="paragraph">
<p>At the time that any command buffer command accessing an image executes on
any queue, the layouts of the image subresources that are accessed <strong>must</strong> all
match exactly the layout specified via the API controlling those
accesses,
except in case of accesses to an image with a depth/stencil format performed
through descriptors referring to only a single aspect of the image, where
the following relaxed matching rules apply:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Descriptors referring just to the depth aspect of a depth/stencil image
only need to match in the image layout of the depth aspect, thus
<code>VK_IMAGE_LAYOUT_DEPTH_STENCIL_READ_ONLY_OPTIMAL</code> and
<code>VK_IMAGE_LAYOUT_DEPTH_READ_ONLY_STENCIL_ATTACHMENT_OPTIMAL</code> are
considered to match.</p>
</li>
<li>
<p>Descriptors referring just to the stencil aspect of a depth/stencil
image only need to match in the image layout of the stencil aspect, thus
<code>VK_IMAGE_LAYOUT_DEPTH_STENCIL_READ_ONLY_OPTIMAL</code> and
<code>VK_IMAGE_LAYOUT_DEPTH_ATTACHMENT_STENCIL_READ_ONLY_OPTIMAL</code> are
considered to match.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>When performing a layout transition on an image subresource, the old layout
value <strong>must</strong> either equal the current layout of the image subresource (at the
time the transition executes), or else be <code>VK_IMAGE_LAYOUT_UNDEFINED</code>
(implying that the contents of the image subresource need not be preserved).
The new layout used in a transition <strong>must</strong> not be
<code>VK_IMAGE_LAYOUT_UNDEFINED</code> or <code>VK_IMAGE_LAYOUT_PREINITIALIZED</code>.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="resources-image-views"><a class="anchor" href="#resources-image-views"></a>Image Views</h2>
<div class="sectionbody">
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Image objects are not directly accessed by pipeline shaders for reading or
writing image data.
Instead, <em>image views</em> representing contiguous ranges of the image
subresources and containing additional metadata are used for that purpose.
Views <strong>must</strong> be created on images of compatible types, and <strong>must</strong> represent a
valid subset of image subresources.</p>
</div>
<div class="paragraph">
<p>Image views are represented by <code>VkImageView</code> handles:</p>
</div>
<div id="VkImageView" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_VERSION_1_0
VK_DEFINE_NON_DISPATCHABLE_HANDLE(VkImageView)</code></pre>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p><code>VK_REMAINING_ARRAY_LAYERS</code> is a special constant value used for image
views to indicate that all remaining array layers in an image after the base
layer should be included in the view.</p>
</div>
<div id="VK_REMAINING_ARRAY_LAYERS" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">#define VK_REMAINING_ARRAY_LAYERS         (~0U)</code></pre>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p><code>VK_REMAINING_MIP_LEVELS</code> is a special constant value used for image
views to indicate that all remaining mipmap levels in an image after the
base level should be included in the view.</p>
</div>
<div id="VK_REMAINING_MIP_LEVELS" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">#define VK_REMAINING_MIP_LEVELS           (~0U)</code></pre>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The types of image views that <strong>can</strong> be created are:</p>
</div>
<div id="VkImageViewType" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_VERSION_1_0
typedef enum VkImageViewType {
    VK_IMAGE_VIEW_TYPE_1D = 0,
    VK_IMAGE_VIEW_TYPE_2D = 1,
    VK_IMAGE_VIEW_TYPE_3D = 2,
    VK_IMAGE_VIEW_TYPE_CUBE = 3,
    VK_IMAGE_VIEW_TYPE_1D_ARRAY = 4,
    VK_IMAGE_VIEW_TYPE_2D_ARRAY = 5,
    VK_IMAGE_VIEW_TYPE_CUBE_ARRAY = 6,
} VkImageViewType;</code></pre>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>To create an image view, call:</p>
</div>
<div id="vkCreateImageView" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_VERSION_1_0
VkResult vkCreateImageView(
    VkDevice                                    device,
    const VkImageViewCreateInfo*                pCreateInfo,
    const VkAllocationCallbacks*                pAllocator,
    VkImageView*                                pView);</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>device</code> is the logical device that creates the image view.</p>
</li>
<li>
<p><code>pCreateInfo</code> is a pointer to a <code>VkImageViewCreateInfo</code>
structure containing parameters to be used to create the image view.</p>
</li>
<li>
<p><code>pAllocator</code> controls host memory allocation as described in the
<a href="memory.html#memory-allocation" class="xref page">Memory Allocation</a> chapter.</p>
</li>
<li>
<p><code>pView</code> is a pointer to a <a href="#VkImageView">VkImageView</a> handle in which the
resulting image view object is returned.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCreateImageView-device-09667" href="#VUID-vkCreateImageView-device-09667"></a> <span class="vuid">VUID-vkCreateImageView-device-09667</span><br>

<code>device</code> <strong>must</strong> support at least one queue family with one of the
<code>VK_QUEUE_COMPUTE_BIT</code>, or <code>VK_QUEUE_GRAPHICS_BIT</code> capabilities</p>
</li>
<li>
<p><a id="VUID-vkCreateImageView-image-09179" href="#VUID-vkCreateImageView-image-09179"></a> <span class="vuid">VUID-vkCreateImageView-image-09179</span><br>

<a href="#VkImageViewCreateInfo">VkImageViewCreateInfo</a>::<code>image</code> <strong>must</strong> have been created from
<code>device</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCreateImageView-device-parameter" href="#VUID-vkCreateImageView-device-parameter"></a> <span class="vuid">VUID-vkCreateImageView-device-parameter</span><br>
 <code>device</code> <strong>must</strong> be a valid <a href="devsandqueues.html#VkDevice" class="xref page">VkDevice</a> handle</p>
</li>
<li>
<p><a id="VUID-vkCreateImageView-pCreateInfo-parameter" href="#VUID-vkCreateImageView-pCreateInfo-parameter"></a> <span class="vuid">VUID-vkCreateImageView-pCreateInfo-parameter</span><br>
 <code>pCreateInfo</code> <strong>must</strong> be a valid pointer to a valid <a href="#VkImageViewCreateInfo">VkImageViewCreateInfo</a> structure</p>
</li>
<li>
<p><a id="VUID-vkCreateImageView-pAllocator-parameter" href="#VUID-vkCreateImageView-pAllocator-parameter"></a> <span class="vuid">VUID-vkCreateImageView-pAllocator-parameter</span><br>
 If <code>pAllocator</code> is not <code>NULL</code>, <code>pAllocator</code> <strong>must</strong> be a valid pointer to a valid <a href="memory.html#VkAllocationCallbacks" class="xref page">VkAllocationCallbacks</a> structure</p>
</li>
<li>
<p><a id="VUID-vkCreateImageView-pView-parameter" href="#VUID-vkCreateImageView-pView-parameter"></a> <span class="vuid">VUID-vkCreateImageView-pView-parameter</span><br>
 <code>pView</code> <strong>must</strong> be a valid pointer to a <a href="#VkImageView">VkImageView</a> handle</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Return Codes</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><a href="fundamentals.html#fundamentals-successcodes" class="xref page">Success</a></dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><code>VK_SUCCESS</code></p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1"><a href="fundamentals.html#fundamentals-errorcodes" class="xref page">Failure</a></dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><code>VK_ERROR_OUT_OF_HOST_MEMORY</code></p>
</li>
<li>
<p><code>VK_ERROR_OUT_OF_DEVICE_MEMORY</code></p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>VkImageViewCreateInfo</code> structure is defined as:</p>
</div>
<div id="VkImageViewCreateInfo" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_VERSION_1_0
typedef struct VkImageViewCreateInfo {
    VkStructureType            sType;
    const void*                pNext;
    VkImageViewCreateFlags     flags;
    VkImage                    image;
    VkImageViewType            viewType;
    VkFormat                   format;
    VkComponentMapping         components;
    VkImageSubresourceRange    subresourceRange;
} VkImageViewCreateInfo;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is a <a href="fundamentals.html#VkStructureType" class="xref page">VkStructureType</a> value identifying this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>flags</code> is a bitmask of <a href="#VkImageViewCreateFlagBits">VkImageViewCreateFlagBits</a> specifying
additional parameters of the image view.</p>
</li>
<li>
<p><code>image</code> is a <a href="#VkImage">VkImage</a> on which the view will be created.</p>
</li>
<li>
<p><code>viewType</code> is a <a href="#VkImageViewType">VkImageViewType</a> value specifying the type of
the image view.</p>
</li>
<li>
<p><code>format</code> is a <a href="formats.html#VkFormat" class="xref page">VkFormat</a> specifying the format and type used to
interpret texel blocks of the image.</p>
</li>
<li>
<p><code>components</code> is a <a href="#VkComponentMapping">VkComponentMapping</a> structure specifying a
remapping of color components (or of depth or stencil components after
they have been converted into color components).</p>
</li>
<li>
<p><code>subresourceRange</code> is a <a href="#VkImageSubresourceRange">VkImageSubresourceRange</a> structure
selecting the set of mipmap levels and array layers to be accessible to
the view.</p>
</li>
</ul>
</div>
<div id="resources-image-inherited-usage" class="paragraph">
<p>Some of the <code>image</code> creation parameters are inherited by the view.
In particular, image view creation inherits the implicit parameter
<code>usage</code> specifying the allowed usages of the image view that, by
default, takes the value of the corresponding <code>usage</code> parameter
specified in <a href="#VkImageCreateInfo">VkImageCreateInfo</a> at image creation time.
The implicit <code>usage</code> <strong>can</strong> be overridden by adding a
<a href="#VkImageViewUsageCreateInfo">VkImageViewUsageCreateInfo</a> structure to the <code>pNext</code> chain, but the
view usage <strong>must</strong> be a subset of the image usage.
If <code>image</code> has a depth-stencil format and was created with a
<a href="#VkImageStencilUsageCreateInfo">VkImageStencilUsageCreateInfo</a> structure included in the <code>pNext</code>
chain of <a href="#VkImageCreateInfo">VkImageCreateInfo</a>, the usage is calculated based on the
<code>subresource.aspectMask</code> provided:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>If <code>aspectMask</code> includes only <code>VK_IMAGE_ASPECT_STENCIL_BIT</code>, the
implicit <code>usage</code> is equal to
<a href="#VkImageStencilUsageCreateInfo">VkImageStencilUsageCreateInfo</a>::<code>stencilUsage</code>.</p>
</li>
<li>
<p>If <code>aspectMask</code> includes only <code>VK_IMAGE_ASPECT_DEPTH_BIT</code>, the
implicit <code>usage</code> is equal to <a href="#VkImageCreateInfo">VkImageCreateInfo</a>::<code>usage</code>.</p>
</li>
<li>
<p>If both aspects are included in <code>aspectMask</code>, the implicit
<code>usage</code> is equal to the intersection of
<a href="#VkImageCreateInfo">VkImageCreateInfo</a>::<code>usage</code> and
<a href="#VkImageStencilUsageCreateInfo">VkImageStencilUsageCreateInfo</a>::<code>stencilUsage</code>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>If <code>image</code> was created with the <code>VK_IMAGE_CREATE_MUTABLE_FORMAT_BIT</code>
flag,
and if the <code>format</code> of the image is not
<a href="formats.html#formats-requiring-sampler-ycbcr-conversion" class="xref page">multi-planar</a>,
<code>format</code> <strong>can</strong> be different from the image&#8217;s format, but if
<code>image</code> was created without the
<code>VK_IMAGE_CREATE_BLOCK_TEXEL_VIEW_COMPATIBLE_BIT</code> flag and
they are not equal they <strong>must</strong> be <em>compatible</em>.
Image format compatibility is defined in the
<a href="formats.html#formats-compatibility-classes" class="xref page">Format Compatibility Classes</a> section.
Views of compatible formats will have the same mapping between texel
coordinates and memory locations irrespective of the <code>format</code>, with only
the interpretation of the bit pattern changing.</p>
</div>
<div id="image-views-plane-promotion" class="paragraph">
<p>If <code>image</code> was created with a
<a href="formats.html#formats-requiring-sampler-ycbcr-conversion" class="xref page">multi-planar</a> format, and the
image view&#8217;s <code>aspectMask</code> is one of <code>VK_IMAGE_ASPECT_PLANE_0_BIT</code>,
<code>VK_IMAGE_ASPECT_PLANE_1_BIT</code> or <code>VK_IMAGE_ASPECT_PLANE_2_BIT</code>, the
view&#8217;s aspect mask is considered to be equivalent to
<code>VK_IMAGE_ASPECT_COLOR_BIT</code> when used as a framebuffer attachment.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Values intended to be used with one view format <strong>may</strong> not be exactly
preserved when written or read through a different format.
For example, an integer value that happens to have the bit pattern of a
floating-point denorm or NaN <strong>may</strong> be flushed or canonicalized when written
or read through a view with a floating-point format.
Similarly, a value written through a signed normalized format that has a bit
pattern exactly equal to <span class="eq">-2<sup>b</sup></span> <strong>may</strong> be changed to <span class="eq">-2<sup>b</sup> +  1</span>
as described in <a href="fundamentals.html#fundamentals-fixedfpconv" class="xref page">Conversion from Normalized Fixed-Point to Floating-Point</a>.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>If <code>image</code> was created with the
<code>VK_IMAGE_CREATE_BLOCK_TEXEL_VIEW_COMPATIBLE_BIT</code> flag, <code>format</code>
<strong>must</strong> be <em>compatible</em> with the image&#8217;s format as described above; or <strong>must</strong>
be an uncompressed format, in which case it <strong>must</strong> be
<a href="formats.html#formats-size-compatibility" class="xref page"><em>size-compatible</em></a> with the image&#8217;s format.
In this case, the resulting image view&#8217;s texel dimensions equal the
dimensions of the selected mip level divided by the compressed texel block
size and rounded up.</p>
</div>
<div class="paragraph">
<p>The <a href="#VkComponentMapping">VkComponentMapping</a> <code>components</code> member describes a remapping
from components of the image to components of the vector returned by shader
image instructions.
This remapping <strong>must</strong> be the identity swizzle for storage image descriptors,
input attachment descriptors,
framebuffer attachments, and any <code>VkImageView</code> used with a combined
image sampler that enables <a href="samplers.html#samplers-YCbCr-conversion" class="xref page">sampler YC<sub>B</sub>C<sub>R</sub> conversion</a>.</p>
</div>
<div class="paragraph">
<p>If the image view is to be used with a sampler which supports
<a href="samplers.html#samplers-YCbCr-conversion" class="xref page">sampler YC<sub>B</sub>C<sub>R</sub> conversion</a>, an <em>identically
defined object</em> of type <a href="samplers.html#VkSamplerYcbcrConversion" class="xref page">VkSamplerYcbcrConversion</a> to that used to
create the sampler <strong>must</strong> be passed to <a href="#vkCreateImageView">vkCreateImageView</a> in a
<a href="samplers.html#VkSamplerYcbcrConversionInfo" class="xref page">VkSamplerYcbcrConversionInfo</a> included in the <code>pNext</code> chain of
<a href="#VkImageViewCreateInfo">VkImageViewCreateInfo</a>.
Conversely, if a <a href="samplers.html#VkSamplerYcbcrConversion" class="xref page">VkSamplerYcbcrConversion</a> object is passed to
<a href="#vkCreateImageView">vkCreateImageView</a>, an identically defined
<a href="samplers.html#VkSamplerYcbcrConversion" class="xref page">VkSamplerYcbcrConversion</a> object <strong>must</strong> be used when sampling the image.</p>
</div>
<div id="image-views-requiring-sampler-ycbcr-conversion" class="paragraph">
<p>If the image has a
<a href="formats.html#formats-requiring-sampler-ycbcr-conversion" class="xref page">multi-planar</a> <code>format</code>,
<code>subresourceRange.aspectMask</code> is <code>VK_IMAGE_ASPECT_COLOR_BIT</code>, and
<code>usage</code> includes <code>VK_IMAGE_USAGE_SAMPLED_BIT</code>, then the <code>format</code>
<strong>must</strong> be identical to the image <code>format</code> and the sampler to be used with
the image view <strong>must</strong> enable <a href="samplers.html#samplers-YCbCr-conversion" class="xref page">sampler YC<sub>B</sub>C<sub>R</sub> conversion</a>.</p>
</div>
<div class="paragraph">
<p>If <code>image</code> was created with the <code>VK_IMAGE_CREATE_MUTABLE_FORMAT_BIT</code>
and the image has a
<a href="formats.html#formats-requiring-sampler-ycbcr-conversion" class="xref page">multi-planar</a> <code>format</code>,
and if <code>subresourceRange.aspectMask</code> is
<code>VK_IMAGE_ASPECT_PLANE_0_BIT</code>, <code>VK_IMAGE_ASPECT_PLANE_1_BIT</code>, or
<code>VK_IMAGE_ASPECT_PLANE_2_BIT</code>, <code>format</code> <strong>must</strong> be
<a href="formats.html#formats-compatible-planes" class="xref page">compatible</a> with the corresponding plane of the
image, and the sampler to be used with the image view <strong>must</strong> not enable
<a href="samplers.html#samplers-YCbCr-conversion" class="xref page">sampler YC<sub>B</sub>C<sub>R</sub> conversion</a>.
The <code>width</code> and <code>height</code> of the single-plane image view <strong>must</strong> be
derived from the multi-planar image&#8217;s dimensions in the manner listed for
<a href="formats.html#formats-compatible-planes" class="xref page">plane compatibility</a> for the plane.</p>
</div>
<div class="paragraph">
<p>Any view of an image plane will have the same mapping between texel
coordinates and memory locations as used by the components of the color
aspect, subject to the formulae relating texel coordinates to
lower-resolution planes as described in <a href="textures.html#textures-chroma-reconstruction" class="xref page">Chroma Reconstruction</a>.
That is, if an R or B plane has a reduced resolution relative to the G plane
of the multi-planar image, the image view operates using the (<em>u<sub>plane</sub></em>,
<em>v<sub>plane</sub></em>) unnormalized coordinates of the reduced-resolution plane, and
these coordinates access the same memory locations as the (<em>u<sub>color</sub></em>,
<em>v<sub>color</sub></em>) unnormalized coordinates of the color aspect for which chroma
reconstruction operations operate on the same (<em>u<sub>plane</sub></em>, <em>v<sub>plane</sub></em>) or
(<em>i<sub>plane</sub></em>, <em>j<sub>plane</sub></em>) coordinates.</p>
</div>
<table id="resources-image-views-compatibility" class="tableblock frame-all grid-all stretch">
<caption class="title">Table 1. Image Type and Image View Type Compatibility Requirements</caption>
<colgroup>
<col style="width: 41.1764%;">
<col style="width: 58.8236%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Image View Type</th>
<th class="tableblock halign-left valign-top">Compatible Image Types</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>VK_IMAGE_VIEW_TYPE_1D</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>VK_IMAGE_TYPE_1D</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>VK_IMAGE_VIEW_TYPE_1D_ARRAY</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>VK_IMAGE_TYPE_1D</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>VK_IMAGE_VIEW_TYPE_2D</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>VK_IMAGE_TYPE_2D</code>
, <code>VK_IMAGE_TYPE_3D</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>VK_IMAGE_VIEW_TYPE_2D_ARRAY</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>VK_IMAGE_TYPE_2D</code>
, <code>VK_IMAGE_TYPE_3D</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>VK_IMAGE_VIEW_TYPE_CUBE</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>VK_IMAGE_TYPE_2D</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>VK_IMAGE_VIEW_TYPE_CUBE_ARRAY</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>VK_IMAGE_TYPE_2D</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>VK_IMAGE_VIEW_TYPE_3D</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>VK_IMAGE_TYPE_3D</code></p></td>
</tr>
</tbody>
</table>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkImageViewCreateInfo-image-01003" href="#VUID-VkImageViewCreateInfo-image-01003"></a> <span class="vuid">VUID-VkImageViewCreateInfo-image-01003</span><br>

If <code>image</code> was not created with
<code>VK_IMAGE_CREATE_CUBE_COMPATIBLE_BIT</code> then <code>viewType</code> <strong>must</strong> not
be <code>VK_IMAGE_VIEW_TYPE_CUBE</code> or <code>VK_IMAGE_VIEW_TYPE_CUBE_ARRAY</code></p>
</li>
<li>
<p><a id="VUID-VkImageViewCreateInfo-viewType-01004" href="#VUID-VkImageViewCreateInfo-viewType-01004"></a> <span class="vuid">VUID-VkImageViewCreateInfo-viewType-01004</span><br>

If the <a href="features.html#features-imageCubeArray" class="xref page"><code>imageCubeArray</code></a> feature is not
enabled, <code>viewType</code> <strong>must</strong> not be <code>VK_IMAGE_VIEW_TYPE_CUBE_ARRAY</code></p>
</li>
<li>
<p><a id="VUID-VkImageViewCreateInfo-image-06723" href="#VUID-VkImageViewCreateInfo-image-06723"></a> <span class="vuid">VUID-VkImageViewCreateInfo-image-06723</span><br>

If <code>image</code> was created with <code>VK_IMAGE_TYPE_3D</code> but without
<code>VK_IMAGE_CREATE_2D_ARRAY_COMPATIBLE_BIT</code> set then <code>viewType</code>
<strong>must</strong> not be <code>VK_IMAGE_VIEW_TYPE_2D_ARRAY</code></p>
</li>
<li>
<p><a id="VUID-VkImageViewCreateInfo-image-06727" href="#VUID-VkImageViewCreateInfo-image-06727"></a> <span class="vuid">VUID-VkImageViewCreateInfo-image-06727</span><br>

If <code>image</code> was created with <code>VK_IMAGE_TYPE_3D</code> but without
<code>VK_IMAGE_CREATE_2D_ARRAY_COMPATIBLE_BIT</code> set then <code>viewType</code>
<strong>must</strong> not be <code>VK_IMAGE_VIEW_TYPE_2D</code></p>
</li>
<li>
<p><a id="VUID-VkImageViewCreateInfo-image-04970" href="#VUID-VkImageViewCreateInfo-image-04970"></a> <span class="vuid">VUID-VkImageViewCreateInfo-image-04970</span><br>

If <code>image</code> was created with <code>VK_IMAGE_TYPE_3D</code> and
<code>viewType</code> is <code>VK_IMAGE_VIEW_TYPE_2D</code> or
<code>VK_IMAGE_VIEW_TYPE_2D_ARRAY</code> then <code>subresourceRange.levelCount</code>
<strong>must</strong> be 1</p>
</li>
<li>
<p><a id="VUID-VkImageViewCreateInfo-image-04972" href="#VUID-VkImageViewCreateInfo-image-04972"></a> <span class="vuid">VUID-VkImageViewCreateInfo-image-04972</span><br>

If <code>image</code> was created with a <code>samples</code> value not equal to
<code>VK_SAMPLE_COUNT_1_BIT</code> then <code>viewType</code> <strong>must</strong> be either
<code>VK_IMAGE_VIEW_TYPE_2D</code> or <code>VK_IMAGE_VIEW_TYPE_2D_ARRAY</code></p>
</li>
<li>
<p><a id="VUID-VkImageViewCreateInfo-image-04441" href="#VUID-VkImageViewCreateInfo-image-04441"></a> <span class="vuid">VUID-VkImageViewCreateInfo-image-04441</span><br>

<code>image</code> <strong>must</strong> have been created with a <code>usage</code> value containing
at least one of the usages defined in the <a href="#valid-imageview-imageusage">    valid image usage</a> list for image views</p>
</li>
<li>
<p><a id="VUID-VkImageViewCreateInfo-None-02273" href="#VUID-VkImageViewCreateInfo-None-02273"></a> <span class="vuid">VUID-VkImageViewCreateInfo-None-02273</span><br>

The <a href="#resources-image-view-format-features">format features</a> of the
resultant image view <strong>must</strong> contain at least one bit</p>
</li>
<li>
<p><a id="VUID-VkImageViewCreateInfo-usage-02274" href="#VUID-VkImageViewCreateInfo-usage-02274"></a> <span class="vuid">VUID-VkImageViewCreateInfo-usage-02274</span><br>

If <code>usage</code> contains <code>VK_IMAGE_USAGE_SAMPLED_BIT</code>, then the
<a href="#resources-image-view-format-features">format features</a> of the
resultant image view <strong>must</strong> contain
<code>VK_FORMAT_FEATURE_SAMPLED_IMAGE_BIT</code></p>
</li>
<li>
<p><a id="VUID-VkImageViewCreateInfo-usage-02275" href="#VUID-VkImageViewCreateInfo-usage-02275"></a> <span class="vuid">VUID-VkImageViewCreateInfo-usage-02275</span><br>

If <code>usage</code> contains <code>VK_IMAGE_USAGE_STORAGE_BIT</code>, then the image
view&#8217;s <a href="#resources-image-view-format-features">format features</a> <strong>must</strong>
contain <code>VK_FORMAT_FEATURE_STORAGE_IMAGE_BIT</code></p>
</li>
<li>
<p><a id="VUID-VkImageViewCreateInfo-usage-02276" href="#VUID-VkImageViewCreateInfo-usage-02276"></a> <span class="vuid">VUID-VkImageViewCreateInfo-usage-02276</span><br>

If <code>usage</code> contains <code>VK_IMAGE_USAGE_COLOR_ATTACHMENT_BIT</code>, then
the image view&#8217;s <a href="#resources-image-view-format-features">format    features</a> <strong>must</strong> contain <code>VK_FORMAT_FEATURE_COLOR_ATTACHMENT_BIT</code></p>
</li>
<li>
<p><a id="VUID-VkImageViewCreateInfo-usage-02277" href="#VUID-VkImageViewCreateInfo-usage-02277"></a> <span class="vuid">VUID-VkImageViewCreateInfo-usage-02277</span><br>

If <code>usage</code> contains
<code>VK_IMAGE_USAGE_DEPTH_STENCIL_ATTACHMENT_BIT</code>, then the image view&#8217;s
<a href="#resources-image-view-format-features">format features</a> <strong>must</strong> contain
<code>VK_FORMAT_FEATURE_DEPTH_STENCIL_ATTACHMENT_BIT</code></p>
</li>
<li>
<p><a id="VUID-VkImageViewCreateInfo-usage-08932" href="#VUID-VkImageViewCreateInfo-usage-08932"></a> <span class="vuid">VUID-VkImageViewCreateInfo-usage-08932</span><br>

If <code>usage</code> contains <code>VK_IMAGE_USAGE_INPUT_ATTACHMENT_BIT</code>,</p>
<div class="paragraph">
<p>then the image view&#8217;s <a href="#resources-image-view-format-features">format features</a> <strong>must</strong> contain at least one of
<code>VK_FORMAT_FEATURE_COLOR_ATTACHMENT_BIT</code> or
<code>VK_FORMAT_FEATURE_DEPTH_STENCIL_ATTACHMENT_BIT</code></p>
</div>
</li>
<li>
<p><a id="VUID-VkImageViewCreateInfo-subresourceRange-01478" href="#VUID-VkImageViewCreateInfo-subresourceRange-01478"></a> <span class="vuid">VUID-VkImageViewCreateInfo-subresourceRange-01478</span><br>

<code>subresourceRange.baseMipLevel</code> <strong>must</strong> be less than the
<code>mipLevels</code> specified in <a href="#VkImageCreateInfo">VkImageCreateInfo</a> when <code>image</code>
was created</p>
</li>
<li>
<p><a id="VUID-VkImageViewCreateInfo-subresourceRange-01718" href="#VUID-VkImageViewCreateInfo-subresourceRange-01718"></a> <span class="vuid">VUID-VkImageViewCreateInfo-subresourceRange-01718</span><br>

If <code>subresourceRange.levelCount</code> is not
<code>VK_REMAINING_MIP_LEVELS</code>, <span class="eq"><code>subresourceRange.baseMipLevel</code>
+  <code>subresourceRange.levelCount</code></span> <strong>must</strong> be less than or equal to
the <code>mipLevels</code> specified in <a href="#VkImageCreateInfo">VkImageCreateInfo</a> when
<code>image</code> was created</p>
</li>
<li>
<p><a id="VUID-VkImageViewCreateInfo-image-01482" href="#VUID-VkImageViewCreateInfo-image-01482"></a> <span class="vuid">VUID-VkImageViewCreateInfo-image-01482</span><br>

If <code>image</code> is not a 3D image created with
<code>VK_IMAGE_CREATE_2D_ARRAY_COMPATIBLE_BIT</code> set, or <code>viewType</code> is
not <code>VK_IMAGE_VIEW_TYPE_2D</code> or <code>VK_IMAGE_VIEW_TYPE_2D_ARRAY</code>,
<code>subresourceRange.baseArrayLayer</code> <strong>must</strong> be less than the
<code>arrayLayers</code> specified in <a href="#VkImageCreateInfo">VkImageCreateInfo</a> when <code>image</code>
was created</p>
</li>
<li>
<p><a id="VUID-VkImageViewCreateInfo-subresourceRange-01483" href="#VUID-VkImageViewCreateInfo-subresourceRange-01483"></a> <span class="vuid">VUID-VkImageViewCreateInfo-subresourceRange-01483</span><br>

If <code>subresourceRange.layerCount</code> is not
<code>VK_REMAINING_ARRAY_LAYERS</code>, <code>image</code> is not a 3D image created
with <code>VK_IMAGE_CREATE_2D_ARRAY_COMPATIBLE_BIT</code> set, or
<code>viewType</code> is not <code>VK_IMAGE_VIEW_TYPE_2D</code> or
<code>VK_IMAGE_VIEW_TYPE_2D_ARRAY</code>, <code>subresourceRange.layerCount</code>
<strong>must</strong> be non-zero and <span class="eq"><code>subresourceRange.baseArrayLayer</code> + 
<code>subresourceRange.layerCount</code></span> <strong>must</strong> be less than or equal to the
<code>arrayLayers</code> specified in <a href="#VkImageCreateInfo">VkImageCreateInfo</a> when <code>image</code>
was created</p>
</li>
<li>
<p><a id="VUID-VkImageViewCreateInfo-image-02724" href="#VUID-VkImageViewCreateInfo-image-02724"></a> <span class="vuid">VUID-VkImageViewCreateInfo-image-02724</span><br>

If <code>image</code> is a 3D image created with
<code>VK_IMAGE_CREATE_2D_ARRAY_COMPATIBLE_BIT</code> set, and <code>viewType</code> is
<code>VK_IMAGE_VIEW_TYPE_2D</code> or <code>VK_IMAGE_VIEW_TYPE_2D_ARRAY</code>,
<code>subresourceRange.baseArrayLayer</code> <strong>must</strong> be less than the depth
computed from <code>baseMipLevel</code> and <code>extent.depth</code> specified in
<a href="#VkImageCreateInfo">VkImageCreateInfo</a> when <code>image</code> was created, according to the
formula defined in <a href="#resources-image-mip-level-sizing">Image Mip Level    Sizing</a></p>
</li>
<li>
<p><a id="VUID-VkImageViewCreateInfo-subresourceRange-02725" href="#VUID-VkImageViewCreateInfo-subresourceRange-02725"></a> <span class="vuid">VUID-VkImageViewCreateInfo-subresourceRange-02725</span><br>

If <code>subresourceRange.layerCount</code> is not
<code>VK_REMAINING_ARRAY_LAYERS</code>, <code>image</code> is a 3D image created with
<code>VK_IMAGE_CREATE_2D_ARRAY_COMPATIBLE_BIT</code> set, and <code>viewType</code> is
<code>VK_IMAGE_VIEW_TYPE_2D</code> or <code>VK_IMAGE_VIEW_TYPE_2D_ARRAY</code>,
<code>subresourceRange.layerCount</code> <strong>must</strong> be non-zero and
<span class="eq"><code>subresourceRange.baseArrayLayer</code> + 
<code>subresourceRange.layerCount</code></span> <strong>must</strong> be less than or equal to the
depth computed from <code>baseMipLevel</code> and <code>extent.depth</code> specified
in <a href="#VkImageCreateInfo">VkImageCreateInfo</a> when <code>image</code> was created, according to
the formula defined in <a href="#resources-image-mip-level-sizing">Image Mip    Level Sizing</a></p>
</li>
<li>
<p><a id="VUID-VkImageViewCreateInfo-image-01761" href="#VUID-VkImageViewCreateInfo-image-01761"></a> <span class="vuid">VUID-VkImageViewCreateInfo-image-01761</span><br>

If <code>image</code> was created with the
<code>VK_IMAGE_CREATE_MUTABLE_FORMAT_BIT</code> flag,
but without the <code>VK_IMAGE_CREATE_BLOCK_TEXEL_VIEW_COMPATIBLE_BIT</code>
flag,
and if the <code>format</code> of the <code>image</code> is not a
<a href="formats.html#formats-requiring-sampler-ycbcr-conversion" class="xref page">multi-planar</a> format,
<code>format</code> <strong>must</strong> be compatible with the <code>format</code> used to create
<code>image</code>, as defined in <a href="formats.html#formats-compatibility-classes" class="xref page">Format    Compatibility Classes</a></p>
</li>
<li>
<p><a id="VUID-VkImageViewCreateInfo-image-01583" href="#VUID-VkImageViewCreateInfo-image-01583"></a> <span class="vuid">VUID-VkImageViewCreateInfo-image-01583</span><br>

If <code>image</code> was created with the
<code>VK_IMAGE_CREATE_BLOCK_TEXEL_VIEW_COMPATIBLE_BIT</code> flag, <code>format</code>
<strong>must</strong> be compatible with, or <strong>must</strong> be an uncompressed format that is
size-compatible with, the <code>format</code> used to create <code>image</code></p>
</li>
<li>
<p><a id="VUID-VkImageViewCreateInfo-image-07072" href="#VUID-VkImageViewCreateInfo-image-07072"></a> <span class="vuid">VUID-VkImageViewCreateInfo-image-07072</span><br>

If <code>image</code> was created with the
<code>VK_IMAGE_CREATE_BLOCK_TEXEL_VIEW_COMPATIBLE_BIT</code> flag and
<code>format</code> is a non-compressed format, the <code>levelCount</code> member of
<code>subresourceRange</code> <strong>must</strong> be <code>1</code></p>
</li>
<li>
<p><a id="VUID-VkImageViewCreateInfo-image-09487" href="#VUID-VkImageViewCreateInfo-image-09487"></a> <span class="vuid">VUID-VkImageViewCreateInfo-image-09487</span><br>

If <code>image</code> was created with the
<code>VK_IMAGE_CREATE_BLOCK_TEXEL_VIEW_COMPATIBLE_BIT</code> flag,
and <code>format</code> is a non-compressed format, then the <code>layerCount</code>
member of <code>subresourceRange</code> <strong>must</strong> be <code>1</code></p>
</li>
<li>
<p><a id="VUID-VkImageViewCreateInfo-pNext-01585" href="#VUID-VkImageViewCreateInfo-pNext-01585"></a> <span class="vuid">VUID-VkImageViewCreateInfo-pNext-01585</span><br>

If a <a href="#VkImageFormatListCreateInfo">VkImageFormatListCreateInfo</a> structure was included in the
<code>pNext</code> chain of the <a href="#VkImageCreateInfo">VkImageCreateInfo</a> structure used when
creating <code>image</code> and
<a href="#VkImageFormatListCreateInfo">VkImageFormatListCreateInfo</a>::<code>viewFormatCount</code> is not zero
then <code>format</code> <strong>must</strong> be one of the formats in
<a href="#VkImageFormatListCreateInfo">VkImageFormatListCreateInfo</a>::<code>pViewFormats</code></p>
</li>
<li>
<p><a id="VUID-VkImageViewCreateInfo-image-01586" href="#VUID-VkImageViewCreateInfo-image-01586"></a> <span class="vuid">VUID-VkImageViewCreateInfo-image-01586</span><br>

If <code>image</code> was created with the
<code>VK_IMAGE_CREATE_MUTABLE_FORMAT_BIT</code> flag, if the <code>format</code> of
the <code>image</code> is a
<a href="formats.html#formats-requiring-sampler-ycbcr-conversion" class="xref page">multi-planar</a> format, and
if <code>subresourceRange.aspectMask</code> is one of the
<a href="formats.html#formats-planes-image-aspect" class="xref page">multi-planar aspect mask</a> bits, then
<code>format</code> <strong>must</strong> be compatible with the <a href="formats.html#VkFormat" class="xref page">VkFormat</a> for the plane
of the <code>image</code> <code>format</code> indicated by
<code>subresourceRange.aspectMask</code>, as defined in
<a href="formats.html#formats-compatible-planes" class="xref page">Compatible Formats of Planes of Multi-Planar Formats</a></p>
</li>
<li>
<p><a id="VUID-VkImageViewCreateInfo-subresourceRange-07818" href="#VUID-VkImageViewCreateInfo-subresourceRange-07818"></a> <span class="vuid">VUID-VkImageViewCreateInfo-subresourceRange-07818</span><br>

<code>subresourceRange.aspectMask</code> <strong>must</strong> only have at most 1 valid
<a href="formats.html#formats-planes-image-aspect" class="xref page">multi-planar aspect mask</a> bit</p>
</li>
<li>
<p><a id="VUID-VkImageViewCreateInfo-image-01762" href="#VUID-VkImageViewCreateInfo-image-01762"></a> <span class="vuid">VUID-VkImageViewCreateInfo-image-01762</span><br>

If <code>image</code> was not created with the
<code>VK_IMAGE_CREATE_MUTABLE_FORMAT_BIT</code> flag,
or if the <code>format</code> of the <code>image</code> is a
<a href="formats.html#formats-requiring-sampler-ycbcr-conversion" class="xref page">multi-planar</a> format and
if <code>subresourceRange.aspectMask</code> is <code>VK_IMAGE_ASPECT_COLOR_BIT</code>,
<code>format</code> <strong>must</strong> be identical to the <code>format</code> used to create
<code>image</code></p>
</li>
<li>
<p><a id="VUID-VkImageViewCreateInfo-format-06415" href="#VUID-VkImageViewCreateInfo-format-06415"></a> <span class="vuid">VUID-VkImageViewCreateInfo-format-06415</span><br>

If the image view <a href="#image-views-requiring-sampler-ycbcr-conversion">    requires a sampler YC<sub>B</sub>C<sub>R</sub> conversion</a> and <code>usage</code> contains
<code>VK_IMAGE_USAGE_SAMPLED_BIT</code>, then the <code>pNext</code> chain <strong>must</strong>
include a <a href="samplers.html#VkSamplerYcbcrConversionInfo" class="xref page">VkSamplerYcbcrConversionInfo</a> structure with a conversion
value other than <a href="../appendices/boilerplate.html#VK_NULL_HANDLE" class="xref page">VK_NULL_HANDLE</a></p>
</li>
<li>
<p><a id="VUID-VkImageViewCreateInfo-format-04714" href="#VUID-VkImageViewCreateInfo-format-04714"></a> <span class="vuid">VUID-VkImageViewCreateInfo-format-04714</span><br>

If <code>format</code> has a <code>_422</code> or <code>_420</code> suffix then <code>image</code>
<strong>must</strong> have been created with a width that is a multiple of 2</p>
</li>
<li>
<p><a id="VUID-VkImageViewCreateInfo-format-04715" href="#VUID-VkImageViewCreateInfo-format-04715"></a> <span class="vuid">VUID-VkImageViewCreateInfo-format-04715</span><br>

If <code>format</code> has a <code>_420</code> suffix then <code>image</code> <strong>must</strong> have been
created with a height that is a multiple of 2</p>
</li>
<li>
<p><a id="VUID-VkImageViewCreateInfo-pNext-01970" href="#VUID-VkImageViewCreateInfo-pNext-01970"></a> <span class="vuid">VUID-VkImageViewCreateInfo-pNext-01970</span><br>

If the <code>pNext</code> chain includes a <a href="samplers.html#VkSamplerYcbcrConversionInfo" class="xref page">VkSamplerYcbcrConversionInfo</a>
structure with a <code>conversion</code> value other than <a href="../appendices/boilerplate.html#VK_NULL_HANDLE" class="xref page">VK_NULL_HANDLE</a>,
all members of <code>components</code> <strong>must</strong> have the
<a href="#resources-image-views-identity-mappings">identity swizzle</a></p>
</li>
<li>
<p><a id="VUID-VkImageViewCreateInfo-pNext-06658" href="#VUID-VkImageViewCreateInfo-pNext-06658"></a> <span class="vuid">VUID-VkImageViewCreateInfo-pNext-06658</span><br>

If the <code>pNext</code> chain includes a <a href="samplers.html#VkSamplerYcbcrConversionInfo" class="xref page">VkSamplerYcbcrConversionInfo</a>
structure with a <code>conversion</code> value other than <a href="../appendices/boilerplate.html#VK_NULL_HANDLE" class="xref page">VK_NULL_HANDLE</a>,
<code>format</code> <strong>must</strong> be the same used in
<a href="samplers.html#VkSamplerYcbcrConversionCreateInfo" class="xref page">VkSamplerYcbcrConversionCreateInfo</a>::<code>format</code></p>
</li>
<li>
<p><a id="VUID-VkImageViewCreateInfo-image-01020" href="#VUID-VkImageViewCreateInfo-image-01020"></a> <span class="vuid">VUID-VkImageViewCreateInfo-image-01020</span><br>

If <code>image</code> is non-sparse then it <strong>must</strong> be bound completely and
contiguously to a single <code>VkDeviceMemory</code> object</p>
</li>
<li>
<p><a id="VUID-VkImageViewCreateInfo-subResourceRange-01021" href="#VUID-VkImageViewCreateInfo-subResourceRange-01021"></a> <span class="vuid">VUID-VkImageViewCreateInfo-subResourceRange-01021</span><br>

<code>viewType</code> <strong>must</strong> be compatible with the type of <code>image</code> as shown
in the <a href="#resources-image-views-compatibility">view type compatibility    table</a></p>
</li>
<li>
<p><a id="VUID-VkImageViewCreateInfo-pNext-02662" href="#VUID-VkImageViewCreateInfo-pNext-02662"></a> <span class="vuid">VUID-VkImageViewCreateInfo-pNext-02662</span><br>

If the <code>pNext</code> chain includes a <a href="#VkImageViewUsageCreateInfo">VkImageViewUsageCreateInfo</a>
structure, and <code>image</code> was not created with a
<a href="#VkImageStencilUsageCreateInfo">VkImageStencilUsageCreateInfo</a> structure included in the
<code>pNext</code> chain of <a href="#VkImageCreateInfo">VkImageCreateInfo</a>, its <code>usage</code> member
<strong>must</strong> not include any bits that were not set in the <code>usage</code> member
of the <a href="#VkImageCreateInfo">VkImageCreateInfo</a> structure used to create <code>image</code></p>
</li>
<li>
<p><a id="VUID-VkImageViewCreateInfo-pNext-02663" href="#VUID-VkImageViewCreateInfo-pNext-02663"></a> <span class="vuid">VUID-VkImageViewCreateInfo-pNext-02663</span><br>

If the <code>pNext</code> chain includes a <a href="#VkImageViewUsageCreateInfo">VkImageViewUsageCreateInfo</a>
structure, <code>image</code> was created with a
<a href="#VkImageStencilUsageCreateInfo">VkImageStencilUsageCreateInfo</a> structure included in the
<code>pNext</code> chain of <a href="#VkImageCreateInfo">VkImageCreateInfo</a>, and
<code>subresourceRange.aspectMask</code> includes
<code>VK_IMAGE_ASPECT_STENCIL_BIT</code>, the <code>usage</code> member of the
<a href="#VkImageViewUsageCreateInfo">VkImageViewUsageCreateInfo</a> structure <strong>must</strong> not include any bits
that were not set in the <code>usage</code> member of the
<a href="#VkImageStencilUsageCreateInfo">VkImageStencilUsageCreateInfo</a> structure used to create <code>image</code></p>
</li>
<li>
<p><a id="VUID-VkImageViewCreateInfo-pNext-02664" href="#VUID-VkImageViewCreateInfo-pNext-02664"></a> <span class="vuid">VUID-VkImageViewCreateInfo-pNext-02664</span><br>

If the <code>pNext</code> chain includes a <a href="#VkImageViewUsageCreateInfo">VkImageViewUsageCreateInfo</a>
structure, <code>image</code> was created with a
<a href="#VkImageStencilUsageCreateInfo">VkImageStencilUsageCreateInfo</a> structure included in the
<code>pNext</code> chain of <a href="#VkImageCreateInfo">VkImageCreateInfo</a>, and
<code>subresourceRange.aspectMask</code> includes bits other than
<code>VK_IMAGE_ASPECT_STENCIL_BIT</code>, the <code>usage</code> member of the
<a href="#VkImageViewUsageCreateInfo">VkImageViewUsageCreateInfo</a> structure <strong>must</strong> not include any bits
that were not set in the <code>usage</code> member of the
<a href="#VkImageCreateInfo">VkImageCreateInfo</a> structure used to create <code>image</code></p>
</li>
<li>
<p><a id="VUID-VkImageViewCreateInfo-imageViewType-04973" href="#VUID-VkImageViewCreateInfo-imageViewType-04973"></a> <span class="vuid">VUID-VkImageViewCreateInfo-imageViewType-04973</span><br>

If <code>viewType</code> is <code>VK_IMAGE_VIEW_TYPE_1D</code>,
<code>VK_IMAGE_VIEW_TYPE_2D</code>, or <code>VK_IMAGE_VIEW_TYPE_3D</code>; and
<code>subresourceRange.layerCount</code> is not
<code>VK_REMAINING_ARRAY_LAYERS</code>, then <code>subresourceRange.layerCount</code>
<strong>must</strong> be 1</p>
</li>
<li>
<p><a id="VUID-VkImageViewCreateInfo-imageViewType-04974" href="#VUID-VkImageViewCreateInfo-imageViewType-04974"></a> <span class="vuid">VUID-VkImageViewCreateInfo-imageViewType-04974</span><br>

If <code>viewType</code> is <code>VK_IMAGE_VIEW_TYPE_1D</code>,
<code>VK_IMAGE_VIEW_TYPE_2D</code>, or <code>VK_IMAGE_VIEW_TYPE_3D</code>; and
<code>subresourceRange.layerCount</code> is <code>VK_REMAINING_ARRAY_LAYERS</code>,
then the remaining number of layers <strong>must</strong> be 1</p>
</li>
<li>
<p><a id="VUID-VkImageViewCreateInfo-viewType-02960" href="#VUID-VkImageViewCreateInfo-viewType-02960"></a> <span class="vuid">VUID-VkImageViewCreateInfo-viewType-02960</span><br>

If <code>viewType</code> is <code>VK_IMAGE_VIEW_TYPE_CUBE</code> and
<code>subresourceRange.layerCount</code> is not
<code>VK_REMAINING_ARRAY_LAYERS</code>, <code>subresourceRange.layerCount</code> <strong>must</strong>
be <code>6</code></p>
</li>
<li>
<p><a id="VUID-VkImageViewCreateInfo-viewType-02961" href="#VUID-VkImageViewCreateInfo-viewType-02961"></a> <span class="vuid">VUID-VkImageViewCreateInfo-viewType-02961</span><br>

If <code>viewType</code> is <code>VK_IMAGE_VIEW_TYPE_CUBE_ARRAY</code> and
<code>subresourceRange.layerCount</code> is not
<code>VK_REMAINING_ARRAY_LAYERS</code>, <code>subresourceRange.layerCount</code> <strong>must</strong>
be a multiple of <code>6</code></p>
</li>
<li>
<p><a id="VUID-VkImageViewCreateInfo-viewType-02962" href="#VUID-VkImageViewCreateInfo-viewType-02962"></a> <span class="vuid">VUID-VkImageViewCreateInfo-viewType-02962</span><br>

If <code>viewType</code> is <code>VK_IMAGE_VIEW_TYPE_CUBE</code> and
<code>subresourceRange.layerCount</code> is <code>VK_REMAINING_ARRAY_LAYERS</code>,
the remaining number of layers <strong>must</strong> be <code>6</code></p>
</li>
<li>
<p><a id="VUID-VkImageViewCreateInfo-viewType-02963" href="#VUID-VkImageViewCreateInfo-viewType-02963"></a> <span class="vuid">VUID-VkImageViewCreateInfo-viewType-02963</span><br>

If <code>viewType</code> is <code>VK_IMAGE_VIEW_TYPE_CUBE_ARRAY</code> and
<code>subresourceRange.layerCount</code> is <code>VK_REMAINING_ARRAY_LAYERS</code>,
the remaining number of layers <strong>must</strong> be a multiple of <code>6</code></p>
</li>
<li>
<p><a id="VUID-VkImageViewCreateInfo-subresourceRange-09594" href="#VUID-VkImageViewCreateInfo-subresourceRange-09594"></a> <span class="vuid">VUID-VkImageViewCreateInfo-subresourceRange-09594</span><br>

<code>subresourceRange.aspectMask</code> <strong>must</strong> be valid for the <code>format</code>
the <code>image</code> was created with</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkImageViewCreateInfo-sType-sType" href="#VUID-VkImageViewCreateInfo-sType-sType"></a> <span class="vuid">VUID-VkImageViewCreateInfo-sType-sType</span><br>
 <code>sType</code> <strong>must</strong> be <code>VK_STRUCTURE_TYPE_IMAGE_VIEW_CREATE_INFO</code></p>
</li>
<li>
<p><a id="VUID-VkImageViewCreateInfo-pNext-pNext" href="#VUID-VkImageViewCreateInfo-pNext-pNext"></a> <span class="vuid">VUID-VkImageViewCreateInfo-pNext-pNext</span><br>
 Each <code>pNext</code> member of any structure (including this one) in the <code>pNext</code> chain <strong>must</strong> be either <code>NULL</code> or a pointer to a valid instance of <a href="#VkImageViewUsageCreateInfo">VkImageViewUsageCreateInfo</a> or <a href="samplers.html#VkSamplerYcbcrConversionInfo" class="xref page">VkSamplerYcbcrConversionInfo</a></p>
</li>
<li>
<p><a id="VUID-VkImageViewCreateInfo-sType-unique" href="#VUID-VkImageViewCreateInfo-sType-unique"></a> <span class="vuid">VUID-VkImageViewCreateInfo-sType-unique</span><br>
 The <code>sType</code> value of each struct in the <code>pNext</code> chain <strong>must</strong> be unique</p>
</li>
<li>
<p><a id="VUID-VkImageViewCreateInfo-flags-zerobitmask" href="#VUID-VkImageViewCreateInfo-flags-zerobitmask"></a> <span class="vuid">VUID-VkImageViewCreateInfo-flags-zerobitmask</span><br>
 <code>flags</code> <strong>must</strong> be <code>0</code></p>
</li>
<li>
<p><a id="VUID-VkImageViewCreateInfo-image-parameter" href="#VUID-VkImageViewCreateInfo-image-parameter"></a> <span class="vuid">VUID-VkImageViewCreateInfo-image-parameter</span><br>
 <code>image</code> <strong>must</strong> be a valid <a href="#VkImage">VkImage</a> handle</p>
</li>
<li>
<p><a id="VUID-VkImageViewCreateInfo-viewType-parameter" href="#VUID-VkImageViewCreateInfo-viewType-parameter"></a> <span class="vuid">VUID-VkImageViewCreateInfo-viewType-parameter</span><br>
 <code>viewType</code> <strong>must</strong> be a valid <a href="#VkImageViewType">VkImageViewType</a> value</p>
</li>
<li>
<p><a id="VUID-VkImageViewCreateInfo-format-parameter" href="#VUID-VkImageViewCreateInfo-format-parameter"></a> <span class="vuid">VUID-VkImageViewCreateInfo-format-parameter</span><br>
 <code>format</code> <strong>must</strong> be a valid <a href="formats.html#VkFormat" class="xref page">VkFormat</a> value</p>
</li>
<li>
<p><a id="VUID-VkImageViewCreateInfo-components-parameter" href="#VUID-VkImageViewCreateInfo-components-parameter"></a> <span class="vuid">VUID-VkImageViewCreateInfo-components-parameter</span><br>
 <code>components</code> <strong>must</strong> be a valid <a href="#VkComponentMapping">VkComponentMapping</a> structure</p>
</li>
<li>
<p><a id="VUID-VkImageViewCreateInfo-subresourceRange-parameter" href="#VUID-VkImageViewCreateInfo-subresourceRange-parameter"></a> <span class="vuid">VUID-VkImageViewCreateInfo-subresourceRange-parameter</span><br>
 <code>subresourceRange</code> <strong>must</strong> be a valid <a href="#VkImageSubresourceRange">VkImageSubresourceRange</a> structure</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Bits which <strong>can</strong> be set in <a href="#VkImageViewCreateInfo">VkImageViewCreateInfo</a>::<code>flags</code>,
specifying additional parameters of an image view, are:</p>
</div>
<div id="VkImageViewCreateFlagBits" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_VERSION_1_0
typedef enum VkImageViewCreateFlagBits {
} VkImageViewCreateFlagBits;</code></pre>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div id="VkImageViewCreateFlags" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_VERSION_1_0
typedef VkFlags VkImageViewCreateFlags;</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>VkImageViewCreateFlags</code> is a bitmask type for setting a mask of zero or
more <a href="#VkImageViewCreateFlagBits">VkImageViewCreateFlagBits</a>.</p>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The set of usages for the created image view <strong>can</strong> be restricted compared to
the parent image&#8217;s <code>usage</code> flags by adding a
<code>VkImageViewUsageCreateInfo</code> structure to the <code>pNext</code> chain of
<a href="#VkImageViewCreateInfo">VkImageViewCreateInfo</a>.</p>
</div>
<div class="paragraph">
<p>The <code>VkImageViewUsageCreateInfo</code> structure is defined as:</p>
</div>
<div id="VkImageViewUsageCreateInfo" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_VERSION_1_1
typedef struct VkImageViewUsageCreateInfo {
    VkStructureType      sType;
    const void*          pNext;
    VkImageUsageFlags    usage;
} VkImageViewUsageCreateInfo;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is a <a href="fundamentals.html#VkStructureType" class="xref page">VkStructureType</a> value identifying this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>usage</code> is a bitmask of <a href="#VkImageUsageFlagBits">VkImageUsageFlagBits</a> specifying
allowed usages of the image view.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>When this structure is chained to <a href="#VkImageViewCreateInfo">VkImageViewCreateInfo</a> the
<code>usage</code> field overrides the implicit <code>usage</code> parameter inherited
from image creation time and its value is used instead for the purposes of
determining the valid usage conditions of <a href="#VkImageViewCreateInfo">VkImageViewCreateInfo</a>.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkImageViewUsageCreateInfo-sType-sType" href="#VUID-VkImageViewUsageCreateInfo-sType-sType"></a> <span class="vuid">VUID-VkImageViewUsageCreateInfo-sType-sType</span><br>
 <code>sType</code> <strong>must</strong> be <code>VK_STRUCTURE_TYPE_IMAGE_VIEW_USAGE_CREATE_INFO</code></p>
</li>
<li>
<p><a id="VUID-VkImageViewUsageCreateInfo-usage-parameter" href="#VUID-VkImageViewUsageCreateInfo-usage-parameter"></a> <span class="vuid">VUID-VkImageViewUsageCreateInfo-usage-parameter</span><br>
 <code>usage</code> <strong>must</strong> be a valid combination of <a href="#VkImageUsageFlagBits">VkImageUsageFlagBits</a> values</p>
</li>
<li>
<p><a id="VUID-VkImageViewUsageCreateInfo-usage-requiredbitmask" href="#VUID-VkImageViewUsageCreateInfo-usage-requiredbitmask"></a> <span class="vuid">VUID-VkImageViewUsageCreateInfo-usage-requiredbitmask</span><br>
 <code>usage</code> <strong>must</strong> not be <code>0</code></p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>VkImageSubresourceRange</code> structure is defined as:</p>
</div>
<div id="VkImageSubresourceRange" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_VERSION_1_0
typedef struct VkImageSubresourceRange {
    VkImageAspectFlags    aspectMask;
    uint32_t              baseMipLevel;
    uint32_t              levelCount;
    uint32_t              baseArrayLayer;
    uint32_t              layerCount;
} VkImageSubresourceRange;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>aspectMask</code> is a bitmask of <a href="#VkImageAspectFlagBits">VkImageAspectFlagBits</a> specifying
which aspect(s) of the image are included in the view.</p>
</li>
<li>
<p><code>baseMipLevel</code> is the first mipmap level accessible to the view.</p>
</li>
<li>
<p><code>levelCount</code> is the number of mipmap levels (starting from
<code>baseMipLevel</code>) accessible to the view.</p>
</li>
<li>
<p><code>baseArrayLayer</code> is the first array layer accessible to the view.</p>
</li>
<li>
<p><code>layerCount</code> is the number of array layers (starting from
<code>baseArrayLayer</code>) accessible to the view.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The number of mipmap levels and array layers <strong>must</strong> be a subset of the image
subresources in the image.
If an application wants to use all mip levels or layers in an image after
the <code>baseMipLevel</code> or <code>baseArrayLayer</code>, it <strong>can</strong> set <code>levelCount</code>
and <code>layerCount</code> to the special values <code>VK_REMAINING_MIP_LEVELS</code> and
<code>VK_REMAINING_ARRAY_LAYERS</code> without knowing the exact number of mip
levels or layers.</p>
</div>
<div class="paragraph">
<p>For cube and cube array image views, the layers of the image view starting
at <code>baseArrayLayer</code> correspond to faces in the order +X, -X, +Y, -Y, +Z,
-Z.
For cube arrays, each set of six sequential layers is a single cube, so the
number of cube maps in a cube map array view is <em><code>layerCount</code> / 6</em>, and
image array layer <span class="eq">(<code>baseArrayLayer</code> +  i)</span> is face index
<span class="eq">(i mod 6)</span> of cube <em>i / 6</em>.
If the number of layers in the view, whether set explicitly in
<code>layerCount</code> or implied by <code>VK_REMAINING_ARRAY_LAYERS</code>, is not a
multiple of 6, the last cube map in the array <strong>must</strong> not be accessed.</p>
</div>
<div class="paragraph">
<p><code>aspectMask</code> <strong>must</strong> be only <code>VK_IMAGE_ASPECT_COLOR_BIT</code>,
<code>VK_IMAGE_ASPECT_DEPTH_BIT</code> or <code>VK_IMAGE_ASPECT_STENCIL_BIT</code> if
<code>format</code> is a color, depth-only or stencil-only format,
respectively, except if <code>format</code> is a
<a href="formats.html#formats-requiring-sampler-ycbcr-conversion" class="xref page">multi-planar format</a>.
If using a depth/stencil format with both depth and stencil components,
<code>aspectMask</code> <strong>must</strong> include at least one of
<code>VK_IMAGE_ASPECT_DEPTH_BIT</code> and <code>VK_IMAGE_ASPECT_STENCIL_BIT</code>, and
<strong>can</strong> include both.</p>
</div>
<div class="paragraph">
<p>When the <code>VkImageSubresourceRange</code> structure is used to select a subset
of the slices of a 3D image&#8217;s mip level in order to create a 2D or 2D array
image view of a 3D image created with
<code>VK_IMAGE_CREATE_2D_ARRAY_COMPATIBLE_BIT</code>, <code>baseArrayLayer</code> and
<code>layerCount</code> specify the first slice index and the number of slices to
include in the created image view.
Such an image view <strong>can</strong> be used as a framebuffer attachment that refers only
to the specified range of slices of the selected mip level.
However, any layout transitions performed on such an attachment view during
a render pass instance still apply to the entire subresource referenced
which includes all the slices of the selected mip level.</p>
</div>
<div class="paragraph">
<p>When using an image view of a depth/stencil image to populate a descriptor
set (e.g. for sampling in the shader, or for use as an input attachment),
the <code>aspectMask</code> <strong>must</strong> only include one bit, which selects whether the
image view is used for depth reads (i.e. using a floating-point sampler or
input attachment in the shader) or stencil reads (i.e. using an unsigned
integer sampler or input attachment in the shader).
When an image view of a depth/stencil image is used as a depth/stencil
framebuffer attachment, the <code>aspectMask</code> is ignored and both depth and
stencil image subresources are used.</p>
</div>
<div class="paragraph">
<p>When creating a <code>VkImageView</code>, if <a href="samplers.html#samplers-YCbCr-conversion" class="xref page">sampler YC<sub>B</sub>C<sub>R</sub> conversion</a> is enabled in the sampler, the <code>aspectMask</code> of a
<code>subresourceRange</code> used by the <code>VkImageView</code> <strong>must</strong> be
<code>VK_IMAGE_ASPECT_COLOR_BIT</code>.</p>
</div>
<div class="paragraph">
<p>When creating a <code>VkImageView</code>, if sampler YC<sub>B</sub>C<sub>R</sub> conversion is not
enabled in the sampler and the image <code>format</code> is
<a href="formats.html#formats-requiring-sampler-ycbcr-conversion" class="xref page">multi-planar</a>, the image <strong>must</strong>
have been created with <code>VK_IMAGE_CREATE_MUTABLE_FORMAT_BIT</code>, and the
<code>aspectMask</code> of the <code>VkImageView</code>&#8217;s <code>subresourceRange</code> <strong>must</strong> be
<code>VK_IMAGE_ASPECT_PLANE_0_BIT</code>, <code>VK_IMAGE_ASPECT_PLANE_1_BIT</code> or
<code>VK_IMAGE_ASPECT_PLANE_2_BIT</code>.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkImageSubresourceRange-levelCount-01720" href="#VUID-VkImageSubresourceRange-levelCount-01720"></a> <span class="vuid">VUID-VkImageSubresourceRange-levelCount-01720</span><br>

If <code>levelCount</code> is not <code>VK_REMAINING_MIP_LEVELS</code>, it <strong>must</strong> be
greater than <code>0</code></p>
</li>
<li>
<p><a id="VUID-VkImageSubresourceRange-layerCount-01721" href="#VUID-VkImageSubresourceRange-layerCount-01721"></a> <span class="vuid">VUID-VkImageSubresourceRange-layerCount-01721</span><br>

If <code>layerCount</code> is not <code>VK_REMAINING_ARRAY_LAYERS</code>, it <strong>must</strong> be
greater than <code>0</code></p>
</li>
<li>
<p><a id="VUID-VkImageSubresourceRange-aspectMask-01670" href="#VUID-VkImageSubresourceRange-aspectMask-01670"></a> <span class="vuid">VUID-VkImageSubresourceRange-aspectMask-01670</span><br>

If <code>aspectMask</code> includes <code>VK_IMAGE_ASPECT_COLOR_BIT</code>, then it
<strong>must</strong> not include any of <code>VK_IMAGE_ASPECT_PLANE_0_BIT</code>,
<code>VK_IMAGE_ASPECT_PLANE_1_BIT</code>, or <code>VK_IMAGE_ASPECT_PLANE_2_BIT</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkImageSubresourceRange-aspectMask-parameter" href="#VUID-VkImageSubresourceRange-aspectMask-parameter"></a> <span class="vuid">VUID-VkImageSubresourceRange-aspectMask-parameter</span><br>
 <code>aspectMask</code> <strong>must</strong> be a valid combination of <a href="#VkImageAspectFlagBits">VkImageAspectFlagBits</a> values</p>
</li>
<li>
<p><a id="VUID-VkImageSubresourceRange-aspectMask-requiredbitmask" href="#VUID-VkImageSubresourceRange-aspectMask-requiredbitmask"></a> <span class="vuid">VUID-VkImageSubresourceRange-aspectMask-requiredbitmask</span><br>
 <code>aspectMask</code> <strong>must</strong> not be <code>0</code></p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Bits which <strong>can</strong> be set in an aspect mask to specify aspects of an image for
purposes such as identifying a subresource, are:</p>
</div>
<div id="VkImageAspectFlagBits" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_VERSION_1_0
typedef enum VkImageAspectFlagBits {
    VK_IMAGE_ASPECT_COLOR_BIT = 0x00000001,
    VK_IMAGE_ASPECT_DEPTH_BIT = 0x00000002,
    VK_IMAGE_ASPECT_STENCIL_BIT = 0x00000004,
    VK_IMAGE_ASPECT_METADATA_BIT = 0x00000008,
  // Provided by VK_VERSION_1_1
    VK_IMAGE_ASPECT_PLANE_0_BIT = 0x00000010,
  // Provided by VK_VERSION_1_1
    VK_IMAGE_ASPECT_PLANE_1_BIT = 0x00000020,
  // Provided by VK_VERSION_1_1
    VK_IMAGE_ASPECT_PLANE_2_BIT = 0x00000040,
  // Provided by VK_VERSION_1_3
    VK_IMAGE_ASPECT_NONE = 0,
} VkImageAspectFlagBits;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>VK_IMAGE_ASPECT_NONE</code> specifies no image aspect, or the image
aspect is not applicable.</p>
</li>
<li>
<p><code>VK_IMAGE_ASPECT_COLOR_BIT</code> specifies the color aspect.</p>
</li>
<li>
<p><code>VK_IMAGE_ASPECT_DEPTH_BIT</code> specifies the depth aspect.</p>
</li>
<li>
<p><code>VK_IMAGE_ASPECT_STENCIL_BIT</code> specifies the stencil aspect.</p>
</li>
<li>
<p><code>VK_IMAGE_ASPECT_METADATA_BIT</code> specifies the metadata aspect used
for <a href="sparsemem.html#sparsememory" class="xref page">sparse resource</a> operations.</p>
</li>
<li>
<p><code>VK_IMAGE_ASPECT_PLANE_0_BIT</code> specifies plane 0 of a <em>multi-planar</em>
image format.</p>
</li>
<li>
<p><code>VK_IMAGE_ASPECT_PLANE_1_BIT</code> specifies plane 1 of a <em>multi-planar</em>
image format.</p>
</li>
<li>
<p><code>VK_IMAGE_ASPECT_PLANE_2_BIT</code> specifies plane 2 of a <em>multi-planar</em>
image format.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div id="VkImageAspectFlags" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_VERSION_1_0
typedef VkFlags VkImageAspectFlags;</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>VkImageAspectFlags</code> is a bitmask type for setting a mask of zero or
more <a href="#VkImageAspectFlagBits">VkImageAspectFlagBits</a>.</p>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>VkComponentMapping</code> structure is defined as:</p>
</div>
<div id="VkComponentMapping" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_VERSION_1_0
typedef struct VkComponentMapping {
    VkComponentSwizzle    r;
    VkComponentSwizzle    g;
    VkComponentSwizzle    b;
    VkComponentSwizzle    a;
} VkComponentMapping;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>r</code> is a <a href="#VkComponentSwizzle">VkComponentSwizzle</a> specifying the component value
placed in the R component of the output vector.</p>
</li>
<li>
<p><code>g</code> is a <a href="#VkComponentSwizzle">VkComponentSwizzle</a> specifying the component value
placed in the G component of the output vector.</p>
</li>
<li>
<p><code>b</code> is a <a href="#VkComponentSwizzle">VkComponentSwizzle</a> specifying the component value
placed in the B component of the output vector.</p>
</li>
<li>
<p><code>a</code> is a <a href="#VkComponentSwizzle">VkComponentSwizzle</a> specifying the component value
placed in the A component of the output vector.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkComponentMapping-r-parameter" href="#VUID-VkComponentMapping-r-parameter"></a> <span class="vuid">VUID-VkComponentMapping-r-parameter</span><br>
 <code>r</code> <strong>must</strong> be a valid <a href="#VkComponentSwizzle">VkComponentSwizzle</a> value</p>
</li>
<li>
<p><a id="VUID-VkComponentMapping-g-parameter" href="#VUID-VkComponentMapping-g-parameter"></a> <span class="vuid">VUID-VkComponentMapping-g-parameter</span><br>
 <code>g</code> <strong>must</strong> be a valid <a href="#VkComponentSwizzle">VkComponentSwizzle</a> value</p>
</li>
<li>
<p><a id="VUID-VkComponentMapping-b-parameter" href="#VUID-VkComponentMapping-b-parameter"></a> <span class="vuid">VUID-VkComponentMapping-b-parameter</span><br>
 <code>b</code> <strong>must</strong> be a valid <a href="#VkComponentSwizzle">VkComponentSwizzle</a> value</p>
</li>
<li>
<p><a id="VUID-VkComponentMapping-a-parameter" href="#VUID-VkComponentMapping-a-parameter"></a> <span class="vuid">VUID-VkComponentMapping-a-parameter</span><br>
 <code>a</code> <strong>must</strong> be a valid <a href="#VkComponentSwizzle">VkComponentSwizzle</a> value</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Possible values of the members of <a href="#VkComponentMapping">VkComponentMapping</a>, specifying the
component values placed in each component of the output vector, are:</p>
</div>
<div id="VkComponentSwizzle" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_VERSION_1_0
typedef enum VkComponentSwizzle {
    VK_COMPONENT_SWIZZLE_IDENTITY = 0,
    VK_COMPONENT_SWIZZLE_ZERO = 1,
    VK_COMPONENT_SWIZZLE_ONE = 2,
    VK_COMPONENT_SWIZZLE_R = 3,
    VK_COMPONENT_SWIZZLE_G = 4,
    VK_COMPONENT_SWIZZLE_B = 5,
    VK_COMPONENT_SWIZZLE_A = 6,
} VkComponentSwizzle;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>VK_COMPONENT_SWIZZLE_IDENTITY</code> specifies that the component is set
to the identity swizzle.</p>
</li>
<li>
<p><code>VK_COMPONENT_SWIZZLE_ZERO</code> specifies that the component is set to
zero.</p>
</li>
<li>
<p><code>VK_COMPONENT_SWIZZLE_ONE</code> specifies that the component is set to
either 1 or 1.0, depending on whether the type of the image view format
is integer or floating-point respectively, as determined by the
<a href="formats.html#formats-definition" class="xref page">Format Definition</a> section for each
<a href="formats.html#VkFormat" class="xref page">VkFormat</a>.</p>
</li>
<li>
<p><code>VK_COMPONENT_SWIZZLE_R</code> specifies that the component is set to the
value of the R component of the image.</p>
</li>
<li>
<p><code>VK_COMPONENT_SWIZZLE_G</code> specifies that the component is set to the
value of the G component of the image.</p>
</li>
<li>
<p><code>VK_COMPONENT_SWIZZLE_B</code> specifies that the component is set to the
value of the B component of the image.</p>
</li>
<li>
<p><code>VK_COMPONENT_SWIZZLE_A</code> specifies that the component is set to the
value of the A component of the image.</p>
</li>
</ul>
</div>
<div id="resources-image-views-identity-mappings" class="paragraph">
<p>Setting the identity swizzle on a component is equivalent to setting the
identity mapping on that component.
That is:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 2. Component Mappings Equivalent To <code>VK_COMPONENT_SWIZZLE_IDENTITY</code></caption>
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Component</th>
<th class="tableblock halign-left valign-top">Identity Mapping</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>components.r</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>VK_COMPONENT_SWIZZLE_R</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>components.g</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>VK_COMPONENT_SWIZZLE_G</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>components.b</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>VK_COMPONENT_SWIZZLE_B</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>components.a</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>VK_COMPONENT_SWIZZLE_A</code></p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>To destroy an image view, call:</p>
</div>
<div id="vkDestroyImageView" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_VERSION_1_0
void vkDestroyImageView(
    VkDevice                                    device,
    VkImageView                                 imageView,
    const VkAllocationCallbacks*                pAllocator);</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>device</code> is the logical device that destroys the image view.</p>
</li>
<li>
<p><code>imageView</code> is the image view to destroy.</p>
</li>
<li>
<p><code>pAllocator</code> controls host memory allocation as described in the
<a href="memory.html#memory-allocation" class="xref page">Memory Allocation</a> chapter.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkDestroyImageView-imageView-01026" href="#VUID-vkDestroyImageView-imageView-01026"></a> <span class="vuid">VUID-vkDestroyImageView-imageView-01026</span><br>

All submitted commands that refer to <code>imageView</code> <strong>must</strong> have
completed execution</p>
</li>
<li>
<p><a id="VUID-vkDestroyImageView-imageView-01027" href="#VUID-vkDestroyImageView-imageView-01027"></a> <span class="vuid">VUID-vkDestroyImageView-imageView-01027</span><br>

If <code>VkAllocationCallbacks</code> were provided when <code>imageView</code> was
created, a compatible set of callbacks <strong>must</strong> be provided here</p>
</li>
<li>
<p><a id="VUID-vkDestroyImageView-imageView-01028" href="#VUID-vkDestroyImageView-imageView-01028"></a> <span class="vuid">VUID-vkDestroyImageView-imageView-01028</span><br>

If no <code>VkAllocationCallbacks</code> were provided when <code>imageView</code> was
created, <code>pAllocator</code> <strong>must</strong> be <code>NULL</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkDestroyImageView-device-parameter" href="#VUID-vkDestroyImageView-device-parameter"></a> <span class="vuid">VUID-vkDestroyImageView-device-parameter</span><br>
 <code>device</code> <strong>must</strong> be a valid <a href="devsandqueues.html#VkDevice" class="xref page">VkDevice</a> handle</p>
</li>
<li>
<p><a id="VUID-vkDestroyImageView-imageView-parameter" href="#VUID-vkDestroyImageView-imageView-parameter"></a> <span class="vuid">VUID-vkDestroyImageView-imageView-parameter</span><br>
 If <code>imageView</code> is not <a href="../appendices/boilerplate.html#VK_NULL_HANDLE" class="xref page">VK_NULL_HANDLE</a>, <code>imageView</code> <strong>must</strong> be a valid <a href="#VkImageView">VkImageView</a> handle</p>
</li>
<li>
<p><a id="VUID-vkDestroyImageView-pAllocator-parameter" href="#VUID-vkDestroyImageView-pAllocator-parameter"></a> <span class="vuid">VUID-vkDestroyImageView-pAllocator-parameter</span><br>
 If <code>pAllocator</code> is not <code>NULL</code>, <code>pAllocator</code> <strong>must</strong> be a valid pointer to a valid <a href="memory.html#VkAllocationCallbacks" class="xref page">VkAllocationCallbacks</a> structure</p>
</li>
<li>
<p><a id="VUID-vkDestroyImageView-imageView-parent" href="#VUID-vkDestroyImageView-imageView-parent"></a> <span class="vuid">VUID-vkDestroyImageView-imageView-parent</span><br>
 If <code>imageView</code> is a valid handle, it <strong>must</strong> have been created, allocated, or retrieved from <code>device</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Host Synchronization</div>
<div class="ulist">
<ul>
<li>
<p>Host access to <code>imageView</code> <strong>must</strong> be externally synchronized</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="resources-image-view-format-features"><a class="anchor" href="#resources-image-view-format-features"></a>Image View Format Features</h3>
<div class="paragraph">
<p>Valid uses of a <a href="#VkImageView">VkImageView</a> <strong>may</strong> depend on the image view&#8217;s <em>format
features</em>, defined below.
Such constraints are documented in the affected valid usage statement.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>If Vulkan 1.3 is supported or the <code><code>VK_KHR_format_feature_flags2</code></code>
extension is supported, and <a href="#VkImageViewCreateInfo">VkImageViewCreateInfo</a>::<code>image</code> was
created with <code>VK_IMAGE_TILING_LINEAR</code>, then the image view&#8217;s set of
<em>format features</em> is the value of
<a href="formats.html#VkFormatProperties3" class="xref page">VkFormatProperties3</a>::<code>linearTilingFeatures</code> found by calling
<a href="formats.html#vkGetPhysicalDeviceFormatProperties2" class="xref page">vkGetPhysicalDeviceFormatProperties2</a> on the same <code>format</code> as
<a href="#VkImageViewCreateInfo">VkImageViewCreateInfo</a>::<code>format</code>.</p>
</li>
<li>
<p>If Vulkan 1.3 is not supported and the
<code><code>VK_KHR_format_feature_flags2</code></code> extension is not supported, and
<a href="#VkImageViewCreateInfo">VkImageViewCreateInfo</a>::<code>image</code> was created with
<code>VK_IMAGE_TILING_LINEAR</code>, then the image view&#8217;s set of <em>format
features</em> is the union of the value of
<a href="formats.html#VkFormatProperties" class="xref page">VkFormatProperties</a>::<code>linearTilingFeatures</code> found by calling
<a href="formats.html#vkGetPhysicalDeviceFormatProperties" class="xref page">vkGetPhysicalDeviceFormatProperties</a> on the same <code>format</code> as
<a href="#VkImageViewCreateInfo">VkImageViewCreateInfo</a>::<code>format</code>, with:</p>
<div class="ulist">
<ul>
<li>
<p><code>VK_FORMAT_FEATURE_2_SAMPLED_IMAGE_DEPTH_COMPARISON_BIT</code> if the
format is a depth/stencil format and the image view features also
contain <code>VK_FORMAT_FEATURE_2_SAMPLED_IMAGE_BIT</code>.</p>
</li>
<li>
<p><code>VK_FORMAT_FEATURE_2_STORAGE_READ_WITHOUT_FORMAT_BIT</code> if the format
is one of the <a href="formats.html#formats-without-shader-storage-format" class="xref page">extended storage     formats</a> and <code>shaderStorageImageReadWithoutFormat</code> is enabled on
the device.</p>
</li>
<li>
<p><code>VK_FORMAT_FEATURE_2_STORAGE_WRITE_WITHOUT_FORMAT_BIT</code> if the
format is one of the <a href="formats.html#formats-without-shader-storage-format" class="xref page">extended     storage formats</a> and <code>shaderStorageImageWriteWithoutFormat</code> is
enabled on the device.</p>
</li>
</ul>
</div>
</li>
<li>
<p>If Vulkan 1.3 is supported or the <code><code>VK_KHR_format_feature_flags2</code></code>
extension is supported, and <a href="#VkImageViewCreateInfo">VkImageViewCreateInfo</a>::<code>image</code> was
created with <code>VK_IMAGE_TILING_OPTIMAL</code>,
then the image view&#8217;s set of <em>format features</em> is the value of
<a href="formats.html#VkFormatProperties" class="xref page">VkFormatProperties</a>::<code>optimalTilingFeatures</code> or
<a href="formats.html#VkFormatProperties3" class="xref page">VkFormatProperties3</a>::<code>optimalTilingFeatures</code> found by calling
<a href="formats.html#vkGetPhysicalDeviceFormatProperties" class="xref page">vkGetPhysicalDeviceFormatProperties</a> or
<a href="capabilities.html#vkGetPhysicalDeviceImageFormatProperties2" class="xref page">vkGetPhysicalDeviceImageFormatProperties2</a> on the same <code>format</code>
as <a href="#VkImageViewCreateInfo">VkImageViewCreateInfo</a>::<code>format</code>.</p>
</li>
<li>
<p>If Vulkan 1.3 is not supported and the
<code><code>VK_KHR_format_feature_flags2</code></code> extension is not supported, and
<a href="#VkImageViewCreateInfo">VkImageViewCreateInfo</a>::<code>image</code> was created with
<code>VK_IMAGE_TILING_OPTIMAL</code>,
then the image view&#8217;s set of <em>format features</em> is the union of the value
of <a href="formats.html#VkFormatProperties" class="xref page">VkFormatProperties</a>::<code>optimalTilingFeatures</code> found by
calling <a href="formats.html#vkGetPhysicalDeviceFormatProperties" class="xref page">vkGetPhysicalDeviceFormatProperties</a> on the same
<code>format</code> as <a href="#VkImageViewCreateInfo">VkImageViewCreateInfo</a>::<code>format</code>, with:</p>
<div class="ulist">
<ul>
<li>
<p><code>VK_FORMAT_FEATURE_2_SAMPLED_IMAGE_DEPTH_COMPARISON_BIT</code> if the
format is a depth/stencil format and the image view features also
contain <code>VK_FORMAT_FEATURE_2_SAMPLED_IMAGE_BIT</code>.</p>
</li>
<li>
<p><code>VK_FORMAT_FEATURE_2_STORAGE_READ_WITHOUT_FORMAT_BIT</code> if the format
is one of the <a href="formats.html#formats-without-shader-storage-format" class="xref page">extended storage     formats</a> and <code>shaderStorageImageReadWithoutFormat</code> is enabled on
the device.</p>
</li>
<li>
<p><code>VK_FORMAT_FEATURE_2_STORAGE_WRITE_WITHOUT_FORMAT_BIT</code> if the
format is one of the <a href="formats.html#formats-without-shader-storage-format" class="xref page">extended     storage formats</a> and <code>shaderStorageImageWriteWithoutFormat</code> is
enabled on the device.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="resources-association"><a class="anchor" href="#resources-association"></a>Resource Memory Association</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Resources are initially created as <em>virtual allocations</em> with no backing
memory.
Device memory is allocated separately (see <a href="memory.html#memory-device" class="xref page">Device Memory</a>) and then
associated with the resource.
This association is done differently for sparse and non-sparse resources.</p>
</div>
<div class="paragraph">
<p>Resources created with any of the sparse creation flags are considered
sparse resources.
Resources created without these flags are non-sparse.
The details on resource memory association for sparse resources is described
in <a href="sparsemem.html#sparsememory" class="xref page">Sparse Resources</a>.</p>
</div>
<div class="paragraph">
<p>Non-sparse resources <strong>must</strong> be bound completely and contiguously to a single
<code>VkDeviceMemory</code> object before the resource is passed as a parameter to
any of the following operations:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>creating image or buffer views</p>
</li>
<li>
<p>updating descriptor sets</p>
</li>
<li>
<p>recording commands in a command buffer</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Once bound, the memory binding is immutable for the lifetime of the
resource.</p>
</div>
<div class="paragraph">
<p>In a logical device representing more than one physical device, buffer and
image resources exist on all physical devices but <strong>can</strong> be bound to memory
differently on each.
Each such replicated resource is an <em>instance</em> of the resource.
For sparse resources, each instance <strong>can</strong> be bound to memory arbitrarily
differently.
For non-sparse resources, each instance <strong>can</strong> either be bound to the local or
a peer instance of the memory, or for images <strong>can</strong> be bound to rectangular
regions from the local and/or peer instances.
When a resource is used in a descriptor set, each physical device interprets
the descriptor according to its own instance&#8217;s binding to memory.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>There are no new copy commands to transfer data between physical devices.
Instead, an application <strong>can</strong> create a resource with a peer mapping and use
it as the source or destination of a transfer command executed by a single
physical device to copy the data from one physical device to another.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>To determine the memory requirements for a buffer resource, call:</p>
</div>
<div id="vkGetBufferMemoryRequirements" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_VERSION_1_0
void vkGetBufferMemoryRequirements(
    VkDevice                                    device,
    VkBuffer                                    buffer,
    VkMemoryRequirements*                       pMemoryRequirements);</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>device</code> is the logical device that owns the buffer.</p>
</li>
<li>
<p><code>buffer</code> is the buffer to query.</p>
</li>
<li>
<p><code>pMemoryRequirements</code> is a pointer to a <a href="#VkMemoryRequirements">VkMemoryRequirements</a>
structure in which the memory requirements of the buffer object are
returned.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkGetBufferMemoryRequirements-device-parameter" href="#VUID-vkGetBufferMemoryRequirements-device-parameter"></a> <span class="vuid">VUID-vkGetBufferMemoryRequirements-device-parameter</span><br>
 <code>device</code> <strong>must</strong> be a valid <a href="devsandqueues.html#VkDevice" class="xref page">VkDevice</a> handle</p>
</li>
<li>
<p><a id="VUID-vkGetBufferMemoryRequirements-buffer-parameter" href="#VUID-vkGetBufferMemoryRequirements-buffer-parameter"></a> <span class="vuid">VUID-vkGetBufferMemoryRequirements-buffer-parameter</span><br>
 <code>buffer</code> <strong>must</strong> be a valid <a href="#VkBuffer">VkBuffer</a> handle</p>
</li>
<li>
<p><a id="VUID-vkGetBufferMemoryRequirements-pMemoryRequirements-parameter" href="#VUID-vkGetBufferMemoryRequirements-pMemoryRequirements-parameter"></a> <span class="vuid">VUID-vkGetBufferMemoryRequirements-pMemoryRequirements-parameter</span><br>
 <code>pMemoryRequirements</code> <strong>must</strong> be a valid pointer to a <a href="#VkMemoryRequirements">VkMemoryRequirements</a> structure</p>
</li>
<li>
<p><a id="VUID-vkGetBufferMemoryRequirements-buffer-parent" href="#VUID-vkGetBufferMemoryRequirements-buffer-parent"></a> <span class="vuid">VUID-vkGetBufferMemoryRequirements-buffer-parent</span><br>
 <code>buffer</code> <strong>must</strong> have been created, allocated, or retrieved from <code>device</code></p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>To determine the memory requirements for an image resource which is not
created with the <code>VK_IMAGE_CREATE_DISJOINT_BIT</code> flag set, call:</p>
</div>
<div id="vkGetImageMemoryRequirements" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_VERSION_1_0
void vkGetImageMemoryRequirements(
    VkDevice                                    device,
    VkImage                                     image,
    VkMemoryRequirements*                       pMemoryRequirements);</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>device</code> is the logical device that owns the image.</p>
</li>
<li>
<p><code>image</code> is the image to query.</p>
</li>
<li>
<p><code>pMemoryRequirements</code> is a pointer to a <a href="#VkMemoryRequirements">VkMemoryRequirements</a>
structure in which the memory requirements of the image object are
returned.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkGetImageMemoryRequirements-image-01588" href="#VUID-vkGetImageMemoryRequirements-image-01588"></a> <span class="vuid">VUID-vkGetImageMemoryRequirements-image-01588</span><br>

<code>image</code> <strong>must</strong> not have been created with the
<code>VK_IMAGE_CREATE_DISJOINT_BIT</code> flag set</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkGetImageMemoryRequirements-device-parameter" href="#VUID-vkGetImageMemoryRequirements-device-parameter"></a> <span class="vuid">VUID-vkGetImageMemoryRequirements-device-parameter</span><br>
 <code>device</code> <strong>must</strong> be a valid <a href="devsandqueues.html#VkDevice" class="xref page">VkDevice</a> handle</p>
</li>
<li>
<p><a id="VUID-vkGetImageMemoryRequirements-image-parameter" href="#VUID-vkGetImageMemoryRequirements-image-parameter"></a> <span class="vuid">VUID-vkGetImageMemoryRequirements-image-parameter</span><br>
 <code>image</code> <strong>must</strong> be a valid <a href="#VkImage">VkImage</a> handle</p>
</li>
<li>
<p><a id="VUID-vkGetImageMemoryRequirements-pMemoryRequirements-parameter" href="#VUID-vkGetImageMemoryRequirements-pMemoryRequirements-parameter"></a> <span class="vuid">VUID-vkGetImageMemoryRequirements-pMemoryRequirements-parameter</span><br>
 <code>pMemoryRequirements</code> <strong>must</strong> be a valid pointer to a <a href="#VkMemoryRequirements">VkMemoryRequirements</a> structure</p>
</li>
<li>
<p><a id="VUID-vkGetImageMemoryRequirements-image-parent" href="#VUID-vkGetImageMemoryRequirements-image-parent"></a> <span class="vuid">VUID-vkGetImageMemoryRequirements-image-parent</span><br>
 <code>image</code> <strong>must</strong> have been created, allocated, or retrieved from <code>device</code></p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>VkMemoryRequirements</code> structure is defined as:</p>
</div>
<div id="VkMemoryRequirements" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_VERSION_1_0
typedef struct VkMemoryRequirements {
    VkDeviceSize    size;
    VkDeviceSize    alignment;
    uint32_t        memoryTypeBits;
} VkMemoryRequirements;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>size</code> is the size, in bytes, of the memory allocation <strong>required</strong> for
the resource.</p>
</li>
<li>
<p><code>alignment</code> is the alignment, in bytes, of the offset within the
allocation <strong>required</strong> for the resource.</p>
</li>
<li>
<p><code>memoryTypeBits</code> is a bitmask and contains one bit set for every
supported memory type for the resource.
Bit <code>i</code> is set if and only if the memory type <code>i</code> in the
<code>VkPhysicalDeviceMemoryProperties</code> structure for the physical device
is supported for the resource.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="paragraph">
<p>The implementation guarantees certain properties about the memory
requirements returned by
<a href="#vkGetDeviceBufferMemoryRequirements">vkGetDeviceBufferMemoryRequirements</a>,
<a href="#vkGetDeviceImageMemoryRequirements">vkGetDeviceImageMemoryRequirements</a>,
<a href="#vkGetBufferMemoryRequirements">vkGetBufferMemoryRequirements</a> and <a href="#vkGetImageMemoryRequirements">vkGetImageMemoryRequirements</a>:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The <code>memoryTypeBits</code> member always contains at least one bit set.</p>
</li>
<li>
<p>If <code>buffer</code> is a <code>VkBuffer</code> not created with the
<code>VK_BUFFER_CREATE_SPARSE_BINDING_BIT</code> or
<code>VK_BUFFER_CREATE_PROTECTED_BIT</code> bits set, or if <code>image</code> is a
<a href="../appendices/glossary.html#glossary-linear-resource" class="xref page">linear</a> image that was not created with the
<code>VK_IMAGE_CREATE_PROTECTED_BIT</code> bit set, then the
<code>memoryTypeBits</code> member always contains at least one bit set
corresponding to a <code>VkMemoryType</code> with a <code>propertyFlags</code> that
has both the <code>VK_MEMORY_PROPERTY_HOST_VISIBLE_BIT</code> bit and the
<code>VK_MEMORY_PROPERTY_HOST_COHERENT_BIT</code> bit set.
In other words, mappable coherent memory <strong>can</strong> always be attached to
these objects.</p>
</li>
<li>
<p>If <code>buffer</code> was created with
<a href="#VkExternalMemoryBufferCreateInfo">VkExternalMemoryBufferCreateInfo</a>::<code>handleTypes</code> set to <code>0</code> or
<code>image</code> was created with
<a href="#VkExternalMemoryImageCreateInfo">VkExternalMemoryImageCreateInfo</a>::<code>handleTypes</code> set to <code>0</code>, the
<code>memoryTypeBits</code> member always contains at least one bit set
corresponding to a <code>VkMemoryType</code> with a <code>propertyFlags</code> that
has the <code>VK_MEMORY_PROPERTY_DEVICE_LOCAL_BIT</code> bit set.</p>
</li>
<li>
<p>The <code>memoryTypeBits</code> member is identical for all <code>VkBuffer</code>
objects created with the same value for the <code>flags</code> and <code>usage</code>
members in the <a href="#VkBufferCreateInfo">VkBufferCreateInfo</a> structure
and the <code>handleTypes</code> member of the
<a href="#VkExternalMemoryBufferCreateInfo">VkExternalMemoryBufferCreateInfo</a> structure
passed to <a href="#vkCreateBuffer">vkCreateBuffer</a>.
Further, if <code>usage1</code> and <code>usage2</code> of type <a href="#VkBufferUsageFlags">VkBufferUsageFlags</a>
are such that the bits set in <code>usage2</code> are a subset of the bits set
in <code>usage1</code>, and they have the same
<code>flags</code> and
<a href="#VkExternalMemoryBufferCreateInfo">VkExternalMemoryBufferCreateInfo</a>::<code>handleTypes</code>,
then the bits set in <code>memoryTypeBits</code> returned for <code>usage1</code> <strong>must</strong>
be a subset of the bits set in <code>memoryTypeBits</code> returned for
<code>usage2</code>, for all values of <code>flags</code>.</p>
</li>
<li>
<p>The <code>alignment</code> member is a power of two.</p>
</li>
<li>
<p>The <code>alignment</code> member is identical for all <code>VkBuffer</code> objects
created with the same combination of values for the <code>usage</code> and
<code>flags</code> members in the <a href="#VkBufferCreateInfo">VkBufferCreateInfo</a> structure passed to
<a href="#vkCreateBuffer">vkCreateBuffer</a>.</p>
</li>
<li>
<p>If the <a href="features.html#features-maintenance4" class="xref page"><code>maintenance4</code></a> feature is enabled,
then the <code>alignment</code> member is identical for all <code>VkImage</code>
objects created with the same combination of values for the <code>flags</code>,
<code>imageType</code>, <code>format</code>, <code>extent</code>, <code>mipLevels</code>,
<code>arrayLayers</code>, <code>samples</code>, <code>tiling</code> and <code>usage</code> members
in the <a href="#VkImageCreateInfo">VkImageCreateInfo</a> structure passed to <a href="#vkCreateImage">vkCreateImage</a>.</p>
</li>
<li>
<p>The <code>alignment</code> member satisfies the buffer descriptor offset
alignment requirements associated with the <code>VkBuffer</code>&#8217;s <code>usage</code>:</p>
<div class="ulist">
<ul>
<li>
<p>If <code>usage</code> included <code>VK_BUFFER_USAGE_UNIFORM_TEXEL_BUFFER_BIT</code>
or <code>VK_BUFFER_USAGE_STORAGE_TEXEL_BUFFER_BIT</code>, <code>alignment</code>
<strong>must</strong> be an integer multiple of
<code>VkPhysicalDeviceLimits</code>::<code>minTexelBufferOffsetAlignment</code>.</p>
</li>
<li>
<p>If <code>usage</code> included <code>VK_BUFFER_USAGE_UNIFORM_BUFFER_BIT</code>,
<code>alignment</code> <strong>must</strong> be an integer multiple of
<code>VkPhysicalDeviceLimits</code>::<code>minUniformBufferOffsetAlignment</code>.</p>
</li>
<li>
<p>If <code>usage</code> included <code>VK_BUFFER_USAGE_STORAGE_BUFFER_BIT</code>,
<code>alignment</code> <strong>must</strong> be an integer multiple of
<code>VkPhysicalDeviceLimits</code>::<code>minStorageBufferOffsetAlignment</code>.</p>
</li>
</ul>
</div>
</li>
<li>
<p>For images created with a color format, the <code>memoryTypeBits</code> member
is identical for all <code>VkImage</code> objects created with the same
combination of values for the <code>tiling</code> member, the
<code>VK_IMAGE_CREATE_SPARSE_BINDING_BIT</code> bit
and <code>VK_IMAGE_CREATE_PROTECTED_BIT</code> bit
of the <code>flags</code> member,
the <code>VK_IMAGE_CREATE_SPLIT_INSTANCE_BIND_REGIONS_BIT</code> bit of the
<code>flags</code> member,
<code>handleTypes</code> member of <a href="#VkExternalMemoryImageCreateInfo">VkExternalMemoryImageCreateInfo</a>,
and the <code>VK_IMAGE_USAGE_TRANSIENT_ATTACHMENT_BIT</code> of the <code>usage</code>
member in the <a href="#VkImageCreateInfo">VkImageCreateInfo</a> structure passed to
<a href="#vkCreateImage">vkCreateImage</a>.</p>
</li>
<li>
<p>For images created with a depth/stencil format, the <code>memoryTypeBits</code>
member is identical for all <code>VkImage</code> objects created with the same
combination of values for the <code>format</code> member, the <code>tiling</code>
member, the <code>VK_IMAGE_CREATE_SPARSE_BINDING_BIT</code> bit
and <code>VK_IMAGE_CREATE_PROTECTED_BIT</code> bit
of the <code>flags</code> member,
the <code>VK_IMAGE_CREATE_SPLIT_INSTANCE_BIND_REGIONS_BIT</code> bit of the
<code>flags</code> member,
<code>handleTypes</code> member of <a href="#VkExternalMemoryImageCreateInfo">VkExternalMemoryImageCreateInfo</a>,
and the <code>VK_IMAGE_USAGE_TRANSIENT_ATTACHMENT_BIT</code> of the <code>usage</code>
member in the <a href="#VkImageCreateInfo">VkImageCreateInfo</a> structure passed to
<a href="#vkCreateImage">vkCreateImage</a>.</p>
</li>
<li>
<p>If the memory requirements are for a <code>VkImage</code>, the
<code>memoryTypeBits</code> member <strong>must</strong> not refer to a <code>VkMemoryType</code> with
a <code>propertyFlags</code> that has the
<code>VK_MEMORY_PROPERTY_LAZILY_ALLOCATED_BIT</code> bit set if the <code>image</code>
did not have <code>VK_IMAGE_USAGE_TRANSIENT_ATTACHMENT_BIT</code> bit set in
the <code>usage</code> member of the <a href="#VkImageCreateInfo">VkImageCreateInfo</a> structure passed
to <a href="#vkCreateImage">vkCreateImage</a>.</p>
</li>
<li>
<p>If the memory requirements are for a <code>VkBuffer</code>, the
<code>memoryTypeBits</code> member <strong>must</strong> not refer to a <code>VkMemoryType</code> with
a <code>propertyFlags</code> that has the
<code>VK_MEMORY_PROPERTY_LAZILY_ALLOCATED_BIT</code> bit set.</p>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>The implication of this requirement is that lazily allocated memory is
disallowed for buffers in all cases.</p>
</div>
</td>
</tr>
</table>
</div>
</li>
<li>
<p>The <code>size</code> member is identical for all <code>VkBuffer</code> objects
created with the same combination of creation parameters specified in
<a href="#VkBufferCreateInfo">VkBufferCreateInfo</a> and its <code>pNext</code> chain.</p>
</li>
<li>
<p>The <code>size</code> member is identical for all <code>VkImage</code> objects created
with the same combination of creation parameters specified in
<a href="#VkImageCreateInfo">VkImageCreateInfo</a> and its <code>pNext</code> chain.</p>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>This, however, does not imply that they interpret the contents of the bound
memory identically with each other.
That additional guarantee, however, <strong>can</strong> be explicitly requested using
<code>VK_IMAGE_CREATE_ALIAS_BIT</code>.</p>
</div>
</td>
</tr>
</table>
</div>
</li>
<li>
<p>If the <a href="features.html#features-maintenance4" class="xref page"><code>maintenance4</code></a> feature is enabled,
these additional guarantees apply:</p>
<div class="ulist">
<ul>
<li>
<p>For a <code>VkBuffer</code>, the <code>size</code> memory requirement is never
greater than that of another <code>VkBuffer</code> created with a greater or
equal <code>size</code> specified in <a href="#VkBufferCreateInfo">VkBufferCreateInfo</a>, all other
creation parameters being identical.</p>
</li>
<li>
<p>For a <code>VkBuffer</code>, the <code>size</code> memory requirement is never
greater than the result of aligning
<a href="#VkBufferCreateInfo">VkBufferCreateInfo</a>::<code>size</code> with the <code>alignment</code> memory
requirement.</p>
</li>
<li>
<p>For a <a href="#VkImage">VkImage</a>, the <code>size</code> memory requirement is never greater
than that of another <a href="#VkImage">VkImage</a> created with a greater or equal
value in each of <code>extent.width</code>, <code>extent.height</code>, and
<code>extent.depth</code>; all other creation parameters being identical.</p>
</li>
<li>
<p>The memory requirements returned by
<a href="#vkGetDeviceBufferMemoryRequirements">vkGetDeviceBufferMemoryRequirements</a> are identical to those that
would be returned by <a href="#vkGetBufferMemoryRequirements2">vkGetBufferMemoryRequirements2</a> if it were
called with a <code>VkBuffer</code> created with the same
<a href="#VkBufferCreateInfo">VkBufferCreateInfo</a> values.</p>
</li>
<li>
<p>The memory requirements returned by
<a href="#vkGetDeviceImageMemoryRequirements">vkGetDeviceImageMemoryRequirements</a> are identical to those that
would be returned by <a href="#vkGetImageMemoryRequirements2">vkGetImageMemoryRequirements2</a> if it were
called with a <code>VkImage</code> created with the same
<a href="#VkImageCreateInfo">VkImageCreateInfo</a> values.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>To determine the memory requirements for a buffer resource, call:</p>
</div>
<div id="vkGetBufferMemoryRequirements2" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_VERSION_1_1
void vkGetBufferMemoryRequirements2(
    VkDevice                                    device,
    const VkBufferMemoryRequirementsInfo2*      pInfo,
    VkMemoryRequirements2*                      pMemoryRequirements);</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>device</code> is the logical device that owns the buffer.</p>
</li>
<li>
<p><code>pInfo</code> is a pointer to a <a href="#VkBufferMemoryRequirementsInfo2">VkBufferMemoryRequirementsInfo2</a>
structure containing parameters required for the memory requirements
query.</p>
</li>
<li>
<p><code>pMemoryRequirements</code> is a pointer to a <a href="#VkMemoryRequirements2">VkMemoryRequirements2</a>
structure in which the memory requirements of the buffer object are
returned.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkGetBufferMemoryRequirements2-device-parameter" href="#VUID-vkGetBufferMemoryRequirements2-device-parameter"></a> <span class="vuid">VUID-vkGetBufferMemoryRequirements2-device-parameter</span><br>
 <code>device</code> <strong>must</strong> be a valid <a href="devsandqueues.html#VkDevice" class="xref page">VkDevice</a> handle</p>
</li>
<li>
<p><a id="VUID-vkGetBufferMemoryRequirements2-pInfo-parameter" href="#VUID-vkGetBufferMemoryRequirements2-pInfo-parameter"></a> <span class="vuid">VUID-vkGetBufferMemoryRequirements2-pInfo-parameter</span><br>
 <code>pInfo</code> <strong>must</strong> be a valid pointer to a valid <a href="#VkBufferMemoryRequirementsInfo2">VkBufferMemoryRequirementsInfo2</a> structure</p>
</li>
<li>
<p><a id="VUID-vkGetBufferMemoryRequirements2-pMemoryRequirements-parameter" href="#VUID-vkGetBufferMemoryRequirements2-pMemoryRequirements-parameter"></a> <span class="vuid">VUID-vkGetBufferMemoryRequirements2-pMemoryRequirements-parameter</span><br>
 <code>pMemoryRequirements</code> <strong>must</strong> be a valid pointer to a <a href="#VkMemoryRequirements2">VkMemoryRequirements2</a> structure</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>To determine the memory requirements for a buffer resource without creating
an object, call:</p>
</div>
<div id="vkGetDeviceBufferMemoryRequirements" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_VERSION_1_3
void vkGetDeviceBufferMemoryRequirements(
    VkDevice                                    device,
    const VkDeviceBufferMemoryRequirements*     pInfo,
    VkMemoryRequirements2*                      pMemoryRequirements);</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>device</code> is the logical device intended to own the buffer.</p>
</li>
<li>
<p><code>pInfo</code> is a pointer to a <a href="#VkDeviceBufferMemoryRequirements">VkDeviceBufferMemoryRequirements</a>
structure containing parameters required for the memory requirements
query.</p>
</li>
<li>
<p><code>pMemoryRequirements</code> is a pointer to a <a href="#VkMemoryRequirements2">VkMemoryRequirements2</a>
structure in which the memory requirements of the buffer object are
returned.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkGetDeviceBufferMemoryRequirements-device-parameter" href="#VUID-vkGetDeviceBufferMemoryRequirements-device-parameter"></a> <span class="vuid">VUID-vkGetDeviceBufferMemoryRequirements-device-parameter</span><br>
 <code>device</code> <strong>must</strong> be a valid <a href="devsandqueues.html#VkDevice" class="xref page">VkDevice</a> handle</p>
</li>
<li>
<p><a id="VUID-vkGetDeviceBufferMemoryRequirements-pInfo-parameter" href="#VUID-vkGetDeviceBufferMemoryRequirements-pInfo-parameter"></a> <span class="vuid">VUID-vkGetDeviceBufferMemoryRequirements-pInfo-parameter</span><br>
 <code>pInfo</code> <strong>must</strong> be a valid pointer to a valid <a href="#VkDeviceBufferMemoryRequirements">VkDeviceBufferMemoryRequirements</a> structure</p>
</li>
<li>
<p><a id="VUID-vkGetDeviceBufferMemoryRequirements-pMemoryRequirements-parameter" href="#VUID-vkGetDeviceBufferMemoryRequirements-pMemoryRequirements-parameter"></a> <span class="vuid">VUID-vkGetDeviceBufferMemoryRequirements-pMemoryRequirements-parameter</span><br>
 <code>pMemoryRequirements</code> <strong>must</strong> be a valid pointer to a <a href="#VkMemoryRequirements2">VkMemoryRequirements2</a> structure</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>VkBufferMemoryRequirementsInfo2</code> structure is defined as:</p>
</div>
<div id="VkBufferMemoryRequirementsInfo2" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_VERSION_1_1
typedef struct VkBufferMemoryRequirementsInfo2 {
    VkStructureType    sType;
    const void*        pNext;
    VkBuffer           buffer;
} VkBufferMemoryRequirementsInfo2;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is a <a href="fundamentals.html#VkStructureType" class="xref page">VkStructureType</a> value identifying this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>buffer</code> is the buffer to query.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkBufferMemoryRequirementsInfo2-sType-sType" href="#VUID-VkBufferMemoryRequirementsInfo2-sType-sType"></a> <span class="vuid">VUID-VkBufferMemoryRequirementsInfo2-sType-sType</span><br>
 <code>sType</code> <strong>must</strong> be <code>VK_STRUCTURE_TYPE_BUFFER_MEMORY_REQUIREMENTS_INFO_2</code></p>
</li>
<li>
<p><a id="VUID-VkBufferMemoryRequirementsInfo2-pNext-pNext" href="#VUID-VkBufferMemoryRequirementsInfo2-pNext-pNext"></a> <span class="vuid">VUID-VkBufferMemoryRequirementsInfo2-pNext-pNext</span><br>
 <code>pNext</code> <strong>must</strong> be <code>NULL</code></p>
</li>
<li>
<p><a id="VUID-VkBufferMemoryRequirementsInfo2-buffer-parameter" href="#VUID-VkBufferMemoryRequirementsInfo2-buffer-parameter"></a> <span class="vuid">VUID-VkBufferMemoryRequirementsInfo2-buffer-parameter</span><br>
 <code>buffer</code> <strong>must</strong> be a valid <a href="#VkBuffer">VkBuffer</a> handle</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>VkDeviceBufferMemoryRequirements</code> structure is defined as:</p>
</div>
<div id="VkDeviceBufferMemoryRequirements" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_VERSION_1_3
typedef struct VkDeviceBufferMemoryRequirements {
    VkStructureType              sType;
    const void*                  pNext;
    const VkBufferCreateInfo*    pCreateInfo;
} VkDeviceBufferMemoryRequirements;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is a <a href="fundamentals.html#VkStructureType" class="xref page">VkStructureType</a> value identifying this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>pCreateInfo</code> is a pointer to a <a href="#VkBufferCreateInfo">VkBufferCreateInfo</a> structure
containing parameters affecting creation of the buffer to query.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkDeviceBufferMemoryRequirements-sType-sType" href="#VUID-VkDeviceBufferMemoryRequirements-sType-sType"></a> <span class="vuid">VUID-VkDeviceBufferMemoryRequirements-sType-sType</span><br>
 <code>sType</code> <strong>must</strong> be <code>VK_STRUCTURE_TYPE_DEVICE_BUFFER_MEMORY_REQUIREMENTS</code></p>
</li>
<li>
<p><a id="VUID-VkDeviceBufferMemoryRequirements-pNext-pNext" href="#VUID-VkDeviceBufferMemoryRequirements-pNext-pNext"></a> <span class="vuid">VUID-VkDeviceBufferMemoryRequirements-pNext-pNext</span><br>
 <code>pNext</code> <strong>must</strong> be <code>NULL</code></p>
</li>
<li>
<p><a id="VUID-VkDeviceBufferMemoryRequirements-pCreateInfo-parameter" href="#VUID-VkDeviceBufferMemoryRequirements-pCreateInfo-parameter"></a> <span class="vuid">VUID-VkDeviceBufferMemoryRequirements-pCreateInfo-parameter</span><br>
 <code>pCreateInfo</code> <strong>must</strong> be a valid pointer to a valid <a href="#VkBufferCreateInfo">VkBufferCreateInfo</a> structure</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>To determine the memory requirements for an image resource, call:</p>
</div>
<div id="vkGetImageMemoryRequirements2" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_VERSION_1_1
void vkGetImageMemoryRequirements2(
    VkDevice                                    device,
    const VkImageMemoryRequirementsInfo2*       pInfo,
    VkMemoryRequirements2*                      pMemoryRequirements);</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>device</code> is the logical device that owns the image.</p>
</li>
<li>
<p><code>pInfo</code> is a pointer to a <a href="#VkImageMemoryRequirementsInfo2">VkImageMemoryRequirementsInfo2</a>
structure containing parameters required for the memory requirements
query.</p>
</li>
<li>
<p><code>pMemoryRequirements</code> is a pointer to a <a href="#VkMemoryRequirements2">VkMemoryRequirements2</a>
structure in which the memory requirements of the image object are
returned.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkGetImageMemoryRequirements2-device-parameter" href="#VUID-vkGetImageMemoryRequirements2-device-parameter"></a> <span class="vuid">VUID-vkGetImageMemoryRequirements2-device-parameter</span><br>
 <code>device</code> <strong>must</strong> be a valid <a href="devsandqueues.html#VkDevice" class="xref page">VkDevice</a> handle</p>
</li>
<li>
<p><a id="VUID-vkGetImageMemoryRequirements2-pInfo-parameter" href="#VUID-vkGetImageMemoryRequirements2-pInfo-parameter"></a> <span class="vuid">VUID-vkGetImageMemoryRequirements2-pInfo-parameter</span><br>
 <code>pInfo</code> <strong>must</strong> be a valid pointer to a valid <a href="#VkImageMemoryRequirementsInfo2">VkImageMemoryRequirementsInfo2</a> structure</p>
</li>
<li>
<p><a id="VUID-vkGetImageMemoryRequirements2-pMemoryRequirements-parameter" href="#VUID-vkGetImageMemoryRequirements2-pMemoryRequirements-parameter"></a> <span class="vuid">VUID-vkGetImageMemoryRequirements2-pMemoryRequirements-parameter</span><br>
 <code>pMemoryRequirements</code> <strong>must</strong> be a valid pointer to a <a href="#VkMemoryRequirements2">VkMemoryRequirements2</a> structure</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>To determine the memory requirements for an image resource without creating
an object, call:</p>
</div>
<div id="vkGetDeviceImageMemoryRequirements" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_VERSION_1_3
void vkGetDeviceImageMemoryRequirements(
    VkDevice                                    device,
    const VkDeviceImageMemoryRequirements*      pInfo,
    VkMemoryRequirements2*                      pMemoryRequirements);</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>device</code> is the logical device intended to own the image.</p>
</li>
<li>
<p><code>pInfo</code> is a pointer to a <a href="#VkDeviceImageMemoryRequirements">VkDeviceImageMemoryRequirements</a>
structure containing parameters required for the memory requirements
query.</p>
</li>
<li>
<p><code>pMemoryRequirements</code> is a pointer to a <a href="#VkMemoryRequirements2">VkMemoryRequirements2</a>
structure in which the memory requirements of the image object are
returned.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkGetDeviceImageMemoryRequirements-device-parameter" href="#VUID-vkGetDeviceImageMemoryRequirements-device-parameter"></a> <span class="vuid">VUID-vkGetDeviceImageMemoryRequirements-device-parameter</span><br>
 <code>device</code> <strong>must</strong> be a valid <a href="devsandqueues.html#VkDevice" class="xref page">VkDevice</a> handle</p>
</li>
<li>
<p><a id="VUID-vkGetDeviceImageMemoryRequirements-pInfo-parameter" href="#VUID-vkGetDeviceImageMemoryRequirements-pInfo-parameter"></a> <span class="vuid">VUID-vkGetDeviceImageMemoryRequirements-pInfo-parameter</span><br>
 <code>pInfo</code> <strong>must</strong> be a valid pointer to a valid <a href="#VkDeviceImageMemoryRequirements">VkDeviceImageMemoryRequirements</a> structure</p>
</li>
<li>
<p><a id="VUID-vkGetDeviceImageMemoryRequirements-pMemoryRequirements-parameter" href="#VUID-vkGetDeviceImageMemoryRequirements-pMemoryRequirements-parameter"></a> <span class="vuid">VUID-vkGetDeviceImageMemoryRequirements-pMemoryRequirements-parameter</span><br>
 <code>pMemoryRequirements</code> <strong>must</strong> be a valid pointer to a <a href="#VkMemoryRequirements2">VkMemoryRequirements2</a> structure</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>VkImageMemoryRequirementsInfo2</code> structure is defined as:</p>
</div>
<div id="VkImageMemoryRequirementsInfo2" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_VERSION_1_1
typedef struct VkImageMemoryRequirementsInfo2 {
    VkStructureType    sType;
    const void*        pNext;
    VkImage            image;
} VkImageMemoryRequirementsInfo2;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is a <a href="fundamentals.html#VkStructureType" class="xref page">VkStructureType</a> value identifying this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>image</code> is the image to query.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkImageMemoryRequirementsInfo2-image-01589" href="#VUID-VkImageMemoryRequirementsInfo2-image-01589"></a> <span class="vuid">VUID-VkImageMemoryRequirementsInfo2-image-01589</span><br>

If <code>image</code> was created with a <em>multi-planar</em> format and the
<code>VK_IMAGE_CREATE_DISJOINT_BIT</code> flag, there <strong>must</strong> be a
<a href="#VkImagePlaneMemoryRequirementsInfo">VkImagePlaneMemoryRequirementsInfo</a> included in the <code>pNext</code>
chain of the <a href="#VkImageMemoryRequirementsInfo2">VkImageMemoryRequirementsInfo2</a> structure</p>
</li>
<li>
<p><a id="VUID-VkImageMemoryRequirementsInfo2-image-01590" href="#VUID-VkImageMemoryRequirementsInfo2-image-01590"></a> <span class="vuid">VUID-VkImageMemoryRequirementsInfo2-image-01590</span><br>

If <code>image</code> was not created with the
<code>VK_IMAGE_CREATE_DISJOINT_BIT</code> flag, there <strong>must</strong> not be a
<a href="#VkImagePlaneMemoryRequirementsInfo">VkImagePlaneMemoryRequirementsInfo</a> included in the <code>pNext</code>
chain of the <a href="#VkImageMemoryRequirementsInfo2">VkImageMemoryRequirementsInfo2</a> structure</p>
</li>
<li>
<p><a id="VUID-VkImageMemoryRequirementsInfo2-image-01591" href="#VUID-VkImageMemoryRequirementsInfo2-image-01591"></a> <span class="vuid">VUID-VkImageMemoryRequirementsInfo2-image-01591</span><br>

If <code>image</code> was created with a single-plane format, there <strong>must</strong> not
be a <a href="#VkImagePlaneMemoryRequirementsInfo">VkImagePlaneMemoryRequirementsInfo</a> included in the
<code>pNext</code> chain of the <a href="#VkImageMemoryRequirementsInfo2">VkImageMemoryRequirementsInfo2</a> structure</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkImageMemoryRequirementsInfo2-sType-sType" href="#VUID-VkImageMemoryRequirementsInfo2-sType-sType"></a> <span class="vuid">VUID-VkImageMemoryRequirementsInfo2-sType-sType</span><br>
 <code>sType</code> <strong>must</strong> be <code>VK_STRUCTURE_TYPE_IMAGE_MEMORY_REQUIREMENTS_INFO_2</code></p>
</li>
<li>
<p><a id="VUID-VkImageMemoryRequirementsInfo2-pNext-pNext" href="#VUID-VkImageMemoryRequirementsInfo2-pNext-pNext"></a> <span class="vuid">VUID-VkImageMemoryRequirementsInfo2-pNext-pNext</span><br>
 <code>pNext</code> <strong>must</strong> be <code>NULL</code> or a pointer to a valid instance of <a href="#VkImagePlaneMemoryRequirementsInfo">VkImagePlaneMemoryRequirementsInfo</a></p>
</li>
<li>
<p><a id="VUID-VkImageMemoryRequirementsInfo2-sType-unique" href="#VUID-VkImageMemoryRequirementsInfo2-sType-unique"></a> <span class="vuid">VUID-VkImageMemoryRequirementsInfo2-sType-unique</span><br>
 The <code>sType</code> value of each struct in the <code>pNext</code> chain <strong>must</strong> be unique</p>
</li>
<li>
<p><a id="VUID-VkImageMemoryRequirementsInfo2-image-parameter" href="#VUID-VkImageMemoryRequirementsInfo2-image-parameter"></a> <span class="vuid">VUID-VkImageMemoryRequirementsInfo2-image-parameter</span><br>
 <code>image</code> <strong>must</strong> be a valid <a href="#VkImage">VkImage</a> handle</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>VkDeviceImageMemoryRequirements</code> structure is defined as:</p>
</div>
<div id="VkDeviceImageMemoryRequirements" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_VERSION_1_3
typedef struct VkDeviceImageMemoryRequirements {
    VkStructureType             sType;
    const void*                 pNext;
    const VkImageCreateInfo*    pCreateInfo;
    VkImageAspectFlagBits       planeAspect;
} VkDeviceImageMemoryRequirements;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is a <a href="fundamentals.html#VkStructureType" class="xref page">VkStructureType</a> value identifying this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>pCreateInfo</code> is a pointer to a <a href="#VkImageCreateInfo">VkImageCreateInfo</a> structure
containing parameters affecting creation of the image to query.</p>
</li>
<li>
<p><code>planeAspect</code> is a <a href="#VkImageAspectFlagBits">VkImageAspectFlagBits</a> value specifying the
aspect corresponding to the image plane to query.
This parameter is ignored unless
<code>pCreateInfo-&gt;flags</code> has <code>VK_IMAGE_CREATE_DISJOINT_BIT</code> set.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkDeviceImageMemoryRequirements-pCreateInfo-06416" href="#VUID-VkDeviceImageMemoryRequirements-pCreateInfo-06416"></a> <span class="vuid">VUID-VkDeviceImageMemoryRequirements-pCreateInfo-06416</span><br>

The <code>pCreateInfo-&gt;pNext</code> chain <strong>must</strong> not contain a
<code>VkImageSwapchainCreateInfoKHR</code> structure</p>
</li>
<li>
<p><a id="VUID-VkDeviceImageMemoryRequirements-pCreateInfo-06417" href="#VUID-VkDeviceImageMemoryRequirements-pCreateInfo-06417"></a> <span class="vuid">VUID-VkDeviceImageMemoryRequirements-pCreateInfo-06417</span><br>

If <code>pCreateInfo-&gt;format</code> specifies a <em>multi-planar</em> format and
<code>pCreateInfo-&gt;flags</code> has <code>VK_IMAGE_CREATE_DISJOINT_BIT</code> set then
<code>planeAspect</code> <strong>must</strong> not be <code>VK_IMAGE_ASPECT_NONE_KHR</code></p>
</li>
<li>
<p><a id="VUID-VkDeviceImageMemoryRequirements-pCreateInfo-06419" href="#VUID-VkDeviceImageMemoryRequirements-pCreateInfo-06419"></a> <span class="vuid">VUID-VkDeviceImageMemoryRequirements-pCreateInfo-06419</span><br>

If <code>pCreateInfo-&gt;flags</code> has <code>VK_IMAGE_CREATE_DISJOINT_BIT</code> set
and if the <code>pCreateInfo-&gt;tiling</code> is <code>VK_IMAGE_TILING_LINEAR</code> or
<code>VK_IMAGE_TILING_OPTIMAL</code>, then <code>planeAspect</code> <strong>must</strong> be a single
valid <a href="formats.html#formats-planes-image-aspect" class="xref page">multi-planar aspect mask</a> bit</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkDeviceImageMemoryRequirements-sType-sType" href="#VUID-VkDeviceImageMemoryRequirements-sType-sType"></a> <span class="vuid">VUID-VkDeviceImageMemoryRequirements-sType-sType</span><br>
 <code>sType</code> <strong>must</strong> be <code>VK_STRUCTURE_TYPE_DEVICE_IMAGE_MEMORY_REQUIREMENTS</code></p>
</li>
<li>
<p><a id="VUID-VkDeviceImageMemoryRequirements-pNext-pNext" href="#VUID-VkDeviceImageMemoryRequirements-pNext-pNext"></a> <span class="vuid">VUID-VkDeviceImageMemoryRequirements-pNext-pNext</span><br>
 <code>pNext</code> <strong>must</strong> be <code>NULL</code></p>
</li>
<li>
<p><a id="VUID-VkDeviceImageMemoryRequirements-pCreateInfo-parameter" href="#VUID-VkDeviceImageMemoryRequirements-pCreateInfo-parameter"></a> <span class="vuid">VUID-VkDeviceImageMemoryRequirements-pCreateInfo-parameter</span><br>
 <code>pCreateInfo</code> <strong>must</strong> be a valid pointer to a valid <a href="#VkImageCreateInfo">VkImageCreateInfo</a> structure</p>
</li>
<li>
<p><a id="VUID-VkDeviceImageMemoryRequirements-planeAspect-parameter" href="#VUID-VkDeviceImageMemoryRequirements-planeAspect-parameter"></a> <span class="vuid">VUID-VkDeviceImageMemoryRequirements-planeAspect-parameter</span><br>
 If <code>planeAspect</code> is not <code>0</code>, <code>planeAspect</code> <strong>must</strong> be a valid <a href="#VkImageAspectFlagBits">VkImageAspectFlagBits</a> value</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>To determine the memory requirements for a plane of a disjoint image, add a
<code>VkImagePlaneMemoryRequirementsInfo</code> structure to the <code>pNext</code> chain
of the <code>VkImageMemoryRequirementsInfo2</code> structure.</p>
</div>
<div class="paragraph">
<p>The <code>VkImagePlaneMemoryRequirementsInfo</code> structure is defined as:</p>
</div>
<div id="VkImagePlaneMemoryRequirementsInfo" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_VERSION_1_1
typedef struct VkImagePlaneMemoryRequirementsInfo {
    VkStructureType          sType;
    const void*              pNext;
    VkImageAspectFlagBits    planeAspect;
} VkImagePlaneMemoryRequirementsInfo;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is a <a href="fundamentals.html#VkStructureType" class="xref page">VkStructureType</a> value identifying this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>planeAspect</code> is a <a href="#VkImageAspectFlagBits">VkImageAspectFlagBits</a> value specifying the
aspect corresponding to the image plane to query.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkImagePlaneMemoryRequirementsInfo-planeAspect-02281" href="#VUID-VkImagePlaneMemoryRequirementsInfo-planeAspect-02281"></a> <span class="vuid">VUID-VkImagePlaneMemoryRequirementsInfo-planeAspect-02281</span><br>

If the image&#8217;s <code>tiling</code> is <code>VK_IMAGE_TILING_LINEAR</code> or
<code>VK_IMAGE_TILING_OPTIMAL</code>, then <code>planeAspect</code> <strong>must</strong> be a single
valid <a href="formats.html#formats-planes-image-aspect" class="xref page">multi-planar aspect mask</a> bit</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkImagePlaneMemoryRequirementsInfo-sType-sType" href="#VUID-VkImagePlaneMemoryRequirementsInfo-sType-sType"></a> <span class="vuid">VUID-VkImagePlaneMemoryRequirementsInfo-sType-sType</span><br>
 <code>sType</code> <strong>must</strong> be <code>VK_STRUCTURE_TYPE_IMAGE_PLANE_MEMORY_REQUIREMENTS_INFO</code></p>
</li>
<li>
<p><a id="VUID-VkImagePlaneMemoryRequirementsInfo-planeAspect-parameter" href="#VUID-VkImagePlaneMemoryRequirementsInfo-planeAspect-parameter"></a> <span class="vuid">VUID-VkImagePlaneMemoryRequirementsInfo-planeAspect-parameter</span><br>
 <code>planeAspect</code> <strong>must</strong> be a valid <a href="#VkImageAspectFlagBits">VkImageAspectFlagBits</a> value</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>VkMemoryRequirements2</code> structure is defined as:</p>
</div>
<div id="VkMemoryRequirements2" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_VERSION_1_1
typedef struct VkMemoryRequirements2 {
    VkStructureType         sType;
    void*                   pNext;
    VkMemoryRequirements    memoryRequirements;
} VkMemoryRequirements2;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is a <a href="fundamentals.html#VkStructureType" class="xref page">VkStructureType</a> value identifying this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>memoryRequirements</code> is a <a href="#VkMemoryRequirements">VkMemoryRequirements</a> structure
describing the memory requirements of the resource.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkMemoryRequirements2-sType-sType" href="#VUID-VkMemoryRequirements2-sType-sType"></a> <span class="vuid">VUID-VkMemoryRequirements2-sType-sType</span><br>
 <code>sType</code> <strong>must</strong> be <code>VK_STRUCTURE_TYPE_MEMORY_REQUIREMENTS_2</code></p>
</li>
<li>
<p><a id="VUID-VkMemoryRequirements2-pNext-pNext" href="#VUID-VkMemoryRequirements2-pNext-pNext"></a> <span class="vuid">VUID-VkMemoryRequirements2-pNext-pNext</span><br>
 <code>pNext</code> <strong>must</strong> be <code>NULL</code> or a pointer to a valid instance of <a href="#VkMemoryDedicatedRequirements">VkMemoryDedicatedRequirements</a></p>
</li>
<li>
<p><a id="VUID-VkMemoryRequirements2-sType-unique" href="#VUID-VkMemoryRequirements2-sType-unique"></a> <span class="vuid">VUID-VkMemoryRequirements2-sType-unique</span><br>
 The <code>sType</code> value of each struct in the <code>pNext</code> chain <strong>must</strong> be unique</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>VkMemoryDedicatedRequirements</code> structure is defined as:</p>
</div>
<div id="VkMemoryDedicatedRequirements" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_VERSION_1_1
typedef struct VkMemoryDedicatedRequirements {
    VkStructureType    sType;
    void*              pNext;
    VkBool32           prefersDedicatedAllocation;
    VkBool32           requiresDedicatedAllocation;
} VkMemoryDedicatedRequirements;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is a <a href="fundamentals.html#VkStructureType" class="xref page">VkStructureType</a> value identifying this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>prefersDedicatedAllocation</code> specifies that the implementation would
prefer a dedicated allocation for this resource.
The application is still free to suballocate the resource but it <strong>may</strong>
get better performance if a dedicated allocation is used.</p>
</li>
<li>
<p><code>requiresDedicatedAllocation</code> specifies that a dedicated allocation
is required for this resource.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>To determine the dedicated allocation requirements of a buffer or image
resource, add a <a href="#VkMemoryDedicatedRequirements">VkMemoryDedicatedRequirements</a> structure to the
<code>pNext</code> chain of the <a href="#VkMemoryRequirements2">VkMemoryRequirements2</a> structure passed as the
<code>pMemoryRequirements</code> parameter of <a href="#vkGetBufferMemoryRequirements2">vkGetBufferMemoryRequirements2</a>
or <a href="#vkGetImageMemoryRequirements2">vkGetImageMemoryRequirements2</a>, respectively.</p>
</div>
<div class="paragraph">
<p>Constraints on the values returned for buffer resources are:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>requiresDedicatedAllocation</code> <strong>may</strong> be <code>VK_TRUE</code> if the
<code>pNext</code> chain of <a href="#VkBufferCreateInfo">VkBufferCreateInfo</a> for the call to
<code>vkCreateBuffer</code> used to create the buffer being queried included a
<a href="#VkExternalMemoryBufferCreateInfo">VkExternalMemoryBufferCreateInfo</a> structure, and any of the handle
types specified in
<a href="#VkExternalMemoryBufferCreateInfo">VkExternalMemoryBufferCreateInfo</a>::<code>handleTypes</code> requires
dedicated allocation, as reported by
<a href="capabilities.html#vkGetPhysicalDeviceExternalBufferProperties" class="xref page">vkGetPhysicalDeviceExternalBufferProperties</a> in
<code>VkExternalBufferProperties</code>::<code>externalMemoryProperties.externalMemoryFeatures</code>.
Otherwise, <code>requiresDedicatedAllocation</code> will be <code>VK_FALSE</code>.</p>
</li>
<li>
<p>When the implementation sets <code>requiresDedicatedAllocation</code> to
<code>VK_TRUE</code>, it <strong>must</strong> also set <code>prefersDedicatedAllocation</code> to
<code>VK_TRUE</code>.</p>
</li>
<li>
<p>If <code>VK_BUFFER_CREATE_SPARSE_BINDING_BIT</code> was set in
<a href="#VkBufferCreateInfo">VkBufferCreateInfo</a>::<code>flags</code> when <code>buffer</code> was created,
then both <code>prefersDedicatedAllocation</code> and
<code>requiresDedicatedAllocation</code> will be <code>VK_FALSE</code>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Constraints on the values returned for image resources are:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>requiresDedicatedAllocation</code> <strong>may</strong> be <code>VK_TRUE</code> if the
<code>pNext</code> chain of <a href="#VkImageCreateInfo">VkImageCreateInfo</a> for the call to
<a href="#vkCreateImage">vkCreateImage</a> used to create the image being queried included a
<a href="#VkExternalMemoryImageCreateInfo">VkExternalMemoryImageCreateInfo</a> structure, and any of the handle
types specified in
<a href="#VkExternalMemoryImageCreateInfo">VkExternalMemoryImageCreateInfo</a>::<code>handleTypes</code> requires
dedicated allocation, as reported by
<a href="capabilities.html#vkGetPhysicalDeviceImageFormatProperties2" class="xref page">vkGetPhysicalDeviceImageFormatProperties2</a> in
<code>VkExternalImageFormatProperties</code>::<code>externalMemoryProperties.externalMemoryFeatures</code>.</p>
</li>
<li>
<p><code>requiresDedicatedAllocation</code> will
otherwise
be <code>VK_FALSE</code></p>
</li>
<li>
<p>If <code>VK_IMAGE_CREATE_SPARSE_BINDING_BIT</code> was set in
<a href="#VkImageCreateInfo">VkImageCreateInfo</a>::<code>flags</code> when <code>image</code> was created, then
both <code>prefersDedicatedAllocation</code> and
<code>requiresDedicatedAllocation</code> will be <code>VK_FALSE</code>.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkMemoryDedicatedRequirements-sType-sType" href="#VUID-VkMemoryDedicatedRequirements-sType-sType"></a> <span class="vuid">VUID-VkMemoryDedicatedRequirements-sType-sType</span><br>
 <code>sType</code> <strong>must</strong> be <code>VK_STRUCTURE_TYPE_MEMORY_DEDICATED_REQUIREMENTS</code></p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>To attach memory to a buffer object, call:</p>
</div>
<div id="vkBindBufferMemory" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_VERSION_1_0
VkResult vkBindBufferMemory(
    VkDevice                                    device,
    VkBuffer                                    buffer,
    VkDeviceMemory                              memory,
    VkDeviceSize                                memoryOffset);</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>device</code> is the logical device that owns the buffer and memory.</p>
</li>
<li>
<p><code>buffer</code> is the buffer to be attached to memory.</p>
</li>
<li>
<p><code>memory</code> is a <a href="memory.html#VkDeviceMemory" class="xref page">VkDeviceMemory</a> object describing the device
memory to attach.</p>
</li>
<li>
<p><code>memoryOffset</code> is the start offset of the region of <code>memory</code>
which is to be bound to the buffer.
The number of bytes returned in the
<code>VkMemoryRequirements</code>::<code>size</code> member in <code>memory</code>, starting
from <code>memoryOffset</code> bytes, will be bound to the specified buffer.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><code>vkBindBufferMemory</code> is equivalent to passing the same parameters
through <a href="#VkBindBufferMemoryInfo">VkBindBufferMemoryInfo</a> to <a href="#vkBindBufferMemory2">vkBindBufferMemory2</a>.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkBindBufferMemory-buffer-07459" href="#VUID-vkBindBufferMemory-buffer-07459"></a> <span class="vuid">VUID-vkBindBufferMemory-buffer-07459</span><br>

<code>buffer</code> <strong>must</strong> not have been bound to a memory object</p>
</li>
<li>
<p><a id="VUID-vkBindBufferMemory-buffer-01030" href="#VUID-vkBindBufferMemory-buffer-01030"></a> <span class="vuid">VUID-vkBindBufferMemory-buffer-01030</span><br>

<code>buffer</code> <strong>must</strong> not have been created with any sparse memory binding
flags</p>
</li>
<li>
<p><a id="VUID-vkBindBufferMemory-memoryOffset-01031" href="#VUID-vkBindBufferMemory-memoryOffset-01031"></a> <span class="vuid">VUID-vkBindBufferMemory-memoryOffset-01031</span><br>

<code>memoryOffset</code> <strong>must</strong> be less than the size of <code>memory</code></p>
</li>
<li>
<p><a id="VUID-vkBindBufferMemory-memory-01035" href="#VUID-vkBindBufferMemory-memory-01035"></a> <span class="vuid">VUID-vkBindBufferMemory-memory-01035</span><br>

<code>memory</code> <strong>must</strong> have been allocated using one of the memory types
allowed in the <code>memoryTypeBits</code> member of the
<code>VkMemoryRequirements</code> structure returned from a call to
<code>vkGetBufferMemoryRequirements</code> with <code>buffer</code></p>
</li>
<li>
<p><a id="VUID-vkBindBufferMemory-memoryOffset-01036" href="#VUID-vkBindBufferMemory-memoryOffset-01036"></a> <span class="vuid">VUID-vkBindBufferMemory-memoryOffset-01036</span><br>

<code>memoryOffset</code> <strong>must</strong> be an integer multiple of the <code>alignment</code>
member of the <code>VkMemoryRequirements</code> structure returned from a call
to <code>vkGetBufferMemoryRequirements</code> with <code>buffer</code></p>
</li>
<li>
<p><a id="VUID-vkBindBufferMemory-size-01037" href="#VUID-vkBindBufferMemory-size-01037"></a> <span class="vuid">VUID-vkBindBufferMemory-size-01037</span><br>

The <code>size</code> member of the <code>VkMemoryRequirements</code> structure
returned from a call to <code>vkGetBufferMemoryRequirements</code> with
<code>buffer</code> <strong>must</strong> be less than or equal to the size of <code>memory</code>
minus <code>memoryOffset</code></p>
</li>
<li>
<p><a id="VUID-vkBindBufferMemory-buffer-01444" href="#VUID-vkBindBufferMemory-buffer-01444"></a> <span class="vuid">VUID-vkBindBufferMemory-buffer-01444</span><br>

If <code>buffer</code> requires a dedicated allocation (as reported by
<a href="#vkGetBufferMemoryRequirements2">vkGetBufferMemoryRequirements2</a> in
<a href="#VkMemoryDedicatedRequirements">VkMemoryDedicatedRequirements</a>::<code>requiresDedicatedAllocation</code>
for <code>buffer</code>), <code>memory</code> <strong>must</strong> have been allocated with
<a href="memory.html#VkMemoryDedicatedAllocateInfo" class="xref page">VkMemoryDedicatedAllocateInfo</a>::<code>buffer</code> equal to <code>buffer</code></p>
</li>
<li>
<p><a id="VUID-vkBindBufferMemory-memory-01508" href="#VUID-vkBindBufferMemory-memory-01508"></a> <span class="vuid">VUID-vkBindBufferMemory-memory-01508</span><br>

If the <code>VkMemoryAllocateInfo</code> provided when <code>memory</code> was
allocated included a <a href="memory.html#VkMemoryDedicatedAllocateInfo" class="xref page">VkMemoryDedicatedAllocateInfo</a> structure in
its <code>pNext</code> chain, and
<a href="memory.html#VkMemoryDedicatedAllocateInfo" class="xref page">VkMemoryDedicatedAllocateInfo</a>::<code>buffer</code> was not
<a href="../appendices/boilerplate.html#VK_NULL_HANDLE" class="xref page">VK_NULL_HANDLE</a>, then <code>buffer</code> <strong>must</strong> equal
<a href="memory.html#VkMemoryDedicatedAllocateInfo" class="xref page">VkMemoryDedicatedAllocateInfo</a>::<code>buffer</code>, and
<code>memoryOffset</code> <strong>must</strong> be zero</p>
</li>
<li>
<p><a id="VUID-vkBindBufferMemory-None-01898" href="#VUID-vkBindBufferMemory-None-01898"></a> <span class="vuid">VUID-vkBindBufferMemory-None-01898</span><br>

If <code>buffer</code> was created with the
<code>VK_BUFFER_CREATE_PROTECTED_BIT</code> bit set, the buffer <strong>must</strong> be bound
to a memory object allocated with a memory type that reports
<code>VK_MEMORY_PROPERTY_PROTECTED_BIT</code></p>
</li>
<li>
<p><a id="VUID-vkBindBufferMemory-None-01899" href="#VUID-vkBindBufferMemory-None-01899"></a> <span class="vuid">VUID-vkBindBufferMemory-None-01899</span><br>

If <code>buffer</code> was created with the
<code>VK_BUFFER_CREATE_PROTECTED_BIT</code> bit not set, the buffer <strong>must</strong> not
be bound to a memory object allocated with a memory type that reports
<code>VK_MEMORY_PROPERTY_PROTECTED_BIT</code></p>
</li>
<li>
<p><a id="VUID-vkBindBufferMemory-memory-02726" href="#VUID-vkBindBufferMemory-memory-02726"></a> <span class="vuid">VUID-vkBindBufferMemory-memory-02726</span><br>

If the value of <a href="memory.html#VkExportMemoryAllocateInfo" class="xref page">VkExportMemoryAllocateInfo</a>::<code>handleTypes</code> used
to allocate <code>memory</code> is not <code>0</code>, it <strong>must</strong> include at least one of
the handles set in
<a href="#VkExternalMemoryBufferCreateInfo">VkExternalMemoryBufferCreateInfo</a>::<code>handleTypes</code> when
<code>buffer</code> was created</p>
</li>
<li>
<p><a id="VUID-vkBindBufferMemory-memory-02985" href="#VUID-vkBindBufferMemory-memory-02985"></a> <span class="vuid">VUID-vkBindBufferMemory-memory-02985</span><br>

If <code>memory</code> was allocated by a memory import operation,
the external handle type of the imported memory <strong>must</strong> also have been set
in <a href="#VkExternalMemoryBufferCreateInfo">VkExternalMemoryBufferCreateInfo</a>::<code>handleTypes</code> when
<code>buffer</code> was created</p>
</li>
<li>
<p><a id="VUID-vkBindBufferMemory-bufferDeviceAddress-03339" href="#VUID-vkBindBufferMemory-bufferDeviceAddress-03339"></a> <span class="vuid">VUID-vkBindBufferMemory-bufferDeviceAddress-03339</span><br>

If the
<a href="features.html#VkPhysicalDeviceBufferDeviceAddressFeatures" class="xref page">VkPhysicalDeviceBufferDeviceAddressFeatures</a>::<code>bufferDeviceAddress</code>
feature is enabled and <code>buffer</code> was created with the
<code>VK_BUFFER_USAGE_SHADER_DEVICE_ADDRESS_BIT</code> bit set, <code>memory</code>
<strong>must</strong> have been allocated with the
<code>VK_MEMORY_ALLOCATE_DEVICE_ADDRESS_BIT</code> bit set</p>
</li>
<li>
<p><a id="VUID-vkBindBufferMemory-bufferDeviceAddressCaptureReplay-09200" href="#VUID-vkBindBufferMemory-bufferDeviceAddressCaptureReplay-09200"></a> <span class="vuid">VUID-vkBindBufferMemory-bufferDeviceAddressCaptureReplay-09200</span><br>

If the
<a href="features.html#VkPhysicalDeviceBufferDeviceAddressFeatures" class="xref page">VkPhysicalDeviceBufferDeviceAddressFeatures</a>::<code>bufferDeviceAddressCaptureReplay</code>
feature is enabled and <code>buffer</code> was created with the
<code>VK_BUFFER_CREATE_DEVICE_ADDRESS_CAPTURE_REPLAY_BIT</code> bit set,
<code>memory</code> <strong>must</strong> have been allocated with the
<code>VK_MEMORY_ALLOCATE_DEVICE_ADDRESS_CAPTURE_REPLAY_BIT</code> bit set</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkBindBufferMemory-device-parameter" href="#VUID-vkBindBufferMemory-device-parameter"></a> <span class="vuid">VUID-vkBindBufferMemory-device-parameter</span><br>
 <code>device</code> <strong>must</strong> be a valid <a href="devsandqueues.html#VkDevice" class="xref page">VkDevice</a> handle</p>
</li>
<li>
<p><a id="VUID-vkBindBufferMemory-buffer-parameter" href="#VUID-vkBindBufferMemory-buffer-parameter"></a> <span class="vuid">VUID-vkBindBufferMemory-buffer-parameter</span><br>
 <code>buffer</code> <strong>must</strong> be a valid <a href="#VkBuffer">VkBuffer</a> handle</p>
</li>
<li>
<p><a id="VUID-vkBindBufferMemory-memory-parameter" href="#VUID-vkBindBufferMemory-memory-parameter"></a> <span class="vuid">VUID-vkBindBufferMemory-memory-parameter</span><br>
 <code>memory</code> <strong>must</strong> be a valid <a href="memory.html#VkDeviceMemory" class="xref page">VkDeviceMemory</a> handle</p>
</li>
<li>
<p><a id="VUID-vkBindBufferMemory-buffer-parent" href="#VUID-vkBindBufferMemory-buffer-parent"></a> <span class="vuid">VUID-vkBindBufferMemory-buffer-parent</span><br>
 <code>buffer</code> <strong>must</strong> have been created, allocated, or retrieved from <code>device</code></p>
</li>
<li>
<p><a id="VUID-vkBindBufferMemory-memory-parent" href="#VUID-vkBindBufferMemory-memory-parent"></a> <span class="vuid">VUID-vkBindBufferMemory-memory-parent</span><br>
 <code>memory</code> <strong>must</strong> have been created, allocated, or retrieved from <code>device</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Host Synchronization</div>
<div class="ulist">
<ul>
<li>
<p>Host access to <code>buffer</code> <strong>must</strong> be externally synchronized</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Return Codes</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><a href="fundamentals.html#fundamentals-successcodes" class="xref page">Success</a></dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><code>VK_SUCCESS</code></p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1"><a href="fundamentals.html#fundamentals-errorcodes" class="xref page">Failure</a></dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><code>VK_ERROR_OUT_OF_HOST_MEMORY</code></p>
</li>
<li>
<p><code>VK_ERROR_OUT_OF_DEVICE_MEMORY</code></p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>To attach memory to buffer objects for one or more buffers at a time, call:</p>
</div>
<div id="vkBindBufferMemory2" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_VERSION_1_1
VkResult vkBindBufferMemory2(
    VkDevice                                    device,
    uint32_t                                    bindInfoCount,
    const VkBindBufferMemoryInfo*               pBindInfos);</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>device</code> is the logical device that owns the buffers and memory.</p>
</li>
<li>
<p><code>bindInfoCount</code> is the number of elements in <code>pBindInfos</code>.</p>
</li>
<li>
<p><code>pBindInfos</code> is a pointer to an array of <code>bindInfoCount</code>
<a href="#VkBindBufferMemoryInfo">VkBindBufferMemoryInfo</a> structures describing buffers and memory to
bind.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>On some implementations, it <strong>may</strong> be more efficient to batch memory bindings
into a single command.</p>
</div>
<div class="paragraph">
<p>If any of the memory binding operations described by <code>pBindInfos</code> fail,
the <a href="fundamentals.html#VkResult" class="xref page">VkResult</a> returned by this command <strong>must</strong> be the return value of any
one of the memory binding operations which did not return <code>VK_SUCCESS</code>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>If the <code>vkBindBufferMemory2</code> command failed,
and <code>bindInfoCount</code> was greater than one, then the buffers referenced by
<code>pBindInfos</code> will be in an indeterminate state, and must not be used.</p>
</div>
<div class="paragraph">
<p>Applications should destroy these buffers.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkBindBufferMemory2-device-parameter" href="#VUID-vkBindBufferMemory2-device-parameter"></a> <span class="vuid">VUID-vkBindBufferMemory2-device-parameter</span><br>
 <code>device</code> <strong>must</strong> be a valid <a href="devsandqueues.html#VkDevice" class="xref page">VkDevice</a> handle</p>
</li>
<li>
<p><a id="VUID-vkBindBufferMemory2-pBindInfos-parameter" href="#VUID-vkBindBufferMemory2-pBindInfos-parameter"></a> <span class="vuid">VUID-vkBindBufferMemory2-pBindInfos-parameter</span><br>
 <code>pBindInfos</code> <strong>must</strong> be a valid pointer to an array of <code>bindInfoCount</code> valid <a href="#VkBindBufferMemoryInfo">VkBindBufferMemoryInfo</a> structures</p>
</li>
<li>
<p><a id="VUID-vkBindBufferMemory2-bindInfoCount-arraylength" href="#VUID-vkBindBufferMemory2-bindInfoCount-arraylength"></a> <span class="vuid">VUID-vkBindBufferMemory2-bindInfoCount-arraylength</span><br>
 <code>bindInfoCount</code> <strong>must</strong> be greater than <code>0</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Return Codes</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><a href="fundamentals.html#fundamentals-successcodes" class="xref page">Success</a></dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><code>VK_SUCCESS</code></p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1"><a href="fundamentals.html#fundamentals-errorcodes" class="xref page">Failure</a></dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><code>VK_ERROR_OUT_OF_HOST_MEMORY</code></p>
</li>
<li>
<p><code>VK_ERROR_OUT_OF_DEVICE_MEMORY</code></p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p><code>VkBindBufferMemoryInfo</code> contains members corresponding to the
parameters of <a href="#vkBindBufferMemory">vkBindBufferMemory</a>.</p>
</div>
<div class="paragraph">
<p>The <code>VkBindBufferMemoryInfo</code> structure is defined as:</p>
</div>
<div id="VkBindBufferMemoryInfo" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_VERSION_1_1
typedef struct VkBindBufferMemoryInfo {
    VkStructureType    sType;
    const void*        pNext;
    VkBuffer           buffer;
    VkDeviceMemory     memory;
    VkDeviceSize       memoryOffset;
} VkBindBufferMemoryInfo;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is a <a href="fundamentals.html#VkStructureType" class="xref page">VkStructureType</a> value identifying this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>buffer</code> is the buffer to be attached to memory.</p>
</li>
<li>
<p><code>memory</code> is a <a href="memory.html#VkDeviceMemory" class="xref page">VkDeviceMemory</a> object describing the device
memory to attach.</p>
</li>
<li>
<p><code>memoryOffset</code> is the start offset of the region of <code>memory</code>
which is to be bound to the buffer.
The number of bytes returned in the
<code>VkMemoryRequirements</code>::<code>size</code> member in <code>memory</code>, starting
from <code>memoryOffset</code> bytes, will be bound to the specified buffer.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkBindBufferMemoryInfo-buffer-07459" href="#VUID-VkBindBufferMemoryInfo-buffer-07459"></a> <span class="vuid">VUID-VkBindBufferMemoryInfo-buffer-07459</span><br>

<code>buffer</code> <strong>must</strong> not have been bound to a memory object</p>
</li>
<li>
<p><a id="VUID-VkBindBufferMemoryInfo-buffer-01030" href="#VUID-VkBindBufferMemoryInfo-buffer-01030"></a> <span class="vuid">VUID-VkBindBufferMemoryInfo-buffer-01030</span><br>

<code>buffer</code> <strong>must</strong> not have been created with any sparse memory binding
flags</p>
</li>
<li>
<p><a id="VUID-VkBindBufferMemoryInfo-memoryOffset-01031" href="#VUID-VkBindBufferMemoryInfo-memoryOffset-01031"></a> <span class="vuid">VUID-VkBindBufferMemoryInfo-memoryOffset-01031</span><br>

<code>memoryOffset</code> <strong>must</strong> be less than the size of <code>memory</code></p>
</li>
<li>
<p><a id="VUID-VkBindBufferMemoryInfo-memory-01035" href="#VUID-VkBindBufferMemoryInfo-memory-01035"></a> <span class="vuid">VUID-VkBindBufferMemoryInfo-memory-01035</span><br>

<code>memory</code> <strong>must</strong> have been allocated using one of the memory types
allowed in the <code>memoryTypeBits</code> member of the
<code>VkMemoryRequirements</code> structure returned from a call to
<code>vkGetBufferMemoryRequirements</code> with <code>buffer</code></p>
</li>
<li>
<p><a id="VUID-VkBindBufferMemoryInfo-memoryOffset-01036" href="#VUID-VkBindBufferMemoryInfo-memoryOffset-01036"></a> <span class="vuid">VUID-VkBindBufferMemoryInfo-memoryOffset-01036</span><br>

<code>memoryOffset</code> <strong>must</strong> be an integer multiple of the <code>alignment</code>
member of the <code>VkMemoryRequirements</code> structure returned from a call
to <code>vkGetBufferMemoryRequirements</code> with <code>buffer</code></p>
</li>
<li>
<p><a id="VUID-VkBindBufferMemoryInfo-size-01037" href="#VUID-VkBindBufferMemoryInfo-size-01037"></a> <span class="vuid">VUID-VkBindBufferMemoryInfo-size-01037</span><br>

The <code>size</code> member of the <code>VkMemoryRequirements</code> structure
returned from a call to <code>vkGetBufferMemoryRequirements</code> with
<code>buffer</code> <strong>must</strong> be less than or equal to the size of <code>memory</code>
minus <code>memoryOffset</code></p>
</li>
<li>
<p><a id="VUID-VkBindBufferMemoryInfo-buffer-01444" href="#VUID-VkBindBufferMemoryInfo-buffer-01444"></a> <span class="vuid">VUID-VkBindBufferMemoryInfo-buffer-01444</span><br>

If <code>buffer</code> requires a dedicated allocation (as reported by
<a href="#vkGetBufferMemoryRequirements2">vkGetBufferMemoryRequirements2</a> in
<a href="#VkMemoryDedicatedRequirements">VkMemoryDedicatedRequirements</a>::<code>requiresDedicatedAllocation</code>
for <code>buffer</code>), <code>memory</code> <strong>must</strong> have been allocated with
<a href="memory.html#VkMemoryDedicatedAllocateInfo" class="xref page">VkMemoryDedicatedAllocateInfo</a>::<code>buffer</code> equal to <code>buffer</code></p>
</li>
<li>
<p><a id="VUID-VkBindBufferMemoryInfo-memory-01508" href="#VUID-VkBindBufferMemoryInfo-memory-01508"></a> <span class="vuid">VUID-VkBindBufferMemoryInfo-memory-01508</span><br>

If the <code>VkMemoryAllocateInfo</code> provided when <code>memory</code> was
allocated included a <a href="memory.html#VkMemoryDedicatedAllocateInfo" class="xref page">VkMemoryDedicatedAllocateInfo</a> structure in
its <code>pNext</code> chain, and
<a href="memory.html#VkMemoryDedicatedAllocateInfo" class="xref page">VkMemoryDedicatedAllocateInfo</a>::<code>buffer</code> was not
<a href="../appendices/boilerplate.html#VK_NULL_HANDLE" class="xref page">VK_NULL_HANDLE</a>, then <code>buffer</code> <strong>must</strong> equal
<a href="memory.html#VkMemoryDedicatedAllocateInfo" class="xref page">VkMemoryDedicatedAllocateInfo</a>::<code>buffer</code>, and
<code>memoryOffset</code> <strong>must</strong> be zero</p>
</li>
<li>
<p><a id="VUID-VkBindBufferMemoryInfo-None-01898" href="#VUID-VkBindBufferMemoryInfo-None-01898"></a> <span class="vuid">VUID-VkBindBufferMemoryInfo-None-01898</span><br>

If <code>buffer</code> was created with the
<code>VK_BUFFER_CREATE_PROTECTED_BIT</code> bit set, the buffer <strong>must</strong> be bound
to a memory object allocated with a memory type that reports
<code>VK_MEMORY_PROPERTY_PROTECTED_BIT</code></p>
</li>
<li>
<p><a id="VUID-VkBindBufferMemoryInfo-None-01899" href="#VUID-VkBindBufferMemoryInfo-None-01899"></a> <span class="vuid">VUID-VkBindBufferMemoryInfo-None-01899</span><br>

If <code>buffer</code> was created with the
<code>VK_BUFFER_CREATE_PROTECTED_BIT</code> bit not set, the buffer <strong>must</strong> not
be bound to a memory object allocated with a memory type that reports
<code>VK_MEMORY_PROPERTY_PROTECTED_BIT</code></p>
</li>
<li>
<p><a id="VUID-VkBindBufferMemoryInfo-memory-02726" href="#VUID-VkBindBufferMemoryInfo-memory-02726"></a> <span class="vuid">VUID-VkBindBufferMemoryInfo-memory-02726</span><br>

If the value of <a href="memory.html#VkExportMemoryAllocateInfo" class="xref page">VkExportMemoryAllocateInfo</a>::<code>handleTypes</code> used
to allocate <code>memory</code> is not <code>0</code>, it <strong>must</strong> include at least one of
the handles set in
<a href="#VkExternalMemoryBufferCreateInfo">VkExternalMemoryBufferCreateInfo</a>::<code>handleTypes</code> when
<code>buffer</code> was created</p>
</li>
<li>
<p><a id="VUID-VkBindBufferMemoryInfo-memory-02985" href="#VUID-VkBindBufferMemoryInfo-memory-02985"></a> <span class="vuid">VUID-VkBindBufferMemoryInfo-memory-02985</span><br>

If <code>memory</code> was allocated by a memory import operation,
the external handle type of the imported memory <strong>must</strong> also have been set
in <a href="#VkExternalMemoryBufferCreateInfo">VkExternalMemoryBufferCreateInfo</a>::<code>handleTypes</code> when
<code>buffer</code> was created</p>
</li>
<li>
<p><a id="VUID-VkBindBufferMemoryInfo-bufferDeviceAddress-03339" href="#VUID-VkBindBufferMemoryInfo-bufferDeviceAddress-03339"></a> <span class="vuid">VUID-VkBindBufferMemoryInfo-bufferDeviceAddress-03339</span><br>

If the
<a href="features.html#VkPhysicalDeviceBufferDeviceAddressFeatures" class="xref page">VkPhysicalDeviceBufferDeviceAddressFeatures</a>::<code>bufferDeviceAddress</code>
feature is enabled and <code>buffer</code> was created with the
<code>VK_BUFFER_USAGE_SHADER_DEVICE_ADDRESS_BIT</code> bit set, <code>memory</code>
<strong>must</strong> have been allocated with the
<code>VK_MEMORY_ALLOCATE_DEVICE_ADDRESS_BIT</code> bit set</p>
</li>
<li>
<p><a id="VUID-VkBindBufferMemoryInfo-bufferDeviceAddressCaptureReplay-09200" href="#VUID-VkBindBufferMemoryInfo-bufferDeviceAddressCaptureReplay-09200"></a> <span class="vuid">VUID-VkBindBufferMemoryInfo-bufferDeviceAddressCaptureReplay-09200</span><br>

If the
<a href="features.html#VkPhysicalDeviceBufferDeviceAddressFeatures" class="xref page">VkPhysicalDeviceBufferDeviceAddressFeatures</a>::<code>bufferDeviceAddressCaptureReplay</code>
feature is enabled and <code>buffer</code> was created with the
<code>VK_BUFFER_CREATE_DEVICE_ADDRESS_CAPTURE_REPLAY_BIT</code> bit set,
<code>memory</code> <strong>must</strong> have been allocated with the
<code>VK_MEMORY_ALLOCATE_DEVICE_ADDRESS_CAPTURE_REPLAY_BIT</code> bit set</p>
</li>
<li>
<p><a id="VUID-VkBindBufferMemoryInfo-pNext-01605" href="#VUID-VkBindBufferMemoryInfo-pNext-01605"></a> <span class="vuid">VUID-VkBindBufferMemoryInfo-pNext-01605</span><br>

If the <code>pNext</code> chain includes a
<a href="#VkBindBufferMemoryDeviceGroupInfo">VkBindBufferMemoryDeviceGroupInfo</a> structure, all instances of
<code>memory</code> specified by
<a href="#VkBindBufferMemoryDeviceGroupInfo">VkBindBufferMemoryDeviceGroupInfo</a>::<code>pDeviceIndices</code> <strong>must</strong> have
been allocated</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkBindBufferMemoryInfo-sType-sType" href="#VUID-VkBindBufferMemoryInfo-sType-sType"></a> <span class="vuid">VUID-VkBindBufferMemoryInfo-sType-sType</span><br>
 <code>sType</code> <strong>must</strong> be <code>VK_STRUCTURE_TYPE_BIND_BUFFER_MEMORY_INFO</code></p>
</li>
<li>
<p><a id="VUID-VkBindBufferMemoryInfo-pNext-pNext" href="#VUID-VkBindBufferMemoryInfo-pNext-pNext"></a> <span class="vuid">VUID-VkBindBufferMemoryInfo-pNext-pNext</span><br>
 <code>pNext</code> <strong>must</strong> be <code>NULL</code> or a pointer to a valid instance of <a href="#VkBindBufferMemoryDeviceGroupInfo">VkBindBufferMemoryDeviceGroupInfo</a></p>
</li>
<li>
<p><a id="VUID-VkBindBufferMemoryInfo-sType-unique" href="#VUID-VkBindBufferMemoryInfo-sType-unique"></a> <span class="vuid">VUID-VkBindBufferMemoryInfo-sType-unique</span><br>
 The <code>sType</code> value of each struct in the <code>pNext</code> chain <strong>must</strong> be unique</p>
</li>
<li>
<p><a id="VUID-VkBindBufferMemoryInfo-buffer-parameter" href="#VUID-VkBindBufferMemoryInfo-buffer-parameter"></a> <span class="vuid">VUID-VkBindBufferMemoryInfo-buffer-parameter</span><br>
 <code>buffer</code> <strong>must</strong> be a valid <a href="#VkBuffer">VkBuffer</a> handle</p>
</li>
<li>
<p><a id="VUID-VkBindBufferMemoryInfo-memory-parameter" href="#VUID-VkBindBufferMemoryInfo-memory-parameter"></a> <span class="vuid">VUID-VkBindBufferMemoryInfo-memory-parameter</span><br>
 <code>memory</code> <strong>must</strong> be a valid <a href="memory.html#VkDeviceMemory" class="xref page">VkDeviceMemory</a> handle</p>
</li>
<li>
<p><a id="VUID-VkBindBufferMemoryInfo-commonparent" href="#VUID-VkBindBufferMemoryInfo-commonparent"></a> <span class="vuid">VUID-VkBindBufferMemoryInfo-commonparent</span><br>
 Both of <code>buffer</code>, and <code>memory</code> <strong>must</strong> have been created, allocated, or retrieved from the same <a href="devsandqueues.html#VkDevice" class="xref page">VkDevice</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>VkBindBufferMemoryDeviceGroupInfo</code> structure is defined as:</p>
</div>
<div id="VkBindBufferMemoryDeviceGroupInfo" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_VERSION_1_1
typedef struct VkBindBufferMemoryDeviceGroupInfo {
    VkStructureType    sType;
    const void*        pNext;
    uint32_t           deviceIndexCount;
    const uint32_t*    pDeviceIndices;
} VkBindBufferMemoryDeviceGroupInfo;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is a <a href="fundamentals.html#VkStructureType" class="xref page">VkStructureType</a> value identifying this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>deviceIndexCount</code> is the number of elements in
<code>pDeviceIndices</code>.</p>
</li>
<li>
<p><code>pDeviceIndices</code> is a pointer to an array of device indices.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>If the <code>pNext</code> chain of <a href="#VkBindBufferMemoryInfo">VkBindBufferMemoryInfo</a> includes a
<code>VkBindBufferMemoryDeviceGroupInfo</code> structure, then that structure
determines how memory is bound to buffers across multiple devices in a
device group.</p>
</div>
<div class="paragraph">
<p>If <code>deviceIndexCount</code> is greater than zero, then on device index <span class="eq">i</span>
the buffer is attached to the instance of <code>memory</code> on the physical
device with device index <span class="eq"><code>pDeviceIndices</code>[i]</span>.</p>
</div>
<div class="paragraph">
<p>If <code>deviceIndexCount</code> is zero and <code>memory</code> comes from a memory heap
with the <code>VK_MEMORY_HEAP_MULTI_INSTANCE_BIT</code> bit set, then it is as if
<code>pDeviceIndices</code> contains consecutive indices from zero to the number of
physical devices in the logical device, minus one.
In other words, by default each physical device attaches to its own instance
of <code>memory</code>.</p>
</div>
<div class="paragraph">
<p>If <code>deviceIndexCount</code> is zero and <code>memory</code> comes from a memory heap
without the <code>VK_MEMORY_HEAP_MULTI_INSTANCE_BIT</code> bit set, then it is as
if <code>pDeviceIndices</code> contains an array of zeros.
In other words, by default each physical device attaches to instance zero.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkBindBufferMemoryDeviceGroupInfo-deviceIndexCount-01606" href="#VUID-VkBindBufferMemoryDeviceGroupInfo-deviceIndexCount-01606"></a> <span class="vuid">VUID-VkBindBufferMemoryDeviceGroupInfo-deviceIndexCount-01606</span><br>

<code>deviceIndexCount</code> <strong>must</strong> either be zero or equal to the number of
physical devices in the logical device</p>
</li>
<li>
<p><a id="VUID-VkBindBufferMemoryDeviceGroupInfo-pDeviceIndices-01607" href="#VUID-VkBindBufferMemoryDeviceGroupInfo-pDeviceIndices-01607"></a> <span class="vuid">VUID-VkBindBufferMemoryDeviceGroupInfo-pDeviceIndices-01607</span><br>

All elements of <code>pDeviceIndices</code> <strong>must</strong> be valid device indices</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkBindBufferMemoryDeviceGroupInfo-sType-sType" href="#VUID-VkBindBufferMemoryDeviceGroupInfo-sType-sType"></a> <span class="vuid">VUID-VkBindBufferMemoryDeviceGroupInfo-sType-sType</span><br>
 <code>sType</code> <strong>must</strong> be <code>VK_STRUCTURE_TYPE_BIND_BUFFER_MEMORY_DEVICE_GROUP_INFO</code></p>
</li>
<li>
<p><a id="VUID-VkBindBufferMemoryDeviceGroupInfo-pDeviceIndices-parameter" href="#VUID-VkBindBufferMemoryDeviceGroupInfo-pDeviceIndices-parameter"></a> <span class="vuid">VUID-VkBindBufferMemoryDeviceGroupInfo-pDeviceIndices-parameter</span><br>
 If <code>deviceIndexCount</code> is not <code>0</code>, <code>pDeviceIndices</code> <strong>must</strong> be a valid pointer to an array of <code>deviceIndexCount</code> <code>uint32_t</code> values</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>To attach memory to a <code>VkImage</code> object created without the
<code>VK_IMAGE_CREATE_DISJOINT_BIT</code> set, call:</p>
</div>
<div id="vkBindImageMemory" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_VERSION_1_0
VkResult vkBindImageMemory(
    VkDevice                                    device,
    VkImage                                     image,
    VkDeviceMemory                              memory,
    VkDeviceSize                                memoryOffset);</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>device</code> is the logical device that owns the image and memory.</p>
</li>
<li>
<p><code>image</code> is the image.</p>
</li>
<li>
<p><code>memory</code> is the <a href="memory.html#VkDeviceMemory" class="xref page">VkDeviceMemory</a> object describing the device
memory to attach.</p>
</li>
<li>
<p><code>memoryOffset</code> is the start offset of the region of <code>memory</code>
which is to be bound to the image.
The number of bytes returned in the
<code>VkMemoryRequirements</code>::<code>size</code> member in <code>memory</code>, starting
from <code>memoryOffset</code> bytes, will be bound to the specified image.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><code>vkBindImageMemory</code> is equivalent to passing the same parameters through
<a href="#VkBindImageMemoryInfo">VkBindImageMemoryInfo</a> to <a href="#vkBindImageMemory2">vkBindImageMemory2</a>.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkBindImageMemory-image-07460" href="#VUID-vkBindImageMemory-image-07460"></a> <span class="vuid">VUID-vkBindImageMemory-image-07460</span><br>

<code>image</code> <strong>must</strong> not have been bound to a memory object</p>
</li>
<li>
<p><a id="VUID-vkBindImageMemory-image-01045" href="#VUID-vkBindImageMemory-image-01045"></a> <span class="vuid">VUID-vkBindImageMemory-image-01045</span><br>

<code>image</code> <strong>must</strong> not have been created with any sparse memory binding
flags</p>
</li>
<li>
<p><a id="VUID-vkBindImageMemory-memoryOffset-01046" href="#VUID-vkBindImageMemory-memoryOffset-01046"></a> <span class="vuid">VUID-vkBindImageMemory-memoryOffset-01046</span><br>

<code>memoryOffset</code> <strong>must</strong> be less than the size of <code>memory</code></p>
</li>
<li>
<p><a id="VUID-vkBindImageMemory-image-01445" href="#VUID-vkBindImageMemory-image-01445"></a> <span class="vuid">VUID-vkBindImageMemory-image-01445</span><br>

If <code>image</code> requires a dedicated allocation (as reported by
<a href="#vkGetImageMemoryRequirements2">vkGetImageMemoryRequirements2</a> in
<a href="#VkMemoryDedicatedRequirements">VkMemoryDedicatedRequirements</a>::<code>requiresDedicatedAllocation</code>
for <code>image</code>), <code>memory</code> <strong>must</strong> have been created with
<a href="memory.html#VkMemoryDedicatedAllocateInfo" class="xref page">VkMemoryDedicatedAllocateInfo</a>::<code>image</code> equal to <code>image</code></p>
</li>
<li>
<p><a id="VUID-vkBindImageMemory-memory-02628" href="#VUID-vkBindImageMemory-memory-02628"></a> <span class="vuid">VUID-vkBindImageMemory-memory-02628</span><br>

If
the <code>VkMemoryAllocateInfo</code> provided when <code>memory</code> was allocated
included a <a href="memory.html#VkMemoryDedicatedAllocateInfo" class="xref page">VkMemoryDedicatedAllocateInfo</a> structure in its
<code>pNext</code> chain, and <a href="memory.html#VkMemoryDedicatedAllocateInfo" class="xref page">VkMemoryDedicatedAllocateInfo</a>::<code>image</code>
was not <a href="../appendices/boilerplate.html#VK_NULL_HANDLE" class="xref page">VK_NULL_HANDLE</a>, then <code>image</code> <strong>must</strong> equal
<a href="memory.html#VkMemoryDedicatedAllocateInfo" class="xref page">VkMemoryDedicatedAllocateInfo</a>::<code>image</code> and <code>memoryOffset</code>
<strong>must</strong> be zero</p>
</li>
<li>
<p><a id="VUID-vkBindImageMemory-None-01901" href="#VUID-vkBindImageMemory-None-01901"></a> <span class="vuid">VUID-vkBindImageMemory-None-01901</span><br>

If image was created with the <code>VK_IMAGE_CREATE_PROTECTED_BIT</code> bit
set, the image <strong>must</strong> be bound to a memory object allocated with a memory
type that reports <code>VK_MEMORY_PROPERTY_PROTECTED_BIT</code></p>
</li>
<li>
<p><a id="VUID-vkBindImageMemory-None-01902" href="#VUID-vkBindImageMemory-None-01902"></a> <span class="vuid">VUID-vkBindImageMemory-None-01902</span><br>

If image was created with the <code>VK_IMAGE_CREATE_PROTECTED_BIT</code> bit
not set, the image <strong>must</strong> not be bound to a memory object created with a
memory type that reports <code>VK_MEMORY_PROPERTY_PROTECTED_BIT</code></p>
</li>
<li>
<p><a id="VUID-vkBindImageMemory-memory-02728" href="#VUID-vkBindImageMemory-memory-02728"></a> <span class="vuid">VUID-vkBindImageMemory-memory-02728</span><br>

If the value of <a href="memory.html#VkExportMemoryAllocateInfo" class="xref page">VkExportMemoryAllocateInfo</a>::<code>handleTypes</code> used
to allocate <code>memory</code> is not <code>0</code>, it <strong>must</strong> include at least one of
the handles set in
<a href="#VkExternalMemoryImageCreateInfo">VkExternalMemoryImageCreateInfo</a>::<code>handleTypes</code> when
<code>image</code> was created</p>
</li>
<li>
<p><a id="VUID-vkBindImageMemory-memory-02989" href="#VUID-vkBindImageMemory-memory-02989"></a> <span class="vuid">VUID-vkBindImageMemory-memory-02989</span><br>

If <code>memory</code> was created by a memory import operation,
the external handle type of the imported memory <strong>must</strong> also have been set
in <a href="#VkExternalMemoryImageCreateInfo">VkExternalMemoryImageCreateInfo</a>::<code>handleTypes</code> when
<code>image</code> was created</p>
</li>
<li>
<p><a id="VUID-vkBindImageMemory-image-01608" href="#VUID-vkBindImageMemory-image-01608"></a> <span class="vuid">VUID-vkBindImageMemory-image-01608</span><br>

<code>image</code> <strong>must</strong> not have been created with the
<code>VK_IMAGE_CREATE_DISJOINT_BIT</code> set</p>
</li>
<li>
<p><a id="VUID-vkBindImageMemory-memory-01047" href="#VUID-vkBindImageMemory-memory-01047"></a> <span class="vuid">VUID-vkBindImageMemory-memory-01047</span><br>

<code>memory</code> <strong>must</strong> have been allocated using one of the memory types
allowed in the <code>memoryTypeBits</code> member of the
<code>VkMemoryRequirements</code> structure returned from a call to
<a href="#vkGetImageMemoryRequirements">vkGetImageMemoryRequirements</a> with <code>image</code></p>
</li>
<li>
<p><a id="VUID-vkBindImageMemory-memoryOffset-01048" href="#VUID-vkBindImageMemory-memoryOffset-01048"></a> <span class="vuid">VUID-vkBindImageMemory-memoryOffset-01048</span><br>

<code>memoryOffset</code> <strong>must</strong> be an integer multiple of the <code>alignment</code>
member of the <code>VkMemoryRequirements</code> structure returned from a call
to <a href="#vkGetImageMemoryRequirements">vkGetImageMemoryRequirements</a> with <code>image</code></p>
</li>
<li>
<p><a id="VUID-vkBindImageMemory-size-01049" href="#VUID-vkBindImageMemory-size-01049"></a> <span class="vuid">VUID-vkBindImageMemory-size-01049</span><br>

The difference of the size of <code>memory</code> and <code>memoryOffset</code> <strong>must</strong>
be greater than or equal to the <code>size</code> member of the
<a href="#VkMemoryRequirements">VkMemoryRequirements</a> structure returned from a call to
<a href="#vkGetImageMemoryRequirements">vkGetImageMemoryRequirements</a> with the same <code>image</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkBindImageMemory-device-parameter" href="#VUID-vkBindImageMemory-device-parameter"></a> <span class="vuid">VUID-vkBindImageMemory-device-parameter</span><br>
 <code>device</code> <strong>must</strong> be a valid <a href="devsandqueues.html#VkDevice" class="xref page">VkDevice</a> handle</p>
</li>
<li>
<p><a id="VUID-vkBindImageMemory-image-parameter" href="#VUID-vkBindImageMemory-image-parameter"></a> <span class="vuid">VUID-vkBindImageMemory-image-parameter</span><br>
 <code>image</code> <strong>must</strong> be a valid <a href="#VkImage">VkImage</a> handle</p>
</li>
<li>
<p><a id="VUID-vkBindImageMemory-memory-parameter" href="#VUID-vkBindImageMemory-memory-parameter"></a> <span class="vuid">VUID-vkBindImageMemory-memory-parameter</span><br>
 <code>memory</code> <strong>must</strong> be a valid <a href="memory.html#VkDeviceMemory" class="xref page">VkDeviceMemory</a> handle</p>
</li>
<li>
<p><a id="VUID-vkBindImageMemory-image-parent" href="#VUID-vkBindImageMemory-image-parent"></a> <span class="vuid">VUID-vkBindImageMemory-image-parent</span><br>
 <code>image</code> <strong>must</strong> have been created, allocated, or retrieved from <code>device</code></p>
</li>
<li>
<p><a id="VUID-vkBindImageMemory-memory-parent" href="#VUID-vkBindImageMemory-memory-parent"></a> <span class="vuid">VUID-vkBindImageMemory-memory-parent</span><br>
 <code>memory</code> <strong>must</strong> have been created, allocated, or retrieved from <code>device</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Host Synchronization</div>
<div class="ulist">
<ul>
<li>
<p>Host access to <code>image</code> <strong>must</strong> be externally synchronized</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Return Codes</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><a href="fundamentals.html#fundamentals-successcodes" class="xref page">Success</a></dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><code>VK_SUCCESS</code></p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1"><a href="fundamentals.html#fundamentals-errorcodes" class="xref page">Failure</a></dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><code>VK_ERROR_OUT_OF_HOST_MEMORY</code></p>
</li>
<li>
<p><code>VK_ERROR_OUT_OF_DEVICE_MEMORY</code></p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>To attach memory to image objects for one or more images at a time, call:</p>
</div>
<div id="vkBindImageMemory2" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_VERSION_1_1
VkResult vkBindImageMemory2(
    VkDevice                                    device,
    uint32_t                                    bindInfoCount,
    const VkBindImageMemoryInfo*                pBindInfos);</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>device</code> is the logical device that owns the images and memory.</p>
</li>
<li>
<p><code>bindInfoCount</code> is the number of elements in <code>pBindInfos</code>.</p>
</li>
<li>
<p><code>pBindInfos</code> is a pointer to an array of <a href="#VkBindImageMemoryInfo">VkBindImageMemoryInfo</a>
structures, describing images and memory to bind.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>On some implementations, it <strong>may</strong> be more efficient to batch memory bindings
into a single command.</p>
</div>
<div class="paragraph">
<p>If any of the memory binding operations described by <code>pBindInfos</code> fail,
the <a href="fundamentals.html#VkResult" class="xref page">VkResult</a> returned by this command <strong>must</strong> be the return value of any
one of the memory binding operations which did not return <code>VK_SUCCESS</code>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>If the <code>vkBindImageMemory2</code> command failed,
and <code>bindInfoCount</code> was greater than one, then the images referenced by
<code>pBindInfos</code> will be in an indeterminate state, and must not be used.</p>
</div>
<div class="paragraph">
<p>Applications should destroy these images.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkBindImageMemory2-pBindInfos-02858" href="#VUID-vkBindImageMemory2-pBindInfos-02858"></a> <span class="vuid">VUID-vkBindImageMemory2-pBindInfos-02858</span><br>

If any <a href="#VkBindImageMemoryInfo">VkBindImageMemoryInfo</a>::<code>image</code> was created with
<code>VK_IMAGE_CREATE_DISJOINT_BIT</code> then all planes of
<a href="#VkBindImageMemoryInfo">VkBindImageMemoryInfo</a>::<code>image</code> <strong>must</strong> be bound individually in
separate <code>pBindInfos</code></p>
</li>
<li>
<p><a id="VUID-vkBindImageMemory2-pBindInfos-04006" href="#VUID-vkBindImageMemory2-pBindInfos-04006"></a> <span class="vuid">VUID-vkBindImageMemory2-pBindInfos-04006</span><br>

<code>pBindInfos</code> <strong>must</strong> not refer to the same image subresource more than
once</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkBindImageMemory2-device-parameter" href="#VUID-vkBindImageMemory2-device-parameter"></a> <span class="vuid">VUID-vkBindImageMemory2-device-parameter</span><br>
 <code>device</code> <strong>must</strong> be a valid <a href="devsandqueues.html#VkDevice" class="xref page">VkDevice</a> handle</p>
</li>
<li>
<p><a id="VUID-vkBindImageMemory2-pBindInfos-parameter" href="#VUID-vkBindImageMemory2-pBindInfos-parameter"></a> <span class="vuid">VUID-vkBindImageMemory2-pBindInfos-parameter</span><br>
 <code>pBindInfos</code> <strong>must</strong> be a valid pointer to an array of <code>bindInfoCount</code> valid <a href="#VkBindImageMemoryInfo">VkBindImageMemoryInfo</a> structures</p>
</li>
<li>
<p><a id="VUID-vkBindImageMemory2-bindInfoCount-arraylength" href="#VUID-vkBindImageMemory2-bindInfoCount-arraylength"></a> <span class="vuid">VUID-vkBindImageMemory2-bindInfoCount-arraylength</span><br>
 <code>bindInfoCount</code> <strong>must</strong> be greater than <code>0</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Return Codes</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><a href="fundamentals.html#fundamentals-successcodes" class="xref page">Success</a></dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><code>VK_SUCCESS</code></p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1"><a href="fundamentals.html#fundamentals-errorcodes" class="xref page">Failure</a></dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><code>VK_ERROR_OUT_OF_HOST_MEMORY</code></p>
</li>
<li>
<p><code>VK_ERROR_OUT_OF_DEVICE_MEMORY</code></p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p><code>VkBindImageMemoryInfo</code> contains members corresponding to the parameters
of <a href="#vkBindImageMemory">vkBindImageMemory</a>.</p>
</div>
<div class="paragraph">
<p>The <code>VkBindImageMemoryInfo</code> structure is defined as:</p>
</div>
<div id="VkBindImageMemoryInfo" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_VERSION_1_1
typedef struct VkBindImageMemoryInfo {
    VkStructureType    sType;
    const void*        pNext;
    VkImage            image;
    VkDeviceMemory     memory;
    VkDeviceSize       memoryOffset;
} VkBindImageMemoryInfo;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is a <a href="fundamentals.html#VkStructureType" class="xref page">VkStructureType</a> value identifying this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>image</code> is the image to be attached to memory.</p>
</li>
<li>
<p><code>memory</code> is a <a href="memory.html#VkDeviceMemory" class="xref page">VkDeviceMemory</a> object describing the device
memory to attach.</p>
</li>
<li>
<p><code>memoryOffset</code> is the start offset of the region of <code>memory</code>
which is to be bound to the image.
The number of bytes returned in the
<code>VkMemoryRequirements</code>::<code>size</code> member in <code>memory</code>, starting
from <code>memoryOffset</code> bytes, will be bound to the specified image.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkBindImageMemoryInfo-image-07460" href="#VUID-VkBindImageMemoryInfo-image-07460"></a> <span class="vuid">VUID-VkBindImageMemoryInfo-image-07460</span><br>

<code>image</code> <strong>must</strong> not have been bound to a memory object</p>
</li>
<li>
<p><a id="VUID-VkBindImageMemoryInfo-image-01045" href="#VUID-VkBindImageMemoryInfo-image-01045"></a> <span class="vuid">VUID-VkBindImageMemoryInfo-image-01045</span><br>

<code>image</code> <strong>must</strong> not have been created with any sparse memory binding
flags</p>
</li>
<li>
<p><a id="VUID-VkBindImageMemoryInfo-memoryOffset-01046" href="#VUID-VkBindImageMemoryInfo-memoryOffset-01046"></a> <span class="vuid">VUID-VkBindImageMemoryInfo-memoryOffset-01046</span><br>

<code>memoryOffset</code> <strong>must</strong> be less than the size of <code>memory</code></p>
</li>
<li>
<p><a id="VUID-VkBindImageMemoryInfo-image-01445" href="#VUID-VkBindImageMemoryInfo-image-01445"></a> <span class="vuid">VUID-VkBindImageMemoryInfo-image-01445</span><br>

If <code>image</code> requires a dedicated allocation (as reported by
<a href="#vkGetImageMemoryRequirements2">vkGetImageMemoryRequirements2</a> in
<a href="#VkMemoryDedicatedRequirements">VkMemoryDedicatedRequirements</a>::<code>requiresDedicatedAllocation</code>
for <code>image</code>), <code>memory</code> <strong>must</strong> have been created with
<a href="memory.html#VkMemoryDedicatedAllocateInfo" class="xref page">VkMemoryDedicatedAllocateInfo</a>::<code>image</code> equal to <code>image</code></p>
</li>
<li>
<p><a id="VUID-VkBindImageMemoryInfo-memory-02628" href="#VUID-VkBindImageMemoryInfo-memory-02628"></a> <span class="vuid">VUID-VkBindImageMemoryInfo-memory-02628</span><br>

If
the <code>VkMemoryAllocateInfo</code> provided when <code>memory</code> was allocated
included a <a href="memory.html#VkMemoryDedicatedAllocateInfo" class="xref page">VkMemoryDedicatedAllocateInfo</a> structure in its
<code>pNext</code> chain, and <a href="memory.html#VkMemoryDedicatedAllocateInfo" class="xref page">VkMemoryDedicatedAllocateInfo</a>::<code>image</code>
was not <a href="../appendices/boilerplate.html#VK_NULL_HANDLE" class="xref page">VK_NULL_HANDLE</a>, then <code>image</code> <strong>must</strong> equal
<a href="memory.html#VkMemoryDedicatedAllocateInfo" class="xref page">VkMemoryDedicatedAllocateInfo</a>::<code>image</code> and <code>memoryOffset</code>
<strong>must</strong> be zero</p>
</li>
<li>
<p><a id="VUID-VkBindImageMemoryInfo-None-01901" href="#VUID-VkBindImageMemoryInfo-None-01901"></a> <span class="vuid">VUID-VkBindImageMemoryInfo-None-01901</span><br>

If image was created with the <code>VK_IMAGE_CREATE_PROTECTED_BIT</code> bit
set, the image <strong>must</strong> be bound to a memory object allocated with a memory
type that reports <code>VK_MEMORY_PROPERTY_PROTECTED_BIT</code></p>
</li>
<li>
<p><a id="VUID-VkBindImageMemoryInfo-None-01902" href="#VUID-VkBindImageMemoryInfo-None-01902"></a> <span class="vuid">VUID-VkBindImageMemoryInfo-None-01902</span><br>

If image was created with the <code>VK_IMAGE_CREATE_PROTECTED_BIT</code> bit
not set, the image <strong>must</strong> not be bound to a memory object created with a
memory type that reports <code>VK_MEMORY_PROPERTY_PROTECTED_BIT</code></p>
</li>
<li>
<p><a id="VUID-VkBindImageMemoryInfo-memory-02728" href="#VUID-VkBindImageMemoryInfo-memory-02728"></a> <span class="vuid">VUID-VkBindImageMemoryInfo-memory-02728</span><br>

If the value of <a href="memory.html#VkExportMemoryAllocateInfo" class="xref page">VkExportMemoryAllocateInfo</a>::<code>handleTypes</code> used
to allocate <code>memory</code> is not <code>0</code>, it <strong>must</strong> include at least one of
the handles set in
<a href="#VkExternalMemoryImageCreateInfo">VkExternalMemoryImageCreateInfo</a>::<code>handleTypes</code> when
<code>image</code> was created</p>
</li>
<li>
<p><a id="VUID-VkBindImageMemoryInfo-memory-02989" href="#VUID-VkBindImageMemoryInfo-memory-02989"></a> <span class="vuid">VUID-VkBindImageMemoryInfo-memory-02989</span><br>

If <code>memory</code> was created by a memory import operation,
the external handle type of the imported memory <strong>must</strong> also have been set
in <a href="#VkExternalMemoryImageCreateInfo">VkExternalMemoryImageCreateInfo</a>::<code>handleTypes</code> when
<code>image</code> was created</p>
</li>
<li>
<p><a id="VUID-VkBindImageMemoryInfo-pNext-01615" href="#VUID-VkBindImageMemoryInfo-pNext-01615"></a> <span class="vuid">VUID-VkBindImageMemoryInfo-pNext-01615</span><br>

If the <code>pNext</code> chain does not include a
<a href="#VkBindImagePlaneMemoryInfo">VkBindImagePlaneMemoryInfo</a> structure, <code>memory</code> <strong>must</strong> have been
allocated using one of the memory types allowed in the
<code>memoryTypeBits</code> member of the <a href="#VkMemoryRequirements">VkMemoryRequirements</a> structure
returned from a call to <a href="#vkGetImageMemoryRequirements2">vkGetImageMemoryRequirements2</a> with
<code>image</code></p>
</li>
<li>
<p><a id="VUID-VkBindImageMemoryInfo-pNext-01616" href="#VUID-VkBindImageMemoryInfo-pNext-01616"></a> <span class="vuid">VUID-VkBindImageMemoryInfo-pNext-01616</span><br>

If the <code>pNext</code> chain does not include a
<a href="#VkBindImagePlaneMemoryInfo">VkBindImagePlaneMemoryInfo</a> structure, <code>memoryOffset</code> <strong>must</strong> be
an integer multiple of the <code>alignment</code> member of the
<a href="#VkMemoryRequirements">VkMemoryRequirements</a> structure returned from a call to
<a href="#vkGetImageMemoryRequirements2">vkGetImageMemoryRequirements2</a> with <code>image</code></p>
</li>
<li>
<p><a id="VUID-VkBindImageMemoryInfo-pNext-01617" href="#VUID-VkBindImageMemoryInfo-pNext-01617"></a> <span class="vuid">VUID-VkBindImageMemoryInfo-pNext-01617</span><br>

If the <code>pNext</code> chain does not include a
<a href="#VkBindImagePlaneMemoryInfo">VkBindImagePlaneMemoryInfo</a> structure, the difference of the size
of <code>memory</code> and <code>memoryOffset</code> <strong>must</strong> be greater than or equal to
the <code>size</code> member of the <a href="#VkMemoryRequirements">VkMemoryRequirements</a> structure
returned from a call to <a href="#vkGetImageMemoryRequirements2">vkGetImageMemoryRequirements2</a> with the
same <code>image</code></p>
</li>
<li>
<p><a id="VUID-VkBindImageMemoryInfo-pNext-01618" href="#VUID-VkBindImageMemoryInfo-pNext-01618"></a> <span class="vuid">VUID-VkBindImageMemoryInfo-pNext-01618</span><br>

If the <code>pNext</code> chain includes a <a href="#VkBindImagePlaneMemoryInfo">VkBindImagePlaneMemoryInfo</a>
structure, <code>image</code> <strong>must</strong> have been created with the
<code>VK_IMAGE_CREATE_DISJOINT_BIT</code> bit set</p>
</li>
<li>
<p><a id="VUID-VkBindImageMemoryInfo-image-07736" href="#VUID-VkBindImageMemoryInfo-image-07736"></a> <span class="vuid">VUID-VkBindImageMemoryInfo-image-07736</span><br>

If <code>image</code> was created with the <code>VK_IMAGE_CREATE_DISJOINT_BIT</code>
bit set, then the <code>pNext</code> chain <strong>must</strong> include a
<a href="#VkBindImagePlaneMemoryInfo">VkBindImagePlaneMemoryInfo</a> structure</p>
</li>
<li>
<p><a id="VUID-VkBindImageMemoryInfo-pNext-01619" href="#VUID-VkBindImageMemoryInfo-pNext-01619"></a> <span class="vuid">VUID-VkBindImageMemoryInfo-pNext-01619</span><br>

If the <code>pNext</code> chain includes a <a href="#VkBindImagePlaneMemoryInfo">VkBindImagePlaneMemoryInfo</a>
structure, <code>memory</code> <strong>must</strong> have been allocated using one of the
memory types allowed in the <code>memoryTypeBits</code> member of the
<a href="#VkMemoryRequirements">VkMemoryRequirements</a> structure returned from a call to
<a href="#vkGetImageMemoryRequirements2">vkGetImageMemoryRequirements2</a> with <code>image</code> and where
<a href="#VkBindImagePlaneMemoryInfo">VkBindImagePlaneMemoryInfo</a>::<code>planeAspect</code> corresponds to the
<a href="#VkImagePlaneMemoryRequirementsInfo">VkImagePlaneMemoryRequirementsInfo</a>::<code>planeAspect</code> in the
<a href="#VkImageMemoryRequirementsInfo2">VkImageMemoryRequirementsInfo2</a> structure&#8217;s <code>pNext</code> chain</p>
</li>
<li>
<p><a id="VUID-VkBindImageMemoryInfo-pNext-01620" href="#VUID-VkBindImageMemoryInfo-pNext-01620"></a> <span class="vuid">VUID-VkBindImageMemoryInfo-pNext-01620</span><br>

If the <code>pNext</code> chain includes a <a href="#VkBindImagePlaneMemoryInfo">VkBindImagePlaneMemoryInfo</a>
structure, <code>memoryOffset</code> <strong>must</strong> be an integer multiple of the
<code>alignment</code> member of the <a href="#VkMemoryRequirements">VkMemoryRequirements</a> structure
returned from a call to <a href="#vkGetImageMemoryRequirements2">vkGetImageMemoryRequirements2</a> with
<code>image</code> and where
<a href="#VkBindImagePlaneMemoryInfo">VkBindImagePlaneMemoryInfo</a>::<code>planeAspect</code> corresponds to the
<a href="#VkImagePlaneMemoryRequirementsInfo">VkImagePlaneMemoryRequirementsInfo</a>::<code>planeAspect</code> in the
<a href="#VkImageMemoryRequirementsInfo2">VkImageMemoryRequirementsInfo2</a> structure&#8217;s <code>pNext</code> chain</p>
</li>
<li>
<p><a id="VUID-VkBindImageMemoryInfo-pNext-01621" href="#VUID-VkBindImageMemoryInfo-pNext-01621"></a> <span class="vuid">VUID-VkBindImageMemoryInfo-pNext-01621</span><br>

If the <code>pNext</code> chain includes a <a href="#VkBindImagePlaneMemoryInfo">VkBindImagePlaneMemoryInfo</a>
structure, the difference of the size of <code>memory</code> and
<code>memoryOffset</code> <strong>must</strong> be greater than or equal to the <code>size</code>
member of the <a href="#VkMemoryRequirements">VkMemoryRequirements</a> structure returned from a call
to <a href="#vkGetImageMemoryRequirements2">vkGetImageMemoryRequirements2</a> with the same <code>image</code> and
where <a href="#VkBindImagePlaneMemoryInfo">VkBindImagePlaneMemoryInfo</a>::<code>planeAspect</code> corresponds to
the <a href="#VkImagePlaneMemoryRequirementsInfo">VkImagePlaneMemoryRequirementsInfo</a>::<code>planeAspect</code> in the
<a href="#VkImageMemoryRequirementsInfo2">VkImageMemoryRequirementsInfo2</a> structure&#8217;s <code>pNext</code> chain</p>
</li>
<li>
<p><a id="VUID-VkBindImageMemoryInfo-memory-01625" href="#VUID-VkBindImageMemoryInfo-memory-01625"></a> <span class="vuid">VUID-VkBindImageMemoryInfo-memory-01625</span><br>

<code>memory</code> <strong>must</strong> be a valid <a href="memory.html#VkDeviceMemory" class="xref page">VkDeviceMemory</a> handle</p>
</li>
<li>
<p><a id="VUID-VkBindImageMemoryInfo-pNext-01626" href="#VUID-VkBindImageMemoryInfo-pNext-01626"></a> <span class="vuid">VUID-VkBindImageMemoryInfo-pNext-01626</span><br>

If the <code>pNext</code> chain includes a
<a href="#VkBindImageMemoryDeviceGroupInfo">VkBindImageMemoryDeviceGroupInfo</a> structure, all instances of
<code>memory</code> specified by
<a href="#VkBindImageMemoryDeviceGroupInfo">VkBindImageMemoryDeviceGroupInfo</a>::<code>pDeviceIndices</code> <strong>must</strong> have
been allocated</p>
</li>
<li>
<p><a id="VUID-VkBindImageMemoryInfo-pNext-01627" href="#VUID-VkBindImageMemoryInfo-pNext-01627"></a> <span class="vuid">VUID-VkBindImageMemoryInfo-pNext-01627</span><br>

If the <code>pNext</code> chain includes a
<a href="#VkBindImageMemoryDeviceGroupInfo">VkBindImageMemoryDeviceGroupInfo</a> structure, and
<a href="#VkBindImageMemoryDeviceGroupInfo">VkBindImageMemoryDeviceGroupInfo</a>::<code>splitInstanceBindRegionCount</code>
is not zero, then <code>image</code> <strong>must</strong> have been created with the
<code>VK_IMAGE_CREATE_SPLIT_INSTANCE_BIND_REGIONS_BIT</code> bit set</p>
</li>
<li>
<p><a id="VUID-VkBindImageMemoryInfo-pNext-01628" href="#VUID-VkBindImageMemoryInfo-pNext-01628"></a> <span class="vuid">VUID-VkBindImageMemoryInfo-pNext-01628</span><br>

If the <code>pNext</code> chain includes a
<a href="#VkBindImageMemoryDeviceGroupInfo">VkBindImageMemoryDeviceGroupInfo</a> structure, all elements of
<a href="#VkBindImageMemoryDeviceGroupInfo">VkBindImageMemoryDeviceGroupInfo</a>::<code>pSplitInstanceBindRegions</code>
<strong>must</strong> be valid rectangles contained within the dimensions of <code>image</code></p>
</li>
<li>
<p><a id="VUID-VkBindImageMemoryInfo-pNext-01629" href="#VUID-VkBindImageMemoryInfo-pNext-01629"></a> <span class="vuid">VUID-VkBindImageMemoryInfo-pNext-01629</span><br>

If the <code>pNext</code> chain includes a
<a href="#VkBindImageMemoryDeviceGroupInfo">VkBindImageMemoryDeviceGroupInfo</a> structure, the union of the areas
of all elements of
<a href="#VkBindImageMemoryDeviceGroupInfo">VkBindImageMemoryDeviceGroupInfo</a>::<code>pSplitInstanceBindRegions</code>
that correspond to the same instance of <code>image</code> <strong>must</strong> cover the
entire image</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkBindImageMemoryInfo-sType-sType" href="#VUID-VkBindImageMemoryInfo-sType-sType"></a> <span class="vuid">VUID-VkBindImageMemoryInfo-sType-sType</span><br>
 <code>sType</code> <strong>must</strong> be <code>VK_STRUCTURE_TYPE_BIND_IMAGE_MEMORY_INFO</code></p>
</li>
<li>
<p><a id="VUID-VkBindImageMemoryInfo-pNext-pNext" href="#VUID-VkBindImageMemoryInfo-pNext-pNext"></a> <span class="vuid">VUID-VkBindImageMemoryInfo-pNext-pNext</span><br>
 Each <code>pNext</code> member of any structure (including this one) in the <code>pNext</code> chain <strong>must</strong> be either <code>NULL</code> or a pointer to a valid instance of <a href="#VkBindImageMemoryDeviceGroupInfo">VkBindImageMemoryDeviceGroupInfo</a> or <a href="#VkBindImagePlaneMemoryInfo">VkBindImagePlaneMemoryInfo</a></p>
</li>
<li>
<p><a id="VUID-VkBindImageMemoryInfo-sType-unique" href="#VUID-VkBindImageMemoryInfo-sType-unique"></a> <span class="vuid">VUID-VkBindImageMemoryInfo-sType-unique</span><br>
 The <code>sType</code> value of each struct in the <code>pNext</code> chain <strong>must</strong> be unique</p>
</li>
<li>
<p><a id="VUID-VkBindImageMemoryInfo-image-parameter" href="#VUID-VkBindImageMemoryInfo-image-parameter"></a> <span class="vuid">VUID-VkBindImageMemoryInfo-image-parameter</span><br>
 <code>image</code> <strong>must</strong> be a valid <a href="#VkImage">VkImage</a> handle</p>
</li>
<li>
<p><a id="VUID-VkBindImageMemoryInfo-commonparent" href="#VUID-VkBindImageMemoryInfo-commonparent"></a> <span class="vuid">VUID-VkBindImageMemoryInfo-commonparent</span><br>
 Both of <code>image</code>, and <code>memory</code> that are valid handles of non-ignored parameters <strong>must</strong> have been created, allocated, or retrieved from the same <a href="devsandqueues.html#VkDevice" class="xref page">VkDevice</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>VkBindImageMemoryDeviceGroupInfo</code> structure is defined as:</p>
</div>
<div id="VkBindImageMemoryDeviceGroupInfo" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_VERSION_1_1
typedef struct VkBindImageMemoryDeviceGroupInfo {
    VkStructureType    sType;
    const void*        pNext;
    uint32_t           deviceIndexCount;
    const uint32_t*    pDeviceIndices;
    uint32_t           splitInstanceBindRegionCount;
    const VkRect2D*    pSplitInstanceBindRegions;
} VkBindImageMemoryDeviceGroupInfo;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is a <a href="fundamentals.html#VkStructureType" class="xref page">VkStructureType</a> value identifying this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>deviceIndexCount</code> is the number of elements in
<code>pDeviceIndices</code>.</p>
</li>
<li>
<p><code>pDeviceIndices</code> is a pointer to an array of device indices.</p>
</li>
<li>
<p><code>splitInstanceBindRegionCount</code> is the number of elements in
<code>pSplitInstanceBindRegions</code>.</p>
</li>
<li>
<p><code>pSplitInstanceBindRegions</code> is a pointer to an array of
<a href="fundamentals.html#VkRect2D" class="xref page">VkRect2D</a> structures describing which regions of the image are
attached to each instance of memory.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>If the <code>pNext</code> chain of <a href="#VkBindImageMemoryInfo">VkBindImageMemoryInfo</a> includes a
<code>VkBindImageMemoryDeviceGroupInfo</code> structure, then that structure
determines how memory is bound to images across multiple devices in a device
group.</p>
</div>
<div class="paragraph">
<p>If <code>deviceIndexCount</code> is greater than zero, then on device index <span class="eq">i</span>
<code>image</code> is attached to the instance of the memory on the physical device
with device index <span class="eq"><code>pDeviceIndices</code>[i]</span>.</p>
</div>
<div class="paragraph">
<p>Let <span class="eq">N</span> be the number of physical devices in the logical device.
If <code>splitInstanceBindRegionCount</code> is greater than zero, then
<code>pSplitInstanceBindRegions</code> is a pointer to an array of <span class="eq">N<sup>2</sup></span>
rectangles, where the image region specified by the rectangle at element
<span class="eq">i*N+j</span> in resource instance <span class="eq">i</span> is bound to the memory instance
<span class="eq">j</span>.
The blocks of the memory that are bound to each sparse image block region
use an offset in memory, relative to <code>memoryOffset</code>, computed as if the
whole image was being bound to a contiguous range of memory.
In other words, horizontally adjacent image blocks use consecutive blocks of
memory, vertically adjacent image blocks are separated by the number of
bytes per block multiplied by the width in blocks of <code>image</code>, and the
block at <span class="eq">(0,0)</span> corresponds to memory starting at <code>memoryOffset</code>.</p>
</div>
<div class="paragraph">
<p>If <code>splitInstanceBindRegionCount</code> and <code>deviceIndexCount</code> are zero
and the memory comes from a memory heap with the
<code>VK_MEMORY_HEAP_MULTI_INSTANCE_BIT</code> bit set, then it is as if
<code>pDeviceIndices</code> contains consecutive indices from zero to the number of
physical devices in the logical device, minus one.
In other words, by default each physical device attaches to its own instance
of the memory.</p>
</div>
<div class="paragraph">
<p>If <code>splitInstanceBindRegionCount</code> and <code>deviceIndexCount</code> are zero
and the memory comes from a memory heap without the
<code>VK_MEMORY_HEAP_MULTI_INSTANCE_BIT</code> bit set, then it is as if
<code>pDeviceIndices</code> contains an array of zeros.
In other words, by default each physical device attaches to instance zero.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkBindImageMemoryDeviceGroupInfo-deviceIndexCount-01633" href="#VUID-VkBindImageMemoryDeviceGroupInfo-deviceIndexCount-01633"></a> <span class="vuid">VUID-VkBindImageMemoryDeviceGroupInfo-deviceIndexCount-01633</span><br>

At least one of <code>deviceIndexCount</code> and
<code>splitInstanceBindRegionCount</code> <strong>must</strong> be zero</p>
</li>
<li>
<p><a id="VUID-VkBindImageMemoryDeviceGroupInfo-deviceIndexCount-01634" href="#VUID-VkBindImageMemoryDeviceGroupInfo-deviceIndexCount-01634"></a> <span class="vuid">VUID-VkBindImageMemoryDeviceGroupInfo-deviceIndexCount-01634</span><br>

<code>deviceIndexCount</code> <strong>must</strong> either be zero or equal to the number of
physical devices in the logical device</p>
</li>
<li>
<p><a id="VUID-VkBindImageMemoryDeviceGroupInfo-pDeviceIndices-01635" href="#VUID-VkBindImageMemoryDeviceGroupInfo-pDeviceIndices-01635"></a> <span class="vuid">VUID-VkBindImageMemoryDeviceGroupInfo-pDeviceIndices-01635</span><br>

All elements of <code>pDeviceIndices</code> <strong>must</strong> be valid device indices</p>
</li>
<li>
<p><a id="VUID-VkBindImageMemoryDeviceGroupInfo-splitInstanceBindRegionCount-01636" href="#VUID-VkBindImageMemoryDeviceGroupInfo-splitInstanceBindRegionCount-01636"></a> <span class="vuid">VUID-VkBindImageMemoryDeviceGroupInfo-splitInstanceBindRegionCount-01636</span><br>

<code>splitInstanceBindRegionCount</code> <strong>must</strong> either be zero or equal to the
number of physical devices in the logical device squared</p>
</li>
<li>
<p><a id="VUID-VkBindImageMemoryDeviceGroupInfo-pSplitInstanceBindRegions-01637" href="#VUID-VkBindImageMemoryDeviceGroupInfo-pSplitInstanceBindRegions-01637"></a> <span class="vuid">VUID-VkBindImageMemoryDeviceGroupInfo-pSplitInstanceBindRegions-01637</span><br>

Elements of <code>pSplitInstanceBindRegions</code> that correspond to the same
instance of an image <strong>must</strong> not overlap</p>
</li>
<li>
<p><a id="VUID-VkBindImageMemoryDeviceGroupInfo-offset-01638" href="#VUID-VkBindImageMemoryDeviceGroupInfo-offset-01638"></a> <span class="vuid">VUID-VkBindImageMemoryDeviceGroupInfo-offset-01638</span><br>

The <code>offset.x</code> member of any element of
<code>pSplitInstanceBindRegions</code> <strong>must</strong> be a multiple of the sparse image
block width
(<code>VkSparseImageFormatProperties</code>::<code>imageGranularity.width</code>) of
all non-metadata aspects of the image</p>
</li>
<li>
<p><a id="VUID-VkBindImageMemoryDeviceGroupInfo-offset-01639" href="#VUID-VkBindImageMemoryDeviceGroupInfo-offset-01639"></a> <span class="vuid">VUID-VkBindImageMemoryDeviceGroupInfo-offset-01639</span><br>

The <code>offset.y</code> member of any element of
<code>pSplitInstanceBindRegions</code> <strong>must</strong> be a multiple of the sparse image
block height
(<code>VkSparseImageFormatProperties</code>::<code>imageGranularity.height</code>) of
all non-metadata aspects of the image</p>
</li>
<li>
<p><a id="VUID-VkBindImageMemoryDeviceGroupInfo-extent-01640" href="#VUID-VkBindImageMemoryDeviceGroupInfo-extent-01640"></a> <span class="vuid">VUID-VkBindImageMemoryDeviceGroupInfo-extent-01640</span><br>

The <code>extent.width</code> member of any element of
<code>pSplitInstanceBindRegions</code> <strong>must</strong> either be a multiple of the sparse
image block width of all non-metadata aspects of the image, or else
<code>extent.width</code> +  <code>offset.x</code> <strong>must</strong> equal the width of the
image subresource</p>
</li>
<li>
<p><a id="VUID-VkBindImageMemoryDeviceGroupInfo-extent-01641" href="#VUID-VkBindImageMemoryDeviceGroupInfo-extent-01641"></a> <span class="vuid">VUID-VkBindImageMemoryDeviceGroupInfo-extent-01641</span><br>

The <code>extent.height</code> member of any element of
<code>pSplitInstanceBindRegions</code> <strong>must</strong> either be a multiple of the sparse
image block height of all non-metadata aspects of the image, or else
<code>extent.height</code> +  <code>offset.y</code> <strong>must</strong> equal the height of the
image subresource</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkBindImageMemoryDeviceGroupInfo-sType-sType" href="#VUID-VkBindImageMemoryDeviceGroupInfo-sType-sType"></a> <span class="vuid">VUID-VkBindImageMemoryDeviceGroupInfo-sType-sType</span><br>
 <code>sType</code> <strong>must</strong> be <code>VK_STRUCTURE_TYPE_BIND_IMAGE_MEMORY_DEVICE_GROUP_INFO</code></p>
</li>
<li>
<p><a id="VUID-VkBindImageMemoryDeviceGroupInfo-pDeviceIndices-parameter" href="#VUID-VkBindImageMemoryDeviceGroupInfo-pDeviceIndices-parameter"></a> <span class="vuid">VUID-VkBindImageMemoryDeviceGroupInfo-pDeviceIndices-parameter</span><br>
 If <code>deviceIndexCount</code> is not <code>0</code>, <code>pDeviceIndices</code> <strong>must</strong> be a valid pointer to an array of <code>deviceIndexCount</code> <code>uint32_t</code> values</p>
</li>
<li>
<p><a id="VUID-VkBindImageMemoryDeviceGroupInfo-pSplitInstanceBindRegions-parameter" href="#VUID-VkBindImageMemoryDeviceGroupInfo-pSplitInstanceBindRegions-parameter"></a> <span class="vuid">VUID-VkBindImageMemoryDeviceGroupInfo-pSplitInstanceBindRegions-parameter</span><br>
 If <code>splitInstanceBindRegionCount</code> is not <code>0</code>, <code>pSplitInstanceBindRegions</code> <strong>must</strong> be a valid pointer to an array of <code>splitInstanceBindRegionCount</code> <a href="fundamentals.html#VkRect2D" class="xref page">VkRect2D</a> structures</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>In order to bind <em>planes</em> of a <em>disjoint image</em>, add a
<code>VkBindImagePlaneMemoryInfo</code> structure to the <code>pNext</code> chain of
<a href="#VkBindImageMemoryInfo">VkBindImageMemoryInfo</a>.</p>
</div>
<div class="paragraph">
<p>The <code>VkBindImagePlaneMemoryInfo</code> structure is defined as:</p>
</div>
<div id="VkBindImagePlaneMemoryInfo" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_VERSION_1_1
typedef struct VkBindImagePlaneMemoryInfo {
    VkStructureType          sType;
    const void*              pNext;
    VkImageAspectFlagBits    planeAspect;
} VkBindImagePlaneMemoryInfo;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is a <a href="fundamentals.html#VkStructureType" class="xref page">VkStructureType</a> value identifying this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>planeAspect</code> is a <code>VkImageAspectFlagBits</code> value specifying the
aspect of the disjoint image plane to bind.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkBindImagePlaneMemoryInfo-planeAspect-02283" href="#VUID-VkBindImagePlaneMemoryInfo-planeAspect-02283"></a> <span class="vuid">VUID-VkBindImagePlaneMemoryInfo-planeAspect-02283</span><br>

If the image&#8217;s <code>tiling</code> is <code>VK_IMAGE_TILING_LINEAR</code> or
<code>VK_IMAGE_TILING_OPTIMAL</code>, then <code>planeAspect</code> <strong>must</strong> be a single
valid <a href="formats.html#formats-planes-image-aspect" class="xref page">multi-planar aspect mask</a> bit</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkBindImagePlaneMemoryInfo-sType-sType" href="#VUID-VkBindImagePlaneMemoryInfo-sType-sType"></a> <span class="vuid">VUID-VkBindImagePlaneMemoryInfo-sType-sType</span><br>
 <code>sType</code> <strong>must</strong> be <code>VK_STRUCTURE_TYPE_BIND_IMAGE_PLANE_MEMORY_INFO</code></p>
</li>
<li>
<p><a id="VUID-VkBindImagePlaneMemoryInfo-planeAspect-parameter" href="#VUID-VkBindImagePlaneMemoryInfo-planeAspect-parameter"></a> <span class="vuid">VUID-VkBindImagePlaneMemoryInfo-planeAspect-parameter</span><br>
 <code>planeAspect</code> <strong>must</strong> be a valid <a href="#VkImageAspectFlagBits">VkImageAspectFlagBits</a> value</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div id="resources-bufferimagegranularity" class="paragraph">
<div class="title">Buffer-Image Granularity</div>
<p>The implementation-dependent limit <a href="limits.html#limits-bufferImageGranularity" class="xref page"><code>bufferImageGranularity</code></a> specifies a page-like granularity at which
linear and non-linear resources <strong>must</strong> be placed in adjacent memory locations
to avoid aliasing.
Two resources which do not satisfy this granularity requirement are said to
<a href="#resources-memory-aliasing">alias</a>.
<code>bufferImageGranularity</code> is specified in bytes, and <strong>must</strong> be a power of
two.
Implementations which do not impose a granularity restriction <strong>may</strong> report a
<code>bufferImageGranularity</code> value of one.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Despite its name, <code>bufferImageGranularity</code> is really a granularity
between &#8220;linear&#8221; and &#8220;non-linear&#8221; resources.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Given resourceA at the lower memory offset and resourceB at the higher
memory offset in the same <code>VkDeviceMemory</code> object, where one resource is
linear and the other is non-linear (as defined in the
<a href="../appendices/glossary.html#glossary-linear-resource" class="xref page">Glossary</a>), and the following:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c hljs" data-lang="c">resourceA.end       = resourceA.memoryOffset + resourceA.size - 1
resourceA.endPage   = resourceA.end &amp; ~(bufferImageGranularity-1)
resourceB.start     = resourceB.memoryOffset
resourceB.startPage = resourceB.start &amp; ~(bufferImageGranularity-1)</code></pre>
</div>
</div>
<div class="paragraph">
<p>The following property <strong>must</strong> hold:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c hljs" data-lang="c">resourceA.endPage &lt; resourceB.startPage</code></pre>
</div>
</div>
<div class="paragraph">
<p>That is, the end of the first resource (A) and the beginning of the second
resource (B) <strong>must</strong> be on separate &#8220;pages&#8221; of size
<code>bufferImageGranularity</code>.
<code>bufferImageGranularity</code> <strong>may</strong> be different than the physical page size
of the memory heap.
This restriction is only needed when a linear resource and a non-linear
resource are adjacent in memory and will be used simultaneously.
The memory ranges of adjacent resources <strong>can</strong> be closer than
<code>bufferImageGranularity</code>, provided they meet the <code>alignment</code>
requirement for the objects in question.</p>
</div>
<div class="paragraph">
<p>Sparse block size in bytes and sparse image and buffer memory alignments
<strong>must</strong> all be multiples of the <code>bufferImageGranularity</code>.
Therefore, memory bound to sparse resources naturally satisfies the
<code>bufferImageGranularity</code>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="resources-sharing"><a class="anchor" href="#resources-sharing"></a>Resource Sharing Mode</h2>
<div class="sectionbody">
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Buffer and image objects are created with a <em>sharing mode</em> controlling how
they <strong>can</strong> be accessed from queues.
The supported sharing modes are:</p>
</div>
<div id="VkSharingMode" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_VERSION_1_0
typedef enum VkSharingMode {
    VK_SHARING_MODE_EXCLUSIVE = 0,
    VK_SHARING_MODE_CONCURRENT = 1,
} VkSharingMode;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>VK_SHARING_MODE_EXCLUSIVE</code> specifies that access to any range or
image subresource of the object will be exclusive to a single queue
family at a time.</p>
</li>
<li>
<p><code>VK_SHARING_MODE_CONCURRENT</code> specifies that concurrent access to any
range or image subresource of the object from multiple queue families is
supported.</p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p><code>VK_SHARING_MODE_CONCURRENT</code> <strong>may</strong> result in lower performance access to
the buffer or image than <code>VK_SHARING_MODE_EXCLUSIVE</code>.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Ranges of buffers and image subresources of image objects created using
<code>VK_SHARING_MODE_EXCLUSIVE</code> <strong>must</strong> only be accessed by queues in the
queue family that has <em>ownership</em> of the resource.
Upon creation, such resources are not owned by any queue family; ownership
is implicitly acquired upon first use within a queue.
Once a resource using <code>VK_SHARING_MODE_EXCLUSIVE</code> is owned by some queue
family, the application <strong>must</strong> perform a
<a href="synchronization.html#synchronization-queue-transfers" class="xref page">queue family ownership transfer</a> to make
the memory contents of a range or image subresource accessible to a
different queue family.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Images still require a <a href="#resources-image-layouts">layout transition</a> from
<code>VK_IMAGE_LAYOUT_UNDEFINED</code> or <code>VK_IMAGE_LAYOUT_PREINITIALIZED</code>
before being used on the first queue.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>A queue family <strong>can</strong> take ownership of an image subresource or buffer range
of a resource created with <code>VK_SHARING_MODE_EXCLUSIVE</code>, without an
ownership transfer, in the same way as for a resource that was just created;
however, taking ownership in this way has the effect that the contents of
the image subresource or buffer range are <strong>undefined</strong>.</p>
</div>
<div class="paragraph">
<p>Ranges of buffers and image subresources of image objects created using
<code>VK_SHARING_MODE_CONCURRENT</code> <strong>must</strong> only be accessed by queues from the
queue families specified through the <code>queueFamilyIndexCount</code> and
<code>pQueueFamilyIndices</code> members of the corresponding create info
structures.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="resources-external-sharing"><a class="anchor" href="#resources-external-sharing"></a>External Resource Sharing</h3>
<div class="paragraph">
<p>Resources <strong>should</strong> only be accessed in the Vulkan instance that has exclusive
ownership of their underlying memory.
Only one Vulkan instance has exclusive ownership of a resource&#8217;s underlying
memory at a given time, regardless of whether the resource was created using
<code>VK_SHARING_MODE_EXCLUSIVE</code> or <code>VK_SHARING_MODE_CONCURRENT</code>.
Applications can transfer ownership of a resource&#8217;s underlying memory only
if the memory has been imported from or exported to another instance or
external API using external memory handles.
The semantics for transferring ownership outside of the instance are similar
to those used for transferring ownership of <code>VK_SHARING_MODE_EXCLUSIVE</code>
resources between queues, and is also accomplished using
<a href="synchronization.html#VkBufferMemoryBarrier" class="xref page">VkBufferMemoryBarrier</a> or <a href="synchronization.html#VkImageMemoryBarrier" class="xref page">VkImageMemoryBarrier</a> operations.
To make the contents of the underlying memory accessible in the destination
instance or API, applications <strong>must</strong></p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Release exclusive ownership from the source instance or API.</p>
</li>
<li>
<p>Ensure the release operation has completed using semaphores or fences.</p>
</li>
<li>
<p>Acquire exclusive ownership in the destination instance or API</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Unlike queue family ownership transfers, the destination instance or API is
not specified explicitly when releasing ownership, nor is the source
instance or API specified when acquiring ownership.
Instead, the image or memory barrier&#8217;s <code>dstQueueFamilyIndex</code> or
<code>srcQueueFamilyIndex</code> parameters are set to the reserved queue family
index <code>VK_QUEUE_FAMILY_EXTERNAL</code>
to represent the external destination or source respectively.</p>
</div>
<div class="paragraph">
<p>Binding a resource to a memory object shared between multiple Vulkan
instances or other APIs does not change the ownership of the underlying
memory.
The first entity to access the resource implicitly acquires ownership.
An entity <strong>can</strong> also implicitly take ownership from another entity in the
same way without an explicit ownership transfer.
However, taking ownership in this way has the effect that the contents of
the underlying memory are <strong>undefined</strong>.</p>
</div>
<div class="paragraph">
<p>Accessing a resource backed by memory that is owned by a particular instance
or API has the same semantics as accessing a <code>VK_SHARING_MODE_EXCLUSIVE</code>
resource, with one exception: Implementations <strong>must</strong> ensure layout
transitions performed on one member of a set of identical subresources of
identical images that alias the same range of an underlying memory object
affect the layout of all the subresources in the set.</p>
</div>
<div class="paragraph">
<p>As a corollary, writes to any image subresources in such a set <strong>must</strong> not
make the contents of memory used by other subresources in the set
<strong>undefined</strong>.
An application <strong>can</strong> define the content of a subresource of one image by
performing device writes to an identical subresource of another image
provided both images are bound to the same region of external memory.
Applications <strong>may</strong> also add resources to such a set after the content of the
existing set members has been defined without making the content <strong>undefined</strong>
by creating a new image with the initial layout
<code>VK_IMAGE_LAYOUT_UNDEFINED</code> and binding it to the same region of
external memory as the existing images.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Because layout transitions apply to all identical images aliasing the same
region of external memory, the actual layout of the memory backing a new
image as well as an existing image with defined content will not be
<strong>undefined</strong>.
Such an image is not usable until it acquires ownership of its memory from
the existing owner.
Therefore, the layout specified as part of this transition will be the true
initial layout of the image.
The <strong>undefined</strong> layout specified when creating it is a placeholder to
simplify valid usage requirements.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="resources-memory-aliasing"><a class="anchor" href="#resources-memory-aliasing"></a>Memory Aliasing</h2>
<div class="sectionbody">
<div class="paragraph">
<p>A range of a <code>VkDeviceMemory</code> allocation is <em>aliased</em> if it is bound to
multiple resources simultaneously, as described below, via
<a href="#vkBindImageMemory">vkBindImageMemory</a>, <a href="#vkBindBufferMemory">vkBindBufferMemory</a>,
via <a href="sparsemem.html#sparsememory-resource-binding" class="xref page">sparse memory bindings</a>,
or by binding the memory to resources in multiple Vulkan instances or
external APIs using external memory handle export and import mechanisms.</p>
</div>
<div class="paragraph">
<p>Consider two resources, resource<sub>A</sub> and resource<sub>B</sub>, bound respectively to
memory range<sub>A</sub> and range<sub>B</sub>.
Let paddedRange<sub>A</sub> and paddedRange<sub>B</sub> be, respectively, range<sub>A</sub> and
range<sub>B</sub> aligned to <code>bufferImageGranularity</code>.
If the resources are both linear or both non-linear (as defined in the
<a href="../appendices/glossary.html#glossary-linear-resource" class="xref page">Glossary</a>), then the resources <em>alias</em> the
memory in the intersection of range<sub>A</sub> and range<sub>B</sub>.
If one resource is linear and the other is non-linear, then the resources
<em>alias</em> the memory in the intersection of paddedRange<sub>A</sub> and paddedRange<sub>B</sub>.</p>
</div>
<div class="paragraph">
<p>Applications <strong>can</strong> alias memory, but use of multiple aliases is subject to
several constraints.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Memory aliasing <strong>can</strong> be useful to reduce the total device memory footprint
of an application, if some large resources are used for disjoint periods of
time.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>When a <a href="../appendices/glossary.html#glossary-linear-resource" class="xref page">non-linear</a>,
non-<code>VK_IMAGE_CREATE_SPARSE_RESIDENCY_BIT</code> image is bound to an aliased
range, all image subresources of the image <em>overlap</em> the range.
When a linear image is bound to an aliased range, the image subresources
that (according to the image&#8217;s advertised layout) include bytes from the
aliased range overlap the range.
When a <code>VK_IMAGE_CREATE_SPARSE_RESIDENCY_BIT</code> image has sparse image
blocks bound to an aliased range, only image subresources including those
sparse image blocks overlap the range, and when the memory bound to the
image&#8217;s mip tail overlaps an aliased range all image subresources in the mip
tail overlap the range.</p>
</div>
<div class="paragraph">
<p>Buffers, and linear image subresources in either the
<code>VK_IMAGE_LAYOUT_PREINITIALIZED</code> or <code>VK_IMAGE_LAYOUT_GENERAL</code>
layouts, are <em>host-accessible subresources</em>.
That is, the host has a well-defined addressing scheme to interpret the
contents, and thus the layout of the data in memory <strong>can</strong> be consistently
interpreted across aliases if each of those aliases is a host-accessible
subresource.
Non-linear images, and linear image subresources in other layouts, are not
host-accessible.</p>
</div>
<div class="paragraph">
<p>If two aliases are both host-accessible, then they interpret the contents of
the memory in consistent ways, and data written to one alias <strong>can</strong> be read by
the other alias.</p>
</div>
<div id="resources-memory-aliasing-consistency" class="paragraph">
<p>If two aliases are both images that were created with identical creation
parameters, both were created with the <code>VK_IMAGE_CREATE_ALIAS_BIT</code> flag
set, and both are bound identically to memory
except for <a href="#VkBindImageMemoryDeviceGroupInfo">VkBindImageMemoryDeviceGroupInfo</a>::<code>pDeviceIndices</code> and
<a href="#VkBindImageMemoryDeviceGroupInfo">VkBindImageMemoryDeviceGroupInfo</a>::<code>pSplitInstanceBindRegions</code>,
then they interpret the contents of the memory in consistent ways, and data
written to one alias <strong>can</strong> be read by the other alias.</p>
</div>
<div id="resources-memory-aliasing-consistency-planes" class="paragraph">
<p>Additionally, if an individual plane of a multi-planar image and a
single-plane image alias the same memory, then they also interpret the
contents of the memory in consistent ways under the same conditions, but
with the following modifications:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Both <strong>must</strong> have been created with the <code>VK_IMAGE_CREATE_DISJOINT_BIT</code>
flag.</p>
</li>
<li>
<p>The single-plane image <strong>must</strong> have a <a href="formats.html#VkFormat" class="xref page">VkFormat</a> that is
<a href="formats.html#formats-compatible-planes" class="xref page">equivalent</a> to that of the multi-planar
image&#8217;s individual plane.</p>
</li>
<li>
<p>The single-plane image and the individual plane of the multi-planar
image <strong>must</strong> be bound identically to memory
except for <a href="#VkBindImageMemoryDeviceGroupInfo">VkBindImageMemoryDeviceGroupInfo</a>::<code>pDeviceIndices</code>
and
<a href="#VkBindImageMemoryDeviceGroupInfo">VkBindImageMemoryDeviceGroupInfo</a>::<code>pSplitInstanceBindRegions</code>.</p>
</li>
<li>
<p>The <code>width</code> and <code>height</code> of the single-plane image are derived
from the multi-planar image&#8217;s dimensions in the manner listed for
<a href="formats.html#formats-compatible-planes" class="xref page">plane compatibility</a> for the aliased plane.</p>
</li>
<li>
<p>All other creation parameters <strong>must</strong> be identical</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Aliases created by binding the same memory to resources in multiple Vulkan
instances or external APIs using external memory handle export and import
mechanisms interpret the contents of the memory in consistent ways, and data
written to one alias <strong>can</strong> be read by the other alias.</p>
</div>
<div class="paragraph">
<p>Otherwise, the aliases interpret the contents of the memory differently, and
writes via one alias make the contents of memory partially or completely
<strong>undefined</strong> to the other alias.
If the first alias is a host-accessible subresource, then the bytes affected
are those written by the memory operations according to its addressing
scheme.
If the first alias is not host-accessible, then the bytes affected are those
overlapped by the image subresources that were written.
If the second alias is a host-accessible subresource, the affected bytes
become <strong>undefined</strong>.
If the second alias is not host-accessible, all sparse image blocks (for
sparse partially-resident images) or all image subresources (for non-sparse
image and fully resident sparse images) that overlap the affected bytes
become <strong>undefined</strong>.</p>
</div>
<div class="paragraph">
<p>If any image subresources are made <strong>undefined</strong> due to writes to an alias,
then each of those image subresources <strong>must</strong> have its layout transitioned
from <code>VK_IMAGE_LAYOUT_UNDEFINED</code> to a valid layout before it is used, or
from <code>VK_IMAGE_LAYOUT_PREINITIALIZED</code> if the memory has been written by
the host.
If any sparse blocks of a sparse image have been made <strong>undefined</strong>, then only
the image subresources containing them <strong>must</strong> be transitioned.</p>
</div>
<div class="paragraph">
<p>Use of an overlapping range by two aliases <strong>must</strong> be separated by a memory
dependency using the appropriate <a href="synchronization.html#synchronization-access-types" class="xref page">access types</a> if at least one of those uses performs writes, whether the aliases
interpret memory consistently or not.
If buffer or image memory barriers are used, the scope of the barrier <strong>must</strong>
contain the entire range and/or set of image subresources that overlap.</p>
</div>
<div class="paragraph">
<p>If two aliasing image views are used in the same framebuffer, then the
render pass <strong>must</strong> declare the attachments using the
<a href="renderpass.html#renderpass-aliasing" class="xref page"><code>VK_ATTACHMENT_DESCRIPTION_MAY_ALIAS_BIT</code></a>, and
follow the other rules listed in that section.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Memory recycled via an application suballocator (i.e. without freeing and
reallocating the memory objects) is not substantially different from memory
aliasing.
However, a suballocator usually waits on a fence before recycling a region
of memory, and signaling a fence involves sufficient implicit dependencies
to satisfy all the above requirements.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="sect2">
<h3 id="resources-memory-overlap"><a class="anchor" href="#resources-memory-overlap"></a>Resource Memory Overlap</h3>
<div class="paragraph">
<p>Applications <strong>can</strong> safely access a resource concurrently as long as the
memory locations do not overlap as defined in
<a href="../appendices/memorymodel.html#memory-model-memory-location" class="xref page">Memory Location</a>.
This includes aliased resources if such aliasing is well-defined.
It also includes access from different queues and/or queue families if such
concurrent access is supported by the resource.
Transfer commands only access memory locations specified by the range of the
transfer command.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>The intent is that buffers (or linear images) can be accessed concurrently,
even when they share cache lines, but otherwise do not access the same
memory range.
The concept of a device cache line size is not exposed in the memory model.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
</article>
  </div>
</main>
</div>
<script id="site-script" src="../../../_/js/site.js" data-ui-root-path="../../../_"></script>
<script async src="../../../_/js/vendor/highlight.js"></script>
<script src="../../../_/js/vendor/lunr.js"></script>
<script src="../../../_/js/search-ui.js" id="search-ui-script" data-site-root-path="../../.." data-snippet-length="100" data-stylesheet="../../../_/css/search.css"></script>
<script async src="../../../search-index.js"></script>
  </body>
</html>
