<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Resource Creation :: Vulkan Documentation Project</title>
    <meta name="generator" content="Antora 3.1.4">
    <link rel="stylesheet" href="../../../_/css/site.css">
    <link rel="apple-touch-icon" sizes="180x180" href="../../../_/img/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="../../../_/img/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="../../../_/img/favicon-16x16.png">
    <link rel="manifest" href="../../../_/static/site.webmanifest">
    <link rel="mask-icon" href="../../../_/img/safari-pinned-tab.svg" color="#a41e22">
    <meta name="msapplication-TileColor" content="#ffc40d">
    <meta name="theme-color" content="#ffffff">
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="../../.."><img class="navbar-item" alt="Vulkan White Label" src="../../../_/Vulkan_Docs.svg" /></a>
      <div class="navbar-item search hide-for-print">
        <div id="search-field" class="field has-filter">
          <label for="search-input"></label>
          <input id="search-input" type="text" placeholder="Search the docs">
          <label class="filter checkbox">
            <input type="checkbox" data-facet-filter="component:spec" checked> In this component
          </label>
        </div>
      </div>
      <button class="navbar-burger" aria-controls="topbar-nav" aria-expanded="false" aria-label="Toggle main menu">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <!-- <a class="navbar-item" href="#">Home</a> -->
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Specs</a>
          <div class="navbar-dropdown is-right">
            <a class="navbar-item" href="../../../spec/latest/chapters/introduction.html">Vulkan 1.3</a>
            <a class="navbar-item" href="https://registry.khronos.org/OpenGL/specs/gl/GLSLangSpec.4.60.html">GLSL</a>
            <a class="navbar-item" href="../../../guide/latest/hlsl.html">HLSL</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Education</a>
          <div class="navbar-dropdown is-right">
            <a class="navbar-item" href="../../../guide/latest/index.html">Vulkan Guide</a>
            <a class="navbar-item" href="../../../tutorial/latest/index.html">Vulkan Tutorial</a>
            <a class="navbar-item" href="../../../samples/latest/README.html">Vulkan Samples</a>
            <a class="navbar-item" href="https://www.youtube.com/c/vulkan">YouTube</a>
            <a class="navbar-item" href="https://vulkan.org">More Info at Vulkan.org</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Feedback</a>
          <div class="navbar-dropdown is-right">
            <a class="navbar-item" href="https://github.com/KhronosGroup/Vulkan-Site/issues/new/choose" target="_blank">Report a Problem</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Community</a>
          <div class="navbar-dropdown is-right">
            <a class="navbar-item" href="https://discord.gg/vulkan">Vulkan Discord</a>
            <a class="navbar-item" href="https://reddit.com/r/vulkan">Reddit</a>
            <a class="navbar-item" href="https://stackoverflow.com/questions/tagged/vulkan">Stack Overflow</a>
            <a class="navbar-item" href="https://fosstodon.org/@vulkan">Mastodon</a>
          </div>
        </div>
      </div>
    </div>
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="spec" data-version="latest">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <button class="nav-menu-toggle" aria-label="Toggle expand/collapse all" style="display: none"></button>
    <h3 class="title"><a href="../index.html">Vulkan Specification</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="introduction.html">Introduction</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="fundamentals.html">Fundamentals</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="initialization.html">Initialization</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="devsandqueues.html">Devices and Queues</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="cmdbuffers.html">Command Buffers</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="synchronization.html">Synchronization and Cache Control</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="renderpass.html">Render Pass</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="shaders.html">Shaders</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="pipelines.html">Pipelines</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="memory.html">Memory Allocation</a>
  </li>
  <li class="nav-item is-current-page" data-depth="1">
    <a class="nav-link" href="resources.html">Resource Creation</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="samplers.html">Samplers</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="descriptorsets.html">Resource Descriptors</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="interfaces.html">Shader Interfaces</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="textures.html">Image Operations</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="fragmentdensitymapops.html">Fragment Density Map Operations</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="queries.html">Queries</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="clears.html">Clear Commands</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="copies.html">Copy Commands</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="drawing.html">Drawing Commands</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="fxvertex.html">Fixed-Function Vertex Processing</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="tessellation.html">Tessellation</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="geometry.html">Geometry Shading</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="VK_NV_mesh_shader/mesh.html">Mesh Shading</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="VK_HUAWEI_cluster_culling_shader/clusterculling.html">Cluster Culling Shading</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="vertexpostproc.html">Fixed-Function Vertex Post-Processing</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="primsrast.html">Rasterization</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="fragops.html">Fragment Operations</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="framebuffer.html">The Framebuffer</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="dispatch.html">Dispatching Commands</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="VK_NV_device_generated_commands/generatedcommands.html">Device-Generated Commands</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="sparsemem.html">Sparse Resources</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="VK_KHR_surface/wsi.html">Window System Integration (WSI)</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="VK_KHR_deferred_host_operations/deferred_host_operations.html">Deferred Host Operations</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="VK_EXT_private_data.html">Private Data</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="accelstructures.html">Acceleration Structures</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="VK_EXT_opacity_micromap/micromaps.html">Micromap</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="raytraversal.html">Ray Traversal</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="raytracing.html">Ray Tracing</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="VK_NV_memory_decompression.html">Memory Decompression</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="videocoding.html">Video Coding</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="VK_NV_optical_flow/optical_flow.html">Optical Flow</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="executiongraphs.html">Execution Graphs</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="VK_NV_low_latency2/low_latency2.html">Low Latency 2</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="extensions.html">Extending Vulkan</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="features.html">Features</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="limits.html">Limits</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="formats.html">Formats</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="capabilities.html">Additional Capabilities</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="debugging.html">Debugging</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../appendices/spirvenv.html">Vulkan Environment for SPIR-V</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../appendices/memorymodel.html">Memory Model</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../appendices/compressedtex.html">Compressed Image Formats</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../appendices/versions.html">Core Revisions (Informative)</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../appendices/extensions.html">Layers &amp; Extensions (Informative)</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../appendices/roadmap.html">Vulkan Roadmap Milestones</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../appendices/boilerplate.html">API Boilerplate</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../appendices/invariance.html">Invariance</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../appendices/glossary.html">Lexicon</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../appendices/credits.html">Credits (Informative)</a>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">Vulkan Specification</span>
    <span class="version">latest</span>
  </div>
  <ul class="components">
    <li class="component">
      <div class="title"><a href="../../../tutorial/latest/00_Introduction.html">Khronos Vulkan Tutorial</a></div>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../tutorial/latest/00_Introduction.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <div class="title"><a href="../../../features/latest/features/index.html">Vulkan Feature Descriptions</a></div>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../features/latest/features/index.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <div class="title"><a href="../../../guide/latest/index.html">Vulkan Guide</a></div>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../guide/latest/index.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <div class="title"><a href="../../../samples/latest/README.html">Vulkan Samples</a></div>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../samples/latest/README.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component is-current">
      <div class="title"><a href="../index.html">Vulkan Specification</a></div>
      <ul class="versions">
        <li class="version is-current is-latest">
          <a href="../index.html">latest</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="../index.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="../index.html">Vulkan Specification</a></li>
    <li><a href="resources.html">Resource Creation</a></li>
  </ul>
</nav>
<div class="edit-this-page"><a href="https://github.com/KhronosGroup/Vulkan-Docs/edit/main/antora/spec/modules/ROOT/pages/chapters/resources.adoc">Edit this Page</a></div>
</div>
  <div class="content">
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
<article class="doc">
<h1 class="page">Resource Creation</h1>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>Vulkan supports two primary resource types: <em>buffers</em> and <em>images</em>.
Resources are views of memory with associated formatting and dimensionality.
Buffers provide access to raw arrays of bytes, whereas images <strong>can</strong> be
multidimensional and <strong>may</strong> have associated metadata.</p>
</div>
<div class="paragraph">
<p>Other resource types, such as <a href="#resources-acceleration-structures">acceleration structures</a>
and <a href="#resources-micromaps">micromaps</a>
use buffers as the backing store for opaque data structures.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="resources-buffers"><a class="anchor" href="#resources-buffers"></a>Buffers</h2>
<div class="sectionbody">
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Buffers represent linear arrays of data which are used for various purposes
by binding them to a graphics or compute pipeline via descriptor sets or
certain commands, or by directly specifying them as parameters to certain
commands.</p>
</div>
<div class="paragraph">
<p>Buffers are represented by <code>VkBuffer</code> handles:</p>
</div>
<div id="VkBuffer" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_VERSION_1_0
VK_DEFINE_NON_DISPATCHABLE_HANDLE(VkBuffer)</code></pre>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>To create buffers, call:</p>
</div>
<div id="vkCreateBuffer" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_VERSION_1_0
VkResult vkCreateBuffer(
    VkDevice                                    device,
    const VkBufferCreateInfo*                   pCreateInfo,
    const VkAllocationCallbacks*                pAllocator,
    VkBuffer*                                   pBuffer);</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>device</code> is the logical device that creates the buffer object.</p>
</li>
<li>
<p><code>pCreateInfo</code> is a pointer to a <a href="#VkBufferCreateInfo">VkBufferCreateInfo</a> structure
containing parameters affecting creation of the buffer.</p>
</li>
<li>
<p><code>pAllocator</code> controls host memory allocation as described in the
<a href="memory.html#memory-allocation" class="xref page">Memory Allocation</a> chapter.</p>
</li>
<li>
<p><code>pBuffer</code> is a pointer to a <a href="#VkBuffer">VkBuffer</a> handle in which the
resulting buffer object is returned.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCreateBuffer-flags-00911" href="#VUID-vkCreateBuffer-flags-00911"></a> <span class="vuid">VUID-vkCreateBuffer-flags-00911</span><br>

If the <code>flags</code> member of <code>pCreateInfo</code> includes
<code>VK_BUFFER_CREATE_SPARSE_BINDING_BIT</code>,
and the <a href="features.html#features-extendedSparseAddressSpace" class="xref page">    <code>extendedSparseAddressSpace</code></a> feature is not enabled,
creating this <code>VkBuffer</code> <strong>must</strong> not cause the total required sparse
memory for all currently valid sparse resources on the device to exceed
<code>VkPhysicalDeviceLimits</code>::<code>sparseAddressSpaceSize</code></p>
</li>
<li>
<p><a id="VUID-vkCreateBuffer-flags-09383" href="#VUID-vkCreateBuffer-flags-09383"></a> <span class="vuid">VUID-vkCreateBuffer-flags-09383</span><br>

If the <code>flags</code> member of <code>pCreateInfo</code> includes
<code>VK_BUFFER_CREATE_SPARSE_BINDING_BIT</code>, the
<a href="features.html#features-extendedSparseAddressSpace" class="xref page">    <code>extendedSparseAddressSpace</code></a> feature is enabled, and the
<code>usage</code> member of <code>pCreateInfo</code> contains bits not in
<code>VkPhysicalDeviceExtendedSparseAddressSpacePropertiesNV</code>::<code>extendedSparseBufferUsageFlags</code>,
creating this <code>VkBuffer</code> <strong>must</strong> not cause the total required sparse
memory for all currently valid sparse resources on the device, excluding
<code>VkBuffer</code> created with <code>usage</code> member of <code>pCreateInfo</code>
containing bits in
<code>VkPhysicalDeviceExtendedSparseAddressSpacePropertiesNV</code>::<code>extendedSparseBufferUsageFlags</code>
and <code>VkImage</code> created with <code>usage</code> member of <code>pCreateInfo</code>
containing bits in
<code>VkPhysicalDeviceExtendedSparseAddressSpacePropertiesNV</code>::<code>extendedSparseImageUsageFlags</code>,
to exceed <code>VkPhysicalDeviceLimits</code>::<code>sparseAddressSpaceSize</code></p>
</li>
<li>
<p><a id="VUID-vkCreateBuffer-flags-09384" href="#VUID-vkCreateBuffer-flags-09384"></a> <span class="vuid">VUID-vkCreateBuffer-flags-09384</span><br>

If the <code>flags</code> member of <code>pCreateInfo</code> includes
<code>VK_BUFFER_CREATE_SPARSE_BINDING_BIT</code> and the
<a href="features.html#features-extendedSparseAddressSpace" class="xref page">    <code>extendedSparseAddressSpace</code></a> feature is enabled, creating this
<code>VkBuffer</code> <strong>must</strong> not cause the total required sparse memory for all
currently valid sparse resources on the device to exceed
<code>VkPhysicalDeviceExtendedSparseAddressSpacePropertiesNV</code>::<code>extendedSparseAddressSpaceSize</code></p>
</li>
</ul>
</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCreateBuffer-pNext-06387" href="#VUID-vkCreateBuffer-pNext-06387"></a> <span class="vuid">VUID-vkCreateBuffer-pNext-06387</span><br>

If using the <a href="#VkBuffer">VkBuffer</a> for an import operation from a
<a href="#VkBufferCollectionFUCHSIA">VkBufferCollectionFUCHSIA</a> where a
<a href="#VkBufferCollectionBufferCreateInfoFUCHSIA">VkBufferCollectionBufferCreateInfoFUCHSIA</a> has been chained to
<code>pNext</code>, <code>pCreateInfo</code> <strong>must</strong> match the
<a href="#VkBufferConstraintsInfoFUCHSIA">VkBufferConstraintsInfoFUCHSIA</a>::<code>createInfo</code> used when setting
the constraints on the buffer collection with
<a href="#vkSetBufferCollectionBufferConstraintsFUCHSIA">vkSetBufferCollectionBufferConstraintsFUCHSIA</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCreateBuffer-device-parameter" href="#VUID-vkCreateBuffer-device-parameter"></a> <span class="vuid">VUID-vkCreateBuffer-device-parameter</span><br>
 <code>device</code> <strong>must</strong> be a valid <a href="devsandqueues.html#VkDevice" class="xref page">VkDevice</a> handle</p>
</li>
<li>
<p><a id="VUID-vkCreateBuffer-pCreateInfo-parameter" href="#VUID-vkCreateBuffer-pCreateInfo-parameter"></a> <span class="vuid">VUID-vkCreateBuffer-pCreateInfo-parameter</span><br>
 <code>pCreateInfo</code> <strong>must</strong> be a valid pointer to a valid <a href="#VkBufferCreateInfo">VkBufferCreateInfo</a> structure</p>
</li>
<li>
<p><a id="VUID-vkCreateBuffer-pAllocator-parameter" href="#VUID-vkCreateBuffer-pAllocator-parameter"></a> <span class="vuid">VUID-vkCreateBuffer-pAllocator-parameter</span><br>
 If <code>pAllocator</code> is not <code>NULL</code>, <code>pAllocator</code> <strong>must</strong> be a valid pointer to a valid <a href="memory.html#VkAllocationCallbacks" class="xref page">VkAllocationCallbacks</a> structure</p>
</li>
<li>
<p><a id="VUID-vkCreateBuffer-pBuffer-parameter" href="#VUID-vkCreateBuffer-pBuffer-parameter"></a> <span class="vuid">VUID-vkCreateBuffer-pBuffer-parameter</span><br>
 <code>pBuffer</code> <strong>must</strong> be a valid pointer to a <a href="#VkBuffer">VkBuffer</a> handle</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Return Codes</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><a href="fundamentals.html#fundamentals-successcodes" class="xref page">Success</a></dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><code>VK_SUCCESS</code></p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1"><a href="fundamentals.html#fundamentals-errorcodes" class="xref page">Failure</a></dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><code>VK_ERROR_OUT_OF_HOST_MEMORY</code></p>
</li>
<li>
<p><code>VK_ERROR_OUT_OF_DEVICE_MEMORY</code></p>
</li>
<li>
<p><code>VK_ERROR_INVALID_OPAQUE_CAPTURE_ADDRESS_KHR</code></p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>VkBufferCreateInfo</code> structure is defined as:</p>
</div>
<div id="VkBufferCreateInfo" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_VERSION_1_0
typedef struct VkBufferCreateInfo {
    VkStructureType        sType;
    const void*            pNext;
    VkBufferCreateFlags    flags;
    VkDeviceSize           size;
    VkBufferUsageFlags     usage;
    VkSharingMode          sharingMode;
    uint32_t               queueFamilyIndexCount;
    const uint32_t*        pQueueFamilyIndices;
} VkBufferCreateInfo;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is a <a href="fundamentals.html#VkStructureType" class="xref page">VkStructureType</a> value identifying this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>flags</code> is a bitmask of <a href="#VkBufferCreateFlagBits">VkBufferCreateFlagBits</a> specifying
additional parameters of the buffer.</p>
</li>
<li>
<p><code>size</code> is the size in bytes of the buffer to be created.</p>
</li>
<li>
<p><code>usage</code> is a bitmask of <a href="#VkBufferUsageFlagBits">VkBufferUsageFlagBits</a> specifying
allowed usages of the buffer.</p>
</li>
<li>
<p><code>sharingMode</code> is a <a href="#VkSharingMode">VkSharingMode</a> value specifying the sharing
mode of the buffer when it will be accessed by multiple queue families.</p>
</li>
<li>
<p><code>queueFamilyIndexCount</code> is the number of entries in the
<code>pQueueFamilyIndices</code> array.</p>
</li>
<li>
<p><code>pQueueFamilyIndices</code> is a pointer to an array of queue families
that will access this buffer.
It is ignored if <code>sharingMode</code> is not
<code>VK_SHARING_MODE_CONCURRENT</code>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>If a <a href="#VkBufferUsageFlags2CreateInfoKHR">VkBufferUsageFlags2CreateInfoKHR</a> structure is present in the
<code>pNext</code> chain, <a href="#VkBufferUsageFlags2CreateInfoKHR">VkBufferUsageFlags2CreateInfoKHR</a>::<code>usage</code> from
that structure is used instead of <code>usage</code> from this structure.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkBufferCreateInfo-None-09499" href="#VUID-VkBufferCreateInfo-None-09499"></a> <span class="vuid">VUID-VkBufferCreateInfo-None-09499</span><br>


If the <code>pNext</code> chain does not include a
<a href="#VkBufferUsageFlags2CreateInfoKHR">VkBufferUsageFlags2CreateInfoKHR</a> structure,
<code>usage</code> must be a valid combination of <a href="#VkBufferUsageFlagBits">VkBufferUsageFlagBits</a>
values</p>
</li>
<li>
<p><a id="VUID-VkBufferCreateInfo-None-09500" href="#VUID-VkBufferCreateInfo-None-09500"></a> <span class="vuid">VUID-VkBufferCreateInfo-None-09500</span><br>


If the <code>pNext</code> chain does not include a
<a href="#VkBufferUsageFlags2CreateInfoKHR">VkBufferUsageFlags2CreateInfoKHR</a> structure,
<code>usage</code> must not be 0</p>
</li>
<li>
<p><a id="VUID-VkBufferCreateInfo-size-00912" href="#VUID-VkBufferCreateInfo-size-00912"></a> <span class="vuid">VUID-VkBufferCreateInfo-size-00912</span><br>

<code>size</code> <strong>must</strong> be greater than <code>0</code></p>
</li>
<li>
<p><a id="VUID-VkBufferCreateInfo-sharingMode-00913" href="#VUID-VkBufferCreateInfo-sharingMode-00913"></a> <span class="vuid">VUID-VkBufferCreateInfo-sharingMode-00913</span><br>

If <code>sharingMode</code> is <code>VK_SHARING_MODE_CONCURRENT</code>,
<code>pQueueFamilyIndices</code> <strong>must</strong> be a valid pointer to an array of
<code>queueFamilyIndexCount</code> <code>uint32_t</code> values</p>
</li>
<li>
<p><a id="VUID-VkBufferCreateInfo-sharingMode-00914" href="#VUID-VkBufferCreateInfo-sharingMode-00914"></a> <span class="vuid">VUID-VkBufferCreateInfo-sharingMode-00914</span><br>

If <code>sharingMode</code> is <code>VK_SHARING_MODE_CONCURRENT</code>,
<code>queueFamilyIndexCount</code> <strong>must</strong> be greater than <code>1</code></p>
</li>
<li>
<p><a id="VUID-VkBufferCreateInfo-sharingMode-01419" href="#VUID-VkBufferCreateInfo-sharingMode-01419"></a> <span class="vuid">VUID-VkBufferCreateInfo-sharingMode-01419</span><br>

If <code>sharingMode</code> is <code>VK_SHARING_MODE_CONCURRENT</code>, each element
of <code>pQueueFamilyIndices</code> <strong>must</strong> be unique and <strong>must</strong> be less than
<code>pQueueFamilyPropertyCount</code> returned by
either <a href="devsandqueues.html#vkGetPhysicalDeviceQueueFamilyProperties2" class="xref page">vkGetPhysicalDeviceQueueFamilyProperties2</a> or
<a href="devsandqueues.html#vkGetPhysicalDeviceQueueFamilyProperties" class="xref page">vkGetPhysicalDeviceQueueFamilyProperties</a> for the
<code>physicalDevice</code> that was used to create <code>device</code></p>
</li>
<li>
<p><a id="VUID-VkBufferCreateInfo-flags-00915" href="#VUID-VkBufferCreateInfo-flags-00915"></a> <span class="vuid">VUID-VkBufferCreateInfo-flags-00915</span><br>

If the <a href="features.html#features-sparseBinding" class="xref page"><code>sparseBinding</code></a> feature is not
enabled,
<code>flags</code> <strong>must</strong> not contain <code>VK_BUFFER_CREATE_SPARSE_BINDING_BIT</code></p>
</li>
<li>
<p><a id="VUID-VkBufferCreateInfo-flags-00916" href="#VUID-VkBufferCreateInfo-flags-00916"></a> <span class="vuid">VUID-VkBufferCreateInfo-flags-00916</span><br>

If the <a href="features.html#features-sparseResidencyBuffer" class="xref page"><code>sparseResidencyBuffer</code></a>
feature is not enabled,
<code>flags</code> <strong>must</strong> not contain
<code>VK_BUFFER_CREATE_SPARSE_RESIDENCY_BIT</code></p>
</li>
<li>
<p><a id="VUID-VkBufferCreateInfo-flags-00917" href="#VUID-VkBufferCreateInfo-flags-00917"></a> <span class="vuid">VUID-VkBufferCreateInfo-flags-00917</span><br>

If the <a href="features.html#features-sparseResidencyAliased" class="xref page"><code>sparseResidencyAliased</code></a>
feature is not enabled,
<code>flags</code> <strong>must</strong> not contain <code>VK_BUFFER_CREATE_SPARSE_ALIASED_BIT</code></p>
</li>
<li>
<p><a id="VUID-VkBufferCreateInfo-flags-00918" href="#VUID-VkBufferCreateInfo-flags-00918"></a> <span class="vuid">VUID-VkBufferCreateInfo-flags-00918</span><br>

If <code>flags</code> contains <code>VK_BUFFER_CREATE_SPARSE_RESIDENCY_BIT</code> or
<code>VK_BUFFER_CREATE_SPARSE_ALIASED_BIT</code>, it <strong>must</strong> also contain
<code>VK_BUFFER_CREATE_SPARSE_BINDING_BIT</code></p>
</li>
<li>
<p><a id="VUID-VkBufferCreateInfo-pNext-00920" href="#VUID-VkBufferCreateInfo-pNext-00920"></a> <span class="vuid">VUID-VkBufferCreateInfo-pNext-00920</span><br>

If the <code>pNext</code> chain includes a
<a href="#VkExternalMemoryBufferCreateInfo">VkExternalMemoryBufferCreateInfo</a> structure, its <code>handleTypes</code>
member <strong>must</strong> only contain bits that are also in
<a href="capabilities.html#VkExternalBufferProperties" class="xref page">VkExternalBufferProperties</a>::<code>externalMemoryProperties.compatibleHandleTypes</code>,
as returned by <a href="capabilities.html#vkGetPhysicalDeviceExternalBufferProperties" class="xref page">vkGetPhysicalDeviceExternalBufferProperties</a> with
<code>pExternalBufferInfo-&gt;handleType</code> equal to any one of the handle
types specified in
<a href="#VkExternalMemoryBufferCreateInfo">VkExternalMemoryBufferCreateInfo</a>::<code>handleTypes</code></p>
</li>
<li>
<p><a id="VUID-VkBufferCreateInfo-flags-01887" href="#VUID-VkBufferCreateInfo-flags-01887"></a> <span class="vuid">VUID-VkBufferCreateInfo-flags-01887</span><br>

If the <a href="features.html#features-protectedMemory" class="xref page"><code>protectedMemory</code></a> feature is
not enabled, <code>flags</code> <strong>must</strong> not contain
<code>VK_BUFFER_CREATE_PROTECTED_BIT</code></p>
</li>
<li>
<p><a id="VUID-VkBufferCreateInfo-None-01888" href="#VUID-VkBufferCreateInfo-None-01888"></a> <span class="vuid">VUID-VkBufferCreateInfo-None-01888</span><br>

If any of the bits <code>VK_BUFFER_CREATE_SPARSE_BINDING_BIT</code>,
<code>VK_BUFFER_CREATE_SPARSE_RESIDENCY_BIT</code>, or
<code>VK_BUFFER_CREATE_SPARSE_ALIASED_BIT</code> are set,
<code>VK_BUFFER_CREATE_PROTECTED_BIT</code> <strong>must</strong> not also be set</p>
</li>
<li>
<p><a id="VUID-VkBufferCreateInfo-pNext-01571" href="#VUID-VkBufferCreateInfo-pNext-01571"></a> <span class="vuid">VUID-VkBufferCreateInfo-pNext-01571</span><br>

If the <code>pNext</code> chain includes a
<a href="#VkDedicatedAllocationBufferCreateInfoNV">VkDedicatedAllocationBufferCreateInfoNV</a> structure, and the
<code>dedicatedAllocation</code> member of the chained structure is
<code>VK_TRUE</code>, then <code>flags</code> <strong>must</strong> not include
<code>VK_BUFFER_CREATE_SPARSE_BINDING_BIT</code>,
<code>VK_BUFFER_CREATE_SPARSE_RESIDENCY_BIT</code>, or
<code>VK_BUFFER_CREATE_SPARSE_ALIASED_BIT</code></p>
</li>
<li>
<p><a id="VUID-VkBufferCreateInfo-deviceAddress-02604" href="#VUID-VkBufferCreateInfo-deviceAddress-02604"></a> <span class="vuid">VUID-VkBufferCreateInfo-deviceAddress-02604</span><br>

If <a href="#VkBufferDeviceAddressCreateInfoEXT">VkBufferDeviceAddressCreateInfoEXT</a>::<code>deviceAddress</code> is not
zero, <code>flags</code> <strong>must</strong> include
<code>VK_BUFFER_CREATE_DEVICE_ADDRESS_CAPTURE_REPLAY_BIT</code></p>
</li>
<li>
<p><a id="VUID-VkBufferCreateInfo-opaqueCaptureAddress-03337" href="#VUID-VkBufferCreateInfo-opaqueCaptureAddress-03337"></a> <span class="vuid">VUID-VkBufferCreateInfo-opaqueCaptureAddress-03337</span><br>

If
<a href="#VkBufferOpaqueCaptureAddressCreateInfo">VkBufferOpaqueCaptureAddressCreateInfo</a>::<code>opaqueCaptureAddress</code>
is not zero, <code>flags</code> <strong>must</strong> include
<code>VK_BUFFER_CREATE_DEVICE_ADDRESS_CAPTURE_REPLAY_BIT</code></p>
</li>
<li>
<p><a id="VUID-VkBufferCreateInfo-flags-03338" href="#VUID-VkBufferCreateInfo-flags-03338"></a> <span class="vuid">VUID-VkBufferCreateInfo-flags-03338</span><br>

If <code>flags</code> includes
<code>VK_BUFFER_CREATE_DEVICE_ADDRESS_CAPTURE_REPLAY_BIT</code>, the
<a href="features.html#features-bufferDeviceAddressCaptureReplayEXT" class="xref page">    <code>bufferDeviceAddressCaptureReplay</code></a> feature
<strong>must</strong> be enabled</p>
</li>
<li>
<p><a id="VUID-VkBufferCreateInfo-usage-04813" href="#VUID-VkBufferCreateInfo-usage-04813"></a> <span class="vuid">VUID-VkBufferCreateInfo-usage-04813</span><br>

If <code>usage</code> includes <code>VK_BUFFER_USAGE_VIDEO_DECODE_SRC_BIT_KHR</code>
or <code>VK_BUFFER_USAGE_VIDEO_DECODE_DST_BIT_KHR</code>,
and <code>flags</code> does not include
<code>VK_BUFFER_CREATE_VIDEO_PROFILE_INDEPENDENT_BIT_KHR</code>,
then the <code>pNext</code> chain <strong>must</strong> include a
<a href="videocoding.html#VkVideoProfileListInfoKHR" class="xref page">VkVideoProfileListInfoKHR</a> structure with <code>profileCount</code>
greater than <code>0</code> and <code>pProfiles</code> including at least one
<a href="videocoding.html#VkVideoProfileInfoKHR" class="xref page">VkVideoProfileInfoKHR</a> structure with a <code>videoCodecOperation</code>
member specifying a decode operation</p>
</li>
<li>
<p><a id="VUID-VkBufferCreateInfo-usage-04814" href="#VUID-VkBufferCreateInfo-usage-04814"></a> <span class="vuid">VUID-VkBufferCreateInfo-usage-04814</span><br>

If <code>usage</code> includes <code>VK_BUFFER_USAGE_VIDEO_ENCODE_SRC_BIT_KHR</code>
or <code>VK_BUFFER_USAGE_VIDEO_ENCODE_DST_BIT_KHR</code>,
and <code>flags</code> does not include
<code>VK_BUFFER_CREATE_VIDEO_PROFILE_INDEPENDENT_BIT_KHR</code>,
then the <code>pNext</code> chain <strong>must</strong> include a
<a href="videocoding.html#VkVideoProfileListInfoKHR" class="xref page">VkVideoProfileListInfoKHR</a> structure with <code>profileCount</code>
greater than <code>0</code> and <code>pProfiles</code> including at least one
<a href="videocoding.html#VkVideoProfileInfoKHR" class="xref page">VkVideoProfileInfoKHR</a> structure with a <code>videoCodecOperation</code>
member specifying an encode operation</p>
</li>
<li>
<p><a id="VUID-VkBufferCreateInfo-flags-08325" href="#VUID-VkBufferCreateInfo-flags-08325"></a> <span class="vuid">VUID-VkBufferCreateInfo-flags-08325</span><br>

If <code>flags</code> includes
<code>VK_BUFFER_CREATE_VIDEO_PROFILE_INDEPENDENT_BIT_KHR</code>, then
<a href="features.html#features-videoMaintenance1" class="xref page"><code>videoMaintenance1</code></a> <strong>must</strong> be enabled</p>
</li>
<li>
<p><a id="VUID-VkBufferCreateInfo-size-06409" href="#VUID-VkBufferCreateInfo-size-06409"></a> <span class="vuid">VUID-VkBufferCreateInfo-size-06409</span><br>

<code>size</code> <strong>must</strong> be less than or equal to
<a href="limits.html#VkPhysicalDeviceMaintenance4Properties" class="xref page">VkPhysicalDeviceMaintenance4Properties</a>::<code>maxBufferSize</code></p>
</li>
<li>
<p><a id="VUID-VkBufferCreateInfo-usage-08097" href="#VUID-VkBufferCreateInfo-usage-08097"></a> <span class="vuid">VUID-VkBufferCreateInfo-usage-08097</span><br>

If <code>usage</code> includes
<code>VK_BUFFER_USAGE_SAMPLER_DESCRIPTOR_BUFFER_BIT_EXT</code>, creating this
<code>VkBuffer</code> <strong>must</strong> not cause the total required space for all
currently valid buffers using this flag on the device to exceed
<a href="limits.html#VkPhysicalDeviceDescriptorBufferPropertiesEXT" class="xref page">VkPhysicalDeviceDescriptorBufferPropertiesEXT</a>::<code>samplerDescriptorBufferAddressSpaceSize</code>
or
<a href="limits.html#VkPhysicalDeviceDescriptorBufferPropertiesEXT" class="xref page">VkPhysicalDeviceDescriptorBufferPropertiesEXT</a>::<code>descriptorBufferAddressSpaceSize</code></p>
</li>
<li>
<p><a id="VUID-VkBufferCreateInfo-usage-08098" href="#VUID-VkBufferCreateInfo-usage-08098"></a> <span class="vuid">VUID-VkBufferCreateInfo-usage-08098</span><br>

If <code>usage</code> includes
<code>VK_BUFFER_USAGE_RESOURCE_DESCRIPTOR_BUFFER_BIT_EXT</code>, creating this
<code>VkBuffer</code> <strong>must</strong> not cause the total required space for all
currently valid buffers using this flag on the device to exceed
<a href="limits.html#VkPhysicalDeviceDescriptorBufferPropertiesEXT" class="xref page">VkPhysicalDeviceDescriptorBufferPropertiesEXT</a>::<code>resourceDescriptorBufferAddressSpaceSize</code>
or
<a href="limits.html#VkPhysicalDeviceDescriptorBufferPropertiesEXT" class="xref page">VkPhysicalDeviceDescriptorBufferPropertiesEXT</a>::<code>descriptorBufferAddressSpaceSize</code></p>
</li>
<li>
<p><a id="VUID-VkBufferCreateInfo-flags-08099" href="#VUID-VkBufferCreateInfo-flags-08099"></a> <span class="vuid">VUID-VkBufferCreateInfo-flags-08099</span><br>

If <code>flags</code> includes
<code>VK_BUFFER_CREATE_DESCRIPTOR_BUFFER_CAPTURE_REPLAY_BIT_EXT</code>, the
<a href="features.html#features-descriptorBufferCaptureReplay" class="xref page">    <code>descriptorBufferCaptureReplay</code></a> feature <strong>must</strong> be enabled</p>
</li>
<li>
<p><a id="VUID-VkBufferCreateInfo-pNext-08100" href="#VUID-VkBufferCreateInfo-pNext-08100"></a> <span class="vuid">VUID-VkBufferCreateInfo-pNext-08100</span><br>

If the <code>pNext</code> chain includes a
<a href="descriptorsets.html#VkOpaqueCaptureDescriptorDataCreateInfoEXT" class="xref page">VkOpaqueCaptureDescriptorDataCreateInfoEXT</a> structure, <code>flags</code>
<strong>must</strong> contain
<code>VK_BUFFER_CREATE_DESCRIPTOR_BUFFER_CAPTURE_REPLAY_BIT_EXT</code></p>
</li>
<li>
<p><a id="VUID-VkBufferCreateInfo-usage-08101" href="#VUID-VkBufferCreateInfo-usage-08101"></a> <span class="vuid">VUID-VkBufferCreateInfo-usage-08101</span><br>

If <code>usage</code> includes
<code>VK_BUFFER_USAGE_PUSH_DESCRIPTORS_DESCRIPTOR_BUFFER_BIT_EXT</code>, the
<a href="features.html#features-descriptorBufferPushDescriptors" class="xref page">    <code>descriptorBufferPushDescriptors</code></a> feature <strong>must</strong> be enabled</p>
</li>
<li>
<p><a id="VUID-VkBufferCreateInfo-usage-08102" href="#VUID-VkBufferCreateInfo-usage-08102"></a> <span class="vuid">VUID-VkBufferCreateInfo-usage-08102</span><br>

If <code>usage</code> includes
<code>VK_BUFFER_USAGE_PUSH_DESCRIPTORS_DESCRIPTOR_BUFFER_BIT_EXT</code>
<a href="limits.html#limits-bufferlessPushDescriptors" class="xref page">    <code>VkPhysicalDeviceDescriptorBufferPropertiesEXT</code>::<code>bufferlessPushDescriptors</code></a>
<strong>must</strong> be <code>VK_FALSE</code></p>
</li>
<li>
<p><a id="VUID-VkBufferCreateInfo-usage-08103" href="#VUID-VkBufferCreateInfo-usage-08103"></a> <span class="vuid">VUID-VkBufferCreateInfo-usage-08103</span><br>

If <code>usage</code> includes
<code>VK_BUFFER_USAGE_PUSH_DESCRIPTORS_DESCRIPTOR_BUFFER_BIT_EXT</code>,
<code>usage</code> <strong>must</strong> contain at least one of
<code>VK_BUFFER_USAGE_RESOURCE_DESCRIPTOR_BUFFER_BIT_EXT</code> or
<code>VK_BUFFER_USAGE_SAMPLER_DESCRIPTOR_BUFFER_BIT_EXT</code></p>
</li>
<li>
<p><a id="VUID-VkBufferCreateInfo-flags-09641" href="#VUID-VkBufferCreateInfo-flags-09641"></a> <span class="vuid">VUID-VkBufferCreateInfo-flags-09641</span><br>

If <code>flags</code> includes <code>VK_BUFFER_CREATE_PROTECTED_BIT</code>, then
<code>usage</code> <strong>must</strong> not contain any of the following bits</p>
<div class="ulist">
<ul>
<li>
<p><code>VK_BUFFER_USAGE_TRANSFORM_FEEDBACK_BUFFER_BIT_EXT</code></p>
</li>
<li>
<p><code>VK_BUFFER_USAGE_TRANSFORM_FEEDBACK_COUNTER_BUFFER_BIT_EXT</code></p>
</li>
<li>
<p><code>VK_BUFFER_USAGE_CONDITIONAL_RENDERING_BIT_EXT</code></p>
</li>
<li>
<p><code>VK_BUFFER_USAGE_ACCELERATION_STRUCTURE_BUILD_INPUT_READ_ONLY_BIT_KHR</code></p>
</li>
<li>
<p><code>VK_BUFFER_USAGE_ACCELERATION_STRUCTURE_STORAGE_BIT_KHR</code></p>
</li>
<li>
<p><code>VK_BUFFER_USAGE_SHADER_BINDING_TABLE_BIT_KHR</code></p>
</li>
<li>
<p><code>VK_BUFFER_USAGE_SAMPLER_DESCRIPTOR_BUFFER_BIT_EXT</code></p>
</li>
<li>
<p><code>VK_BUFFER_USAGE_RESOURCE_DESCRIPTOR_BUFFER_BIT_EXT</code></p>
</li>
<li>
<p><code>VK_BUFFER_USAGE_PUSH_DESCRIPTORS_DESCRIPTOR_BUFFER_BIT_EXT</code></p>
</li>
<li>
<p><code>VK_BUFFER_USAGE_MICROMAP_BUILD_INPUT_READ_ONLY_BIT_EXT</code></p>
</li>
<li>
<p><code>VK_BUFFER_USAGE_MICROMAP_STORAGE_BIT_EXT</code></p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkBufferCreateInfo-sType-sType" href="#VUID-VkBufferCreateInfo-sType-sType"></a> <span class="vuid">VUID-VkBufferCreateInfo-sType-sType</span><br>
 <code>sType</code> <strong>must</strong> be <code>VK_STRUCTURE_TYPE_BUFFER_CREATE_INFO</code></p>
</li>
<li>
<p><a id="VUID-VkBufferCreateInfo-pNext-pNext" href="#VUID-VkBufferCreateInfo-pNext-pNext"></a> <span class="vuid">VUID-VkBufferCreateInfo-pNext-pNext</span><br>
 Each <code>pNext</code> member of any structure (including this one) in the <code>pNext</code> chain <strong>must</strong> be either <code>NULL</code> or a pointer to a valid instance of <a href="#VkBufferCollectionBufferCreateInfoFUCHSIA">VkBufferCollectionBufferCreateInfoFUCHSIA</a>, <a href="#VkBufferDeviceAddressCreateInfoEXT">VkBufferDeviceAddressCreateInfoEXT</a>, <a href="#VkBufferOpaqueCaptureAddressCreateInfo">VkBufferOpaqueCaptureAddressCreateInfo</a>, <a href="#VkBufferUsageFlags2CreateInfoKHR">VkBufferUsageFlags2CreateInfoKHR</a>, <a href="#VkDedicatedAllocationBufferCreateInfoNV">VkDedicatedAllocationBufferCreateInfoNV</a>, <a href="#VkExternalMemoryBufferCreateInfo">VkExternalMemoryBufferCreateInfo</a>, <a href="descriptorsets.html#VkOpaqueCaptureDescriptorDataCreateInfoEXT" class="xref page">VkOpaqueCaptureDescriptorDataCreateInfoEXT</a>, or <a href="videocoding.html#VkVideoProfileListInfoKHR" class="xref page">VkVideoProfileListInfoKHR</a></p>
</li>
<li>
<p><a id="VUID-VkBufferCreateInfo-sType-unique" href="#VUID-VkBufferCreateInfo-sType-unique"></a> <span class="vuid">VUID-VkBufferCreateInfo-sType-unique</span><br>
 The <code>sType</code> value of each struct in the <code>pNext</code> chain <strong>must</strong> be unique</p>
</li>
<li>
<p><a id="VUID-VkBufferCreateInfo-flags-parameter" href="#VUID-VkBufferCreateInfo-flags-parameter"></a> <span class="vuid">VUID-VkBufferCreateInfo-flags-parameter</span><br>
 <code>flags</code> <strong>must</strong> be a valid combination of <a href="#VkBufferCreateFlagBits">VkBufferCreateFlagBits</a> values</p>
</li>
<li>
<p><a id="VUID-VkBufferCreateInfo-sharingMode-parameter" href="#VUID-VkBufferCreateInfo-sharingMode-parameter"></a> <span class="vuid">VUID-VkBufferCreateInfo-sharingMode-parameter</span><br>
 <code>sharingMode</code> <strong>must</strong> be a valid <a href="#VkSharingMode">VkSharingMode</a> value</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>VkBufferUsageFlags2CreateInfoKHR</code> structure is defined as:</p>
</div>
<div id="VkBufferUsageFlags2CreateInfoKHR" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_KHR_maintenance5
typedef struct VkBufferUsageFlags2CreateInfoKHR {
    VkStructureType           sType;
    const void*               pNext;
    VkBufferUsageFlags2KHR    usage;
} VkBufferUsageFlags2CreateInfoKHR;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is a <a href="fundamentals.html#VkStructureType" class="xref page">VkStructureType</a> value identifying this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>usage</code> is a bitmask of <a href="#VkBufferUsageFlagBits2KHR">VkBufferUsageFlagBits2KHR</a> specifying
allowed usages of the buffer.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>If this structure is included in the <code>pNext</code> chain of a buffer creation
structure, <code>usage</code> is used instead of the corresponding <code>usage</code>
value passed in that creation structure, allowing additional usage flags to
be specified.
If this structure is included in the <code>pNext</code> chain of a buffer query
structure, the usage flags of the buffer are returned in <code>usage</code> of this
structure, and the usage flags representable in <code>usage</code> of the buffer
query structure are also returned in that field.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkBufferUsageFlags2CreateInfoKHR-sType-sType" href="#VUID-VkBufferUsageFlags2CreateInfoKHR-sType-sType"></a> <span class="vuid">VUID-VkBufferUsageFlags2CreateInfoKHR-sType-sType</span><br>
 <code>sType</code> <strong>must</strong> be <code>VK_STRUCTURE_TYPE_BUFFER_USAGE_FLAGS_2_CREATE_INFO_KHR</code></p>
</li>
<li>
<p><a id="VUID-VkBufferUsageFlags2CreateInfoKHR-usage-parameter" href="#VUID-VkBufferUsageFlags2CreateInfoKHR-usage-parameter"></a> <span class="vuid">VUID-VkBufferUsageFlags2CreateInfoKHR-usage-parameter</span><br>
 <code>usage</code> <strong>must</strong> be a valid combination of <a href="#VkBufferUsageFlagBits2KHR">VkBufferUsageFlagBits2KHR</a> values</p>
</li>
<li>
<p><a id="VUID-VkBufferUsageFlags2CreateInfoKHR-usage-requiredbitmask" href="#VUID-VkBufferUsageFlags2CreateInfoKHR-usage-requiredbitmask"></a> <span class="vuid">VUID-VkBufferUsageFlags2CreateInfoKHR-usage-requiredbitmask</span><br>
 <code>usage</code> <strong>must</strong> not be <code>0</code></p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Bits which <strong>can</strong> be set in
<a href="#VkBufferUsageFlags2CreateInfoKHR">VkBufferUsageFlags2CreateInfoKHR</a>::<code>usage</code>, specifying usage
behavior of a buffer, are:</p>
</div>
<div id="VkBufferUsageFlagBits2KHR" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_KHR_maintenance5
// Flag bits for VkBufferUsageFlagBits2KHR
typedef VkFlags64 VkBufferUsageFlagBits2KHR;
static const VkBufferUsageFlagBits2KHR VK_BUFFER_USAGE_2_TRANSFER_SRC_BIT_KHR = 0x00000001ULL;
static const VkBufferUsageFlagBits2KHR VK_BUFFER_USAGE_2_TRANSFER_DST_BIT_KHR = 0x00000002ULL;
static const VkBufferUsageFlagBits2KHR VK_BUFFER_USAGE_2_UNIFORM_TEXEL_BUFFER_BIT_KHR = 0x00000004ULL;
static const VkBufferUsageFlagBits2KHR VK_BUFFER_USAGE_2_STORAGE_TEXEL_BUFFER_BIT_KHR = 0x00000008ULL;
static const VkBufferUsageFlagBits2KHR VK_BUFFER_USAGE_2_UNIFORM_BUFFER_BIT_KHR = 0x00000010ULL;
static const VkBufferUsageFlagBits2KHR VK_BUFFER_USAGE_2_STORAGE_BUFFER_BIT_KHR = 0x00000020ULL;
static const VkBufferUsageFlagBits2KHR VK_BUFFER_USAGE_2_INDEX_BUFFER_BIT_KHR = 0x00000040ULL;
static const VkBufferUsageFlagBits2KHR VK_BUFFER_USAGE_2_VERTEX_BUFFER_BIT_KHR = 0x00000080ULL;
static const VkBufferUsageFlagBits2KHR VK_BUFFER_USAGE_2_INDIRECT_BUFFER_BIT_KHR = 0x00000100ULL;
// Provided by VK_KHR_maintenance5 with VK_AMDX_shader_enqueue
static const VkBufferUsageFlagBits2KHR VK_BUFFER_USAGE_2_EXECUTION_GRAPH_SCRATCH_BIT_AMDX = 0x02000000ULL;
// Provided by VK_KHR_maintenance5 with VK_EXT_conditional_rendering
static const VkBufferUsageFlagBits2KHR VK_BUFFER_USAGE_2_CONDITIONAL_RENDERING_BIT_EXT = 0x00000200ULL;
// Provided by VK_KHR_maintenance5 with VK_KHR_ray_tracing_pipeline
static const VkBufferUsageFlagBits2KHR VK_BUFFER_USAGE_2_SHADER_BINDING_TABLE_BIT_KHR = 0x00000400ULL;
// Provided by VK_KHR_maintenance5 with VK_NV_ray_tracing
static const VkBufferUsageFlagBits2KHR VK_BUFFER_USAGE_2_RAY_TRACING_BIT_NV = 0x00000400ULL;
// Provided by VK_KHR_maintenance5 with VK_EXT_transform_feedback
static const VkBufferUsageFlagBits2KHR VK_BUFFER_USAGE_2_TRANSFORM_FEEDBACK_BUFFER_BIT_EXT = 0x00000800ULL;
// Provided by VK_KHR_maintenance5 with VK_EXT_transform_feedback
static const VkBufferUsageFlagBits2KHR VK_BUFFER_USAGE_2_TRANSFORM_FEEDBACK_COUNTER_BUFFER_BIT_EXT = 0x00001000ULL;
// Provided by VK_KHR_maintenance5 with VK_KHR_video_decode_queue
static const VkBufferUsageFlagBits2KHR VK_BUFFER_USAGE_2_VIDEO_DECODE_SRC_BIT_KHR = 0x00002000ULL;
// Provided by VK_KHR_maintenance5 with VK_KHR_video_decode_queue
static const VkBufferUsageFlagBits2KHR VK_BUFFER_USAGE_2_VIDEO_DECODE_DST_BIT_KHR = 0x00004000ULL;
// Provided by VK_KHR_maintenance5 with VK_KHR_video_encode_queue
static const VkBufferUsageFlagBits2KHR VK_BUFFER_USAGE_2_VIDEO_ENCODE_DST_BIT_KHR = 0x00008000ULL;
// Provided by VK_KHR_maintenance5 with VK_KHR_video_encode_queue
static const VkBufferUsageFlagBits2KHR VK_BUFFER_USAGE_2_VIDEO_ENCODE_SRC_BIT_KHR = 0x00010000ULL;
// Provided by VK_KHR_maintenance5 with (VK_VERSION_1_2 or VK_KHR_buffer_device_address) or VK_EXT_buffer_device_address
static const VkBufferUsageFlagBits2KHR VK_BUFFER_USAGE_2_SHADER_DEVICE_ADDRESS_BIT_KHR = 0x00020000ULL;
// Provided by VK_KHR_acceleration_structure with VK_KHR_maintenance5
static const VkBufferUsageFlagBits2KHR VK_BUFFER_USAGE_2_ACCELERATION_STRUCTURE_BUILD_INPUT_READ_ONLY_BIT_KHR = 0x00080000ULL;
// Provided by VK_KHR_acceleration_structure with VK_KHR_maintenance5
static const VkBufferUsageFlagBits2KHR VK_BUFFER_USAGE_2_ACCELERATION_STRUCTURE_STORAGE_BIT_KHR = 0x00100000ULL;
// Provided by VK_KHR_maintenance5 with VK_EXT_descriptor_buffer
static const VkBufferUsageFlagBits2KHR VK_BUFFER_USAGE_2_SAMPLER_DESCRIPTOR_BUFFER_BIT_EXT = 0x00200000ULL;
// Provided by VK_KHR_maintenance5 with VK_EXT_descriptor_buffer
static const VkBufferUsageFlagBits2KHR VK_BUFFER_USAGE_2_RESOURCE_DESCRIPTOR_BUFFER_BIT_EXT = 0x00400000ULL;
// Provided by VK_KHR_maintenance5 with VK_EXT_descriptor_buffer
static const VkBufferUsageFlagBits2KHR VK_BUFFER_USAGE_2_PUSH_DESCRIPTORS_DESCRIPTOR_BUFFER_BIT_EXT = 0x04000000ULL;
// Provided by VK_KHR_maintenance5 with VK_EXT_opacity_micromap
static const VkBufferUsageFlagBits2KHR VK_BUFFER_USAGE_2_MICROMAP_BUILD_INPUT_READ_ONLY_BIT_EXT = 0x00800000ULL;
// Provided by VK_KHR_maintenance5 with VK_EXT_opacity_micromap
static const VkBufferUsageFlagBits2KHR VK_BUFFER_USAGE_2_MICROMAP_STORAGE_BIT_EXT = 0x01000000ULL;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>VK_BUFFER_USAGE_2_TRANSFER_SRC_BIT_KHR</code> specifies that the buffer
<strong>can</strong> be used as the source of a <em>transfer command</em> (see the definition
of <a href="synchronization.html#synchronization-pipeline-stages-transfer" class="xref page">    <code>VK_PIPELINE_STAGE_TRANSFER_BIT</code></a>).</p>
</li>
<li>
<p><code>VK_BUFFER_USAGE_2_TRANSFER_DST_BIT_KHR</code> specifies that the buffer
<strong>can</strong> be used as the destination of a transfer command.</p>
</li>
<li>
<p><code>VK_BUFFER_USAGE_2_UNIFORM_TEXEL_BUFFER_BIT_KHR</code> specifies that the
buffer <strong>can</strong> be used to create a <code>VkBufferView</code> suitable for
occupying a <code>VkDescriptorSet</code> slot of type
<code>VK_DESCRIPTOR_TYPE_UNIFORM_TEXEL_BUFFER</code>.</p>
</li>
<li>
<p><code>VK_BUFFER_USAGE_2_STORAGE_TEXEL_BUFFER_BIT_KHR</code> specifies that the
buffer <strong>can</strong> be used to create a <code>VkBufferView</code> suitable for
occupying a <code>VkDescriptorSet</code> slot of type
<code>VK_DESCRIPTOR_TYPE_STORAGE_TEXEL_BUFFER</code>.</p>
</li>
<li>
<p><code>VK_BUFFER_USAGE_2_UNIFORM_BUFFER_BIT_KHR</code> specifies that the buffer
<strong>can</strong> be used in a <code>VkDescriptorBufferInfo</code> suitable for occupying a
<code>VkDescriptorSet</code> slot either of type
<code>VK_DESCRIPTOR_TYPE_UNIFORM_BUFFER</code> or
<code>VK_DESCRIPTOR_TYPE_UNIFORM_BUFFER_DYNAMIC</code>.</p>
</li>
<li>
<p><code>VK_BUFFER_USAGE_2_STORAGE_BUFFER_BIT_KHR</code> specifies that the buffer
<strong>can</strong> be used in a <code>VkDescriptorBufferInfo</code> suitable for occupying a
<code>VkDescriptorSet</code> slot either of type
<code>VK_DESCRIPTOR_TYPE_STORAGE_BUFFER</code> or
<code>VK_DESCRIPTOR_TYPE_STORAGE_BUFFER_DYNAMIC</code>.</p>
</li>
<li>
<p><code>VK_BUFFER_USAGE_2_INDEX_BUFFER_BIT_KHR</code> specifies that the buffer
    is suitable for passing as the <code>buffer</code> parameter to
<a href="drawing.html#vkCmdBindIndexBuffer2KHR" class="xref page">vkCmdBindIndexBuffer2KHR</a> and
    <a href="drawing.html#vkCmdBindIndexBuffer" class="xref page">vkCmdBindIndexBuffer</a>.</p>
</li>
<li>
<p><code>VK_BUFFER_USAGE_2_VERTEX_BUFFER_BIT_KHR</code> specifies that the buffer
is suitable for passing as an element of the <code>pBuffers</code> array to
<a href="fxvertex.html#vkCmdBindVertexBuffers" class="xref page">vkCmdBindVertexBuffers</a>.</p>
</li>
<li>
<p><code>VK_BUFFER_USAGE_2_INDIRECT_BUFFER_BIT_KHR</code> specifies that the
buffer is suitable for passing as the <code>buffer</code> parameter to
<a href="drawing.html#vkCmdDrawIndirect" class="xref page">vkCmdDrawIndirect</a>, <a href="drawing.html#vkCmdDrawIndexedIndirect" class="xref page">vkCmdDrawIndexedIndirect</a>,
<a href="drawing.html#vkCmdDrawMeshTasksIndirectNV" class="xref page">vkCmdDrawMeshTasksIndirectNV</a>,
<a href="drawing.html#vkCmdDrawMeshTasksIndirectCountNV" class="xref page">vkCmdDrawMeshTasksIndirectCountNV</a>,
<code>vkCmdDrawMeshTasksIndirectEXT</code>,
<code>vkCmdDrawMeshTasksIndirectCountEXT</code>,
<a href="drawing.html#vkCmdDrawClusterIndirectHUAWEI" class="xref page">vkCmdDrawClusterIndirectHUAWEI</a>,
or <a href="dispatch.html#vkCmdDispatchIndirect" class="xref page">vkCmdDispatchIndirect</a>.
It is also suitable for passing as the <code>buffer</code> member of
<code>VkIndirectCommandsStreamNV</code>, or <code>sequencesCountBuffer</code> or
<code>sequencesIndexBuffer</code> or <code>preprocessedBuffer</code> member of
<code>VkGeneratedCommandsInfoNV</code></p>
</li>
<li>
<p><code>VK_BUFFER_USAGE_2_CONDITIONAL_RENDERING_BIT_EXT</code> specifies that the
buffer is suitable for passing as the <code>buffer</code> parameter to
<a href="drawing.html#vkCmdBeginConditionalRenderingEXT" class="xref page">vkCmdBeginConditionalRenderingEXT</a>.</p>
</li>
<li>
<p><code>VK_BUFFER_USAGE_2_TRANSFORM_FEEDBACK_BUFFER_BIT_EXT</code> specifies that
the buffer is suitable for using for binding as a transform feedback
buffer with <a href="vertexpostproc.html#vkCmdBindTransformFeedbackBuffersEXT" class="xref page">vkCmdBindTransformFeedbackBuffersEXT</a>.</p>
</li>
<li>
<p><code>VK_BUFFER_USAGE_2_TRANSFORM_FEEDBACK_COUNTER_BUFFER_BIT_EXT</code>
specifies that the buffer is suitable for using as a counter buffer with
<a href="vertexpostproc.html#vkCmdBeginTransformFeedbackEXT" class="xref page">vkCmdBeginTransformFeedbackEXT</a> and
<a href="vertexpostproc.html#vkCmdEndTransformFeedbackEXT" class="xref page">vkCmdEndTransformFeedbackEXT</a>.</p>
</li>
<li>
<p><code>VK_BUFFER_USAGE_2_SAMPLER_DESCRIPTOR_BUFFER_BIT_EXT</code> specifies that
the buffer is suitable to contain sampler and combined image sampler
descriptors when bound as a descriptor buffer.
Buffers containing combined image sampler descriptors <strong>must</strong> also specify
<code>VK_BUFFER_USAGE_2_RESOURCE_DESCRIPTOR_BUFFER_BIT_EXT</code>.</p>
</li>
<li>
<p><code>VK_BUFFER_USAGE_2_RESOURCE_DESCRIPTOR_BUFFER_BIT_EXT</code> specifies
that the buffer is suitable to contain resource descriptors when bound
as a descriptor buffer.</p>
</li>
<li>
<p><code>VK_BUFFER_USAGE_2_PUSH_DESCRIPTORS_DESCRIPTOR_BUFFER_BIT_EXT</code>
specifies that the buffer, when bound, <strong>can</strong> be used by the
implementation to support push descriptors when using descriptor
buffers.</p>
</li>
<li>
<p><code>VK_BUFFER_USAGE_2_RAY_TRACING_BIT_NV</code> specifies that the buffer is
suitable for use in <a href="raytracing.html#vkCmdTraceRaysNV" class="xref page">vkCmdTraceRaysNV</a>.</p>
</li>
<li>
<p><code>VK_BUFFER_USAGE_2_SHADER_BINDING_TABLE_BIT_KHR</code> specifies that the
buffer is suitable for use as a <a href="raytracing.html#shader-binding-table" class="xref page">Shader Binding    Table</a>.</p>
</li>
<li>
<p><code>VK_BUFFER_USAGE_2_ACCELERATION_STRUCTURE_BUILD_INPUT_READ_ONLY_BIT_KHR</code>
specifies that the buffer is suitable for use as a read-only input to an
<a href="accelstructures.html#acceleration-structure-building" class="xref page">acceleration structure build</a>.</p>
</li>
<li>
<p><code>VK_BUFFER_USAGE_2_ACCELERATION_STRUCTURE_STORAGE_BIT_KHR</code> specifies
that the buffer is suitable for storage space for a
<a href="#VkAccelerationStructureKHR">VkAccelerationStructureKHR</a>.</p>
</li>
<li>
<p><code>VK_BUFFER_USAGE_2_SHADER_DEVICE_ADDRESS_BIT_KHR</code> specifies that the
buffer <strong>can</strong> be used to retrieve a buffer device address via
<a href="descriptorsets.html#vkGetBufferDeviceAddress" class="xref page">vkGetBufferDeviceAddress</a> and use that address to access the
buffer&#8217;s memory from a shader.</p>
</li>
<li>
<p><code>VK_BUFFER_USAGE_2_VIDEO_DECODE_SRC_BIT_KHR</code> specifies that the
buffer <strong>can</strong> be used as the source video bitstream buffer in a
<a href="videocoding.html#video-decode-operations" class="xref page">video decode operation</a>.</p>
</li>
<li>
<p><code>VK_BUFFER_USAGE_2_VIDEO_DECODE_DST_BIT_KHR</code> is reserved for future
use.</p>
</li>
<li>
<p><code>VK_BUFFER_USAGE_2_VIDEO_ENCODE_DST_BIT_KHR</code> specifies that the
buffer <strong>can</strong> be used as the destination video bitstream buffer in a
<a href="videocoding.html#video-encode-operations" class="xref page">video encode operation</a>.</p>
</li>
<li>
<p><code>VK_BUFFER_USAGE_2_VIDEO_ENCODE_SRC_BIT_KHR</code> is reserved for future
use.</p>
</li>
<li>
<p><code>VK_BUFFER_USAGE_2_EXECUTION_GRAPH_SCRATCH_BIT_AMDX</code> specifies that
the buffer <strong>can</strong> be used for as scratch memory for
<a href="executiongraphs.html#executiongraphs" class="xref page">execution graph dispatch</a>.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div id="VkBufferUsageFlags2KHR" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_KHR_maintenance5
typedef VkFlags64 VkBufferUsageFlags2KHR;</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>VkBufferUsageFlags2KHR</code> is a bitmask type for setting a mask of zero or
more <a href="#VkBufferUsageFlagBits2KHR">VkBufferUsageFlagBits2KHR</a>.</p>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Bits which <strong>can</strong> be set in <a href="#VkBufferCreateInfo">VkBufferCreateInfo</a>::<code>usage</code>, specifying
usage behavior of a buffer, are:</p>
</div>
<div id="VkBufferUsageFlagBits" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_VERSION_1_0
typedef enum VkBufferUsageFlagBits {
    VK_BUFFER_USAGE_TRANSFER_SRC_BIT = 0x00000001,
    VK_BUFFER_USAGE_TRANSFER_DST_BIT = 0x00000002,
    VK_BUFFER_USAGE_UNIFORM_TEXEL_BUFFER_BIT = 0x00000004,
    VK_BUFFER_USAGE_STORAGE_TEXEL_BUFFER_BIT = 0x00000008,
    VK_BUFFER_USAGE_UNIFORM_BUFFER_BIT = 0x00000010,
    VK_BUFFER_USAGE_STORAGE_BUFFER_BIT = 0x00000020,
    VK_BUFFER_USAGE_INDEX_BUFFER_BIT = 0x00000040,
    VK_BUFFER_USAGE_VERTEX_BUFFER_BIT = 0x00000080,
    VK_BUFFER_USAGE_INDIRECT_BUFFER_BIT = 0x00000100,
  // Provided by VK_VERSION_1_2
    VK_BUFFER_USAGE_SHADER_DEVICE_ADDRESS_BIT = 0x00020000,
  // Provided by VK_KHR_video_decode_queue
    VK_BUFFER_USAGE_VIDEO_DECODE_SRC_BIT_KHR = 0x00002000,
  // Provided by VK_KHR_video_decode_queue
    VK_BUFFER_USAGE_VIDEO_DECODE_DST_BIT_KHR = 0x00004000,
  // Provided by VK_EXT_transform_feedback
    VK_BUFFER_USAGE_TRANSFORM_FEEDBACK_BUFFER_BIT_EXT = 0x00000800,
  // Provided by VK_EXT_transform_feedback
    VK_BUFFER_USAGE_TRANSFORM_FEEDBACK_COUNTER_BUFFER_BIT_EXT = 0x00001000,
  // Provided by VK_EXT_conditional_rendering
    VK_BUFFER_USAGE_CONDITIONAL_RENDERING_BIT_EXT = 0x00000200,
#ifdef VK_ENABLE_BETA_EXTENSIONS
  // Provided by VK_AMDX_shader_enqueue
    VK_BUFFER_USAGE_EXECUTION_GRAPH_SCRATCH_BIT_AMDX = 0x02000000,
#endif
  // Provided by VK_KHR_acceleration_structure
    VK_BUFFER_USAGE_ACCELERATION_STRUCTURE_BUILD_INPUT_READ_ONLY_BIT_KHR = 0x00080000,
  // Provided by VK_KHR_acceleration_structure
    VK_BUFFER_USAGE_ACCELERATION_STRUCTURE_STORAGE_BIT_KHR = 0x00100000,
  // Provided by VK_KHR_ray_tracing_pipeline
    VK_BUFFER_USAGE_SHADER_BINDING_TABLE_BIT_KHR = 0x00000400,
  // Provided by VK_KHR_video_encode_queue
    VK_BUFFER_USAGE_VIDEO_ENCODE_DST_BIT_KHR = 0x00008000,
  // Provided by VK_KHR_video_encode_queue
    VK_BUFFER_USAGE_VIDEO_ENCODE_SRC_BIT_KHR = 0x00010000,
  // Provided by VK_EXT_descriptor_buffer
    VK_BUFFER_USAGE_SAMPLER_DESCRIPTOR_BUFFER_BIT_EXT = 0x00200000,
  // Provided by VK_EXT_descriptor_buffer
    VK_BUFFER_USAGE_RESOURCE_DESCRIPTOR_BUFFER_BIT_EXT = 0x00400000,
  // Provided by VK_EXT_descriptor_buffer
    VK_BUFFER_USAGE_PUSH_DESCRIPTORS_DESCRIPTOR_BUFFER_BIT_EXT = 0x04000000,
  // Provided by VK_EXT_opacity_micromap
    VK_BUFFER_USAGE_MICROMAP_BUILD_INPUT_READ_ONLY_BIT_EXT = 0x00800000,
  // Provided by VK_EXT_opacity_micromap
    VK_BUFFER_USAGE_MICROMAP_STORAGE_BIT_EXT = 0x01000000,
  // Provided by VK_NV_ray_tracing
    VK_BUFFER_USAGE_RAY_TRACING_BIT_NV = VK_BUFFER_USAGE_SHADER_BINDING_TABLE_BIT_KHR,
  // Provided by VK_EXT_buffer_device_address
    VK_BUFFER_USAGE_SHADER_DEVICE_ADDRESS_BIT_EXT = VK_BUFFER_USAGE_SHADER_DEVICE_ADDRESS_BIT,
  // Provided by VK_KHR_buffer_device_address
    VK_BUFFER_USAGE_SHADER_DEVICE_ADDRESS_BIT_KHR = VK_BUFFER_USAGE_SHADER_DEVICE_ADDRESS_BIT,
} VkBufferUsageFlagBits;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>VK_BUFFER_USAGE_TRANSFER_SRC_BIT</code> specifies that the buffer <strong>can</strong> be
used as the source of a <em>transfer command</em> (see the definition of
<a href="synchronization.html#synchronization-pipeline-stages-transfer" class="xref page">    <code>VK_PIPELINE_STAGE_TRANSFER_BIT</code></a>).</p>
</li>
<li>
<p><code>VK_BUFFER_USAGE_TRANSFER_DST_BIT</code> specifies that the buffer <strong>can</strong> be
used as the destination of a transfer command.</p>
</li>
<li>
<p><code>VK_BUFFER_USAGE_UNIFORM_TEXEL_BUFFER_BIT</code> specifies that the buffer
<strong>can</strong> be used to create a <code>VkBufferView</code> suitable for occupying a
<code>VkDescriptorSet</code> slot of type
<code>VK_DESCRIPTOR_TYPE_UNIFORM_TEXEL_BUFFER</code>.</p>
</li>
<li>
<p><code>VK_BUFFER_USAGE_STORAGE_TEXEL_BUFFER_BIT</code> specifies that the buffer
<strong>can</strong> be used to create a <code>VkBufferView</code> suitable for occupying a
<code>VkDescriptorSet</code> slot of type
<code>VK_DESCRIPTOR_TYPE_STORAGE_TEXEL_BUFFER</code>.</p>
</li>
<li>
<p><code>VK_BUFFER_USAGE_UNIFORM_BUFFER_BIT</code> specifies that the buffer <strong>can</strong>
be used in a <code>VkDescriptorBufferInfo</code> suitable for occupying a
<code>VkDescriptorSet</code> slot either of type
<code>VK_DESCRIPTOR_TYPE_UNIFORM_BUFFER</code> or
<code>VK_DESCRIPTOR_TYPE_UNIFORM_BUFFER_DYNAMIC</code>.</p>
</li>
<li>
<p><code>VK_BUFFER_USAGE_STORAGE_BUFFER_BIT</code> specifies that the buffer <strong>can</strong>
be used in a <code>VkDescriptorBufferInfo</code> suitable for occupying a
<code>VkDescriptorSet</code> slot either of type
<code>VK_DESCRIPTOR_TYPE_STORAGE_BUFFER</code> or
<code>VK_DESCRIPTOR_TYPE_STORAGE_BUFFER_DYNAMIC</code>.</p>
</li>
<li>
<p><code>VK_BUFFER_USAGE_INDEX_BUFFER_BIT</code> specifies that the buffer is
    suitable for passing as the <code>buffer</code> parameter to
<a href="drawing.html#vkCmdBindIndexBuffer2KHR" class="xref page">vkCmdBindIndexBuffer2KHR</a> and
    <a href="drawing.html#vkCmdBindIndexBuffer" class="xref page">vkCmdBindIndexBuffer</a>.</p>
</li>
<li>
<p><code>VK_BUFFER_USAGE_VERTEX_BUFFER_BIT</code> specifies that the buffer is
suitable for passing as an element of the <code>pBuffers</code> array to
<a href="fxvertex.html#vkCmdBindVertexBuffers" class="xref page">vkCmdBindVertexBuffers</a>.</p>
</li>
<li>
<p><code>VK_BUFFER_USAGE_INDIRECT_BUFFER_BIT</code> specifies that the buffer is
suitable for passing as the <code>buffer</code> parameter to
<a href="drawing.html#vkCmdDrawIndirect" class="xref page">vkCmdDrawIndirect</a>, <a href="drawing.html#vkCmdDrawIndexedIndirect" class="xref page">vkCmdDrawIndexedIndirect</a>,
<a href="drawing.html#vkCmdDrawMeshTasksIndirectNV" class="xref page">vkCmdDrawMeshTasksIndirectNV</a>,
<a href="drawing.html#vkCmdDrawMeshTasksIndirectCountNV" class="xref page">vkCmdDrawMeshTasksIndirectCountNV</a>,
<code>vkCmdDrawMeshTasksIndirectEXT</code>,
<code>vkCmdDrawMeshTasksIndirectCountEXT</code>,
<a href="drawing.html#vkCmdDrawClusterIndirectHUAWEI" class="xref page">vkCmdDrawClusterIndirectHUAWEI</a>,
or <a href="dispatch.html#vkCmdDispatchIndirect" class="xref page">vkCmdDispatchIndirect</a>.
It is also suitable for passing as the <code>buffer</code> member of
<code>VkIndirectCommandsStreamNV</code>, or <code>sequencesCountBuffer</code> or
<code>sequencesIndexBuffer</code> or <code>preprocessedBuffer</code> member of
<code>VkGeneratedCommandsInfoNV</code></p>
</li>
<li>
<p><code>VK_BUFFER_USAGE_CONDITIONAL_RENDERING_BIT_EXT</code> specifies that the
buffer is suitable for passing as the <code>buffer</code> parameter to
<a href="drawing.html#vkCmdBeginConditionalRenderingEXT" class="xref page">vkCmdBeginConditionalRenderingEXT</a>.</p>
</li>
<li>
<p><code>VK_BUFFER_USAGE_TRANSFORM_FEEDBACK_BUFFER_BIT_EXT</code> specifies that
the buffer is suitable for using for binding as a transform feedback
buffer with <a href="vertexpostproc.html#vkCmdBindTransformFeedbackBuffersEXT" class="xref page">vkCmdBindTransformFeedbackBuffersEXT</a>.</p>
</li>
<li>
<p><code>VK_BUFFER_USAGE_TRANSFORM_FEEDBACK_COUNTER_BUFFER_BIT_EXT</code>
specifies that the buffer is suitable for using as a counter buffer with
<a href="vertexpostproc.html#vkCmdBeginTransformFeedbackEXT" class="xref page">vkCmdBeginTransformFeedbackEXT</a> and
<a href="vertexpostproc.html#vkCmdEndTransformFeedbackEXT" class="xref page">vkCmdEndTransformFeedbackEXT</a>.</p>
</li>
<li>
<p><code>VK_BUFFER_USAGE_SAMPLER_DESCRIPTOR_BUFFER_BIT_EXT</code> specifies that
the buffer is suitable to contain sampler and combined image sampler
descriptors when bound as a descriptor buffer.
Buffers containing combined image sampler descriptors <strong>must</strong> also specify
<code>VK_BUFFER_USAGE_RESOURCE_DESCRIPTOR_BUFFER_BIT_EXT</code>.</p>
</li>
<li>
<p><code>VK_BUFFER_USAGE_RESOURCE_DESCRIPTOR_BUFFER_BIT_EXT</code> specifies that
the buffer is suitable to contain resource descriptors when bound as a
descriptor buffer.</p>
</li>
<li>
<p><code>VK_BUFFER_USAGE_PUSH_DESCRIPTORS_DESCRIPTOR_BUFFER_BIT_EXT</code>
specifies that the buffer, when bound, <strong>can</strong> be used by the
implementation to support push descriptors when using descriptor
buffers.</p>
</li>
<li>
<p><code>VK_BUFFER_USAGE_RAY_TRACING_BIT_NV</code> specifies that the buffer is
suitable for use in <a href="raytracing.html#vkCmdTraceRaysNV" class="xref page">vkCmdTraceRaysNV</a>.</p>
</li>
<li>
<p><code>VK_BUFFER_USAGE_SHADER_BINDING_TABLE_BIT_KHR</code> specifies that the
buffer is suitable for use as a <a href="raytracing.html#shader-binding-table" class="xref page">Shader Binding    Table</a>.</p>
</li>
<li>
<p><code>VK_BUFFER_USAGE_ACCELERATION_STRUCTURE_BUILD_INPUT_READ_ONLY_BIT_KHR</code>
specifies that the buffer is suitable for use as a read-only input to an
<a href="accelstructures.html#acceleration-structure-building" class="xref page">acceleration structure build</a>.</p>
</li>
<li>
<p><code>VK_BUFFER_USAGE_ACCELERATION_STRUCTURE_STORAGE_BIT_KHR</code> specifies
that the buffer is suitable for storage space for a
<a href="#VkAccelerationStructureKHR">VkAccelerationStructureKHR</a>.</p>
</li>
<li>
<p><code>VK_BUFFER_USAGE_SHADER_DEVICE_ADDRESS_BIT</code> specifies that the
buffer <strong>can</strong> be used to retrieve a buffer device address via
<a href="descriptorsets.html#vkGetBufferDeviceAddress" class="xref page">vkGetBufferDeviceAddress</a> and use that address to access the
buffer&#8217;s memory from a shader.</p>
</li>
<li>
<p><code>VK_BUFFER_USAGE_VIDEO_DECODE_SRC_BIT_KHR</code> specifies that the buffer
<strong>can</strong> be used as the source video bitstream buffer in a
<a href="videocoding.html#video-decode-operations" class="xref page">video decode operation</a>.</p>
</li>
<li>
<p><code>VK_BUFFER_USAGE_VIDEO_DECODE_DST_BIT_KHR</code> is reserved for future
use.</p>
</li>
<li>
<p><code>VK_BUFFER_USAGE_VIDEO_ENCODE_DST_BIT_KHR</code> specifies that the buffer
<strong>can</strong> be used as the destination video bitstream buffer in a
<a href="videocoding.html#video-encode-operations" class="xref page">video encode operation</a>.</p>
</li>
<li>
<p><code>VK_BUFFER_USAGE_VIDEO_ENCODE_SRC_BIT_KHR</code> is reserved for future
use.</p>
</li>
<li>
<p><code>VK_BUFFER_USAGE_EXECUTION_GRAPH_SCRATCH_BIT_AMDX</code> specifies that
the buffer <strong>can</strong> be used for as scratch memory for
<a href="executiongraphs.html#executiongraphs" class="xref page">execution graph dispatch</a>.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div id="VkBufferUsageFlags" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_VERSION_1_0
typedef VkFlags VkBufferUsageFlags;</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>VkBufferUsageFlags</code> is a bitmask type for setting a mask of zero or
more <a href="#VkBufferUsageFlagBits">VkBufferUsageFlagBits</a>.</p>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Bits which <strong>can</strong> be set in <a href="#VkBufferCreateInfo">VkBufferCreateInfo</a>::<code>flags</code>, specifying
additional parameters of a buffer, are:</p>
</div>
<div id="VkBufferCreateFlagBits" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_VERSION_1_0
typedef enum VkBufferCreateFlagBits {
    VK_BUFFER_CREATE_SPARSE_BINDING_BIT = 0x00000001,
    VK_BUFFER_CREATE_SPARSE_RESIDENCY_BIT = 0x00000002,
    VK_BUFFER_CREATE_SPARSE_ALIASED_BIT = 0x00000004,
  // Provided by VK_VERSION_1_1
    VK_BUFFER_CREATE_PROTECTED_BIT = 0x00000008,
  // Provided by VK_VERSION_1_2
    VK_BUFFER_CREATE_DEVICE_ADDRESS_CAPTURE_REPLAY_BIT = 0x00000010,
  // Provided by VK_EXT_descriptor_buffer
    VK_BUFFER_CREATE_DESCRIPTOR_BUFFER_CAPTURE_REPLAY_BIT_EXT = 0x00000020,
  // Provided by VK_KHR_video_maintenance1
    VK_BUFFER_CREATE_VIDEO_PROFILE_INDEPENDENT_BIT_KHR = 0x00000040,
  // Provided by VK_EXT_buffer_device_address
    VK_BUFFER_CREATE_DEVICE_ADDRESS_CAPTURE_REPLAY_BIT_EXT = VK_BUFFER_CREATE_DEVICE_ADDRESS_CAPTURE_REPLAY_BIT,
  // Provided by VK_KHR_buffer_device_address
    VK_BUFFER_CREATE_DEVICE_ADDRESS_CAPTURE_REPLAY_BIT_KHR = VK_BUFFER_CREATE_DEVICE_ADDRESS_CAPTURE_REPLAY_BIT,
} VkBufferCreateFlagBits;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>VK_BUFFER_CREATE_SPARSE_BINDING_BIT</code> specifies that the buffer will
be backed using sparse memory binding.</p>
</li>
<li>
<p><code>VK_BUFFER_CREATE_SPARSE_RESIDENCY_BIT</code> specifies that the buffer
<strong>can</strong> be partially backed using sparse memory binding.
Buffers created with this flag <strong>must</strong> also be created with the
<code>VK_BUFFER_CREATE_SPARSE_BINDING_BIT</code> flag.</p>
</li>
<li>
<p><code>VK_BUFFER_CREATE_SPARSE_ALIASED_BIT</code> specifies that the buffer will
be backed using sparse memory binding with memory ranges that might also
simultaneously be backing another buffer (or another portion of the same
buffer).
Buffers created with this flag <strong>must</strong> also be created with the
<code>VK_BUFFER_CREATE_SPARSE_BINDING_BIT</code> flag.</p>
</li>
<li>
<p><code>VK_BUFFER_CREATE_PROTECTED_BIT</code> specifies that the buffer is a
protected buffer.</p>
</li>
<li>
<p><code>VK_BUFFER_CREATE_DEVICE_ADDRESS_CAPTURE_REPLAY_BIT</code> specifies that
the buffer&#8217;s address <strong>can</strong> be saved and reused on a subsequent run (e.g.
for trace capture and replay), see
<a href="#VkBufferOpaqueCaptureAddressCreateInfo">VkBufferOpaqueCaptureAddressCreateInfo</a> for more detail.</p>
</li>
<li>
<p><code>VK_BUFFER_CREATE_DESCRIPTOR_BUFFER_CAPTURE_REPLAY_BIT_EXT</code>
specifies that the buffer <strong>can</strong> be used with descriptor buffers when
capturing and replaying (e.g. for trace capture and replay), see
<a href="descriptorsets.html#VkOpaqueCaptureDescriptorDataCreateInfoEXT" class="xref page">VkOpaqueCaptureDescriptorDataCreateInfoEXT</a> for more detail.</p>
</li>
<li>
<p><code>VK_BUFFER_CREATE_VIDEO_PROFILE_INDEPENDENT_BIT_KHR</code> specifies that
the buffer <strong>can</strong> be used in <a href="videocoding.html#video-coding" class="xref page">video coding operations</a>
without having to specify at buffer creation time the set of video
profiles the buffer will be used with.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>See <a href="sparsemem.html#sparsememory-sparseresourcefeatures" class="xref page">Sparse Resource Features</a> and
<a href="features.html#features" class="xref page">Physical Device Features</a> for details of the sparse memory
features supported on a device.</p>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div id="VkBufferCreateFlags" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_VERSION_1_0
typedef VkFlags VkBufferCreateFlags;</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>VkBufferCreateFlags</code> is a bitmask type for setting a mask of zero or
more <a href="#VkBufferCreateFlagBits">VkBufferCreateFlagBits</a>.</p>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>If the <code>pNext</code> chain includes a
<code>VkDedicatedAllocationBufferCreateInfoNV</code> structure, then that structure
includes an enable controlling whether the buffer will have a dedicated
memory allocation bound to it.</p>
</div>
<div class="paragraph">
<p>The <code>VkDedicatedAllocationBufferCreateInfoNV</code> structure is defined as:</p>
</div>
<div id="VkDedicatedAllocationBufferCreateInfoNV" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_NV_dedicated_allocation
typedef struct VkDedicatedAllocationBufferCreateInfoNV {
    VkStructureType    sType;
    const void*        pNext;
    VkBool32           dedicatedAllocation;
} VkDedicatedAllocationBufferCreateInfoNV;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is a <a href="fundamentals.html#VkStructureType" class="xref page">VkStructureType</a> value identifying this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>dedicatedAllocation</code> specifies whether the buffer will have a
dedicated allocation bound to it.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkDedicatedAllocationBufferCreateInfoNV-sType-sType" href="#VUID-VkDedicatedAllocationBufferCreateInfoNV-sType-sType"></a> <span class="vuid">VUID-VkDedicatedAllocationBufferCreateInfoNV-sType-sType</span><br>
 <code>sType</code> <strong>must</strong> be <code>VK_STRUCTURE_TYPE_DEDICATED_ALLOCATION_BUFFER_CREATE_INFO_NV</code></p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>To define a set of external memory handle types that <strong>may</strong> be used as backing
store for a buffer, add a <a href="#VkExternalMemoryBufferCreateInfo">VkExternalMemoryBufferCreateInfo</a> structure
to the <code>pNext</code> chain of the <a href="#VkBufferCreateInfo">VkBufferCreateInfo</a> structure.
The <code>VkExternalMemoryBufferCreateInfo</code> structure is defined as:</p>
</div>
<div id="VkExternalMemoryBufferCreateInfo" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_VERSION_1_1
typedef struct VkExternalMemoryBufferCreateInfo {
    VkStructureType                    sType;
    const void*                        pNext;
    VkExternalMemoryHandleTypeFlags    handleTypes;
} VkExternalMemoryBufferCreateInfo;</code></pre>
</div>
</div>
<div class="paragraph">
<p>or the equivalent</p>
</div>
<div id="VkExternalMemoryBufferCreateInfoKHR" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_KHR_external_memory
typedef VkExternalMemoryBufferCreateInfo VkExternalMemoryBufferCreateInfoKHR;</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="title">Note</div>
<div class="paragraph">
<p>A <code>VkExternalMemoryBufferCreateInfo</code> structure with a non-zero
<code>handleTypes</code> field must be included in the creation parameters for a
buffer that will be bound to memory that is either exported or imported.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is a <a href="fundamentals.html#VkStructureType" class="xref page">VkStructureType</a> value identifying this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>handleTypes</code> is zero or a bitmask of
<a href="capabilities.html#VkExternalMemoryHandleTypeFlagBits" class="xref page">VkExternalMemoryHandleTypeFlagBits</a> specifying one or more external
memory handle types.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkExternalMemoryBufferCreateInfo-sType-sType" href="#VUID-VkExternalMemoryBufferCreateInfo-sType-sType"></a> <span class="vuid">VUID-VkExternalMemoryBufferCreateInfo-sType-sType</span><br>
 <code>sType</code> <strong>must</strong> be <code>VK_STRUCTURE_TYPE_EXTERNAL_MEMORY_BUFFER_CREATE_INFO</code></p>
</li>
<li>
<p><a id="VUID-VkExternalMemoryBufferCreateInfo-handleTypes-parameter" href="#VUID-VkExternalMemoryBufferCreateInfo-handleTypes-parameter"></a> <span class="vuid">VUID-VkExternalMemoryBufferCreateInfo-handleTypes-parameter</span><br>
 <code>handleTypes</code> <strong>must</strong> be a valid combination of <a href="capabilities.html#VkExternalMemoryHandleTypeFlagBits" class="xref page">VkExternalMemoryHandleTypeFlagBits</a> values</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>To request a specific device address for a buffer, add a
<a href="#VkBufferOpaqueCaptureAddressCreateInfo">VkBufferOpaqueCaptureAddressCreateInfo</a> structure to the <code>pNext</code>
chain of the <a href="#VkBufferCreateInfo">VkBufferCreateInfo</a> structure.
The <code>VkBufferOpaqueCaptureAddressCreateInfo</code> structure is defined as:</p>
</div>
<div id="VkBufferOpaqueCaptureAddressCreateInfo" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_VERSION_1_2
typedef struct VkBufferOpaqueCaptureAddressCreateInfo {
    VkStructureType    sType;
    const void*        pNext;
    uint64_t           opaqueCaptureAddress;
} VkBufferOpaqueCaptureAddressCreateInfo;</code></pre>
</div>
</div>
<div class="paragraph">
<p>or the equivalent</p>
</div>
<div id="VkBufferOpaqueCaptureAddressCreateInfoKHR" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_KHR_buffer_device_address
typedef VkBufferOpaqueCaptureAddressCreateInfo VkBufferOpaqueCaptureAddressCreateInfoKHR;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is a <a href="fundamentals.html#VkStructureType" class="xref page">VkStructureType</a> value identifying this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>opaqueCaptureAddress</code> is the opaque capture address requested for
the buffer.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>If <code>opaqueCaptureAddress</code> is zero, no specific address is requested.</p>
</div>
<div class="paragraph">
<p>If <code>opaqueCaptureAddress</code> is not zero, then it <strong>should</strong> be an address
retrieved from <a href="descriptorsets.html#vkGetBufferOpaqueCaptureAddress" class="xref page">vkGetBufferOpaqueCaptureAddress</a> for an identically
created buffer on the same implementation.</p>
</div>
<div class="paragraph">
<p>If this structure is not present, it is as if <code>opaqueCaptureAddress</code> is
zero.</p>
</div>
<div class="paragraph">
<p>Apps <strong>should</strong> avoid creating buffers with app-provided addresses and
implementation-provided addresses in the same process, to reduce the
likelihood of <code>VK_ERROR_INVALID_OPAQUE_CAPTURE_ADDRESS</code> errors.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="title">Note</div>
<div class="paragraph">
<p>The expected usage for this is that a trace capture/replay tool will add the
<code>VK_BUFFER_CREATE_DEVICE_ADDRESS_CAPTURE_REPLAY_BIT</code> flag to all buffers
that use <code>VK_BUFFER_USAGE_SHADER_DEVICE_ADDRESS_BIT</code>, and during capture
will save the queried opaque device addresses in the trace.
During replay, the buffers will be created specifying the original address
so any address values stored in the trace data will remain valid.</p>
</div>
<div class="paragraph">
<p>Implementations are expected to separate such buffers in the GPU address
space so normal allocations will avoid using these addresses.
Apps/tools should avoid mixing app-provided and implementation-provided
addresses for buffers created with
<code>VK_BUFFER_CREATE_DEVICE_ADDRESS_CAPTURE_REPLAY_BIT</code>, to avoid address
space allocation conflicts.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkBufferOpaqueCaptureAddressCreateInfo-sType-sType" href="#VUID-VkBufferOpaqueCaptureAddressCreateInfo-sType-sType"></a> <span class="vuid">VUID-VkBufferOpaqueCaptureAddressCreateInfo-sType-sType</span><br>
 <code>sType</code> <strong>must</strong> be <code>VK_STRUCTURE_TYPE_BUFFER_OPAQUE_CAPTURE_ADDRESS_CREATE_INFO</code></p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Alternatively, to
request a specific device address for a buffer, add a
<a href="#VkBufferDeviceAddressCreateInfoEXT">VkBufferDeviceAddressCreateInfoEXT</a> structure to the <code>pNext</code> chain
of the <a href="#VkBufferCreateInfo">VkBufferCreateInfo</a> structure.
The <code>VkBufferDeviceAddressCreateInfoEXT</code> structure is defined as:</p>
</div>
<div id="VkBufferDeviceAddressCreateInfoEXT" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_EXT_buffer_device_address
typedef struct VkBufferDeviceAddressCreateInfoEXT {
    VkStructureType    sType;
    const void*        pNext;
    VkDeviceAddress    deviceAddress;
} VkBufferDeviceAddressCreateInfoEXT;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is a <a href="fundamentals.html#VkStructureType" class="xref page">VkStructureType</a> value identifying this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>deviceAddress</code> is the device address requested for the buffer.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>If <code>deviceAddress</code> is zero, no specific address is requested.</p>
</div>
<div class="paragraph">
<p>If <code>deviceAddress</code> is not zero, then it <strong>must</strong> be an address retrieved
from an identically created buffer on the same implementation.
The buffer <strong>must</strong> also be bound to an identically created
<code>VkDeviceMemory</code> object.</p>
</div>
<div class="paragraph">
<p>If this structure is not present, it is as if <code>deviceAddress</code> is zero.</p>
</div>
<div class="paragraph">
<p>Apps <strong>should</strong> avoid creating buffers with app-provided addresses and
implementation-provided addresses in the same process, to reduce the
likelihood of <code>VK_ERROR_INVALID_DEVICE_ADDRESS_EXT</code> errors.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkBufferDeviceAddressCreateInfoEXT-sType-sType" href="#VUID-VkBufferDeviceAddressCreateInfoEXT-sType-sType"></a> <span class="vuid">VUID-VkBufferDeviceAddressCreateInfoEXT-sType-sType</span><br>
 <code>sType</code> <strong>must</strong> be <code>VK_STRUCTURE_TYPE_BUFFER_DEVICE_ADDRESS_CREATE_INFO_EXT</code></p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>VkBufferCollectionBufferCreateInfoFUCHSIA</code> structure is defined as:</p>
</div>
<div id="VkBufferCollectionBufferCreateInfoFUCHSIA" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_FUCHSIA_buffer_collection
typedef struct VkBufferCollectionBufferCreateInfoFUCHSIA {
    VkStructureType              sType;
    const void*                  pNext;
    VkBufferCollectionFUCHSIA    collection;
    uint32_t                     index;
} VkBufferCollectionBufferCreateInfoFUCHSIA;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is a <a href="fundamentals.html#VkStructureType" class="xref page">VkStructureType</a> value identifying this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure</p>
</li>
<li>
<p><code>collection</code> is the <a href="#VkBufferCollectionFUCHSIA">VkBufferCollectionFUCHSIA</a> handle</p>
</li>
<li>
<p><code>index</code> is the index of the buffer in the buffer collection from
which the memory will be imported</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkBufferCollectionBufferCreateInfoFUCHSIA-index-06388" href="#VUID-VkBufferCollectionBufferCreateInfoFUCHSIA-index-06388"></a> <span class="vuid">VUID-VkBufferCollectionBufferCreateInfoFUCHSIA-index-06388</span><br>

<code>index</code> <strong>must</strong> be less than
<a href="#VkBufferCollectionPropertiesFUCHSIA">VkBufferCollectionPropertiesFUCHSIA</a>::<code>bufferCount</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkBufferCollectionBufferCreateInfoFUCHSIA-sType-sType" href="#VUID-VkBufferCollectionBufferCreateInfoFUCHSIA-sType-sType"></a> <span class="vuid">VUID-VkBufferCollectionBufferCreateInfoFUCHSIA-sType-sType</span><br>
 <code>sType</code> <strong>must</strong> be <code>VK_STRUCTURE_TYPE_BUFFER_COLLECTION_BUFFER_CREATE_INFO_FUCHSIA</code></p>
</li>
<li>
<p><a id="VUID-VkBufferCollectionBufferCreateInfoFUCHSIA-collection-parameter" href="#VUID-VkBufferCollectionBufferCreateInfoFUCHSIA-collection-parameter"></a> <span class="vuid">VUID-VkBufferCollectionBufferCreateInfoFUCHSIA-collection-parameter</span><br>
 <code>collection</code> <strong>must</strong> be a valid <a href="#VkBufferCollectionFUCHSIA">VkBufferCollectionFUCHSIA</a> handle</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>To destroy a buffer, call:</p>
</div>
<div id="vkDestroyBuffer" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_VERSION_1_0
void vkDestroyBuffer(
    VkDevice                                    device,
    VkBuffer                                    buffer,
    const VkAllocationCallbacks*                pAllocator);</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>device</code> is the logical device that destroys the buffer.</p>
</li>
<li>
<p><code>buffer</code> is the buffer to destroy.</p>
</li>
<li>
<p><code>pAllocator</code> controls host memory allocation as described in the
<a href="memory.html#memory-allocation" class="xref page">Memory Allocation</a> chapter.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkDestroyBuffer-buffer-00922" href="#VUID-vkDestroyBuffer-buffer-00922"></a> <span class="vuid">VUID-vkDestroyBuffer-buffer-00922</span><br>

All submitted commands that refer to <code>buffer</code>, either directly or
via a <code>VkBufferView</code>, <strong>must</strong> have completed execution</p>
</li>
<li>
<p><a id="VUID-vkDestroyBuffer-buffer-00923" href="#VUID-vkDestroyBuffer-buffer-00923"></a> <span class="vuid">VUID-vkDestroyBuffer-buffer-00923</span><br>

If <code>VkAllocationCallbacks</code> were provided when <code>buffer</code> was
created, a compatible set of callbacks <strong>must</strong> be provided here</p>
</li>
<li>
<p><a id="VUID-vkDestroyBuffer-buffer-00924" href="#VUID-vkDestroyBuffer-buffer-00924"></a> <span class="vuid">VUID-vkDestroyBuffer-buffer-00924</span><br>

If no <code>VkAllocationCallbacks</code> were provided when <code>buffer</code> was
created, <code>pAllocator</code> <strong>must</strong> be <code>NULL</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkDestroyBuffer-device-parameter" href="#VUID-vkDestroyBuffer-device-parameter"></a> <span class="vuid">VUID-vkDestroyBuffer-device-parameter</span><br>
 <code>device</code> <strong>must</strong> be a valid <a href="devsandqueues.html#VkDevice" class="xref page">VkDevice</a> handle</p>
</li>
<li>
<p><a id="VUID-vkDestroyBuffer-buffer-parameter" href="#VUID-vkDestroyBuffer-buffer-parameter"></a> <span class="vuid">VUID-vkDestroyBuffer-buffer-parameter</span><br>
 If <code>buffer</code> is not <a href="../appendices/boilerplate.html#VK_NULL_HANDLE" class="xref page">VK_NULL_HANDLE</a>, <code>buffer</code> <strong>must</strong> be a valid <a href="#VkBuffer">VkBuffer</a> handle</p>
</li>
<li>
<p><a id="VUID-vkDestroyBuffer-pAllocator-parameter" href="#VUID-vkDestroyBuffer-pAllocator-parameter"></a> <span class="vuid">VUID-vkDestroyBuffer-pAllocator-parameter</span><br>
 If <code>pAllocator</code> is not <code>NULL</code>, <code>pAllocator</code> <strong>must</strong> be a valid pointer to a valid <a href="memory.html#VkAllocationCallbacks" class="xref page">VkAllocationCallbacks</a> structure</p>
</li>
<li>
<p><a id="VUID-vkDestroyBuffer-buffer-parent" href="#VUID-vkDestroyBuffer-buffer-parent"></a> <span class="vuid">VUID-vkDestroyBuffer-buffer-parent</span><br>
 If <code>buffer</code> is a valid handle, it <strong>must</strong> have been created, allocated, or retrieved from <code>device</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Host Synchronization</div>
<div class="ulist">
<ul>
<li>
<p>Host access to <code>buffer</code> <strong>must</strong> be externally synchronized</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="resources-buffer-views"><a class="anchor" href="#resources-buffer-views"></a>Buffer Views</h2>
<div class="sectionbody">
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>A <em>buffer view</em> represents a contiguous range of a buffer and a specific
format to be used to interpret the data.
Buffer views are used to enable shaders to access buffer contents using
<a href="textures.html#textures" class="xref page">image operations</a>.
In order to create a valid buffer view, the buffer <strong>must</strong> have been created
with at least one of the following usage flags:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>VK_BUFFER_USAGE_UNIFORM_TEXEL_BUFFER_BIT</code></p>
</li>
<li>
<p><code>VK_BUFFER_USAGE_STORAGE_TEXEL_BUFFER_BIT</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Buffer views are represented by <code>VkBufferView</code> handles:</p>
</div>
<div id="VkBufferView" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_VERSION_1_0
VK_DEFINE_NON_DISPATCHABLE_HANDLE(VkBufferView)</code></pre>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>To create a buffer view, call:</p>
</div>
<div id="vkCreateBufferView" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_VERSION_1_0
VkResult vkCreateBufferView(
    VkDevice                                    device,
    const VkBufferViewCreateInfo*               pCreateInfo,
    const VkAllocationCallbacks*                pAllocator,
    VkBufferView*                               pView);</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>device</code> is the logical device that creates the buffer view.</p>
</li>
<li>
<p><code>pCreateInfo</code> is a pointer to a <a href="#VkBufferViewCreateInfo">VkBufferViewCreateInfo</a>
structure containing parameters to be used to create the buffer view.</p>
</li>
<li>
<p><code>pAllocator</code> controls host memory allocation as described in the
<a href="memory.html#memory-allocation" class="xref page">Memory Allocation</a> chapter.</p>
</li>
<li>
<p><code>pView</code> is a pointer to a <a href="#VkBufferView">VkBufferView</a> handle in which the
resulting buffer view object is returned.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCreateBufferView-device-parameter" href="#VUID-vkCreateBufferView-device-parameter"></a> <span class="vuid">VUID-vkCreateBufferView-device-parameter</span><br>
 <code>device</code> <strong>must</strong> be a valid <a href="devsandqueues.html#VkDevice" class="xref page">VkDevice</a> handle</p>
</li>
<li>
<p><a id="VUID-vkCreateBufferView-pCreateInfo-parameter" href="#VUID-vkCreateBufferView-pCreateInfo-parameter"></a> <span class="vuid">VUID-vkCreateBufferView-pCreateInfo-parameter</span><br>
 <code>pCreateInfo</code> <strong>must</strong> be a valid pointer to a valid <a href="#VkBufferViewCreateInfo">VkBufferViewCreateInfo</a> structure</p>
</li>
<li>
<p><a id="VUID-vkCreateBufferView-pAllocator-parameter" href="#VUID-vkCreateBufferView-pAllocator-parameter"></a> <span class="vuid">VUID-vkCreateBufferView-pAllocator-parameter</span><br>
 If <code>pAllocator</code> is not <code>NULL</code>, <code>pAllocator</code> <strong>must</strong> be a valid pointer to a valid <a href="memory.html#VkAllocationCallbacks" class="xref page">VkAllocationCallbacks</a> structure</p>
</li>
<li>
<p><a id="VUID-vkCreateBufferView-pView-parameter" href="#VUID-vkCreateBufferView-pView-parameter"></a> <span class="vuid">VUID-vkCreateBufferView-pView-parameter</span><br>
 <code>pView</code> <strong>must</strong> be a valid pointer to a <a href="#VkBufferView">VkBufferView</a> handle</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Return Codes</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><a href="fundamentals.html#fundamentals-successcodes" class="xref page">Success</a></dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><code>VK_SUCCESS</code></p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1"><a href="fundamentals.html#fundamentals-errorcodes" class="xref page">Failure</a></dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><code>VK_ERROR_OUT_OF_HOST_MEMORY</code></p>
</li>
<li>
<p><code>VK_ERROR_OUT_OF_DEVICE_MEMORY</code></p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>VkBufferViewCreateInfo</code> structure is defined as:</p>
</div>
<div id="VkBufferViewCreateInfo" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_VERSION_1_0
typedef struct VkBufferViewCreateInfo {
    VkStructureType            sType;
    const void*                pNext;
    VkBufferViewCreateFlags    flags;
    VkBuffer                   buffer;
    VkFormat                   format;
    VkDeviceSize               offset;
    VkDeviceSize               range;
} VkBufferViewCreateInfo;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is a <a href="fundamentals.html#VkStructureType" class="xref page">VkStructureType</a> value identifying this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>flags</code> is reserved for future use.</p>
</li>
<li>
<p><code>buffer</code> is a <a href="#VkBuffer">VkBuffer</a> on which the view will be created.</p>
</li>
<li>
<p><code>format</code> is a <a href="formats.html#VkFormat" class="xref page">VkFormat</a> describing the format of the data
elements in the buffer.</p>
</li>
<li>
<p><code>offset</code> is an offset in bytes from the base address of the buffer.
Accesses to the buffer view from shaders use addressing that is relative
to this starting offset.</p>
</li>
<li>
<p><code>range</code> is a size in bytes of the buffer view.
If <code>range</code> is equal to <code>VK_WHOLE_SIZE</code>, the range from
<code>offset</code> to the end of the buffer is used.
If <code>VK_WHOLE_SIZE</code> is used and the remaining size of the buffer is
not a multiple of the <a href="formats.html#texel-block-size" class="xref page">texel block size</a> of
<code>format</code>, the nearest smaller multiple is used.</p>
</li>
</ul>
</div>
<div id="resources-buffer-views-usage" class="paragraph">
<p>The buffer view has a <em>buffer view usage</em> identifying which descriptor types
can be created from it.
This usage
<strong>can</strong> be defined by including the <a href="#VkBufferUsageFlags2CreateInfoKHR">VkBufferUsageFlags2CreateInfoKHR</a>
structure in the <code>pNext</code> chain, and specifying the <code>usage</code> value
there.
If this structure is not included, it
is equal to the <a href="#VkBufferCreateInfo">VkBufferCreateInfo</a>::<code>usage</code> value used to create
<code>buffer</code>.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkBufferViewCreateInfo-offset-00925" href="#VUID-VkBufferViewCreateInfo-offset-00925"></a> <span class="vuid">VUID-VkBufferViewCreateInfo-offset-00925</span><br>

<code>offset</code> <strong>must</strong> be less than the size of <code>buffer</code></p>
</li>
<li>
<p><a id="VUID-VkBufferViewCreateInfo-range-00928" href="#VUID-VkBufferViewCreateInfo-range-00928"></a> <span class="vuid">VUID-VkBufferViewCreateInfo-range-00928</span><br>

If <code>range</code> is not equal to <code>VK_WHOLE_SIZE</code>, <code>range</code> <strong>must</strong> be
greater than <code>0</code></p>
</li>
<li>
<p><a id="VUID-VkBufferViewCreateInfo-range-00929" href="#VUID-VkBufferViewCreateInfo-range-00929"></a> <span class="vuid">VUID-VkBufferViewCreateInfo-range-00929</span><br>

If <code>range</code> is not equal to <code>VK_WHOLE_SIZE</code>, <code>range</code> <strong>must</strong> be
an integer multiple of the texel block size of <code>format</code></p>
</li>
<li>
<p><a id="VUID-VkBufferViewCreateInfo-range-00930" href="#VUID-VkBufferViewCreateInfo-range-00930"></a> <span class="vuid">VUID-VkBufferViewCreateInfo-range-00930</span><br>

If <code>range</code> is not equal to <code>VK_WHOLE_SIZE</code>, the number of texel
buffer elements given by <span class="eq">(<code>range</code> / (texel block
size)  (texels per block))</span> where texel block size and
texels per block are as defined in the <a href="formats.html#formats-compatibility" class="xref page">    Compatible Formats</a> table for <code>format</code>, <strong>must</strong> be less than or equal
to <code>VkPhysicalDeviceLimits</code>::<code>maxTexelBufferElements</code></p>
</li>
<li>
<p><a id="VUID-VkBufferViewCreateInfo-offset-00931" href="#VUID-VkBufferViewCreateInfo-offset-00931"></a> <span class="vuid">VUID-VkBufferViewCreateInfo-offset-00931</span><br>

If <code>range</code> is not equal to <code>VK_WHOLE_SIZE</code>, the sum of
<code>offset</code> and <code>range</code> <strong>must</strong> be less than or equal to the size of
<code>buffer</code></p>
</li>
<li>
<p><a id="VUID-VkBufferViewCreateInfo-range-04059" href="#VUID-VkBufferViewCreateInfo-range-04059"></a> <span class="vuid">VUID-VkBufferViewCreateInfo-range-04059</span><br>

If <code>range</code> is equal to <code>VK_WHOLE_SIZE</code>, the number of texel
buffer elements given by <span class="eq">((size - <code>offset</code>) / (texel
block size)  (texels per block))</span> where size is the size
of <code>buffer</code>, and texel block size and texels per block are as
defined in the <a href="formats.html#formats-compatibility" class="xref page">Compatible Formats</a> table for
<code>format</code>, <strong>must</strong> be less than or equal to
<code>VkPhysicalDeviceLimits</code>::<code>maxTexelBufferElements</code></p>
</li>
<li>
<p><a id="VUID-VkBufferViewCreateInfo-buffer-00932" href="#VUID-VkBufferViewCreateInfo-buffer-00932"></a> <span class="vuid">VUID-VkBufferViewCreateInfo-buffer-00932</span><br>

<code>buffer</code> <strong>must</strong> have been created with a <code>usage</code> value containing
at least one of <code>VK_BUFFER_USAGE_UNIFORM_TEXEL_BUFFER_BIT</code> or
<code>VK_BUFFER_USAGE_STORAGE_TEXEL_BUFFER_BIT</code></p>
</li>
<li>
<p><a id="VUID-VkBufferViewCreateInfo-format-08778" href="#VUID-VkBufferViewCreateInfo-format-08778"></a> <span class="vuid">VUID-VkBufferViewCreateInfo-format-08778</span><br>

If the <a href="#resources-buffer-views-usage">buffer view usage</a> contains
<code>VK_BUFFER_USAGE_UNIFORM_TEXEL_BUFFER_BIT</code>, then
<a href="#resources-buffer-view-format-features">format features</a> of
<code>format</code> <strong>must</strong> contain
<code>VK_FORMAT_FEATURE_UNIFORM_TEXEL_BUFFER_BIT</code></p>
</li>
<li>
<p><a id="VUID-VkBufferViewCreateInfo-format-08779" href="#VUID-VkBufferViewCreateInfo-format-08779"></a> <span class="vuid">VUID-VkBufferViewCreateInfo-format-08779</span><br>

If the <a href="#resources-buffer-views-usage">buffer view usage</a> contains
<code>VK_BUFFER_USAGE_STORAGE_TEXEL_BUFFER_BIT</code>, then
<a href="#resources-buffer-view-format-features">format features</a> of
<code>format</code> <strong>must</strong> contain
<code>VK_FORMAT_FEATURE_STORAGE_TEXEL_BUFFER_BIT</code></p>
</li>
<li>
<p><a id="VUID-VkBufferViewCreateInfo-buffer-00935" href="#VUID-VkBufferViewCreateInfo-buffer-00935"></a> <span class="vuid">VUID-VkBufferViewCreateInfo-buffer-00935</span><br>

If <code>buffer</code> is non-sparse then it <strong>must</strong> be bound completely and
contiguously to a single <code>VkDeviceMemory</code> object</p>
</li>
<li>
<p><a id="VUID-VkBufferViewCreateInfo-offset-02749" href="#VUID-VkBufferViewCreateInfo-offset-02749"></a> <span class="vuid">VUID-VkBufferViewCreateInfo-offset-02749</span><br>

If the <a href="features.html#features-texelBufferAlignment" class="xref page"><code>texelBufferAlignment</code></a>
feature is not enabled,
<code>offset</code> <strong>must</strong> be a multiple of
<code>VkPhysicalDeviceLimits</code>::<code>minTexelBufferOffsetAlignment</code></p>
</li>
<li>
<p><a id="VUID-VkBufferViewCreateInfo-buffer-02750" href="#VUID-VkBufferViewCreateInfo-buffer-02750"></a> <span class="vuid">VUID-VkBufferViewCreateInfo-buffer-02750</span><br>

If the <a href="features.html#features-texelBufferAlignment" class="xref page"><code>texelBufferAlignment</code></a>
feature is enabled and if <code>buffer</code> was created with <code>usage</code>
containing <code>VK_BUFFER_USAGE_STORAGE_TEXEL_BUFFER_BIT</code>, <code>offset</code>
<strong>must</strong> be a multiple of the lesser of
<a href="limits.html#VkPhysicalDeviceTexelBufferAlignmentProperties" class="xref page">VkPhysicalDeviceTexelBufferAlignmentProperties</a>::<code>storageTexelBufferOffsetAlignmentBytes</code>
or, if
<a href="limits.html#VkPhysicalDeviceTexelBufferAlignmentProperties" class="xref page">VkPhysicalDeviceTexelBufferAlignmentProperties</a>::<code>storageTexelBufferOffsetSingleTexelAlignment</code>
is <code>VK_TRUE</code>, the size of a texel of the requested <code>format</code>.
If the size of a texel is a multiple of three bytes, then the size of a
single component of <code>format</code> is used instead</p>
</li>
<li>
<p><a id="VUID-VkBufferViewCreateInfo-buffer-02751" href="#VUID-VkBufferViewCreateInfo-buffer-02751"></a> <span class="vuid">VUID-VkBufferViewCreateInfo-buffer-02751</span><br>

If the <a href="features.html#features-texelBufferAlignment" class="xref page"><code>texelBufferAlignment</code></a>
feature is enabled and if <code>buffer</code> was created with <code>usage</code>
containing <code>VK_BUFFER_USAGE_UNIFORM_TEXEL_BUFFER_BIT</code>, <code>offset</code>
<strong>must</strong> be a multiple of the lesser of
<a href="limits.html#VkPhysicalDeviceTexelBufferAlignmentProperties" class="xref page">VkPhysicalDeviceTexelBufferAlignmentProperties</a>::<code>uniformTexelBufferOffsetAlignmentBytes</code>
or, if
<a href="limits.html#VkPhysicalDeviceTexelBufferAlignmentProperties" class="xref page">VkPhysicalDeviceTexelBufferAlignmentProperties</a>::<code>uniformTexelBufferOffsetSingleTexelAlignment</code>
is <code>VK_TRUE</code>, the size of a texel of the requested <code>format</code>.
If the size of a texel is a multiple of three bytes, then the size of a
single component of <code>format</code> is used instead</p>
</li>
<li>
<p><a id="VUID-VkBufferViewCreateInfo-pNext-06782" href="#VUID-VkBufferViewCreateInfo-pNext-06782"></a> <span class="vuid">VUID-VkBufferViewCreateInfo-pNext-06782</span><br>

If the <code>pNext</code> chain includes a
<a href="memory.html#VkExportMetalObjectCreateInfoEXT" class="xref page">VkExportMetalObjectCreateInfoEXT</a> structure, its
<code>exportObjectType</code> member <strong>must</strong> be
<code>VK_EXPORT_METAL_OBJECT_TYPE_METAL_TEXTURE_BIT_EXT</code></p>
</li>
<li>
<p><a id="VUID-VkBufferViewCreateInfo-pNext-08780" href="#VUID-VkBufferViewCreateInfo-pNext-08780"></a> <span class="vuid">VUID-VkBufferViewCreateInfo-pNext-08780</span><br>

If the <code>pNext</code> chain includes a
<a href="#VkBufferUsageFlags2CreateInfoKHR">VkBufferUsageFlags2CreateInfoKHR</a>, its <code>usage</code> <strong>must</strong> not
contain any other bit than
<code>VK_BUFFER_USAGE_2_UNIFORM_TEXEL_BUFFER_BIT_KHR</code> or
<code>VK_BUFFER_USAGE_2_STORAGE_TEXEL_BUFFER_BIT_KHR</code></p>
</li>
<li>
<p><a id="VUID-VkBufferViewCreateInfo-pNext-08781" href="#VUID-VkBufferViewCreateInfo-pNext-08781"></a> <span class="vuid">VUID-VkBufferViewCreateInfo-pNext-08781</span><br>

If the <code>pNext</code> chain includes a
<a href="#VkBufferUsageFlags2CreateInfoKHR">VkBufferUsageFlags2CreateInfoKHR</a>, its <code>usage</code> <strong>must</strong> be a
subset of the <a href="#VkBufferCreateInfo">VkBufferCreateInfo</a>::<code>usage</code> specified or
<a href="#VkBufferUsageFlags2CreateInfoKHR">VkBufferUsageFlags2CreateInfoKHR</a>::<code>usage</code> from
<a href="#VkBufferCreateInfo">VkBufferCreateInfo</a>::<code>pNext</code> when creating <code>buffer</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkBufferViewCreateInfo-sType-sType" href="#VUID-VkBufferViewCreateInfo-sType-sType"></a> <span class="vuid">VUID-VkBufferViewCreateInfo-sType-sType</span><br>
 <code>sType</code> <strong>must</strong> be <code>VK_STRUCTURE_TYPE_BUFFER_VIEW_CREATE_INFO</code></p>
</li>
<li>
<p><a id="VUID-VkBufferViewCreateInfo-pNext-pNext" href="#VUID-VkBufferViewCreateInfo-pNext-pNext"></a> <span class="vuid">VUID-VkBufferViewCreateInfo-pNext-pNext</span><br>
 Each <code>pNext</code> member of any structure (including this one) in the <code>pNext</code> chain <strong>must</strong> be either <code>NULL</code> or a pointer to a valid instance of <a href="#VkBufferUsageFlags2CreateInfoKHR">VkBufferUsageFlags2CreateInfoKHR</a> or <a href="memory.html#VkExportMetalObjectCreateInfoEXT" class="xref page">VkExportMetalObjectCreateInfoEXT</a></p>
</li>
<li>
<p><a id="VUID-VkBufferViewCreateInfo-sType-unique" href="#VUID-VkBufferViewCreateInfo-sType-unique"></a> <span class="vuid">VUID-VkBufferViewCreateInfo-sType-unique</span><br>
 The <code>sType</code> value of each struct in the <code>pNext</code> chain <strong>must</strong> be unique, with the exception of structures of type <a href="memory.html#VkExportMetalObjectCreateInfoEXT" class="xref page">VkExportMetalObjectCreateInfoEXT</a></p>
</li>
<li>
<p><a id="VUID-VkBufferViewCreateInfo-flags-zerobitmask" href="#VUID-VkBufferViewCreateInfo-flags-zerobitmask"></a> <span class="vuid">VUID-VkBufferViewCreateInfo-flags-zerobitmask</span><br>
 <code>flags</code> <strong>must</strong> be <code>0</code></p>
</li>
<li>
<p><a id="VUID-VkBufferViewCreateInfo-buffer-parameter" href="#VUID-VkBufferViewCreateInfo-buffer-parameter"></a> <span class="vuid">VUID-VkBufferViewCreateInfo-buffer-parameter</span><br>
 <code>buffer</code> <strong>must</strong> be a valid <a href="#VkBuffer">VkBuffer</a> handle</p>
</li>
<li>
<p><a id="VUID-VkBufferViewCreateInfo-format-parameter" href="#VUID-VkBufferViewCreateInfo-format-parameter"></a> <span class="vuid">VUID-VkBufferViewCreateInfo-format-parameter</span><br>
 <code>format</code> <strong>must</strong> be a valid <a href="formats.html#VkFormat" class="xref page">VkFormat</a> value</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div id="VkBufferViewCreateFlags" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_VERSION_1_0
typedef VkFlags VkBufferViewCreateFlags;</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>VkBufferViewCreateFlags</code> is a bitmask type for setting a mask, but is
currently reserved for future use.</p>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>To destroy a buffer view, call:</p>
</div>
<div id="vkDestroyBufferView" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_VERSION_1_0
void vkDestroyBufferView(
    VkDevice                                    device,
    VkBufferView                                bufferView,
    const VkAllocationCallbacks*                pAllocator);</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>device</code> is the logical device that destroys the buffer view.</p>
</li>
<li>
<p><code>bufferView</code> is the buffer view to destroy.</p>
</li>
<li>
<p><code>pAllocator</code> controls host memory allocation as described in the
<a href="memory.html#memory-allocation" class="xref page">Memory Allocation</a> chapter.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkDestroyBufferView-bufferView-00936" href="#VUID-vkDestroyBufferView-bufferView-00936"></a> <span class="vuid">VUID-vkDestroyBufferView-bufferView-00936</span><br>

All submitted commands that refer to <code>bufferView</code> <strong>must</strong> have
completed execution</p>
</li>
<li>
<p><a id="VUID-vkDestroyBufferView-bufferView-00937" href="#VUID-vkDestroyBufferView-bufferView-00937"></a> <span class="vuid">VUID-vkDestroyBufferView-bufferView-00937</span><br>

If <code>VkAllocationCallbacks</code> were provided when <code>bufferView</code> was
created, a compatible set of callbacks <strong>must</strong> be provided here</p>
</li>
<li>
<p><a id="VUID-vkDestroyBufferView-bufferView-00938" href="#VUID-vkDestroyBufferView-bufferView-00938"></a> <span class="vuid">VUID-vkDestroyBufferView-bufferView-00938</span><br>

If no <code>VkAllocationCallbacks</code> were provided when <code>bufferView</code>
was created, <code>pAllocator</code> <strong>must</strong> be <code>NULL</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkDestroyBufferView-device-parameter" href="#VUID-vkDestroyBufferView-device-parameter"></a> <span class="vuid">VUID-vkDestroyBufferView-device-parameter</span><br>
 <code>device</code> <strong>must</strong> be a valid <a href="devsandqueues.html#VkDevice" class="xref page">VkDevice</a> handle</p>
</li>
<li>
<p><a id="VUID-vkDestroyBufferView-bufferView-parameter" href="#VUID-vkDestroyBufferView-bufferView-parameter"></a> <span class="vuid">VUID-vkDestroyBufferView-bufferView-parameter</span><br>
 If <code>bufferView</code> is not <a href="../appendices/boilerplate.html#VK_NULL_HANDLE" class="xref page">VK_NULL_HANDLE</a>, <code>bufferView</code> <strong>must</strong> be a valid <a href="#VkBufferView">VkBufferView</a> handle</p>
</li>
<li>
<p><a id="VUID-vkDestroyBufferView-pAllocator-parameter" href="#VUID-vkDestroyBufferView-pAllocator-parameter"></a> <span class="vuid">VUID-vkDestroyBufferView-pAllocator-parameter</span><br>
 If <code>pAllocator</code> is not <code>NULL</code>, <code>pAllocator</code> <strong>must</strong> be a valid pointer to a valid <a href="memory.html#VkAllocationCallbacks" class="xref page">VkAllocationCallbacks</a> structure</p>
</li>
<li>
<p><a id="VUID-vkDestroyBufferView-bufferView-parent" href="#VUID-vkDestroyBufferView-bufferView-parent"></a> <span class="vuid">VUID-vkDestroyBufferView-bufferView-parent</span><br>
 If <code>bufferView</code> is a valid handle, it <strong>must</strong> have been created, allocated, or retrieved from <code>device</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Host Synchronization</div>
<div class="ulist">
<ul>
<li>
<p>Host access to <code>bufferView</code> <strong>must</strong> be externally synchronized</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="resources-buffer-view-format-features"><a class="anchor" href="#resources-buffer-view-format-features"></a>Buffer View Format Features</h3>
<div class="paragraph">
<p>Valid uses of a <a href="#VkBufferView">VkBufferView</a> <strong>may</strong> depend on the buffer view&#8217;s <em>format
features</em>, defined below.
Such constraints are documented in the affected valid usage statement.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>If Vulkan 1.3 is supported or the <code><a href="../appendices/extensions.html#VK_KHR_format_feature_flags2" class="xref page">VK_KHR_format_feature_flags2</a></code>
extension is supported, then the buffer view&#8217;s set of <em>format features</em>
is the value of <a href="formats.html#VkFormatProperties3" class="xref page">VkFormatProperties3</a>::<code>bufferFeatures</code> found by
calling <a href="formats.html#vkGetPhysicalDeviceFormatProperties2" class="xref page">vkGetPhysicalDeviceFormatProperties2</a> on the same
<code>format</code> as <a href="#VkBufferViewCreateInfo">VkBufferViewCreateInfo</a>::<code>format</code>.</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="resources-images"><a class="anchor" href="#resources-images"></a>Images</h2>
<div class="sectionbody">
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Images represent multidimensional - up to 3 - arrays of data which <strong>can</strong> be
used for various purposes (e.g. attachments, textures), by binding them to a
graphics or compute pipeline via descriptor sets, or by directly specifying
them as parameters to certain commands.</p>
</div>
<div class="paragraph">
<p>Images are represented by <code>VkImage</code> handles:</p>
</div>
<div id="VkImage" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_VERSION_1_0
VK_DEFINE_NON_DISPATCHABLE_HANDLE(VkImage)</code></pre>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>To create images, call:</p>
</div>
<div id="vkCreateImage" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_VERSION_1_0
VkResult vkCreateImage(
    VkDevice                                    device,
    const VkImageCreateInfo*                    pCreateInfo,
    const VkAllocationCallbacks*                pAllocator,
    VkImage*                                    pImage);</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>device</code> is the logical device that creates the image.</p>
</li>
<li>
<p><code>pCreateInfo</code> is a pointer to a <a href="#VkImageCreateInfo">VkImageCreateInfo</a> structure
containing parameters to be used to create the image.</p>
</li>
<li>
<p><code>pAllocator</code> controls host memory allocation as described in the
<a href="memory.html#memory-allocation" class="xref page">Memory Allocation</a> chapter.</p>
</li>
<li>
<p><code>pImage</code> is a pointer to a <a href="#VkImage">VkImage</a> handle in which the
resulting image object is returned.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCreateImage-flags-00939" href="#VUID-vkCreateImage-flags-00939"></a> <span class="vuid">VUID-vkCreateImage-flags-00939</span><br>

If the <code>flags</code> member of <code>pCreateInfo</code> includes
<code>VK_IMAGE_CREATE_SPARSE_BINDING_BIT</code>,
and the <a href="features.html#features-extendedSparseAddressSpace" class="xref page">    <code>extendedSparseAddressSpace</code></a> feature is not enabled,
creating this <code>VkImage</code> <strong>must</strong> not cause the total required sparse
memory for all currently valid sparse resources on the device to exceed
<code>VkPhysicalDeviceLimits</code>::<code>sparseAddressSpaceSize</code></p>
</li>
<li>
<p><a id="VUID-vkCreateImage-flags-09385" href="#VUID-vkCreateImage-flags-09385"></a> <span class="vuid">VUID-vkCreateImage-flags-09385</span><br>

If the <code>flags</code> member of <code>pCreateInfo</code> includes
<code>VK_IMAGE_CREATE_SPARSE_BINDING_BIT</code>, the
<a href="features.html#features-extendedSparseAddressSpace" class="xref page">    <code>extendedSparseAddressSpace</code></a> feature is enabled, and the
<code>usage</code> member of <code>pCreateInfo</code> contains bits not in
<code>VkPhysicalDeviceExtendedSparseAddressSpacePropertiesNV</code>::<code>extendedSparseImageUsageFlags</code>,
creating this <code>VkImage</code> <strong>must</strong> not cause the total required sparse
memory for all currently valid sparse resources on the device, excluding
<code>VkBuffer</code> created with <code>usage</code> member of <code>pCreateInfo</code>
containing bits in
<code>VkPhysicalDeviceExtendedSparseAddressSpacePropertiesNV</code>::<code>extendedSparseBufferUsageFlags</code>
and <code>VkImage</code> created with <code>usage</code> member of <code>pCreateInfo</code>
containing bits in
<code>VkPhysicalDeviceExtendedSparseAddressSpacePropertiesNV</code>::<code>extendedSparseImageUsageFlags</code>,
to exceed <code>VkPhysicalDeviceLimits</code>::<code>sparseAddressSpaceSize</code></p>
</li>
<li>
<p><a id="VUID-vkCreateImage-flags-09386" href="#VUID-vkCreateImage-flags-09386"></a> <span class="vuid">VUID-vkCreateImage-flags-09386</span><br>

If the <code>flags</code> member of <code>pCreateInfo</code> includes
<code>VK_IMAGE_CREATE_SPARSE_BINDING_BIT</code> and the
<a href="features.html#features-extendedSparseAddressSpace" class="xref page">    <code>extendedSparseAddressSpace</code></a> feature is enabled, creating this
<code>VkImage</code> <strong>must</strong> not cause the total required sparse memory for all
currently valid sparse resources on the device to exceed
<code>VkPhysicalDeviceExtendedSparseAddressSpacePropertiesNV</code>::<code>extendedSparseAddressSpaceSize</code></p>
</li>
</ul>
</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCreateImage-pNext-06389" href="#VUID-vkCreateImage-pNext-06389"></a> <span class="vuid">VUID-vkCreateImage-pNext-06389</span><br>

If a <a href="#VkBufferCollectionImageCreateInfoFUCHSIA">VkBufferCollectionImageCreateInfoFUCHSIA</a> has been chained to
<code>pNext</code>, <code>pCreateInfo</code> <strong>must</strong> match the
<a href="#sysmem-chosen-create-infos">Sysmem chosen <code>VkImageCreateInfo</code></a>
excepting members <a href="#VkImageCreateInfo">VkImageCreateInfo</a>::<code>extent</code> and
<a href="#VkImageCreateInfo">VkImageCreateInfo</a>::<code>usage</code> in the match criteria</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCreateImage-device-parameter" href="#VUID-vkCreateImage-device-parameter"></a> <span class="vuid">VUID-vkCreateImage-device-parameter</span><br>
 <code>device</code> <strong>must</strong> be a valid <a href="devsandqueues.html#VkDevice" class="xref page">VkDevice</a> handle</p>
</li>
<li>
<p><a id="VUID-vkCreateImage-pCreateInfo-parameter" href="#VUID-vkCreateImage-pCreateInfo-parameter"></a> <span class="vuid">VUID-vkCreateImage-pCreateInfo-parameter</span><br>
 <code>pCreateInfo</code> <strong>must</strong> be a valid pointer to a valid <a href="#VkImageCreateInfo">VkImageCreateInfo</a> structure</p>
</li>
<li>
<p><a id="VUID-vkCreateImage-pAllocator-parameter" href="#VUID-vkCreateImage-pAllocator-parameter"></a> <span class="vuid">VUID-vkCreateImage-pAllocator-parameter</span><br>
 If <code>pAllocator</code> is not <code>NULL</code>, <code>pAllocator</code> <strong>must</strong> be a valid pointer to a valid <a href="memory.html#VkAllocationCallbacks" class="xref page">VkAllocationCallbacks</a> structure</p>
</li>
<li>
<p><a id="VUID-vkCreateImage-pImage-parameter" href="#VUID-vkCreateImage-pImage-parameter"></a> <span class="vuid">VUID-vkCreateImage-pImage-parameter</span><br>
 <code>pImage</code> <strong>must</strong> be a valid pointer to a <a href="#VkImage">VkImage</a> handle</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Return Codes</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><a href="fundamentals.html#fundamentals-successcodes" class="xref page">Success</a></dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><code>VK_SUCCESS</code></p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1"><a href="fundamentals.html#fundamentals-errorcodes" class="xref page">Failure</a></dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><code>VK_ERROR_OUT_OF_HOST_MEMORY</code></p>
</li>
<li>
<p><code>VK_ERROR_OUT_OF_DEVICE_MEMORY</code></p>
</li>
<li>
<p><code>VK_ERROR_COMPRESSION_EXHAUSTED_EXT</code></p>
</li>
<li>
<p><code>VK_ERROR_INVALID_OPAQUE_CAPTURE_ADDRESS_KHR</code></p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>VkImageCreateInfo</code> structure is defined as:</p>
</div>
<div id="VkImageCreateInfo" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_VERSION_1_0
typedef struct VkImageCreateInfo {
    VkStructureType          sType;
    const void*              pNext;
    VkImageCreateFlags       flags;
    VkImageType              imageType;
    VkFormat                 format;
    VkExtent3D               extent;
    uint32_t                 mipLevels;
    uint32_t                 arrayLayers;
    VkSampleCountFlagBits    samples;
    VkImageTiling            tiling;
    VkImageUsageFlags        usage;
    VkSharingMode            sharingMode;
    uint32_t                 queueFamilyIndexCount;
    const uint32_t*          pQueueFamilyIndices;
    VkImageLayout            initialLayout;
} VkImageCreateInfo;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is a <a href="fundamentals.html#VkStructureType" class="xref page">VkStructureType</a> value identifying this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>flags</code> is a bitmask of <a href="#VkImageCreateFlagBits">VkImageCreateFlagBits</a> describing
additional parameters of the image.</p>
</li>
<li>
<p><code>imageType</code> is a <a href="#VkImageType">VkImageType</a> value specifying the basic
dimensionality of the image.
Layers in array textures do not count as a dimension for the purposes of
the image type.</p>
</li>
<li>
<p><code>format</code> is a <a href="formats.html#VkFormat" class="xref page">VkFormat</a> describing the format and type of the
texel blocks that will be contained in the image.</p>
</li>
<li>
<p><code>extent</code> is a <a href="fundamentals.html#VkExtent3D" class="xref page">VkExtent3D</a> describing the number of data
elements in each dimension of the base level.</p>
</li>
<li>
<p><code>mipLevels</code> describes the number of levels of detail available for
minified sampling of the image.</p>
</li>
<li>
<p><code>arrayLayers</code> is the number of layers in the image.</p>
</li>
<li>
<p><code>samples</code> is a <a href="limits.html#VkSampleCountFlagBits" class="xref page">VkSampleCountFlagBits</a> value specifying the
number of <a href="primsrast.html#primsrast-multisampling" class="xref page">samples per texel</a>.</p>
</li>
<li>
<p><code>tiling</code> is a <a href="#VkImageTiling">VkImageTiling</a> value specifying the tiling
arrangement of the texel blocks in memory.</p>
</li>
<li>
<p><code>usage</code> is a bitmask of <a href="#VkImageUsageFlagBits">VkImageUsageFlagBits</a> describing the
intended usage of the image.</p>
</li>
<li>
<p><code>sharingMode</code> is a <a href="#VkSharingMode">VkSharingMode</a> value specifying the sharing
mode of the image when it will be accessed by multiple queue families.</p>
</li>
<li>
<p><code>queueFamilyIndexCount</code> is the number of entries in the
<code>pQueueFamilyIndices</code> array.</p>
</li>
<li>
<p><code>pQueueFamilyIndices</code> is a pointer to an array of queue families
that will access this image.
It is ignored if <code>sharingMode</code> is not
<code>VK_SHARING_MODE_CONCURRENT</code>.</p>
</li>
<li>
<p><code>initialLayout</code> is a <a href="#VkImageLayout">VkImageLayout</a> value specifying the
initial <a href="#VkImageLayout">VkImageLayout</a> of all image subresources of the image.
See <a href="#resources-image-layouts">Image Layouts</a>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Images created with <code>tiling</code> equal to <code>VK_IMAGE_TILING_LINEAR</code> have
further restrictions on their limits and capabilities compared to images
created with <code>tiling</code> equal to <code>VK_IMAGE_TILING_OPTIMAL</code>.
Creation of images with tiling <code>VK_IMAGE_TILING_LINEAR</code> <strong>may</strong> not be
supported unless other parameters meet all of the constraints:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>imageType</code> is <code>VK_IMAGE_TYPE_2D</code></p>
</li>
<li>
<p><code>format</code> is not a depth/stencil format</p>
</li>
<li>
<p><code>mipLevels</code> is 1</p>
</li>
<li>
<p><code>arrayLayers</code> is 1</p>
</li>
<li>
<p><code>samples</code> is <code>VK_SAMPLE_COUNT_1_BIT</code></p>
</li>
<li>
<p><code>usage</code> only includes <code>VK_IMAGE_USAGE_TRANSFER_SRC_BIT</code> and/or
<code>VK_IMAGE_USAGE_TRANSFER_DST_BIT</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Images created with one of the <a href="formats.html#formats-requiring-sampler-ycbcr-conversion" class="xref page">formats that require a sampler YC<sub>B</sub>C<sub>R</sub> conversion</a>, have further
restrictions on their limits and capabilities compared to images created
with other formats.
Creation of images with a format requiring
<a href="formats.html#formats-requiring-sampler-ycbcr-conversion" class="xref page">YC<sub>B</sub>C<sub>R</sub> conversion</a> <strong>may</strong> not
be supported unless other parameters meet all of the constraints:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>imageType</code> is <code>VK_IMAGE_TYPE_2D</code></p>
</li>
<li>
<p><code>mipLevels</code> is 1</p>
</li>
<li>
<p><code>arrayLayers</code> is 1, unless
the <code>ycbcrImageArrays</code> feature is enabled, or
otherwise indicated by
<a href="capabilities.html#VkImageFormatProperties" class="xref page">VkImageFormatProperties</a>::<code>maxArrayLayers</code>, as returned by
<a href="capabilities.html#vkGetPhysicalDeviceImageFormatProperties" class="xref page">vkGetPhysicalDeviceImageFormatProperties</a></p>
</li>
<li>
<p><code>samples</code> is <code>VK_SAMPLE_COUNT_1_BIT</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Implementations <strong>may</strong> support additional limits and capabilities beyond those
listed above.</p>
</div>
<div class="paragraph">
<p>To determine the set of valid <code>usage</code> bits for a given format, call
<a href="formats.html#vkGetPhysicalDeviceFormatProperties" class="xref page">vkGetPhysicalDeviceFormatProperties</a>.</p>
</div>
<div class="paragraph">
<p>If the size of the resultant image would exceed <code>maxResourceSize</code>, then
<a href="#vkCreateImage">vkCreateImage</a> <strong>must</strong> fail and return
<code>VK_ERROR_OUT_OF_DEVICE_MEMORY</code>.
This failure <strong>may</strong> occur even when all image creation parameters satisfy
their valid usage requirements.</p>
</div>
<div class="paragraph">
<p>If the implementation reports <code>VK_TRUE</code> in
<a href="limits.html#VkPhysicalDeviceHostImageCopyPropertiesEXT" class="xref page">VkPhysicalDeviceHostImageCopyPropertiesEXT</a>::<code>identicalMemoryTypeRequirements</code>,
usage of <code>VK_IMAGE_USAGE_HOST_TRANSFER_BIT_EXT</code> <strong>must</strong> not affect the
memory type requirements of the image as described in
<a href="sparsemem.html#sparsememory-memory-requirements" class="xref page">Sparse Resource Memory Requirements</a> and
<a href="#resources-association">Resource Memory Association</a>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="title">Note</div>
<div class="paragraph">
<p>For images created without <code>VK_IMAGE_CREATE_EXTENDED_USAGE_BIT</code> a
<code>usage</code> bit is valid if it is supported for the format the image is
created with.</p>
</div>
<div class="paragraph">
<p>For images created with <code>VK_IMAGE_CREATE_EXTENDED_USAGE_BIT</code> a
<code>usage</code> bit is valid if it is supported for at least one of the formats
a <code>VkImageView</code> created from the image <strong>can</strong> have (see
<a href="#resources-image-views">Image Views</a> for more detail).</p>
</div>
</td>
</tr>
</table>
</div>
<div id="resources-image-creation-limits" class="sidebarblock">
<div class="content">
<div class="title">Image Creation Limits</div>
<div class="paragraph">
<p>Valid values for some image creation parameters are limited by a numerical
upper bound or by inclusion in a bitset.
For example, <a href="#VkImageCreateInfo">VkImageCreateInfo</a>::<code>arrayLayers</code> is limited by
<code>imageCreateMaxArrayLayers</code>, defined below; and
<a href="#VkImageCreateInfo">VkImageCreateInfo</a>::<code>samples</code> is limited by
<code>imageCreateSampleCounts</code>, also defined below.</p>
</div>
<div class="paragraph">
<p>Several limiting values are defined below, as well as assisting values from
which the limiting values are derived.
The limiting values are referenced by the relevant valid usage statements of
<a href="#VkImageCreateInfo">VkImageCreateInfo</a>.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Let <code>uint64_t imageCreateDrmFormatModifiers[]</code> be the set of
<a href="../appendices/glossary.html#glossary-drm-format-modifier" class="xref page">Linux DRM format modifiers</a> that the
resultant image <strong>may</strong> have.</p>
<div class="ulist">
<ul>
<li>
<p>If <code>tiling</code> is not <code>VK_IMAGE_TILING_DRM_FORMAT_MODIFIER_EXT</code>,
then <code>imageCreateDrmFormatModifiers</code> is empty.</p>
</li>
<li>
<p>If <a href="#VkImageCreateInfo">VkImageCreateInfo</a>::<code>pNext</code> contains
<a href="#VkImageDrmFormatModifierExplicitCreateInfoEXT">VkImageDrmFormatModifierExplicitCreateInfoEXT</a>, then
<code>imageCreateDrmFormatModifiers</code> contains exactly one modifier,
<a href="#VkImageDrmFormatModifierExplicitCreateInfoEXT">VkImageDrmFormatModifierExplicitCreateInfoEXT</a>::<code>drmFormatModifier</code>.</p>
</li>
<li>
<p>If <a href="#VkImageCreateInfo">VkImageCreateInfo</a>::<code>pNext</code> contains
<a href="#VkImageDrmFormatModifierListCreateInfoEXT">VkImageDrmFormatModifierListCreateInfoEXT</a>, then
<code>imageCreateDrmFormatModifiers</code> contains the entire array
<a href="#VkImageDrmFormatModifierListCreateInfoEXT">VkImageDrmFormatModifierListCreateInfoEXT</a>::<code>pDrmFormatModifiers</code>.</p>
</li>
</ul>
</div>
</li>
<li>
<p>Let <code>VkBool32 imageCreateMaybeLinear</code> indicate if the resultant image
may be <a href="../appendices/glossary.html#glossary-linear-resource" class="xref page">linear</a>.</p>
<div class="ulist">
<ul>
<li>
<p>If <code>tiling</code> is <code>VK_IMAGE_TILING_LINEAR</code>, then
<code>imageCreateMaybeLinear</code> is <code>VK_TRUE</code>.</p>
</li>
<li>
<p>If <code>tiling</code> is <code>VK_IMAGE_TILING_OPTIMAL</code>, then
<code>imageCreateMaybeLinear</code> is <code>VK_FALSE</code>.</p>
</li>
<li>
<p>If <code>tiling</code> is <code>VK_IMAGE_TILING_DRM_FORMAT_MODIFIER_EXT</code>, then
<code>imageCreateMaybeLinear</code> is <code>VK_TRUE</code> if and only if
<code>imageCreateDrmFormatModifiers</code> contains
<code>DRM_FORMAT_MOD_LINEAR</code>.</p>
</li>
</ul>
</div>
</li>
<li>
<p>Let <code>VkFormatFeatureFlags imageCreateFormatFeatures</code> be the set of valid
<em>format features</em> available during image creation.</p>
<div class="ulist">
<ul>
<li>
<p>If <code>tiling</code> is <code>VK_IMAGE_TILING_LINEAR</code>, then
<code>imageCreateFormatFeatures</code> is the value of
<a href="formats.html#VkFormatProperties" class="xref page">VkFormatProperties</a>::<code>linearTilingFeatures</code> found by calling
<a href="formats.html#vkGetPhysicalDeviceFormatProperties" class="xref page">vkGetPhysicalDeviceFormatProperties</a> with parameter <code>format</code>
equal to <a href="#VkImageCreateInfo">VkImageCreateInfo</a>::<code>format</code>.</p>
</li>
<li>
<p>If <code>tiling</code> is <code>VK_IMAGE_TILING_OPTIMAL</code>,
and if the <code>pNext</code> chain includes no
<a href="#VkExternalFormatANDROID">VkExternalFormatANDROID</a>
or
<a href="#VkExternalFormatQNX">VkExternalFormatQNX</a>
structure with non-zero <code>externalFormat</code>,
then <code>imageCreateFormatFeatures</code> is the value of
<a href="formats.html#VkFormatProperties" class="xref page">VkFormatProperties</a>::<code>optimalTilingFeatures</code> found by calling
<a href="formats.html#vkGetPhysicalDeviceFormatProperties" class="xref page">vkGetPhysicalDeviceFormatProperties</a> with parameter <code>format</code>
equal to <a href="#VkImageCreateInfo">VkImageCreateInfo</a>::<code>format</code>.</p>
</li>
<li>
<p>If <code>tiling</code> is <code>VK_IMAGE_TILING_OPTIMAL</code>, and if the
<code>pNext</code> chain includes a <a href="#VkExternalFormatANDROID">VkExternalFormatANDROID</a> structure
with non-zero <code>externalFormat</code>, then
<code>imageCreateFormatFeatures</code> is the value of
<a href="memory.html#VkAndroidHardwareBufferFormatPropertiesANDROID" class="xref page">VkAndroidHardwareBufferFormatPropertiesANDROID</a>::<code>formatFeatures</code>
obtained by <a href="memory.html#vkGetAndroidHardwareBufferPropertiesANDROID" class="xref page">vkGetAndroidHardwareBufferPropertiesANDROID</a> with a
matching <code>externalFormat</code> value.</p>
</li>
<li>
<p>If <code>tiling</code> is <code>VK_IMAGE_TILING_OPTIMAL</code>, and if the
<code>pNext</code> chain includes a <a href="#VkExternalFormatQNX">VkExternalFormatQNX</a> structure with
non-zero <code>externalFormat</code>, then <code>imageCreateFormatFeatures</code> is
the value of
<a href="memory.html#VkScreenBufferFormatPropertiesQNX" class="xref page">VkScreenBufferFormatPropertiesQNX</a>::<code>formatFeatures</code> obtained
by <a href="memory.html#vkGetScreenBufferPropertiesQNX" class="xref page">vkGetScreenBufferPropertiesQNX</a> with a matching
<code>externalFormat</code> value.</p>
</li>
<li>
<p>If the <code>pNext</code> chain includes a
<a href="#VkBufferCollectionImageCreateInfoFUCHSIA">VkBufferCollectionImageCreateInfoFUCHSIA</a> structure, then
<code>imageCreateFormatFeatures</code> is the value of
<a href="#VkBufferCollectionPropertiesFUCHSIA">VkBufferCollectionPropertiesFUCHSIA</a>::<code>formatFeatures</code> found
by calling <a href="#vkGetBufferCollectionPropertiesFUCHSIA">vkGetBufferCollectionPropertiesFUCHSIA</a> with a
parameter <code>collection</code> equal to
<a href="#VkBufferCollectionImageCreateInfoFUCHSIA">VkBufferCollectionImageCreateInfoFUCHSIA</a>::<code>collection</code></p>
</li>
<li>
<p>If <code>tiling</code> is <code>VK_IMAGE_TILING_DRM_FORMAT_MODIFIER_EXT</code>, then
the value of <code>imageCreateFormatFeatures</code> is found by calling
<a href="formats.html#vkGetPhysicalDeviceFormatProperties2" class="xref page">vkGetPhysicalDeviceFormatProperties2</a> with
<a href="capabilities.html#VkImageFormatProperties" class="xref page">VkImageFormatProperties</a>::<code>format</code> equal to
<a href="#VkImageCreateInfo">VkImageCreateInfo</a>::<code>format</code> and with
<a href="formats.html#VkDrmFormatModifierPropertiesListEXT" class="xref page">VkDrmFormatModifierPropertiesListEXT</a> chained into
<a href="formats.html#VkFormatProperties2" class="xref page">VkFormatProperties2</a>; by collecting all members of the returned
array
<a href="formats.html#VkDrmFormatModifierPropertiesListEXT" class="xref page">VkDrmFormatModifierPropertiesListEXT</a>::<code>pDrmFormatModifierProperties</code>
whose <code>drmFormatModifier</code> belongs to
<code>imageCreateDrmFormatModifiers</code>; and by taking the bitwise
intersection, over the collected array members, of
<code>drmFormatModifierTilingFeatures</code>.
(The resultant <code>imageCreateFormatFeatures</code> <strong>may</strong> be empty).</p>
</li>
</ul>
</div>
</li>
<li>
<p>Let <code>VkImageFormatProperties2 imageCreateImageFormatPropertiesList[]</code> be
defined as follows.</p>
<div class="ulist">
<ul>
<li>
<p>If <a href="#VkImageCreateInfo">VkImageCreateInfo</a>::<code>pNext</code> contains no
<a href="#VkExternalFormatANDROID">VkExternalFormatANDROID</a>
or
<a href="#VkExternalFormatQNX">VkExternalFormatQNX</a>
structure with non-zero <code>externalFormat</code>, then
<code>imageCreateImageFormatPropertiesList</code> is
the list of structures obtained by calling
<a href="capabilities.html#vkGetPhysicalDeviceImageFormatProperties2" class="xref page">vkGetPhysicalDeviceImageFormatProperties2</a>, possibly multiple
times, as follows:</p>
<div class="ulist">
<ul>
<li>
<p>The parameters <a href="capabilities.html#VkPhysicalDeviceImageFormatInfo2" class="xref page">VkPhysicalDeviceImageFormatInfo2</a>::<code>format</code>,
<code>imageType</code>, <code>tiling</code>, <code>usage</code>, and <code>flags</code> <strong>must</strong> be
equal to those in <a href="#VkImageCreateInfo">VkImageCreateInfo</a>.</p>
</li>
<li>
<p>If <a href="#VkImageCreateInfo">VkImageCreateInfo</a>::<code>pNext</code> contains a
<a href="#VkExternalMemoryImageCreateInfo">VkExternalMemoryImageCreateInfo</a> structure whose
<code>handleTypes</code> is not <code>0</code>, then
<a href="capabilities.html#VkPhysicalDeviceImageFormatInfo2" class="xref page">VkPhysicalDeviceImageFormatInfo2</a>::<code>pNext</code> <strong>must</strong> contain a
<a href="capabilities.html#VkPhysicalDeviceExternalImageFormatInfo" class="xref page">VkPhysicalDeviceExternalImageFormatInfo</a> structure whose
<code>handleType</code> is not <code>0</code>; and
<a href="capabilities.html#vkGetPhysicalDeviceImageFormatProperties2" class="xref page">vkGetPhysicalDeviceImageFormatProperties2</a> <strong>must</strong> be called for
each handle type in
<a href="#VkExternalMemoryImageCreateInfo">VkExternalMemoryImageCreateInfo</a>::<code>handleTypes</code>, successively
setting
<a href="capabilities.html#VkPhysicalDeviceExternalImageFormatInfo" class="xref page">VkPhysicalDeviceExternalImageFormatInfo</a>::<code>handleType</code> on
each call.</p>
</li>
<li>
<p>If <a href="#VkImageCreateInfo">VkImageCreateInfo</a>::<code>pNext</code> contains no
<a href="#VkExternalMemoryImageCreateInfo">VkExternalMemoryImageCreateInfo</a> structure, or contains a
structure whose <code>handleTypes</code> is <code>0</code>, then
<a href="capabilities.html#VkPhysicalDeviceImageFormatInfo2" class="xref page">VkPhysicalDeviceImageFormatInfo2</a>::<code>pNext</code> <strong>must</strong> either
contain no <a href="capabilities.html#VkPhysicalDeviceExternalImageFormatInfo" class="xref page">VkPhysicalDeviceExternalImageFormatInfo</a> structure, or
contain a structure whose <code>handleType</code> is <code>0</code>.</p>
</li>
<li>
<p>If <a href="#VkImageCreateInfo">VkImageCreateInfo</a>::<code>pNext</code> contains a
<a href="videocoding.html#VkVideoProfileListInfoKHR" class="xref page">VkVideoProfileListInfoKHR</a> structure then
<a href="capabilities.html#VkPhysicalDeviceImageFormatInfo2" class="xref page">VkPhysicalDeviceImageFormatInfo2</a>::<code>pNext</code> <strong>must</strong> also contain
the same <a href="videocoding.html#VkVideoProfileListInfoKHR" class="xref page">VkVideoProfileListInfoKHR</a> structure on each call.</p>
</li>
<li>
<p>If <code>tiling</code> is <code>VK_IMAGE_TILING_DRM_FORMAT_MODIFIER_EXT</code>,
then:</p>
<div class="ulist">
<ul>
<li>
<p><a href="capabilities.html#VkPhysicalDeviceImageFormatInfo2" class="xref page">VkPhysicalDeviceImageFormatInfo2</a>::<code>pNext</code> <strong>must</strong> contain a
<a href="capabilities.html#VkPhysicalDeviceImageDrmFormatModifierInfoEXT" class="xref page">VkPhysicalDeviceImageDrmFormatModifierInfoEXT</a> structure where
<code>sharingMode</code> is equal to
<a href="#VkImageCreateInfo">VkImageCreateInfo</a>::<code>sharingMode</code>;</p>
</li>
<li>
<p>if <code>sharingMode</code> is <code>VK_SHARING_MODE_CONCURRENT</code>, then
<code>queueFamilyIndexCount</code> and <code>pQueueFamilyIndices</code> <strong>must</strong> be
equal to those in <a href="#VkImageCreateInfo">VkImageCreateInfo</a>;</p>
</li>
<li>
<p>if <code>flags</code> contains <code>VK_IMAGE_CREATE_MUTABLE_FORMAT_BIT</code>,
then the <a href="#VkImageFormatListCreateInfo">VkImageFormatListCreateInfo</a> structure included in the
<code>pNext</code> chain of <a href="capabilities.html#VkPhysicalDeviceImageFormatInfo2" class="xref page">VkPhysicalDeviceImageFormatInfo2</a> <strong>must</strong> be
equivalent to the one included in the <code>pNext</code> chain of
<a href="#VkImageCreateInfo">VkImageCreateInfo</a>;</p>
</li>
<li>
<p>if <a href="#VkImageCreateInfo">VkImageCreateInfo</a>::<code>pNext</code> contains a
<a href="#VkImageCompressionControlEXT">VkImageCompressionControlEXT</a> structure, then the
<a href="capabilities.html#VkPhysicalDeviceImageFormatInfo2" class="xref page">VkPhysicalDeviceImageFormatInfo2</a>::<code>pNext</code> chain <strong>must</strong>
contain an equivalent structure;</p>
</li>
<li>
<p><a href="capabilities.html#vkGetPhysicalDeviceImageFormatProperties2" class="xref page">vkGetPhysicalDeviceImageFormatProperties2</a> <strong>must</strong> be called for
each modifier in <code>imageCreateDrmFormatModifiers</code>, successively
setting
<a href="capabilities.html#VkPhysicalDeviceImageDrmFormatModifierInfoEXT" class="xref page">VkPhysicalDeviceImageDrmFormatModifierInfoEXT</a>::<code>drmFormatModifier</code>
on each call.</p>
</li>
</ul>
</div>
</li>
<li>
<p>If <code>tiling</code> is not <code>VK_IMAGE_TILING_DRM_FORMAT_MODIFIER_EXT</code>,
then <a href="capabilities.html#VkPhysicalDeviceImageFormatInfo2" class="xref page">VkPhysicalDeviceImageFormatInfo2</a>::<code>pNext</code> <strong>must</strong> contain
no <a href="capabilities.html#VkPhysicalDeviceImageDrmFormatModifierInfoEXT" class="xref page">VkPhysicalDeviceImageDrmFormatModifierInfoEXT</a> structure.</p>
</li>
<li>
<p>If any call to <a href="capabilities.html#vkGetPhysicalDeviceImageFormatProperties2" class="xref page">vkGetPhysicalDeviceImageFormatProperties2</a> returns
an error, then <code>imageCreateImageFormatPropertiesList</code> is defined
to be the empty list.</p>
</li>
</ul>
</div>
</li>
<li>
<p>If <a href="#VkImageCreateInfo">VkImageCreateInfo</a>::<code>pNext</code> contains a
<a href="#VkExternalFormatANDROID">VkExternalFormatANDROID</a> structure with non-zero
<code>externalFormat</code>, then <code>imageCreateImageFormatPropertiesList</code>
contains a single element where:</p>
<div class="ulist">
<ul>
<li>
<p><code>VkImageFormatProperties</code>::<code>maxMipLevels</code> is
<span class="eq">log<sub>2</sub>(max(<code>extent.width</code>, <code>extent.height</code>,
<code>extent.depth</code>)) +  1</span>.</p>
</li>
<li>
<p><code>VkImageFormatProperties</code>::<code>maxArrayLayers</code> is
<a href="limits.html#VkPhysicalDeviceLimits" class="xref page">VkPhysicalDeviceLimits</a>::<code>maxImageArrayLayers</code>.</p>
</li>
<li>
<p>Each component of <code>VkImageFormatProperties</code>::<code>maxExtent</code> is
<a href="limits.html#VkPhysicalDeviceLimits" class="xref page">VkPhysicalDeviceLimits</a>::<code>maxImageDimension2D</code>.</p>
</li>
<li>
<p><code>VkImageFormatProperties</code>::<code>sampleCounts</code> contains exactly
<code>VK_SAMPLE_COUNT_1_BIT</code>.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</li>
<li>
<p>Let <code>uint32_t imageCreateMaxMipLevels</code> be
the minimum value of <a href="capabilities.html#VkImageFormatProperties" class="xref page">VkImageFormatProperties</a>::<code>maxMipLevels</code>
in <code>imageCreateImageFormatPropertiesList</code>.
The value is <strong>undefined</strong> if <code>imageCreateImageFormatPropertiesList</code> is
empty.</p>
</li>
<li>
<p>Let <code>uint32_t imageCreateMaxArrayLayers</code> be
the minimum value of <a href="capabilities.html#VkImageFormatProperties" class="xref page">VkImageFormatProperties</a>::<code>maxArrayLayers</code>
in <code>imageCreateImageFormatPropertiesList</code>.
The value is <strong>undefined</strong> if <code>imageCreateImageFormatPropertiesList</code> is
empty.</p>
</li>
<li>
<p>Let <code>VkExtent3D imageCreateMaxExtent</code> be
the component-wise minimum over all
<a href="capabilities.html#VkImageFormatProperties" class="xref page">VkImageFormatProperties</a>::<code>maxExtent</code> values in
<code>imageCreateImageFormatPropertiesList</code>.
The value is <strong>undefined</strong> if <code>imageCreateImageFormatPropertiesList</code> is
empty.</p>
</li>
<li>
<p>Let <code>VkSampleCountFlags imageCreateSampleCounts</code> be
the intersection of each
<a href="capabilities.html#VkImageFormatProperties" class="xref page">VkImageFormatProperties</a>::<code>sampleCounts</code> in
<code>imageCreateImageFormatPropertiesList</code>.
The value is <strong>undefined</strong> if <code>imageCreateImageFormatPropertiesList</code> is
empty.</p>
</li>
<li>
<p>Let <code>VkVideoFormatPropertiesKHR videoFormatProperties[]</code> be defined as
follows.</p>
<div class="ulist">
<ul>
<li>
<p>If <a href="#VkImageCreateInfo">VkImageCreateInfo</a>::<code>pNext</code> contains a
<a href="videocoding.html#VkVideoProfileListInfoKHR" class="xref page">VkVideoProfileListInfoKHR</a> structure, then <code>videoFormatProperties</code>
is the list of structures obtained by calling
<a href="videocoding.html#vkGetPhysicalDeviceVideoFormatPropertiesKHR" class="xref page">vkGetPhysicalDeviceVideoFormatPropertiesKHR</a> with
<a href="videocoding.html#VkPhysicalDeviceVideoFormatInfoKHR" class="xref page">VkPhysicalDeviceVideoFormatInfoKHR</a>::<code>imageUsage</code> equal to the
<code>usage</code> member of <a href="#VkImageCreateInfo">VkImageCreateInfo</a> and
<a href="videocoding.html#VkPhysicalDeviceVideoFormatInfoKHR" class="xref page">VkPhysicalDeviceVideoFormatInfoKHR</a>::<code>pNext</code> containing the
same <a href="videocoding.html#VkVideoProfileListInfoKHR" class="xref page">VkVideoProfileListInfoKHR</a> structure chained to
<a href="#VkImageCreateInfo">VkImageCreateInfo</a>.</p>
</li>
<li>
<p>If <a href="#VkImageCreateInfo">VkImageCreateInfo</a>::<code>pNext</code> contains no
<a href="videocoding.html#VkVideoProfileListInfoKHR" class="xref page">VkVideoProfileListInfoKHR</a> structure, then <code>videoFormatProperties</code>
is an empty list.</p>
</li>
</ul>
</div>
</li>
<li>
<p>Let <code>VkBool32 supportedVideoFormat</code> indicate if the image parameters are
supported by the specified video profiles.</p>
<div class="ulist">
<ul>
<li>
<p><code>supportedVideoFormat</code> is <code>VK_TRUE</code> if there exists an element in
the <code>videoFormatProperties</code> list for which all of the following
conditions are true:</p>
<div class="ulist">
<ul>
<li>
<p><a href="#VkImageCreateInfo">VkImageCreateInfo</a>::<code>format</code> equals
<a href="videocoding.html#VkVideoFormatPropertiesKHR" class="xref page">VkVideoFormatPropertiesKHR</a>::<code>format</code>.</p>
</li>
<li>
<p><a href="#VkImageCreateInfo">VkImageCreateInfo</a>::<code>flags</code> only contains bits also set in
<a href="videocoding.html#VkVideoFormatPropertiesKHR" class="xref page">VkVideoFormatPropertiesKHR</a>::<code>imageCreateFlags</code>.</p>
</li>
<li>
<p><a href="#VkImageCreateInfo">VkImageCreateInfo</a>::<code>imageType</code> equals
<a href="videocoding.html#VkVideoFormatPropertiesKHR" class="xref page">VkVideoFormatPropertiesKHR</a>::<code>imageType</code>.</p>
</li>
<li>
<p><a href="#VkImageCreateInfo">VkImageCreateInfo</a>::<code>tiling</code> equals
<a href="videocoding.html#VkVideoFormatPropertiesKHR" class="xref page">VkVideoFormatPropertiesKHR</a>::<code>imageTiling</code>.</p>
</li>
<li>
<p><a href="#VkImageCreateInfo">VkImageCreateInfo</a>::<code>usage</code> only contains bits also set in
<a href="videocoding.html#VkVideoFormatPropertiesKHR" class="xref page">VkVideoFormatPropertiesKHR</a>::<code>imageUsageFlags</code>, or
<a href="#VkImageCreateInfo">VkImageCreateInfo</a>::<code>flags</code> includes
<code>VK_IMAGE_CREATE_EXTENDED_USAGE_BIT</code>.</p>
</li>
</ul>
</div>
</li>
<li>
<p>Otherwise <code>supportedVideoFormat</code> is <code>VK_FALSE</code>.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkImageCreateInfo-imageCreateMaxMipLevels-02251" href="#VUID-VkImageCreateInfo-imageCreateMaxMipLevels-02251"></a> <span class="vuid">VUID-VkImageCreateInfo-imageCreateMaxMipLevels-02251</span><br>

Each of the following values (as described in
<a href="#resources-image-creation-limits">Image Creation Limits</a>) <strong>must</strong> not be
<strong>undefined</strong> : <code>imageCreateMaxMipLevels</code>,
<code>imageCreateMaxArrayLayers</code>, <code>imageCreateMaxExtent</code>, and
<code>imageCreateSampleCounts</code></p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-sharingMode-00941" href="#VUID-VkImageCreateInfo-sharingMode-00941"></a> <span class="vuid">VUID-VkImageCreateInfo-sharingMode-00941</span><br>

If <code>sharingMode</code> is <code>VK_SHARING_MODE_CONCURRENT</code>,
<code>pQueueFamilyIndices</code> <strong>must</strong> be a valid pointer to an array of
<code>queueFamilyIndexCount</code> <code>uint32_t</code> values</p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-sharingMode-00942" href="#VUID-VkImageCreateInfo-sharingMode-00942"></a> <span class="vuid">VUID-VkImageCreateInfo-sharingMode-00942</span><br>

If <code>sharingMode</code> is <code>VK_SHARING_MODE_CONCURRENT</code>,
<code>queueFamilyIndexCount</code> <strong>must</strong> be greater than <code>1</code></p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-sharingMode-01420" href="#VUID-VkImageCreateInfo-sharingMode-01420"></a> <span class="vuid">VUID-VkImageCreateInfo-sharingMode-01420</span><br>

If <code>sharingMode</code> is <code>VK_SHARING_MODE_CONCURRENT</code>, each element
of <code>pQueueFamilyIndices</code> <strong>must</strong> be unique and <strong>must</strong> be less than
<code>pQueueFamilyPropertyCount</code> returned by either
<a href="devsandqueues.html#vkGetPhysicalDeviceQueueFamilyProperties" class="xref page">vkGetPhysicalDeviceQueueFamilyProperties</a> or
<a href="devsandqueues.html#vkGetPhysicalDeviceQueueFamilyProperties2" class="xref page">vkGetPhysicalDeviceQueueFamilyProperties2</a> for the
<code>physicalDevice</code> that was used to create <code>device</code></p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-pNext-01974" href="#VUID-VkImageCreateInfo-pNext-01974"></a> <span class="vuid">VUID-VkImageCreateInfo-pNext-01974</span><br>

If the <code>pNext</code> chain includes a <a href="#VkExternalFormatANDROID">VkExternalFormatANDROID</a>
structure, and its <code>externalFormat</code> member is non-zero the
<code>format</code> <strong>must</strong> be <code>VK_FORMAT_UNDEFINED</code></p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-pNext-01975" href="#VUID-VkImageCreateInfo-pNext-01975"></a> <span class="vuid">VUID-VkImageCreateInfo-pNext-01975</span><br>

If the <code>pNext</code> chain does not include a
<a href="#VkExternalFormatANDROID">VkExternalFormatANDROID</a> structure, or does and its
<code>externalFormat</code> member is <code>0</code>, the <code>format</code> <strong>must</strong> not be
<code>VK_FORMAT_UNDEFINED</code></p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-extent-00944" href="#VUID-VkImageCreateInfo-extent-00944"></a> <span class="vuid">VUID-VkImageCreateInfo-extent-00944</span><br>

<code>extent.width</code> <strong>must</strong> be greater than <code>0</code></p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-extent-00945" href="#VUID-VkImageCreateInfo-extent-00945"></a> <span class="vuid">VUID-VkImageCreateInfo-extent-00945</span><br>

<code>extent.height</code> <strong>must</strong> be greater than <code>0</code></p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-extent-00946" href="#VUID-VkImageCreateInfo-extent-00946"></a> <span class="vuid">VUID-VkImageCreateInfo-extent-00946</span><br>

<code>extent.depth</code> <strong>must</strong> be greater than <code>0</code></p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-mipLevels-00947" href="#VUID-VkImageCreateInfo-mipLevels-00947"></a> <span class="vuid">VUID-VkImageCreateInfo-mipLevels-00947</span><br>

<code>mipLevels</code> <strong>must</strong> be greater than <code>0</code></p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-arrayLayers-00948" href="#VUID-VkImageCreateInfo-arrayLayers-00948"></a> <span class="vuid">VUID-VkImageCreateInfo-arrayLayers-00948</span><br>

<code>arrayLayers</code> <strong>must</strong> be greater than <code>0</code></p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-flags-00949" href="#VUID-VkImageCreateInfo-flags-00949"></a> <span class="vuid">VUID-VkImageCreateInfo-flags-00949</span><br>

If <code>flags</code> contains <code>VK_IMAGE_CREATE_CUBE_COMPATIBLE_BIT</code>,
<code>imageType</code> <strong>must</strong> be <code>VK_IMAGE_TYPE_2D</code></p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-flags-08865" href="#VUID-VkImageCreateInfo-flags-08865"></a> <span class="vuid">VUID-VkImageCreateInfo-flags-08865</span><br>

If <code>flags</code> contains <code>VK_IMAGE_CREATE_CUBE_COMPATIBLE_BIT</code>,
<code>extent.width</code> and <code>extent.height</code> <strong>must</strong> be equal</p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-flags-08866" href="#VUID-VkImageCreateInfo-flags-08866"></a> <span class="vuid">VUID-VkImageCreateInfo-flags-08866</span><br>

If <code>flags</code> contains <code>VK_IMAGE_CREATE_CUBE_COMPATIBLE_BIT</code>,
<code>arrayLayers</code> <strong>must</strong> be greater than or equal to 6</p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-flags-02557" href="#VUID-VkImageCreateInfo-flags-02557"></a> <span class="vuid">VUID-VkImageCreateInfo-flags-02557</span><br>

If <code>flags</code> contains
<code>VK_IMAGE_USAGE_FRAGMENT_DENSITY_MAP_BIT_EXT</code>, <code>imageType</code> <strong>must</strong>
be <code>VK_IMAGE_TYPE_2D</code></p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-flags-00950" href="#VUID-VkImageCreateInfo-flags-00950"></a> <span class="vuid">VUID-VkImageCreateInfo-flags-00950</span><br>

If <code>flags</code> contains <code>VK_IMAGE_CREATE_2D_ARRAY_COMPATIBLE_BIT</code>,
<code>imageType</code> <strong>must</strong> be <code>VK_IMAGE_TYPE_3D</code></p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-flags-09403" href="#VUID-VkImageCreateInfo-flags-09403"></a> <span class="vuid">VUID-VkImageCreateInfo-flags-09403</span><br>

If <code>flags</code> contains <code>VK_IMAGE_CREATE_2D_ARRAY_COMPATIBLE_BIT</code>,
<code>flags</code> <strong>must</strong> not include <code>VK_IMAGE_CREATE_SPARSE_ALIASED_BIT</code>,
<code>VK_IMAGE_CREATE_SPARSE_BINDING_BIT</code>, or
<code>VK_IMAGE_CREATE_SPARSE_RESIDENCY_BIT</code></p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-flags-07755" href="#VUID-VkImageCreateInfo-flags-07755"></a> <span class="vuid">VUID-VkImageCreateInfo-flags-07755</span><br>

If <code>flags</code> contains
<code>VK_IMAGE_CREATE_2D_VIEW_COMPATIBLE_BIT_EXT</code>, <code>imageType</code> <strong>must</strong>
be <code>VK_IMAGE_TYPE_3D</code></p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-extent-02252" href="#VUID-VkImageCreateInfo-extent-02252"></a> <span class="vuid">VUID-VkImageCreateInfo-extent-02252</span><br>

<code>extent.width</code> <strong>must</strong> be less than or equal to
<code>imageCreateMaxExtent.width</code> (as defined in
<a href="#resources-image-creation-limits">Image Creation Limits</a>)</p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-extent-02253" href="#VUID-VkImageCreateInfo-extent-02253"></a> <span class="vuid">VUID-VkImageCreateInfo-extent-02253</span><br>

<code>extent.height</code> <strong>must</strong> be less than or equal to
<code>imageCreateMaxExtent.height</code> (as defined in
<a href="#resources-image-creation-limits">Image Creation Limits</a>)</p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-extent-02254" href="#VUID-VkImageCreateInfo-extent-02254"></a> <span class="vuid">VUID-VkImageCreateInfo-extent-02254</span><br>

<code>extent.depth</code> <strong>must</strong> be less than or equal to
<code>imageCreateMaxExtent.depth</code> (as defined in
<a href="#resources-image-creation-limits">Image Creation Limits</a>)</p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-imageType-00956" href="#VUID-VkImageCreateInfo-imageType-00956"></a> <span class="vuid">VUID-VkImageCreateInfo-imageType-00956</span><br>

If <code>imageType</code> is <code>VK_IMAGE_TYPE_1D</code>, both <code>extent.height</code>
and <code>extent.depth</code> <strong>must</strong> be <code>1</code></p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-imageType-00957" href="#VUID-VkImageCreateInfo-imageType-00957"></a> <span class="vuid">VUID-VkImageCreateInfo-imageType-00957</span><br>

If <code>imageType</code> is <code>VK_IMAGE_TYPE_2D</code>, <code>extent.depth</code> <strong>must</strong>
be <code>1</code></p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-mipLevels-00958" href="#VUID-VkImageCreateInfo-mipLevels-00958"></a> <span class="vuid">VUID-VkImageCreateInfo-mipLevels-00958</span><br>

<code>mipLevels</code> <strong>must</strong> be less than or equal to the number of levels in
the complete mipmap chain based on <span class="eq"><code>extent.width</code></span>,
<span class="eq"><code>extent.height</code></span>, and <span class="eq"><code>extent.depth</code></span></p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-mipLevels-02255" href="#VUID-VkImageCreateInfo-mipLevels-02255"></a> <span class="vuid">VUID-VkImageCreateInfo-mipLevels-02255</span><br>

<code>mipLevels</code> <strong>must</strong> be less than or equal to
<code>imageCreateMaxMipLevels</code> (as defined in
<a href="#resources-image-creation-limits">Image Creation Limits</a>)</p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-arrayLayers-02256" href="#VUID-VkImageCreateInfo-arrayLayers-02256"></a> <span class="vuid">VUID-VkImageCreateInfo-arrayLayers-02256</span><br>

<code>arrayLayers</code> <strong>must</strong> be less than or equal to
<code>imageCreateMaxArrayLayers</code> (as defined in
<a href="#resources-image-creation-limits">Image Creation Limits</a>)</p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-imageType-00961" href="#VUID-VkImageCreateInfo-imageType-00961"></a> <span class="vuid">VUID-VkImageCreateInfo-imageType-00961</span><br>

If <code>imageType</code> is <code>VK_IMAGE_TYPE_3D</code>, <code>arrayLayers</code> <strong>must</strong> be
<code>1</code></p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-samples-02257" href="#VUID-VkImageCreateInfo-samples-02257"></a> <span class="vuid">VUID-VkImageCreateInfo-samples-02257</span><br>

If <code>samples</code> is not <code>VK_SAMPLE_COUNT_1_BIT</code>, then
<code>imageType</code> <strong>must</strong> be <code>VK_IMAGE_TYPE_2D</code>, <code>flags</code> <strong>must</strong> not
contain <code>VK_IMAGE_CREATE_CUBE_COMPATIBLE_BIT</code>, <code>mipLevels</code> <strong>must</strong>
be equal to <code>1</code>, and <code>imageCreateMaybeLinear</code> (as defined in
<a href="#resources-image-creation-limits">Image Creation Limits</a>) <strong>must</strong> be
<code>VK_FALSE</code>,</p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-samples-02558" href="#VUID-VkImageCreateInfo-samples-02558"></a> <span class="vuid">VUID-VkImageCreateInfo-samples-02558</span><br>

If <code>samples</code> is not <code>VK_SAMPLE_COUNT_1_BIT</code>, <code>usage</code> <strong>must</strong>
not contain <code>VK_IMAGE_USAGE_FRAGMENT_DENSITY_MAP_BIT_EXT</code></p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-usage-00963" href="#VUID-VkImageCreateInfo-usage-00963"></a> <span class="vuid">VUID-VkImageCreateInfo-usage-00963</span><br>

If <code>usage</code> includes <code>VK_IMAGE_USAGE_TRANSIENT_ATTACHMENT_BIT</code>,
then bits other than <code>VK_IMAGE_USAGE_COLOR_ATTACHMENT_BIT</code>,
<code>VK_IMAGE_USAGE_DEPTH_STENCIL_ATTACHMENT_BIT</code>, and
<code>VK_IMAGE_USAGE_INPUT_ATTACHMENT_BIT</code> <strong>must</strong> not be set</p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-usage-00964" href="#VUID-VkImageCreateInfo-usage-00964"></a> <span class="vuid">VUID-VkImageCreateInfo-usage-00964</span><br>

If <code>usage</code> includes <code>VK_IMAGE_USAGE_COLOR_ATTACHMENT_BIT</code>,
<code>VK_IMAGE_USAGE_DEPTH_STENCIL_ATTACHMENT_BIT</code>,
<code>VK_IMAGE_USAGE_TRANSIENT_ATTACHMENT_BIT</code>, or
<code>VK_IMAGE_USAGE_INPUT_ATTACHMENT_BIT</code>, <code>extent.width</code> <strong>must</strong> be
less than or equal to
<code>VkPhysicalDeviceLimits</code>::<code>maxFramebufferWidth</code></p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-usage-00965" href="#VUID-VkImageCreateInfo-usage-00965"></a> <span class="vuid">VUID-VkImageCreateInfo-usage-00965</span><br>

If <code>usage</code> includes <code>VK_IMAGE_USAGE_COLOR_ATTACHMENT_BIT</code>,
<code>VK_IMAGE_USAGE_DEPTH_STENCIL_ATTACHMENT_BIT</code>,
<code>VK_IMAGE_USAGE_TRANSIENT_ATTACHMENT_BIT</code>, or
<code>VK_IMAGE_USAGE_INPUT_ATTACHMENT_BIT</code>, <code>extent.height</code> <strong>must</strong> be
less than or equal to
<code>VkPhysicalDeviceLimits</code>::<code>maxFramebufferHeight</code></p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-fragmentDensityMapOffset-06514" href="#VUID-VkImageCreateInfo-fragmentDensityMapOffset-06514"></a> <span class="vuid">VUID-VkImageCreateInfo-fragmentDensityMapOffset-06514</span><br>

If the <a href="features.html#features-fragmentDensityMapOffsets" class="xref page">    <code>fragmentDensityMapOffset</code></a> feature is not enabled and <code>usage</code>
includes <code>VK_IMAGE_USAGE_FRAGMENT_DENSITY_MAP_BIT_EXT</code>,
<code>extent.width</code> <strong>must</strong> be less than or equal to
<span class="steminline"> <svg style="vertical-align: -1.469ex; overflow: visible;" xmlns="http://www.w3.org/2000/svg" width="29.275ex" height="4.07ex" role="img" focusable="false" viewBox="0 -1149.5 12939.5 1799"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mrow"><g data-mml-node="mo" transform="translate(0 -0.5)"><path data-c="2308" d="M224 -649V1150H511V1099H275V-649H224Z"></path></g><g data-mml-node="TeXAtom" data-mjx-texclass="ORD" transform="translate(528,0)"><g data-mml-node="mfrac"><g data-mml-node="mrow" transform="translate(2080.9,485) scale(0.707)"><g data-mml-node="mi"><path data-c="1D45A" d="M21 287Q22 293 24 303T36 341T56 388T88 425T132 442T175 435T205 417T221 395T229 376L231 369Q231 367 232 367L243 378Q303 442 384 442Q401 442 415 440T441 433T460 423T475 411T485 398T493 385T497 373T500 364T502 357L510 367Q573 442 659 442Q713 442 746 415T780 336Q780 285 742 178T704 50Q705 36 709 31T724 26Q752 26 776 56T815 138Q818 149 821 151T837 153Q857 153 857 145Q857 144 853 130Q845 101 831 73T785 17T716 -10Q669 -10 648 17T627 73Q627 92 663 193T700 345Q700 404 656 404H651Q565 404 506 303L499 291L466 157Q433 26 428 16Q415 -11 385 -11Q372 -11 364 -4T353 8T350 18Q350 29 384 161L420 307Q423 322 423 345Q423 404 379 404H374Q288 404 229 303L222 291L189 157Q156 26 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 112 181Q151 335 151 342Q154 357 154 369Q154 405 129 405Q107 405 92 377T69 316T57 280Q55 278 41 278H27Q21 284 21 287Z"></path></g><g data-mml-node="mi" transform="translate(878,0)"><path data-c="1D44E" d="M33 157Q33 258 109 349T280 441Q331 441 370 392Q386 422 416 422Q429 422 439 414T449 394Q449 381 412 234T374 68Q374 43 381 35T402 26Q411 27 422 35Q443 55 463 131Q469 151 473 152Q475 153 483 153H487Q506 153 506 144Q506 138 501 117T481 63T449 13Q436 0 417 -8Q409 -10 393 -10Q359 -10 336 5T306 36L300 51Q299 52 296 50Q294 48 292 46Q233 -10 172 -10Q117 -10 75 30T33 157ZM351 328Q351 334 346 350T323 385T277 405Q242 405 210 374T160 293Q131 214 119 129Q119 126 119 118T118 106Q118 61 136 44T179 26Q217 26 254 59T298 110Q300 114 325 217T351 328Z"></path></g><g data-mml-node="mi" transform="translate(1407,0)"><path data-c="1D465" d="M52 289Q59 331 106 386T222 442Q257 442 286 424T329 379Q371 442 430 442Q467 442 494 420T522 361Q522 332 508 314T481 292T458 288Q439 288 427 299T415 328Q415 374 465 391Q454 404 425 404Q412 404 406 402Q368 386 350 336Q290 115 290 78Q290 50 306 38T341 26Q378 26 414 59T463 140Q466 150 469 151T485 153H489Q504 153 504 145Q504 144 502 134Q486 77 440 33T333 -11Q263 -11 227 52Q186 -10 133 -10H127Q78 -10 57 16T35 71Q35 103 54 123T99 143Q142 143 142 101Q142 81 130 66T107 46T94 41L91 40Q91 39 97 36T113 29T132 26Q168 26 194 71Q203 87 217 139T245 247T261 313Q266 340 266 352Q266 380 251 392T217 404Q177 404 142 372T93 290Q91 281 88 280T72 278H58Q52 284 52 289Z"></path></g><g data-mml-node="mi" transform="translate(1979,0)"><path data-c="1D439" d="M48 1Q31 1 31 11Q31 13 34 25Q38 41 42 43T65 46Q92 46 125 49Q139 52 144 61Q146 66 215 342T285 622Q285 629 281 629Q273 632 228 634H197Q191 640 191 642T193 659Q197 676 203 680H742Q749 676 749 669Q749 664 736 557T722 447Q720 440 702 440H690Q683 445 683 453Q683 454 686 477T689 530Q689 560 682 579T663 610T626 626T575 633T503 634H480Q398 633 393 631Q388 629 386 623Q385 622 352 492L320 363H375Q378 363 398 363T426 364T448 367T472 374T489 386Q502 398 511 419T524 457T529 475Q532 480 548 480H560Q567 475 567 470Q567 467 536 339T502 207Q500 200 482 200H470Q463 206 463 212Q463 215 468 234T473 274Q473 303 453 310T364 317H309L277 190Q245 66 245 60Q245 46 334 46H359Q365 40 365 39T363 19Q359 6 353 0H336Q295 2 185 2Q120 2 86 2T48 1Z"></path></g><g data-mml-node="mi" transform="translate(2728,0)"><path data-c="1D45F" d="M21 287Q22 290 23 295T28 317T38 348T53 381T73 411T99 433T132 442Q161 442 183 430T214 408T225 388Q227 382 228 382T236 389Q284 441 347 441H350Q398 441 422 400Q430 381 430 363Q430 333 417 315T391 292T366 288Q346 288 334 299T322 328Q322 376 378 392Q356 405 342 405Q286 405 239 331Q229 315 224 298T190 165Q156 25 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 114 189T154 366Q154 405 128 405Q107 405 92 377T68 316T57 280Q55 278 41 278H27Q21 284 21 287Z"></path></g><g data-mml-node="mi" transform="translate(3179,0)"><path data-c="1D44E" d="M33 157Q33 258 109 349T280 441Q331 441 370 392Q386 422 416 422Q429 422 439 414T449 394Q449 381 412 234T374 68Q374 43 381 35T402 26Q411 27 422 35Q443 55 463 131Q469 151 473 152Q475 153 483 153H487Q506 153 506 144Q506 138 501 117T481 63T449 13Q436 0 417 -8Q409 -10 393 -10Q359 -10 336 5T306 36L300 51Q299 52 296 50Q294 48 292 46Q233 -10 172 -10Q117 -10 75 30T33 157ZM351 328Q351 334 346 350T323 385T277 405Q242 405 210 374T160 293Q131 214 119 129Q119 126 119 118T118 106Q118 61 136 44T179 26Q217 26 254 59T298 110Q300 114 325 217T351 328Z"></path></g><g data-mml-node="mi" transform="translate(3708,0)"><path data-c="1D45A" d="M21 287Q22 293 24 303T36 341T56 388T88 425T132 442T175 435T205 417T221 395T229 376L231 369Q231 367 232 367L243 378Q303 442 384 442Q401 442 415 440T441 433T460 423T475 411T485 398T493 385T497 373T500 364T502 357L510 367Q573 442 659 442Q713 442 746 415T780 336Q780 285 742 178T704 50Q705 36 709 31T724 26Q752 26 776 56T815 138Q818 149 821 151T837 153Q857 153 857 145Q857 144 853 130Q845 101 831 73T785 17T716 -10Q669 -10 648 17T627 73Q627 92 663 193T700 345Q700 404 656 404H651Q565 404 506 303L499 291L466 157Q433 26 428 16Q415 -11 385 -11Q372 -11 364 -4T353 8T350 18Q350 29 384 161L420 307Q423 322 423 345Q423 404 379 404H374Q288 404 229 303L222 291L189 157Q156 26 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 112 181Q151 335 151 342Q154 357 154 369Q154 405 129 405Q107 405 92 377T69 316T57 280Q55 278 41 278H27Q21 284 21 287Z"></path></g><g data-mml-node="mi" transform="translate(4586,0)"><path data-c="1D452" d="M39 168Q39 225 58 272T107 350T174 402T244 433T307 442H310Q355 442 388 420T421 355Q421 265 310 237Q261 224 176 223Q139 223 138 221Q138 219 132 186T125 128Q125 81 146 54T209 26T302 45T394 111Q403 121 406 121Q410 121 419 112T429 98T420 82T390 55T344 24T281 -1T205 -11Q126 -11 83 42T39 168ZM373 353Q367 405 305 405Q272 405 244 391T199 357T170 316T154 280T149 261Q149 260 169 260Q282 260 327 284T373 353Z"></path></g><g data-mml-node="mi" transform="translate(5052,0)"><path data-c="1D44F" d="M73 647Q73 657 77 670T89 683Q90 683 161 688T234 694Q246 694 246 685T212 542Q204 508 195 472T180 418L176 399Q176 396 182 402Q231 442 283 442Q345 442 383 396T422 280Q422 169 343 79T173 -11Q123 -11 82 27T40 150V159Q40 180 48 217T97 414Q147 611 147 623T109 637Q104 637 101 637H96Q86 637 83 637T76 640T73 647ZM336 325V331Q336 405 275 405Q258 405 240 397T207 376T181 352T163 330L157 322L136 236Q114 150 114 114Q114 66 138 42Q154 26 178 26Q211 26 245 58Q270 81 285 114T318 219Q336 291 336 325Z"></path></g><g data-mml-node="mi" transform="translate(5481,0)"><path data-c="1D462" d="M21 287Q21 295 30 318T55 370T99 420T158 442Q204 442 227 417T250 358Q250 340 216 246T182 105Q182 62 196 45T238 27T291 44T328 78L339 95Q341 99 377 247Q407 367 413 387T427 416Q444 431 463 431Q480 431 488 421T496 402L420 84Q419 79 419 68Q419 43 426 35T447 26Q469 29 482 57T512 145Q514 153 532 153Q551 153 551 144Q550 139 549 130T540 98T523 55T498 17T462 -8Q454 -10 438 -10Q372 -10 347 46Q345 45 336 36T318 21T296 6T267 -6T233 -11Q189 -11 155 7Q103 38 103 113Q103 170 138 262T173 379Q173 380 173 381Q173 390 173 393T169 400T158 404H154Q131 404 112 385T82 344T65 302T57 280Q55 278 41 278H27Q21 284 21 287Z"></path></g><g data-mml-node="mi" transform="translate(6053,0)"><path data-c="1D453" d="M118 -162Q120 -162 124 -164T135 -167T147 -168Q160 -168 171 -155T187 -126Q197 -99 221 27T267 267T289 382V385H242Q195 385 192 387Q188 390 188 397L195 425Q197 430 203 430T250 431Q298 431 298 432Q298 434 307 482T319 540Q356 705 465 705Q502 703 526 683T550 630Q550 594 529 578T487 561Q443 561 443 603Q443 622 454 636T478 657L487 662Q471 668 457 668Q445 668 434 658T419 630Q412 601 403 552T387 469T380 433Q380 431 435 431Q480 431 487 430T498 424Q499 420 496 407T491 391Q489 386 482 386T428 385H372L349 263Q301 15 282 -47Q255 -132 212 -173Q175 -205 139 -205Q107 -205 81 -186T55 -132Q55 -95 76 -78T118 -61Q162 -61 162 -103Q162 -122 151 -136T127 -157L118 -162Z"></path></g><g data-mml-node="mi" transform="translate(6603,0)"><path data-c="1D453" d="M118 -162Q120 -162 124 -164T135 -167T147 -168Q160 -168 171 -155T187 -126Q197 -99 221 27T267 267T289 382V385H242Q195 385 192 387Q188 390 188 397L195 425Q197 430 203 430T250 431Q298 431 298 432Q298 434 307 482T319 540Q356 705 465 705Q502 703 526 683T550 630Q550 594 529 578T487 561Q443 561 443 603Q443 622 454 636T478 657L487 662Q471 668 457 668Q445 668 434 658T419 630Q412 601 403 552T387 469T380 433Q380 431 435 431Q480 431 487 430T498 424Q499 420 496 407T491 391Q489 386 482 386T428 385H372L349 263Q301 15 282 -47Q255 -132 212 -173Q175 -205 139 -205Q107 -205 81 -186T55 -132Q55 -95 76 -78T118 -61Q162 -61 162 -103Q162 -122 151 -136T127 -157L118 -162Z"></path></g><g data-mml-node="mi" transform="translate(7153,0)"><path data-c="1D452" d="M39 168Q39 225 58 272T107 350T174 402T244 433T307 442H310Q355 442 388 420T421 355Q421 265 310 237Q261 224 176 223Q139 223 138 221Q138 219 132 186T125 128Q125 81 146 54T209 26T302 45T394 111Q403 121 406 121Q410 121 419 112T429 98T420 82T390 55T344 24T281 -1T205 -11Q126 -11 83 42T39 168ZM373 353Q367 405 305 405Q272 405 244 391T199 357T170 316T154 280T149 261Q149 260 169 260Q282 260 327 284T373 353Z"></path></g><g data-mml-node="mi" transform="translate(7619,0)"><path data-c="1D45F" d="M21 287Q22 290 23 295T28 317T38 348T53 381T73 411T99 433T132 442Q161 442 183 430T214 408T225 388Q227 382 228 382T236 389Q284 441 347 441H350Q398 441 422 400Q430 381 430 363Q430 333 417 315T391 292T366 288Q346 288 334 299T322 328Q322 376 378 392Q356 405 342 405Q286 405 239 331Q229 315 224 298T190 165Q156 25 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 114 189T154 366Q154 405 128 405Q107 405 92 377T68 316T57 280Q55 278 41 278H27Q21 284 21 287Z"></path></g><g data-mml-node="mi" transform="translate(8070,0)"><path data-c="1D44A" d="M436 683Q450 683 486 682T553 680Q604 680 638 681T677 682Q695 682 695 674Q695 670 692 659Q687 641 683 639T661 637Q636 636 621 632T600 624T597 615Q597 603 613 377T629 138L631 141Q633 144 637 151T649 170T666 200T690 241T720 295T759 362Q863 546 877 572T892 604Q892 619 873 628T831 637Q817 637 817 647Q817 650 819 660Q823 676 825 679T839 682Q842 682 856 682T895 682T949 681Q1015 681 1034 683Q1048 683 1048 672Q1048 666 1045 655T1038 640T1028 637Q1006 637 988 631T958 617T939 600T927 584L923 578L754 282Q586 -14 585 -15Q579 -22 561 -22Q546 -22 542 -17Q539 -14 523 229T506 480L494 462Q472 425 366 239Q222 -13 220 -15T215 -19Q210 -22 197 -22Q178 -22 176 -15Q176 -12 154 304T131 622Q129 631 121 633T82 637H58Q51 644 51 648Q52 671 64 683H76Q118 680 176 680Q301 680 313 683H323Q329 677 329 674T327 656Q322 641 318 637H297Q236 634 232 620Q262 160 266 136L501 550L499 587Q496 629 489 632Q483 636 447 637Q428 637 422 639T416 648Q416 650 418 660Q419 664 420 669T421 676T424 680T428 682T436 683Z"></path></g><g data-mml-node="mi" transform="translate(9118,0)"><path data-c="1D456" d="M184 600Q184 624 203 642T247 661Q265 661 277 649T290 619Q290 596 270 577T226 557Q211 557 198 567T184 600ZM21 287Q21 295 30 318T54 369T98 420T158 442Q197 442 223 419T250 357Q250 340 236 301T196 196T154 83Q149 61 149 51Q149 26 166 26Q175 26 185 29T208 43T235 78T260 137Q263 149 265 151T282 153Q302 153 302 143Q302 135 293 112T268 61T223 11T161 -11Q129 -11 102 10T74 74Q74 91 79 106T122 220Q160 321 166 341T173 380Q173 404 156 404H154Q124 404 99 371T61 287Q60 286 59 284T58 281T56 279T53 278T49 278T41 278H27Q21 284 21 287Z"></path></g><g data-mml-node="mi" transform="translate(9463,0)"><path data-c="1D451" d="M366 683Q367 683 438 688T511 694Q523 694 523 686Q523 679 450 384T375 83T374 68Q374 26 402 26Q411 27 422 35Q443 55 463 131Q469 151 473 152Q475 153 483 153H487H491Q506 153 506 145Q506 140 503 129Q490 79 473 48T445 8T417 -8Q409 -10 393 -10Q359 -10 336 5T306 36L300 51Q299 52 296 50Q294 48 292 46Q233 -10 172 -10Q117 -10 75 30T33 157Q33 205 53 255T101 341Q148 398 195 420T280 442Q336 442 364 400Q369 394 369 396Q370 400 396 505T424 616Q424 629 417 632T378 637H357Q351 643 351 645T353 664Q358 683 366 683ZM352 326Q329 405 277 405Q242 405 210 374T160 293Q131 214 119 129Q119 126 119 118T118 106Q118 61 136 44T179 26Q233 26 290 98L298 109L352 326Z"></path></g><g data-mml-node="mi" transform="translate(9983,0)"><path data-c="1D461" d="M26 385Q19 392 19 395Q19 399 22 411T27 425Q29 430 36 430T87 431H140L159 511Q162 522 166 540T173 566T179 586T187 603T197 615T211 624T229 626Q247 625 254 615T261 596Q261 589 252 549T232 470L222 433Q222 431 272 431H323Q330 424 330 420Q330 398 317 385H210L174 240Q135 80 135 68Q135 26 162 26Q197 26 230 60T283 144Q285 150 288 151T303 153H307Q322 153 322 145Q322 142 319 133Q314 117 301 95T267 48T216 6T155 -11Q125 -11 98 4T59 56Q57 64 57 83V101L92 241Q127 382 128 383Q128 385 77 385H26Z"></path></g><g data-mml-node="mi" transform="translate(10344,0)"><path data-c="210E" d="M137 683Q138 683 209 688T282 694Q294 694 294 685Q294 674 258 534Q220 386 220 383Q220 381 227 388Q288 442 357 442Q411 442 444 415T478 336Q478 285 440 178T402 50Q403 36 407 31T422 26Q450 26 474 56T513 138Q516 149 519 151T535 153Q555 153 555 145Q555 144 551 130Q535 71 500 33Q466 -10 419 -10H414Q367 -10 346 17T325 74Q325 90 361 192T398 345Q398 404 354 404H349Q266 404 205 306L198 293L164 158Q132 28 127 16Q114 -11 83 -11Q69 -11 59 -2T48 16Q48 30 121 320L195 616Q195 629 188 632T149 637H128Q122 643 122 645T124 664Q129 683 137 683Z"></path></g></g><g data-mml-node="mrow" transform="translate(220,-345) scale(0.707)"><g data-mml-node="mi"><path data-c="1D45A" d="M21 287Q22 293 24 303T36 341T56 388T88 425T132 442T175 435T205 417T221 395T229 376L231 369Q231 367 232 367L243 378Q303 442 384 442Q401 442 415 440T441 433T460 423T475 411T485 398T493 385T497 373T500 364T502 357L510 367Q573 442 659 442Q713 442 746 415T780 336Q780 285 742 178T704 50Q705 36 709 31T724 26Q752 26 776 56T815 138Q818 149 821 151T837 153Q857 153 857 145Q857 144 853 130Q845 101 831 73T785 17T716 -10Q669 -10 648 17T627 73Q627 92 663 193T700 345Q700 404 656 404H651Q565 404 506 303L499 291L466 157Q433 26 428 16Q415 -11 385 -11Q372 -11 364 -4T353 8T350 18Q350 29 384 161L420 307Q423 322 423 345Q423 404 379 404H374Q288 404 229 303L222 291L189 157Q156 26 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 112 181Q151 335 151 342Q154 357 154 369Q154 405 129 405Q107 405 92 377T69 316T57 280Q55 278 41 278H27Q21 284 21 287Z"></path></g><g data-mml-node="mi" transform="translate(878,0)"><path data-c="1D456" d="M184 600Q184 624 203 642T247 661Q265 661 277 649T290 619Q290 596 270 577T226 557Q211 557 198 567T184 600ZM21 287Q21 295 30 318T54 369T98 420T158 442Q197 442 223 419T250 357Q250 340 236 301T196 196T154 83Q149 61 149 51Q149 26 166 26Q175 26 185 29T208 43T235 78T260 137Q263 149 265 151T282 153Q302 153 302 143Q302 135 293 112T268 61T223 11T161 -11Q129 -11 102 10T74 74Q74 91 79 106T122 220Q160 321 166 341T173 380Q173 404 156 404H154Q124 404 99 371T61 287Q60 286 59 284T58 281T56 279T53 278T49 278T41 278H27Q21 284 21 287Z"></path></g><g data-mml-node="mi" transform="translate(1223,0)"><path data-c="1D45B" d="M21 287Q22 293 24 303T36 341T56 388T89 425T135 442Q171 442 195 424T225 390T231 369Q231 367 232 367L243 378Q304 442 382 442Q436 442 469 415T503 336T465 179T427 52Q427 26 444 26Q450 26 453 27Q482 32 505 65T540 145Q542 153 560 153Q580 153 580 145Q580 144 576 130Q568 101 554 73T508 17T439 -10Q392 -10 371 17T350 73Q350 92 386 193T423 345Q423 404 379 404H374Q288 404 229 303L222 291L189 157Q156 26 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 112 180T152 343Q153 348 153 366Q153 405 129 405Q91 405 66 305Q60 285 60 284Q58 278 41 278H27Q21 284 21 287Z"></path></g><g data-mml-node="mi" transform="translate(1823,0)"><path data-c="1D439" d="M48 1Q31 1 31 11Q31 13 34 25Q38 41 42 43T65 46Q92 46 125 49Q139 52 144 61Q146 66 215 342T285 622Q285 629 281 629Q273 632 228 634H197Q191 640 191 642T193 659Q197 676 203 680H742Q749 676 749 669Q749 664 736 557T722 447Q720 440 702 440H690Q683 445 683 453Q683 454 686 477T689 530Q689 560 682 579T663 610T626 626T575 633T503 634H480Q398 633 393 631Q388 629 386 623Q385 622 352 492L320 363H375Q378 363 398 363T426 364T448 367T472 374T489 386Q502 398 511 419T524 457T529 475Q532 480 548 480H560Q567 475 567 470Q567 467 536 339T502 207Q500 200 482 200H470Q463 206 463 212Q463 215 468 234T473 274Q473 303 453 310T364 317H309L277 190Q245 66 245 60Q245 46 334 46H359Q365 40 365 39T363 19Q359 6 353 0H336Q295 2 185 2Q120 2 86 2T48 1Z"></path></g><g data-mml-node="mi" transform="translate(2572,0)"><path data-c="1D45F" d="M21 287Q22 290 23 295T28 317T38 348T53 381T73 411T99 433T132 442Q161 442 183 430T214 408T225 388Q227 382 228 382T236 389Q284 441 347 441H350Q398 441 422 400Q430 381 430 363Q430 333 417 315T391 292T366 288Q346 288 334 299T322 328Q322 376 378 392Q356 405 342 405Q286 405 239 331Q229 315 224 298T190 165Q156 25 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 114 189T154 366Q154 405 128 405Q107 405 92 377T68 316T57 280Q55 278 41 278H27Q21 284 21 287Z"></path></g><g data-mml-node="mi" transform="translate(3023,0)"><path data-c="1D44E" d="M33 157Q33 258 109 349T280 441Q331 441 370 392Q386 422 416 422Q429 422 439 414T449 394Q449 381 412 234T374 68Q374 43 381 35T402 26Q411 27 422 35Q443 55 463 131Q469 151 473 152Q475 153 483 153H487Q506 153 506 144Q506 138 501 117T481 63T449 13Q436 0 417 -8Q409 -10 393 -10Q359 -10 336 5T306 36L300 51Q299 52 296 50Q294 48 292 46Q233 -10 172 -10Q117 -10 75 30T33 157ZM351 328Q351 334 346 350T323 385T277 405Q242 405 210 374T160 293Q131 214 119 129Q119 126 119 118T118 106Q118 61 136 44T179 26Q217 26 254 59T298 110Q300 114 325 217T351 328Z"></path></g><g data-mml-node="mi" transform="translate(3552,0)"><path data-c="1D454" d="M311 43Q296 30 267 15T206 0Q143 0 105 45T66 160Q66 265 143 353T314 442Q361 442 401 394L404 398Q406 401 409 404T418 412T431 419T447 422Q461 422 470 413T480 394Q480 379 423 152T363 -80Q345 -134 286 -169T151 -205Q10 -205 10 -137Q10 -111 28 -91T74 -71Q89 -71 102 -80T116 -111Q116 -121 114 -130T107 -144T99 -154T92 -162L90 -164H91Q101 -167 151 -167Q189 -167 211 -155Q234 -144 254 -122T282 -75Q288 -56 298 -13Q311 35 311 43ZM384 328L380 339Q377 350 375 354T369 368T359 382T346 393T328 402T306 405Q262 405 221 352Q191 313 171 233T151 117Q151 38 213 38Q269 38 323 108L331 118L384 328Z"></path></g><g data-mml-node="mi" transform="translate(4029,0)"><path data-c="1D45A" d="M21 287Q22 293 24 303T36 341T56 388T88 425T132 442T175 435T205 417T221 395T229 376L231 369Q231 367 232 367L243 378Q303 442 384 442Q401 442 415 440T441 433T460 423T475 411T485 398T493 385T497 373T500 364T502 357L510 367Q573 442 659 442Q713 442 746 415T780 336Q780 285 742 178T704 50Q705 36 709 31T724 26Q752 26 776 56T815 138Q818 149 821 151T837 153Q857 153 857 145Q857 144 853 130Q845 101 831 73T785 17T716 -10Q669 -10 648 17T627 73Q627 92 663 193T700 345Q700 404 656 404H651Q565 404 506 303L499 291L466 157Q433 26 428 16Q415 -11 385 -11Q372 -11 364 -4T353 8T350 18Q350 29 384 161L420 307Q423 322 423 345Q423 404 379 404H374Q288 404 229 303L222 291L189 157Q156 26 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 112 181Q151 335 151 342Q154 357 154 369Q154 405 129 405Q107 405 92 377T69 316T57 280Q55 278 41 278H27Q21 284 21 287Z"></path></g><g data-mml-node="mi" transform="translate(4907,0)"><path data-c="1D452" d="M39 168Q39 225 58 272T107 350T174 402T244 433T307 442H310Q355 442 388 420T421 355Q421 265 310 237Q261 224 176 223Q139 223 138 221Q138 219 132 186T125 128Q125 81 146 54T209 26T302 45T394 111Q403 121 406 121Q410 121 419 112T429 98T420 82T390 55T344 24T281 -1T205 -11Q126 -11 83 42T39 168ZM373 353Q367 405 305 405Q272 405 244 391T199 357T170 316T154 280T149 261Q149 260 169 260Q282 260 327 284T373 353Z"></path></g><g data-mml-node="mi" transform="translate(5373,0)"><path data-c="1D45B" d="M21 287Q22 293 24 303T36 341T56 388T89 425T135 442Q171 442 195 424T225 390T231 369Q231 367 232 367L243 378Q304 442 382 442Q436 442 469 415T503 336T465 179T427 52Q427 26 444 26Q450 26 453 27Q482 32 505 65T540 145Q542 153 560 153Q580 153 580 145Q580 144 576 130Q568 101 554 73T508 17T439 -10Q392 -10 371 17T350 73Q350 92 386 193T423 345Q423 404 379 404H374Q288 404 229 303L222 291L189 157Q156 26 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 112 180T152 343Q153 348 153 366Q153 405 129 405Q91 405 66 305Q60 285 60 284Q58 278 41 278H27Q21 284 21 287Z"></path></g><g data-mml-node="mi" transform="translate(5973,0)"><path data-c="1D461" d="M26 385Q19 392 19 395Q19 399 22 411T27 425Q29 430 36 430T87 431H140L159 511Q162 522 166 540T173 566T179 586T187 603T197 615T211 624T229 626Q247 625 254 615T261 596Q261 589 252 549T232 470L222 433Q222 431 272 431H323Q330 424 330 420Q330 398 317 385H210L174 240Q135 80 135 68Q135 26 162 26Q197 26 230 60T283 144Q285 150 288 151T303 153H307Q322 153 322 145Q322 142 319 133Q314 117 301 95T267 48T216 6T155 -11Q125 -11 98 4T59 56Q57 64 57 83V101L92 241Q127 382 128 383Q128 385 77 385H26Z"></path></g><g data-mml-node="mi" transform="translate(6334,0)"><path data-c="1D437" d="M287 628Q287 635 230 637Q207 637 200 638T193 647Q193 655 197 667T204 682Q206 683 403 683Q570 682 590 682T630 676Q702 659 752 597T803 431Q803 275 696 151T444 3L430 1L236 0H125H72Q48 0 41 2T33 11Q33 13 36 25Q40 41 44 43T67 46Q94 46 127 49Q141 52 146 61Q149 65 218 339T287 628ZM703 469Q703 507 692 537T666 584T629 613T590 629T555 636Q553 636 541 636T512 636T479 637H436Q392 637 386 627Q384 623 313 339T242 52Q242 48 253 48T330 47Q335 47 349 47T373 46Q499 46 581 128Q617 164 640 212T683 339T703 469Z"></path></g><g data-mml-node="mi" transform="translate(7162,0)"><path data-c="1D452" d="M39 168Q39 225 58 272T107 350T174 402T244 433T307 442H310Q355 442 388 420T421 355Q421 265 310 237Q261 224 176 223Q139 223 138 221Q138 219 132 186T125 128Q125 81 146 54T209 26T302 45T394 111Q403 121 406 121Q410 121 419 112T429 98T420 82T390 55T344 24T281 -1T205 -11Q126 -11 83 42T39 168ZM373 353Q367 405 305 405Q272 405 244 391T199 357T170 316T154 280T149 261Q149 260 169 260Q282 260 327 284T373 353Z"></path></g><g data-mml-node="mi" transform="translate(7628,0)"><path data-c="1D45B" d="M21 287Q22 293 24 303T36 341T56 388T89 425T135 442Q171 442 195 424T225 390T231 369Q231 367 232 367L243 378Q304 442 382 442Q436 442 469 415T503 336T465 179T427 52Q427 26 444 26Q450 26 453 27Q482 32 505 65T540 145Q542 153 560 153Q580 153 580 145Q580 144 576 130Q568 101 554 73T508 17T439 -10Q392 -10 371 17T350 73Q350 92 386 193T423 345Q423 404 379 404H374Q288 404 229 303L222 291L189 157Q156 26 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 112 180T152 343Q153 348 153 366Q153 405 129 405Q91 405 66 305Q60 285 60 284Q58 278 41 278H27Q21 284 21 287Z"></path></g><g data-mml-node="mi" transform="translate(8228,0)"><path data-c="1D460" d="M131 289Q131 321 147 354T203 415T300 442Q362 442 390 415T419 355Q419 323 402 308T364 292Q351 292 340 300T328 326Q328 342 337 354T354 372T367 378Q368 378 368 379Q368 382 361 388T336 399T297 405Q249 405 227 379T204 326Q204 301 223 291T278 274T330 259Q396 230 396 163Q396 135 385 107T352 51T289 7T195 -10Q118 -10 86 19T53 87Q53 126 74 143T118 160Q133 160 146 151T160 120Q160 94 142 76T111 58Q109 57 108 57T107 55Q108 52 115 47T146 34T201 27Q237 27 263 38T301 66T318 97T323 122Q323 150 302 164T254 181T195 196T148 231Q131 256 131 289Z"></path></g><g data-mml-node="mi" transform="translate(8697,0)"><path data-c="1D456" d="M184 600Q184 624 203 642T247 661Q265 661 277 649T290 619Q290 596 270 577T226 557Q211 557 198 567T184 600ZM21 287Q21 295 30 318T54 369T98 420T158 442Q197 442 223 419T250 357Q250 340 236 301T196 196T154 83Q149 61 149 51Q149 26 166 26Q175 26 185 29T208 43T235 78T260 137Q263 149 265 151T282 153Q302 153 302 143Q302 135 293 112T268 61T223 11T161 -11Q129 -11 102 10T74 74Q74 91 79 106T122 220Q160 321 166 341T173 380Q173 404 156 404H154Q124 404 99 371T61 287Q60 286 59 284T58 281T56 279T53 278T49 278T41 278H27Q21 284 21 287Z"></path></g><g data-mml-node="mi" transform="translate(9042,0)"><path data-c="1D461" d="M26 385Q19 392 19 395Q19 399 22 411T27 425Q29 430 36 430T87 431H140L159 511Q162 522 166 540T173 566T179 586T187 603T197 615T211 624T229 626Q247 625 254 615T261 596Q261 589 252 549T232 470L222 433Q222 431 272 431H323Q330 424 330 420Q330 398 317 385H210L174 240Q135 80 135 68Q135 26 162 26Q197 26 230 60T283 144Q285 150 288 151T303 153H307Q322 153 322 145Q322 142 319 133Q314 117 301 95T267 48T216 6T155 -11Q125 -11 98 4T59 56Q57 64 57 83V101L92 241Q127 382 128 383Q128 385 77 385H26Z"></path></g><g data-mml-node="mi" transform="translate(9403,0)"><path data-c="1D466" d="M21 287Q21 301 36 335T84 406T158 442Q199 442 224 419T250 355Q248 336 247 334Q247 331 231 288T198 191T182 105Q182 62 196 45T238 27Q261 27 281 38T312 61T339 94Q339 95 344 114T358 173T377 247Q415 397 419 404Q432 431 462 431Q475 431 483 424T494 412T496 403Q496 390 447 193T391 -23Q363 -106 294 -155T156 -205Q111 -205 77 -183T43 -117Q43 -95 50 -80T69 -58T89 -48T106 -45Q150 -45 150 -87Q150 -107 138 -122T115 -142T102 -147L99 -148Q101 -153 118 -160T152 -167H160Q177 -167 186 -165Q219 -156 247 -127T290 -65T313 -9T321 21L315 17Q309 13 296 6T270 -6Q250 -11 231 -11Q185 -11 150 11T104 82Q103 89 103 113Q103 170 138 262T173 379Q173 380 173 381Q173 390 173 393T169 400T158 404H154Q131 404 112 385T82 344T65 302T57 280Q55 278 41 278H27Q21 284 21 287Z"></path></g><g data-mml-node="mi" transform="translate(9893,0)"><path data-c="1D447" d="M40 437Q21 437 21 445Q21 450 37 501T71 602L88 651Q93 669 101 677H569H659Q691 677 697 676T704 667Q704 661 687 553T668 444Q668 437 649 437Q640 437 637 437T631 442L629 445Q629 451 635 490T641 551Q641 586 628 604T573 629Q568 630 515 631Q469 631 457 630T439 622Q438 621 368 343T298 60Q298 48 386 46Q418 46 427 45T436 36Q436 31 433 22Q429 4 424 1L422 0Q419 0 415 0Q410 0 363 1T228 2Q99 2 64 0H49Q43 6 43 9T45 27Q49 40 55 46H83H94Q174 46 189 55Q190 56 191 56Q196 59 201 76T241 233Q258 301 269 344Q339 619 339 625Q339 630 310 630H279Q212 630 191 624Q146 614 121 583T67 467Q60 445 57 441T43 437H40Z"></path></g><g data-mml-node="mi" transform="translate(10597,0)"><path data-c="1D452" d="M39 168Q39 225 58 272T107 350T174 402T244 433T307 442H310Q355 442 388 420T421 355Q421 265 310 237Q261 224 176 223Q139 223 138 221Q138 219 132 186T125 128Q125 81 146 54T209 26T302 45T394 111Q403 121 406 121Q410 121 419 112T429 98T420 82T390 55T344 24T281 -1T205 -11Q126 -11 83 42T39 168ZM373 353Q367 405 305 405Q272 405 244 391T199 357T170 316T154 280T149 261Q149 260 169 260Q282 260 327 284T373 353Z"></path></g><g data-mml-node="mi" transform="translate(11063,0)"><path data-c="1D465" d="M52 289Q59 331 106 386T222 442Q257 442 286 424T329 379Q371 442 430 442Q467 442 494 420T522 361Q522 332 508 314T481 292T458 288Q439 288 427 299T415 328Q415 374 465 391Q454 404 425 404Q412 404 406 402Q368 386 350 336Q290 115 290 78Q290 50 306 38T341 26Q378 26 414 59T463 140Q466 150 469 151T485 153H489Q504 153 504 145Q504 144 502 134Q486 77 440 33T333 -11Q263 -11 227 52Q186 -10 133 -10H127Q78 -10 57 16T35 71Q35 103 54 123T99 143Q142 143 142 101Q142 81 130 66T107 46T94 41L91 40Q91 39 97 36T113 29T132 26Q168 26 194 71Q203 87 217 139T245 247T261 313Q266 340 266 352Q266 380 251 392T217 404Q177 404 142 372T93 290Q91 281 88 280T72 278H58Q52 284 52 289Z"></path></g><g data-mml-node="mi" transform="translate(11635,0)"><path data-c="1D452" d="M39 168Q39 225 58 272T107 350T174 402T244 433T307 442H310Q355 442 388 420T421 355Q421 265 310 237Q261 224 176 223Q139 223 138 221Q138 219 132 186T125 128Q125 81 146 54T209 26T302 45T394 111Q403 121 406 121Q410 121 419 112T429 98T420 82T390 55T344 24T281 -1T205 -11Q126 -11 83 42T39 168ZM373 353Q367 405 305 405Q272 405 244 391T199 357T170 316T154 280T149 261Q149 260 169 260Q282 260 327 284T373 353Z"></path></g><g data-mml-node="mi" transform="translate(12101,0)"><path data-c="1D459" d="M117 59Q117 26 142 26Q179 26 205 131Q211 151 215 152Q217 153 225 153H229Q238 153 241 153T246 151T248 144Q247 138 245 128T234 90T214 43T183 6T137 -11Q101 -11 70 11T38 85Q38 97 39 102L104 360Q167 615 167 623Q167 626 166 628T162 632T157 634T149 635T141 636T132 637T122 637Q112 637 109 637T101 638T95 641T94 647Q94 649 96 661Q101 680 107 682T179 688Q194 689 213 690T243 693T254 694Q266 694 266 686Q266 675 193 386T118 83Q118 81 118 75T117 65V59Z"></path></g><g data-mml-node="mi" transform="translate(12399,0)"><path data-c="1D446" d="M308 24Q367 24 416 76T466 197Q466 260 414 284Q308 311 278 321T236 341Q176 383 176 462Q176 523 208 573T273 648Q302 673 343 688T407 704H418H425Q521 704 564 640Q565 640 577 653T603 682T623 704Q624 704 627 704T632 705Q645 705 645 698T617 577T585 459T569 456Q549 456 549 465Q549 471 550 475Q550 478 551 494T553 520Q553 554 544 579T526 616T501 641Q465 662 419 662Q362 662 313 616T263 510Q263 480 278 458T319 427Q323 425 389 408T456 390Q490 379 522 342T554 242Q554 216 546 186Q541 164 528 137T492 78T426 18T332 -20Q320 -22 298 -22Q199 -22 144 33L134 44L106 13Q83 -14 78 -18T65 -22Q52 -22 52 -14Q52 -11 110 221Q112 227 130 227H143Q149 221 149 216Q149 214 148 207T144 186T142 153Q144 114 160 87T203 47T255 29T308 24Z"></path></g><g data-mml-node="mi" transform="translate(13044,0)"><path data-c="1D456" d="M184 600Q184 624 203 642T247 661Q265 661 277 649T290 619Q290 596 270 577T226 557Q211 557 198 567T184 600ZM21 287Q21 295 30 318T54 369T98 420T158 442Q197 442 223 419T250 357Q250 340 236 301T196 196T154 83Q149 61 149 51Q149 26 166 26Q175 26 185 29T208 43T235 78T260 137Q263 149 265 151T282 153Q302 153 302 143Q302 135 293 112T268 61T223 11T161 -11Q129 -11 102 10T74 74Q74 91 79 106T122 220Q160 321 166 341T173 380Q173 404 156 404H154Q124 404 99 371T61 287Q60 286 59 284T58 281T56 279T53 278T49 278T41 278H27Q21 284 21 287Z"></path></g><g data-mml-node="mi" transform="translate(13389,0)"><path data-c="1D467" d="M347 338Q337 338 294 349T231 360Q211 360 197 356T174 346T162 335T155 324L153 320Q150 317 138 317Q117 317 117 325Q117 330 120 339Q133 378 163 406T229 440Q241 442 246 442Q271 442 291 425T329 392T367 375Q389 375 411 408T434 441Q435 442 449 442H462Q468 436 468 434Q468 430 463 420T449 399T432 377T418 358L411 349Q368 298 275 214T160 106L148 94L163 93Q185 93 227 82T290 71Q328 71 360 90T402 140Q406 149 409 151T424 153Q443 153 443 143Q443 138 442 134Q425 72 376 31T278 -11Q252 -11 232 6T193 40T155 57Q111 57 76 -3Q70 -11 59 -11H54H41Q35 -5 35 -2Q35 13 93 84Q132 129 225 214T340 322Q352 338 347 338Z"></path></g><g data-mml-node="msub" transform="translate(13854,0)"><g data-mml-node="mi"><path data-c="1D452" d="M39 168Q39 225 58 272T107 350T174 402T244 433T307 442H310Q355 442 388 420T421 355Q421 265 310 237Q261 224 176 223Q139 223 138 221Q138 219 132 186T125 128Q125 81 146 54T209 26T302 45T394 111Q403 121 406 121Q410 121 419 112T429 98T420 82T390 55T344 24T281 -1T205 -11Q126 -11 83 42T39 168ZM373 353Q367 405 305 405Q272 405 244 391T199 357T170 316T154 280T149 261Q149 260 169 260Q282 260 327 284T373 353Z"></path></g><g data-mml-node="TeXAtom" transform="translate(499,-150) scale(0.707)" data-mjx-texclass="ORD"><g data-mml-node="mi"><path data-c="1D464" d="M580 385Q580 406 599 424T641 443Q659 443 674 425T690 368Q690 339 671 253Q656 197 644 161T609 80T554 12T482 -11Q438 -11 404 5T355 48Q354 47 352 44Q311 -11 252 -11Q226 -11 202 -5T155 14T118 53T104 116Q104 170 138 262T173 379Q173 380 173 381Q173 390 173 393T169 400T158 404H154Q131 404 112 385T82 344T65 302T57 280Q55 278 41 278H27Q21 284 21 287Q21 293 29 315T52 366T96 418T161 441Q204 441 227 416T250 358Q250 340 217 250T184 111Q184 65 205 46T258 26Q301 26 334 87L339 96V119Q339 122 339 128T340 136T341 143T342 152T345 165T348 182T354 206T362 238T373 281Q402 395 406 404Q419 431 449 431Q468 431 475 421T483 402Q483 389 454 274T422 142Q420 131 420 107V100Q420 85 423 71T442 42T487 26Q558 26 600 148Q609 171 620 213T632 273Q632 306 619 325T593 357T580 385Z"></path></g><g data-mml-node="mi" transform="translate(716,0)"><path data-c="1D456" d="M184 600Q184 624 203 642T247 661Q265 661 277 649T290 619Q290 596 270 577T226 557Q211 557 198 567T184 600ZM21 287Q21 295 30 318T54 369T98 420T158 442Q197 442 223 419T250 357Q250 340 236 301T196 196T154 83Q149 61 149 51Q149 26 166 26Q175 26 185 29T208 43T235 78T260 137Q263 149 265 151T282 153Q302 153 302 143Q302 135 293 112T268 61T223 11T161 -11Q129 -11 102 10T74 74Q74 91 79 106T122 220Q160 321 166 341T173 380Q173 404 156 404H154Q124 404 99 371T61 287Q60 286 59 284T58 281T56 279T53 278T49 278T41 278H27Q21 284 21 287Z"></path></g><g data-mml-node="mi" transform="translate(1061,0)"><path data-c="1D451" d="M366 683Q367 683 438 688T511 694Q523 694 523 686Q523 679 450 384T375 83T374 68Q374 26 402 26Q411 27 422 35Q443 55 463 131Q469 151 473 152Q475 153 483 153H487H491Q506 153 506 145Q506 140 503 129Q490 79 473 48T445 8T417 -8Q409 -10 393 -10Q359 -10 336 5T306 36L300 51Q299 52 296 50Q294 48 292 46Q233 -10 172 -10Q117 -10 75 30T33 157Q33 205 53 255T101 341Q148 398 195 420T280 442Q336 442 364 400Q369 394 369 396Q370 400 396 505T424 616Q424 629 417 632T378 637H357Q351 643 351 645T353 664Q358 683 366 683ZM352 326Q329 405 277 405Q242 405 210 374T160 293Q131 214 119 129Q119 126 119 118T118 106Q118 61 136 44T179 26Q233 26 290 98L298 109L352 326Z"></path></g><g data-mml-node="mi" transform="translate(1581,0)"><path data-c="1D461" d="M26 385Q19 392 19 395Q19 399 22 411T27 425Q29 430 36 430T87 431H140L159 511Q162 522 166 540T173 566T179 586T187 603T197 615T211 624T229 626Q247 625 254 615T261 596Q261 589 252 549T232 470L222 433Q222 431 272 431H323Q330 424 330 420Q330 398 317 385H210L174 240Q135 80 135 68Q135 26 162 26Q197 26 230 60T283 144Q285 150 288 151T303 153H307Q322 153 322 145Q322 142 319 133Q314 117 301 95T267 48T216 6T155 -11Q125 -11 98 4T59 56Q57 64 57 83V101L92 241Q127 382 128 383Q128 385 77 385H26Z"></path></g><g data-mml-node="mi" transform="translate(1942,0)"><path data-c="210E" d="M137 683Q138 683 209 688T282 694Q294 694 294 685Q294 674 258 534Q220 386 220 383Q220 381 227 388Q288 442 357 442Q411 442 444 415T478 336Q478 285 440 178T402 50Q403 36 407 31T422 26Q450 26 474 56T513 138Q516 149 519 151T535 153Q555 153 555 145Q555 144 551 130Q535 71 500 33Q466 -10 419 -10H414Q367 -10 346 17T325 74Q325 90 361 192T398 345Q398 404 354 404H349Q266 404 205 306L198 293L164 158Q132 28 127 16Q114 -11 83 -11Q69 -11 59 -2T48 16Q48 30 121 320L195 616Q195 629 188 632T149 637H128Q122 643 122 645T124 664Q129 683 137 683Z"></path></g></g></g></g><rect width="11643.5" height="60" x="120" y="220"></rect></g></g><g data-mml-node="mo" transform="translate(12411.5,0) translate(0 -0.5)"><path data-c="2309" d="M16 1099V1150H303V-649H252V1099H16Z"></path></g></g></g></g></svg> </span></p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-fragmentDensityMapOffset-06515" href="#VUID-VkImageCreateInfo-fragmentDensityMapOffset-06515"></a> <span class="vuid">VUID-VkImageCreateInfo-fragmentDensityMapOffset-06515</span><br>

If the <a href="features.html#features-fragmentDensityMapOffsets" class="xref page">    <code>fragmentDensityMapOffset</code></a> feature is not enabled and <code>usage</code>
includes <code>VK_IMAGE_USAGE_FRAGMENT_DENSITY_MAP_BIT_EXT</code>,
<code>extent.height</code> <strong>must</strong> be less than or equal to
<span class="steminline"> <svg style="vertical-align: -1.469ex; overflow: visible;" xmlns="http://www.w3.org/2000/svg" width="29.595ex" height="4.07ex" role="img" focusable="false" viewBox="0 -1149.5 13081 1799"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mrow"><g data-mml-node="mo" transform="translate(0 -0.5)"><path data-c="2308" d="M224 -649V1150H511V1099H275V-649H224Z"></path></g><g data-mml-node="TeXAtom" data-mjx-texclass="ORD" transform="translate(528,0)"><g data-mml-node="mfrac"><g data-mml-node="mrow" transform="translate(2058.7,485) scale(0.707)"><g data-mml-node="mi"><path data-c="1D45A" d="M21 287Q22 293 24 303T36 341T56 388T88 425T132 442T175 435T205 417T221 395T229 376L231 369Q231 367 232 367L243 378Q303 442 384 442Q401 442 415 440T441 433T460 423T475 411T485 398T493 385T497 373T500 364T502 357L510 367Q573 442 659 442Q713 442 746 415T780 336Q780 285 742 178T704 50Q705 36 709 31T724 26Q752 26 776 56T815 138Q818 149 821 151T837 153Q857 153 857 145Q857 144 853 130Q845 101 831 73T785 17T716 -10Q669 -10 648 17T627 73Q627 92 663 193T700 345Q700 404 656 404H651Q565 404 506 303L499 291L466 157Q433 26 428 16Q415 -11 385 -11Q372 -11 364 -4T353 8T350 18Q350 29 384 161L420 307Q423 322 423 345Q423 404 379 404H374Q288 404 229 303L222 291L189 157Q156 26 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 112 181Q151 335 151 342Q154 357 154 369Q154 405 129 405Q107 405 92 377T69 316T57 280Q55 278 41 278H27Q21 284 21 287Z"></path></g><g data-mml-node="mi" transform="translate(878,0)"><path data-c="1D44E" d="M33 157Q33 258 109 349T280 441Q331 441 370 392Q386 422 416 422Q429 422 439 414T449 394Q449 381 412 234T374 68Q374 43 381 35T402 26Q411 27 422 35Q443 55 463 131Q469 151 473 152Q475 153 483 153H487Q506 153 506 144Q506 138 501 117T481 63T449 13Q436 0 417 -8Q409 -10 393 -10Q359 -10 336 5T306 36L300 51Q299 52 296 50Q294 48 292 46Q233 -10 172 -10Q117 -10 75 30T33 157ZM351 328Q351 334 346 350T323 385T277 405Q242 405 210 374T160 293Q131 214 119 129Q119 126 119 118T118 106Q118 61 136 44T179 26Q217 26 254 59T298 110Q300 114 325 217T351 328Z"></path></g><g data-mml-node="mi" transform="translate(1407,0)"><path data-c="1D465" d="M52 289Q59 331 106 386T222 442Q257 442 286 424T329 379Q371 442 430 442Q467 442 494 420T522 361Q522 332 508 314T481 292T458 288Q439 288 427 299T415 328Q415 374 465 391Q454 404 425 404Q412 404 406 402Q368 386 350 336Q290 115 290 78Q290 50 306 38T341 26Q378 26 414 59T463 140Q466 150 469 151T485 153H489Q504 153 504 145Q504 144 502 134Q486 77 440 33T333 -11Q263 -11 227 52Q186 -10 133 -10H127Q78 -10 57 16T35 71Q35 103 54 123T99 143Q142 143 142 101Q142 81 130 66T107 46T94 41L91 40Q91 39 97 36T113 29T132 26Q168 26 194 71Q203 87 217 139T245 247T261 313Q266 340 266 352Q266 380 251 392T217 404Q177 404 142 372T93 290Q91 281 88 280T72 278H58Q52 284 52 289Z"></path></g><g data-mml-node="mi" transform="translate(1979,0)"><path data-c="1D439" d="M48 1Q31 1 31 11Q31 13 34 25Q38 41 42 43T65 46Q92 46 125 49Q139 52 144 61Q146 66 215 342T285 622Q285 629 281 629Q273 632 228 634H197Q191 640 191 642T193 659Q197 676 203 680H742Q749 676 749 669Q749 664 736 557T722 447Q720 440 702 440H690Q683 445 683 453Q683 454 686 477T689 530Q689 560 682 579T663 610T626 626T575 633T503 634H480Q398 633 393 631Q388 629 386 623Q385 622 352 492L320 363H375Q378 363 398 363T426 364T448 367T472 374T489 386Q502 398 511 419T524 457T529 475Q532 480 548 480H560Q567 475 567 470Q567 467 536 339T502 207Q500 200 482 200H470Q463 206 463 212Q463 215 468 234T473 274Q473 303 453 310T364 317H309L277 190Q245 66 245 60Q245 46 334 46H359Q365 40 365 39T363 19Q359 6 353 0H336Q295 2 185 2Q120 2 86 2T48 1Z"></path></g><g data-mml-node="mi" transform="translate(2728,0)"><path data-c="1D45F" d="M21 287Q22 290 23 295T28 317T38 348T53 381T73 411T99 433T132 442Q161 442 183 430T214 408T225 388Q227 382 228 382T236 389Q284 441 347 441H350Q398 441 422 400Q430 381 430 363Q430 333 417 315T391 292T366 288Q346 288 334 299T322 328Q322 376 378 392Q356 405 342 405Q286 405 239 331Q229 315 224 298T190 165Q156 25 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 114 189T154 366Q154 405 128 405Q107 405 92 377T68 316T57 280Q55 278 41 278H27Q21 284 21 287Z"></path></g><g data-mml-node="mi" transform="translate(3179,0)"><path data-c="1D44E" d="M33 157Q33 258 109 349T280 441Q331 441 370 392Q386 422 416 422Q429 422 439 414T449 394Q449 381 412 234T374 68Q374 43 381 35T402 26Q411 27 422 35Q443 55 463 131Q469 151 473 152Q475 153 483 153H487Q506 153 506 144Q506 138 501 117T481 63T449 13Q436 0 417 -8Q409 -10 393 -10Q359 -10 336 5T306 36L300 51Q299 52 296 50Q294 48 292 46Q233 -10 172 -10Q117 -10 75 30T33 157ZM351 328Q351 334 346 350T323 385T277 405Q242 405 210 374T160 293Q131 214 119 129Q119 126 119 118T118 106Q118 61 136 44T179 26Q217 26 254 59T298 110Q300 114 325 217T351 328Z"></path></g><g data-mml-node="mi" transform="translate(3708,0)"><path data-c="1D45A" d="M21 287Q22 293 24 303T36 341T56 388T88 425T132 442T175 435T205 417T221 395T229 376L231 369Q231 367 232 367L243 378Q303 442 384 442Q401 442 415 440T441 433T460 423T475 411T485 398T493 385T497 373T500 364T502 357L510 367Q573 442 659 442Q713 442 746 415T780 336Q780 285 742 178T704 50Q705 36 709 31T724 26Q752 26 776 56T815 138Q818 149 821 151T837 153Q857 153 857 145Q857 144 853 130Q845 101 831 73T785 17T716 -10Q669 -10 648 17T627 73Q627 92 663 193T700 345Q700 404 656 404H651Q565 404 506 303L499 291L466 157Q433 26 428 16Q415 -11 385 -11Q372 -11 364 -4T353 8T350 18Q350 29 384 161L420 307Q423 322 423 345Q423 404 379 404H374Q288 404 229 303L222 291L189 157Q156 26 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 112 181Q151 335 151 342Q154 357 154 369Q154 405 129 405Q107 405 92 377T69 316T57 280Q55 278 41 278H27Q21 284 21 287Z"></path></g><g data-mml-node="mi" transform="translate(4586,0)"><path data-c="1D452" d="M39 168Q39 225 58 272T107 350T174 402T244 433T307 442H310Q355 442 388 420T421 355Q421 265 310 237Q261 224 176 223Q139 223 138 221Q138 219 132 186T125 128Q125 81 146 54T209 26T302 45T394 111Q403 121 406 121Q410 121 419 112T429 98T420 82T390 55T344 24T281 -1T205 -11Q126 -11 83 42T39 168ZM373 353Q367 405 305 405Q272 405 244 391T199 357T170 316T154 280T149 261Q149 260 169 260Q282 260 327 284T373 353Z"></path></g><g data-mml-node="mi" transform="translate(5052,0)"><path data-c="1D44F" d="M73 647Q73 657 77 670T89 683Q90 683 161 688T234 694Q246 694 246 685T212 542Q204 508 195 472T180 418L176 399Q176 396 182 402Q231 442 283 442Q345 442 383 396T422 280Q422 169 343 79T173 -11Q123 -11 82 27T40 150V159Q40 180 48 217T97 414Q147 611 147 623T109 637Q104 637 101 637H96Q86 637 83 637T76 640T73 647ZM336 325V331Q336 405 275 405Q258 405 240 397T207 376T181 352T163 330L157 322L136 236Q114 150 114 114Q114 66 138 42Q154 26 178 26Q211 26 245 58Q270 81 285 114T318 219Q336 291 336 325Z"></path></g><g data-mml-node="mi" transform="translate(5481,0)"><path data-c="1D462" d="M21 287Q21 295 30 318T55 370T99 420T158 442Q204 442 227 417T250 358Q250 340 216 246T182 105Q182 62 196 45T238 27T291 44T328 78L339 95Q341 99 377 247Q407 367 413 387T427 416Q444 431 463 431Q480 431 488 421T496 402L420 84Q419 79 419 68Q419 43 426 35T447 26Q469 29 482 57T512 145Q514 153 532 153Q551 153 551 144Q550 139 549 130T540 98T523 55T498 17T462 -8Q454 -10 438 -10Q372 -10 347 46Q345 45 336 36T318 21T296 6T267 -6T233 -11Q189 -11 155 7Q103 38 103 113Q103 170 138 262T173 379Q173 380 173 381Q173 390 173 393T169 400T158 404H154Q131 404 112 385T82 344T65 302T57 280Q55 278 41 278H27Q21 284 21 287Z"></path></g><g data-mml-node="mi" transform="translate(6053,0)"><path data-c="1D453" d="M118 -162Q120 -162 124 -164T135 -167T147 -168Q160 -168 171 -155T187 -126Q197 -99 221 27T267 267T289 382V385H242Q195 385 192 387Q188 390 188 397L195 425Q197 430 203 430T250 431Q298 431 298 432Q298 434 307 482T319 540Q356 705 465 705Q502 703 526 683T550 630Q550 594 529 578T487 561Q443 561 443 603Q443 622 454 636T478 657L487 662Q471 668 457 668Q445 668 434 658T419 630Q412 601 403 552T387 469T380 433Q380 431 435 431Q480 431 487 430T498 424Q499 420 496 407T491 391Q489 386 482 386T428 385H372L349 263Q301 15 282 -47Q255 -132 212 -173Q175 -205 139 -205Q107 -205 81 -186T55 -132Q55 -95 76 -78T118 -61Q162 -61 162 -103Q162 -122 151 -136T127 -157L118 -162Z"></path></g><g data-mml-node="mi" transform="translate(6603,0)"><path data-c="1D453" d="M118 -162Q120 -162 124 -164T135 -167T147 -168Q160 -168 171 -155T187 -126Q197 -99 221 27T267 267T289 382V385H242Q195 385 192 387Q188 390 188 397L195 425Q197 430 203 430T250 431Q298 431 298 432Q298 434 307 482T319 540Q356 705 465 705Q502 703 526 683T550 630Q550 594 529 578T487 561Q443 561 443 603Q443 622 454 636T478 657L487 662Q471 668 457 668Q445 668 434 658T419 630Q412 601 403 552T387 469T380 433Q380 431 435 431Q480 431 487 430T498 424Q499 420 496 407T491 391Q489 386 482 386T428 385H372L349 263Q301 15 282 -47Q255 -132 212 -173Q175 -205 139 -205Q107 -205 81 -186T55 -132Q55 -95 76 -78T118 -61Q162 -61 162 -103Q162 -122 151 -136T127 -157L118 -162Z"></path></g><g data-mml-node="mi" transform="translate(7153,0)"><path data-c="1D452" d="M39 168Q39 225 58 272T107 350T174 402T244 433T307 442H310Q355 442 388 420T421 355Q421 265 310 237Q261 224 176 223Q139 223 138 221Q138 219 132 186T125 128Q125 81 146 54T209 26T302 45T394 111Q403 121 406 121Q410 121 419 112T429 98T420 82T390 55T344 24T281 -1T205 -11Q126 -11 83 42T39 168ZM373 353Q367 405 305 405Q272 405 244 391T199 357T170 316T154 280T149 261Q149 260 169 260Q282 260 327 284T373 353Z"></path></g><g data-mml-node="mi" transform="translate(7619,0)"><path data-c="1D45F" d="M21 287Q22 290 23 295T28 317T38 348T53 381T73 411T99 433T132 442Q161 442 183 430T214 408T225 388Q227 382 228 382T236 389Q284 441 347 441H350Q398 441 422 400Q430 381 430 363Q430 333 417 315T391 292T366 288Q346 288 334 299T322 328Q322 376 378 392Q356 405 342 405Q286 405 239 331Q229 315 224 298T190 165Q156 25 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 114 189T154 366Q154 405 128 405Q107 405 92 377T68 316T57 280Q55 278 41 278H27Q21 284 21 287Z"></path></g><g data-mml-node="mi" transform="translate(8070,0)"><path data-c="1D43B" d="M228 637Q194 637 192 641Q191 643 191 649Q191 673 202 682Q204 683 219 683Q260 681 355 681Q389 681 418 681T463 682T483 682Q499 682 499 672Q499 670 497 658Q492 641 487 638H485Q483 638 480 638T473 638T464 637T455 637Q416 636 405 634T387 623Q384 619 355 500Q348 474 340 442T328 395L324 380Q324 378 469 378H614L615 381Q615 384 646 504Q674 619 674 627T617 637Q594 637 587 639T580 648Q580 650 582 660Q586 677 588 679T604 682Q609 682 646 681T740 680Q802 680 835 681T871 682Q888 682 888 672Q888 645 876 638H874Q872 638 869 638T862 638T853 637T844 637Q805 636 794 634T776 623Q773 618 704 340T634 58Q634 51 638 51Q646 48 692 46H723Q729 38 729 37T726 19Q722 6 716 0H701Q664 2 567 2Q533 2 504 2T458 2T437 1Q420 1 420 10Q420 15 423 24Q428 43 433 45Q437 46 448 46H454Q481 46 514 49Q520 50 522 50T528 55T534 64T540 82T547 110T558 153Q565 181 569 198Q602 330 602 331T457 332H312L279 197Q245 63 245 58Q245 51 253 49T303 46H334Q340 38 340 37T337 19Q333 6 327 0H312Q275 2 178 2Q144 2 115 2T69 2T48 1Q31 1 31 10Q31 12 34 24Q39 43 44 45Q48 46 59 46H65Q92 46 125 49Q139 52 144 61Q147 65 216 339T285 628Q285 635 228 637Z"></path></g><g data-mml-node="mi" transform="translate(8958,0)"><path data-c="1D452" d="M39 168Q39 225 58 272T107 350T174 402T244 433T307 442H310Q355 442 388 420T421 355Q421 265 310 237Q261 224 176 223Q139 223 138 221Q138 219 132 186T125 128Q125 81 146 54T209 26T302 45T394 111Q403 121 406 121Q410 121 419 112T429 98T420 82T390 55T344 24T281 -1T205 -11Q126 -11 83 42T39 168ZM373 353Q367 405 305 405Q272 405 244 391T199 357T170 316T154 280T149 261Q149 260 169 260Q282 260 327 284T373 353Z"></path></g><g data-mml-node="mi" transform="translate(9424,0)"><path data-c="1D456" d="M184 600Q184 624 203 642T247 661Q265 661 277 649T290 619Q290 596 270 577T226 557Q211 557 198 567T184 600ZM21 287Q21 295 30 318T54 369T98 420T158 442Q197 442 223 419T250 357Q250 340 236 301T196 196T154 83Q149 61 149 51Q149 26 166 26Q175 26 185 29T208 43T235 78T260 137Q263 149 265 151T282 153Q302 153 302 143Q302 135 293 112T268 61T223 11T161 -11Q129 -11 102 10T74 74Q74 91 79 106T122 220Q160 321 166 341T173 380Q173 404 156 404H154Q124 404 99 371T61 287Q60 286 59 284T58 281T56 279T53 278T49 278T41 278H27Q21 284 21 287Z"></path></g><g data-mml-node="mi" transform="translate(9769,0)"><path data-c="1D454" d="M311 43Q296 30 267 15T206 0Q143 0 105 45T66 160Q66 265 143 353T314 442Q361 442 401 394L404 398Q406 401 409 404T418 412T431 419T447 422Q461 422 470 413T480 394Q480 379 423 152T363 -80Q345 -134 286 -169T151 -205Q10 -205 10 -137Q10 -111 28 -91T74 -71Q89 -71 102 -80T116 -111Q116 -121 114 -130T107 -144T99 -154T92 -162L90 -164H91Q101 -167 151 -167Q189 -167 211 -155Q234 -144 254 -122T282 -75Q288 -56 298 -13Q311 35 311 43ZM384 328L380 339Q377 350 375 354T369 368T359 382T346 393T328 402T306 405Q262 405 221 352Q191 313 171 233T151 117Q151 38 213 38Q269 38 323 108L331 118L384 328Z"></path></g><g data-mml-node="mi" transform="translate(10246,0)"><path data-c="210E" d="M137 683Q138 683 209 688T282 694Q294 694 294 685Q294 674 258 534Q220 386 220 383Q220 381 227 388Q288 442 357 442Q411 442 444 415T478 336Q478 285 440 178T402 50Q403 36 407 31T422 26Q450 26 474 56T513 138Q516 149 519 151T535 153Q555 153 555 145Q555 144 551 130Q535 71 500 33Q466 -10 419 -10H414Q367 -10 346 17T325 74Q325 90 361 192T398 345Q398 404 354 404H349Q266 404 205 306L198 293L164 158Q132 28 127 16Q114 -11 83 -11Q69 -11 59 -2T48 16Q48 30 121 320L195 616Q195 629 188 632T149 637H128Q122 643 122 645T124 664Q129 683 137 683Z"></path></g><g data-mml-node="mi" transform="translate(10822,0)"><path data-c="1D461" d="M26 385Q19 392 19 395Q19 399 22 411T27 425Q29 430 36 430T87 431H140L159 511Q162 522 166 540T173 566T179 586T187 603T197 615T211 624T229 626Q247 625 254 615T261 596Q261 589 252 549T232 470L222 433Q222 431 272 431H323Q330 424 330 420Q330 398 317 385H210L174 240Q135 80 135 68Q135 26 162 26Q197 26 230 60T283 144Q285 150 288 151T303 153H307Q322 153 322 145Q322 142 319 133Q314 117 301 95T267 48T216 6T155 -11Q125 -11 98 4T59 56Q57 64 57 83V101L92 241Q127 382 128 383Q128 385 77 385H26Z"></path></g></g><g data-mml-node="mrow" transform="translate(220,-345) scale(0.707)"><g data-mml-node="mi"><path data-c="1D45A" d="M21 287Q22 293 24 303T36 341T56 388T88 425T132 442T175 435T205 417T221 395T229 376L231 369Q231 367 232 367L243 378Q303 442 384 442Q401 442 415 440T441 433T460 423T475 411T485 398T493 385T497 373T500 364T502 357L510 367Q573 442 659 442Q713 442 746 415T780 336Q780 285 742 178T704 50Q705 36 709 31T724 26Q752 26 776 56T815 138Q818 149 821 151T837 153Q857 153 857 145Q857 144 853 130Q845 101 831 73T785 17T716 -10Q669 -10 648 17T627 73Q627 92 663 193T700 345Q700 404 656 404H651Q565 404 506 303L499 291L466 157Q433 26 428 16Q415 -11 385 -11Q372 -11 364 -4T353 8T350 18Q350 29 384 161L420 307Q423 322 423 345Q423 404 379 404H374Q288 404 229 303L222 291L189 157Q156 26 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 112 181Q151 335 151 342Q154 357 154 369Q154 405 129 405Q107 405 92 377T69 316T57 280Q55 278 41 278H27Q21 284 21 287Z"></path></g><g data-mml-node="mi" transform="translate(878,0)"><path data-c="1D456" d="M184 600Q184 624 203 642T247 661Q265 661 277 649T290 619Q290 596 270 577T226 557Q211 557 198 567T184 600ZM21 287Q21 295 30 318T54 369T98 420T158 442Q197 442 223 419T250 357Q250 340 236 301T196 196T154 83Q149 61 149 51Q149 26 166 26Q175 26 185 29T208 43T235 78T260 137Q263 149 265 151T282 153Q302 153 302 143Q302 135 293 112T268 61T223 11T161 -11Q129 -11 102 10T74 74Q74 91 79 106T122 220Q160 321 166 341T173 380Q173 404 156 404H154Q124 404 99 371T61 287Q60 286 59 284T58 281T56 279T53 278T49 278T41 278H27Q21 284 21 287Z"></path></g><g data-mml-node="mi" transform="translate(1223,0)"><path data-c="1D45B" d="M21 287Q22 293 24 303T36 341T56 388T89 425T135 442Q171 442 195 424T225 390T231 369Q231 367 232 367L243 378Q304 442 382 442Q436 442 469 415T503 336T465 179T427 52Q427 26 444 26Q450 26 453 27Q482 32 505 65T540 145Q542 153 560 153Q580 153 580 145Q580 144 576 130Q568 101 554 73T508 17T439 -10Q392 -10 371 17T350 73Q350 92 386 193T423 345Q423 404 379 404H374Q288 404 229 303L222 291L189 157Q156 26 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 112 180T152 343Q153 348 153 366Q153 405 129 405Q91 405 66 305Q60 285 60 284Q58 278 41 278H27Q21 284 21 287Z"></path></g><g data-mml-node="mi" transform="translate(1823,0)"><path data-c="1D439" d="M48 1Q31 1 31 11Q31 13 34 25Q38 41 42 43T65 46Q92 46 125 49Q139 52 144 61Q146 66 215 342T285 622Q285 629 281 629Q273 632 228 634H197Q191 640 191 642T193 659Q197 676 203 680H742Q749 676 749 669Q749 664 736 557T722 447Q720 440 702 440H690Q683 445 683 453Q683 454 686 477T689 530Q689 560 682 579T663 610T626 626T575 633T503 634H480Q398 633 393 631Q388 629 386 623Q385 622 352 492L320 363H375Q378 363 398 363T426 364T448 367T472 374T489 386Q502 398 511 419T524 457T529 475Q532 480 548 480H560Q567 475 567 470Q567 467 536 339T502 207Q500 200 482 200H470Q463 206 463 212Q463 215 468 234T473 274Q473 303 453 310T364 317H309L277 190Q245 66 245 60Q245 46 334 46H359Q365 40 365 39T363 19Q359 6 353 0H336Q295 2 185 2Q120 2 86 2T48 1Z"></path></g><g data-mml-node="mi" transform="translate(2572,0)"><path data-c="1D45F" d="M21 287Q22 290 23 295T28 317T38 348T53 381T73 411T99 433T132 442Q161 442 183 430T214 408T225 388Q227 382 228 382T236 389Q284 441 347 441H350Q398 441 422 400Q430 381 430 363Q430 333 417 315T391 292T366 288Q346 288 334 299T322 328Q322 376 378 392Q356 405 342 405Q286 405 239 331Q229 315 224 298T190 165Q156 25 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 114 189T154 366Q154 405 128 405Q107 405 92 377T68 316T57 280Q55 278 41 278H27Q21 284 21 287Z"></path></g><g data-mml-node="mi" transform="translate(3023,0)"><path data-c="1D44E" d="M33 157Q33 258 109 349T280 441Q331 441 370 392Q386 422 416 422Q429 422 439 414T449 394Q449 381 412 234T374 68Q374 43 381 35T402 26Q411 27 422 35Q443 55 463 131Q469 151 473 152Q475 153 483 153H487Q506 153 506 144Q506 138 501 117T481 63T449 13Q436 0 417 -8Q409 -10 393 -10Q359 -10 336 5T306 36L300 51Q299 52 296 50Q294 48 292 46Q233 -10 172 -10Q117 -10 75 30T33 157ZM351 328Q351 334 346 350T323 385T277 405Q242 405 210 374T160 293Q131 214 119 129Q119 126 119 118T118 106Q118 61 136 44T179 26Q217 26 254 59T298 110Q300 114 325 217T351 328Z"></path></g><g data-mml-node="mi" transform="translate(3552,0)"><path data-c="1D454" d="M311 43Q296 30 267 15T206 0Q143 0 105 45T66 160Q66 265 143 353T314 442Q361 442 401 394L404 398Q406 401 409 404T418 412T431 419T447 422Q461 422 470 413T480 394Q480 379 423 152T363 -80Q345 -134 286 -169T151 -205Q10 -205 10 -137Q10 -111 28 -91T74 -71Q89 -71 102 -80T116 -111Q116 -121 114 -130T107 -144T99 -154T92 -162L90 -164H91Q101 -167 151 -167Q189 -167 211 -155Q234 -144 254 -122T282 -75Q288 -56 298 -13Q311 35 311 43ZM384 328L380 339Q377 350 375 354T369 368T359 382T346 393T328 402T306 405Q262 405 221 352Q191 313 171 233T151 117Q151 38 213 38Q269 38 323 108L331 118L384 328Z"></path></g><g data-mml-node="mi" transform="translate(4029,0)"><path data-c="1D45A" d="M21 287Q22 293 24 303T36 341T56 388T88 425T132 442T175 435T205 417T221 395T229 376L231 369Q231 367 232 367L243 378Q303 442 384 442Q401 442 415 440T441 433T460 423T475 411T485 398T493 385T497 373T500 364T502 357L510 367Q573 442 659 442Q713 442 746 415T780 336Q780 285 742 178T704 50Q705 36 709 31T724 26Q752 26 776 56T815 138Q818 149 821 151T837 153Q857 153 857 145Q857 144 853 130Q845 101 831 73T785 17T716 -10Q669 -10 648 17T627 73Q627 92 663 193T700 345Q700 404 656 404H651Q565 404 506 303L499 291L466 157Q433 26 428 16Q415 -11 385 -11Q372 -11 364 -4T353 8T350 18Q350 29 384 161L420 307Q423 322 423 345Q423 404 379 404H374Q288 404 229 303L222 291L189 157Q156 26 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 112 181Q151 335 151 342Q154 357 154 369Q154 405 129 405Q107 405 92 377T69 316T57 280Q55 278 41 278H27Q21 284 21 287Z"></path></g><g data-mml-node="mi" transform="translate(4907,0)"><path data-c="1D452" d="M39 168Q39 225 58 272T107 350T174 402T244 433T307 442H310Q355 442 388 420T421 355Q421 265 310 237Q261 224 176 223Q139 223 138 221Q138 219 132 186T125 128Q125 81 146 54T209 26T302 45T394 111Q403 121 406 121Q410 121 419 112T429 98T420 82T390 55T344 24T281 -1T205 -11Q126 -11 83 42T39 168ZM373 353Q367 405 305 405Q272 405 244 391T199 357T170 316T154 280T149 261Q149 260 169 260Q282 260 327 284T373 353Z"></path></g><g data-mml-node="mi" transform="translate(5373,0)"><path data-c="1D45B" d="M21 287Q22 293 24 303T36 341T56 388T89 425T135 442Q171 442 195 424T225 390T231 369Q231 367 232 367L243 378Q304 442 382 442Q436 442 469 415T503 336T465 179T427 52Q427 26 444 26Q450 26 453 27Q482 32 505 65T540 145Q542 153 560 153Q580 153 580 145Q580 144 576 130Q568 101 554 73T508 17T439 -10Q392 -10 371 17T350 73Q350 92 386 193T423 345Q423 404 379 404H374Q288 404 229 303L222 291L189 157Q156 26 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 112 180T152 343Q153 348 153 366Q153 405 129 405Q91 405 66 305Q60 285 60 284Q58 278 41 278H27Q21 284 21 287Z"></path></g><g data-mml-node="mi" transform="translate(5973,0)"><path data-c="1D461" d="M26 385Q19 392 19 395Q19 399 22 411T27 425Q29 430 36 430T87 431H140L159 511Q162 522 166 540T173 566T179 586T187 603T197 615T211 624T229 626Q247 625 254 615T261 596Q261 589 252 549T232 470L222 433Q222 431 272 431H323Q330 424 330 420Q330 398 317 385H210L174 240Q135 80 135 68Q135 26 162 26Q197 26 230 60T283 144Q285 150 288 151T303 153H307Q322 153 322 145Q322 142 319 133Q314 117 301 95T267 48T216 6T155 -11Q125 -11 98 4T59 56Q57 64 57 83V101L92 241Q127 382 128 383Q128 385 77 385H26Z"></path></g><g data-mml-node="mi" transform="translate(6334,0)"><path data-c="1D437" d="M287 628Q287 635 230 637Q207 637 200 638T193 647Q193 655 197 667T204 682Q206 683 403 683Q570 682 590 682T630 676Q702 659 752 597T803 431Q803 275 696 151T444 3L430 1L236 0H125H72Q48 0 41 2T33 11Q33 13 36 25Q40 41 44 43T67 46Q94 46 127 49Q141 52 146 61Q149 65 218 339T287 628ZM703 469Q703 507 692 537T666 584T629 613T590 629T555 636Q553 636 541 636T512 636T479 637H436Q392 637 386 627Q384 623 313 339T242 52Q242 48 253 48T330 47Q335 47 349 47T373 46Q499 46 581 128Q617 164 640 212T683 339T703 469Z"></path></g><g data-mml-node="mi" transform="translate(7162,0)"><path data-c="1D452" d="M39 168Q39 225 58 272T107 350T174 402T244 433T307 442H310Q355 442 388 420T421 355Q421 265 310 237Q261 224 176 223Q139 223 138 221Q138 219 132 186T125 128Q125 81 146 54T209 26T302 45T394 111Q403 121 406 121Q410 121 419 112T429 98T420 82T390 55T344 24T281 -1T205 -11Q126 -11 83 42T39 168ZM373 353Q367 405 305 405Q272 405 244 391T199 357T170 316T154 280T149 261Q149 260 169 260Q282 260 327 284T373 353Z"></path></g><g data-mml-node="mi" transform="translate(7628,0)"><path data-c="1D45B" d="M21 287Q22 293 24 303T36 341T56 388T89 425T135 442Q171 442 195 424T225 390T231 369Q231 367 232 367L243 378Q304 442 382 442Q436 442 469 415T503 336T465 179T427 52Q427 26 444 26Q450 26 453 27Q482 32 505 65T540 145Q542 153 560 153Q580 153 580 145Q580 144 576 130Q568 101 554 73T508 17T439 -10Q392 -10 371 17T350 73Q350 92 386 193T423 345Q423 404 379 404H374Q288 404 229 303L222 291L189 157Q156 26 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 112 180T152 343Q153 348 153 366Q153 405 129 405Q91 405 66 305Q60 285 60 284Q58 278 41 278H27Q21 284 21 287Z"></path></g><g data-mml-node="mi" transform="translate(8228,0)"><path data-c="1D460" d="M131 289Q131 321 147 354T203 415T300 442Q362 442 390 415T419 355Q419 323 402 308T364 292Q351 292 340 300T328 326Q328 342 337 354T354 372T367 378Q368 378 368 379Q368 382 361 388T336 399T297 405Q249 405 227 379T204 326Q204 301 223 291T278 274T330 259Q396 230 396 163Q396 135 385 107T352 51T289 7T195 -10Q118 -10 86 19T53 87Q53 126 74 143T118 160Q133 160 146 151T160 120Q160 94 142 76T111 58Q109 57 108 57T107 55Q108 52 115 47T146 34T201 27Q237 27 263 38T301 66T318 97T323 122Q323 150 302 164T254 181T195 196T148 231Q131 256 131 289Z"></path></g><g data-mml-node="mi" transform="translate(8697,0)"><path data-c="1D456" d="M184 600Q184 624 203 642T247 661Q265 661 277 649T290 619Q290 596 270 577T226 557Q211 557 198 567T184 600ZM21 287Q21 295 30 318T54 369T98 420T158 442Q197 442 223 419T250 357Q250 340 236 301T196 196T154 83Q149 61 149 51Q149 26 166 26Q175 26 185 29T208 43T235 78T260 137Q263 149 265 151T282 153Q302 153 302 143Q302 135 293 112T268 61T223 11T161 -11Q129 -11 102 10T74 74Q74 91 79 106T122 220Q160 321 166 341T173 380Q173 404 156 404H154Q124 404 99 371T61 287Q60 286 59 284T58 281T56 279T53 278T49 278T41 278H27Q21 284 21 287Z"></path></g><g data-mml-node="mi" transform="translate(9042,0)"><path data-c="1D461" d="M26 385Q19 392 19 395Q19 399 22 411T27 425Q29 430 36 430T87 431H140L159 511Q162 522 166 540T173 566T179 586T187 603T197 615T211 624T229 626Q247 625 254 615T261 596Q261 589 252 549T232 470L222 433Q222 431 272 431H323Q330 424 330 420Q330 398 317 385H210L174 240Q135 80 135 68Q135 26 162 26Q197 26 230 60T283 144Q285 150 288 151T303 153H307Q322 153 322 145Q322 142 319 133Q314 117 301 95T267 48T216 6T155 -11Q125 -11 98 4T59 56Q57 64 57 83V101L92 241Q127 382 128 383Q128 385 77 385H26Z"></path></g><g data-mml-node="mi" transform="translate(9403,0)"><path data-c="1D466" d="M21 287Q21 301 36 335T84 406T158 442Q199 442 224 419T250 355Q248 336 247 334Q247 331 231 288T198 191T182 105Q182 62 196 45T238 27Q261 27 281 38T312 61T339 94Q339 95 344 114T358 173T377 247Q415 397 419 404Q432 431 462 431Q475 431 483 424T494 412T496 403Q496 390 447 193T391 -23Q363 -106 294 -155T156 -205Q111 -205 77 -183T43 -117Q43 -95 50 -80T69 -58T89 -48T106 -45Q150 -45 150 -87Q150 -107 138 -122T115 -142T102 -147L99 -148Q101 -153 118 -160T152 -167H160Q177 -167 186 -165Q219 -156 247 -127T290 -65T313 -9T321 21L315 17Q309 13 296 6T270 -6Q250 -11 231 -11Q185 -11 150 11T104 82Q103 89 103 113Q103 170 138 262T173 379Q173 380 173 381Q173 390 173 393T169 400T158 404H154Q131 404 112 385T82 344T65 302T57 280Q55 278 41 278H27Q21 284 21 287Z"></path></g><g data-mml-node="mi" transform="translate(9893,0)"><path data-c="1D447" d="M40 437Q21 437 21 445Q21 450 37 501T71 602L88 651Q93 669 101 677H569H659Q691 677 697 676T704 667Q704 661 687 553T668 444Q668 437 649 437Q640 437 637 437T631 442L629 445Q629 451 635 490T641 551Q641 586 628 604T573 629Q568 630 515 631Q469 631 457 630T439 622Q438 621 368 343T298 60Q298 48 386 46Q418 46 427 45T436 36Q436 31 433 22Q429 4 424 1L422 0Q419 0 415 0Q410 0 363 1T228 2Q99 2 64 0H49Q43 6 43 9T45 27Q49 40 55 46H83H94Q174 46 189 55Q190 56 191 56Q196 59 201 76T241 233Q258 301 269 344Q339 619 339 625Q339 630 310 630H279Q212 630 191 624Q146 614 121 583T67 467Q60 445 57 441T43 437H40Z"></path></g><g data-mml-node="mi" transform="translate(10597,0)"><path data-c="1D452" d="M39 168Q39 225 58 272T107 350T174 402T244 433T307 442H310Q355 442 388 420T421 355Q421 265 310 237Q261 224 176 223Q139 223 138 221Q138 219 132 186T125 128Q125 81 146 54T209 26T302 45T394 111Q403 121 406 121Q410 121 419 112T429 98T420 82T390 55T344 24T281 -1T205 -11Q126 -11 83 42T39 168ZM373 353Q367 405 305 405Q272 405 244 391T199 357T170 316T154 280T149 261Q149 260 169 260Q282 260 327 284T373 353Z"></path></g><g data-mml-node="mi" transform="translate(11063,0)"><path data-c="1D465" d="M52 289Q59 331 106 386T222 442Q257 442 286 424T329 379Q371 442 430 442Q467 442 494 420T522 361Q522 332 508 314T481 292T458 288Q439 288 427 299T415 328Q415 374 465 391Q454 404 425 404Q412 404 406 402Q368 386 350 336Q290 115 290 78Q290 50 306 38T341 26Q378 26 414 59T463 140Q466 150 469 151T485 153H489Q504 153 504 145Q504 144 502 134Q486 77 440 33T333 -11Q263 -11 227 52Q186 -10 133 -10H127Q78 -10 57 16T35 71Q35 103 54 123T99 143Q142 143 142 101Q142 81 130 66T107 46T94 41L91 40Q91 39 97 36T113 29T132 26Q168 26 194 71Q203 87 217 139T245 247T261 313Q266 340 266 352Q266 380 251 392T217 404Q177 404 142 372T93 290Q91 281 88 280T72 278H58Q52 284 52 289Z"></path></g><g data-mml-node="mi" transform="translate(11635,0)"><path data-c="1D452" d="M39 168Q39 225 58 272T107 350T174 402T244 433T307 442H310Q355 442 388 420T421 355Q421 265 310 237Q261 224 176 223Q139 223 138 221Q138 219 132 186T125 128Q125 81 146 54T209 26T302 45T394 111Q403 121 406 121Q410 121 419 112T429 98T420 82T390 55T344 24T281 -1T205 -11Q126 -11 83 42T39 168ZM373 353Q367 405 305 405Q272 405 244 391T199 357T170 316T154 280T149 261Q149 260 169 260Q282 260 327 284T373 353Z"></path></g><g data-mml-node="mi" transform="translate(12101,0)"><path data-c="1D459" d="M117 59Q117 26 142 26Q179 26 205 131Q211 151 215 152Q217 153 225 153H229Q238 153 241 153T246 151T248 144Q247 138 245 128T234 90T214 43T183 6T137 -11Q101 -11 70 11T38 85Q38 97 39 102L104 360Q167 615 167 623Q167 626 166 628T162 632T157 634T149 635T141 636T132 637T122 637Q112 637 109 637T101 638T95 641T94 647Q94 649 96 661Q101 680 107 682T179 688Q194 689 213 690T243 693T254 694Q266 694 266 686Q266 675 193 386T118 83Q118 81 118 75T117 65V59Z"></path></g><g data-mml-node="mi" transform="translate(12399,0)"><path data-c="1D446" d="M308 24Q367 24 416 76T466 197Q466 260 414 284Q308 311 278 321T236 341Q176 383 176 462Q176 523 208 573T273 648Q302 673 343 688T407 704H418H425Q521 704 564 640Q565 640 577 653T603 682T623 704Q624 704 627 704T632 705Q645 705 645 698T617 577T585 459T569 456Q549 456 549 465Q549 471 550 475Q550 478 551 494T553 520Q553 554 544 579T526 616T501 641Q465 662 419 662Q362 662 313 616T263 510Q263 480 278 458T319 427Q323 425 389 408T456 390Q490 379 522 342T554 242Q554 216 546 186Q541 164 528 137T492 78T426 18T332 -20Q320 -22 298 -22Q199 -22 144 33L134 44L106 13Q83 -14 78 -18T65 -22Q52 -22 52 -14Q52 -11 110 221Q112 227 130 227H143Q149 221 149 216Q149 214 148 207T144 186T142 153Q144 114 160 87T203 47T255 29T308 24Z"></path></g><g data-mml-node="mi" transform="translate(13044,0)"><path data-c="1D456" d="M184 600Q184 624 203 642T247 661Q265 661 277 649T290 619Q290 596 270 577T226 557Q211 557 198 567T184 600ZM21 287Q21 295 30 318T54 369T98 420T158 442Q197 442 223 419T250 357Q250 340 236 301T196 196T154 83Q149 61 149 51Q149 26 166 26Q175 26 185 29T208 43T235 78T260 137Q263 149 265 151T282 153Q302 153 302 143Q302 135 293 112T268 61T223 11T161 -11Q129 -11 102 10T74 74Q74 91 79 106T122 220Q160 321 166 341T173 380Q173 404 156 404H154Q124 404 99 371T61 287Q60 286 59 284T58 281T56 279T53 278T49 278T41 278H27Q21 284 21 287Z"></path></g><g data-mml-node="mi" transform="translate(13389,0)"><path data-c="1D467" d="M347 338Q337 338 294 349T231 360Q211 360 197 356T174 346T162 335T155 324L153 320Q150 317 138 317Q117 317 117 325Q117 330 120 339Q133 378 163 406T229 440Q241 442 246 442Q271 442 291 425T329 392T367 375Q389 375 411 408T434 441Q435 442 449 442H462Q468 436 468 434Q468 430 463 420T449 399T432 377T418 358L411 349Q368 298 275 214T160 106L148 94L163 93Q185 93 227 82T290 71Q328 71 360 90T402 140Q406 149 409 151T424 153Q443 153 443 143Q443 138 442 134Q425 72 376 31T278 -11Q252 -11 232 6T193 40T155 57Q111 57 76 -3Q70 -11 59 -11H54H41Q35 -5 35 -2Q35 13 93 84Q132 129 225 214T340 322Q352 338 347 338Z"></path></g><g data-mml-node="msub" transform="translate(13854,0)"><g data-mml-node="mi"><path data-c="1D452" d="M39 168Q39 225 58 272T107 350T174 402T244 433T307 442H310Q355 442 388 420T421 355Q421 265 310 237Q261 224 176 223Q139 223 138 221Q138 219 132 186T125 128Q125 81 146 54T209 26T302 45T394 111Q403 121 406 121Q410 121 419 112T429 98T420 82T390 55T344 24T281 -1T205 -11Q126 -11 83 42T39 168ZM373 353Q367 405 305 405Q272 405 244 391T199 357T170 316T154 280T149 261Q149 260 169 260Q282 260 327 284T373 353Z"></path></g><g data-mml-node="TeXAtom" transform="translate(499,-150) scale(0.707)" data-mjx-texclass="ORD"><g data-mml-node="mi"><path data-c="210E" d="M137 683Q138 683 209 688T282 694Q294 694 294 685Q294 674 258 534Q220 386 220 383Q220 381 227 388Q288 442 357 442Q411 442 444 415T478 336Q478 285 440 178T402 50Q403 36 407 31T422 26Q450 26 474 56T513 138Q516 149 519 151T535 153Q555 153 555 145Q555 144 551 130Q535 71 500 33Q466 -10 419 -10H414Q367 -10 346 17T325 74Q325 90 361 192T398 345Q398 404 354 404H349Q266 404 205 306L198 293L164 158Q132 28 127 16Q114 -11 83 -11Q69 -11 59 -2T48 16Q48 30 121 320L195 616Q195 629 188 632T149 637H128Q122 643 122 645T124 664Q129 683 137 683Z"></path></g><g data-mml-node="mi" transform="translate(576,0)"><path data-c="1D452" d="M39 168Q39 225 58 272T107 350T174 402T244 433T307 442H310Q355 442 388 420T421 355Q421 265 310 237Q261 224 176 223Q139 223 138 221Q138 219 132 186T125 128Q125 81 146 54T209 26T302 45T394 111Q403 121 406 121Q410 121 419 112T429 98T420 82T390 55T344 24T281 -1T205 -11Q126 -11 83 42T39 168ZM373 353Q367 405 305 405Q272 405 244 391T199 357T170 316T154 280T149 261Q149 260 169 260Q282 260 327 284T373 353Z"></path></g><g data-mml-node="mi" transform="translate(1042,0)"><path data-c="1D456" d="M184 600Q184 624 203 642T247 661Q265 661 277 649T290 619Q290 596 270 577T226 557Q211 557 198 567T184 600ZM21 287Q21 295 30 318T54 369T98 420T158 442Q197 442 223 419T250 357Q250 340 236 301T196 196T154 83Q149 61 149 51Q149 26 166 26Q175 26 185 29T208 43T235 78T260 137Q263 149 265 151T282 153Q302 153 302 143Q302 135 293 112T268 61T223 11T161 -11Q129 -11 102 10T74 74Q74 91 79 106T122 220Q160 321 166 341T173 380Q173 404 156 404H154Q124 404 99 371T61 287Q60 286 59 284T58 281T56 279T53 278T49 278T41 278H27Q21 284 21 287Z"></path></g><g data-mml-node="mi" transform="translate(1387,0)"><path data-c="1D454" d="M311 43Q296 30 267 15T206 0Q143 0 105 45T66 160Q66 265 143 353T314 442Q361 442 401 394L404 398Q406 401 409 404T418 412T431 419T447 422Q461 422 470 413T480 394Q480 379 423 152T363 -80Q345 -134 286 -169T151 -205Q10 -205 10 -137Q10 -111 28 -91T74 -71Q89 -71 102 -80T116 -111Q116 -121 114 -130T107 -144T99 -154T92 -162L90 -164H91Q101 -167 151 -167Q189 -167 211 -155Q234 -144 254 -122T282 -75Q288 -56 298 -13Q311 35 311 43ZM384 328L380 339Q377 350 375 354T369 368T359 382T346 393T328 402T306 405Q262 405 221 352Q191 313 171 233T151 117Q151 38 213 38Q269 38 323 108L331 118L384 328Z"></path></g><g data-mml-node="mi" transform="translate(1864,0)"><path data-c="210E" d="M137 683Q138 683 209 688T282 694Q294 694 294 685Q294 674 258 534Q220 386 220 383Q220 381 227 388Q288 442 357 442Q411 442 444 415T478 336Q478 285 440 178T402 50Q403 36 407 31T422 26Q450 26 474 56T513 138Q516 149 519 151T535 153Q555 153 555 145Q555 144 551 130Q535 71 500 33Q466 -10 419 -10H414Q367 -10 346 17T325 74Q325 90 361 192T398 345Q398 404 354 404H349Q266 404 205 306L198 293L164 158Q132 28 127 16Q114 -11 83 -11Q69 -11 59 -2T48 16Q48 30 121 320L195 616Q195 629 188 632T149 637H128Q122 643 122 645T124 664Q129 683 137 683Z"></path></g><g data-mml-node="mi" transform="translate(2440,0)"><path data-c="1D461" d="M26 385Q19 392 19 395Q19 399 22 411T27 425Q29 430 36 430T87 431H140L159 511Q162 522 166 540T173 566T179 586T187 603T197 615T211 624T229 626Q247 625 254 615T261 596Q261 589 252 549T232 470L222 433Q222 431 272 431H323Q330 424 330 420Q330 398 317 385H210L174 240Q135 80 135 68Q135 26 162 26Q197 26 230 60T283 144Q285 150 288 151T303 153H307Q322 153 322 145Q322 142 319 133Q314 117 301 95T267 48T216 6T155 -11Q125 -11 98 4T59 56Q57 64 57 83V101L92 241Q127 382 128 383Q128 385 77 385H26Z"></path></g></g></g></g><rect width="11785" height="60" x="120" y="220"></rect></g></g><g data-mml-node="mo" transform="translate(12553,0) translate(0 -0.5)"><path data-c="2309" d="M16 1099V1150H303V-649H252V1099H16Z"></path></g></g></g></g></svg> </span></p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-usage-00966" href="#VUID-VkImageCreateInfo-usage-00966"></a> <span class="vuid">VUID-VkImageCreateInfo-usage-00966</span><br>

If <code>usage</code> includes <code>VK_IMAGE_USAGE_TRANSIENT_ATTACHMENT_BIT</code>,
<code>usage</code> <strong>must</strong> also contain at least one of
<code>VK_IMAGE_USAGE_COLOR_ATTACHMENT_BIT</code>,
<code>VK_IMAGE_USAGE_DEPTH_STENCIL_ATTACHMENT_BIT</code>, or
<code>VK_IMAGE_USAGE_INPUT_ATTACHMENT_BIT</code></p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-samples-02258" href="#VUID-VkImageCreateInfo-samples-02258"></a> <span class="vuid">VUID-VkImageCreateInfo-samples-02258</span><br>

<code>samples</code> <strong>must</strong> be a valid <a href="limits.html#VkSampleCountFlagBits" class="xref page">VkSampleCountFlagBits</a> value that is
set in <code>imageCreateSampleCounts</code> (as defined in
<a href="#resources-image-creation-limits">Image Creation Limits</a>)</p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-usage-00968" href="#VUID-VkImageCreateInfo-usage-00968"></a> <span class="vuid">VUID-VkImageCreateInfo-usage-00968</span><br>

If the <a href="features.html#features-shaderStorageImageMultisample" class="xref page">    <code>shaderStorageImageMultisample</code></a> feature is not enabled, and
<code>usage</code> contains <code>VK_IMAGE_USAGE_STORAGE_BIT</code>, <code>samples</code>
<strong>must</strong> be <code>VK_SAMPLE_COUNT_1_BIT</code></p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-flags-00969" href="#VUID-VkImageCreateInfo-flags-00969"></a> <span class="vuid">VUID-VkImageCreateInfo-flags-00969</span><br>

If the <a href="features.html#features-sparseBinding" class="xref page"><code>sparseBinding</code></a> feature is not
enabled, <code>flags</code> <strong>must</strong> not contain
<code>VK_IMAGE_CREATE_SPARSE_BINDING_BIT</code></p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-flags-01924" href="#VUID-VkImageCreateInfo-flags-01924"></a> <span class="vuid">VUID-VkImageCreateInfo-flags-01924</span><br>

If the <a href="features.html#features-sparseResidencyAliased" class="xref page"><code>sparseResidencyAliased</code></a>
feature is not enabled, <code>flags</code> <strong>must</strong> not contain
<code>VK_IMAGE_CREATE_SPARSE_ALIASED_BIT</code></p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-tiling-04121" href="#VUID-VkImageCreateInfo-tiling-04121"></a> <span class="vuid">VUID-VkImageCreateInfo-tiling-04121</span><br>

If <code>tiling</code> is <code>VK_IMAGE_TILING_LINEAR</code>, <code>flags</code> <strong>must</strong> not
contain <code>VK_IMAGE_CREATE_SPARSE_RESIDENCY_BIT</code></p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-imageType-00970" href="#VUID-VkImageCreateInfo-imageType-00970"></a> <span class="vuid">VUID-VkImageCreateInfo-imageType-00970</span><br>

If <code>imageType</code> is <code>VK_IMAGE_TYPE_1D</code>, <code>flags</code> <strong>must</strong> not
contain <code>VK_IMAGE_CREATE_SPARSE_RESIDENCY_BIT</code></p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-imageType-00971" href="#VUID-VkImageCreateInfo-imageType-00971"></a> <span class="vuid">VUID-VkImageCreateInfo-imageType-00971</span><br>

If the <a href="features.html#features-sparseResidencyImage2D" class="xref page"><code>sparseResidencyImage2D</code></a>
feature is not enabled, and <code>imageType</code> is <code>VK_IMAGE_TYPE_2D</code>,
<code>flags</code> <strong>must</strong> not contain <code>VK_IMAGE_CREATE_SPARSE_RESIDENCY_BIT</code></p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-imageType-00972" href="#VUID-VkImageCreateInfo-imageType-00972"></a> <span class="vuid">VUID-VkImageCreateInfo-imageType-00972</span><br>

If the <a href="features.html#features-sparseResidencyImage3D" class="xref page"><code>sparseResidencyImage3D</code></a>
feature is not enabled, and <code>imageType</code> is <code>VK_IMAGE_TYPE_3D</code>,
<code>flags</code> <strong>must</strong> not contain <code>VK_IMAGE_CREATE_SPARSE_RESIDENCY_BIT</code></p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-imageType-00973" href="#VUID-VkImageCreateInfo-imageType-00973"></a> <span class="vuid">VUID-VkImageCreateInfo-imageType-00973</span><br>

If the <a href="features.html#features-sparseResidency2Samples" class="xref page">    <code>sparseResidency2Samples</code></a> feature is not enabled, <code>imageType</code>
is <code>VK_IMAGE_TYPE_2D</code>, and <code>samples</code> is
<code>VK_SAMPLE_COUNT_2_BIT</code>, <code>flags</code> <strong>must</strong> not contain
<code>VK_IMAGE_CREATE_SPARSE_RESIDENCY_BIT</code></p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-imageType-00974" href="#VUID-VkImageCreateInfo-imageType-00974"></a> <span class="vuid">VUID-VkImageCreateInfo-imageType-00974</span><br>

If the <a href="features.html#features-sparseResidency4Samples" class="xref page">    <code>sparseResidency4Samples</code></a> feature is not enabled, <code>imageType</code>
is <code>VK_IMAGE_TYPE_2D</code>, and <code>samples</code> is
<code>VK_SAMPLE_COUNT_4_BIT</code>, <code>flags</code> <strong>must</strong> not contain
<code>VK_IMAGE_CREATE_SPARSE_RESIDENCY_BIT</code></p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-imageType-00975" href="#VUID-VkImageCreateInfo-imageType-00975"></a> <span class="vuid">VUID-VkImageCreateInfo-imageType-00975</span><br>

If the <a href="features.html#features-sparseResidency8Samples" class="xref page">    <code>sparseResidency8Samples</code></a> feature is not enabled, <code>imageType</code>
is <code>VK_IMAGE_TYPE_2D</code>, and <code>samples</code> is
<code>VK_SAMPLE_COUNT_8_BIT</code>, <code>flags</code> <strong>must</strong> not contain
<code>VK_IMAGE_CREATE_SPARSE_RESIDENCY_BIT</code></p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-imageType-00976" href="#VUID-VkImageCreateInfo-imageType-00976"></a> <span class="vuid">VUID-VkImageCreateInfo-imageType-00976</span><br>

If the <a href="features.html#features-sparseResidency16Samples" class="xref page">    <code>sparseResidency16Samples</code></a> feature is not enabled, <code>imageType</code>
is <code>VK_IMAGE_TYPE_2D</code>, and <code>samples</code> is
<code>VK_SAMPLE_COUNT_16_BIT</code>, <code>flags</code> <strong>must</strong> not contain
<code>VK_IMAGE_CREATE_SPARSE_RESIDENCY_BIT</code></p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-flags-00987" href="#VUID-VkImageCreateInfo-flags-00987"></a> <span class="vuid">VUID-VkImageCreateInfo-flags-00987</span><br>

If <code>flags</code> contains <code>VK_IMAGE_CREATE_SPARSE_RESIDENCY_BIT</code> or
<code>VK_IMAGE_CREATE_SPARSE_ALIASED_BIT</code>, it <strong>must</strong> also contain
<code>VK_IMAGE_CREATE_SPARSE_BINDING_BIT</code></p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-None-01925" href="#VUID-VkImageCreateInfo-None-01925"></a> <span class="vuid">VUID-VkImageCreateInfo-None-01925</span><br>

If any of the bits <code>VK_IMAGE_CREATE_SPARSE_BINDING_BIT</code>,
<code>VK_IMAGE_CREATE_SPARSE_RESIDENCY_BIT</code>, or
<code>VK_IMAGE_CREATE_SPARSE_ALIASED_BIT</code> are set,
<code>VK_IMAGE_USAGE_TRANSIENT_ATTACHMENT_BIT</code> <strong>must</strong> not also be set</p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-flags-01890" href="#VUID-VkImageCreateInfo-flags-01890"></a> <span class="vuid">VUID-VkImageCreateInfo-flags-01890</span><br>

If the <a href="features.html#features-protectedMemory" class="xref page"><code>protectedMemory</code></a> feature is
not enabled, <code>flags</code> <strong>must</strong> not contain
<code>VK_IMAGE_CREATE_PROTECTED_BIT</code></p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-None-01891" href="#VUID-VkImageCreateInfo-None-01891"></a> <span class="vuid">VUID-VkImageCreateInfo-None-01891</span><br>

If any of the bits <code>VK_IMAGE_CREATE_SPARSE_BINDING_BIT</code>,
<code>VK_IMAGE_CREATE_SPARSE_RESIDENCY_BIT</code>, or
<code>VK_IMAGE_CREATE_SPARSE_ALIASED_BIT</code> are set,
<code>VK_IMAGE_CREATE_PROTECTED_BIT</code> <strong>must</strong> not also be set</p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-pNext-00988" href="#VUID-VkImageCreateInfo-pNext-00988"></a> <span class="vuid">VUID-VkImageCreateInfo-pNext-00988</span><br>

If the <code>pNext</code> chain includes a
<a href="#VkExternalMemoryImageCreateInfoNV">VkExternalMemoryImageCreateInfoNV</a> structure, it <strong>must</strong> not contain
a <a href="#VkExternalMemoryImageCreateInfo">VkExternalMemoryImageCreateInfo</a> structure</p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-pNext-00990" href="#VUID-VkImageCreateInfo-pNext-00990"></a> <span class="vuid">VUID-VkImageCreateInfo-pNext-00990</span><br>

If the <code>pNext</code> chain includes a
<a href="#VkExternalMemoryImageCreateInfo">VkExternalMemoryImageCreateInfo</a> structure, its <code>handleTypes</code>
member <strong>must</strong> only contain bits that are also in
<a href="capabilities.html#VkExternalImageFormatProperties" class="xref page">VkExternalImageFormatProperties</a>::<code>externalMemoryProperties.compatibleHandleTypes</code>,
as returned by <a href="capabilities.html#vkGetPhysicalDeviceImageFormatProperties2" class="xref page">vkGetPhysicalDeviceImageFormatProperties2</a> with
<code>format</code>, <code>imageType</code>, <code>tiling</code>, <code>usage</code>, and
<code>flags</code> equal to those in this structure, and with a
<a href="capabilities.html#VkPhysicalDeviceExternalImageFormatInfo" class="xref page">VkPhysicalDeviceExternalImageFormatInfo</a> structure included in the
<code>pNext</code> chain, with a <code>handleType</code> equal to any one of the
handle types specified in
<a href="#VkExternalMemoryImageCreateInfo">VkExternalMemoryImageCreateInfo</a>::<code>handleTypes</code></p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-pNext-00991" href="#VUID-VkImageCreateInfo-pNext-00991"></a> <span class="vuid">VUID-VkImageCreateInfo-pNext-00991</span><br>

If the <code>pNext</code> chain includes a
<a href="#VkExternalMemoryImageCreateInfoNV">VkExternalMemoryImageCreateInfoNV</a> structure, its <code>handleTypes</code>
member <strong>must</strong> only contain bits that are also in
<a href="capabilities.html#VkExternalImageFormatPropertiesNV" class="xref page">VkExternalImageFormatPropertiesNV</a>::<code>externalMemoryProperties.compatibleHandleTypes</code>,
as returned by <a href="capabilities.html#vkGetPhysicalDeviceExternalImageFormatPropertiesNV" class="xref page">vkGetPhysicalDeviceExternalImageFormatPropertiesNV</a>
with <code>format</code>, <code>imageType</code>, <code>tiling</code>, <code>usage</code>, and
<code>flags</code> equal to those in this structure, and with
<code>externalHandleType</code> equal to any one of the handle types specified
in <a href="#VkExternalMemoryImageCreateInfoNV">VkExternalMemoryImageCreateInfoNV</a>::<code>handleTypes</code></p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-physicalDeviceCount-01421" href="#VUID-VkImageCreateInfo-physicalDeviceCount-01421"></a> <span class="vuid">VUID-VkImageCreateInfo-physicalDeviceCount-01421</span><br>

If the logical device was created with
<a href="devsandqueues.html#VkDeviceGroupDeviceCreateInfo" class="xref page">VkDeviceGroupDeviceCreateInfo</a>::<code>physicalDeviceCount</code> equal to
1, <code>flags</code> <strong>must</strong> not contain
<code>VK_IMAGE_CREATE_SPLIT_INSTANCE_BIND_REGIONS_BIT</code></p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-flags-02259" href="#VUID-VkImageCreateInfo-flags-02259"></a> <span class="vuid">VUID-VkImageCreateInfo-flags-02259</span><br>

If <code>flags</code> contains
<code>VK_IMAGE_CREATE_SPLIT_INSTANCE_BIND_REGIONS_BIT</code>, then
<code>mipLevels</code> <strong>must</strong> be one, <code>arrayLayers</code> <strong>must</strong> be one,
<code>imageType</code> <strong>must</strong> be <code>VK_IMAGE_TYPE_2D</code>.
and <code>imageCreateMaybeLinear</code> (as defined in
<a href="#resources-image-creation-limits">Image Creation Limits</a>) <strong>must</strong> be
<code>VK_FALSE</code></p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-flags-01572" href="#VUID-VkImageCreateInfo-flags-01572"></a> <span class="vuid">VUID-VkImageCreateInfo-flags-01572</span><br>

If <code>flags</code> contains
<code>VK_IMAGE_CREATE_BLOCK_TEXEL_VIEW_COMPATIBLE_BIT</code>, then <code>format</code>
<strong>must</strong> be a <a href="../appendices/compressedtex.html#compressed_image_formats" class="xref page">compressed image format</a></p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-flags-01573" href="#VUID-VkImageCreateInfo-flags-01573"></a> <span class="vuid">VUID-VkImageCreateInfo-flags-01573</span><br>

If <code>flags</code> contains
<code>VK_IMAGE_CREATE_BLOCK_TEXEL_VIEW_COMPATIBLE_BIT</code>, then <code>flags</code>
<strong>must</strong> also contain <code>VK_IMAGE_CREATE_MUTABLE_FORMAT_BIT</code></p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-initialLayout-00993" href="#VUID-VkImageCreateInfo-initialLayout-00993"></a> <span class="vuid">VUID-VkImageCreateInfo-initialLayout-00993</span><br>

<code>initialLayout</code> <strong>must</strong> be <code>VK_IMAGE_LAYOUT_UNDEFINED</code> or
<code>VK_IMAGE_LAYOUT_PREINITIALIZED</code></p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-pNext-01443" href="#VUID-VkImageCreateInfo-pNext-01443"></a> <span class="vuid">VUID-VkImageCreateInfo-pNext-01443</span><br>

If the <code>pNext</code> chain includes a
<a href="#VkExternalMemoryImageCreateInfo">VkExternalMemoryImageCreateInfo</a> or
<code>VkExternalMemoryImageCreateInfoNV</code> structure whose
<code>handleTypes</code> member is not <code>0</code>, <code>initialLayout</code> <strong>must</strong> be
<code>VK_IMAGE_LAYOUT_UNDEFINED</code></p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-format-06410" href="#VUID-VkImageCreateInfo-format-06410"></a> <span class="vuid">VUID-VkImageCreateInfo-format-06410</span><br>

If the image <code>format</code> is one of the
<a href="formats.html#formats-requiring-sampler-ycbcr-conversion" class="xref page">formats that require a    sampler YC<sub>B</sub>C<sub>R</sub> conversion</a>, <code>mipLevels</code> <strong>must</strong> be 1</p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-format-06411" href="#VUID-VkImageCreateInfo-format-06411"></a> <span class="vuid">VUID-VkImageCreateInfo-format-06411</span><br>

If the image <code>format</code> is one of the
<a href="formats.html#formats-requiring-sampler-ycbcr-conversion" class="xref page">formats that require a    sampler YC<sub>B</sub>C<sub>R</sub> conversion</a>, <code>samples</code> <strong>must</strong> be
<code>VK_SAMPLE_COUNT_1_BIT</code></p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-format-06412" href="#VUID-VkImageCreateInfo-format-06412"></a> <span class="vuid">VUID-VkImageCreateInfo-format-06412</span><br>

If the image <code>format</code> is one of the
<a href="formats.html#formats-requiring-sampler-ycbcr-conversion" class="xref page">formats that require a    sampler YC<sub>B</sub>C<sub>R</sub> conversion</a>, <code>imageType</code> <strong>must</strong> be
<code>VK_IMAGE_TYPE_2D</code></p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-imageCreateFormatFeatures-02260" href="#VUID-VkImageCreateInfo-imageCreateFormatFeatures-02260"></a> <span class="vuid">VUID-VkImageCreateInfo-imageCreateFormatFeatures-02260</span><br>

If <code>format</code> is a <em>multi-planar</em> format, and if
<code>imageCreateFormatFeatures</code> (as defined in
<a href="#resources-image-creation-limits">Image Creation Limits</a>) does not
contain <code>VK_FORMAT_FEATURE_DISJOINT_BIT</code>, then <code>flags</code> <strong>must</strong> not
contain <code>VK_IMAGE_CREATE_DISJOINT_BIT</code></p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-format-01577" href="#VUID-VkImageCreateInfo-format-01577"></a> <span class="vuid">VUID-VkImageCreateInfo-format-01577</span><br>

If <code>format</code> is not a <em>multi-planar</em> format, and <code>flags</code> does not
include <code>VK_IMAGE_CREATE_ALIAS_BIT</code>, <code>flags</code> <strong>must</strong> not contain
<code>VK_IMAGE_CREATE_DISJOINT_BIT</code></p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-format-04712" href="#VUID-VkImageCreateInfo-format-04712"></a> <span class="vuid">VUID-VkImageCreateInfo-format-04712</span><br>

If <code>format</code> has a <code>_422</code> or <code>_420</code> suffix, <code>extent.width</code>
<strong>must</strong> be a multiple of 2</p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-format-04713" href="#VUID-VkImageCreateInfo-format-04713"></a> <span class="vuid">VUID-VkImageCreateInfo-format-04713</span><br>

If <code>format</code> has a <code>_420</code> suffix, <code>extent.height</code> <strong>must</strong> be a
multiple of 2</p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-format-09583" href="#VUID-VkImageCreateInfo-format-09583"></a> <span class="vuid">VUID-VkImageCreateInfo-format-09583</span><br>

If <code>format</code> is one of the <code>VK_FORMAT_PVTRC1_*_IMG</code> formats,
<code>extent.width</code> <strong>must</strong> be a power of 2</p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-format-09584" href="#VUID-VkImageCreateInfo-format-09584"></a> <span class="vuid">VUID-VkImageCreateInfo-format-09584</span><br>

If <code>format</code> is one of the <code>VK_FORMAT_PVTRC1_*_IMG</code> formats,
<code>extent.height</code> <strong>must</strong> be a power of 2</p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-tiling-02261" href="#VUID-VkImageCreateInfo-tiling-02261"></a> <span class="vuid">VUID-VkImageCreateInfo-tiling-02261</span><br>

If <code>tiling</code> is <code>VK_IMAGE_TILING_DRM_FORMAT_MODIFIER_EXT</code>, then
the <code>pNext</code> chain <strong>must</strong> include exactly one of
<a href="#VkImageDrmFormatModifierListCreateInfoEXT">VkImageDrmFormatModifierListCreateInfoEXT</a> or
<a href="#VkImageDrmFormatModifierExplicitCreateInfoEXT">VkImageDrmFormatModifierExplicitCreateInfoEXT</a> structures</p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-pNext-02262" href="#VUID-VkImageCreateInfo-pNext-02262"></a> <span class="vuid">VUID-VkImageCreateInfo-pNext-02262</span><br>

If the <code>pNext</code> chain includes a
<a href="#VkImageDrmFormatModifierListCreateInfoEXT">VkImageDrmFormatModifierListCreateInfoEXT</a> or
<a href="#VkImageDrmFormatModifierExplicitCreateInfoEXT">VkImageDrmFormatModifierExplicitCreateInfoEXT</a> structure, then
<code>tiling</code> <strong>must</strong> be <code>VK_IMAGE_TILING_DRM_FORMAT_MODIFIER_EXT</code></p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-tiling-02353" href="#VUID-VkImageCreateInfo-tiling-02353"></a> <span class="vuid">VUID-VkImageCreateInfo-tiling-02353</span><br>

If <code>tiling</code> is <code>VK_IMAGE_TILING_DRM_FORMAT_MODIFIER_EXT</code> and
<code>flags</code> contains <code>VK_IMAGE_CREATE_MUTABLE_FORMAT_BIT</code>, then the
<code>pNext</code> chain <strong>must</strong> include a <a href="#VkImageFormatListCreateInfo">VkImageFormatListCreateInfo</a>
structure with non-zero <code>viewFormatCount</code></p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-flags-01533" href="#VUID-VkImageCreateInfo-flags-01533"></a> <span class="vuid">VUID-VkImageCreateInfo-flags-01533</span><br>

If <code>flags</code> contains
<code>VK_IMAGE_CREATE_SAMPLE_LOCATIONS_COMPATIBLE_DEPTH_BIT_EXT</code>
<code>format</code> <strong>must</strong> be a depth or depth/stencil format</p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-pNext-02393" href="#VUID-VkImageCreateInfo-pNext-02393"></a> <span class="vuid">VUID-VkImageCreateInfo-pNext-02393</span><br>

If the <code>pNext</code> chain includes a
<a href="#VkExternalMemoryImageCreateInfo">VkExternalMemoryImageCreateInfo</a> structure whose <code>handleTypes</code>
member includes
<code>VK_EXTERNAL_MEMORY_HANDLE_TYPE_ANDROID_HARDWARE_BUFFER_BIT_ANDROID</code>,
<code>imageType</code> <strong>must</strong> be <code>VK_IMAGE_TYPE_2D</code></p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-pNext-02394" href="#VUID-VkImageCreateInfo-pNext-02394"></a> <span class="vuid">VUID-VkImageCreateInfo-pNext-02394</span><br>

If the <code>pNext</code> chain includes a
<a href="#VkExternalMemoryImageCreateInfo">VkExternalMemoryImageCreateInfo</a> structure whose <code>handleTypes</code>
member includes
<code>VK_EXTERNAL_MEMORY_HANDLE_TYPE_ANDROID_HARDWARE_BUFFER_BIT_ANDROID</code>,
<code>mipLevels</code> <strong>must</strong> either be <code>1</code> or equal to the number of levels in
the complete mipmap chain based on <span class="eq"><code>extent.width</code></span>,
<span class="eq"><code>extent.height</code></span>, and <span class="eq"><code>extent.depth</code></span></p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-pNext-02396" href="#VUID-VkImageCreateInfo-pNext-02396"></a> <span class="vuid">VUID-VkImageCreateInfo-pNext-02396</span><br>

If the <code>pNext</code> chain includes a <a href="#VkExternalFormatANDROID">VkExternalFormatANDROID</a>
structure whose <code>externalFormat</code> member is not <code>0</code>, <code>flags</code>
<strong>must</strong> not include <code>VK_IMAGE_CREATE_MUTABLE_FORMAT_BIT</code></p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-pNext-02397" href="#VUID-VkImageCreateInfo-pNext-02397"></a> <span class="vuid">VUID-VkImageCreateInfo-pNext-02397</span><br>

If the <code>pNext</code> chain includes a <a href="#VkExternalFormatANDROID">VkExternalFormatANDROID</a>
structure whose <code>externalFormat</code> member is not <code>0</code>, <code>usage</code>
<strong>must</strong> not include any usages except
<code>VK_IMAGE_USAGE_INPUT_ATTACHMENT_BIT</code>,
<code>VK_IMAGE_USAGE_COLOR_ATTACHMENT_BIT</code>, or
<code>VK_IMAGE_USAGE_SAMPLED_BIT</code></p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-pNext-09457" href="#VUID-VkImageCreateInfo-pNext-09457"></a> <span class="vuid">VUID-VkImageCreateInfo-pNext-09457</span><br>

If the <code>pNext</code> chain includes a <a href="#VkExternalFormatANDROID">VkExternalFormatANDROID</a>
structure whose <code>externalFormat</code> member is not <code>0</code>, and
<a href="features.html#features-externalFormatResolve" class="xref page"><code>externalFormatResolve</code></a> feature
is not enabled, <code>usage</code> <strong>must</strong> not include
<code>VK_IMAGE_USAGE_INPUT_ATTACHMENT_BIT</code> or
<code>VK_IMAGE_USAGE_COLOR_ATTACHMENT_BIT</code></p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-pNext-02398" href="#VUID-VkImageCreateInfo-pNext-02398"></a> <span class="vuid">VUID-VkImageCreateInfo-pNext-02398</span><br>

If the <code>pNext</code> chain includes a <a href="#VkExternalFormatANDROID">VkExternalFormatANDROID</a>
structure whose <code>externalFormat</code> member is not <code>0</code>, <code>tiling</code>
<strong>must</strong> be <code>VK_IMAGE_TILING_OPTIMAL</code></p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-pNext-08951" href="#VUID-VkImageCreateInfo-pNext-08951"></a> <span class="vuid">VUID-VkImageCreateInfo-pNext-08951</span><br>

If the <code>pNext</code> chain includes a
<a href="#VkExternalMemoryImageCreateInfo">VkExternalMemoryImageCreateInfo</a> structure whose <code>handleTypes</code>
member includes
<code>VK_EXTERNAL_MEMORY_HANDLE_TYPE_SCREEN_BUFFER_BIT_QNX</code>,
<code>imageType</code> <strong>must</strong> be <code>VK_IMAGE_TYPE_2D</code></p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-pNext-08952" href="#VUID-VkImageCreateInfo-pNext-08952"></a> <span class="vuid">VUID-VkImageCreateInfo-pNext-08952</span><br>

If the <code>pNext</code> chain includes a
<a href="#VkExternalMemoryImageCreateInfo">VkExternalMemoryImageCreateInfo</a> structure whose <code>handleTypes</code>
member includes
<code>VK_EXTERNAL_MEMORY_HANDLE_TYPE_SCREEN_BUFFER_BIT_QNX</code>,
<code>mipLevels</code> <strong>must</strong> either be <code>1</code> or equal to the number of levels in
the complete mipmap chain based on <span class="eq"><code>extent.width</code></span>,
<span class="eq"><code>extent.height</code></span>, and <span class="eq"><code>extent.depth</code></span></p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-pNext-08953" href="#VUID-VkImageCreateInfo-pNext-08953"></a> <span class="vuid">VUID-VkImageCreateInfo-pNext-08953</span><br>

If the <code>pNext</code> chain includes a <a href="#VkExternalFormatQNX">VkExternalFormatQNX</a> structure
whose <code>externalFormat</code> member is not <code>0</code>, <code>flags</code> <strong>must</strong> not
include <code>VK_IMAGE_CREATE_MUTABLE_FORMAT_BIT</code></p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-pNext-08954" href="#VUID-VkImageCreateInfo-pNext-08954"></a> <span class="vuid">VUID-VkImageCreateInfo-pNext-08954</span><br>

If the <code>pNext</code> chain includes a <a href="#VkExternalFormatQNX">VkExternalFormatQNX</a> structure
whose <code>externalFormat</code> member is not <code>0</code>, <code>usage</code> <strong>must</strong> not
include any usages except <code>VK_IMAGE_USAGE_SAMPLED_BIT</code></p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-pNext-08955" href="#VUID-VkImageCreateInfo-pNext-08955"></a> <span class="vuid">VUID-VkImageCreateInfo-pNext-08955</span><br>

If the <code>pNext</code> chain includes a <a href="#VkExternalFormatQNX">VkExternalFormatQNX</a> structure
whose <code>externalFormat</code> member is not <code>0</code>, <code>tiling</code> <strong>must</strong> be
<code>VK_IMAGE_TILING_OPTIMAL</code></p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-format-02795" href="#VUID-VkImageCreateInfo-format-02795"></a> <span class="vuid">VUID-VkImageCreateInfo-format-02795</span><br>

If <code>format</code> is a depth-stencil format, <code>usage</code> includes
<code>VK_IMAGE_USAGE_DEPTH_STENCIL_ATTACHMENT_BIT</code>, and the <code>pNext</code>
chain includes a <a href="#VkImageStencilUsageCreateInfo">VkImageStencilUsageCreateInfo</a> structure, then its
<a href="#VkImageStencilUsageCreateInfo">VkImageStencilUsageCreateInfo</a>::<code>stencilUsage</code> member <strong>must</strong>
also include <code>VK_IMAGE_USAGE_DEPTH_STENCIL_ATTACHMENT_BIT</code></p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-format-02796" href="#VUID-VkImageCreateInfo-format-02796"></a> <span class="vuid">VUID-VkImageCreateInfo-format-02796</span><br>

If <code>format</code> is a depth-stencil format, <code>usage</code> does not include
<code>VK_IMAGE_USAGE_DEPTH_STENCIL_ATTACHMENT_BIT</code>, and the <code>pNext</code>
chain includes a <a href="#VkImageStencilUsageCreateInfo">VkImageStencilUsageCreateInfo</a> structure, then its
<a href="#VkImageStencilUsageCreateInfo">VkImageStencilUsageCreateInfo</a>::<code>stencilUsage</code> member <strong>must</strong>
also not include <code>VK_IMAGE_USAGE_DEPTH_STENCIL_ATTACHMENT_BIT</code></p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-format-02797" href="#VUID-VkImageCreateInfo-format-02797"></a> <span class="vuid">VUID-VkImageCreateInfo-format-02797</span><br>

If <code>format</code> is a depth-stencil format, <code>usage</code> includes
<code>VK_IMAGE_USAGE_TRANSIENT_ATTACHMENT_BIT</code>, and the <code>pNext</code> chain
includes a <a href="#VkImageStencilUsageCreateInfo">VkImageStencilUsageCreateInfo</a> structure, then its
<a href="#VkImageStencilUsageCreateInfo">VkImageStencilUsageCreateInfo</a>::<code>stencilUsage</code> member <strong>must</strong>
also include <code>VK_IMAGE_USAGE_TRANSIENT_ATTACHMENT_BIT</code></p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-format-02798" href="#VUID-VkImageCreateInfo-format-02798"></a> <span class="vuid">VUID-VkImageCreateInfo-format-02798</span><br>

If <code>format</code> is a depth-stencil format, <code>usage</code> does not include
<code>VK_IMAGE_USAGE_TRANSIENT_ATTACHMENT_BIT</code>, and the <code>pNext</code> chain
includes a <a href="#VkImageStencilUsageCreateInfo">VkImageStencilUsageCreateInfo</a> structure, then its
<a href="#VkImageStencilUsageCreateInfo">VkImageStencilUsageCreateInfo</a>::<code>stencilUsage</code> member <strong>must</strong>
also not include <code>VK_IMAGE_USAGE_TRANSIENT_ATTACHMENT_BIT</code></p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-Format-02536" href="#VUID-VkImageCreateInfo-Format-02536"></a> <span class="vuid">VUID-VkImageCreateInfo-Format-02536</span><br>

If <code>Format</code> is a depth-stencil format and the <code>pNext</code> chain
includes a <a href="#VkImageStencilUsageCreateInfo">VkImageStencilUsageCreateInfo</a> structure with its
<code>stencilUsage</code> member including
<code>VK_IMAGE_USAGE_INPUT_ATTACHMENT_BIT</code>, <code>extent.width</code> <strong>must</strong> be
less than or equal to
<code>VkPhysicalDeviceLimits</code>::<code>maxFramebufferWidth</code></p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-format-02537" href="#VUID-VkImageCreateInfo-format-02537"></a> <span class="vuid">VUID-VkImageCreateInfo-format-02537</span><br>

If <code>format</code> is a depth-stencil format and the <code>pNext</code> chain
includes a <a href="#VkImageStencilUsageCreateInfo">VkImageStencilUsageCreateInfo</a> structure with its
<code>stencilUsage</code> member including
<code>VK_IMAGE_USAGE_INPUT_ATTACHMENT_BIT</code>, <code>extent.height</code> <strong>must</strong> be
less than or equal to
<code>VkPhysicalDeviceLimits</code>::<code>maxFramebufferHeight</code></p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-format-02538" href="#VUID-VkImageCreateInfo-format-02538"></a> <span class="vuid">VUID-VkImageCreateInfo-format-02538</span><br>

If the <a href="features.html#features-shaderStorageImageMultisample" class="xref page">    <code>shaderStorageImageMultisample</code></a> feature is not enabled,
<code>format</code> is a depth-stencil format and the <code>pNext</code> chain
includes a <a href="#VkImageStencilUsageCreateInfo">VkImageStencilUsageCreateInfo</a> structure with its
<code>stencilUsage</code> including <code>VK_IMAGE_USAGE_STORAGE_BIT</code>,
<code>samples</code> <strong>must</strong> be <code>VK_SAMPLE_COUNT_1_BIT</code></p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-flags-02050" href="#VUID-VkImageCreateInfo-flags-02050"></a> <span class="vuid">VUID-VkImageCreateInfo-flags-02050</span><br>

If <code>flags</code> contains <code>VK_IMAGE_CREATE_CORNER_SAMPLED_BIT_NV</code>,
<code>imageType</code> <strong>must</strong> be <code>VK_IMAGE_TYPE_2D</code> or
<code>VK_IMAGE_TYPE_3D</code></p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-flags-02051" href="#VUID-VkImageCreateInfo-flags-02051"></a> <span class="vuid">VUID-VkImageCreateInfo-flags-02051</span><br>

If <code>flags</code> contains <code>VK_IMAGE_CREATE_CORNER_SAMPLED_BIT_NV</code>, it
<strong>must</strong> not contain <code>VK_IMAGE_CREATE_CUBE_COMPATIBLE_BIT</code> and the
<code>format</code> <strong>must</strong> not be a depth/stencil format</p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-flags-02052" href="#VUID-VkImageCreateInfo-flags-02052"></a> <span class="vuid">VUID-VkImageCreateInfo-flags-02052</span><br>

If <code>flags</code> contains <code>VK_IMAGE_CREATE_CORNER_SAMPLED_BIT_NV</code> and
<code>imageType</code> is <code>VK_IMAGE_TYPE_2D</code>, <code>extent.width</code> and
<code>extent.height</code> <strong>must</strong> be greater than <code>1</code></p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-flags-02053" href="#VUID-VkImageCreateInfo-flags-02053"></a> <span class="vuid">VUID-VkImageCreateInfo-flags-02053</span><br>

If <code>flags</code> contains <code>VK_IMAGE_CREATE_CORNER_SAMPLED_BIT_NV</code> and
<code>imageType</code> is <code>VK_IMAGE_TYPE_3D</code>, <code>extent.width</code>,
<code>extent.height</code>, and <code>extent.depth</code> <strong>must</strong> be greater than <code>1</code></p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-imageType-02082" href="#VUID-VkImageCreateInfo-imageType-02082"></a> <span class="vuid">VUID-VkImageCreateInfo-imageType-02082</span><br>

If <code>usage</code> includes
<code>VK_IMAGE_USAGE_FRAGMENT_SHADING_RATE_ATTACHMENT_BIT_KHR</code>,
<code>imageType</code> <strong>must</strong> be <code>VK_IMAGE_TYPE_2D</code></p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-samples-02083" href="#VUID-VkImageCreateInfo-samples-02083"></a> <span class="vuid">VUID-VkImageCreateInfo-samples-02083</span><br>

If <code>usage</code> includes
<code>VK_IMAGE_USAGE_FRAGMENT_SHADING_RATE_ATTACHMENT_BIT_KHR</code>,
<code>samples</code> <strong>must</strong> be <code>VK_SAMPLE_COUNT_1_BIT</code></p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-shadingRateImage-07727" href="#VUID-VkImageCreateInfo-shadingRateImage-07727"></a> <span class="vuid">VUID-VkImageCreateInfo-shadingRateImage-07727</span><br>

If the <a href="features.html#features-shadingRateImage" class="xref page"><code>shadingRateImage</code></a> feature is
enabled and <code>usage</code> includes
<code>VK_IMAGE_USAGE_SHADING_RATE_IMAGE_BIT_NV</code>, <code>tiling</code> <strong>must</strong> be
<code>VK_IMAGE_TILING_OPTIMAL</code></p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-flags-02565" href="#VUID-VkImageCreateInfo-flags-02565"></a> <span class="vuid">VUID-VkImageCreateInfo-flags-02565</span><br>

If <code>flags</code> contains <code>VK_IMAGE_CREATE_SUBSAMPLED_BIT_EXT</code>,
<code>tiling</code> <strong>must</strong> be <code>VK_IMAGE_TILING_OPTIMAL</code></p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-flags-02566" href="#VUID-VkImageCreateInfo-flags-02566"></a> <span class="vuid">VUID-VkImageCreateInfo-flags-02566</span><br>

If <code>flags</code> contains <code>VK_IMAGE_CREATE_SUBSAMPLED_BIT_EXT</code>,
<code>imageType</code> <strong>must</strong> be <code>VK_IMAGE_TYPE_2D</code></p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-flags-02567" href="#VUID-VkImageCreateInfo-flags-02567"></a> <span class="vuid">VUID-VkImageCreateInfo-flags-02567</span><br>

If <code>flags</code> contains <code>VK_IMAGE_CREATE_SUBSAMPLED_BIT_EXT</code>,
<code>flags</code> <strong>must</strong> not contain <code>VK_IMAGE_CREATE_CUBE_COMPATIBLE_BIT</code></p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-flags-02568" href="#VUID-VkImageCreateInfo-flags-02568"></a> <span class="vuid">VUID-VkImageCreateInfo-flags-02568</span><br>

If <code>flags</code> contains <code>VK_IMAGE_CREATE_SUBSAMPLED_BIT_EXT</code>,
<code>mipLevels</code> <strong>must</strong> be <code>1</code></p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-usage-04992" href="#VUID-VkImageCreateInfo-usage-04992"></a> <span class="vuid">VUID-VkImageCreateInfo-usage-04992</span><br>

If <code>usage</code> includes <code>VK_IMAGE_USAGE_INVOCATION_MASK_BIT_HUAWEI</code>,
<code>tiling</code> <strong>must</strong> be <code>VK_IMAGE_TILING_LINEAR</code></p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-imageView2DOn3DImage-04459" href="#VUID-VkImageCreateInfo-imageView2DOn3DImage-04459"></a> <span class="vuid">VUID-VkImageCreateInfo-imageView2DOn3DImage-04459</span><br>

If the <code><a href="../appendices/extensions.html#VK_KHR_portability_subset" class="xref page">VK_KHR_portability_subset</a></code> extension is enabled, and
<a href="features.html#VkPhysicalDevicePortabilitySubsetFeaturesKHR" class="xref page">VkPhysicalDevicePortabilitySubsetFeaturesKHR</a>::<code>imageView2DOn3DImage</code>
is <code>VK_FALSE</code>, <code>flags</code> <strong>must</strong> not contain
<code>VK_IMAGE_CREATE_2D_ARRAY_COMPATIBLE_BIT</code></p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-multisampleArrayImage-04460" href="#VUID-VkImageCreateInfo-multisampleArrayImage-04460"></a> <span class="vuid">VUID-VkImageCreateInfo-multisampleArrayImage-04460</span><br>

If the <code><a href="../appendices/extensions.html#VK_KHR_portability_subset" class="xref page">VK_KHR_portability_subset</a></code> extension is enabled, and
<a href="features.html#VkPhysicalDevicePortabilitySubsetFeaturesKHR" class="xref page">VkPhysicalDevicePortabilitySubsetFeaturesKHR</a>::<code>multisampleArrayImage</code>
is <code>VK_FALSE</code>, and <code>samples</code> is not <code>VK_SAMPLE_COUNT_1_BIT</code>,
then <code>arrayLayers</code> <strong>must</strong> be <code>1</code></p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-pNext-06722" href="#VUID-VkImageCreateInfo-pNext-06722"></a> <span class="vuid">VUID-VkImageCreateInfo-pNext-06722</span><br>

If a <a href="#VkImageFormatListCreateInfo">VkImageFormatListCreateInfo</a> structure was included in the
<code>pNext</code> chain and
<a href="#VkImageFormatListCreateInfo">VkImageFormatListCreateInfo</a>::<code>viewFormatCount</code> is not zero,
then each format in
<a href="#VkImageFormatListCreateInfo">VkImageFormatListCreateInfo</a>::<code>pViewFormats</code> <strong>must</strong> either be
compatible with the <code>format</code> as described in the
<a href="formats.html#formats-compatibility" class="xref page">compatibility table</a> or, if <code>flags</code>
contains <code>VK_IMAGE_CREATE_BLOCK_TEXEL_VIEW_COMPATIBLE_BIT</code>, be an
uncompressed format that is size-compatible with <code>format</code></p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-flags-04738" href="#VUID-VkImageCreateInfo-flags-04738"></a> <span class="vuid">VUID-VkImageCreateInfo-flags-04738</span><br>

If <code>flags</code> does not contain <code>VK_IMAGE_CREATE_MUTABLE_FORMAT_BIT</code>
and the <code>pNext</code> chain includes a <a href="#VkImageFormatListCreateInfo">VkImageFormatListCreateInfo</a>
structure, then <a href="#VkImageFormatListCreateInfo">VkImageFormatListCreateInfo</a>::<code>viewFormatCount</code>
<strong>must</strong> be <code>0</code> or <code>1</code></p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-usage-04815" href="#VUID-VkImageCreateInfo-usage-04815"></a> <span class="vuid">VUID-VkImageCreateInfo-usage-04815</span><br>

If <code>usage</code> includes <code>VK_IMAGE_USAGE_VIDEO_DECODE_SRC_BIT_KHR</code>,
<code>VK_IMAGE_USAGE_VIDEO_DECODE_DST_BIT_KHR</code>, or
<code>VK_IMAGE_USAGE_VIDEO_DECODE_DPB_BIT_KHR</code>,
and <code>flags</code> does not include
<code>VK_IMAGE_CREATE_VIDEO_PROFILE_INDEPENDENT_BIT_KHR</code>,
then the <code>pNext</code> chain <strong>must</strong> include a
<a href="videocoding.html#VkVideoProfileListInfoKHR" class="xref page">VkVideoProfileListInfoKHR</a> structure with <code>profileCount</code>
greater than <code>0</code> and <code>pProfiles</code> including at least one
<a href="videocoding.html#VkVideoProfileInfoKHR" class="xref page">VkVideoProfileInfoKHR</a> structure with a <code>videoCodecOperation</code>
member specifying a decode operation</p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-usage-04816" href="#VUID-VkImageCreateInfo-usage-04816"></a> <span class="vuid">VUID-VkImageCreateInfo-usage-04816</span><br>

If <code>usage</code> includes <code>VK_IMAGE_USAGE_VIDEO_ENCODE_SRC_BIT_KHR</code>,
<code>VK_IMAGE_USAGE_VIDEO_ENCODE_DST_BIT_KHR</code>, or
<code>VK_IMAGE_USAGE_VIDEO_ENCODE_DPB_BIT_KHR</code>,
and <code>flags</code> does not include
<code>VK_IMAGE_CREATE_VIDEO_PROFILE_INDEPENDENT_BIT_KHR</code>,
then the <code>pNext</code> chain <strong>must</strong> include a
<a href="videocoding.html#VkVideoProfileListInfoKHR" class="xref page">VkVideoProfileListInfoKHR</a> structure with <code>profileCount</code>
greater than <code>0</code> and <code>pProfiles</code> including at least one
<a href="videocoding.html#VkVideoProfileInfoKHR" class="xref page">VkVideoProfileInfoKHR</a> structure with a <code>videoCodecOperation</code>
member specifying an encode operation</p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-flags-08328" href="#VUID-VkImageCreateInfo-flags-08328"></a> <span class="vuid">VUID-VkImageCreateInfo-flags-08328</span><br>

If <code>flags</code> includes
<code>VK_IMAGE_CREATE_VIDEO_PROFILE_INDEPENDENT_BIT_KHR</code>, then
<a href="features.html#features-videoMaintenance1" class="xref page"><code>videoMaintenance1</code></a> <strong>must</strong> be enabled</p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-flags-08329" href="#VUID-VkImageCreateInfo-flags-08329"></a> <span class="vuid">VUID-VkImageCreateInfo-flags-08329</span><br>

If <code>flags</code> includes
<code>VK_IMAGE_CREATE_VIDEO_PROFILE_INDEPENDENT_BIT_KHR</code> and <code>usage</code>
does not include <code>VK_IMAGE_USAGE_VIDEO_DECODE_DST_BIT_KHR</code>, then
<code>usage</code> <strong>must</strong> not include
<code>VK_IMAGE_USAGE_VIDEO_DECODE_DPB_BIT_KHR</code></p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-flags-08331" href="#VUID-VkImageCreateInfo-flags-08331"></a> <span class="vuid">VUID-VkImageCreateInfo-flags-08331</span><br>

If <code>flags</code> includes
<code>VK_IMAGE_CREATE_VIDEO_PROFILE_INDEPENDENT_BIT_KHR</code>, then
<code>usage</code> <strong>must</strong> not include
<code>VK_IMAGE_USAGE_VIDEO_ENCODE_DPB_BIT_KHR</code></p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-pNext-06811" href="#VUID-VkImageCreateInfo-pNext-06811"></a> <span class="vuid">VUID-VkImageCreateInfo-pNext-06811</span><br>

If the <code>pNext</code> chain includes a <a href="videocoding.html#VkVideoProfileListInfoKHR" class="xref page">VkVideoProfileListInfoKHR</a>
structure with <code>profileCount</code> greater than <code>0</code>, then
<code>supportedVideoFormat</code> <strong>must</strong> be <code>VK_TRUE</code></p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-pNext-06390" href="#VUID-VkImageCreateInfo-pNext-06390"></a> <span class="vuid">VUID-VkImageCreateInfo-pNext-06390</span><br>

If the <a href="#VkImage">VkImage</a> is to be used to import memory from a
<a href="#VkBufferCollectionFUCHSIA">VkBufferCollectionFUCHSIA</a>, a
<a href="#VkBufferCollectionImageCreateInfoFUCHSIA">VkBufferCollectionImageCreateInfoFUCHSIA</a> structure <strong>must</strong> be
chained to <code>pNext</code></p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-multisampledRenderToSingleSampled-06882" href="#VUID-VkImageCreateInfo-multisampledRenderToSingleSampled-06882"></a> <span class="vuid">VUID-VkImageCreateInfo-multisampledRenderToSingleSampled-06882</span><br>

If the <a href="features.html#features-multisampledRenderToSingleSampled" class="xref page">    <code>multisampledRenderToSingleSampled</code></a> feature is not enabled,
<code>flags</code> <strong>must</strong> not contain
<code>VK_IMAGE_CREATE_MULTISAMPLED_RENDER_TO_SINGLE_SAMPLED_BIT_EXT</code></p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-flags-06883" href="#VUID-VkImageCreateInfo-flags-06883"></a> <span class="vuid">VUID-VkImageCreateInfo-flags-06883</span><br>

If <code>flags</code> contains
<code>VK_IMAGE_CREATE_MULTISAMPLED_RENDER_TO_SINGLE_SAMPLED_BIT_EXT</code>,
<code>samples</code> <strong>must</strong> be <code>VK_SAMPLE_COUNT_1_BIT</code></p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-pNext-06743" href="#VUID-VkImageCreateInfo-pNext-06743"></a> <span class="vuid">VUID-VkImageCreateInfo-pNext-06743</span><br>

If the <code>pNext</code> chain includes a <a href="#VkImageCompressionControlEXT">VkImageCompressionControlEXT</a>
structure, <code>format</code> is a
<a href="formats.html#formats-requiring-sampler-ycbcr-conversion" class="xref page">multi-planar</a> format, and
<a href="#VkImageCompressionControlEXT">VkImageCompressionControlEXT</a>::<code>flags</code> includes
<code>VK_IMAGE_COMPRESSION_FIXED_RATE_EXPLICIT_EXT</code>, then
<a href="#VkImageCompressionControlEXT">VkImageCompressionControlEXT</a>::<code>compressionControlPlaneCount</code>
<strong>must</strong> be equal to the number of planes in <code>format</code></p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-pNext-06744" href="#VUID-VkImageCreateInfo-pNext-06744"></a> <span class="vuid">VUID-VkImageCreateInfo-pNext-06744</span><br>

If the <code>pNext</code> chain includes a <a href="#VkImageCompressionControlEXT">VkImageCompressionControlEXT</a>
structure, <code>format</code> is not a
<a href="formats.html#formats-requiring-sampler-ycbcr-conversion" class="xref page">multi-planar</a> format, and
<a href="#VkImageCompressionControlEXT">VkImageCompressionControlEXT</a>::<code>flags</code> includes
<code>VK_IMAGE_COMPRESSION_FIXED_RATE_EXPLICIT_EXT</code>, then
<a href="#VkImageCompressionControlEXT">VkImageCompressionControlEXT</a>::<code>compressionControlPlaneCount</code>
<strong>must</strong> be 1</p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-pNext-06746" href="#VUID-VkImageCreateInfo-pNext-06746"></a> <span class="vuid">VUID-VkImageCreateInfo-pNext-06746</span><br>

If the <code>pNext</code> chain includes a <a href="#VkImageCompressionControlEXT">VkImageCompressionControlEXT</a>
structure, it <strong>must</strong> not contain a
<a href="#VkImageDrmFormatModifierExplicitCreateInfoEXT">VkImageDrmFormatModifierExplicitCreateInfoEXT</a> structure</p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-flags-08104" href="#VUID-VkImageCreateInfo-flags-08104"></a> <span class="vuid">VUID-VkImageCreateInfo-flags-08104</span><br>

If <code>flags</code> includes
<code>VK_IMAGE_CREATE_DESCRIPTOR_BUFFER_CAPTURE_REPLAY_BIT_EXT</code>, the
<a href="features.html#features-descriptorBufferCaptureReplay" class="xref page">    <code>descriptorBufferCaptureReplay</code></a> feature <strong>must</strong> be enabled</p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-pNext-08105" href="#VUID-VkImageCreateInfo-pNext-08105"></a> <span class="vuid">VUID-VkImageCreateInfo-pNext-08105</span><br>

If the <code>pNext</code> chain includes a
<a href="descriptorsets.html#VkOpaqueCaptureDescriptorDataCreateInfoEXT" class="xref page">VkOpaqueCaptureDescriptorDataCreateInfoEXT</a> structure, <code>flags</code>
<strong>must</strong> contain
<code>VK_IMAGE_CREATE_DESCRIPTOR_BUFFER_CAPTURE_REPLAY_BIT_EXT</code></p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-pNext-06783" href="#VUID-VkImageCreateInfo-pNext-06783"></a> <span class="vuid">VUID-VkImageCreateInfo-pNext-06783</span><br>

If the <code>pNext</code> chain includes a
<a href="memory.html#VkExportMetalObjectCreateInfoEXT" class="xref page">VkExportMetalObjectCreateInfoEXT</a> structure, its
<code>exportObjectType</code> member <strong>must</strong> be either
<code>VK_EXPORT_METAL_OBJECT_TYPE_METAL_TEXTURE_BIT_EXT</code> or
<code>VK_EXPORT_METAL_OBJECT_TYPE_METAL_IOSURFACE_BIT_EXT</code></p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-pNext-06784" href="#VUID-VkImageCreateInfo-pNext-06784"></a> <span class="vuid">VUID-VkImageCreateInfo-pNext-06784</span><br>

If the <code>pNext</code> chain includes a <a href="memory.html#VkImportMetalTextureInfoEXT" class="xref page">VkImportMetalTextureInfoEXT</a>
structure its <code>plane</code> member <strong>must</strong> be
<code>VK_IMAGE_ASPECT_PLANE_0_BIT</code>, <code>VK_IMAGE_ASPECT_PLANE_1_BIT</code>, or
<code>VK_IMAGE_ASPECT_PLANE_2_BIT</code></p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-pNext-06785" href="#VUID-VkImageCreateInfo-pNext-06785"></a> <span class="vuid">VUID-VkImageCreateInfo-pNext-06785</span><br>

If the <code>pNext</code> chain includes a <a href="memory.html#VkImportMetalTextureInfoEXT" class="xref page">VkImportMetalTextureInfoEXT</a>
structure and the image does not have a multi-planar format, then
<a href="memory.html#VkImportMetalTextureInfoEXT" class="xref page">VkImportMetalTextureInfoEXT</a>::<code>plane</code> <strong>must</strong> be
<code>VK_IMAGE_ASPECT_PLANE_0_BIT</code></p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-pNext-06786" href="#VUID-VkImageCreateInfo-pNext-06786"></a> <span class="vuid">VUID-VkImageCreateInfo-pNext-06786</span><br>

If the <code>pNext</code> chain includes a <a href="memory.html#VkImportMetalTextureInfoEXT" class="xref page">VkImportMetalTextureInfoEXT</a>
structure and the image has a multi-planar format with only two planes,
then <a href="memory.html#VkImportMetalTextureInfoEXT" class="xref page">VkImportMetalTextureInfoEXT</a>::<code>plane</code> <strong>must</strong> not be
<code>VK_IMAGE_ASPECT_PLANE_2_BIT</code></p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-imageCreateFormatFeatures-09048" href="#VUID-VkImageCreateInfo-imageCreateFormatFeatures-09048"></a> <span class="vuid">VUID-VkImageCreateInfo-imageCreateFormatFeatures-09048</span><br>

If <code>imageCreateFormatFeatures</code> (as defined in
<a href="#resources-image-creation-limits">Image Creation Limits</a>) does not
contain <code>VK_FORMAT_FEATURE_2_HOST_IMAGE_TRANSFER_BIT_EXT</code>, then
<code>usage</code> <strong>must</strong> not contain <code>VK_IMAGE_USAGE_HOST_TRANSFER_BIT_EXT</code></p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-pNext-09653" href="#VUID-VkImageCreateInfo-pNext-09653"></a> <span class="vuid">VUID-VkImageCreateInfo-pNext-09653</span><br>

If the <code>pNext</code> chain contains a
<a href="#VkImageAlignmentControlCreateInfoMESA">VkImageAlignmentControlCreateInfoMESA</a> structure, <code>tiling</code>
<strong>must</strong> be <code>VK_IMAGE_TILING_OPTIMAL</code></p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-pNext-09654" href="#VUID-VkImageCreateInfo-pNext-09654"></a> <span class="vuid">VUID-VkImageCreateInfo-pNext-09654</span><br>

If the <code>pNext</code> chain contains a
<a href="#VkImageAlignmentControlCreateInfoMESA">VkImageAlignmentControlCreateInfoMESA</a> structure, it <strong>must</strong> not
contain a <a href="#VkExternalMemoryImageCreateInfo">VkExternalMemoryImageCreateInfo</a> structure</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkImageCreateInfo-sType-sType" href="#VUID-VkImageCreateInfo-sType-sType"></a> <span class="vuid">VUID-VkImageCreateInfo-sType-sType</span><br>
 <code>sType</code> <strong>must</strong> be <code>VK_STRUCTURE_TYPE_IMAGE_CREATE_INFO</code></p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-pNext-pNext" href="#VUID-VkImageCreateInfo-pNext-pNext"></a> <span class="vuid">VUID-VkImageCreateInfo-pNext-pNext</span><br>
 Each <code>pNext</code> member of any structure (including this one) in the <code>pNext</code> chain <strong>must</strong> be either <code>NULL</code> or a pointer to a valid instance of <a href="#VkBufferCollectionImageCreateInfoFUCHSIA">VkBufferCollectionImageCreateInfoFUCHSIA</a>, <a href="#VkDedicatedAllocationImageCreateInfoNV">VkDedicatedAllocationImageCreateInfoNV</a>, <a href="memory.html#VkExportMetalObjectCreateInfoEXT" class="xref page">VkExportMetalObjectCreateInfoEXT</a>, <a href="#VkExternalFormatANDROID">VkExternalFormatANDROID</a>, <a href="#VkExternalFormatQNX">VkExternalFormatQNX</a>, <a href="#VkExternalMemoryImageCreateInfo">VkExternalMemoryImageCreateInfo</a>, <a href="#VkExternalMemoryImageCreateInfoNV">VkExternalMemoryImageCreateInfoNV</a>, <a href="#VkImageAlignmentControlCreateInfoMESA">VkImageAlignmentControlCreateInfoMESA</a>, <a href="#VkImageCompressionControlEXT">VkImageCompressionControlEXT</a>, <a href="#VkImageDrmFormatModifierExplicitCreateInfoEXT">VkImageDrmFormatModifierExplicitCreateInfoEXT</a>, <a href="#VkImageDrmFormatModifierListCreateInfoEXT">VkImageDrmFormatModifierListCreateInfoEXT</a>, <a href="#VkImageFormatListCreateInfo">VkImageFormatListCreateInfo</a>, <a href="#VkImageStencilUsageCreateInfo">VkImageStencilUsageCreateInfo</a>, <a href="#VkImageSwapchainCreateInfoKHR">VkImageSwapchainCreateInfoKHR</a>, <a href="memory.html#VkImportMetalIOSurfaceInfoEXT" class="xref page">VkImportMetalIOSurfaceInfoEXT</a>, <a href="memory.html#VkImportMetalTextureInfoEXT" class="xref page">VkImportMetalTextureInfoEXT</a>, <a href="descriptorsets.html#VkOpaqueCaptureDescriptorDataCreateInfoEXT" class="xref page">VkOpaqueCaptureDescriptorDataCreateInfoEXT</a>, <a href="VK_NV_optical_flow/optical_flow.html#VkOpticalFlowImageFormatInfoNV" class="xref page">VkOpticalFlowImageFormatInfoNV</a>, or <a href="videocoding.html#VkVideoProfileListInfoKHR" class="xref page">VkVideoProfileListInfoKHR</a></p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-sType-unique" href="#VUID-VkImageCreateInfo-sType-unique"></a> <span class="vuid">VUID-VkImageCreateInfo-sType-unique</span><br>
 The <code>sType</code> value of each struct in the <code>pNext</code> chain <strong>must</strong> be unique, with the exception of structures of type <a href="memory.html#VkExportMetalObjectCreateInfoEXT" class="xref page">VkExportMetalObjectCreateInfoEXT</a> or <a href="memory.html#VkImportMetalTextureInfoEXT" class="xref page">VkImportMetalTextureInfoEXT</a></p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-flags-parameter" href="#VUID-VkImageCreateInfo-flags-parameter"></a> <span class="vuid">VUID-VkImageCreateInfo-flags-parameter</span><br>
 <code>flags</code> <strong>must</strong> be a valid combination of <a href="#VkImageCreateFlagBits">VkImageCreateFlagBits</a> values</p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-imageType-parameter" href="#VUID-VkImageCreateInfo-imageType-parameter"></a> <span class="vuid">VUID-VkImageCreateInfo-imageType-parameter</span><br>
 <code>imageType</code> <strong>must</strong> be a valid <a href="#VkImageType">VkImageType</a> value</p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-format-parameter" href="#VUID-VkImageCreateInfo-format-parameter"></a> <span class="vuid">VUID-VkImageCreateInfo-format-parameter</span><br>
 <code>format</code> <strong>must</strong> be a valid <a href="formats.html#VkFormat" class="xref page">VkFormat</a> value</p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-samples-parameter" href="#VUID-VkImageCreateInfo-samples-parameter"></a> <span class="vuid">VUID-VkImageCreateInfo-samples-parameter</span><br>
 <code>samples</code> <strong>must</strong> be a valid <a href="limits.html#VkSampleCountFlagBits" class="xref page">VkSampleCountFlagBits</a> value</p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-tiling-parameter" href="#VUID-VkImageCreateInfo-tiling-parameter"></a> <span class="vuid">VUID-VkImageCreateInfo-tiling-parameter</span><br>
 <code>tiling</code> <strong>must</strong> be a valid <a href="#VkImageTiling">VkImageTiling</a> value</p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-usage-parameter" href="#VUID-VkImageCreateInfo-usage-parameter"></a> <span class="vuid">VUID-VkImageCreateInfo-usage-parameter</span><br>
 <code>usage</code> <strong>must</strong> be a valid combination of <a href="#VkImageUsageFlagBits">VkImageUsageFlagBits</a> values</p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-usage-requiredbitmask" href="#VUID-VkImageCreateInfo-usage-requiredbitmask"></a> <span class="vuid">VUID-VkImageCreateInfo-usage-requiredbitmask</span><br>
 <code>usage</code> <strong>must</strong> not be <code>0</code></p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-sharingMode-parameter" href="#VUID-VkImageCreateInfo-sharingMode-parameter"></a> <span class="vuid">VUID-VkImageCreateInfo-sharingMode-parameter</span><br>
 <code>sharingMode</code> <strong>must</strong> be a valid <a href="#VkSharingMode">VkSharingMode</a> value</p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-initialLayout-parameter" href="#VUID-VkImageCreateInfo-initialLayout-parameter"></a> <span class="vuid">VUID-VkImageCreateInfo-initialLayout-parameter</span><br>
 <code>initialLayout</code> <strong>must</strong> be a valid <a href="#VkImageLayout">VkImageLayout</a> value</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>VkBufferCollectionImageCreateInfoFUCHSIA</code> structure is defined as:</p>
</div>
<div id="VkBufferCollectionImageCreateInfoFUCHSIA" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_FUCHSIA_buffer_collection
typedef struct VkBufferCollectionImageCreateInfoFUCHSIA {
    VkStructureType              sType;
    const void*                  pNext;
    VkBufferCollectionFUCHSIA    collection;
    uint32_t                     index;
} VkBufferCollectionImageCreateInfoFUCHSIA;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is a <a href="fundamentals.html#VkStructureType" class="xref page">VkStructureType</a> value identifying this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure</p>
</li>
<li>
<p><code>collection</code> is the <a href="#VkBufferCollectionFUCHSIA">VkBufferCollectionFUCHSIA</a> handle</p>
</li>
<li>
<p><code>index</code> is the index of the buffer in the buffer collection from
which the memory will be imported</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkBufferCollectionImageCreateInfoFUCHSIA-index-06391" href="#VUID-VkBufferCollectionImageCreateInfoFUCHSIA-index-06391"></a> <span class="vuid">VUID-VkBufferCollectionImageCreateInfoFUCHSIA-index-06391</span><br>

<code>index</code> <strong>must</strong> be less than
<a href="#VkBufferCollectionPropertiesFUCHSIA">VkBufferCollectionPropertiesFUCHSIA</a>::<code>bufferCount</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkBufferCollectionImageCreateInfoFUCHSIA-sType-sType" href="#VUID-VkBufferCollectionImageCreateInfoFUCHSIA-sType-sType"></a> <span class="vuid">VUID-VkBufferCollectionImageCreateInfoFUCHSIA-sType-sType</span><br>
 <code>sType</code> <strong>must</strong> be <code>VK_STRUCTURE_TYPE_BUFFER_COLLECTION_IMAGE_CREATE_INFO_FUCHSIA</code></p>
</li>
<li>
<p><a id="VUID-VkBufferCollectionImageCreateInfoFUCHSIA-collection-parameter" href="#VUID-VkBufferCollectionImageCreateInfoFUCHSIA-collection-parameter"></a> <span class="vuid">VUID-VkBufferCollectionImageCreateInfoFUCHSIA-collection-parameter</span><br>
 <code>collection</code> <strong>must</strong> be a valid <a href="#VkBufferCollectionFUCHSIA">VkBufferCollectionFUCHSIA</a> handle</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>VkImageStencilUsageCreateInfo</code> structure is defined as:</p>
</div>
<div id="VkImageStencilUsageCreateInfo" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_VERSION_1_2
typedef struct VkImageStencilUsageCreateInfo {
    VkStructureType      sType;
    const void*          pNext;
    VkImageUsageFlags    stencilUsage;
} VkImageStencilUsageCreateInfo;</code></pre>
</div>
</div>
<div class="paragraph">
<p>or the equivalent</p>
</div>
<div id="VkImageStencilUsageCreateInfoEXT" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_EXT_separate_stencil_usage
typedef VkImageStencilUsageCreateInfo VkImageStencilUsageCreateInfoEXT;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is a <a href="fundamentals.html#VkStructureType" class="xref page">VkStructureType</a> value identifying this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>stencilUsage</code> is a bitmask of <a href="#VkImageUsageFlagBits">VkImageUsageFlagBits</a> describing
the intended usage of the stencil aspect of the image.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>If the <code>pNext</code> chain of <a href="#VkImageCreateInfo">VkImageCreateInfo</a> includes a
<code>VkImageStencilUsageCreateInfo</code> structure, then that structure includes
the usage flags specific to the stencil aspect of the image for an image
with a depth-stencil format.</p>
</div>
<div class="paragraph">
<p>This structure specifies image usages which only apply to the stencil aspect
of a depth/stencil format image.
When this structure is included in the <code>pNext</code> chain of
<a href="#VkImageCreateInfo">VkImageCreateInfo</a>, the stencil aspect of the image <strong>must</strong> only be used
as specified by <code>stencilUsage</code>.
When this structure is not included in the <code>pNext</code> chain of
<a href="#VkImageCreateInfo">VkImageCreateInfo</a>, the stencil aspect of an image <strong>must</strong> only be used
as specified by <a href="#VkImageCreateInfo">VkImageCreateInfo</a>::<code>usage</code>.
Use of other aspects of an image are unaffected by this structure.</p>
</div>
<div class="paragraph">
<p>This structure <strong>can</strong> also be included in the <code>pNext</code> chain of
<a href="capabilities.html#VkPhysicalDeviceImageFormatInfo2" class="xref page">VkPhysicalDeviceImageFormatInfo2</a> to query additional capabilities
specific to image creation parameter combinations including a separate set
of usage flags for the stencil aspect of the image using
<a href="capabilities.html#vkGetPhysicalDeviceImageFormatProperties2" class="xref page">vkGetPhysicalDeviceImageFormatProperties2</a>.
When this structure is not included in the <code>pNext</code> chain of
<code>VkPhysicalDeviceImageFormatInfo2</code> then the implicit value of
<code>stencilUsage</code> matches that of
<code>VkPhysicalDeviceImageFormatInfo2</code>::<code>usage</code>.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkImageStencilUsageCreateInfo-stencilUsage-02539" href="#VUID-VkImageStencilUsageCreateInfo-stencilUsage-02539"></a> <span class="vuid">VUID-VkImageStencilUsageCreateInfo-stencilUsage-02539</span><br>

If <code>stencilUsage</code> includes
<code>VK_IMAGE_USAGE_TRANSIENT_ATTACHMENT_BIT</code>, it <strong>must</strong> not include bits
other than <code>VK_IMAGE_USAGE_DEPTH_STENCIL_ATTACHMENT_BIT</code> or
<code>VK_IMAGE_USAGE_INPUT_ATTACHMENT_BIT</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkImageStencilUsageCreateInfo-sType-sType" href="#VUID-VkImageStencilUsageCreateInfo-sType-sType"></a> <span class="vuid">VUID-VkImageStencilUsageCreateInfo-sType-sType</span><br>
 <code>sType</code> <strong>must</strong> be <code>VK_STRUCTURE_TYPE_IMAGE_STENCIL_USAGE_CREATE_INFO</code></p>
</li>
<li>
<p><a id="VUID-VkImageStencilUsageCreateInfo-stencilUsage-parameter" href="#VUID-VkImageStencilUsageCreateInfo-stencilUsage-parameter"></a> <span class="vuid">VUID-VkImageStencilUsageCreateInfo-stencilUsage-parameter</span><br>
 <code>stencilUsage</code> <strong>must</strong> be a valid combination of <a href="#VkImageUsageFlagBits">VkImageUsageFlagBits</a> values</p>
</li>
<li>
<p><a id="VUID-VkImageStencilUsageCreateInfo-stencilUsage-requiredbitmask" href="#VUID-VkImageStencilUsageCreateInfo-stencilUsage-requiredbitmask"></a> <span class="vuid">VUID-VkImageStencilUsageCreateInfo-stencilUsage-requiredbitmask</span><br>
 <code>stencilUsage</code> <strong>must</strong> not be <code>0</code></p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>If the <code>pNext</code> chain includes a
<code>VkDedicatedAllocationImageCreateInfoNV</code> structure, then that structure
includes an enable controlling whether the image will have a dedicated
memory allocation bound to it.</p>
</div>
<div class="paragraph">
<p>The <code>VkDedicatedAllocationImageCreateInfoNV</code> structure is defined as:</p>
</div>
<div id="VkDedicatedAllocationImageCreateInfoNV" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_NV_dedicated_allocation
typedef struct VkDedicatedAllocationImageCreateInfoNV {
    VkStructureType    sType;
    const void*        pNext;
    VkBool32           dedicatedAllocation;
} VkDedicatedAllocationImageCreateInfoNV;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is a <a href="fundamentals.html#VkStructureType" class="xref page">VkStructureType</a> value identifying this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>dedicatedAllocation</code> specifies whether the image will have a
dedicated allocation bound to it.</p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="title">Note</div>
<div class="paragraph">
<p>Using a dedicated allocation for color and depth/stencil attachments or
other large images <strong>may</strong> improve performance on some devices.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkDedicatedAllocationImageCreateInfoNV-dedicatedAllocation-00994" href="#VUID-VkDedicatedAllocationImageCreateInfoNV-dedicatedAllocation-00994"></a> <span class="vuid">VUID-VkDedicatedAllocationImageCreateInfoNV-dedicatedAllocation-00994</span><br>

If <code>dedicatedAllocation</code> is <code>VK_TRUE</code>,
<a href="#VkImageCreateInfo">VkImageCreateInfo</a>::<code>flags</code> <strong>must</strong> not include
<code>VK_IMAGE_CREATE_SPARSE_BINDING_BIT</code>,
<code>VK_IMAGE_CREATE_SPARSE_RESIDENCY_BIT</code>, or
<code>VK_IMAGE_CREATE_SPARSE_ALIASED_BIT</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkDedicatedAllocationImageCreateInfoNV-sType-sType" href="#VUID-VkDedicatedAllocationImageCreateInfoNV-sType-sType"></a> <span class="vuid">VUID-VkDedicatedAllocationImageCreateInfoNV-sType-sType</span><br>
 <code>sType</code> <strong>must</strong> be <code>VK_STRUCTURE_TYPE_DEDICATED_ALLOCATION_IMAGE_CREATE_INFO_NV</code></p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>To define a set of external memory handle types that <strong>may</strong> be used as backing
store for an image, add a <a href="#VkExternalMemoryImageCreateInfo">VkExternalMemoryImageCreateInfo</a> structure to
the <code>pNext</code> chain of the <a href="#VkImageCreateInfo">VkImageCreateInfo</a> structure.
The <code>VkExternalMemoryImageCreateInfo</code> structure is defined as:</p>
</div>
<div id="VkExternalMemoryImageCreateInfo" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_VERSION_1_1
typedef struct VkExternalMemoryImageCreateInfo {
    VkStructureType                    sType;
    const void*                        pNext;
    VkExternalMemoryHandleTypeFlags    handleTypes;
} VkExternalMemoryImageCreateInfo;</code></pre>
</div>
</div>
<div class="paragraph">
<p>or the equivalent</p>
</div>
<div id="VkExternalMemoryImageCreateInfoKHR" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_KHR_external_memory
typedef VkExternalMemoryImageCreateInfo VkExternalMemoryImageCreateInfoKHR;</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="title">Note</div>
<div class="paragraph">
<p>A <code>VkExternalMemoryImageCreateInfo</code> structure with a non-zero
<code>handleTypes</code> field must be included in the creation parameters for an
image that will be bound to memory that is either exported or imported.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is a <a href="fundamentals.html#VkStructureType" class="xref page">VkStructureType</a> value identifying this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>handleTypes</code> is zero or a bitmask of
<a href="capabilities.html#VkExternalMemoryHandleTypeFlagBits" class="xref page">VkExternalMemoryHandleTypeFlagBits</a> specifying one or more external
memory handle types.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkExternalMemoryImageCreateInfo-sType-sType" href="#VUID-VkExternalMemoryImageCreateInfo-sType-sType"></a> <span class="vuid">VUID-VkExternalMemoryImageCreateInfo-sType-sType</span><br>
 <code>sType</code> <strong>must</strong> be <code>VK_STRUCTURE_TYPE_EXTERNAL_MEMORY_IMAGE_CREATE_INFO</code></p>
</li>
<li>
<p><a id="VUID-VkExternalMemoryImageCreateInfo-handleTypes-parameter" href="#VUID-VkExternalMemoryImageCreateInfo-handleTypes-parameter"></a> <span class="vuid">VUID-VkExternalMemoryImageCreateInfo-handleTypes-parameter</span><br>
 <code>handleTypes</code> <strong>must</strong> be a valid combination of <a href="capabilities.html#VkExternalMemoryHandleTypeFlagBits" class="xref page">VkExternalMemoryHandleTypeFlagBits</a> values</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>If the <code>pNext</code> chain includes a <code>VkExternalMemoryImageCreateInfoNV</code>
structure, then that structure defines a set of external memory handle types
that <strong>may</strong> be used as backing store for the image.</p>
</div>
<div class="paragraph">
<p>The <code>VkExternalMemoryImageCreateInfoNV</code> structure is defined as:</p>
</div>
<div id="VkExternalMemoryImageCreateInfoNV" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_NV_external_memory
typedef struct VkExternalMemoryImageCreateInfoNV {
    VkStructureType                      sType;
    const void*                          pNext;
    VkExternalMemoryHandleTypeFlagsNV    handleTypes;
} VkExternalMemoryImageCreateInfoNV;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is a <a href="fundamentals.html#VkStructureType" class="xref page">VkStructureType</a> value identifying this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>handleTypes</code> is zero or a bitmask of
<a href="memory.html#VkExternalMemoryHandleTypeFlagBitsNV" class="xref page">VkExternalMemoryHandleTypeFlagBitsNV</a> specifying one or more
external memory handle types.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkExternalMemoryImageCreateInfoNV-sType-sType" href="#VUID-VkExternalMemoryImageCreateInfoNV-sType-sType"></a> <span class="vuid">VUID-VkExternalMemoryImageCreateInfoNV-sType-sType</span><br>
 <code>sType</code> <strong>must</strong> be <code>VK_STRUCTURE_TYPE_EXTERNAL_MEMORY_IMAGE_CREATE_INFO_NV</code></p>
</li>
<li>
<p><a id="VUID-VkExternalMemoryImageCreateInfoNV-handleTypes-parameter" href="#VUID-VkExternalMemoryImageCreateInfoNV-handleTypes-parameter"></a> <span class="vuid">VUID-VkExternalMemoryImageCreateInfoNV-handleTypes-parameter</span><br>
 <code>handleTypes</code> <strong>must</strong> be a valid combination of <a href="memory.html#VkExternalMemoryHandleTypeFlagBitsNV" class="xref page">VkExternalMemoryHandleTypeFlagBitsNV</a> values</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p><code>VkExternalFormatANDROID</code> is defined as:</p>
</div>
<div id="VkExternalFormatANDROID" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_ANDROID_external_memory_android_hardware_buffer
typedef struct VkExternalFormatANDROID {
    VkStructureType    sType;
    void*              pNext;
    uint64_t           externalFormat;
} VkExternalFormatANDROID;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is a <a href="fundamentals.html#VkStructureType" class="xref page">VkStructureType</a> value identifying this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>externalFormat</code> is an implementation-defined identifier for the
external format</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>When included in the <code>pNext</code> chain of another structure, it indicates
<a href="memory.html#memory-external-android-hardware-buffer-external-formats" class="xref page">additional format information</a> beyond what is provided by <code>VkFormat</code> values for an
Android hardware buffer.
If <code>externalFormat</code> is zero, it indicates that no external format is
used, and implementations should rely only on other format information.
If this structure is not present, it is equivalent to setting
<code>externalFormat</code> to zero.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkExternalFormatANDROID-externalFormat-01894" href="#VUID-VkExternalFormatANDROID-externalFormat-01894"></a> <span class="vuid">VUID-VkExternalFormatANDROID-externalFormat-01894</span><br>

<code>externalFormat</code> <strong>must</strong> be <code>0</code> or a value returned in the
<code>externalFormat</code> member of
<a href="memory.html#VkAndroidHardwareBufferFormatPropertiesANDROID" class="xref page">VkAndroidHardwareBufferFormatPropertiesANDROID</a> by an earlier call
to <a href="memory.html#vkGetAndroidHardwareBufferPropertiesANDROID" class="xref page">vkGetAndroidHardwareBufferPropertiesANDROID</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkExternalFormatANDROID-sType-sType" href="#VUID-VkExternalFormatANDROID-sType-sType"></a> <span class="vuid">VUID-VkExternalFormatANDROID-sType-sType</span><br>
 <code>sType</code> <strong>must</strong> be <code>VK_STRUCTURE_TYPE_EXTERNAL_FORMAT_ANDROID</code></p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>To create an image with an
<a href="memory.html#memory-external-screen-buffer-external-formats" class="xref page">QNX Screen external format</a>, add a <code>VkExternalFormatQNX</code> structure in the <code>pNext</code> chain
of <a href="#VkImageCreateInfo">VkImageCreateInfo</a>.
<code>VkExternalFormatQNX</code> is defined as:</p>
</div>
<div id="VkExternalFormatQNX" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_QNX_external_memory_screen_buffer
typedef struct VkExternalFormatQNX {
    VkStructureType    sType;
    void*              pNext;
    uint64_t           externalFormat;
} VkExternalFormatQNX;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is a <a href="fundamentals.html#VkStructureType" class="xref page">VkStructureType</a> value identifying this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>externalFormat</code> is an implementation-defined identifier for the
external format</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>If <code>externalFormat</code> is zero, the effect is as if the
<code>VkExternalFormatQNX</code> structure was not present.
Otherwise, the <code>image</code> will have the specified external format.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkExternalFormatQNX-externalFormat-08956" href="#VUID-VkExternalFormatQNX-externalFormat-08956"></a> <span class="vuid">VUID-VkExternalFormatQNX-externalFormat-08956</span><br>

<code>externalFormat</code> <strong>must</strong> be <code>0</code> or a value returned in the
<code>externalFormat</code> member of <a href="memory.html#VkScreenBufferFormatPropertiesQNX" class="xref page">VkScreenBufferFormatPropertiesQNX</a>
by an earlier call to <a href="memory.html#vkGetScreenBufferPropertiesQNX" class="xref page">vkGetScreenBufferPropertiesQNX</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkExternalFormatQNX-sType-sType" href="#VUID-VkExternalFormatQNX-sType-sType"></a> <span class="vuid">VUID-VkExternalFormatQNX-sType-sType</span><br>
 <code>sType</code> <strong>must</strong> be <code>VK_STRUCTURE_TYPE_EXTERNAL_FORMAT_QNX</code></p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>If the <code>pNext</code> chain of <a href="#VkImageCreateInfo">VkImageCreateInfo</a> includes a
<code>VkImageSwapchainCreateInfoKHR</code> structure, then that structure includes
a swapchain handle indicating that the image will be bound to memory from
that swapchain.</p>
</div>
<div class="paragraph">
<p>The <code>VkImageSwapchainCreateInfoKHR</code> structure is defined as:</p>
</div>
<div id="VkImageSwapchainCreateInfoKHR" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_VERSION_1_1 with VK_KHR_swapchain, VK_KHR_device_group with VK_KHR_swapchain
typedef struct VkImageSwapchainCreateInfoKHR {
    VkStructureType    sType;
    const void*        pNext;
    VkSwapchainKHR     swapchain;
} VkImageSwapchainCreateInfoKHR;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is a <a href="fundamentals.html#VkStructureType" class="xref page">VkStructureType</a> value identifying this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>swapchain</code> is <a href="../appendices/boilerplate.html#VK_NULL_HANDLE" class="xref page">VK_NULL_HANDLE</a> or a handle of a swapchain that
the image will be bound to.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkImageSwapchainCreateInfoKHR-swapchain-00995" href="#VUID-VkImageSwapchainCreateInfoKHR-swapchain-00995"></a> <span class="vuid">VUID-VkImageSwapchainCreateInfoKHR-swapchain-00995</span><br>

If <code>swapchain</code> is not <a href="../appendices/boilerplate.html#VK_NULL_HANDLE" class="xref page">VK_NULL_HANDLE</a>, the fields of
<a href="#VkImageCreateInfo">VkImageCreateInfo</a> <strong>must</strong> match the
<a href="VK_KHR_surface/wsi.html#swapchain-wsi-image-create-info" class="xref page">implied image creation parameters</a>
of the swapchain</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkImageSwapchainCreateInfoKHR-sType-sType" href="#VUID-VkImageSwapchainCreateInfoKHR-sType-sType"></a> <span class="vuid">VUID-VkImageSwapchainCreateInfoKHR-sType-sType</span><br>
 <code>sType</code> <strong>must</strong> be <code>VK_STRUCTURE_TYPE_IMAGE_SWAPCHAIN_CREATE_INFO_KHR</code></p>
</li>
<li>
<p><a id="VUID-VkImageSwapchainCreateInfoKHR-swapchain-parameter" href="#VUID-VkImageSwapchainCreateInfoKHR-swapchain-parameter"></a> <span class="vuid">VUID-VkImageSwapchainCreateInfoKHR-swapchain-parameter</span><br>
 If <code>swapchain</code> is not <a href="../appendices/boilerplate.html#VK_NULL_HANDLE" class="xref page">VK_NULL_HANDLE</a>, <code>swapchain</code> <strong>must</strong> be a valid <a href="VK_KHR_surface/wsi.html#VkSwapchainKHR" class="xref page">VkSwapchainKHR</a> handle</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>If the <code>pNext</code> chain of <a href="#VkImageCreateInfo">VkImageCreateInfo</a> includes a
<code>VkImageFormatListCreateInfo</code> structure, then that structure contains a
list of all formats that <strong>can</strong> be used when creating views of this image.</p>
</div>
<div class="paragraph">
<p>The <code>VkImageFormatListCreateInfo</code> structure is defined as:</p>
</div>
<div id="VkImageFormatListCreateInfo" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_VERSION_1_2
typedef struct VkImageFormatListCreateInfo {
    VkStructureType    sType;
    const void*        pNext;
    uint32_t           viewFormatCount;
    const VkFormat*    pViewFormats;
} VkImageFormatListCreateInfo;</code></pre>
</div>
</div>
<div class="paragraph">
<p>or the equivalent</p>
</div>
<div id="VkImageFormatListCreateInfoKHR" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_KHR_image_format_list
typedef VkImageFormatListCreateInfo VkImageFormatListCreateInfoKHR;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is a <a href="fundamentals.html#VkStructureType" class="xref page">VkStructureType</a> value identifying this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>viewFormatCount</code> is the number of entries in the <code>pViewFormats</code>
array.</p>
</li>
<li>
<p><code>pViewFormats</code> is a pointer to an array of <a href="formats.html#VkFormat" class="xref page">VkFormat</a> values
specifying all formats which <strong>can</strong> be used when creating views of this
image.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>If <code>viewFormatCount</code> is zero, <code>pViewFormats</code> is ignored and the
image is created as if the <code>VkImageFormatListCreateInfo</code> structure were
not included in the <code>pNext</code> chain of <a href="#VkImageCreateInfo">VkImageCreateInfo</a>.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkImageFormatListCreateInfo-viewFormatCount-09540" href="#VUID-VkImageFormatListCreateInfo-viewFormatCount-09540"></a> <span class="vuid">VUID-VkImageFormatListCreateInfo-viewFormatCount-09540</span><br>

If <code>viewFormatCount</code> is not 0, each element of <code>pViewFormats</code>
<strong>must</strong> not be <code>VK_FORMAT_UNDEFINED</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkImageFormatListCreateInfo-sType-sType" href="#VUID-VkImageFormatListCreateInfo-sType-sType"></a> <span class="vuid">VUID-VkImageFormatListCreateInfo-sType-sType</span><br>
 <code>sType</code> <strong>must</strong> be <code>VK_STRUCTURE_TYPE_IMAGE_FORMAT_LIST_CREATE_INFO</code></p>
</li>
<li>
<p><a id="VUID-VkImageFormatListCreateInfo-pViewFormats-parameter" href="#VUID-VkImageFormatListCreateInfo-pViewFormats-parameter"></a> <span class="vuid">VUID-VkImageFormatListCreateInfo-pViewFormats-parameter</span><br>
 If <code>viewFormatCount</code> is not <code>0</code>, <code>pViewFormats</code> <strong>must</strong> be a valid pointer to an array of <code>viewFormatCount</code> valid <a href="formats.html#VkFormat" class="xref page">VkFormat</a> values</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>If the <code>pNext</code> chain of <a href="#VkImageCreateInfo">VkImageCreateInfo</a> includes a
<a href="#VkImageDrmFormatModifierListCreateInfoEXT">VkImageDrmFormatModifierListCreateInfoEXT</a> structure, then the image
will be created with one of the <a href="../appendices/glossary.html#glossary-drm-format-modifier" class="xref page">Linux DRM format modifiers</a> listed in the structure.
The choice of modifier is implementation-dependent.</p>
</div>
<div class="paragraph">
<p>The <a href="#VkImageDrmFormatModifierListCreateInfoEXT">VkImageDrmFormatModifierListCreateInfoEXT</a> structure is defined as:</p>
</div>
<div id="VkImageDrmFormatModifierListCreateInfoEXT" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_EXT_image_drm_format_modifier
typedef struct VkImageDrmFormatModifierListCreateInfoEXT {
    VkStructureType    sType;
    const void*        pNext;
    uint32_t           drmFormatModifierCount;
    const uint64_t*    pDrmFormatModifiers;
} VkImageDrmFormatModifierListCreateInfoEXT;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is a <a href="fundamentals.html#VkStructureType" class="xref page">VkStructureType</a> value identifying this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>drmFormatModifierCount</code> is the length of the
<code>pDrmFormatModifiers</code> array.</p>
</li>
<li>
<p><code>pDrmFormatModifiers</code> is a pointer to an array of <em>Linux DRM format
modifiers</em>.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkImageDrmFormatModifierListCreateInfoEXT-pDrmFormatModifiers-02263" href="#VUID-VkImageDrmFormatModifierListCreateInfoEXT-pDrmFormatModifiers-02263"></a> <span class="vuid">VUID-VkImageDrmFormatModifierListCreateInfoEXT-pDrmFormatModifiers-02263</span><br>

Each <em>modifier</em> in <code>pDrmFormatModifiers</code> <strong>must</strong> be compatible with
the parameters in <a href="#VkImageCreateInfo">VkImageCreateInfo</a> and its <code>pNext</code> chain, as
determined by querying <a href="capabilities.html#VkPhysicalDeviceImageFormatInfo2" class="xref page">VkPhysicalDeviceImageFormatInfo2</a> extended
with <a href="capabilities.html#VkPhysicalDeviceImageDrmFormatModifierInfoEXT" class="xref page">VkPhysicalDeviceImageDrmFormatModifierInfoEXT</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkImageDrmFormatModifierListCreateInfoEXT-sType-sType" href="#VUID-VkImageDrmFormatModifierListCreateInfoEXT-sType-sType"></a> <span class="vuid">VUID-VkImageDrmFormatModifierListCreateInfoEXT-sType-sType</span><br>
 <code>sType</code> <strong>must</strong> be <code>VK_STRUCTURE_TYPE_IMAGE_DRM_FORMAT_MODIFIER_LIST_CREATE_INFO_EXT</code></p>
</li>
<li>
<p><a id="VUID-VkImageDrmFormatModifierListCreateInfoEXT-pDrmFormatModifiers-parameter" href="#VUID-VkImageDrmFormatModifierListCreateInfoEXT-pDrmFormatModifiers-parameter"></a> <span class="vuid">VUID-VkImageDrmFormatModifierListCreateInfoEXT-pDrmFormatModifiers-parameter</span><br>
 <code>pDrmFormatModifiers</code> <strong>must</strong> be a valid pointer to an array of <code>drmFormatModifierCount</code> <code>uint64_t</code> values</p>
</li>
<li>
<p><a id="VUID-VkImageDrmFormatModifierListCreateInfoEXT-drmFormatModifierCount-arraylength" href="#VUID-VkImageDrmFormatModifierListCreateInfoEXT-drmFormatModifierCount-arraylength"></a> <span class="vuid">VUID-VkImageDrmFormatModifierListCreateInfoEXT-drmFormatModifierCount-arraylength</span><br>
 <code>drmFormatModifierCount</code> <strong>must</strong> be greater than <code>0</code></p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>If the <code>pNext</code> chain of <a href="#VkImageCreateInfo">VkImageCreateInfo</a> includes a
<a href="#VkImageDrmFormatModifierExplicitCreateInfoEXT">VkImageDrmFormatModifierExplicitCreateInfoEXT</a> structure, then the
image will be created with the <a href="../appendices/glossary.html#glossary-drm-format-modifier" class="xref page">Linux DRM format modifier</a> and memory layout defined by the structure.</p>
</div>
<div class="paragraph">
<p>The <a href="#VkImageDrmFormatModifierExplicitCreateInfoEXT">VkImageDrmFormatModifierExplicitCreateInfoEXT</a> structure is defined
as:</p>
</div>
<div id="VkImageDrmFormatModifierExplicitCreateInfoEXT" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_EXT_image_drm_format_modifier
typedef struct VkImageDrmFormatModifierExplicitCreateInfoEXT {
    VkStructureType               sType;
    const void*                   pNext;
    uint64_t                      drmFormatModifier;
    uint32_t                      drmFormatModifierPlaneCount;
    const VkSubresourceLayout*    pPlaneLayouts;
} VkImageDrmFormatModifierExplicitCreateInfoEXT;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is a <a href="fundamentals.html#VkStructureType" class="xref page">VkStructureType</a> value identifying this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>drmFormatModifier</code> is the <em>Linux DRM format modifier</em> with which
the image will be created.</p>
</li>
<li>
<p><code>drmFormatModifierPlaneCount</code> is the number of <em>memory planes</em> in
the image (as reported by <a href="formats.html#VkDrmFormatModifierPropertiesEXT" class="xref page">VkDrmFormatModifierPropertiesEXT</a>) as
well as the length of the <code>pPlaneLayouts</code> array.</p>
</li>
<li>
<p><code>pPlaneLayouts</code> is a pointer to an array of
<a href="#VkSubresourceLayout">VkSubresourceLayout</a> structures describing the image&#8217;s <em>memory
planes</em>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The <code>i</code><sup>th</sup> member of <code>pPlaneLayouts</code> describes the layout of the
image&#8217;s <code>i</code><sup>th</sup> <em>memory plane</em> (that is,
<code>VK_IMAGE_ASPECT_MEMORY_PLANE<em>_i_</em>BIT_EXT</code>).
In each element of <code>pPlaneLayouts</code>, the implementation <strong>must</strong> ignore
<code>size</code>.
The implementation calculates the size of each plane, which the application
<strong>can</strong> query with <a href="#vkGetImageSubresourceLayout">vkGetImageSubresourceLayout</a>.</p>
</div>
<div class="paragraph">
<p>When creating an image with
<a href="#VkImageDrmFormatModifierExplicitCreateInfoEXT">VkImageDrmFormatModifierExplicitCreateInfoEXT</a>, it is the application&#8217;s
responsibility to satisfy all valid usage requirements.
However, the implementation <strong>must</strong> validate that the provided
<code>pPlaneLayouts</code>, when combined with the provided <code>drmFormatModifier</code>
and other creation parameters in <a href="#VkImageCreateInfo">VkImageCreateInfo</a> and its <code>pNext</code>
chain, produce a valid image.
(This validation is necessarily implementation-dependent and outside the
scope of Vulkan, and therefore not described by valid usage requirements).
If this validation fails, then <a href="#vkCreateImage">vkCreateImage</a> returns
<code>VK_ERROR_INVALID_DRM_FORMAT_MODIFIER_PLANE_LAYOUT_EXT</code>.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkImageDrmFormatModifierExplicitCreateInfoEXT-drmFormatModifier-02264" href="#VUID-VkImageDrmFormatModifierExplicitCreateInfoEXT-drmFormatModifier-02264"></a> <span class="vuid">VUID-VkImageDrmFormatModifierExplicitCreateInfoEXT-drmFormatModifier-02264</span><br>

<code>drmFormatModifier</code> <strong>must</strong> be compatible with the parameters in
<a href="#VkImageCreateInfo">VkImageCreateInfo</a> and its <code>pNext</code> chain, as determined by
querying <a href="capabilities.html#VkPhysicalDeviceImageFormatInfo2" class="xref page">VkPhysicalDeviceImageFormatInfo2</a> extended with
<a href="capabilities.html#VkPhysicalDeviceImageDrmFormatModifierInfoEXT" class="xref page">VkPhysicalDeviceImageDrmFormatModifierInfoEXT</a></p>
</li>
<li>
<p><a id="VUID-VkImageDrmFormatModifierExplicitCreateInfoEXT-drmFormatModifierPlaneCount-02265" href="#VUID-VkImageDrmFormatModifierExplicitCreateInfoEXT-drmFormatModifierPlaneCount-02265"></a> <span class="vuid">VUID-VkImageDrmFormatModifierExplicitCreateInfoEXT-drmFormatModifierPlaneCount-02265</span><br>

<code>drmFormatModifierPlaneCount</code> <strong>must</strong> be equal to the
<a href="formats.html#VkDrmFormatModifierPropertiesEXT" class="xref page">VkDrmFormatModifierPropertiesEXT</a>::<code>drmFormatModifierPlaneCount</code>
associated with <a href="#VkImageCreateInfo">VkImageCreateInfo</a>::<code>format</code> and
<code>drmFormatModifier</code>, as found by querying
<a href="formats.html#VkDrmFormatModifierPropertiesListEXT" class="xref page">VkDrmFormatModifierPropertiesListEXT</a></p>
</li>
<li>
<p><a id="VUID-VkImageDrmFormatModifierExplicitCreateInfoEXT-size-02267" href="#VUID-VkImageDrmFormatModifierExplicitCreateInfoEXT-size-02267"></a> <span class="vuid">VUID-VkImageDrmFormatModifierExplicitCreateInfoEXT-size-02267</span><br>

For each element of <code>pPlaneLayouts</code>, <code>size</code> <strong>must</strong> be 0</p>
</li>
<li>
<p><a id="VUID-VkImageDrmFormatModifierExplicitCreateInfoEXT-arrayPitch-02268" href="#VUID-VkImageDrmFormatModifierExplicitCreateInfoEXT-arrayPitch-02268"></a> <span class="vuid">VUID-VkImageDrmFormatModifierExplicitCreateInfoEXT-arrayPitch-02268</span><br>

For each element of <code>pPlaneLayouts</code>, <code>arrayPitch</code> <strong>must</strong> be 0 if
<a href="#VkImageCreateInfo">VkImageCreateInfo</a>::<code>arrayLayers</code> is 1</p>
</li>
<li>
<p><a id="VUID-VkImageDrmFormatModifierExplicitCreateInfoEXT-depthPitch-02269" href="#VUID-VkImageDrmFormatModifierExplicitCreateInfoEXT-depthPitch-02269"></a> <span class="vuid">VUID-VkImageDrmFormatModifierExplicitCreateInfoEXT-depthPitch-02269</span><br>

For each element of <code>pPlaneLayouts</code>, <code>depthPitch</code> <strong>must</strong> be 0 if
<a href="#VkImageCreateInfo">VkImageCreateInfo</a>::<code>extent.depth</code> is 1</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkImageDrmFormatModifierExplicitCreateInfoEXT-sType-sType" href="#VUID-VkImageDrmFormatModifierExplicitCreateInfoEXT-sType-sType"></a> <span class="vuid">VUID-VkImageDrmFormatModifierExplicitCreateInfoEXT-sType-sType</span><br>
 <code>sType</code> <strong>must</strong> be <code>VK_STRUCTURE_TYPE_IMAGE_DRM_FORMAT_MODIFIER_EXPLICIT_CREATE_INFO_EXT</code></p>
</li>
<li>
<p><a id="VUID-VkImageDrmFormatModifierExplicitCreateInfoEXT-pPlaneLayouts-parameter" href="#VUID-VkImageDrmFormatModifierExplicitCreateInfoEXT-pPlaneLayouts-parameter"></a> <span class="vuid">VUID-VkImageDrmFormatModifierExplicitCreateInfoEXT-pPlaneLayouts-parameter</span><br>
 <code>pPlaneLayouts</code> <strong>must</strong> be a valid pointer to an array of <code>drmFormatModifierPlaneCount</code> <a href="#VkSubresourceLayout">VkSubresourceLayout</a> structures</p>
</li>
<li>
<p><a id="VUID-VkImageDrmFormatModifierExplicitCreateInfoEXT-drmFormatModifierPlaneCount-arraylength" href="#VUID-VkImageDrmFormatModifierExplicitCreateInfoEXT-drmFormatModifierPlaneCount-arraylength"></a> <span class="vuid">VUID-VkImageDrmFormatModifierExplicitCreateInfoEXT-drmFormatModifierPlaneCount-arraylength</span><br>
 <code>drmFormatModifierPlaneCount</code> <strong>must</strong> be greater than <code>0</code></p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>If the <code>pNext</code> list of <a href="#VkImageCreateInfo">VkImageCreateInfo</a> includes a
<code>VkImageCompressionControlEXT</code> structure, then that structure describes
compression controls for this image.</p>
</div>
<div class="paragraph">
<p>The <code>VkImageCompressionControlEXT</code> structure is defined as:</p>
</div>
<div id="VkImageCompressionControlEXT" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_EXT_image_compression_control
typedef struct VkImageCompressionControlEXT {
    VkStructureType                         sType;
    const void*                             pNext;
    VkImageCompressionFlagsEXT              flags;
    uint32_t                                compressionControlPlaneCount;
    VkImageCompressionFixedRateFlagsEXT*    pFixedRateFlags;
} VkImageCompressionControlEXT;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is a <a href="fundamentals.html#VkStructureType" class="xref page">VkStructureType</a> value identifying this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>flags</code> is a bitmask of <a href="#VkImageCompressionFlagBitsEXT">VkImageCompressionFlagBitsEXT</a>
describing compression controls for the image.</p>
</li>
<li>
<p><code>compressionControlPlaneCount</code> is the number of entries in the
<code>pFixedRateFlags</code> array.</p>
</li>
<li>
<p><code>pFixedRateFlags</code> is <code>NULL</code> or a pointer to an array of
<a href="#VkImageCompressionFixedRateFlagsEXT">VkImageCompressionFixedRateFlagsEXT</a> bitfields describing allowed
fixed-rate compression rates of each image plane.
It is ignored if <code>flags</code> does not include
<code>VK_IMAGE_COMPRESSION_FIXED_RATE_EXPLICIT_EXT</code>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>If enabled, fixed-rate compression is done in an implementation-defined
manner and <strong>may</strong> be applied at block granularity.
In that case, a write to an individual texel <strong>may</strong> modify the value of other
texels in the same block.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkImageCompressionControlEXT-flags-06747" href="#VUID-VkImageCompressionControlEXT-flags-06747"></a> <span class="vuid">VUID-VkImageCompressionControlEXT-flags-06747</span><br>

<code>flags</code> <strong>must</strong> be one of <code>VK_IMAGE_COMPRESSION_DEFAULT_EXT</code>,
<code>VK_IMAGE_COMPRESSION_FIXED_RATE_DEFAULT_EXT</code>,
<code>VK_IMAGE_COMPRESSION_FIXED_RATE_EXPLICIT_EXT</code>, or
<code>VK_IMAGE_COMPRESSION_DISABLED_EXT</code></p>
</li>
<li>
<p><a id="VUID-VkImageCompressionControlEXT-flags-06748" href="#VUID-VkImageCompressionControlEXT-flags-06748"></a> <span class="vuid">VUID-VkImageCompressionControlEXT-flags-06748</span><br>

If <code>flags</code> includes
<code>VK_IMAGE_COMPRESSION_FIXED_RATE_EXPLICIT_EXT</code>,
<code>pFixedRateFlags</code> <strong>must</strong> not be <code>NULL</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkImageCompressionControlEXT-sType-sType" href="#VUID-VkImageCompressionControlEXT-sType-sType"></a> <span class="vuid">VUID-VkImageCompressionControlEXT-sType-sType</span><br>
 <code>sType</code> <strong>must</strong> be <code>VK_STRUCTURE_TYPE_IMAGE_COMPRESSION_CONTROL_EXT</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="title">Note</div>
<div class="paragraph">
<p>Some combinations of compression properties may not be supported.
For example, some implementations may not support different fixed-rate
compression rates per plane of a multi-planar format and will not be able to
enable fixed-rate compression for any plane if the requested rates differ.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Possible values of <a href="#VkImageCompressionControlEXT">VkImageCompressionControlEXT</a>::<code>flags</code>,
specifying compression controls for an image, are:</p>
</div>
<div id="VkImageCompressionFlagBitsEXT" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_EXT_image_compression_control
typedef enum VkImageCompressionFlagBitsEXT {
    VK_IMAGE_COMPRESSION_DEFAULT_EXT = 0,
    VK_IMAGE_COMPRESSION_FIXED_RATE_DEFAULT_EXT = 0x00000001,
    VK_IMAGE_COMPRESSION_FIXED_RATE_EXPLICIT_EXT = 0x00000002,
    VK_IMAGE_COMPRESSION_DISABLED_EXT = 0x00000004,
} VkImageCompressionFlagBitsEXT;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>VK_IMAGE_COMPRESSION_DEFAULT_EXT</code> specifies that the default image
compression setting is used.
Implementations <strong>must</strong> not apply fixed-rate compression.</p>
</li>
<li>
<p><code>VK_IMAGE_COMPRESSION_FIXED_RATE_DEFAULT_EXT</code> specifies that the
implementation <strong>may</strong> choose any supported fixed-rate compression setting
in an implementation-defined manner based on the properties of the
image.</p>
</li>
<li>
<p><code>VK_IMAGE_COMPRESSION_FIXED_RATE_EXPLICIT_EXT</code> specifies that
fixed-rate compression <strong>may</strong> be used and that the allowed compression
rates are specified by
<a href="#VkImageCompressionControlEXT">VkImageCompressionControlEXT</a>::<code>pFixedRateFlags</code>.</p>
</li>
<li>
<p><code>VK_IMAGE_COMPRESSION_DISABLED_EXT</code> specifies that all lossless and
fixed-rate compression <strong>should</strong> be disabled.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>If <a href="#VkImageCompressionControlEXT">VkImageCompressionControlEXT</a>::<code>flags</code> is
<code>VK_IMAGE_COMPRESSION_FIXED_RATE_EXPLICIT_EXT</code>, then the <code>i</code><sup>th</sup>
member of the <code>pFixedRateFlags</code> array specifies the allowed compression
rates for the image&#8217;s <code>i</code><sup>th</sup> plane.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="title">Note</div>
<div class="paragraph">
<p>If <code>VK_IMAGE_COMPRESSION_DISABLED_EXT</code> is included in
<a href="#VkImageCompressionControlEXT">VkImageCompressionControlEXT</a>::<code>flags</code>, both lossless and
fixed-rate compression will be disabled.
This is likely to have a negative impact on performance and is only intended
to be used for debugging purposes.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div id="VkImageCompressionFlagsEXT" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_EXT_image_compression_control
typedef VkFlags VkImageCompressionFlagsEXT;</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>VkImageCompressionFlagsEXT</code> is a bitmask type for setting a mask of
zero or more <a href="#VkImageCompressionFlagBitsEXT">VkImageCompressionFlagBitsEXT</a>.</p>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div id="VkImageCompressionFixedRateFlagsEXT" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_EXT_image_compression_control
typedef VkFlags VkImageCompressionFixedRateFlagsEXT;</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>VkImageCompressionFixedRateFlagsEXT</code> is a bitmask type for setting a
mask of zero or more <a href="#VkImageCompressionFixedRateFlagBitsEXT">VkImageCompressionFixedRateFlagBitsEXT</a>.</p>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Bits which <strong>can</strong> be set in
<a href="#VkImageCompressionControlEXT">VkImageCompressionControlEXT</a>::<code>pFixedRateFlags</code>, specifying
allowed compression rates for an image plane, are:</p>
</div>
<div id="VkImageCompressionFixedRateFlagBitsEXT" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_EXT_image_compression_control
typedef enum VkImageCompressionFixedRateFlagBitsEXT {
    VK_IMAGE_COMPRESSION_FIXED_RATE_NONE_EXT = 0,
    VK_IMAGE_COMPRESSION_FIXED_RATE_1BPC_BIT_EXT = 0x00000001,
    VK_IMAGE_COMPRESSION_FIXED_RATE_2BPC_BIT_EXT = 0x00000002,
    VK_IMAGE_COMPRESSION_FIXED_RATE_3BPC_BIT_EXT = 0x00000004,
    VK_IMAGE_COMPRESSION_FIXED_RATE_4BPC_BIT_EXT = 0x00000008,
    VK_IMAGE_COMPRESSION_FIXED_RATE_5BPC_BIT_EXT = 0x00000010,
    VK_IMAGE_COMPRESSION_FIXED_RATE_6BPC_BIT_EXT = 0x00000020,
    VK_IMAGE_COMPRESSION_FIXED_RATE_7BPC_BIT_EXT = 0x00000040,
    VK_IMAGE_COMPRESSION_FIXED_RATE_8BPC_BIT_EXT = 0x00000080,
    VK_IMAGE_COMPRESSION_FIXED_RATE_9BPC_BIT_EXT = 0x00000100,
    VK_IMAGE_COMPRESSION_FIXED_RATE_10BPC_BIT_EXT = 0x00000200,
    VK_IMAGE_COMPRESSION_FIXED_RATE_11BPC_BIT_EXT = 0x00000400,
    VK_IMAGE_COMPRESSION_FIXED_RATE_12BPC_BIT_EXT = 0x00000800,
    VK_IMAGE_COMPRESSION_FIXED_RATE_13BPC_BIT_EXT = 0x00001000,
    VK_IMAGE_COMPRESSION_FIXED_RATE_14BPC_BIT_EXT = 0x00002000,
    VK_IMAGE_COMPRESSION_FIXED_RATE_15BPC_BIT_EXT = 0x00004000,
    VK_IMAGE_COMPRESSION_FIXED_RATE_16BPC_BIT_EXT = 0x00008000,
    VK_IMAGE_COMPRESSION_FIXED_RATE_17BPC_BIT_EXT = 0x00010000,
    VK_IMAGE_COMPRESSION_FIXED_RATE_18BPC_BIT_EXT = 0x00020000,
    VK_IMAGE_COMPRESSION_FIXED_RATE_19BPC_BIT_EXT = 0x00040000,
    VK_IMAGE_COMPRESSION_FIXED_RATE_20BPC_BIT_EXT = 0x00080000,
    VK_IMAGE_COMPRESSION_FIXED_RATE_21BPC_BIT_EXT = 0x00100000,
    VK_IMAGE_COMPRESSION_FIXED_RATE_22BPC_BIT_EXT = 0x00200000,
    VK_IMAGE_COMPRESSION_FIXED_RATE_23BPC_BIT_EXT = 0x00400000,
    VK_IMAGE_COMPRESSION_FIXED_RATE_24BPC_BIT_EXT = 0x00800000,
} VkImageCompressionFixedRateFlagBitsEXT;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>VK_IMAGE_COMPRESSION_FIXED_RATE_NONE_EXT</code> specifies that fixed-rate
compression <strong>must</strong> not be used.</p>
</li>
<li>
<p><code>VK_IMAGE_COMPRESSION_FIXED_RATE_1BPC_BIT_EXT</code> specifies that
fixed-rate compression with a bitrate of <span class="eq">[1,2)</span> bits per component
<strong>may</strong> be used.</p>
</li>
<li>
<p><code>VK_IMAGE_COMPRESSION_FIXED_RATE_2BPC_BIT_EXT</code> specifies that
fixed-rate compression with a bitrate of <span class="eq">[2,3)</span> bits per component
<strong>may</strong> be used.</p>
</li>
<li>
<p><code>VK_IMAGE_COMPRESSION_FIXED_RATE_3BPC_BIT_EXT</code> specifies that
fixed-rate compression with a bitrate of <span class="eq">[3,4)</span> bits per component
<strong>may</strong> be used.</p>
</li>
<li>
<p><code>VK_IMAGE_COMPRESSION_FIXED_RATE_4BPC_BIT_EXT</code> specifies that
fixed-rate compression with a bitrate of <span class="eq">[4,5)</span> bits per component
<strong>may</strong> be used.</p>
</li>
<li>
<p><code>VK_IMAGE_COMPRESSION_FIXED_RATE_5BPC_BIT_EXT</code> specifies that
fixed-rate compression with a bitrate of <span class="eq">[5,6)</span> bits per component
<strong>may</strong> be used.</p>
</li>
<li>
<p><code>VK_IMAGE_COMPRESSION_FIXED_RATE_6BPC_BIT_EXT</code> specifies that
fixed-rate compression with a bitrate of <span class="eq">[6,7)</span> bits per component
<strong>may</strong> be used.</p>
</li>
<li>
<p><code>VK_IMAGE_COMPRESSION_FIXED_RATE_7BPC_BIT_EXT</code> specifies that
fixed-rate compression with a bitrate of <span class="eq">[7,8)</span> bits per component
<strong>may</strong> be used.</p>
</li>
<li>
<p><code>VK_IMAGE_COMPRESSION_FIXED_RATE_8BPC_BIT_EXT</code> specifies that
fixed-rate compression with a bitrate of <span class="eq">[8,9)</span> bits per component
<strong>may</strong> be used.</p>
</li>
<li>
<p><code>VK_IMAGE_COMPRESSION_FIXED_RATE_9BPC_BIT_EXT</code> specifies that
fixed-rate compression with a bitrate of <span class="eq">[9,10)</span> bits per component
<strong>may</strong> be used.</p>
</li>
<li>
<p><code>VK_IMAGE_COMPRESSION_FIXED_RATE_10BPC_BIT_EXT</code> specifies that
fixed-rate compression with a bitrate of <span class="eq">[10,11)</span> bits per
component <strong>may</strong> be used.</p>
</li>
<li>
<p><code>VK_IMAGE_COMPRESSION_FIXED_RATE_11BPC_BIT_EXT</code> specifies that
fixed-rate compression with a bitrate of <span class="eq">[11,12)</span> bits per
component <strong>may</strong> be used.</p>
</li>
<li>
<p><code>VK_IMAGE_COMPRESSION_FIXED_RATE_12BPC_BIT_EXT</code> specifies that
fixed-rate compression with a bitrate of at least 12 bits per component
<strong>may</strong> be used.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>If the format has a different bit rate for different components,
<a href="#VkImageCompressionControlEXT">VkImageCompressionControlEXT</a>::<code>pFixedRateFlags</code> describes the rate
of the component with the largest number of bits assigned to it, scaled pro
rata.
For example, to request that a <code>VK_FORMAT_A2R10G10B10_UNORM_PACK32</code>
format be stored at a rate of 8 bits per pixel, use
<code>VK_IMAGE_COMPRESSION_FIXED_RATE_2BPC_BIT_EXT</code> (10 bits for the largest
component, stored at quarter the original size, 2.5 bits, rounded down).</p>
</div>
<div class="paragraph">
<p>If <code>flags</code> includes <code>VK_IMAGE_COMPRESSION_FIXED_RATE_EXPLICIT_EXT</code>,
and multiple bits are set in
<a href="#VkImageCompressionControlEXT">VkImageCompressionControlEXT</a>::<code>pFixedRateFlags</code> for a plane,
implementations <strong>should</strong> apply the lowest allowed bitrate that is supported.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="title">Note</div>
<div class="paragraph">
<p>The choice of &#8220;bits per component&#8221; terminology was chosen so that the same
compression rate describes the same degree of compression applied to formats
that differ only in the number of components.
For example, <code>VK_FORMAT_R8G8_UNORM</code> compressed to half its original size
is a rate of 4 bits per component, 8 bits per pixel.
<code>VK_FORMAT_R8G8B8A8_UNORM</code> compressed to half <em>its</em> original size is 4
bits per component, 16 bits per pixel.
Both of these cases can be requested with
<code>VK_IMAGE_COMPRESSION_FIXED_RATE_4BPC_BIT_EXT</code>.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>To query the compression properties of an image, add a
<a href="#VkImageCompressionPropertiesEXT">VkImageCompressionPropertiesEXT</a> structure to the <code>pNext</code> chain of
the <a href="#VkSubresourceLayout2EXT">VkSubresourceLayout2EXT</a> structure in a call to
<a href="#vkGetImageSubresourceLayout2KHR">vkGetImageSubresourceLayout2KHR</a> or
<a href="#vkGetImageSubresourceLayout2EXT">vkGetImageSubresourceLayout2EXT</a>.</p>
</div>
<div class="paragraph">
<p>To determine the compression rates that are supported for a given image
format, add a <a href="#VkImageCompressionPropertiesEXT">VkImageCompressionPropertiesEXT</a> structure to the
<code>pNext</code> chain of the <a href="capabilities.html#VkImageFormatProperties2" class="xref page">VkImageFormatProperties2</a> structure in a call
to <a href="capabilities.html#vkGetPhysicalDeviceImageFormatProperties2" class="xref page">vkGetPhysicalDeviceImageFormatProperties2</a>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="title">Note</div>
<div class="paragraph">
<p>Since fixed-rate compression is disabled by default, the
<a href="#VkImageCompressionPropertiesEXT">VkImageCompressionPropertiesEXT</a> structure passed to
<a href="capabilities.html#vkGetPhysicalDeviceImageFormatProperties2" class="xref page">vkGetPhysicalDeviceImageFormatProperties2</a> will not indicate any
fixed-rate compression support unless a <a href="#VkImageCompressionControlEXT">VkImageCompressionControlEXT</a>
structure is also included in the <code>pNext</code> chain of the
<a href="capabilities.html#VkPhysicalDeviceImageFormatInfo2" class="xref page">VkPhysicalDeviceImageFormatInfo2</a> structure passed to the same command.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The <code>VkImageCompressionPropertiesEXT</code> structure is defined as:</p>
</div>
<div id="VkImageCompressionPropertiesEXT" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_EXT_image_compression_control
typedef struct VkImageCompressionPropertiesEXT {
    VkStructureType                        sType;
    void*                                  pNext;
    VkImageCompressionFlagsEXT             imageCompressionFlags;
    VkImageCompressionFixedRateFlagsEXT    imageCompressionFixedRateFlags;
} VkImageCompressionPropertiesEXT;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is a <a href="fundamentals.html#VkStructureType" class="xref page">VkStructureType</a> value identifying this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>imageCompressionFlags</code> returns a value describing the compression
controls that apply to the image.
The value will be either <code>VK_IMAGE_COMPRESSION_DEFAULT_EXT</code> to
indicate no fixed-rate compression,
<code>VK_IMAGE_COMPRESSION_FIXED_RATE_EXPLICIT_EXT</code> to indicate
fixed-rate compression, or <code>VK_IMAGE_COMPRESSION_DISABLED_EXT</code> to
indicate no compression.</p>
</li>
<li>
<p><code>imageCompressionFixedRateFlags</code> returns a
<a href="#VkImageCompressionFixedRateFlagsEXT">VkImageCompressionFixedRateFlagsEXT</a> value describing the
compression rates that apply to the specified aspect of the image.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkImageCompressionPropertiesEXT-sType-sType" href="#VUID-VkImageCompressionPropertiesEXT-sType-sType"></a> <span class="vuid">VUID-VkImageCompressionPropertiesEXT-sType-sType</span><br>
 <code>sType</code> <strong>must</strong> be <code>VK_STRUCTURE_TYPE_IMAGE_COMPRESSION_PROPERTIES_EXT</code></p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>If the <code>pNext</code> list of <a href="#VkImageCreateInfo">VkImageCreateInfo</a> includes a
<code>VkImageAlignmentControlCreateInfoMESA</code> structure, then that structure
describes desired alignment for this image.</p>
</div>
<div class="paragraph">
<p>The <code>VkImageAlignmentControlCreateInfoMESA</code> structure is defined as:</p>
</div>
<div id="VkImageAlignmentControlCreateInfoMESA" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_MESA_image_alignment_control
typedef struct VkImageAlignmentControlCreateInfoMESA {
    VkStructureType    sType;
    const void*        pNext;
    uint32_t           maximumRequestedAlignment;
} VkImageAlignmentControlCreateInfoMESA;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is a <a href="fundamentals.html#VkStructureType" class="xref page">VkStructureType</a> value identifying this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>maximumRequestedAlignment</code> specifies the maximum alignment for the
image.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>If <code>maximumRequestedAlignment</code> is not 0, the implementation <strong>should</strong>
choose an image memory layout that requires an alignment no larger than
<code>maximumRequestedAlignment</code> as reported in
<a href="#VkMemoryRequirements">VkMemoryRequirements</a>::<code>alignment</code>.
If such a layout does not exist for the given image creation parameters, the
implementation <strong>should</strong> return the smallest alignment which is supported in
<a href="#VkMemoryRequirements">VkMemoryRequirements</a>.</p>
</div>
<div class="paragraph">
<p>If an implementation needs to disable image compression for
<code>maximumRequestedAlignment</code> to be honored -
where a larger alignment would enable image compression -
the implementation <strong>should</strong> not use <code>maximumRequestedAlignment</code>, and
<strong>should</strong> return the smallest alignment which does not compromise compression.
If <a href="features.html#features-imageCompressionControl" class="xref page"><code>imageCompressionControl</code></a> is
enabled, the application <strong>can</strong> chain a <a href="#VkImageCompressionControlEXT">VkImageCompressionControlEXT</a>
with <code>VK_IMAGE_COMPRESSION_DISABLED_EXT</code>.
In this case, image compression considerations <strong>should</strong> not apply when
implementation decides alignment.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkImageAlignmentControlCreateInfoMESA-maximumRequestedAlignment-09655" href="#VUID-VkImageAlignmentControlCreateInfoMESA-maximumRequestedAlignment-09655"></a> <span class="vuid">VUID-VkImageAlignmentControlCreateInfoMESA-maximumRequestedAlignment-09655</span><br>

If <code>maximumRequestedAlignment</code> is not 0,
<code>maximumRequestedAlignment</code> <strong>must</strong> be a power of two</p>
</li>
<li>
<p><a id="VUID-VkImageAlignmentControlCreateInfoMESA-maximumRequestedAlignment-09656" href="#VUID-VkImageAlignmentControlCreateInfoMESA-maximumRequestedAlignment-09656"></a> <span class="vuid">VUID-VkImageAlignmentControlCreateInfoMESA-maximumRequestedAlignment-09656</span><br>

If <code>maximumRequestedAlignment</code> is not 0, the bitwise-and of
<code>maximumRequestedAlignment</code> and
<a href="limits.html#limits-supportedImageAlignmentMask" class="xref page"><code>supportedImageAlignmentMask</code></a>
<strong>must</strong> be non-zero</p>
</li>
<li>
<p><a id="VUID-VkImageAlignmentControlCreateInfoMESA-imageAlignmentControl-09657" href="#VUID-VkImageAlignmentControlCreateInfoMESA-imageAlignmentControl-09657"></a> <span class="vuid">VUID-VkImageAlignmentControlCreateInfoMESA-imageAlignmentControl-09657</span><br>

<a href="features.html#features-imageAlignmentControl" class="xref page"><code>imageAlignmentControl</code></a> <strong>must</strong> be
enabled on the device</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkImageAlignmentControlCreateInfoMESA-sType-sType" href="#VUID-VkImageAlignmentControlCreateInfoMESA-sType-sType"></a> <span class="vuid">VUID-VkImageAlignmentControlCreateInfoMESA-sType-sType</span><br>
 <code>sType</code> <strong>must</strong> be <code>VK_STRUCTURE_TYPE_IMAGE_ALIGNMENT_CONTROL_CREATE_INFO_MESA</code></p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Bits which <strong>can</strong> be set in</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#VkImageViewUsageCreateInfo">VkImageViewUsageCreateInfo</a>::<code>usage</code></p>
</li>
<li>
<p><a href="#VkImageStencilUsageCreateInfo">VkImageStencilUsageCreateInfo</a>::<code>stencilUsage</code></p>
</li>
<li>
<p><a href="#VkImageCreateInfo">VkImageCreateInfo</a>::<code>usage</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>specify intended usage of an image, and are:</p>
</div>
<div id="VkImageUsageFlagBits" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_VERSION_1_0
typedef enum VkImageUsageFlagBits {
    VK_IMAGE_USAGE_TRANSFER_SRC_BIT = 0x00000001,
    VK_IMAGE_USAGE_TRANSFER_DST_BIT = 0x00000002,
    VK_IMAGE_USAGE_SAMPLED_BIT = 0x00000004,
    VK_IMAGE_USAGE_STORAGE_BIT = 0x00000008,
    VK_IMAGE_USAGE_COLOR_ATTACHMENT_BIT = 0x00000010,
    VK_IMAGE_USAGE_DEPTH_STENCIL_ATTACHMENT_BIT = 0x00000020,
    VK_IMAGE_USAGE_TRANSIENT_ATTACHMENT_BIT = 0x00000040,
    VK_IMAGE_USAGE_INPUT_ATTACHMENT_BIT = 0x00000080,
  // Provided by VK_KHR_video_decode_queue
    VK_IMAGE_USAGE_VIDEO_DECODE_DST_BIT_KHR = 0x00000400,
  // Provided by VK_KHR_video_decode_queue
    VK_IMAGE_USAGE_VIDEO_DECODE_SRC_BIT_KHR = 0x00000800,
  // Provided by VK_KHR_video_decode_queue
    VK_IMAGE_USAGE_VIDEO_DECODE_DPB_BIT_KHR = 0x00001000,
  // Provided by VK_EXT_fragment_density_map
    VK_IMAGE_USAGE_FRAGMENT_DENSITY_MAP_BIT_EXT = 0x00000200,
  // Provided by VK_KHR_fragment_shading_rate
    VK_IMAGE_USAGE_FRAGMENT_SHADING_RATE_ATTACHMENT_BIT_KHR = 0x00000100,
  // Provided by VK_EXT_host_image_copy
    VK_IMAGE_USAGE_HOST_TRANSFER_BIT_EXT = 0x00400000,
  // Provided by VK_KHR_video_encode_queue
    VK_IMAGE_USAGE_VIDEO_ENCODE_DST_BIT_KHR = 0x00002000,
  // Provided by VK_KHR_video_encode_queue
    VK_IMAGE_USAGE_VIDEO_ENCODE_SRC_BIT_KHR = 0x00004000,
  // Provided by VK_KHR_video_encode_queue
    VK_IMAGE_USAGE_VIDEO_ENCODE_DPB_BIT_KHR = 0x00008000,
  // Provided by VK_EXT_attachment_feedback_loop_layout
    VK_IMAGE_USAGE_ATTACHMENT_FEEDBACK_LOOP_BIT_EXT = 0x00080000,
  // Provided by VK_HUAWEI_invocation_mask
    VK_IMAGE_USAGE_INVOCATION_MASK_BIT_HUAWEI = 0x00040000,
  // Provided by VK_QCOM_image_processing
    VK_IMAGE_USAGE_SAMPLE_WEIGHT_BIT_QCOM = 0x00100000,
  // Provided by VK_QCOM_image_processing
    VK_IMAGE_USAGE_SAMPLE_BLOCK_MATCH_BIT_QCOM = 0x00200000,
  // Provided by VK_NV_shading_rate_image
    VK_IMAGE_USAGE_SHADING_RATE_IMAGE_BIT_NV = VK_IMAGE_USAGE_FRAGMENT_SHADING_RATE_ATTACHMENT_BIT_KHR,
} VkImageUsageFlagBits;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>VK_IMAGE_USAGE_TRANSFER_SRC_BIT</code> specifies that the image <strong>can</strong> be
used as the source of a transfer command.</p>
</li>
<li>
<p><code>VK_IMAGE_USAGE_TRANSFER_DST_BIT</code> specifies that the image <strong>can</strong> be
used as the destination of a transfer command.</p>
</li>
<li>
<p><code>VK_IMAGE_USAGE_SAMPLED_BIT</code> specifies that the image <strong>can</strong> be used
to create a <code>VkImageView</code> suitable for occupying a
<code>VkDescriptorSet</code> slot either of type
<code>VK_DESCRIPTOR_TYPE_SAMPLED_IMAGE</code> or
<code>VK_DESCRIPTOR_TYPE_COMBINED_IMAGE_SAMPLER</code>, and be sampled by a
shader.</p>
</li>
<li>
<p><code>VK_IMAGE_USAGE_STORAGE_BIT</code> specifies that the image <strong>can</strong> be used
to create a <code>VkImageView</code> suitable for occupying a
<code>VkDescriptorSet</code> slot of type
<code>VK_DESCRIPTOR_TYPE_STORAGE_IMAGE</code>.</p>
</li>
<li>
<p><code>VK_IMAGE_USAGE_COLOR_ATTACHMENT_BIT</code> specifies that the image <strong>can</strong>
be used to create a <code>VkImageView</code> suitable for use as a color or
resolve attachment in a <code>VkFramebuffer</code>.</p>
</li>
<li>
<p><code>VK_IMAGE_USAGE_DEPTH_STENCIL_ATTACHMENT_BIT</code> specifies that the
image <strong>can</strong> be used to create a <code>VkImageView</code> suitable for use as a
depth/stencil
or depth/stencil resolve
attachment in a <code>VkFramebuffer</code>.</p>
</li>
<li>
<p><code>VK_IMAGE_USAGE_TRANSIENT_ATTACHMENT_BIT</code> specifies that
implementations <strong>may</strong> support using <a href="memory.html#memory" class="xref page">memory allocations</a> with
the <code>VK_MEMORY_PROPERTY_LAZILY_ALLOCATED_BIT</code> to back an image with
this usage.
This bit <strong>can</strong> be set for any image that <strong>can</strong> be used to create a
<code>VkImageView</code> suitable for use as a color, resolve, depth/stencil,
or input attachment.</p>
</li>
<li>
<p><code>VK_IMAGE_USAGE_INPUT_ATTACHMENT_BIT</code> specifies that the image <strong>can</strong>
be used to create a <code>VkImageView</code> suitable for occupying
<code>VkDescriptorSet</code> slot of type
<code>VK_DESCRIPTOR_TYPE_INPUT_ATTACHMENT</code>; be read from a shader as an
input attachment; and be used as an input attachment in a framebuffer.</p>
</li>
<li>
<p><code>VK_IMAGE_USAGE_FRAGMENT_DENSITY_MAP_BIT_EXT</code> specifies that the
image <strong>can</strong> be used to create a <code>VkImageView</code> suitable for use as a
<a href="fragmentdensitymapops.html#fragmentdensitymapops" class="xref page">fragment density map image</a>.</p>
</li>
<li>
<p><code>VK_IMAGE_USAGE_FRAGMENT_SHADING_RATE_ATTACHMENT_BIT_KHR</code> specifies
    that the image <strong>can</strong> be used to create a <code>VkImageView</code> suitable for
    use as a
    <a href="primsrast.html#primsrast-fragment-shading-rate-attachment" class="xref page">fragment shading rate    attachment</a>
or
    <a href="primsrast.html#primsrast-shading-rate-image" class="xref page">shading rate image</a></p>
</li>
<li>
<p><code>VK_IMAGE_USAGE_VIDEO_DECODE_DST_BIT_KHR</code> specifies that the image
<strong>can</strong> be used as a <a href="videocoding.html#decode-output-picture" class="xref page">decode output picture</a> in a
<a href="videocoding.html#video-decode-operations" class="xref page">video decode operation</a>.</p>
</li>
<li>
<p><code>VK_IMAGE_USAGE_VIDEO_DECODE_SRC_BIT_KHR</code> is reserved for future
use.</p>
</li>
<li>
<p><code>VK_IMAGE_USAGE_VIDEO_DECODE_DPB_BIT_KHR</code> specifies that the image
<strong>can</strong> be used as an output <a href="videocoding.html#reconstructed-picture" class="xref page">reconstructed    picture</a> or an input <a href="videocoding.html#reference-picture" class="xref page">reference picture</a> in a
<a href="videocoding.html#video-decode-operations" class="xref page">video decode operation</a>.</p>
</li>
<li>
<p><code>VK_IMAGE_USAGE_VIDEO_ENCODE_DST_BIT_KHR</code> is reserved for future
use.</p>
</li>
<li>
<p><code>VK_IMAGE_USAGE_VIDEO_ENCODE_SRC_BIT_KHR</code> specifies that the image
<strong>can</strong> be used as an <a href="videocoding.html#encode-input-picture" class="xref page">encode input picture</a> in a
<a href="videocoding.html#video-encode-operations" class="xref page">video encode operation</a>.</p>
</li>
<li>
<p><code>VK_IMAGE_USAGE_VIDEO_ENCODE_DPB_BIT_KHR</code> specifies that the image
<strong>can</strong> be used as an output <a href="videocoding.html#reconstructed-picture" class="xref page">reconstructed    picture</a> or an input <a href="videocoding.html#reference-picture" class="xref page">reference picture</a> in a
<a href="videocoding.html#video-encode-operations" class="xref page">video encode operation</a>.</p>
</li>
<li>
<p><code>VK_IMAGE_USAGE_ATTACHMENT_FEEDBACK_LOOP_BIT_EXT</code> specifies that the
image <strong>can</strong> be transitioned to the
<code>VK_IMAGE_LAYOUT_ATTACHMENT_FEEDBACK_LOOP_OPTIMAL_EXT</code> layout to be
used as a color or depth/stencil attachment in a <code>VkFramebuffer</code>
and/or as a read-only input resource in a shader (sampled image,
combined image sampler or input attachment) in the same render pass.</p>
</li>
<li>
<p><code>VK_IMAGE_USAGE_HOST_TRANSFER_BIT_EXT</code> specifies that the image <strong>can</strong>
be used with host copy commands and host layout transitions.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div id="VkImageUsageFlags" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_VERSION_1_0
typedef VkFlags VkImageUsageFlags;</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>VkImageUsageFlags</code> is a bitmask type for setting a mask of zero or more
<a href="#VkImageUsageFlagBits">VkImageUsageFlagBits</a>.</p>
</div>
<div id="valid-imageview-imageusage" class="paragraph">
<p>When creating a <code>VkImageView</code> one of the following
<a href="#VkImageUsageFlagBits">VkImageUsageFlagBits</a> <strong>must</strong> be set:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>VK_IMAGE_USAGE_SAMPLED_BIT</code></p>
</li>
<li>
<p><code>VK_IMAGE_USAGE_STORAGE_BIT</code></p>
</li>
<li>
<p><code>VK_IMAGE_USAGE_COLOR_ATTACHMENT_BIT</code></p>
</li>
<li>
<p><code>VK_IMAGE_USAGE_DEPTH_STENCIL_ATTACHMENT_BIT</code></p>
</li>
<li>
<p><code>VK_IMAGE_USAGE_INPUT_ATTACHMENT_BIT</code></p>
</li>
<li>
<p><code>VK_IMAGE_USAGE_TRANSIENT_ATTACHMENT_BIT</code></p>
</li>
<li>
<p><code>VK_IMAGE_USAGE_FRAGMENT_SHADING_RATE_ATTACHMENT_BIT_KHR</code></p>
</li>
<li>
<p><code>VK_IMAGE_USAGE_FRAGMENT_DENSITY_MAP_BIT_EXT</code></p>
</li>
<li>
<p><code>VK_IMAGE_USAGE_VIDEO_DECODE_DST_BIT_KHR</code></p>
</li>
<li>
<p><code>VK_IMAGE_USAGE_VIDEO_DECODE_DPB_BIT_KHR</code></p>
</li>
<li>
<p><code>VK_IMAGE_USAGE_VIDEO_ENCODE_SRC_BIT_KHR</code></p>
</li>
<li>
<p><code>VK_IMAGE_USAGE_VIDEO_ENCODE_DPB_BIT_KHR</code></p>
</li>
<li>
<p><code>VK_IMAGE_USAGE_SAMPLE_WEIGHT_BIT_QCOM</code></p>
</li>
<li>
<p><code>VK_IMAGE_USAGE_SAMPLE_BLOCK_MATCH_BIT_QCOM</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Bits which <strong>can</strong> be set in <a href="#VkImageCreateInfo">VkImageCreateInfo</a>::<code>flags</code>, specifying
additional parameters of an image, are:</p>
</div>
<div id="VkImageCreateFlagBits" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_VERSION_1_0
typedef enum VkImageCreateFlagBits {
    VK_IMAGE_CREATE_SPARSE_BINDING_BIT = 0x00000001,
    VK_IMAGE_CREATE_SPARSE_RESIDENCY_BIT = 0x00000002,
    VK_IMAGE_CREATE_SPARSE_ALIASED_BIT = 0x00000004,
    VK_IMAGE_CREATE_MUTABLE_FORMAT_BIT = 0x00000008,
    VK_IMAGE_CREATE_CUBE_COMPATIBLE_BIT = 0x00000010,
  // Provided by VK_VERSION_1_1
    VK_IMAGE_CREATE_ALIAS_BIT = 0x00000400,
  // Provided by VK_VERSION_1_1
    VK_IMAGE_CREATE_SPLIT_INSTANCE_BIND_REGIONS_BIT = 0x00000040,
  // Provided by VK_VERSION_1_1
    VK_IMAGE_CREATE_2D_ARRAY_COMPATIBLE_BIT = 0x00000020,
  // Provided by VK_VERSION_1_1
    VK_IMAGE_CREATE_BLOCK_TEXEL_VIEW_COMPATIBLE_BIT = 0x00000080,
  // Provided by VK_VERSION_1_1
    VK_IMAGE_CREATE_EXTENDED_USAGE_BIT = 0x00000100,
  // Provided by VK_VERSION_1_1
    VK_IMAGE_CREATE_PROTECTED_BIT = 0x00000800,
  // Provided by VK_VERSION_1_1
    VK_IMAGE_CREATE_DISJOINT_BIT = 0x00000200,
  // Provided by VK_NV_corner_sampled_image
    VK_IMAGE_CREATE_CORNER_SAMPLED_BIT_NV = 0x00002000,
  // Provided by VK_EXT_sample_locations
    VK_IMAGE_CREATE_SAMPLE_LOCATIONS_COMPATIBLE_DEPTH_BIT_EXT = 0x00001000,
  // Provided by VK_EXT_fragment_density_map
    VK_IMAGE_CREATE_SUBSAMPLED_BIT_EXT = 0x00004000,
  // Provided by VK_EXT_descriptor_buffer
    VK_IMAGE_CREATE_DESCRIPTOR_BUFFER_CAPTURE_REPLAY_BIT_EXT = 0x00010000,
  // Provided by VK_EXT_multisampled_render_to_single_sampled
    VK_IMAGE_CREATE_MULTISAMPLED_RENDER_TO_SINGLE_SAMPLED_BIT_EXT = 0x00040000,
  // Provided by VK_EXT_image_2d_view_of_3d
    VK_IMAGE_CREATE_2D_VIEW_COMPATIBLE_BIT_EXT = 0x00020000,
  // Provided by VK_QCOM_fragment_density_map_offset
    VK_IMAGE_CREATE_FRAGMENT_DENSITY_MAP_OFFSET_BIT_QCOM = 0x00008000,
  // Provided by VK_KHR_video_maintenance1
    VK_IMAGE_CREATE_VIDEO_PROFILE_INDEPENDENT_BIT_KHR = 0x00100000,
  // Provided by VK_KHR_bind_memory2 with VK_KHR_device_group
    VK_IMAGE_CREATE_SPLIT_INSTANCE_BIND_REGIONS_BIT_KHR = VK_IMAGE_CREATE_SPLIT_INSTANCE_BIND_REGIONS_BIT,
  // Provided by VK_KHR_maintenance1
    VK_IMAGE_CREATE_2D_ARRAY_COMPATIBLE_BIT_KHR = VK_IMAGE_CREATE_2D_ARRAY_COMPATIBLE_BIT,
  // Provided by VK_KHR_maintenance2
    VK_IMAGE_CREATE_BLOCK_TEXEL_VIEW_COMPATIBLE_BIT_KHR = VK_IMAGE_CREATE_BLOCK_TEXEL_VIEW_COMPATIBLE_BIT,
  // Provided by VK_KHR_maintenance2
    VK_IMAGE_CREATE_EXTENDED_USAGE_BIT_KHR = VK_IMAGE_CREATE_EXTENDED_USAGE_BIT,
  // Provided by VK_KHR_sampler_ycbcr_conversion
    VK_IMAGE_CREATE_DISJOINT_BIT_KHR = VK_IMAGE_CREATE_DISJOINT_BIT,
  // Provided by VK_KHR_bind_memory2
    VK_IMAGE_CREATE_ALIAS_BIT_KHR = VK_IMAGE_CREATE_ALIAS_BIT,
} VkImageCreateFlagBits;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>VK_IMAGE_CREATE_SPARSE_BINDING_BIT</code> specifies that the image will
be backed using sparse memory binding.</p>
</li>
<li>
<p><code>VK_IMAGE_CREATE_SPARSE_RESIDENCY_BIT</code> specifies that the image <strong>can</strong>
be partially backed using sparse memory binding.
Images created with this flag <strong>must</strong> also be created with the
<code>VK_IMAGE_CREATE_SPARSE_BINDING_BIT</code> flag.</p>
</li>
<li>
<p><code>VK_IMAGE_CREATE_SPARSE_ALIASED_BIT</code> specifies that the image will
be backed using sparse memory binding with memory ranges that might also
simultaneously be backing another image (or another portion of the same
image).
Images created with this flag <strong>must</strong> also be created with the
<code>VK_IMAGE_CREATE_SPARSE_BINDING_BIT</code> flag.</p>
</li>
<li>
<p><code>VK_IMAGE_CREATE_MUTABLE_FORMAT_BIT</code> specifies that the image <strong>can</strong>
be used to create a <code>VkImageView</code> with a different format from the
image.
For <a href="formats.html#formats-requiring-sampler-ycbcr-conversion" class="xref page">multi-planar</a> formats,
<code>VK_IMAGE_CREATE_MUTABLE_FORMAT_BIT</code> specifies that a
<code>VkImageView</code> can be created of a <em>plane</em> of the image.</p>
</li>
<li>
<p><code>VK_IMAGE_CREATE_CUBE_COMPATIBLE_BIT</code> specifies that the image <strong>can</strong>
be used to create a <code>VkImageView</code> of type
<code>VK_IMAGE_VIEW_TYPE_CUBE</code> or <code>VK_IMAGE_VIEW_TYPE_CUBE_ARRAY</code>.</p>
</li>
<li>
<p><code>VK_IMAGE_CREATE_2D_ARRAY_COMPATIBLE_BIT</code> specifies that the image
<strong>can</strong> be used to create a <code>VkImageView</code> of type
<code>VK_IMAGE_VIEW_TYPE_2D</code> or <code>VK_IMAGE_VIEW_TYPE_2D_ARRAY</code>.</p>
</li>
<li>
<p><code>VK_IMAGE_CREATE_2D_VIEW_COMPATIBLE_BIT_EXT</code> specifies that the
image <strong>can</strong> be used to create a <code>VkImageView</code> of type
<code>VK_IMAGE_VIEW_TYPE_2D</code>.</p>
</li>
<li>
<p><code>VK_IMAGE_CREATE_PROTECTED_BIT</code> specifies that the image is a
protected image.</p>
</li>
<li>
<p><code>VK_IMAGE_CREATE_SPLIT_INSTANCE_BIND_REGIONS_BIT</code> specifies that the
image <strong>can</strong> be used with a non-zero value of the
<code>splitInstanceBindRegionCount</code> member of a
<a href="#VkBindImageMemoryDeviceGroupInfo">VkBindImageMemoryDeviceGroupInfo</a> structure passed into
<a href="#vkBindImageMemory2">vkBindImageMemory2</a>.
This flag also has the effect of making the image use the standard
sparse image block dimensions.</p>
</li>
<li>
<p><code>VK_IMAGE_CREATE_BLOCK_TEXEL_VIEW_COMPATIBLE_BIT</code> specifies that the
image having a compressed format <strong>can</strong> be used to create a
<code>VkImageView</code> with an uncompressed format where each texel in the
image view corresponds to a compressed texel block of the image.</p>
</li>
<li>
<p><code>VK_IMAGE_CREATE_EXTENDED_USAGE_BIT</code> specifies that the image <strong>can</strong>
be created with usage flags that are not supported for the format the
image is created with but are supported for at least one format a
<code>VkImageView</code> created from the image <strong>can</strong> have.</p>
</li>
<li>
<p><code>VK_IMAGE_CREATE_DISJOINT_BIT</code> specifies that an image with a
<a href="formats.html#formats-requiring-sampler-ycbcr-conversion" class="xref page">multi-planar format</a> <strong>must</strong>
have each plane separately bound to memory, rather than having a single
memory binding for the whole image; the presence of this bit
distinguishes a <em>disjoint image</em> from an image without this bit set.</p>
</li>
<li>
<p><code>VK_IMAGE_CREATE_ALIAS_BIT</code> specifies that two images created with
    the same creation parameters and aliased to the same memory <strong>can</strong>
    interpret the contents of the memory consistently with each other,
    subject to the rules described in the <a href="#resources-memory-aliasing">Memory    Aliasing</a> section.
    This flag further specifies that each plane of a <em>disjoint</em> image <strong>can</strong>
    share an in-memory non-linear representation with single-plane images,
    and that a single-plane image <strong>can</strong> share an in-memory non-linear
    representation with a plane of a multi-planar disjoint image, according
    to the rules in <a href="formats.html#formats-compatible-planes" class="xref page">Compatible Formats of Planes of Multi-Planar Formats</a>.
    If the <code>pNext</code> chain includes a
<a href="#VkExternalMemoryImageCreateInfo">VkExternalMemoryImageCreateInfo</a>
or
<a href="#VkExternalMemoryImageCreateInfoNV">VkExternalMemoryImageCreateInfoNV</a>
    structure whose <code>handleTypes</code> member is not <code>0</code>, it is as if
    <code>VK_IMAGE_CREATE_ALIAS_BIT</code> is set.</p>
</li>
<li>
<p><code>VK_IMAGE_CREATE_SAMPLE_LOCATIONS_COMPATIBLE_DEPTH_BIT_EXT</code>
specifies that an image with a depth or depth/stencil format <strong>can</strong> be
used with custom sample locations when used as a depth/stencil
attachment.</p>
</li>
<li>
<p><code>VK_IMAGE_CREATE_CORNER_SAMPLED_BIT_NV</code> specifies that the image is
a <a href="#resources-images-corner-sampled">corner-sampled image</a>.</p>
</li>
<li>
<p><code>VK_IMAGE_CREATE_SUBSAMPLED_BIT_EXT</code> specifies that an image <strong>can</strong> be
in a subsampled format which <strong>may</strong> be more optimal when written as an
attachment by a render pass that has a fragment density map attachment.
Accessing a subsampled image has additional considerations:</p>
<div class="ulist">
<ul>
<li>
<p>Image data read as an image sampler will have <strong>undefined</strong> values if the
sampler was not created with <code>flags</code> containing
<code>VK_SAMPLER_CREATE_SUBSAMPLED_BIT_EXT</code> or was not sampled through
the use of a combined image sampler with an immutable sampler in
<code>VkDescriptorSetLayoutBinding</code>.</p>
</li>
<li>
<p>Image data read with an input attachment will have <strong>undefined</strong> values if
the contents were not written as an attachment in an earlier subpass of
the same render pass.</p>
</li>
<li>
<p>Image data read as an image sampler in the fragment shader will be
additionally be read by the device during
<code>VK_PIPELINE_STAGE_VERTEX_SHADER_BIT</code> if
<a href="limits.html#limits-subsampledCoarseReconstructionEarlyAccess" class="xref page">     <code>VkPhysicalDeviceFragmentDensityMap2PropertiesEXT</code>::<code>subsampledCoarseReconstructionEarlyAccess</code></a>
is <code>VK_TRUE</code> and the sampler was created with <code>flags</code>
containing
<code>VK_SAMPLER_CREATE_SUBSAMPLED_COARSE_RECONSTRUCTION_BIT_EXT</code>.</p>
</li>
<li>
<p>Image data read with load operations are resampled to the fragment
density of the render pass if <a href="limits.html#limits-subsampledLoads" class="xref page">     <code>VkPhysicalDeviceFragmentDensityMap2PropertiesEXT</code>::<code>subsampledLoads</code></a>
is <code>VK_TRUE</code>.
Otherwise, values of image data are <strong>undefined</strong>.</p>
</li>
<li>
<p>Image contents outside of the render area take on <strong>undefined</strong> values if
the image is stored as a render pass attachment.</p>
</li>
</ul>
</div>
</li>
<li>
<p><code>VK_IMAGE_CREATE_FRAGMENT_DENSITY_MAP_OFFSET_BIT_QCOM</code> specifies
that an image <strong>can</strong> be used in a render pass with non-zero
<a href="renderpass.html#renderpass-fragmentdensitymapoffsets" class="xref page">fragment density map offsets</a>.
In a render pass with non-zero offsets, fragment density map
attachments, input attachments, color attachments, depth/stencil
attachment, resolve attachments, and preserve attachments <strong>must</strong> be
created with <code>VK_IMAGE_CREATE_FRAGMENT_DENSITY_MAP_OFFSET_BIT_QCOM</code>.</p>
</li>
<li>
<p><code>VK_IMAGE_CREATE_DESCRIPTOR_BUFFER_CAPTURE_REPLAY_BIT_EXT</code> specifies
that the image <strong>can</strong> be used with descriptor buffers when capturing and
replaying (e.g. for trace capture and replay), see
<a href="descriptorsets.html#VkOpaqueCaptureDescriptorDataCreateInfoEXT" class="xref page">VkOpaqueCaptureDescriptorDataCreateInfoEXT</a> for more detail.</p>
</li>
<li>
<p><code>VK_IMAGE_CREATE_MULTISAMPLED_RENDER_TO_SINGLE_SAMPLED_BIT_EXT</code>
specifies that an image <strong>can</strong> be used with
<a href="renderpass.html#multisampled-render-to-single-sampled" class="xref page">multisampled rendering as a    single-sampled framebuffer attachment</a></p>
</li>
<li>
<p><code>VK_IMAGE_CREATE_VIDEO_PROFILE_INDEPENDENT_BIT_KHR</code> specifies that
the image <strong>can</strong> be used in <a href="videocoding.html#video-coding" class="xref page">video coding operations</a>
without having to specify at image creation time the set of video
profiles the image will be used with, except for images used only as
<a href="videocoding.html#dpb" class="xref page">DPB</a> pictures, as long as the image is otherwise
<a href="videocoding.html#video-profile-compatibility" class="xref page">compatible</a> with the video profile in
question.</p>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="title">Note</div>
<div class="paragraph">
<p>This enables exchanging video picture data without additional copies or
conversions when used as:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="videocoding.html#decode-output-picture" class="xref page">Decode output pictures</a>, indifferent of the
video profile used to produce them.</p>
</li>
<li>
<p><a href="videocoding.html#encode-input-picture" class="xref page">Encode input pictures</a>, indifferent of the video
profile used to consume them.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>This includes images created with both
<code>VK_IMAGE_USAGE_VIDEO_DECODE_DST_BIT_KHR</code> and
<code>VK_IMAGE_USAGE_VIDEO_DECODE_DPB_BIT_KHR</code>, which is necessary to use the
same video picture as the <a href="videocoding.html#reconstructed-picture" class="xref page">reconstructed picture</a>
and <a href="videocoding.html#decode-output-picture" class="xref page">decode output picture</a> in a video decode
operation on implementations supporting
<code>VK_VIDEO_DECODE_CAPABILITY_DPB_AND_OUTPUT_COINCIDE_BIT_KHR</code>.</p>
</div>
<div class="paragraph">
<p>However, images with only DPB usage remain tied to the video profiles the
image was created with, as the data layout of such DPB-only images <strong>may</strong> be
implementation- and codec-dependent.</p>
</div>
<div class="paragraph">
<p>If an application would like to share or reuse the device memory backing
such images (e.g. for the purposes of temporal aliasing), then it <strong>should</strong>
create separate image objects for each video profile and bind them to the
same underlying device memory range, similar to how memory resources <strong>can</strong> be
shared across separate video sessions or any other memory-backed resource.</p>
</div>
</td>
</tr>
</table>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>See <a href="sparsemem.html#sparsememory-sparseresourcefeatures" class="xref page">Sparse Resource Features</a> and
<a href="sparsemem.html#sparsememory-physicalfeatures" class="xref page">Sparse Physical Device Features</a> for more
details.</p>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div id="VkImageCreateFlags" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_VERSION_1_0
typedef VkFlags VkImageCreateFlags;</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>VkImageCreateFlags</code> is a bitmask type for setting a mask of zero or
more <a href="#VkImageCreateFlagBits">VkImageCreateFlagBits</a>.</p>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Possible values of <a href="#VkImageCreateInfo">VkImageCreateInfo</a>::<code>imageType</code>, specifying the
basic dimensionality of an image, are:</p>
</div>
<div id="VkImageType" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_VERSION_1_0
typedef enum VkImageType {
    VK_IMAGE_TYPE_1D = 0,
    VK_IMAGE_TYPE_2D = 1,
    VK_IMAGE_TYPE_3D = 2,
} VkImageType;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>VK_IMAGE_TYPE_1D</code> specifies a one-dimensional image.</p>
</li>
<li>
<p><code>VK_IMAGE_TYPE_2D</code> specifies a two-dimensional image.</p>
</li>
<li>
<p><code>VK_IMAGE_TYPE_3D</code> specifies a three-dimensional image.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Possible values of <a href="#VkImageCreateInfo">VkImageCreateInfo</a>::<code>tiling</code>, specifying the
tiling arrangement of texel blocks in an image, are:</p>
</div>
<div id="VkImageTiling" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_VERSION_1_0
typedef enum VkImageTiling {
    VK_IMAGE_TILING_OPTIMAL = 0,
    VK_IMAGE_TILING_LINEAR = 1,
  // Provided by VK_EXT_image_drm_format_modifier
    VK_IMAGE_TILING_DRM_FORMAT_MODIFIER_EXT = 1000158000,
} VkImageTiling;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>VK_IMAGE_TILING_OPTIMAL</code> specifies optimal tiling (texels are laid
out in an implementation-dependent arrangement, for more efficient
memory access).</p>
</li>
<li>
<p><code>VK_IMAGE_TILING_LINEAR</code> specifies linear tiling (texels are laid
out in memory in row-major order, possibly with some padding on each
row).</p>
</li>
<li>
<p><code>VK_IMAGE_TILING_DRM_FORMAT_MODIFIER_EXT</code> indicates that the image&#8217;s
tiling is defined by a <a href="../appendices/glossary.html#glossary-drm-format-modifier" class="xref page">Linux DRM format    modifier</a>.
The modifier is specified at image creation with
<a href="#VkImageDrmFormatModifierListCreateInfoEXT">VkImageDrmFormatModifierListCreateInfoEXT</a> or
<a href="#VkImageDrmFormatModifierExplicitCreateInfoEXT">VkImageDrmFormatModifierExplicitCreateInfoEXT</a>, and <strong>can</strong> be queried
with <a href="#vkGetImageDrmFormatModifierPropertiesEXT">vkGetImageDrmFormatModifierPropertiesEXT</a>.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>To query the memory layout of an image subresource, call:</p>
</div>
<div id="vkGetImageSubresourceLayout" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_VERSION_1_0
void vkGetImageSubresourceLayout(
    VkDevice                                    device,
    VkImage                                     image,
    const VkImageSubresource*                   pSubresource,
    VkSubresourceLayout*                        pLayout);</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>device</code> is the logical device that owns the image.</p>
</li>
<li>
<p><code>image</code> is the image whose layout is being queried.</p>
</li>
<li>
<p><code>pSubresource</code> is a pointer to a <a href="#VkImageSubresource">VkImageSubresource</a> structure
selecting a specific image subresource from the image.</p>
</li>
<li>
<p><code>pLayout</code> is a pointer to a <a href="#VkSubresourceLayout">VkSubresourceLayout</a> structure in
which the layout is returned.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>If the image is <a href="../appendices/glossary.html#glossary-linear-resource" class="xref page">linear</a>, then the
returned layout is valid for <a href="memory.html#memory-device-hostaccess" class="xref page">host access</a>.</p>
</div>
<div class="paragraph">
<p>If the image&#8217;s
tiling is <code>VK_IMAGE_TILING_LINEAR</code> and its
format is a <a href="formats.html#formats-requiring-sampler-ycbcr-conversion" class="xref page">multi-planar format</a>, then <code>vkGetImageSubresourceLayout</code> describes one
<em>format plane</em>
of the image.
If the image&#8217;s tiling is <code>VK_IMAGE_TILING_DRM_FORMAT_MODIFIER_EXT</code>, then
<code>vkGetImageSubresourceLayout</code> describes one <em>memory plane</em> of the image.
If the image&#8217;s tiling is <code>VK_IMAGE_TILING_DRM_FORMAT_MODIFIER_EXT</code> and
the image is <a href="../appendices/glossary.html#glossary-linear-resource" class="xref page">non-linear</a>, then the returned
layout has an implementation-dependent meaning; the vendor of the image&#8217;s
<a href="../appendices/glossary.html#glossary-drm-format-modifier" class="xref page">DRM format modifier</a> <strong>may</strong> provide
documentation that explains how to interpret the returned layout.</p>
</div>
<div class="paragraph">
<p><code>vkGetImageSubresourceLayout</code> is invariant for the lifetime of a single
image.
However, the subresource layout of images in Android hardware buffer or QNX
Screen buffer external memory is not known until the image has been bound to
memory, so applications <strong>must</strong> not call <a href="#vkGetImageSubresourceLayout">vkGetImageSubresourceLayout</a> for
such an image before it has been bound.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkGetImageSubresourceLayout-image-07790" href="#VUID-vkGetImageSubresourceLayout-image-07790"></a> <span class="vuid">VUID-vkGetImageSubresourceLayout-image-07790</span><br>

<code>image</code> <strong>must</strong> have been created with <code>tiling</code> equal to
<code>VK_IMAGE_TILING_LINEAR</code> or
<code>VK_IMAGE_TILING_DRM_FORMAT_MODIFIER_EXT</code></p>
</li>
</ul>
</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkGetImageSubresourceLayout-aspectMask-00997" href="#VUID-vkGetImageSubresourceLayout-aspectMask-00997"></a> <span class="vuid">VUID-vkGetImageSubresourceLayout-aspectMask-00997</span><br>

The <code>aspectMask</code> member of <code>pSubresource</code> <strong>must</strong> only have a
single bit set</p>
</li>
<li>
<p><a id="VUID-vkGetImageSubresourceLayout-mipLevel-01716" href="#VUID-vkGetImageSubresourceLayout-mipLevel-01716"></a> <span class="vuid">VUID-vkGetImageSubresourceLayout-mipLevel-01716</span><br>

The <code>mipLevel</code> member of <code>pSubresource</code> <strong>must</strong> be less than the
<code>mipLevels</code> specified in <code>image</code></p>
</li>
<li>
<p><a id="VUID-vkGetImageSubresourceLayout-arrayLayer-01717" href="#VUID-vkGetImageSubresourceLayout-arrayLayer-01717"></a> <span class="vuid">VUID-vkGetImageSubresourceLayout-arrayLayer-01717</span><br>

The <code>arrayLayer</code> member of <code>pSubresource</code> <strong>must</strong> be less than the
<code>arrayLayers</code> specified in <code>image</code></p>
</li>
<li>
<p><a id="VUID-vkGetImageSubresourceLayout-format-08886" href="#VUID-vkGetImageSubresourceLayout-format-08886"></a> <span class="vuid">VUID-vkGetImageSubresourceLayout-format-08886</span><br>

If <code>format</code> of the <code>image</code> is a color format
that is not a <a href="formats.html#formats-requiring-sampler-ycbcr-conversion" class="xref page">multi-planar    image format</a>,
and <code>tiling</code> of the <code>image</code> is
<code>VK_IMAGE_TILING_LINEAR</code> or <code>VK_IMAGE_TILING_OPTIMAL</code>, the
<code>aspectMask</code> member of <code>pSubresource</code> <strong>must</strong> be
<code>VK_IMAGE_ASPECT_COLOR_BIT</code></p>
</li>
<li>
<p><a id="VUID-vkGetImageSubresourceLayout-format-04462" href="#VUID-vkGetImageSubresourceLayout-format-04462"></a> <span class="vuid">VUID-vkGetImageSubresourceLayout-format-04462</span><br>

If <code>format</code> of the <code>image</code> has a depth component, the
<code>aspectMask</code> member of <code>pSubresource</code> <strong>must</strong> contain
<code>VK_IMAGE_ASPECT_DEPTH_BIT</code></p>
</li>
<li>
<p><a id="VUID-vkGetImageSubresourceLayout-format-04463" href="#VUID-vkGetImageSubresourceLayout-format-04463"></a> <span class="vuid">VUID-vkGetImageSubresourceLayout-format-04463</span><br>

If <code>format</code> of the <code>image</code> has a stencil component, the
<code>aspectMask</code> member of <code>pSubresource</code> <strong>must</strong> contain
<code>VK_IMAGE_ASPECT_STENCIL_BIT</code></p>
</li>
<li>
<p><a id="VUID-vkGetImageSubresourceLayout-format-04464" href="#VUID-vkGetImageSubresourceLayout-format-04464"></a> <span class="vuid">VUID-vkGetImageSubresourceLayout-format-04464</span><br>

If <code>format</code> of the <code>image</code> does not contain a stencil or
depth component, the <code>aspectMask</code> member of <code>pSubresource</code> <strong>must</strong>
not contain <code>VK_IMAGE_ASPECT_DEPTH_BIT</code> or
<code>VK_IMAGE_ASPECT_STENCIL_BIT</code></p>
</li>
<li>
<p><a id="VUID-vkGetImageSubresourceLayout-tiling-08717" href="#VUID-vkGetImageSubresourceLayout-tiling-08717"></a> <span class="vuid">VUID-vkGetImageSubresourceLayout-tiling-08717</span><br>

If the <code>tiling</code> of the <code>image</code> is
<code>VK_IMAGE_TILING_LINEAR</code> and has a
<a href="formats.html#formats-requiring-sampler-ycbcr-conversion" class="xref page">multi-planar image    format</a>, then the <code>aspectMask</code> member of <code>pSubresource</code> <strong>must</strong>
be a single valid <a href="formats.html#formats-planes-image-aspect" class="xref page">multi-planar aspect    mask</a> bit</p>
</li>
<li>
<p><a id="VUID-vkGetImageSubresourceLayout-image-09432" href="#VUID-vkGetImageSubresourceLayout-image-09432"></a> <span class="vuid">VUID-vkGetImageSubresourceLayout-image-09432</span><br>

If <code>image</code> was created with the
<code>VK_EXTERNAL_MEMORY_HANDLE_TYPE_ANDROID_HARDWARE_BUFFER_BIT_ANDROID</code>
external memory handle type, then <code>image</code> <strong>must</strong> be bound to memory</p>
</li>
<li>
<p><a id="VUID-vkGetImageSubresourceLayout-tiling-09433" href="#VUID-vkGetImageSubresourceLayout-tiling-09433"></a> <span class="vuid">VUID-vkGetImageSubresourceLayout-tiling-09433</span><br>

If the <code>tiling</code> of the <code>image</code> is
<code>VK_IMAGE_TILING_DRM_FORMAT_MODIFIER_EXT</code>, then the <code>aspectMask</code>
member of <code>pSubresource</code> <strong>must</strong> be
<code>VK_IMAGE_ASPECT_MEMORY_PLANE<em>_i_</em>BIT_EXT</code> and the index <em>i</em> <strong>must</strong>
be less than the
<a href="formats.html#VkDrmFormatModifierPropertiesEXT" class="xref page">VkDrmFormatModifierPropertiesEXT</a>::<code>drmFormatModifierPlaneCount</code>
associated with the image&#8217;s <code>format</code> and
<a href="#VkImageDrmFormatModifierPropertiesEXT">VkImageDrmFormatModifierPropertiesEXT</a>::<code>drmFormatModifier</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkGetImageSubresourceLayout-device-parameter" href="#VUID-vkGetImageSubresourceLayout-device-parameter"></a> <span class="vuid">VUID-vkGetImageSubresourceLayout-device-parameter</span><br>
 <code>device</code> <strong>must</strong> be a valid <a href="devsandqueues.html#VkDevice" class="xref page">VkDevice</a> handle</p>
</li>
<li>
<p><a id="VUID-vkGetImageSubresourceLayout-image-parameter" href="#VUID-vkGetImageSubresourceLayout-image-parameter"></a> <span class="vuid">VUID-vkGetImageSubresourceLayout-image-parameter</span><br>
 <code>image</code> <strong>must</strong> be a valid <a href="#VkImage">VkImage</a> handle</p>
</li>
<li>
<p><a id="VUID-vkGetImageSubresourceLayout-pSubresource-parameter" href="#VUID-vkGetImageSubresourceLayout-pSubresource-parameter"></a> <span class="vuid">VUID-vkGetImageSubresourceLayout-pSubresource-parameter</span><br>
 <code>pSubresource</code> <strong>must</strong> be a valid pointer to a valid <a href="#VkImageSubresource">VkImageSubresource</a> structure</p>
</li>
<li>
<p><a id="VUID-vkGetImageSubresourceLayout-pLayout-parameter" href="#VUID-vkGetImageSubresourceLayout-pLayout-parameter"></a> <span class="vuid">VUID-vkGetImageSubresourceLayout-pLayout-parameter</span><br>
 <code>pLayout</code> <strong>must</strong> be a valid pointer to a <a href="#VkSubresourceLayout">VkSubresourceLayout</a> structure</p>
</li>
<li>
<p><a id="VUID-vkGetImageSubresourceLayout-image-parent" href="#VUID-vkGetImageSubresourceLayout-image-parent"></a> <span class="vuid">VUID-vkGetImageSubresourceLayout-image-parent</span><br>
 <code>image</code> <strong>must</strong> have been created, allocated, or retrieved from <code>device</code></p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>VkImageSubresource</code> structure is defined as:</p>
</div>
<div id="VkImageSubresource" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_VERSION_1_0
typedef struct VkImageSubresource {
    VkImageAspectFlags    aspectMask;
    uint32_t              mipLevel;
    uint32_t              arrayLayer;
} VkImageSubresource;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>aspectMask</code> is a <a href="#VkImageAspectFlags">VkImageAspectFlags</a> value selecting the image
<em>aspect</em>.</p>
</li>
<li>
<p><code>mipLevel</code> selects the mipmap level.</p>
</li>
<li>
<p><code>arrayLayer</code> selects the array layer.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkImageSubresource-aspectMask-parameter" href="#VUID-VkImageSubresource-aspectMask-parameter"></a> <span class="vuid">VUID-VkImageSubresource-aspectMask-parameter</span><br>
 <code>aspectMask</code> <strong>must</strong> be a valid combination of <a href="#VkImageAspectFlagBits">VkImageAspectFlagBits</a> values</p>
</li>
<li>
<p><a id="VUID-VkImageSubresource-aspectMask-requiredbitmask" href="#VUID-VkImageSubresource-aspectMask-requiredbitmask"></a> <span class="vuid">VUID-VkImageSubresource-aspectMask-requiredbitmask</span><br>
 <code>aspectMask</code> <strong>must</strong> not be <code>0</code></p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Information about the layout of the image subresource is returned in a
<code>VkSubresourceLayout</code> structure:</p>
</div>
<div id="VkSubresourceLayout" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_VERSION_1_0
typedef struct VkSubresourceLayout {
    VkDeviceSize    offset;
    VkDeviceSize    size;
    VkDeviceSize    rowPitch;
    VkDeviceSize    arrayPitch;
    VkDeviceSize    depthPitch;
} VkSubresourceLayout;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>offset</code> is the byte offset from the start of the image
or the plane
where the image subresource begins.</p>
</li>
<li>
<p><code>size</code> is the size in bytes of the image subresource.
<code>size</code> includes any extra memory that is required based on
<code>rowPitch</code>.</p>
</li>
<li>
<p><code>rowPitch</code> describes the number of bytes between each row of texels
in an image.</p>
</li>
<li>
<p><code>arrayPitch</code> describes the number of bytes between each array layer
of an image.</p>
</li>
<li>
<p><code>depthPitch</code> describes the number of bytes between each slice of 3D
image.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>If the image is <a href="../appendices/glossary.html#glossary-linear-resource" class="xref page">linear</a>, then <code>rowPitch</code>,
<code>arrayPitch</code> and <code>depthPitch</code> describe the layout of the image
subresource in linear memory.
For uncompressed formats, <code>rowPitch</code> is the number of bytes between
texels with the same x coordinate in adjacent rows (y coordinates differ by
one).
<code>arrayPitch</code> is the number of bytes between texels with the same x and y
coordinate in adjacent array layers of the image (array layer values differ
by one).
<code>depthPitch</code> is the number of bytes between texels with the same x and y
coordinate in adjacent slices of a 3D image (z coordinates differ by one).
Expressed as an addressing formula, the starting byte of a texel in the
image subresource has address:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c hljs" data-lang="c">// (x,y,z,layer) are in texel coordinates
address(x,y,z,layer) = layer*arrayPitch + z*depthPitch + y*rowPitch + x*elementSize + offset</code></pre>
</div>
</div>
<div class="paragraph">
<p>For compressed formats, the <code>rowPitch</code> is the number of bytes between
compressed texel blocks in adjacent rows.
<code>arrayPitch</code> is the number of bytes between compressed texel blocks in
adjacent array layers.
<code>depthPitch</code> is the number of bytes between compressed texel blocks in
adjacent slices of a 3D image.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c hljs" data-lang="c">// (x,y,z,layer) are in compressed texel block coordinates
address(x,y,z,layer) = layer*arrayPitch + z*depthPitch + y*rowPitch + x*compressedTexelBlockByteSize + offset;</code></pre>
</div>
</div>
<div class="paragraph">
<p>The value of <code>arrayPitch</code> is <strong>undefined</strong> for images that were not created
as arrays.
<code>depthPitch</code> is defined only for 3D images.</p>
</div>
<div class="paragraph">
<p>If the image has a
<em>single-plane</em>
color format
and its tiling is <code>VK_IMAGE_TILING_LINEAR</code>
, then the <code>aspectMask</code> member of <code>VkImageSubresource</code> <strong>must</strong> be
<code>VK_IMAGE_ASPECT_COLOR_BIT</code>.</p>
</div>
<div class="paragraph">
<p>If the image has a depth/stencil format
and its tiling is <code>VK_IMAGE_TILING_LINEAR</code>
, then <code>aspectMask</code> <strong>must</strong> be either <code>VK_IMAGE_ASPECT_DEPTH_BIT</code> or
<code>VK_IMAGE_ASPECT_STENCIL_BIT</code>.
On implementations that store depth and stencil aspects separately, querying
each of these image subresource layouts will return a different <code>offset</code>
and <code>size</code> representing the region of memory used for that aspect.
On implementations that store depth and stencil aspects interleaved, the
same <code>offset</code> and <code>size</code> are returned and represent the interleaved
memory allocation.</p>
</div>
<div class="paragraph">
<p>If the image has a <a href="formats.html#formats-requiring-sampler-ycbcr-conversion" class="xref page">multi-planar format</a>
and its tiling is <code>VK_IMAGE_TILING_LINEAR</code>
, then the <code>aspectMask</code> member of <code>VkImageSubresource</code> <strong>must</strong> be
<code>VK_IMAGE_ASPECT_PLANE_0_BIT</code>, <code>VK_IMAGE_ASPECT_PLANE_1_BIT</code>, or
(for 3-plane formats only) <code>VK_IMAGE_ASPECT_PLANE_2_BIT</code>.
Querying each of these image subresource layouts will return a different
<code>offset</code> and <code>size</code> representing the region of memory used for that
plane.
If the image is <em>disjoint</em>, then the <code>offset</code> is relative to the base
address of the plane.
If the image is <em>non-disjoint</em>, then the <code>offset</code> is relative to the
base address of the image.</p>
</div>
<div class="paragraph">
<p>If the image&#8217;s tiling is <code>VK_IMAGE_TILING_DRM_FORMAT_MODIFIER_EXT</code>, then
the <code>aspectMask</code> member of <code>VkImageSubresource</code> <strong>must</strong> be one of
<code>VK_IMAGE_ASPECT_MEMORY_PLANE<em>_i_</em>BIT_EXT</code>, where the maximum allowed
plane index <em>i</em> is defined by the
<a href="formats.html#VkDrmFormatModifierPropertiesEXT" class="xref page">VkDrmFormatModifierPropertiesEXT</a>::<code>drmFormatModifierPlaneCount</code>
associated with the image&#8217;s <a href="#VkImageCreateInfo">VkImageCreateInfo</a>::<code>format</code> and
<a href="../appendices/glossary.html#glossary-drm-format-modifier" class="xref page">modifier</a>.
The memory range used by the subresource is described by <code>offset</code> and
<code>size</code>.
If the image is <em>disjoint</em>, then the <code>offset</code> is relative to the base
address of the <em>memory plane</em>.
If the image is <em>non-disjoint</em>, then the <code>offset</code> is relative to the
base address of the image.
If the image is <a href="../appendices/glossary.html#glossary-linear-resource" class="xref page">non-linear</a>, then
<code>rowPitch</code>, <code>arrayPitch</code>, and <code>depthPitch</code> have an
implementation-dependent meaning.</p>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>To query the memory layout of an image subresource, call:</p>
</div>
<div id="vkGetImageSubresourceLayout2KHR" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_KHR_maintenance5
void vkGetImageSubresourceLayout2KHR(
    VkDevice                                    device,
    VkImage                                     image,
    const VkImageSubresource2KHR*               pSubresource,
    VkSubresourceLayout2KHR*                    pLayout);</code></pre>
</div>
</div>
<div class="paragraph">
<p>or the equivalent command</p>
</div>
<div id="vkGetImageSubresourceLayout2EXT" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_EXT_host_image_copy, VK_EXT_image_compression_control
void vkGetImageSubresourceLayout2EXT(
    VkDevice                                    device,
    VkImage                                     image,
    const VkImageSubresource2KHR*               pSubresource,
    VkSubresourceLayout2KHR*                    pLayout);</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>device</code> is the logical device that owns the image.</p>
</li>
<li>
<p><code>image</code> is the image whose layout is being queried.</p>
</li>
<li>
<p><code>pSubresource</code> is a pointer to a <a href="#VkImageSubresource2KHR">VkImageSubresource2KHR</a>
structure selecting a specific image for the image subresource.</p>
</li>
<li>
<p><code>pLayout</code> is a pointer to a <a href="#VkSubresourceLayout2KHR">VkSubresourceLayout2KHR</a> structure
in which the layout is returned.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><code>vkGetImageSubresourceLayout2KHR</code> behaves similarly to
<a href="#vkGetImageSubresourceLayout">vkGetImageSubresourceLayout</a>, with the ability to specify extended
inputs via chained input structures, and to return extended information via
chained output structures.</p>
</div>
<div class="paragraph">
<p>It is legal to call <code>vkGetImageSubresourceLayout2KHR</code> with an
<code>image</code> created with <code>tiling</code> equal to
<code>VK_IMAGE_TILING_OPTIMAL</code>, but the members of
<a href="#VkSubresourceLayout2KHR">VkSubresourceLayout2KHR</a>::<code>subresourceLayout</code> will have <strong>undefined</strong>
values in this case.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="title">Note</div>
<div class="paragraph">
<p>Structures chained from <a href="#VkImageSubresource2KHR">VkImageSubresource2KHR</a>::<code>pNext</code> will also
be updated when <code>tiling</code> is equal to <code>VK_IMAGE_TILING_OPTIMAL</code>.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkGetImageSubresourceLayout2KHR-aspectMask-00997" href="#VUID-vkGetImageSubresourceLayout2KHR-aspectMask-00997"></a> <span class="vuid">VUID-vkGetImageSubresourceLayout2KHR-aspectMask-00997</span><br>

The <code>aspectMask</code> member of <code>pSubresource</code> <strong>must</strong> only have a
single bit set</p>
</li>
<li>
<p><a id="VUID-vkGetImageSubresourceLayout2KHR-mipLevel-01716" href="#VUID-vkGetImageSubresourceLayout2KHR-mipLevel-01716"></a> <span class="vuid">VUID-vkGetImageSubresourceLayout2KHR-mipLevel-01716</span><br>

The <code>mipLevel</code> member of <code>pSubresource</code> <strong>must</strong> be less than the
<code>mipLevels</code> specified in <code>image</code></p>
</li>
<li>
<p><a id="VUID-vkGetImageSubresourceLayout2KHR-arrayLayer-01717" href="#VUID-vkGetImageSubresourceLayout2KHR-arrayLayer-01717"></a> <span class="vuid">VUID-vkGetImageSubresourceLayout2KHR-arrayLayer-01717</span><br>

The <code>arrayLayer</code> member of <code>pSubresource</code> <strong>must</strong> be less than the
<code>arrayLayers</code> specified in <code>image</code></p>
</li>
<li>
<p><a id="VUID-vkGetImageSubresourceLayout2KHR-format-08886" href="#VUID-vkGetImageSubresourceLayout2KHR-format-08886"></a> <span class="vuid">VUID-vkGetImageSubresourceLayout2KHR-format-08886</span><br>

If <code>format</code> of the <code>image</code> is a color format
that is not a <a href="formats.html#formats-requiring-sampler-ycbcr-conversion" class="xref page">multi-planar    image format</a>,
and <code>tiling</code> of the <code>image</code> is
<code>VK_IMAGE_TILING_LINEAR</code> or <code>VK_IMAGE_TILING_OPTIMAL</code>, the
<code>aspectMask</code> member of <code>pSubresource</code> <strong>must</strong> be
<code>VK_IMAGE_ASPECT_COLOR_BIT</code></p>
</li>
<li>
<p><a id="VUID-vkGetImageSubresourceLayout2KHR-format-04462" href="#VUID-vkGetImageSubresourceLayout2KHR-format-04462"></a> <span class="vuid">VUID-vkGetImageSubresourceLayout2KHR-format-04462</span><br>

If <code>format</code> of the <code>image</code> has a depth component, the
<code>aspectMask</code> member of <code>pSubresource</code> <strong>must</strong> contain
<code>VK_IMAGE_ASPECT_DEPTH_BIT</code></p>
</li>
<li>
<p><a id="VUID-vkGetImageSubresourceLayout2KHR-format-04463" href="#VUID-vkGetImageSubresourceLayout2KHR-format-04463"></a> <span class="vuid">VUID-vkGetImageSubresourceLayout2KHR-format-04463</span><br>

If <code>format</code> of the <code>image</code> has a stencil component, the
<code>aspectMask</code> member of <code>pSubresource</code> <strong>must</strong> contain
<code>VK_IMAGE_ASPECT_STENCIL_BIT</code></p>
</li>
<li>
<p><a id="VUID-vkGetImageSubresourceLayout2KHR-format-04464" href="#VUID-vkGetImageSubresourceLayout2KHR-format-04464"></a> <span class="vuid">VUID-vkGetImageSubresourceLayout2KHR-format-04464</span><br>

If <code>format</code> of the <code>image</code> does not contain a stencil or
depth component, the <code>aspectMask</code> member of <code>pSubresource</code> <strong>must</strong>
not contain <code>VK_IMAGE_ASPECT_DEPTH_BIT</code> or
<code>VK_IMAGE_ASPECT_STENCIL_BIT</code></p>
</li>
<li>
<p><a id="VUID-vkGetImageSubresourceLayout2KHR-tiling-08717" href="#VUID-vkGetImageSubresourceLayout2KHR-tiling-08717"></a> <span class="vuid">VUID-vkGetImageSubresourceLayout2KHR-tiling-08717</span><br>

If the <code>tiling</code> of the <code>image</code> is
<code>VK_IMAGE_TILING_LINEAR</code> and has a
<a href="formats.html#formats-requiring-sampler-ycbcr-conversion" class="xref page">multi-planar image    format</a>, then the <code>aspectMask</code> member of <code>pSubresource</code> <strong>must</strong>
be a single valid <a href="formats.html#formats-planes-image-aspect" class="xref page">multi-planar aspect    mask</a> bit</p>
</li>
<li>
<p><a id="VUID-vkGetImageSubresourceLayout2KHR-image-09434" href="#VUID-vkGetImageSubresourceLayout2KHR-image-09434"></a> <span class="vuid">VUID-vkGetImageSubresourceLayout2KHR-image-09434</span><br>

If <code>image</code> was created with the
<code>VK_EXTERNAL_MEMORY_HANDLE_TYPE_ANDROID_HARDWARE_BUFFER_BIT_ANDROID</code>
external memory handle type, then <code>image</code> <strong>must</strong> be bound to memory</p>
</li>
<li>
<p><a id="VUID-vkGetImageSubresourceLayout2KHR-tiling-09435" href="#VUID-vkGetImageSubresourceLayout2KHR-tiling-09435"></a> <span class="vuid">VUID-vkGetImageSubresourceLayout2KHR-tiling-09435</span><br>

If the <code>tiling</code> of the <code>image</code> is
<code>VK_IMAGE_TILING_DRM_FORMAT_MODIFIER_EXT</code>, then the <code>aspectMask</code>
member of <code>pSubresource</code> <strong>must</strong> be
<code>VK_IMAGE_ASPECT_MEMORY_PLANE<em>_i_</em>BIT_EXT</code> and the index <em>i</em> <strong>must</strong>
be less than the
<a href="formats.html#VkDrmFormatModifierPropertiesEXT" class="xref page">VkDrmFormatModifierPropertiesEXT</a>::<code>drmFormatModifierPlaneCount</code>
associated with the image&#8217;s <code>format</code> and
<a href="#VkImageDrmFormatModifierPropertiesEXT">VkImageDrmFormatModifierPropertiesEXT</a>::<code>drmFormatModifier</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkGetImageSubresourceLayout2KHR-device-parameter" href="#VUID-vkGetImageSubresourceLayout2KHR-device-parameter"></a> <span class="vuid">VUID-vkGetImageSubresourceLayout2KHR-device-parameter</span><br>
 <code>device</code> <strong>must</strong> be a valid <a href="devsandqueues.html#VkDevice" class="xref page">VkDevice</a> handle</p>
</li>
<li>
<p><a id="VUID-vkGetImageSubresourceLayout2KHR-image-parameter" href="#VUID-vkGetImageSubresourceLayout2KHR-image-parameter"></a> <span class="vuid">VUID-vkGetImageSubresourceLayout2KHR-image-parameter</span><br>
 <code>image</code> <strong>must</strong> be a valid <a href="#VkImage">VkImage</a> handle</p>
</li>
<li>
<p><a id="VUID-vkGetImageSubresourceLayout2KHR-pSubresource-parameter" href="#VUID-vkGetImageSubresourceLayout2KHR-pSubresource-parameter"></a> <span class="vuid">VUID-vkGetImageSubresourceLayout2KHR-pSubresource-parameter</span><br>
 <code>pSubresource</code> <strong>must</strong> be a valid pointer to a valid <a href="#VkImageSubresource2KHR">VkImageSubresource2KHR</a> structure</p>
</li>
<li>
<p><a id="VUID-vkGetImageSubresourceLayout2KHR-pLayout-parameter" href="#VUID-vkGetImageSubresourceLayout2KHR-pLayout-parameter"></a> <span class="vuid">VUID-vkGetImageSubresourceLayout2KHR-pLayout-parameter</span><br>
 <code>pLayout</code> <strong>must</strong> be a valid pointer to a <a href="#VkSubresourceLayout2KHR">VkSubresourceLayout2KHR</a> structure</p>
</li>
<li>
<p><a id="VUID-vkGetImageSubresourceLayout2KHR-image-parent" href="#VUID-vkGetImageSubresourceLayout2KHR-image-parent"></a> <span class="vuid">VUID-vkGetImageSubresourceLayout2KHR-image-parent</span><br>
 <code>image</code> <strong>must</strong> have been created, allocated, or retrieved from <code>device</code></p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>VkImageSubresource2KHR</code> structure is defined as:</p>
</div>
<div id="VkImageSubresource2KHR" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_KHR_maintenance5
typedef struct VkImageSubresource2KHR {
    VkStructureType       sType;
    void*                 pNext;
    VkImageSubresource    imageSubresource;
} VkImageSubresource2KHR;</code></pre>
</div>
</div>
<div class="paragraph">
<p>or the equivalent</p>
</div>
<div id="VkImageSubresource2EXT" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_EXT_host_image_copy, VK_EXT_image_compression_control
typedef VkImageSubresource2KHR VkImageSubresource2EXT;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is a <a href="fundamentals.html#VkStructureType" class="xref page">VkStructureType</a> value identifying this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>imageSubresource</code> is a <a href="#VkImageSubresource">VkImageSubresource</a> structure.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkImageSubresource2KHR-sType-sType" href="#VUID-VkImageSubresource2KHR-sType-sType"></a> <span class="vuid">VUID-VkImageSubresource2KHR-sType-sType</span><br>
 <code>sType</code> <strong>must</strong> be <code>VK_STRUCTURE_TYPE_IMAGE_SUBRESOURCE_2_KHR</code></p>
</li>
<li>
<p><a id="VUID-VkImageSubresource2KHR-pNext-pNext" href="#VUID-VkImageSubresource2KHR-pNext-pNext"></a> <span class="vuid">VUID-VkImageSubresource2KHR-pNext-pNext</span><br>
 <code>pNext</code> <strong>must</strong> be <code>NULL</code></p>
</li>
<li>
<p><a id="VUID-VkImageSubresource2KHR-imageSubresource-parameter" href="#VUID-VkImageSubresource2KHR-imageSubresource-parameter"></a> <span class="vuid">VUID-VkImageSubresource2KHR-imageSubresource-parameter</span><br>
 <code>imageSubresource</code> <strong>must</strong> be a valid <a href="#VkImageSubresource">VkImageSubresource</a> structure</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Information about the layout of the image subresource is returned in a
<code>VkSubresourceLayout2KHR</code> structure:</p>
</div>
<div id="VkSubresourceLayout2KHR" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_KHR_maintenance5
typedef struct VkSubresourceLayout2KHR {
    VkStructureType        sType;
    void*                  pNext;
    VkSubresourceLayout    subresourceLayout;
} VkSubresourceLayout2KHR;</code></pre>
</div>
</div>
<div class="paragraph">
<p>or the equivalent</p>
</div>
<div id="VkSubresourceLayout2EXT" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_EXT_host_image_copy, VK_EXT_image_compression_control
typedef VkSubresourceLayout2KHR VkSubresourceLayout2EXT;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is a <a href="fundamentals.html#VkStructureType" class="xref page">VkStructureType</a> value identifying this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>subresourceLayout</code> is a <a href="#VkSubresourceLayout">VkSubresourceLayout</a> structure.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkSubresourceLayout2KHR-sType-sType" href="#VUID-VkSubresourceLayout2KHR-sType-sType"></a> <span class="vuid">VUID-VkSubresourceLayout2KHR-sType-sType</span><br>
 <code>sType</code> <strong>must</strong> be <code>VK_STRUCTURE_TYPE_SUBRESOURCE_LAYOUT_2_KHR</code></p>
</li>
<li>
<p><a id="VUID-VkSubresourceLayout2KHR-pNext-pNext" href="#VUID-VkSubresourceLayout2KHR-pNext-pNext"></a> <span class="vuid">VUID-VkSubresourceLayout2KHR-pNext-pNext</span><br>
 Each <code>pNext</code> member of any structure (including this one) in the <code>pNext</code> chain <strong>must</strong> be either <code>NULL</code> or a pointer to a valid instance of <a href="#VkImageCompressionPropertiesEXT">VkImageCompressionPropertiesEXT</a> or <a href="#VkSubresourceHostMemcpySizeEXT">VkSubresourceHostMemcpySizeEXT</a></p>
</li>
<li>
<p><a id="VUID-VkSubresourceLayout2KHR-sType-unique" href="#VUID-VkSubresourceLayout2KHR-sType-unique"></a> <span class="vuid">VUID-VkSubresourceLayout2KHR-sType-unique</span><br>
 The <code>sType</code> value of each struct in the <code>pNext</code> chain <strong>must</strong> be unique</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>To query the memory size needed to copy to or from an image using
<a href="copies.html#vkCopyMemoryToImageEXT" class="xref page">vkCopyMemoryToImageEXT</a> or <a href="copies.html#vkCopyImageToMemoryEXT" class="xref page">vkCopyImageToMemoryEXT</a> when the
<code>VK_HOST_IMAGE_COPY_MEMCPY_EXT</code> flag is specified, add a
<a href="#VkSubresourceHostMemcpySizeEXT">VkSubresourceHostMemcpySizeEXT</a> structure to the <code>pNext</code> chain of
the <a href="#VkSubresourceLayout2EXT">VkSubresourceLayout2EXT</a> structure in a call to
<a href="#vkGetImageSubresourceLayout2EXT">vkGetImageSubresourceLayout2EXT</a>.</p>
</div>
<div class="paragraph">
<p>The <code>VkSubresourceHostMemcpySizeEXT</code> structure is defined as:</p>
</div>
<div id="VkSubresourceHostMemcpySizeEXT" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_EXT_host_image_copy
typedef struct VkSubresourceHostMemcpySizeEXT {
    VkStructureType    sType;
    void*              pNext;
    VkDeviceSize       size;
} VkSubresourceHostMemcpySizeEXT;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is a <a href="fundamentals.html#VkStructureType" class="xref page">VkStructureType</a> value identifying this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>size</code> is the size in bytes of the image subresource.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkSubresourceHostMemcpySizeEXT-sType-sType" href="#VUID-VkSubresourceHostMemcpySizeEXT-sType-sType"></a> <span class="vuid">VUID-VkSubresourceHostMemcpySizeEXT-sType-sType</span><br>
 <code>sType</code> <strong>must</strong> be <code>VK_STRUCTURE_TYPE_SUBRESOURCE_HOST_MEMCPY_SIZE_EXT</code></p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>To query the memory layout of an image subresource, without an image object,
call:</p>
</div>
<div id="vkGetDeviceImageSubresourceLayoutKHR" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_KHR_maintenance5
void vkGetDeviceImageSubresourceLayoutKHR(
    VkDevice                                    device,
    const VkDeviceImageSubresourceInfoKHR*      pInfo,
    VkSubresourceLayout2KHR*                    pLayout);</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>device</code> is the logical device that owns the image.</p>
</li>
<li>
<p><code>pInfo</code> is a pointer to a <a href="#VkDeviceImageSubresourceInfoKHR">VkDeviceImageSubresourceInfoKHR</a>
structure containing parameters required for the subresource layout
query.</p>
</li>
<li>
<p><code>pLayout</code> is a pointer to a <a href="#VkSubresourceLayout2KHR">VkSubresourceLayout2KHR</a> structure
in which the layout is returned.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><code>vkGetDeviceImageSubresourceLayoutKHR</code> behaves similarly to
<a href="#vkGetImageSubresourceLayout2KHR">vkGetImageSubresourceLayout2KHR</a>, but uses a <a href="#VkImageCreateInfo">VkImageCreateInfo</a>
structure to specify the image rather than a <a href="#VkImage">VkImage</a> object.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkGetDeviceImageSubresourceLayoutKHR-device-parameter" href="#VUID-vkGetDeviceImageSubresourceLayoutKHR-device-parameter"></a> <span class="vuid">VUID-vkGetDeviceImageSubresourceLayoutKHR-device-parameter</span><br>
 <code>device</code> <strong>must</strong> be a valid <a href="devsandqueues.html#VkDevice" class="xref page">VkDevice</a> handle</p>
</li>
<li>
<p><a id="VUID-vkGetDeviceImageSubresourceLayoutKHR-pInfo-parameter" href="#VUID-vkGetDeviceImageSubresourceLayoutKHR-pInfo-parameter"></a> <span class="vuid">VUID-vkGetDeviceImageSubresourceLayoutKHR-pInfo-parameter</span><br>
 <code>pInfo</code> <strong>must</strong> be a valid pointer to a valid <a href="#VkDeviceImageSubresourceInfoKHR">VkDeviceImageSubresourceInfoKHR</a> structure</p>
</li>
<li>
<p><a id="VUID-vkGetDeviceImageSubresourceLayoutKHR-pLayout-parameter" href="#VUID-vkGetDeviceImageSubresourceLayoutKHR-pLayout-parameter"></a> <span class="vuid">VUID-vkGetDeviceImageSubresourceLayoutKHR-pLayout-parameter</span><br>
 <code>pLayout</code> <strong>must</strong> be a valid pointer to a <a href="#VkSubresourceLayout2KHR">VkSubresourceLayout2KHR</a> structure</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>VkDeviceImageSubresourceInfoKHR</code> structure is defined as:</p>
</div>
<div id="VkDeviceImageSubresourceInfoKHR" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_KHR_maintenance5
typedef struct VkDeviceImageSubresourceInfoKHR {
    VkStructureType                  sType;
    const void*                      pNext;
    const VkImageCreateInfo*         pCreateInfo;
    const VkImageSubresource2KHR*    pSubresource;
} VkDeviceImageSubresourceInfoKHR;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is a <a href="fundamentals.html#VkStructureType" class="xref page">VkStructureType</a> value identifying this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>pCreateInfo</code> is a pointer to a <a href="#VkImageCreateInfo">VkImageCreateInfo</a> structure
containing parameters affecting creation of the image to query.</p>
</li>
<li>
<p><code>pSubresource</code> pSubresource is a pointer to a
<a href="#VkImageSubresource2KHR">VkImageSubresource2KHR</a> structure selecting a specific image
subresource for the query.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkDeviceImageSubresourceInfoKHR-aspectMask-00997" href="#VUID-VkDeviceImageSubresourceInfoKHR-aspectMask-00997"></a> <span class="vuid">VUID-VkDeviceImageSubresourceInfoKHR-aspectMask-00997</span><br>

The <code>aspectMask</code> member of <code>pSubresource</code> <strong>must</strong> only have a
single bit set</p>
</li>
<li>
<p><a id="VUID-VkDeviceImageSubresourceInfoKHR-mipLevel-01716" href="#VUID-VkDeviceImageSubresourceInfoKHR-mipLevel-01716"></a> <span class="vuid">VUID-VkDeviceImageSubresourceInfoKHR-mipLevel-01716</span><br>

The <code>mipLevel</code> member of <code>pSubresource</code> <strong>must</strong> be less than the
<code>mipLevels</code> specified in <code>pCreateInfo</code></p>
</li>
<li>
<p><a id="VUID-VkDeviceImageSubresourceInfoKHR-arrayLayer-01717" href="#VUID-VkDeviceImageSubresourceInfoKHR-arrayLayer-01717"></a> <span class="vuid">VUID-VkDeviceImageSubresourceInfoKHR-arrayLayer-01717</span><br>

The <code>arrayLayer</code> member of <code>pSubresource</code> <strong>must</strong> be less than the
<code>arrayLayers</code> specified in <code>pCreateInfo</code></p>
</li>
<li>
<p><a id="VUID-VkDeviceImageSubresourceInfoKHR-format-08886" href="#VUID-VkDeviceImageSubresourceInfoKHR-format-08886"></a> <span class="vuid">VUID-VkDeviceImageSubresourceInfoKHR-format-08886</span><br>

If <code>format</code> of the <code>image</code> is a color format
that is not a <a href="formats.html#formats-requiring-sampler-ycbcr-conversion" class="xref page">multi-planar    image format</a>,
and <code>tiling</code> of the <code>pCreateInfo</code> is
<code>VK_IMAGE_TILING_LINEAR</code> or <code>VK_IMAGE_TILING_OPTIMAL</code>, the
<code>aspectMask</code> member of <code>pSubresource</code> <strong>must</strong> be
<code>VK_IMAGE_ASPECT_COLOR_BIT</code></p>
</li>
<li>
<p><a id="VUID-VkDeviceImageSubresourceInfoKHR-format-04462" href="#VUID-VkDeviceImageSubresourceInfoKHR-format-04462"></a> <span class="vuid">VUID-VkDeviceImageSubresourceInfoKHR-format-04462</span><br>

If <code>format</code> of the <code>pCreateInfo</code> has a depth component, the
<code>aspectMask</code> member of <code>pSubresource</code> <strong>must</strong> contain
<code>VK_IMAGE_ASPECT_DEPTH_BIT</code></p>
</li>
<li>
<p><a id="VUID-VkDeviceImageSubresourceInfoKHR-format-04463" href="#VUID-VkDeviceImageSubresourceInfoKHR-format-04463"></a> <span class="vuid">VUID-VkDeviceImageSubresourceInfoKHR-format-04463</span><br>

If <code>format</code> of the <code>pCreateInfo</code> has a stencil component, the
<code>aspectMask</code> member of <code>pSubresource</code> <strong>must</strong> contain
<code>VK_IMAGE_ASPECT_STENCIL_BIT</code></p>
</li>
<li>
<p><a id="VUID-VkDeviceImageSubresourceInfoKHR-format-04464" href="#VUID-VkDeviceImageSubresourceInfoKHR-format-04464"></a> <span class="vuid">VUID-VkDeviceImageSubresourceInfoKHR-format-04464</span><br>

If <code>format</code> of the <code>pCreateInfo</code> does not contain a stencil or
depth component, the <code>aspectMask</code> member of <code>pSubresource</code> <strong>must</strong>
not contain <code>VK_IMAGE_ASPECT_DEPTH_BIT</code> or
<code>VK_IMAGE_ASPECT_STENCIL_BIT</code></p>
</li>
<li>
<p><a id="VUID-VkDeviceImageSubresourceInfoKHR-tiling-08717" href="#VUID-VkDeviceImageSubresourceInfoKHR-tiling-08717"></a> <span class="vuid">VUID-VkDeviceImageSubresourceInfoKHR-tiling-08717</span><br>

If the <code>tiling</code> of the <code>pCreateInfo</code> is
<code>VK_IMAGE_TILING_LINEAR</code> and has a
<a href="formats.html#formats-requiring-sampler-ycbcr-conversion" class="xref page">multi-planar image    format</a>, then the <code>aspectMask</code> member of <code>pSubresource</code> <strong>must</strong>
be a single valid <a href="formats.html#formats-planes-image-aspect" class="xref page">multi-planar aspect    mask</a> bit</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkDeviceImageSubresourceInfoKHR-sType-sType" href="#VUID-VkDeviceImageSubresourceInfoKHR-sType-sType"></a> <span class="vuid">VUID-VkDeviceImageSubresourceInfoKHR-sType-sType</span><br>
 <code>sType</code> <strong>must</strong> be <code>VK_STRUCTURE_TYPE_DEVICE_IMAGE_SUBRESOURCE_INFO_KHR</code></p>
</li>
<li>
<p><a id="VUID-VkDeviceImageSubresourceInfoKHR-pNext-pNext" href="#VUID-VkDeviceImageSubresourceInfoKHR-pNext-pNext"></a> <span class="vuid">VUID-VkDeviceImageSubresourceInfoKHR-pNext-pNext</span><br>
 <code>pNext</code> <strong>must</strong> be <code>NULL</code></p>
</li>
<li>
<p><a id="VUID-VkDeviceImageSubresourceInfoKHR-pCreateInfo-parameter" href="#VUID-VkDeviceImageSubresourceInfoKHR-pCreateInfo-parameter"></a> <span class="vuid">VUID-VkDeviceImageSubresourceInfoKHR-pCreateInfo-parameter</span><br>
 <code>pCreateInfo</code> <strong>must</strong> be a valid pointer to a valid <a href="#VkImageCreateInfo">VkImageCreateInfo</a> structure</p>
</li>
<li>
<p><a id="VUID-VkDeviceImageSubresourceInfoKHR-pSubresource-parameter" href="#VUID-VkDeviceImageSubresourceInfoKHR-pSubresource-parameter"></a> <span class="vuid">VUID-VkDeviceImageSubresourceInfoKHR-pSubresource-parameter</span><br>
 <code>pSubresource</code> <strong>must</strong> be a valid pointer to a valid <a href="#VkImageSubresource2KHR">VkImageSubresource2KHR</a> structure</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>If an image was created with <code>VK_IMAGE_TILING_DRM_FORMAT_MODIFIER_EXT</code>,
then the image has a <a href="../appendices/glossary.html#glossary-drm-format-modifier" class="xref page">Linux DRM format modifier</a>.
To query the <em>modifier</em>, call:</p>
</div>
<div id="vkGetImageDrmFormatModifierPropertiesEXT" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_EXT_image_drm_format_modifier
VkResult vkGetImageDrmFormatModifierPropertiesEXT(
    VkDevice                                    device,
    VkImage                                     image,
    VkImageDrmFormatModifierPropertiesEXT*      pProperties);</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>device</code> is the logical device that owns the image.</p>
</li>
<li>
<p><code>image</code> is the queried image.</p>
</li>
<li>
<p><code>pProperties</code> is a pointer to a
<a href="#VkImageDrmFormatModifierPropertiesEXT">VkImageDrmFormatModifierPropertiesEXT</a> structure in which
properties of the image&#8217;s <em>DRM format modifier</em> are returned.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkGetImageDrmFormatModifierPropertiesEXT-image-02272" href="#VUID-vkGetImageDrmFormatModifierPropertiesEXT-image-02272"></a> <span class="vuid">VUID-vkGetImageDrmFormatModifierPropertiesEXT-image-02272</span><br>

<code>image</code> <strong>must</strong> have been created with <a href="#VkImageCreateInfo">    <code>tiling</code></a> equal to <code>VK_IMAGE_TILING_DRM_FORMAT_MODIFIER_EXT</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkGetImageDrmFormatModifierPropertiesEXT-device-parameter" href="#VUID-vkGetImageDrmFormatModifierPropertiesEXT-device-parameter"></a> <span class="vuid">VUID-vkGetImageDrmFormatModifierPropertiesEXT-device-parameter</span><br>
 <code>device</code> <strong>must</strong> be a valid <a href="devsandqueues.html#VkDevice" class="xref page">VkDevice</a> handle</p>
</li>
<li>
<p><a id="VUID-vkGetImageDrmFormatModifierPropertiesEXT-image-parameter" href="#VUID-vkGetImageDrmFormatModifierPropertiesEXT-image-parameter"></a> <span class="vuid">VUID-vkGetImageDrmFormatModifierPropertiesEXT-image-parameter</span><br>
 <code>image</code> <strong>must</strong> be a valid <a href="#VkImage">VkImage</a> handle</p>
</li>
<li>
<p><a id="VUID-vkGetImageDrmFormatModifierPropertiesEXT-pProperties-parameter" href="#VUID-vkGetImageDrmFormatModifierPropertiesEXT-pProperties-parameter"></a> <span class="vuid">VUID-vkGetImageDrmFormatModifierPropertiesEXT-pProperties-parameter</span><br>
 <code>pProperties</code> <strong>must</strong> be a valid pointer to a <a href="#VkImageDrmFormatModifierPropertiesEXT">VkImageDrmFormatModifierPropertiesEXT</a> structure</p>
</li>
<li>
<p><a id="VUID-vkGetImageDrmFormatModifierPropertiesEXT-image-parent" href="#VUID-vkGetImageDrmFormatModifierPropertiesEXT-image-parent"></a> <span class="vuid">VUID-vkGetImageDrmFormatModifierPropertiesEXT-image-parent</span><br>
 <code>image</code> <strong>must</strong> have been created, allocated, or retrieved from <code>device</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Return Codes</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><a href="fundamentals.html#fundamentals-successcodes" class="xref page">Success</a></dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><code>VK_SUCCESS</code></p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1"><a href="fundamentals.html#fundamentals-errorcodes" class="xref page">Failure</a></dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><code>VK_ERROR_OUT_OF_HOST_MEMORY</code></p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <a href="#VkImageDrmFormatModifierPropertiesEXT">VkImageDrmFormatModifierPropertiesEXT</a> structure is defined as:</p>
</div>
<div id="VkImageDrmFormatModifierPropertiesEXT" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_EXT_image_drm_format_modifier
typedef struct VkImageDrmFormatModifierPropertiesEXT {
    VkStructureType    sType;
    void*              pNext;
    uint64_t           drmFormatModifier;
} VkImageDrmFormatModifierPropertiesEXT;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is a <a href="fundamentals.html#VkStructureType" class="xref page">VkStructureType</a> value identifying this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>drmFormatModifier</code> returns the image&#8217;s
<a href="../appendices/glossary.html#glossary-drm-format-modifier" class="xref page">Linux DRM format modifier</a>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>If the <code>image</code> was created with
<a href="#VkImageDrmFormatModifierListCreateInfoEXT">VkImageDrmFormatModifierListCreateInfoEXT</a>, then the returned
<code>drmFormatModifier</code> <strong>must</strong> belong to the list of modifiers provided at
time of image creation in
<a href="#VkImageDrmFormatModifierListCreateInfoEXT">VkImageDrmFormatModifierListCreateInfoEXT</a>::<code>pDrmFormatModifiers</code>.
If the <code>image</code> was created with
<a href="#VkImageDrmFormatModifierExplicitCreateInfoEXT">VkImageDrmFormatModifierExplicitCreateInfoEXT</a>, then the returned
<code>drmFormatModifier</code> <strong>must</strong> be the modifier provided at time of image
creation in
<a href="#VkImageDrmFormatModifierExplicitCreateInfoEXT">VkImageDrmFormatModifierExplicitCreateInfoEXT</a>::<code>drmFormatModifier</code>.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkImageDrmFormatModifierPropertiesEXT-sType-sType" href="#VUID-VkImageDrmFormatModifierPropertiesEXT-sType-sType"></a> <span class="vuid">VUID-VkImageDrmFormatModifierPropertiesEXT-sType-sType</span><br>
 <code>sType</code> <strong>must</strong> be <code>VK_STRUCTURE_TYPE_IMAGE_DRM_FORMAT_MODIFIER_PROPERTIES_EXT</code></p>
</li>
<li>
<p><a id="VUID-VkImageDrmFormatModifierPropertiesEXT-pNext-pNext" href="#VUID-VkImageDrmFormatModifierPropertiesEXT-pNext-pNext"></a> <span class="vuid">VUID-VkImageDrmFormatModifierPropertiesEXT-pNext-pNext</span><br>
 <code>pNext</code> <strong>must</strong> be <code>NULL</code></p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>To destroy an image, call:</p>
</div>
<div id="vkDestroyImage" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_VERSION_1_0
void vkDestroyImage(
    VkDevice                                    device,
    VkImage                                     image,
    const VkAllocationCallbacks*                pAllocator);</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>device</code> is the logical device that destroys the image.</p>
</li>
<li>
<p><code>image</code> is the image to destroy.</p>
</li>
<li>
<p><code>pAllocator</code> controls host memory allocation as described in the
<a href="memory.html#memory-allocation" class="xref page">Memory Allocation</a> chapter.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkDestroyImage-image-01000" href="#VUID-vkDestroyImage-image-01000"></a> <span class="vuid">VUID-vkDestroyImage-image-01000</span><br>

All submitted commands that refer to <code>image</code>, either directly or via
a <code>VkImageView</code>, <strong>must</strong> have completed execution</p>
</li>
<li>
<p><a id="VUID-vkDestroyImage-image-01001" href="#VUID-vkDestroyImage-image-01001"></a> <span class="vuid">VUID-vkDestroyImage-image-01001</span><br>

If <code>VkAllocationCallbacks</code> were provided when <code>image</code> was
created, a compatible set of callbacks <strong>must</strong> be provided here</p>
</li>
<li>
<p><a id="VUID-vkDestroyImage-image-01002" href="#VUID-vkDestroyImage-image-01002"></a> <span class="vuid">VUID-vkDestroyImage-image-01002</span><br>

If no <code>VkAllocationCallbacks</code> were provided when <code>image</code> was
created, <code>pAllocator</code> <strong>must</strong> be <code>NULL</code></p>
</li>
<li>
<p><a id="VUID-vkDestroyImage-image-04882" href="#VUID-vkDestroyImage-image-04882"></a> <span class="vuid">VUID-vkDestroyImage-image-04882</span><br>

<code>image</code> <strong>must</strong> not have been acquired from
<a href="VK_KHR_surface/wsi.html#vkGetSwapchainImagesKHR" class="xref page">vkGetSwapchainImagesKHR</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkDestroyImage-device-parameter" href="#VUID-vkDestroyImage-device-parameter"></a> <span class="vuid">VUID-vkDestroyImage-device-parameter</span><br>
 <code>device</code> <strong>must</strong> be a valid <a href="devsandqueues.html#VkDevice" class="xref page">VkDevice</a> handle</p>
</li>
<li>
<p><a id="VUID-vkDestroyImage-image-parameter" href="#VUID-vkDestroyImage-image-parameter"></a> <span class="vuid">VUID-vkDestroyImage-image-parameter</span><br>
 If <code>image</code> is not <a href="../appendices/boilerplate.html#VK_NULL_HANDLE" class="xref page">VK_NULL_HANDLE</a>, <code>image</code> <strong>must</strong> be a valid <a href="#VkImage">VkImage</a> handle</p>
</li>
<li>
<p><a id="VUID-vkDestroyImage-pAllocator-parameter" href="#VUID-vkDestroyImage-pAllocator-parameter"></a> <span class="vuid">VUID-vkDestroyImage-pAllocator-parameter</span><br>
 If <code>pAllocator</code> is not <code>NULL</code>, <code>pAllocator</code> <strong>must</strong> be a valid pointer to a valid <a href="memory.html#VkAllocationCallbacks" class="xref page">VkAllocationCallbacks</a> structure</p>
</li>
<li>
<p><a id="VUID-vkDestroyImage-image-parent" href="#VUID-vkDestroyImage-image-parent"></a> <span class="vuid">VUID-vkDestroyImage-image-parent</span><br>
 If <code>image</code> is a valid handle, it <strong>must</strong> have been created, allocated, or retrieved from <code>device</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Host Synchronization</div>
<div class="ulist">
<ul>
<li>
<p>Host access to <code>image</code> <strong>must</strong> be externally synchronized</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="resources-image-format-features"><a class="anchor" href="#resources-image-format-features"></a>Image Format Features</h3>
<div class="paragraph">
<p>Valid uses of a <a href="#VkImage">VkImage</a> <strong>may</strong> depend on the image&#8217;s <em>format features</em>,
defined below.
Such constraints are documented in the affected valid usage statement.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>If the image was created with <code>VK_IMAGE_TILING_LINEAR</code>, then its set
of <em>format features</em> is the value of
<a href="formats.html#VkFormatProperties" class="xref page">VkFormatProperties</a>::<code>linearTilingFeatures</code> found by calling
<a href="formats.html#vkGetPhysicalDeviceFormatProperties" class="xref page">vkGetPhysicalDeviceFormatProperties</a> on the same <code>format</code> as
<a href="#VkImageCreateInfo">VkImageCreateInfo</a>::<code>format</code>.</p>
</li>
<li>
<p>If the image was created with <code>VK_IMAGE_TILING_OPTIMAL</code>,
but without an
<a href="memory.html#memory-external-android-hardware-buffer-external-formats" class="xref page">Android    hardware buffer external format</a>,
or a
<a href="memory.html#memory-external-screen-buffer-external-formats" class="xref page">QNX Screen Buffer    external format</a>
or an
<a href="#VkBufferCollectionImageCreateInfoFUCHSIA">VkBufferCollectionImageCreateInfoFUCHSIA</a>,
then its set of <em>format features</em> is the value of
<a href="formats.html#VkFormatProperties" class="xref page">VkFormatProperties</a>::<code>optimalTilingFeatures</code> found by calling
<a href="formats.html#vkGetPhysicalDeviceFormatProperties" class="xref page">vkGetPhysicalDeviceFormatProperties</a> on the same <code>format</code> as
<a href="#VkImageCreateInfo">VkImageCreateInfo</a>::<code>format</code>.</p>
</li>
<li>
<p>If the image was created with an
<a href="memory.html#memory-external-android-hardware-buffer-external-formats" class="xref page">Android    hardware buffer external format</a>, then its set of <em>format features</em> is
the value of
<a href="memory.html#VkAndroidHardwareBufferFormatPropertiesANDROID" class="xref page">VkAndroidHardwareBufferFormatPropertiesANDROID</a>::<code>formatFeatures</code>
found by calling <a href="memory.html#vkGetAndroidHardwareBufferPropertiesANDROID" class="xref page">vkGetAndroidHardwareBufferPropertiesANDROID</a> on
the Android hardware buffer that was imported to the
<a href="memory.html#VkDeviceMemory" class="xref page">VkDeviceMemory</a> to which the image is bound.</p>
</li>
<li>
<p>If the image was created with an
<a href="memory.html#memory-external-screen-buffer-external-formats" class="xref page">QNX Screen buffer    external format</a>, then its set of <em>format features</em> is the value of
<a href="memory.html#VkScreenBufferFormatPropertiesQNX" class="xref page">VkScreenBufferFormatPropertiesQNX</a>::<code>formatFeatures</code> found by
calling <a href="memory.html#vkGetScreenBufferPropertiesQNX" class="xref page">vkGetScreenBufferPropertiesQNX</a> on the QNX Screen buffer
that was imported to the <a href="memory.html#VkDeviceMemory" class="xref page">VkDeviceMemory</a> to which the image is
bound.</p>
</li>
<li>
<p>If the image was created with
<code>VK_IMAGE_TILING_DRM_FORMAT_MODIFIER_EXT</code>, then:</p>
<div class="ulist">
<ul>
<li>
<p>The image&#8217;s DRM format modifier is the value of
<a href="#VkImageDrmFormatModifierPropertiesEXT">VkImageDrmFormatModifierPropertiesEXT</a>::<code>drmFormatModifier</code>
found by calling <a href="#vkGetImageDrmFormatModifierPropertiesEXT">vkGetImageDrmFormatModifierPropertiesEXT</a>.</p>
</li>
<li>
<p>Let
<a href="formats.html#VkDrmFormatModifierPropertiesListEXT" class="xref page">VkDrmFormatModifierPropertiesListEXT</a>::<code>pDrmFormatModifierProperties</code>
be the array found by calling
<a href="formats.html#vkGetPhysicalDeviceFormatProperties2" class="xref page">vkGetPhysicalDeviceFormatProperties2</a> on the same <code>format</code> as
<a href="#VkImageCreateInfo">VkImageCreateInfo</a>::<code>format</code>.</p>
</li>
<li>
<p>Let <code>VkDrmFormatModifierPropertiesEXT prop</code> be the array element whose
<code>drmFormatModifier</code> member is the value of the image&#8217;s DRM format
modifier.</p>
</li>
<li>
<p>Then the image&#8217;s set of <em>format features</em> is the value of
<code>prop</code>::<code>drmFormatModifierTilingFeatures</code>.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="resources-images-corner-sampled"><a class="anchor" href="#resources-images-corner-sampled"></a>Corner-Sampled Images</h3>
<div class="paragraph">
<p>A <em>corner-sampled image</em> is an image where unnormalized texel coordinates
are centered on integer values rather than half-integer values.</p>
</div>
<div class="paragraph">
<p>A corner-sampled image has a number of differences compared to conventional
texture image:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Texels are centered on integer coordinates.
See <a href="textures.html#textures-unnormalized-to-integer" class="xref page">Unnormalized Texel Coordinate    Operations</a></p>
</li>
<li>
<p>Normalized coordinates are scaled using <span class="eq">coord  (dim - 1)</span>
rather than <span class="eq">coord  dim</span>, where dim is the size of one
dimension of the image.
See <a href="textures.html#textures-normalized-to-unnormalized" class="xref page">normalized texel coordinate    transform</a>.</p>
</li>
<li>
<p>Partial derivatives are scaled using <span class="eq">coord  (dim - 1)</span>
rather than <span class="eq">coord  dim</span>.
See <a href="textures.html#textures-scale-factor" class="xref page">Scale Factor Operation</a>.</p>
</li>
<li>
<p>Calculation of the next higher LOD size goes according to
<span class="eq">dim / 2</span> rather than <span class="eq">dim / 2</span>.
See <a href="#resources-image-mip-level-sizing">Image Mip Level Sizing</a>.</p>
</li>
<li>
<p>The minimum level size is 2x2 for 2D images and 2x2x2 for 3D images.
See <a href="#resources-image-mip-level-sizing">Image Mip Level Sizing</a>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Corner-sampling is only supported for 2D and 3D images.
When sampling a corner-sampled image, the sampler addressing mode <strong>must</strong> be
<code>VK_SAMPLER_ADDRESS_MODE_CLAMP_TO_EDGE</code>.
Corner-sampled images are not supported as cube maps or depth/stencil
images.</p>
</div>
</div>
<div class="sect2">
<h3 id="resources-image-mip-level-sizing"><a class="anchor" href="#resources-image-mip-level-sizing"></a>Image Mip Level Sizing</h3>
<div class="paragraph">
<p>A <em>complete mipmap chain</em> is the full set of mip levels, from the largest
mip level provided, down to the <em>minimum mip level size</em>.</p>
</div>
<div class="sect3">
<h4 id="_conventional_images"><a class="anchor" href="#_conventional_images"></a>Conventional Images</h4>
<div class="paragraph">
<p>For conventional images, the dimensions of each successive mip level,
<span class="eq">n+1</span>, are:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"></dt>
<dd>
<p><span class="eq"><code>width</code><sub>n+1</sub> = max(<code>width</code><sub>n</sub>/2,
1)</span></p>
</dd>
<dt class="hdlist1"></dt>
<dd>
<p><span class="eq"><code>height</code><sub>n+1</sub> = max(<code>height</code><sub>n</sub>/2,
1)</span></p>
</dd>
<dt class="hdlist1"></dt>
<dd>
<p><span class="eq"><code>depth</code><sub>n+1</sub> = max(<code>depth</code><sub>n</sub>/2,
1)</span></p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>where <span class="eq"><code>width</code><sub>n</sub></span>, <span class="eq"><code>height</code><sub>n</sub></span>, and <span class="eq"><code>depth</code><sub>n</sub></span>
are the dimensions of the next larger mip level, <span class="eq">n</span>.</p>
</div>
<div class="paragraph">
<p>The minimum mip level size is:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>1 for one-dimensional images,</p>
</li>
<li>
<p>1x1 for two-dimensional images, and</p>
</li>
<li>
<p>1x1x1 for three-dimensional images.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The number of levels in a complete mipmap chain is:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"></dt>
<dd>
<p><span class="eq">log<sub>2</sub>(max(<code>width</code><sub>0</sub>, <code>height</code><sub>0</sub>,
<code>depth</code><sub>0</sub>)) +  1</span></p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>where <span class="eq"><code>width</code><sub>0</sub></span>, <span class="eq"><code>height</code><sub>0</sub></span>, and <span class="eq"><code>depth</code><sub>0</sub></span>
are the dimensions of the largest (most detailed) mip level, <code>0</code>.</p>
</div>
</div>
<div class="sect3">
<h4 id="_corner_sampled_images"><a class="anchor" href="#_corner_sampled_images"></a>Corner-Sampled Images</h4>
<div class="paragraph">
<p>For corner-sampled images, the dimensions of each successive mip level,
<span class="eq">n+1</span>, are:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"></dt>
<dd>
<p><span class="eq"><code>width</code><sub>n+1</sub> = max(<code>width</code><sub>n</sub>/2, 2)</span></p>
</dd>
<dt class="hdlist1"></dt>
<dd>
<p><span class="eq"><code>height</code><sub>n+1</sub> = max(<code>height</code><sub>n</sub>/2,
2)</span></p>
</dd>
<dt class="hdlist1"></dt>
<dd>
<p><span class="eq"><code>depth</code><sub>n+1</sub> = max(<code>depth</code><sub>n</sub>/2, 2)</span></p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>where <span class="eq"><code>width</code><sub>n</sub></span>, <span class="eq"><code>height</code><sub>n</sub></span>, and <span class="eq"><code>depth</code><sub>n</sub></span>
are the dimensions of the next larger mip level, <span class="eq">n</span>.</p>
</div>
<div class="paragraph">
<p>The minimum mip level size is:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>2x2 for two-dimensional images, and</p>
</li>
<li>
<p>2x2x2 for three-dimensional images.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The number of levels in a complete mipmap chain is:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"></dt>
<dd>
<p><span class="eq">log<sub>2</sub>(max(<code>width</code><sub>0</sub>, <code>height</code><sub>0</sub>,
<code>depth</code><sub>0</sub>))</span></p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>where <span class="eq"><code>width</code><sub>0</sub></span>, <span class="eq"><code>height</code><sub>0</sub></span>, and <span class="eq"><code>depth</code><sub>0</sub></span>
are the dimensions of the largest (most detailed) mip level, <code>0</code>.</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="resources-image-layouts"><a class="anchor" href="#resources-image-layouts"></a>Image Layouts</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Images are stored in implementation-dependent opaque layouts in memory.
Each layout has limitations on what kinds of operations are supported for
image subresources using the layout.
At any given time, the data representing an image subresource in memory
exists in a particular layout which is determined by the most recent layout
transition that was performed on that image subresource.
Applications have control over which layout each image subresource uses, and
<strong>can</strong> transition an image subresource from one layout to another.
Transitions <strong>can</strong> happen with an image memory barrier, included as part of a
<a href="synchronization.html#vkCmdPipelineBarrier" class="xref page">vkCmdPipelineBarrier</a> or a <a href="synchronization.html#vkCmdWaitEvents" class="xref page">vkCmdWaitEvents</a> command buffer command
(see <a href="synchronization.html#synchronization-image-memory-barriers" class="xref page">Image Memory Barriers</a>), or as part of a subpass
dependency within a render pass (see <code>VkSubpassDependency</code>).</p>
</div>
<div class="paragraph">
<p>Image layout is per-image subresource.
Separate image subresources of the same image <strong>can</strong> be in different layouts
at the same time, with the exception that depth and stencil aspects of a
given image subresource <strong>can</strong> only be in different layouts if the
<a href="features.html#features-separateDepthStencilLayouts" class="xref page"><code>separateDepthStencilLayouts</code></a>
feature is enabled.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="title">Note</div>
<div class="paragraph">
<p>Each layout <strong>may</strong> offer optimal performance for a specific usage of image
memory.
For example, an image with a layout of
<code>VK_IMAGE_LAYOUT_COLOR_ATTACHMENT_OPTIMAL</code> <strong>may</strong> provide optimal
performance for use as a color attachment, but be unsupported for use in
transfer commands.
Applications <strong>can</strong> transition an image subresource from one layout to another
in order to achieve optimal performance when the image subresource is used
for multiple kinds of operations.
After initialization, applications need not use any layout other than the
general layout, though this <strong>may</strong> produce suboptimal performance on some
implementations.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Upon creation, all image subresources of an image are initially in the same
layout, where that layout is selected by the
<code>VkImageCreateInfo</code>::<code>initialLayout</code> member.
The <code>initialLayout</code> <strong>must</strong> be either <code>VK_IMAGE_LAYOUT_UNDEFINED</code> or
<code>VK_IMAGE_LAYOUT_PREINITIALIZED</code>.
If it is <code>VK_IMAGE_LAYOUT_PREINITIALIZED</code>, then the image data <strong>can</strong> be
preinitialized by the host while using this layout, and the transition away
from this layout will preserve that data.
If it is <code>VK_IMAGE_LAYOUT_UNDEFINED</code>, then the contents of the data are
considered to be <strong>undefined</strong>, and the transition away from this layout is not
guaranteed to preserve that data.
For either of these initial layouts, any image subresources <strong>must</strong> be
transitioned to another layout before they are accessed by the device.</p>
</div>
<div class="paragraph">
<p>Host access to image memory is only well-defined for
<a href="../appendices/glossary.html#glossary-linear-resource" class="xref page">linear</a> images and for image subresources of
those images which are currently in either the
<code>VK_IMAGE_LAYOUT_PREINITIALIZED</code> or <code>VK_IMAGE_LAYOUT_GENERAL</code>
layout.
Calling <a href="#vkGetImageSubresourceLayout">vkGetImageSubresourceLayout</a> for a linear image returns a
subresource layout mapping that is valid for either of those image layouts.</p>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The set of image layouts consists of:</p>
</div>
<div id="VkImageLayout" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_VERSION_1_0
typedef enum VkImageLayout {
    VK_IMAGE_LAYOUT_UNDEFINED = 0,
    VK_IMAGE_LAYOUT_GENERAL = 1,
    VK_IMAGE_LAYOUT_COLOR_ATTACHMENT_OPTIMAL = 2,
    VK_IMAGE_LAYOUT_DEPTH_STENCIL_ATTACHMENT_OPTIMAL = 3,
    VK_IMAGE_LAYOUT_DEPTH_STENCIL_READ_ONLY_OPTIMAL = 4,
    VK_IMAGE_LAYOUT_SHADER_READ_ONLY_OPTIMAL = 5,
    VK_IMAGE_LAYOUT_TRANSFER_SRC_OPTIMAL = 6,
    VK_IMAGE_LAYOUT_TRANSFER_DST_OPTIMAL = 7,
    VK_IMAGE_LAYOUT_PREINITIALIZED = 8,
  // Provided by VK_VERSION_1_1
    VK_IMAGE_LAYOUT_DEPTH_READ_ONLY_STENCIL_ATTACHMENT_OPTIMAL = 1000117000,
  // Provided by VK_VERSION_1_1
    VK_IMAGE_LAYOUT_DEPTH_ATTACHMENT_STENCIL_READ_ONLY_OPTIMAL = 1000117001,
  // Provided by VK_VERSION_1_2
    VK_IMAGE_LAYOUT_DEPTH_ATTACHMENT_OPTIMAL = 1000241000,
  // Provided by VK_VERSION_1_2
    VK_IMAGE_LAYOUT_DEPTH_READ_ONLY_OPTIMAL = 1000241001,
  // Provided by VK_VERSION_1_2
    VK_IMAGE_LAYOUT_STENCIL_ATTACHMENT_OPTIMAL = 1000241002,
  // Provided by VK_VERSION_1_2
    VK_IMAGE_LAYOUT_STENCIL_READ_ONLY_OPTIMAL = 1000241003,
  // Provided by VK_VERSION_1_3
    VK_IMAGE_LAYOUT_READ_ONLY_OPTIMAL = 1000314000,
  // Provided by VK_VERSION_1_3
    VK_IMAGE_LAYOUT_ATTACHMENT_OPTIMAL = 1000314001,
  // Provided by VK_KHR_swapchain
    VK_IMAGE_LAYOUT_PRESENT_SRC_KHR = 1000001002,
  // Provided by VK_KHR_video_decode_queue
    VK_IMAGE_LAYOUT_VIDEO_DECODE_DST_KHR = 1000024000,
  // Provided by VK_KHR_video_decode_queue
    VK_IMAGE_LAYOUT_VIDEO_DECODE_SRC_KHR = 1000024001,
  // Provided by VK_KHR_video_decode_queue
    VK_IMAGE_LAYOUT_VIDEO_DECODE_DPB_KHR = 1000024002,
  // Provided by VK_KHR_shared_presentable_image
    VK_IMAGE_LAYOUT_SHARED_PRESENT_KHR = 1000111000,
  // Provided by VK_EXT_fragment_density_map
    VK_IMAGE_LAYOUT_FRAGMENT_DENSITY_MAP_OPTIMAL_EXT = 1000218000,
  // Provided by VK_KHR_fragment_shading_rate
    VK_IMAGE_LAYOUT_FRAGMENT_SHADING_RATE_ATTACHMENT_OPTIMAL_KHR = 1000164003,
  // Provided by VK_KHR_dynamic_rendering_local_read
    VK_IMAGE_LAYOUT_RENDERING_LOCAL_READ_KHR = 1000232000,
  // Provided by VK_KHR_video_encode_queue
    VK_IMAGE_LAYOUT_VIDEO_ENCODE_DST_KHR = 1000299000,
  // Provided by VK_KHR_video_encode_queue
    VK_IMAGE_LAYOUT_VIDEO_ENCODE_SRC_KHR = 1000299001,
  // Provided by VK_KHR_video_encode_queue
    VK_IMAGE_LAYOUT_VIDEO_ENCODE_DPB_KHR = 1000299002,
  // Provided by VK_EXT_attachment_feedback_loop_layout
    VK_IMAGE_LAYOUT_ATTACHMENT_FEEDBACK_LOOP_OPTIMAL_EXT = 1000339000,
  // Provided by VK_KHR_maintenance2
    VK_IMAGE_LAYOUT_DEPTH_READ_ONLY_STENCIL_ATTACHMENT_OPTIMAL_KHR = VK_IMAGE_LAYOUT_DEPTH_READ_ONLY_STENCIL_ATTACHMENT_OPTIMAL,
  // Provided by VK_KHR_maintenance2
    VK_IMAGE_LAYOUT_DEPTH_ATTACHMENT_STENCIL_READ_ONLY_OPTIMAL_KHR = VK_IMAGE_LAYOUT_DEPTH_ATTACHMENT_STENCIL_READ_ONLY_OPTIMAL,
  // Provided by VK_NV_shading_rate_image
    VK_IMAGE_LAYOUT_SHADING_RATE_OPTIMAL_NV = VK_IMAGE_LAYOUT_FRAGMENT_SHADING_RATE_ATTACHMENT_OPTIMAL_KHR,
  // Provided by VK_KHR_separate_depth_stencil_layouts
    VK_IMAGE_LAYOUT_DEPTH_ATTACHMENT_OPTIMAL_KHR = VK_IMAGE_LAYOUT_DEPTH_ATTACHMENT_OPTIMAL,
  // Provided by VK_KHR_separate_depth_stencil_layouts
    VK_IMAGE_LAYOUT_DEPTH_READ_ONLY_OPTIMAL_KHR = VK_IMAGE_LAYOUT_DEPTH_READ_ONLY_OPTIMAL,
  // Provided by VK_KHR_separate_depth_stencil_layouts
    VK_IMAGE_LAYOUT_STENCIL_ATTACHMENT_OPTIMAL_KHR = VK_IMAGE_LAYOUT_STENCIL_ATTACHMENT_OPTIMAL,
  // Provided by VK_KHR_separate_depth_stencil_layouts
    VK_IMAGE_LAYOUT_STENCIL_READ_ONLY_OPTIMAL_KHR = VK_IMAGE_LAYOUT_STENCIL_READ_ONLY_OPTIMAL,
  // Provided by VK_KHR_synchronization2
    VK_IMAGE_LAYOUT_READ_ONLY_OPTIMAL_KHR = VK_IMAGE_LAYOUT_READ_ONLY_OPTIMAL,
  // Provided by VK_KHR_synchronization2
    VK_IMAGE_LAYOUT_ATTACHMENT_OPTIMAL_KHR = VK_IMAGE_LAYOUT_ATTACHMENT_OPTIMAL,
} VkImageLayout;</code></pre>
</div>
</div>
<div class="paragraph">
<p>The type(s) of device access supported by each layout are:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>VK_IMAGE_LAYOUT_UNDEFINED</code> specifies that the layout is unknown.
Image memory <strong>cannot</strong> be transitioned into this layout.
This layout <strong>can</strong> be used as the <code>initialLayout</code> member of
<a href="#VkImageCreateInfo">VkImageCreateInfo</a>.
This layout <strong>can</strong> be used in place of the current image layout in a
layout transition, but doing so will cause the contents of the image&#8217;s
memory to be <strong>undefined</strong>.</p>
</li>
<li>
<p><code>VK_IMAGE_LAYOUT_PREINITIALIZED</code> specifies that an image&#8217;s memory is
in a defined layout and <strong>can</strong> be populated by data, but that it has not
yet been initialized by the driver.
Image memory <strong>cannot</strong> be transitioned into this layout.
This layout <strong>can</strong> be used as the <code>initialLayout</code> member of
<a href="#VkImageCreateInfo">VkImageCreateInfo</a>.
This layout is intended to be used as the initial layout for an image
whose contents are written by the host, and hence the data <strong>can</strong> be
written to memory immediately, without first executing a layout
transition.
Currently, <code>VK_IMAGE_LAYOUT_PREINITIALIZED</code> is only useful with
<a href="../appendices/glossary.html#glossary-linear-resource" class="xref page">linear</a> images because there is not a
standard layout defined for <code>VK_IMAGE_TILING_OPTIMAL</code> images.</p>
</li>
<li>
<p><code>VK_IMAGE_LAYOUT_GENERAL</code> supports all types of device access.</p>
</li>
<li>
<p><code>VK_IMAGE_LAYOUT_ATTACHMENT_OPTIMAL</code> specifies a layout that <strong>must</strong>
only be used with attachment accesses in the graphics pipeline.</p>
</li>
<li>
<p><code>VK_IMAGE_LAYOUT_READ_ONLY_OPTIMAL</code> specifies a layout allowing read
only access as an attachment, or in shaders as a sampled image, combined
image/sampler, or input attachment.</p>
</li>
<li>
<p><code>VK_IMAGE_LAYOUT_COLOR_ATTACHMENT_OPTIMAL</code> <strong>must</strong> only be used as a
color or resolve attachment in a <code>VkFramebuffer</code>.
This layout is valid only for image subresources of images created with
the <code>VK_IMAGE_USAGE_COLOR_ATTACHMENT_BIT</code> usage bit enabled.</p>
</li>
<li>
<p><code>VK_IMAGE_LAYOUT_DEPTH_STENCIL_ATTACHMENT_OPTIMAL</code> specifies a
layout for both the depth and stencil aspects of a depth/stencil format
image allowing read and write access as a depth/stencil attachment.
It is equivalent to <code>VK_IMAGE_LAYOUT_DEPTH_ATTACHMENT_OPTIMAL</code> and
<code>VK_IMAGE_LAYOUT_STENCIL_ATTACHMENT_OPTIMAL</code>.</p>
</li>
<li>
<p><code>VK_IMAGE_LAYOUT_DEPTH_STENCIL_READ_ONLY_OPTIMAL</code> specifies a layout
for both the depth and stencil aspects of a depth/stencil format image
allowing read only access as a depth/stencil attachment or in shaders as
a sampled image, combined image/sampler, or input attachment.
It is equivalent to <code>VK_IMAGE_LAYOUT_DEPTH_READ_ONLY_OPTIMAL</code> and
<code>VK_IMAGE_LAYOUT_STENCIL_READ_ONLY_OPTIMAL</code>.</p>
</li>
<li>
<p><code>VK_IMAGE_LAYOUT_DEPTH_READ_ONLY_STENCIL_ATTACHMENT_OPTIMAL</code>
specifies a layout for depth/stencil format images allowing read and
write access to the stencil aspect as a stencil attachment, and read
only access to the depth aspect as a depth attachment or in shaders as a
sampled image, combined image/sampler, or input attachment.
It is equivalent to <code>VK_IMAGE_LAYOUT_DEPTH_READ_ONLY_OPTIMAL</code> and
<code>VK_IMAGE_LAYOUT_STENCIL_ATTACHMENT_OPTIMAL</code>.</p>
</li>
<li>
<p><code>VK_IMAGE_LAYOUT_DEPTH_ATTACHMENT_STENCIL_READ_ONLY_OPTIMAL</code>
specifies a layout for depth/stencil format images allowing read and
write access to the depth aspect as a depth attachment, and read only
access to the stencil aspect as a stencil attachment or in shaders as a
sampled image, combined image/sampler, or input attachment.
It is equivalent to <code>VK_IMAGE_LAYOUT_DEPTH_ATTACHMENT_OPTIMAL</code> and
<code>VK_IMAGE_LAYOUT_STENCIL_READ_ONLY_OPTIMAL</code>.</p>
</li>
<li>
<p><code>VK_IMAGE_LAYOUT_DEPTH_ATTACHMENT_OPTIMAL</code> specifies a layout for
the depth aspect of a depth/stencil format image allowing read and write
access as a depth attachment.</p>
</li>
<li>
<p><code>VK_IMAGE_LAYOUT_DEPTH_READ_ONLY_OPTIMAL</code> specifies a layout for the
depth aspect of a depth/stencil format image allowing read-only access
as a depth attachment or in shaders as a sampled image, combined
image/sampler, or input attachment.</p>
</li>
<li>
<p><code>VK_IMAGE_LAYOUT_STENCIL_ATTACHMENT_OPTIMAL</code> specifies a layout for
the stencil aspect of a depth/stencil format image allowing read and
write access as a stencil attachment.</p>
</li>
<li>
<p><code>VK_IMAGE_LAYOUT_STENCIL_READ_ONLY_OPTIMAL</code> specifies a layout for
the stencil aspect of a depth/stencil format image allowing read-only
access as a stencil attachment or in shaders as a sampled image,
combined image/sampler, or input attachment.</p>
</li>
<li>
<p><code>VK_IMAGE_LAYOUT_SHADER_READ_ONLY_OPTIMAL</code> specifies a layout
allowing read-only access in a shader as a sampled image, combined
image/sampler, or input attachment.
This layout is valid only for image subresources of images created with
the <code>VK_IMAGE_USAGE_SAMPLED_BIT</code> or
<code>VK_IMAGE_USAGE_INPUT_ATTACHMENT_BIT</code> usage bits enabled.</p>
</li>
<li>
<p><code>VK_IMAGE_LAYOUT_TRANSFER_SRC_OPTIMAL</code> <strong>must</strong> only be used as a
source image of a transfer command (see the definition of
<a href="synchronization.html#synchronization-pipeline-stages-transfer" class="xref page">    <code>VK_PIPELINE_STAGE_TRANSFER_BIT</code></a>).
This layout is valid only for image subresources of images created with
the <code>VK_IMAGE_USAGE_TRANSFER_SRC_BIT</code> usage bit enabled.</p>
</li>
<li>
<p><code>VK_IMAGE_LAYOUT_TRANSFER_DST_OPTIMAL</code> <strong>must</strong> only be used as a
destination image of a transfer command.
This layout is valid only for image subresources of images created with
the <code>VK_IMAGE_USAGE_TRANSFER_DST_BIT</code> usage bit enabled.</p>
</li>
<li>
<p><code>VK_IMAGE_LAYOUT_PRESENT_SRC_KHR</code> <strong>must</strong> only be used for presenting
a presentable image for display.</p>
</li>
<li>
<p><code>VK_IMAGE_LAYOUT_SHARED_PRESENT_KHR</code> is valid only for shared
presentable images, and <strong>must</strong> be used for any usage the image supports.</p>
</li>
<li>
<p><code>VK_IMAGE_LAYOUT_FRAGMENT_SHADING_RATE_ATTACHMENT_OPTIMAL_KHR</code> <strong>must</strong>
    only be used as a
    <a href="primsrast.html#primsrast-fragment-shading-rate-attachment" class="xref page">fragment shading rate    attachment</a>
or
    <a href="primsrast.html#primsrast-shading-rate-image" class="xref page">shading rate image</a>.
    This layout is valid only for image subresources of images created with
    the <code>VK_IMAGE_USAGE_FRAGMENT_SHADING_RATE_ATTACHMENT_BIT_KHR</code> usage
    bit enabled.</p>
</li>
<li>
<p><code>VK_IMAGE_LAYOUT_FRAGMENT_DENSITY_MAP_OPTIMAL_EXT</code> <strong>must</strong> only be
used as a fragment density map attachment in a <code>VkRenderPass</code>.
This layout is valid only for image subresources of images created with
the <code>VK_IMAGE_USAGE_FRAGMENT_DENSITY_MAP_BIT_EXT</code> usage bit enabled.</p>
</li>
<li>
<p><code>VK_IMAGE_LAYOUT_VIDEO_DECODE_DST_KHR</code> <strong>must</strong> only be used as a
<a href="videocoding.html#decode-output-picture" class="xref page">decode output picture</a> in a
<a href="videocoding.html#video-decode-operations" class="xref page">video decode operation</a>.
This layout is valid only for image subresources of images created with
the <code>VK_IMAGE_USAGE_VIDEO_DECODE_DST_BIT_KHR</code> usage bit enabled.</p>
</li>
<li>
<p><code>VK_IMAGE_LAYOUT_VIDEO_DECODE_SRC_KHR</code> is reserved for future use.</p>
</li>
<li>
<p><code>VK_IMAGE_LAYOUT_VIDEO_DECODE_DPB_KHR</code> <strong>must</strong> only be used as an
output <a href="videocoding.html#reconstructed-picture" class="xref page">reconstructed picture</a> or an input
<a href="videocoding.html#reference-picture" class="xref page">reference picture</a> in a <a href="videocoding.html#video-decode-operations" class="xref page">    video decode operation</a>.
This layout is valid only for image subresources of images created with
the <code>VK_IMAGE_USAGE_VIDEO_DECODE_DPB_BIT_KHR</code> usage bit enabled.</p>
</li>
<li>
<p><code>VK_IMAGE_LAYOUT_VIDEO_ENCODE_DST_KHR</code> is reserved for future use.</p>
</li>
<li>
<p><code>VK_IMAGE_LAYOUT_VIDEO_ENCODE_SRC_KHR</code> <strong>must</strong> only be used as an
<a href="videocoding.html#encode-input-picture" class="xref page">encode input picture</a> in a
<a href="videocoding.html#video-encode-operations" class="xref page">video encode operation</a>.
This layout is valid only for image subresources of images created with
the <code>VK_IMAGE_USAGE_VIDEO_ENCODE_SRC_BIT_KHR</code> usage bit enabled.</p>
</li>
<li>
<p><code>VK_IMAGE_LAYOUT_VIDEO_ENCODE_DPB_KHR</code> <strong>must</strong> only be used as an
output <a href="videocoding.html#reconstructed-picture" class="xref page">reconstructed picture</a> or an input
<a href="videocoding.html#reference-picture" class="xref page">reference picture</a> in a <a href="videocoding.html#video-encode-operations" class="xref page">    video encode operation</a>.
This layout is valid only for image subresources of images created with
the <code>VK_IMAGE_USAGE_VIDEO_ENCODE_DPB_BIT_KHR</code> usage bit enabled.</p>
</li>
<li>
<p><code>VK_IMAGE_LAYOUT_ATTACHMENT_FEEDBACK_LOOP_OPTIMAL_EXT</code> <strong>must</strong> only be
used as either a color attachment or depth/stencil attachment in a
<code>VkFramebuffer</code> and/or read-only access in a shader as a sampled
image, combined image/sampler, or input attachment.
This layout is valid only for image subresources of images created with
the <code>VK_IMAGE_USAGE_ATTACHMENT_FEEDBACK_LOOP_BIT_EXT</code> usage bit
enabled and either the <code>VK_IMAGE_USAGE_COLOR_ATTACHMENT_BIT</code> or
<code>VK_IMAGE_USAGE_DEPTH_STENCIL_ATTACHMENT_BIT</code> and either the
<code>VK_IMAGE_USAGE_INPUT_ATTACHMENT_BIT</code> or
<code>VK_IMAGE_USAGE_SAMPLED_BIT</code> usage bits enabled.</p>
</li>
<li>
<p><code>VK_IMAGE_LAYOUT_RENDERING_LOCAL_READ_KHR</code> <strong>must</strong> only be used as
either a storage image, or a color or depth/stencil attachment and an
input attachment.
This layout is valid only for image subresources of images created with
either <code>VK_IMAGE_USAGE_STORAGE_BIT</code>, or both
<code>VK_IMAGE_USAGE_INPUT_ATTACHMENT_BIT</code> and either of
<code>VK_IMAGE_USAGE_COLOR_ATTACHMENT_BIT</code> or
<code>VK_IMAGE_USAGE_DEPTH_STENCIL_ATTACHMENT_BIT</code>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The layout of each image subresource is not a state of the image subresource
itself, but is rather a property of how the data in memory is organized, and
thus for each mechanism of accessing an image in the API the application
<strong>must</strong> specify a parameter or structure member that indicates which image
layout the image subresource(s) are considered to be in when the image will
be accessed.
For transfer commands, this is a parameter to the command (see <a href="clears.html#clears" class="xref page">Clear Commands</a>
and <a href="copies.html#copies" class="xref page">Copy Commands</a>).
For use as a framebuffer attachment, this is a member in the substructures
of the <a href="renderpass.html#VkRenderPassCreateInfo" class="xref page">VkRenderPassCreateInfo</a> (see <a href="renderpass.html#renderpass" class="xref page">Render Pass</a>).
For use in a descriptor set, this is a member in the
<code>VkDescriptorImageInfo</code> structure (see <a href="descriptorsets.html#descriptorsets-updates" class="xref page">Descriptor Set Updates</a>).</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="resources-image-layouts-matching-rule"><a class="anchor" href="#resources-image-layouts-matching-rule"></a>Image Layout Matching Rules</h3>
<div class="paragraph">
<p>At the time that any command buffer command accessing an image executes on
any queue, the layouts of the image subresources that are accessed <strong>must</strong> all
match exactly the layout specified via the API controlling those
accesses,
except in case of accesses to an image with a depth/stencil format performed
through descriptors referring to only a single aspect of the image, where
the following relaxed matching rules apply:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Descriptors referring just to the depth aspect of a depth/stencil image
only need to match in the image layout of the depth aspect, thus
<code>VK_IMAGE_LAYOUT_DEPTH_STENCIL_READ_ONLY_OPTIMAL</code> and
<code>VK_IMAGE_LAYOUT_DEPTH_READ_ONLY_STENCIL_ATTACHMENT_OPTIMAL</code> are
considered to match.</p>
</li>
<li>
<p>Descriptors referring just to the stencil aspect of a depth/stencil
image only need to match in the image layout of the stencil aspect, thus
<code>VK_IMAGE_LAYOUT_DEPTH_STENCIL_READ_ONLY_OPTIMAL</code> and
<code>VK_IMAGE_LAYOUT_DEPTH_ATTACHMENT_STENCIL_READ_ONLY_OPTIMAL</code> are
considered to match.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>When performing a layout transition on an image subresource, the old layout
value <strong>must</strong> either equal the current layout of the image subresource (at the
time the transition executes), or else be <code>VK_IMAGE_LAYOUT_UNDEFINED</code>
(implying that the contents of the image subresource need not be preserved).
The new layout used in a transition <strong>must</strong> not be
<code>VK_IMAGE_LAYOUT_UNDEFINED</code> or <code>VK_IMAGE_LAYOUT_PREINITIALIZED</code>.</p>
</div>
<div class="paragraph">
<p>The image layout of each image subresource of a depth/stencil image created
with <code>VK_IMAGE_CREATE_SAMPLE_LOCATIONS_COMPATIBLE_DEPTH_BIT_EXT</code> is
dependent on the last sample locations used to render to the image
subresource as a depth/stencil attachment, thus applications <strong>must</strong> provide
the same sample locations that were last used to render to the given image
subresource whenever a layout transition of the image subresource happens,
otherwise the contents of the depth aspect of the image subresource become
<strong>undefined</strong>.</p>
</div>
<div class="paragraph">
<p>In addition, depth reads from a depth/stencil attachment referring to an
image subresource range of a depth/stencil image created with
<code>VK_IMAGE_CREATE_SAMPLE_LOCATIONS_COMPATIBLE_DEPTH_BIT_EXT</code> using
different sample locations than what have been last used to perform depth
writes to the image subresources of the same image subresource range return
<strong>undefined</strong> values.</p>
</div>
<div class="paragraph">
<p>Similarly, depth writes to a depth/stencil attachment referring to an image
subresource range of a depth/stencil image created with
<code>VK_IMAGE_CREATE_SAMPLE_LOCATIONS_COMPATIBLE_DEPTH_BIT_EXT</code> using
different sample locations than what have been last used to perform depth
writes to the image subresources of the same image subresource range make
the contents of the depth aspect of those image subresources <strong>undefined</strong>.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="resources-image-views"><a class="anchor" href="#resources-image-views"></a>Image Views</h2>
<div class="sectionbody">
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Image objects are not directly accessed by pipeline shaders for reading or
writing image data.
Instead, <em>image views</em> representing contiguous ranges of the image
subresources and containing additional metadata are used for that purpose.
Views <strong>must</strong> be created on images of compatible types, and <strong>must</strong> represent a
valid subset of image subresources.</p>
</div>
<div class="paragraph">
<p>Image views are represented by <code>VkImageView</code> handles:</p>
</div>
<div id="VkImageView" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_VERSION_1_0
VK_DEFINE_NON_DISPATCHABLE_HANDLE(VkImageView)</code></pre>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p><code>VK_REMAINING_ARRAY_LAYERS</code> is a special constant value used for image
views to indicate that all remaining array layers in an image after the base
layer should be included in the view.</p>
</div>
<div id="VK_REMAINING_ARRAY_LAYERS" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">#define VK_REMAINING_ARRAY_LAYERS         (~0U)</code></pre>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p><code>VK_REMAINING_MIP_LEVELS</code> is a special constant value used for image
views to indicate that all remaining mipmap levels in an image after the
base level should be included in the view.</p>
</div>
<div id="VK_REMAINING_MIP_LEVELS" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">#define VK_REMAINING_MIP_LEVELS           (~0U)</code></pre>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The types of image views that <strong>can</strong> be created are:</p>
</div>
<div id="VkImageViewType" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_VERSION_1_0
typedef enum VkImageViewType {
    VK_IMAGE_VIEW_TYPE_1D = 0,
    VK_IMAGE_VIEW_TYPE_2D = 1,
    VK_IMAGE_VIEW_TYPE_3D = 2,
    VK_IMAGE_VIEW_TYPE_CUBE = 3,
    VK_IMAGE_VIEW_TYPE_1D_ARRAY = 4,
    VK_IMAGE_VIEW_TYPE_2D_ARRAY = 5,
    VK_IMAGE_VIEW_TYPE_CUBE_ARRAY = 6,
} VkImageViewType;</code></pre>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>To create an image view, call:</p>
</div>
<div id="vkCreateImageView" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_VERSION_1_0
VkResult vkCreateImageView(
    VkDevice                                    device,
    const VkImageViewCreateInfo*                pCreateInfo,
    const VkAllocationCallbacks*                pAllocator,
    VkImageView*                                pView);</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>device</code> is the logical device that creates the image view.</p>
</li>
<li>
<p><code>pCreateInfo</code> is a pointer to a <code>VkImageViewCreateInfo</code>
structure containing parameters to be used to create the image view.</p>
</li>
<li>
<p><code>pAllocator</code> controls host memory allocation as described in the
<a href="memory.html#memory-allocation" class="xref page">Memory Allocation</a> chapter.</p>
</li>
<li>
<p><code>pView</code> is a pointer to a <a href="#VkImageView">VkImageView</a> handle in which the
resulting image view object is returned.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCreateImageView-image-09179" href="#VUID-vkCreateImageView-image-09179"></a> <span class="vuid">VUID-vkCreateImageView-image-09179</span><br>

<a href="#VkImageViewCreateInfo">VkImageViewCreateInfo</a>::<code>image</code> <strong>must</strong> have been created from
<code>device</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCreateImageView-device-parameter" href="#VUID-vkCreateImageView-device-parameter"></a> <span class="vuid">VUID-vkCreateImageView-device-parameter</span><br>
 <code>device</code> <strong>must</strong> be a valid <a href="devsandqueues.html#VkDevice" class="xref page">VkDevice</a> handle</p>
</li>
<li>
<p><a id="VUID-vkCreateImageView-pCreateInfo-parameter" href="#VUID-vkCreateImageView-pCreateInfo-parameter"></a> <span class="vuid">VUID-vkCreateImageView-pCreateInfo-parameter</span><br>
 <code>pCreateInfo</code> <strong>must</strong> be a valid pointer to a valid <a href="#VkImageViewCreateInfo">VkImageViewCreateInfo</a> structure</p>
</li>
<li>
<p><a id="VUID-vkCreateImageView-pAllocator-parameter" href="#VUID-vkCreateImageView-pAllocator-parameter"></a> <span class="vuid">VUID-vkCreateImageView-pAllocator-parameter</span><br>
 If <code>pAllocator</code> is not <code>NULL</code>, <code>pAllocator</code> <strong>must</strong> be a valid pointer to a valid <a href="memory.html#VkAllocationCallbacks" class="xref page">VkAllocationCallbacks</a> structure</p>
</li>
<li>
<p><a id="VUID-vkCreateImageView-pView-parameter" href="#VUID-vkCreateImageView-pView-parameter"></a> <span class="vuid">VUID-vkCreateImageView-pView-parameter</span><br>
 <code>pView</code> <strong>must</strong> be a valid pointer to a <a href="#VkImageView">VkImageView</a> handle</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Return Codes</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><a href="fundamentals.html#fundamentals-successcodes" class="xref page">Success</a></dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><code>VK_SUCCESS</code></p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1"><a href="fundamentals.html#fundamentals-errorcodes" class="xref page">Failure</a></dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><code>VK_ERROR_OUT_OF_HOST_MEMORY</code></p>
</li>
<li>
<p><code>VK_ERROR_OUT_OF_DEVICE_MEMORY</code></p>
</li>
<li>
<p><code>VK_ERROR_INVALID_OPAQUE_CAPTURE_ADDRESS_KHR</code></p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>VkImageViewCreateInfo</code> structure is defined as:</p>
</div>
<div id="VkImageViewCreateInfo" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_VERSION_1_0
typedef struct VkImageViewCreateInfo {
    VkStructureType            sType;
    const void*                pNext;
    VkImageViewCreateFlags     flags;
    VkImage                    image;
    VkImageViewType            viewType;
    VkFormat                   format;
    VkComponentMapping         components;
    VkImageSubresourceRange    subresourceRange;
} VkImageViewCreateInfo;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is a <a href="fundamentals.html#VkStructureType" class="xref page">VkStructureType</a> value identifying this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>flags</code> is a bitmask of <a href="#VkImageViewCreateFlagBits">VkImageViewCreateFlagBits</a> specifying
additional parameters of the image view.</p>
</li>
<li>
<p><code>image</code> is a <a href="#VkImage">VkImage</a> on which the view will be created.</p>
</li>
<li>
<p><code>viewType</code> is a <a href="#VkImageViewType">VkImageViewType</a> value specifying the type of
the image view.</p>
</li>
<li>
<p><code>format</code> is a <a href="formats.html#VkFormat" class="xref page">VkFormat</a> specifying the format and type used to
interpret texel blocks of the image.</p>
</li>
<li>
<p><code>components</code> is a <a href="#VkComponentMapping">VkComponentMapping</a> structure specifying a
remapping of color components (or of depth or stencil components after
they have been converted into color components).</p>
</li>
<li>
<p><code>subresourceRange</code> is a <a href="#VkImageSubresourceRange">VkImageSubresourceRange</a> structure
selecting the set of mipmap levels and array layers to be accessible to
the view.</p>
</li>
</ul>
</div>
<div id="resources-image-inherited-usage" class="paragraph">
<p>Some of the <code>image</code> creation parameters are inherited by the view.
In particular, image view creation inherits the implicit parameter
<code>usage</code> specifying the allowed usages of the image view that, by
default, takes the value of the corresponding <code>usage</code> parameter
specified in <a href="#VkImageCreateInfo">VkImageCreateInfo</a> at image creation time.
The implicit <code>usage</code> <strong>can</strong> be overridden by adding a
<a href="#VkImageViewUsageCreateInfo">VkImageViewUsageCreateInfo</a> structure to the <code>pNext</code> chain, but the
view usage <strong>must</strong> be a subset of the image usage.
If <code>image</code> has a depth-stencil format and was created with a
<a href="#VkImageStencilUsageCreateInfo">VkImageStencilUsageCreateInfo</a> structure included in the <code>pNext</code>
chain of <a href="#VkImageCreateInfo">VkImageCreateInfo</a>, the usage is calculated based on the
<code>subresource.aspectMask</code> provided:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>If <code>aspectMask</code> includes only <code>VK_IMAGE_ASPECT_STENCIL_BIT</code>, the
implicit <code>usage</code> is equal to
<a href="#VkImageStencilUsageCreateInfo">VkImageStencilUsageCreateInfo</a>::<code>stencilUsage</code>.</p>
</li>
<li>
<p>If <code>aspectMask</code> includes only <code>VK_IMAGE_ASPECT_DEPTH_BIT</code>, the
implicit <code>usage</code> is equal to <a href="#VkImageCreateInfo">VkImageCreateInfo</a>::<code>usage</code>.</p>
</li>
<li>
<p>If both aspects are included in <code>aspectMask</code>, the implicit
<code>usage</code> is equal to the intersection of
<a href="#VkImageCreateInfo">VkImageCreateInfo</a>::<code>usage</code> and
<a href="#VkImageStencilUsageCreateInfo">VkImageStencilUsageCreateInfo</a>::<code>stencilUsage</code>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>If <code>image</code> is a 3D image, its Z range <strong>can</strong> be restricted to a subset by
adding a <a href="#VkImageViewSlicedCreateInfoEXT">VkImageViewSlicedCreateInfoEXT</a> to the <code>pNext</code> chain.</p>
</div>
<div class="paragraph">
<p>If <code>image</code> was created with the <code>VK_IMAGE_CREATE_MUTABLE_FORMAT_BIT</code>
flag,
and if the <code>format</code> of the image is not
<a href="formats.html#formats-requiring-sampler-ycbcr-conversion" class="xref page">multi-planar</a>,
<code>format</code> <strong>can</strong> be different from the image&#8217;s format, but if
<code>image</code> was created without the
<code>VK_IMAGE_CREATE_BLOCK_TEXEL_VIEW_COMPATIBLE_BIT</code> flag and
they are not equal they <strong>must</strong> be <em>compatible</em>.
Image format compatibility is defined in the
<a href="formats.html#formats-compatibility-classes" class="xref page">Format Compatibility Classes</a> section.
Views of compatible formats will have the same mapping between texel
coordinates and memory locations irrespective of the <code>format</code>, with only
the interpretation of the bit pattern changing.</p>
</div>
<div id="image-views-plane-promotion" class="paragraph">
<p>If <code>image</code> was created with a
<a href="formats.html#formats-requiring-sampler-ycbcr-conversion" class="xref page">multi-planar</a> format, and the
image view&#8217;s <code>aspectMask</code> is one of <code>VK_IMAGE_ASPECT_PLANE_0_BIT</code>,
<code>VK_IMAGE_ASPECT_PLANE_1_BIT</code> or <code>VK_IMAGE_ASPECT_PLANE_2_BIT</code>, the
view&#8217;s aspect mask is considered to be equivalent to
<code>VK_IMAGE_ASPECT_COLOR_BIT</code> when used as a framebuffer attachment.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="title">Note</div>
<div class="paragraph">
<p>Values intended to be used with one view format <strong>may</strong> not be exactly
preserved when written or read through a different format.
For example, an integer value that happens to have the bit pattern of a
floating point denorm or NaN <strong>may</strong> be flushed or canonicalized when written
or read through a view with a floating point format.
Similarly, a value written through a signed normalized format that has a bit
pattern exactly equal to <span class="eq">-2<sup>b</sup></span> <strong>may</strong> be changed to <span class="eq">-2<sup>b</sup> +  1</span>
as described in <a href="fundamentals.html#fundamentals-fixedfpconv" class="xref page">Conversion from Normalized Fixed-Point to Floating-Point</a>.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>If <code>image</code> was created with the
<code>VK_IMAGE_CREATE_BLOCK_TEXEL_VIEW_COMPATIBLE_BIT</code> flag, <code>format</code>
<strong>must</strong> be <em>compatible</em> with the image&#8217;s format as described above; or <strong>must</strong>
be an uncompressed format, in which case it <strong>must</strong> be
<a href="formats.html#formats-size-compatibility" class="xref page"><em>size-compatible</em></a> with the image&#8217;s format.
In this case, the resulting image view&#8217;s texel dimensions equal the
dimensions of the selected mip level divided by the compressed texel block
size and rounded up.</p>
</div>
<div class="paragraph">
<p>The <a href="#VkComponentMapping">VkComponentMapping</a> <code>components</code> member describes a remapping
from components of the image to components of the vector returned by shader
image instructions.
This remapping <strong>must</strong> be the identity swizzle for storage image descriptors,
input attachment descriptors,
framebuffer attachments, and any <code>VkImageView</code> used with a combined
image sampler that enables <a href="samplers.html#samplers-YCbCr-conversion" class="xref page">sampler YC<sub>B</sub>C<sub>R</sub> conversion</a>.</p>
</div>
<div class="paragraph">
<p>If the image view is to be used with a sampler which supports
<a href="samplers.html#samplers-YCbCr-conversion" class="xref page">sampler YC<sub>B</sub>C<sub>R</sub> conversion</a>, an <em>identically
defined object</em> of type <a href="samplers.html#VkSamplerYcbcrConversion" class="xref page">VkSamplerYcbcrConversion</a> to that used to
create the sampler <strong>must</strong> be passed to <a href="#vkCreateImageView">vkCreateImageView</a> in a
<a href="samplers.html#VkSamplerYcbcrConversionInfo" class="xref page">VkSamplerYcbcrConversionInfo</a> included in the <code>pNext</code> chain of
<a href="#VkImageViewCreateInfo">VkImageViewCreateInfo</a>.
Conversely, if a <a href="samplers.html#VkSamplerYcbcrConversion" class="xref page">VkSamplerYcbcrConversion</a> object is passed to
<a href="#vkCreateImageView">vkCreateImageView</a>, an identically defined
<a href="samplers.html#VkSamplerYcbcrConversion" class="xref page">VkSamplerYcbcrConversion</a> object <strong>must</strong> be used when sampling the image.</p>
</div>
<div id="image-views-requiring-sampler-ycbcr-conversion" class="paragraph">
<p>If the image has a
<a href="formats.html#formats-requiring-sampler-ycbcr-conversion" class="xref page">multi-planar</a> <code>format</code>,
<code>subresourceRange.aspectMask</code> is <code>VK_IMAGE_ASPECT_COLOR_BIT</code>, and
<code>usage</code> includes <code>VK_IMAGE_USAGE_SAMPLED_BIT</code>, then the <code>format</code>
<strong>must</strong> be identical to the image <code>format</code> and the sampler to be used with
the image view <strong>must</strong> enable <a href="samplers.html#samplers-YCbCr-conversion" class="xref page">sampler YC<sub>B</sub>C<sub>R</sub> conversion</a>.</p>
</div>
<div class="paragraph">
<p>When such an image is used in a <a href="videocoding.html#video-coding" class="xref page">video coding</a> operation, the
<a href="samplers.html#samplers-YCbCr-conversion" class="xref page">sampler YC<sub>B</sub>C<sub>R</sub> conversion</a> has no effect.</p>
</div>
<div class="paragraph">
<p>If <code>image</code> was created with the <code>VK_IMAGE_CREATE_MUTABLE_FORMAT_BIT</code>
and the image has a
<a href="formats.html#formats-requiring-sampler-ycbcr-conversion" class="xref page">multi-planar</a> <code>format</code>,
and if <code>subresourceRange.aspectMask</code> is
<code>VK_IMAGE_ASPECT_PLANE_0_BIT</code>, <code>VK_IMAGE_ASPECT_PLANE_1_BIT</code>, or
<code>VK_IMAGE_ASPECT_PLANE_2_BIT</code>, <code>format</code> <strong>must</strong> be
<a href="formats.html#formats-compatible-planes" class="xref page">compatible</a> with the corresponding plane of the
image, and the sampler to be used with the image view <strong>must</strong> not enable
<a href="samplers.html#samplers-YCbCr-conversion" class="xref page">sampler YC<sub>B</sub>C<sub>R</sub> conversion</a>.
The <code>width</code> and <code>height</code> of the single-plane image view <strong>must</strong> be
derived from the multi-planar image&#8217;s dimensions in the manner listed for
<a href="formats.html#formats-compatible-planes" class="xref page">plane compatibility</a> for the plane.</p>
</div>
<div class="paragraph">
<p>Any view of an image plane will have the same mapping between texel
coordinates and memory locations as used by the components of the color
aspect, subject to the formulae relating texel coordinates to
lower-resolution planes as described in <a href="textures.html#textures-chroma-reconstruction" class="xref page">Chroma Reconstruction</a>.
That is, if an R or B plane has a reduced resolution relative to the G plane
of the multi-planar image, the image view operates using the (<em>u<sub>plane</sub></em>,
<em>v<sub>plane</sub></em>) unnormalized coordinates of the reduced-resolution plane, and
these coordinates access the same memory locations as the (<em>u<sub>color</sub></em>,
<em>v<sub>color</sub></em>) unnormalized coordinates of the color aspect for which chroma
reconstruction operations operate on the same (<em>u<sub>plane</sub></em>, <em>v<sub>plane</sub></em>) or
(<em>i<sub>plane</sub></em>, <em>j<sub>plane</sub></em>) coordinates.</p>
</div>
<table id="resources-image-views-compatibility" class="tableblock frame-all grid-all stretch">
<caption class="title">Table 1. Image type and image view type compatibility requirements</caption>
<colgroup>
<col style="width: 41.1764%;">
<col style="width: 58.8236%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Image View Type</th>
<th class="tableblock halign-left valign-top">Compatible Image Types</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>VK_IMAGE_VIEW_TYPE_1D</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>VK_IMAGE_TYPE_1D</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>VK_IMAGE_VIEW_TYPE_1D_ARRAY</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>VK_IMAGE_TYPE_1D</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>VK_IMAGE_VIEW_TYPE_2D</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>VK_IMAGE_TYPE_2D</code>
, <code>VK_IMAGE_TYPE_3D</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>VK_IMAGE_VIEW_TYPE_2D_ARRAY</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>VK_IMAGE_TYPE_2D</code>
, <code>VK_IMAGE_TYPE_3D</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>VK_IMAGE_VIEW_TYPE_CUBE</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>VK_IMAGE_TYPE_2D</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>VK_IMAGE_VIEW_TYPE_CUBE_ARRAY</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>VK_IMAGE_TYPE_2D</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>VK_IMAGE_VIEW_TYPE_3D</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>VK_IMAGE_TYPE_3D</code></p></td>
</tr>
</tbody>
</table>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkImageViewCreateInfo-image-01003" href="#VUID-VkImageViewCreateInfo-image-01003"></a> <span class="vuid">VUID-VkImageViewCreateInfo-image-01003</span><br>

If <code>image</code> was not created with
<code>VK_IMAGE_CREATE_CUBE_COMPATIBLE_BIT</code> then <code>viewType</code> <strong>must</strong> not
be <code>VK_IMAGE_VIEW_TYPE_CUBE</code> or <code>VK_IMAGE_VIEW_TYPE_CUBE_ARRAY</code></p>
</li>
<li>
<p><a id="VUID-VkImageViewCreateInfo-viewType-01004" href="#VUID-VkImageViewCreateInfo-viewType-01004"></a> <span class="vuid">VUID-VkImageViewCreateInfo-viewType-01004</span><br>

If the <a href="features.html#features-imageCubeArray" class="xref page"><code>imageCubeArray</code></a> feature is not
enabled, <code>viewType</code> <strong>must</strong> not be <code>VK_IMAGE_VIEW_TYPE_CUBE_ARRAY</code></p>
</li>
<li>
<p><a id="VUID-VkImageViewCreateInfo-image-06723" href="#VUID-VkImageViewCreateInfo-image-06723"></a> <span class="vuid">VUID-VkImageViewCreateInfo-image-06723</span><br>

If <code>image</code> was created with <code>VK_IMAGE_TYPE_3D</code> but without
<code>VK_IMAGE_CREATE_2D_ARRAY_COMPATIBLE_BIT</code> set then <code>viewType</code>
<strong>must</strong> not be <code>VK_IMAGE_VIEW_TYPE_2D_ARRAY</code></p>
</li>
<li>
<p><a id="VUID-VkImageViewCreateInfo-image-06728" href="#VUID-VkImageViewCreateInfo-image-06728"></a> <span class="vuid">VUID-VkImageViewCreateInfo-image-06728</span><br>

If <code>image</code> was created with <code>VK_IMAGE_TYPE_3D</code> but without
<code>VK_IMAGE_CREATE_2D_ARRAY_COMPATIBLE_BIT</code> or
<code>VK_IMAGE_CREATE_2D_VIEW_COMPATIBLE_BIT_EXT</code> set, then
<code>viewType</code> <strong>must</strong> not be <code>VK_IMAGE_VIEW_TYPE_2D</code></p>
</li>
<li>
<p><a id="VUID-VkImageViewCreateInfo-image-04970" href="#VUID-VkImageViewCreateInfo-image-04970"></a> <span class="vuid">VUID-VkImageViewCreateInfo-image-04970</span><br>

If <code>image</code> was created with <code>VK_IMAGE_TYPE_3D</code> and
<code>viewType</code> is <code>VK_IMAGE_VIEW_TYPE_2D</code> or
<code>VK_IMAGE_VIEW_TYPE_2D_ARRAY</code> then <code>subresourceRange.levelCount</code>
<strong>must</strong> be 1</p>
</li>
<li>
<p><a id="VUID-VkImageViewCreateInfo-image-04971" href="#VUID-VkImageViewCreateInfo-image-04971"></a> <span class="vuid">VUID-VkImageViewCreateInfo-image-04971</span><br>

If <code>image</code> was created with <code>VK_IMAGE_TYPE_3D</code> and
<code>viewType</code> is <code>VK_IMAGE_VIEW_TYPE_2D</code> or
<code>VK_IMAGE_VIEW_TYPE_2D_ARRAY</code> then
<a href="#VkImageCreateInfo">VkImageCreateInfo</a>::<code>flags</code> <strong>must</strong> not contain any of
<code>VK_IMAGE_CREATE_SPARSE_BINDING_BIT</code>,
<code>VK_IMAGE_CREATE_SPARSE_RESIDENCY_BIT</code>, and
<code>VK_IMAGE_CREATE_SPARSE_ALIASED_BIT</code></p>
</li>
<li>
<p><a id="VUID-VkImageViewCreateInfo-image-04972" href="#VUID-VkImageViewCreateInfo-image-04972"></a> <span class="vuid">VUID-VkImageViewCreateInfo-image-04972</span><br>

If <code>image</code> was created with a <code>samples</code> value not equal to
<code>VK_SAMPLE_COUNT_1_BIT</code> then <code>viewType</code> <strong>must</strong> be either
<code>VK_IMAGE_VIEW_TYPE_2D</code> or <code>VK_IMAGE_VIEW_TYPE_2D_ARRAY</code></p>
</li>
<li>
<p><a id="VUID-VkImageViewCreateInfo-image-04441" href="#VUID-VkImageViewCreateInfo-image-04441"></a> <span class="vuid">VUID-VkImageViewCreateInfo-image-04441</span><br>

<code>image</code> <strong>must</strong> have been created with a <code>usage</code> value containing
at least one of the usages defined in the <a href="#valid-imageview-imageusage">    valid image usage</a> list for image views</p>
</li>
<li>
<p><a id="VUID-VkImageViewCreateInfo-None-02273" href="#VUID-VkImageViewCreateInfo-None-02273"></a> <span class="vuid">VUID-VkImageViewCreateInfo-None-02273</span><br>

The <a href="#resources-image-view-format-features">format features</a> of the
resultant image view <strong>must</strong> contain at least one bit</p>
</li>
<li>
<p><a id="VUID-VkImageViewCreateInfo-usage-02274" href="#VUID-VkImageViewCreateInfo-usage-02274"></a> <span class="vuid">VUID-VkImageViewCreateInfo-usage-02274</span><br>

If <code>usage</code> contains <code>VK_IMAGE_USAGE_SAMPLED_BIT</code>, then the
<a href="#resources-image-view-format-features">format features</a> of the
resultant image view <strong>must</strong> contain
<code>VK_FORMAT_FEATURE_SAMPLED_IMAGE_BIT</code></p>
</li>
<li>
<p><a id="VUID-VkImageViewCreateInfo-usage-02275" href="#VUID-VkImageViewCreateInfo-usage-02275"></a> <span class="vuid">VUID-VkImageViewCreateInfo-usage-02275</span><br>

If <code>usage</code> contains <code>VK_IMAGE_USAGE_STORAGE_BIT</code>, then the image
view&#8217;s <a href="#resources-image-view-format-features">format features</a> <strong>must</strong>
contain <code>VK_FORMAT_FEATURE_STORAGE_IMAGE_BIT</code></p>
</li>
<li>
<p><a id="VUID-VkImageViewCreateInfo-usage-08931" href="#VUID-VkImageViewCreateInfo-usage-08931"></a> <span class="vuid">VUID-VkImageViewCreateInfo-usage-08931</span><br>

If <code>usage</code> contains <code>VK_IMAGE_USAGE_COLOR_ATTACHMENT_BIT</code>, then
the image view&#8217;s <a href="#resources-image-view-format-features">format    features</a> <strong>must</strong> contain <code>VK_FORMAT_FEATURE_COLOR_ATTACHMENT_BIT</code> or
<code>VK_FORMAT_FEATURE_2_LINEAR_COLOR_ATTACHMENT_BIT_NV</code></p>
</li>
<li>
<p><a id="VUID-VkImageViewCreateInfo-usage-02277" href="#VUID-VkImageViewCreateInfo-usage-02277"></a> <span class="vuid">VUID-VkImageViewCreateInfo-usage-02277</span><br>

If <code>usage</code> contains
<code>VK_IMAGE_USAGE_DEPTH_STENCIL_ATTACHMENT_BIT</code>, then the image view&#8217;s
<a href="#resources-image-view-format-features">format features</a> <strong>must</strong> contain
<code>VK_FORMAT_FEATURE_DEPTH_STENCIL_ATTACHMENT_BIT</code></p>
</li>
<li>
<p><a id="VUID-VkImageViewCreateInfo-image-08333" href="#VUID-VkImageViewCreateInfo-image-08333"></a> <span class="vuid">VUID-VkImageViewCreateInfo-image-08333</span><br>

If <code>image</code> was created with
<code>VK_IMAGE_CREATE_VIDEO_PROFILE_INDEPENDENT_BIT_KHR</code> and <code>usage</code>
contains <code>VK_IMAGE_USAGE_VIDEO_DECODE_DST_BIT_KHR</code>, then the image
view&#8217;s <a href="#resources-image-view-format-features">format features</a> <strong>must</strong>
contain <code>VK_FORMAT_FEATURE_VIDEO_DECODE_OUTPUT_BIT_KHR</code></p>
</li>
<li>
<p><a id="VUID-VkImageViewCreateInfo-image-08334" href="#VUID-VkImageViewCreateInfo-image-08334"></a> <span class="vuid">VUID-VkImageViewCreateInfo-image-08334</span><br>

If <code>image</code> was created with
<code>VK_IMAGE_CREATE_VIDEO_PROFILE_INDEPENDENT_BIT_KHR</code> and <code>usage</code>
contains <code>VK_IMAGE_USAGE_VIDEO_DECODE_DPB_BIT_KHR</code>, then the image
view&#8217;s <a href="#resources-image-view-format-features">format features</a> <strong>must</strong>
contain <code>VK_FORMAT_FEATURE_VIDEO_DECODE_DPB_BIT_KHR</code></p>
</li>
<li>
<p><a id="VUID-VkImageViewCreateInfo-image-08335" href="#VUID-VkImageViewCreateInfo-image-08335"></a> <span class="vuid">VUID-VkImageViewCreateInfo-image-08335</span><br>

If <code>image</code> was created with
<code>VK_IMAGE_CREATE_VIDEO_PROFILE_INDEPENDENT_BIT_KHR</code>, then
<code>usage</code> <strong>must</strong> not include
<code>VK_IMAGE_USAGE_VIDEO_DECODE_SRC_BIT_KHR</code></p>
</li>
<li>
<p><a id="VUID-VkImageViewCreateInfo-image-08336" href="#VUID-VkImageViewCreateInfo-image-08336"></a> <span class="vuid">VUID-VkImageViewCreateInfo-image-08336</span><br>

If <code>image</code> was created with
<code>VK_IMAGE_CREATE_VIDEO_PROFILE_INDEPENDENT_BIT_KHR</code> and <code>usage</code>
contains <code>VK_IMAGE_USAGE_VIDEO_ENCODE_SRC_BIT_KHR</code>, then the image
view&#8217;s <a href="#resources-image-view-format-features">format features</a> <strong>must</strong>
contain <code>VK_FORMAT_FEATURE_VIDEO_ENCODE_INPUT_BIT_KHR</code></p>
</li>
<li>
<p><a id="VUID-VkImageViewCreateInfo-image-08337" href="#VUID-VkImageViewCreateInfo-image-08337"></a> <span class="vuid">VUID-VkImageViewCreateInfo-image-08337</span><br>

If <code>image</code> was created with
<code>VK_IMAGE_CREATE_VIDEO_PROFILE_INDEPENDENT_BIT_KHR</code> and <code>usage</code>
contains <code>VK_IMAGE_USAGE_VIDEO_ENCODE_DPB_BIT_KHR</code>, then the image
view&#8217;s <a href="#resources-image-view-format-features">format features</a> <strong>must</strong>
contain <code>VK_FORMAT_FEATURE_VIDEO_ENCODE_DPB_BIT_KHR</code></p>
</li>
<li>
<p><a id="VUID-VkImageViewCreateInfo-image-08338" href="#VUID-VkImageViewCreateInfo-image-08338"></a> <span class="vuid">VUID-VkImageViewCreateInfo-image-08338</span><br>

If <code>image</code> was created with
<code>VK_IMAGE_CREATE_VIDEO_PROFILE_INDEPENDENT_BIT_KHR</code>, then
<code>usage</code> <strong>must</strong> not include
<code>VK_IMAGE_USAGE_VIDEO_ENCODE_DST_BIT_KHR</code></p>
</li>
<li>
<p><a id="VUID-VkImageViewCreateInfo-usage-08932" href="#VUID-VkImageViewCreateInfo-usage-08932"></a> <span class="vuid">VUID-VkImageViewCreateInfo-usage-08932</span><br>

If <code>usage</code> contains <code>VK_IMAGE_USAGE_INPUT_ATTACHMENT_BIT</code>,
and any of the following is true:</p>
<div class="ulist">
<ul>
<li>
<p>the <a href="features.html#features-externalFormatResolve" class="xref page"><code>externalFormatResolve</code></a>
feature is not enabled</p>
</li>
<li>
<p>the <a href="limits.html#limits-nullColorAttachmentWithExternalFormatResolve" class="xref page">     <code>nullColorAttachmentWithExternalFormatResolve</code></a> property is
<code>VK_FALSE</code></p>
</li>
<li>
<p><code>image</code> was created with an
<a href="#VkExternalFormatANDROID">VkExternalFormatANDROID</a>::<code>externalFormat</code> value of 0</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>then the image view&#8217;s <a href="#resources-image-view-format-features">format    features</a> <strong>must</strong> contain at least one of
    <code>VK_FORMAT_FEATURE_COLOR_ATTACHMENT_BIT</code> or
    <code>VK_FORMAT_FEATURE_DEPTH_STENCIL_ATTACHMENT_BIT</code>
    or <code>VK_FORMAT_FEATURE_2_LINEAR_COLOR_ATTACHMENT_BIT_NV</code></p>
</div>
</li>
<li>
<p><a id="VUID-VkImageViewCreateInfo-subresourceRange-01478" href="#VUID-VkImageViewCreateInfo-subresourceRange-01478"></a> <span class="vuid">VUID-VkImageViewCreateInfo-subresourceRange-01478</span><br>

<code>subresourceRange.baseMipLevel</code> <strong>must</strong> be less than the
<code>mipLevels</code> specified in <a href="#VkImageCreateInfo">VkImageCreateInfo</a> when <code>image</code>
was created</p>
</li>
<li>
<p><a id="VUID-VkImageViewCreateInfo-subresourceRange-01718" href="#VUID-VkImageViewCreateInfo-subresourceRange-01718"></a> <span class="vuid">VUID-VkImageViewCreateInfo-subresourceRange-01718</span><br>

If <code>subresourceRange.levelCount</code> is not
<code>VK_REMAINING_MIP_LEVELS</code>, <span class="eq"><code>subresourceRange.baseMipLevel</code>
+  <code>subresourceRange.levelCount</code></span> <strong>must</strong> be less than or equal to
the <code>mipLevels</code> specified in <a href="#VkImageCreateInfo">VkImageCreateInfo</a> when
<code>image</code> was created</p>
</li>
<li>
<p><a id="VUID-VkImageViewCreateInfo-image-02571" href="#VUID-VkImageViewCreateInfo-image-02571"></a> <span class="vuid">VUID-VkImageViewCreateInfo-image-02571</span><br>

If <code>image</code> was created with <code>usage</code> containing
<code>VK_IMAGE_USAGE_FRAGMENT_DENSITY_MAP_BIT_EXT</code>,
<code>subresourceRange.levelCount</code> <strong>must</strong> be <code>1</code></p>
</li>
<li>
<p><a id="VUID-VkImageViewCreateInfo-image-06724" href="#VUID-VkImageViewCreateInfo-image-06724"></a> <span class="vuid">VUID-VkImageViewCreateInfo-image-06724</span><br>

If <code>image</code> is not a 3D image created with
<code>VK_IMAGE_CREATE_2D_ARRAY_COMPATIBLE_BIT</code> or
<code>VK_IMAGE_CREATE_2D_VIEW_COMPATIBLE_BIT_EXT</code> set, or <code>viewType</code>
is not <code>VK_IMAGE_VIEW_TYPE_2D</code> or <code>VK_IMAGE_VIEW_TYPE_2D_ARRAY</code>,
<code>subresourceRange.baseArrayLayer</code> <strong>must</strong> be less than the
<code>arrayLayers</code> specified in <a href="#VkImageCreateInfo">VkImageCreateInfo</a> when <code>image</code>
was created</p>
</li>
<li>
<p><a id="VUID-VkImageViewCreateInfo-subresourceRange-06725" href="#VUID-VkImageViewCreateInfo-subresourceRange-06725"></a> <span class="vuid">VUID-VkImageViewCreateInfo-subresourceRange-06725</span><br>

If <code>subresourceRange.layerCount</code> is not
<code>VK_REMAINING_ARRAY_LAYERS</code>, <code>image</code> is not a 3D image created
with <code>VK_IMAGE_CREATE_2D_ARRAY_COMPATIBLE_BIT</code> or
<code>VK_IMAGE_CREATE_2D_VIEW_COMPATIBLE_BIT_EXT</code> set, or <code>viewType</code>
is not <code>VK_IMAGE_VIEW_TYPE_2D</code> or <code>VK_IMAGE_VIEW_TYPE_2D_ARRAY</code>,
<code>subresourceRange.layerCount</code> <strong>must</strong> be non-zero and
<span class="eq"><code>subresourceRange.baseArrayLayer</code> + 
<code>subresourceRange.layerCount</code></span> <strong>must</strong> be less than or equal to the
<code>arrayLayers</code> specified in <a href="#VkImageCreateInfo">VkImageCreateInfo</a> when <code>image</code>
was created</p>
</li>
<li>
<p><a id="VUID-VkImageViewCreateInfo-image-02724" href="#VUID-VkImageViewCreateInfo-image-02724"></a> <span class="vuid">VUID-VkImageViewCreateInfo-image-02724</span><br>

If <code>image</code> is a 3D image created with
<code>VK_IMAGE_CREATE_2D_ARRAY_COMPATIBLE_BIT</code> set, and <code>viewType</code> is
<code>VK_IMAGE_VIEW_TYPE_2D</code> or <code>VK_IMAGE_VIEW_TYPE_2D_ARRAY</code>,
<code>subresourceRange.baseArrayLayer</code> <strong>must</strong> be less than the depth
computed from <code>baseMipLevel</code> and <code>extent.depth</code> specified in
<a href="#VkImageCreateInfo">VkImageCreateInfo</a> when <code>image</code> was created, according to the
formula defined in <a href="#resources-image-mip-level-sizing">Image Mip Level    Sizing</a></p>
</li>
<li>
<p><a id="VUID-VkImageViewCreateInfo-subresourceRange-02725" href="#VUID-VkImageViewCreateInfo-subresourceRange-02725"></a> <span class="vuid">VUID-VkImageViewCreateInfo-subresourceRange-02725</span><br>

If <code>subresourceRange.layerCount</code> is not
<code>VK_REMAINING_ARRAY_LAYERS</code>, <code>image</code> is a 3D image created with
<code>VK_IMAGE_CREATE_2D_ARRAY_COMPATIBLE_BIT</code> set, and <code>viewType</code> is
<code>VK_IMAGE_VIEW_TYPE_2D</code> or <code>VK_IMAGE_VIEW_TYPE_2D_ARRAY</code>,
<code>subresourceRange.layerCount</code> <strong>must</strong> be non-zero and
<span class="eq"><code>subresourceRange.baseArrayLayer</code> + 
<code>subresourceRange.layerCount</code></span> <strong>must</strong> be less than or equal to the
depth computed from <code>baseMipLevel</code> and <code>extent.depth</code> specified
in <a href="#VkImageCreateInfo">VkImageCreateInfo</a> when <code>image</code> was created, according to
the formula defined in <a href="#resources-image-mip-level-sizing">Image Mip    Level Sizing</a></p>
</li>
<li>
<p><a id="VUID-VkImageViewCreateInfo-image-01761" href="#VUID-VkImageViewCreateInfo-image-01761"></a> <span class="vuid">VUID-VkImageViewCreateInfo-image-01761</span><br>

If <code>image</code> was created with the
<code>VK_IMAGE_CREATE_MUTABLE_FORMAT_BIT</code> flag,
but without the <code>VK_IMAGE_CREATE_BLOCK_TEXEL_VIEW_COMPATIBLE_BIT</code>
flag,
and if the <code>format</code> of the <code>image</code> is not a
<a href="formats.html#formats-requiring-sampler-ycbcr-conversion" class="xref page">multi-planar</a> format,
<code>format</code> <strong>must</strong> be compatible with the <code>format</code> used to create
<code>image</code>, as defined in <a href="formats.html#formats-compatibility-classes" class="xref page">Format    Compatibility Classes</a></p>
</li>
<li>
<p><a id="VUID-VkImageViewCreateInfo-image-01583" href="#VUID-VkImageViewCreateInfo-image-01583"></a> <span class="vuid">VUID-VkImageViewCreateInfo-image-01583</span><br>

If <code>image</code> was created with the
<code>VK_IMAGE_CREATE_BLOCK_TEXEL_VIEW_COMPATIBLE_BIT</code> flag, <code>format</code>
<strong>must</strong> be compatible with, or <strong>must</strong> be an uncompressed format that is
size-compatible with, the <code>format</code> used to create <code>image</code></p>
</li>
<li>
<p><a id="VUID-VkImageViewCreateInfo-image-07072" href="#VUID-VkImageViewCreateInfo-image-07072"></a> <span class="vuid">VUID-VkImageViewCreateInfo-image-07072</span><br>

If <code>image</code> was created with the
<code>VK_IMAGE_CREATE_BLOCK_TEXEL_VIEW_COMPATIBLE_BIT</code> flag and
<code>format</code> is a non-compressed format, the <code>levelCount</code> member of
<code>subresourceRange</code> <strong>must</strong> be <code>1</code></p>
</li>
<li>
<p><a id="VUID-VkImageViewCreateInfo-image-09487" href="#VUID-VkImageViewCreateInfo-image-09487"></a> <span class="vuid">VUID-VkImageViewCreateInfo-image-09487</span><br>

If <code>image</code> was created with the
<code>VK_IMAGE_CREATE_BLOCK_TEXEL_VIEW_COMPATIBLE_BIT</code> flag,
the
<code>VkPhysicalDeviceMaintenance6PropertiesKHR</code>::<code>blockTexelViewCompatibleMultipleLayers</code>
property is not set to <code>VK_TRUE</code>,
and <code>format</code> is a non-compressed format, then the <code>layerCount</code>
member of <code>subresourceRange</code> <strong>must</strong> be <code>1</code></p>
</li>
<li>
<p><a id="VUID-VkImageViewCreateInfo-pNext-01585" href="#VUID-VkImageViewCreateInfo-pNext-01585"></a> <span class="vuid">VUID-VkImageViewCreateInfo-pNext-01585</span><br>

If a <a href="#VkImageFormatListCreateInfo">VkImageFormatListCreateInfo</a> structure was included in the
<code>pNext</code> chain of the <a href="#VkImageCreateInfo">VkImageCreateInfo</a> structure used when
creating <code>image</code> and
<a href="#VkImageFormatListCreateInfo">VkImageFormatListCreateInfo</a>::<code>viewFormatCount</code> is not zero
then <code>format</code> <strong>must</strong> be one of the formats in
<a href="#VkImageFormatListCreateInfo">VkImageFormatListCreateInfo</a>::<code>pViewFormats</code></p>
</li>
<li>
<p><a id="VUID-VkImageViewCreateInfo-image-01586" href="#VUID-VkImageViewCreateInfo-image-01586"></a> <span class="vuid">VUID-VkImageViewCreateInfo-image-01586</span><br>

If <code>image</code> was created with the
<code>VK_IMAGE_CREATE_MUTABLE_FORMAT_BIT</code> flag, if the <code>format</code> of
the <code>image</code> is a
<a href="formats.html#formats-requiring-sampler-ycbcr-conversion" class="xref page">multi-planar</a> format, and
if <code>subresourceRange.aspectMask</code> is one of the
<a href="formats.html#formats-planes-image-aspect" class="xref page">multi-planar aspect mask</a> bits, then
<code>format</code> <strong>must</strong> be compatible with the <a href="formats.html#VkFormat" class="xref page">VkFormat</a> for the plane
of the <code>image</code> <code>format</code> indicated by
<code>subresourceRange.aspectMask</code>, as defined in
<a href="formats.html#formats-compatible-planes" class="xref page">Compatible Formats of Planes of Multi-Planar Formats</a></p>
</li>
<li>
<p><a id="VUID-VkImageViewCreateInfo-subresourceRange-07818" href="#VUID-VkImageViewCreateInfo-subresourceRange-07818"></a> <span class="vuid">VUID-VkImageViewCreateInfo-subresourceRange-07818</span><br>

<code>subresourceRange.aspectMask</code> <strong>must</strong> only have at most 1 valid
<a href="formats.html#formats-planes-image-aspect" class="xref page">multi-planar aspect mask</a> bit</p>
</li>
<li>
<p><a id="VUID-VkImageViewCreateInfo-image-01762" href="#VUID-VkImageViewCreateInfo-image-01762"></a> <span class="vuid">VUID-VkImageViewCreateInfo-image-01762</span><br>

If <code>image</code> was not created with the
<code>VK_IMAGE_CREATE_MUTABLE_FORMAT_BIT</code> flag,
or if the <code>format</code> of the <code>image</code> is a
<a href="formats.html#formats-requiring-sampler-ycbcr-conversion" class="xref page">multi-planar</a> format and
if <code>subresourceRange.aspectMask</code> is <code>VK_IMAGE_ASPECT_COLOR_BIT</code>,
<code>format</code> <strong>must</strong> be identical to the <code>format</code> used to create
<code>image</code></p>
</li>
<li>
<p><a id="VUID-VkImageViewCreateInfo-format-06415" href="#VUID-VkImageViewCreateInfo-format-06415"></a> <span class="vuid">VUID-VkImageViewCreateInfo-format-06415</span><br>

If the image view <a href="#image-views-requiring-sampler-ycbcr-conversion">    requires a sampler YC<sub>B</sub>C<sub>R</sub> conversion</a> and <code>usage</code> contains
<code>VK_IMAGE_USAGE_SAMPLED_BIT</code>, then the <code>pNext</code> chain <strong>must</strong>
include a <a href="samplers.html#VkSamplerYcbcrConversionInfo" class="xref page">VkSamplerYcbcrConversionInfo</a> structure with a conversion
value other than <a href="../appendices/boilerplate.html#VK_NULL_HANDLE" class="xref page">VK_NULL_HANDLE</a></p>
</li>
<li>
<p><a id="VUID-VkImageViewCreateInfo-format-04714" href="#VUID-VkImageViewCreateInfo-format-04714"></a> <span class="vuid">VUID-VkImageViewCreateInfo-format-04714</span><br>

If <code>format</code> has a <code>_422</code> or <code>_420</code> suffix then <code>image</code>
<strong>must</strong> have been created with a width that is a multiple of 2</p>
</li>
<li>
<p><a id="VUID-VkImageViewCreateInfo-format-04715" href="#VUID-VkImageViewCreateInfo-format-04715"></a> <span class="vuid">VUID-VkImageViewCreateInfo-format-04715</span><br>

If <code>format</code> has a <code>_420</code> suffix then <code>image</code> <strong>must</strong> have been
created with a height that is a multiple of 2</p>
</li>
<li>
<p><a id="VUID-VkImageViewCreateInfo-pNext-01970" href="#VUID-VkImageViewCreateInfo-pNext-01970"></a> <span class="vuid">VUID-VkImageViewCreateInfo-pNext-01970</span><br>

If the <code>pNext</code> chain includes a <a href="samplers.html#VkSamplerYcbcrConversionInfo" class="xref page">VkSamplerYcbcrConversionInfo</a>
structure with a <code>conversion</code> value other than <a href="../appendices/boilerplate.html#VK_NULL_HANDLE" class="xref page">VK_NULL_HANDLE</a>,
all members of <code>components</code> <strong>must</strong> have the
<a href="#resources-image-views-identity-mappings">identity swizzle</a></p>
</li>
<li>
<p><a id="VUID-VkImageViewCreateInfo-pNext-06658" href="#VUID-VkImageViewCreateInfo-pNext-06658"></a> <span class="vuid">VUID-VkImageViewCreateInfo-pNext-06658</span><br>

If the <code>pNext</code> chain includes a <a href="samplers.html#VkSamplerYcbcrConversionInfo" class="xref page">VkSamplerYcbcrConversionInfo</a>
structure with a <code>conversion</code> value other than <a href="../appendices/boilerplate.html#VK_NULL_HANDLE" class="xref page">VK_NULL_HANDLE</a>,
<code>format</code> <strong>must</strong> be the same used in
<a href="samplers.html#VkSamplerYcbcrConversionCreateInfo" class="xref page">VkSamplerYcbcrConversionCreateInfo</a>::<code>format</code></p>
</li>
<li>
<p><a id="VUID-VkImageViewCreateInfo-image-01020" href="#VUID-VkImageViewCreateInfo-image-01020"></a> <span class="vuid">VUID-VkImageViewCreateInfo-image-01020</span><br>

If <code>image</code> is non-sparse then it <strong>must</strong> be bound completely and
contiguously to a single <code>VkDeviceMemory</code> object</p>
</li>
<li>
<p><a id="VUID-VkImageViewCreateInfo-subResourceRange-01021" href="#VUID-VkImageViewCreateInfo-subResourceRange-01021"></a> <span class="vuid">VUID-VkImageViewCreateInfo-subResourceRange-01021</span><br>

<code>viewType</code> <strong>must</strong> be compatible with the type of <code>image</code> as shown
in the <a href="#resources-image-views-compatibility">view type compatibility    table</a></p>
</li>
<li>
<p><a id="VUID-VkImageViewCreateInfo-image-02399" href="#VUID-VkImageViewCreateInfo-image-02399"></a> <span class="vuid">VUID-VkImageViewCreateInfo-image-02399</span><br>

If <code>image</code> has an
<a href="memory.html#memory-external-android-hardware-buffer-external-formats" class="xref page">Android    external format</a>, <code>format</code> <strong>must</strong> be <code>VK_FORMAT_UNDEFINED</code></p>
</li>
<li>
<p><a id="VUID-VkImageViewCreateInfo-image-02400" href="#VUID-VkImageViewCreateInfo-image-02400"></a> <span class="vuid">VUID-VkImageViewCreateInfo-image-02400</span><br>

If <code>image</code> has an
<a href="memory.html#memory-external-android-hardware-buffer-external-formats" class="xref page">Android    external format</a>, the <code>pNext</code> chain <strong>must</strong> include a
<a href="samplers.html#VkSamplerYcbcrConversionInfo" class="xref page">VkSamplerYcbcrConversionInfo</a> structure with a <code>conversion</code>
object created with the same external format as <code>image</code></p>
</li>
<li>
<p><a id="VUID-VkImageViewCreateInfo-image-02401" href="#VUID-VkImageViewCreateInfo-image-02401"></a> <span class="vuid">VUID-VkImageViewCreateInfo-image-02401</span><br>

If <code>image</code> has an
<a href="memory.html#memory-external-android-hardware-buffer-external-formats" class="xref page">Android    external format</a>, all members of <code>components</code> <strong>must</strong> be the
<a href="#resources-image-views-identity-mappings">identity swizzle</a></p>
</li>
<li>
<p><a id="VUID-VkImageViewCreateInfo-image-08957" href="#VUID-VkImageViewCreateInfo-image-08957"></a> <span class="vuid">VUID-VkImageViewCreateInfo-image-08957</span><br>

If <code>image</code> has an
<a href="memory.html#memory-external-screen-buffer-external-formats" class="xref page">QNX Screen external    format</a>, <code>format</code> <strong>must</strong> be <code>VK_FORMAT_UNDEFINED</code></p>
</li>
<li>
<p><a id="VUID-VkImageViewCreateInfo-image-08958" href="#VUID-VkImageViewCreateInfo-image-08958"></a> <span class="vuid">VUID-VkImageViewCreateInfo-image-08958</span><br>

If <code>image</code> has an
<a href="memory.html#memory-external-screen-buffer-external-formats" class="xref page">QNX Screen external    format</a>, the <code>pNext</code> chain <strong>must</strong> include a
<a href="samplers.html#VkSamplerYcbcrConversionInfo" class="xref page">VkSamplerYcbcrConversionInfo</a> structure with a <code>conversion</code>
object created with the same external format as <code>image</code></p>
</li>
<li>
<p><a id="VUID-VkImageViewCreateInfo-image-08959" href="#VUID-VkImageViewCreateInfo-image-08959"></a> <span class="vuid">VUID-VkImageViewCreateInfo-image-08959</span><br>

If <code>image</code> has an
<a href="memory.html#memory-external-screen-buffer-external-formats" class="xref page">QNX Screen external    format</a>, all members of <code>components</code> <strong>must</strong> be the
<a href="#resources-image-views-identity-mappings">identity swizzle</a></p>
</li>
<li>
<p><a id="VUID-VkImageViewCreateInfo-image-02086" href="#VUID-VkImageViewCreateInfo-image-02086"></a> <span class="vuid">VUID-VkImageViewCreateInfo-image-02086</span><br>

If <code>image</code> was created with <code>usage</code> containing
<code>VK_IMAGE_USAGE_FRAGMENT_SHADING_RATE_ATTACHMENT_BIT_KHR</code>,
<code>viewType</code> <strong>must</strong> be <code>VK_IMAGE_VIEW_TYPE_2D</code> or
<code>VK_IMAGE_VIEW_TYPE_2D_ARRAY</code></p>
</li>
<li>
<p><a id="VUID-VkImageViewCreateInfo-image-02087" href="#VUID-VkImageViewCreateInfo-image-02087"></a> <span class="vuid">VUID-VkImageViewCreateInfo-image-02087</span><br>

If the <a href="features.html#features-shadingRateImage" class="xref page"><code>shadingRateImage</code></a> feature is
enabled, and If <code>image</code> was created with <code>usage</code> containing
<code>VK_IMAGE_USAGE_SHADING_RATE_IMAGE_BIT_NV</code>, <code>format</code> <strong>must</strong> be
<code>VK_FORMAT_R8_UINT</code></p>
</li>
<li>
<p><a id="VUID-VkImageViewCreateInfo-usage-04550" href="#VUID-VkImageViewCreateInfo-usage-04550"></a> <span class="vuid">VUID-VkImageViewCreateInfo-usage-04550</span><br>

If the <a href="features.html#features-attachmentFragmentShadingRate" class="xref page">    <code>attachmentFragmentShadingRate</code></a> feature is enabled, and the
<code>usage</code> for the image view includes
<code>VK_IMAGE_USAGE_FRAGMENT_SHADING_RATE_ATTACHMENT_BIT_KHR</code>, then the
image view&#8217;s <a href="#resources-image-view-format-features">format features</a>
<strong>must</strong> contain
<code>VK_FORMAT_FEATURE_FRAGMENT_SHADING_RATE_ATTACHMENT_BIT_KHR</code></p>
</li>
<li>
<p><a id="VUID-VkImageViewCreateInfo-usage-04551" href="#VUID-VkImageViewCreateInfo-usage-04551"></a> <span class="vuid">VUID-VkImageViewCreateInfo-usage-04551</span><br>

If the <a href="features.html#features-attachmentFragmentShadingRate" class="xref page">    <code>attachmentFragmentShadingRate</code></a> feature is enabled, the
<code>usage</code> for the image view includes
<code>VK_IMAGE_USAGE_FRAGMENT_SHADING_RATE_ATTACHMENT_BIT_KHR</code>, and
<a href="limits.html#limits-layeredShadingRateAttachments" class="xref page">    <code>layeredShadingRateAttachments</code></a> is <code>VK_FALSE</code>,
<code>subresourceRange.layerCount</code> <strong>must</strong> be <code>1</code></p>
</li>
<li>
<p><a id="VUID-VkImageViewCreateInfo-flags-02572" href="#VUID-VkImageViewCreateInfo-flags-02572"></a> <span class="vuid">VUID-VkImageViewCreateInfo-flags-02572</span><br>

If the <a href="features.html#features-fragmentDensityMapDynamic" class="xref page">    <code>fragmentDensityMapDynamic</code></a> feature is not enabled, <code>flags</code>
<strong>must</strong> not contain
<code>VK_IMAGE_VIEW_CREATE_FRAGMENT_DENSITY_MAP_DYNAMIC_BIT_EXT</code></p>
</li>
<li>
<p><a id="VUID-VkImageViewCreateInfo-flags-03567" href="#VUID-VkImageViewCreateInfo-flags-03567"></a> <span class="vuid">VUID-VkImageViewCreateInfo-flags-03567</span><br>

If the <a href="features.html#features-fragmentDensityMapDeferred" class="xref page">    <code>fragmentDensityMapDeferred</code></a> feature is not enabled, <code>flags</code>
<strong>must</strong> not contain
<code>VK_IMAGE_VIEW_CREATE_FRAGMENT_DENSITY_MAP_DEFERRED_BIT_EXT</code></p>
</li>
<li>
<p><a id="VUID-VkImageViewCreateInfo-flags-03568" href="#VUID-VkImageViewCreateInfo-flags-03568"></a> <span class="vuid">VUID-VkImageViewCreateInfo-flags-03568</span><br>

If <code>flags</code> contains
<code>VK_IMAGE_VIEW_CREATE_FRAGMENT_DENSITY_MAP_DEFERRED_BIT_EXT</code>,
<code>flags</code> <strong>must</strong> not contain
<code>VK_IMAGE_VIEW_CREATE_FRAGMENT_DENSITY_MAP_DYNAMIC_BIT_EXT</code></p>
</li>
<li>
<p><a id="VUID-VkImageViewCreateInfo-image-03569" href="#VUID-VkImageViewCreateInfo-image-03569"></a> <span class="vuid">VUID-VkImageViewCreateInfo-image-03569</span><br>

If <code>image</code> was created with <code>flags</code> containing
<code>VK_IMAGE_CREATE_SUBSAMPLED_BIT_EXT</code> and <code>usage</code> containing
<code>VK_IMAGE_USAGE_SAMPLED_BIT</code>, <code>subresourceRange.layerCount</code>
<strong>must</strong> be less than or equal to <a href="limits.html#limits-maxSubsampledArrayLayers" class="xref page">    <code>VkPhysicalDeviceFragmentDensityMap2PropertiesEXT</code>::<code>maxSubsampledArrayLayers</code></a></p>
</li>
<li>
<p><a id="VUID-VkImageViewCreateInfo-invocationMask-04993" href="#VUID-VkImageViewCreateInfo-invocationMask-04993"></a> <span class="vuid">VUID-VkImageViewCreateInfo-invocationMask-04993</span><br>

If the <a href="features.html#features-invocationMask" class="xref page"><code>invocationMask</code></a> feature is
enabled, and if <code>image</code> was created with <code>usage</code> containing
<code>VK_IMAGE_USAGE_INVOCATION_MASK_BIT_HUAWEI</code>, <code>format</code> <strong>must</strong> be
<code>VK_FORMAT_R8_UINT</code></p>
</li>
<li>
<p><a id="VUID-VkImageViewCreateInfo-flags-04116" href="#VUID-VkImageViewCreateInfo-flags-04116"></a> <span class="vuid">VUID-VkImageViewCreateInfo-flags-04116</span><br>

If <code>flags</code> does not contain
<code>VK_IMAGE_VIEW_CREATE_FRAGMENT_DENSITY_MAP_DYNAMIC_BIT_EXT</code> and
<code>image</code> was created with <code>usage</code> containing
<code>VK_IMAGE_USAGE_FRAGMENT_DENSITY_MAP_BIT_EXT</code>, its <code>flags</code> <strong>must</strong>
not contain any of <code>VK_IMAGE_CREATE_PROTECTED_BIT</code>,
<code>VK_IMAGE_CREATE_SPARSE_BINDING_BIT</code>,
<code>VK_IMAGE_CREATE_SPARSE_RESIDENCY_BIT</code>, or
<code>VK_IMAGE_CREATE_SPARSE_ALIASED_BIT</code></p>
</li>
<li>
<p><a id="VUID-VkImageViewCreateInfo-pNext-02662" href="#VUID-VkImageViewCreateInfo-pNext-02662"></a> <span class="vuid">VUID-VkImageViewCreateInfo-pNext-02662</span><br>

If the <code>pNext</code> chain includes a <a href="#VkImageViewUsageCreateInfo">VkImageViewUsageCreateInfo</a>
structure, and <code>image</code> was not created with a
<a href="#VkImageStencilUsageCreateInfo">VkImageStencilUsageCreateInfo</a> structure included in the
<code>pNext</code> chain of <a href="#VkImageCreateInfo">VkImageCreateInfo</a>, its <code>usage</code> member
<strong>must</strong> not include any bits that were not set in the <code>usage</code> member
of the <a href="#VkImageCreateInfo">VkImageCreateInfo</a> structure used to create <code>image</code></p>
</li>
<li>
<p><a id="VUID-VkImageViewCreateInfo-pNext-02663" href="#VUID-VkImageViewCreateInfo-pNext-02663"></a> <span class="vuid">VUID-VkImageViewCreateInfo-pNext-02663</span><br>

If the <code>pNext</code> chain includes a <a href="#VkImageViewUsageCreateInfo">VkImageViewUsageCreateInfo</a>
structure, <code>image</code> was created with a
<a href="#VkImageStencilUsageCreateInfo">VkImageStencilUsageCreateInfo</a> structure included in the
<code>pNext</code> chain of <a href="#VkImageCreateInfo">VkImageCreateInfo</a>, and
<code>subresourceRange.aspectMask</code> includes
<code>VK_IMAGE_ASPECT_STENCIL_BIT</code>, the <code>usage</code> member of the
<a href="#VkImageViewUsageCreateInfo">VkImageViewUsageCreateInfo</a> structure <strong>must</strong> not include any bits
that were not set in the <code>usage</code> member of the
<a href="#VkImageStencilUsageCreateInfo">VkImageStencilUsageCreateInfo</a> structure used to create <code>image</code></p>
</li>
<li>
<p><a id="VUID-VkImageViewCreateInfo-pNext-02664" href="#VUID-VkImageViewCreateInfo-pNext-02664"></a> <span class="vuid">VUID-VkImageViewCreateInfo-pNext-02664</span><br>

If the <code>pNext</code> chain includes a <a href="#VkImageViewUsageCreateInfo">VkImageViewUsageCreateInfo</a>
structure, <code>image</code> was created with a
<a href="#VkImageStencilUsageCreateInfo">VkImageStencilUsageCreateInfo</a> structure included in the
<code>pNext</code> chain of <a href="#VkImageCreateInfo">VkImageCreateInfo</a>, and
<code>subresourceRange.aspectMask</code> includes bits other than
<code>VK_IMAGE_ASPECT_STENCIL_BIT</code>, the <code>usage</code> member of the
<a href="#VkImageViewUsageCreateInfo">VkImageViewUsageCreateInfo</a> structure <strong>must</strong> not include any bits
that were not set in the <code>usage</code> member of the
<a href="#VkImageCreateInfo">VkImageCreateInfo</a> structure used to create <code>image</code></p>
</li>
<li>
<p><a id="VUID-VkImageViewCreateInfo-imageViewType-04973" href="#VUID-VkImageViewCreateInfo-imageViewType-04973"></a> <span class="vuid">VUID-VkImageViewCreateInfo-imageViewType-04973</span><br>

If <code>viewType</code> is <code>VK_IMAGE_VIEW_TYPE_1D</code>,
<code>VK_IMAGE_VIEW_TYPE_2D</code>, or <code>VK_IMAGE_VIEW_TYPE_3D</code>; and
<code>subresourceRange.layerCount</code> is not
<code>VK_REMAINING_ARRAY_LAYERS</code>, then <code>subresourceRange.layerCount</code>
<strong>must</strong> be 1</p>
</li>
<li>
<p><a id="VUID-VkImageViewCreateInfo-imageViewType-04974" href="#VUID-VkImageViewCreateInfo-imageViewType-04974"></a> <span class="vuid">VUID-VkImageViewCreateInfo-imageViewType-04974</span><br>

If <code>viewType</code> is <code>VK_IMAGE_VIEW_TYPE_1D</code>,
<code>VK_IMAGE_VIEW_TYPE_2D</code>, or <code>VK_IMAGE_VIEW_TYPE_3D</code>; and
<code>subresourceRange.layerCount</code> is <code>VK_REMAINING_ARRAY_LAYERS</code>,
then the remaining number of layers <strong>must</strong> be 1</p>
</li>
<li>
<p><a id="VUID-VkImageViewCreateInfo-viewType-02960" href="#VUID-VkImageViewCreateInfo-viewType-02960"></a> <span class="vuid">VUID-VkImageViewCreateInfo-viewType-02960</span><br>

If <code>viewType</code> is <code>VK_IMAGE_VIEW_TYPE_CUBE</code> and
<code>subresourceRange.layerCount</code> is not
<code>VK_REMAINING_ARRAY_LAYERS</code>, <code>subresourceRange.layerCount</code> <strong>must</strong>
be <code>6</code></p>
</li>
<li>
<p><a id="VUID-VkImageViewCreateInfo-viewType-02961" href="#VUID-VkImageViewCreateInfo-viewType-02961"></a> <span class="vuid">VUID-VkImageViewCreateInfo-viewType-02961</span><br>

If <code>viewType</code> is <code>VK_IMAGE_VIEW_TYPE_CUBE_ARRAY</code> and
<code>subresourceRange.layerCount</code> is not
<code>VK_REMAINING_ARRAY_LAYERS</code>, <code>subresourceRange.layerCount</code> <strong>must</strong>
be a multiple of <code>6</code></p>
</li>
<li>
<p><a id="VUID-VkImageViewCreateInfo-viewType-02962" href="#VUID-VkImageViewCreateInfo-viewType-02962"></a> <span class="vuid">VUID-VkImageViewCreateInfo-viewType-02962</span><br>

If <code>viewType</code> is <code>VK_IMAGE_VIEW_TYPE_CUBE</code> and
<code>subresourceRange.layerCount</code> is <code>VK_REMAINING_ARRAY_LAYERS</code>,
the remaining number of layers <strong>must</strong> be <code>6</code></p>
</li>
<li>
<p><a id="VUID-VkImageViewCreateInfo-viewType-02963" href="#VUID-VkImageViewCreateInfo-viewType-02963"></a> <span class="vuid">VUID-VkImageViewCreateInfo-viewType-02963</span><br>

If <code>viewType</code> is <code>VK_IMAGE_VIEW_TYPE_CUBE_ARRAY</code> and
<code>subresourceRange.layerCount</code> is <code>VK_REMAINING_ARRAY_LAYERS</code>,
the remaining number of layers <strong>must</strong> be a multiple of <code>6</code></p>
</li>
<li>
<p><a id="VUID-VkImageViewCreateInfo-imageViewFormatSwizzle-04465" href="#VUID-VkImageViewCreateInfo-imageViewFormatSwizzle-04465"></a> <span class="vuid">VUID-VkImageViewCreateInfo-imageViewFormatSwizzle-04465</span><br>

If the <code><a href="../appendices/extensions.html#VK_KHR_portability_subset" class="xref page">VK_KHR_portability_subset</a></code> extension is enabled, and
<a href="features.html#VkPhysicalDevicePortabilitySubsetFeaturesKHR" class="xref page">VkPhysicalDevicePortabilitySubsetFeaturesKHR</a>::<code>imageViewFormatSwizzle</code>
is <code>VK_FALSE</code>, all elements of <code>components</code> <strong>must</strong> have the
<a href="#resources-image-views-identity-mappings">identity swizzle</a></p>
</li>
<li>
<p><a id="VUID-VkImageViewCreateInfo-imageViewFormatReinterpretation-04466" href="#VUID-VkImageViewCreateInfo-imageViewFormatReinterpretation-04466"></a> <span class="vuid">VUID-VkImageViewCreateInfo-imageViewFormatReinterpretation-04466</span><br>

If the <code><a href="../appendices/extensions.html#VK_KHR_portability_subset" class="xref page">VK_KHR_portability_subset</a></code> extension is enabled, and
<a href="features.html#VkPhysicalDevicePortabilitySubsetFeaturesKHR" class="xref page">VkPhysicalDevicePortabilitySubsetFeaturesKHR</a>::<code>imageViewFormatReinterpretation</code>
is <code>VK_FALSE</code>, the <a href="formats.html#VkFormat" class="xref page">VkFormat</a> in <code>format</code> <strong>must</strong> not contain
a different number of components, or a different number of bits in each
component, than the format of the <code>VkImage</code> in <code>image</code></p>
</li>
<li>
<p><a id="VUID-VkImageViewCreateInfo-image-04817" href="#VUID-VkImageViewCreateInfo-image-04817"></a> <span class="vuid">VUID-VkImageViewCreateInfo-image-04817</span><br>

If <code>image</code> was created with <code>usage</code> containing
<code>VK_IMAGE_USAGE_VIDEO_DECODE_DST_BIT_KHR</code>,
<code>VK_IMAGE_USAGE_VIDEO_DECODE_SRC_BIT_KHR</code>, or
<code>VK_IMAGE_USAGE_VIDEO_DECODE_DPB_BIT_KHR</code>, then the <code>viewType</code>
<strong>must</strong> be <code>VK_IMAGE_VIEW_TYPE_2D</code> or
<code>VK_IMAGE_VIEW_TYPE_2D_ARRAY</code></p>
</li>
<li>
<p><a id="VUID-VkImageViewCreateInfo-image-04818" href="#VUID-VkImageViewCreateInfo-image-04818"></a> <span class="vuid">VUID-VkImageViewCreateInfo-image-04818</span><br>

If <code>image</code> was created with <code>usage</code> containing
<code>VK_IMAGE_USAGE_VIDEO_ENCODE_DST_BIT_KHR</code>,
<code>VK_IMAGE_USAGE_VIDEO_ENCODE_SRC_BIT_KHR</code>, or
<code>VK_IMAGE_USAGE_VIDEO_ENCODE_DPB_BIT_KHR</code>, then the <code>viewType</code>
<strong>must</strong> be <code>VK_IMAGE_VIEW_TYPE_2D</code> or
<code>VK_IMAGE_VIEW_TYPE_2D_ARRAY</code></p>
</li>
<li>
<p><a id="VUID-VkImageViewCreateInfo-flags-08106" href="#VUID-VkImageViewCreateInfo-flags-08106"></a> <span class="vuid">VUID-VkImageViewCreateInfo-flags-08106</span><br>

If <code>flags</code> includes
<code>VK_IMAGE_VIEW_CREATE_DESCRIPTOR_BUFFER_CAPTURE_REPLAY_BIT_EXT</code>, the
<a href="features.html#features-descriptorBufferCaptureReplay" class="xref page">    <code>descriptorBufferCaptureReplay</code></a> feature <strong>must</strong> be enabled</p>
</li>
<li>
<p><a id="VUID-VkImageViewCreateInfo-pNext-08107" href="#VUID-VkImageViewCreateInfo-pNext-08107"></a> <span class="vuid">VUID-VkImageViewCreateInfo-pNext-08107</span><br>

If the <code>pNext</code> chain includes a
<a href="descriptorsets.html#VkOpaqueCaptureDescriptorDataCreateInfoEXT" class="xref page">VkOpaqueCaptureDescriptorDataCreateInfoEXT</a> structure, <code>flags</code>
<strong>must</strong> contain
<code>VK_IMAGE_VIEW_CREATE_DESCRIPTOR_BUFFER_CAPTURE_REPLAY_BIT_EXT</code></p>
</li>
<li>
<p><a id="VUID-VkImageViewCreateInfo-pNext-06787" href="#VUID-VkImageViewCreateInfo-pNext-06787"></a> <span class="vuid">VUID-VkImageViewCreateInfo-pNext-06787</span><br>

If the <code>pNext</code> chain includes a
<a href="memory.html#VkExportMetalObjectCreateInfoEXT" class="xref page">VkExportMetalObjectCreateInfoEXT</a> structure, its
<code>exportObjectType</code> member <strong>must</strong> be
<code>VK_EXPORT_METAL_OBJECT_TYPE_METAL_TEXTURE_BIT_EXT</code></p>
</li>
<li>
<p><a id="VUID-VkImageViewCreateInfo-pNext-06944" href="#VUID-VkImageViewCreateInfo-pNext-06944"></a> <span class="vuid">VUID-VkImageViewCreateInfo-pNext-06944</span><br>

If the <code>pNext</code> chain includes
<a href="#VkImageViewSampleWeightCreateInfoQCOM">VkImageViewSampleWeightCreateInfoQCOM</a> structure, then
<a href="features.html#features-textureSampleWeighted" class="xref page"><code>textureSampleWeighted</code></a> feature
<strong>must</strong> be enabled</p>
</li>
<li>
<p><a id="VUID-VkImageViewCreateInfo-pNext-06945" href="#VUID-VkImageViewCreateInfo-pNext-06945"></a> <span class="vuid">VUID-VkImageViewCreateInfo-pNext-06945</span><br>

If the <code>pNext</code> chain includes
<a href="#VkImageViewSampleWeightCreateInfoQCOM">VkImageViewSampleWeightCreateInfoQCOM</a> structure, then <code>image</code>
<strong>must</strong> have been created with <code>usage</code> containing
<code>VK_IMAGE_USAGE_SAMPLE_WEIGHT_BIT_QCOM</code></p>
</li>
<li>
<p><a id="VUID-VkImageViewCreateInfo-pNext-06946" href="#VUID-VkImageViewCreateInfo-pNext-06946"></a> <span class="vuid">VUID-VkImageViewCreateInfo-pNext-06946</span><br>

If the <code>pNext</code> chain includes
<a href="#VkImageViewSampleWeightCreateInfoQCOM">VkImageViewSampleWeightCreateInfoQCOM</a> structure, then
<code>components</code> <strong>must</strong> be <code>VK_COMPONENT_SWIZZLE_IDENTITY</code> for all
components</p>
</li>
<li>
<p><a id="VUID-VkImageViewCreateInfo-pNext-06947" href="#VUID-VkImageViewCreateInfo-pNext-06947"></a> <span class="vuid">VUID-VkImageViewCreateInfo-pNext-06947</span><br>

If the <code>pNext</code> chain includes
<a href="#VkImageViewSampleWeightCreateInfoQCOM">VkImageViewSampleWeightCreateInfoQCOM</a> structure, then
<code>subresourceRange.aspectMask</code> <strong>must</strong> be
<code>VK_IMAGE_ASPECT_COLOR_BIT</code></p>
</li>
<li>
<p><a id="VUID-VkImageViewCreateInfo-pNext-06948" href="#VUID-VkImageViewCreateInfo-pNext-06948"></a> <span class="vuid">VUID-VkImageViewCreateInfo-pNext-06948</span><br>

If the <code>pNext</code> chain includes
<a href="#VkImageViewSampleWeightCreateInfoQCOM">VkImageViewSampleWeightCreateInfoQCOM</a> structure, then
<code>subresourceRange.levelCount</code> <strong>must</strong> be <code>1</code></p>
</li>
<li>
<p><a id="VUID-VkImageViewCreateInfo-pNext-06949" href="#VUID-VkImageViewCreateInfo-pNext-06949"></a> <span class="vuid">VUID-VkImageViewCreateInfo-pNext-06949</span><br>

If the <code>pNext</code> chain includes
<a href="#VkImageViewSampleWeightCreateInfoQCOM">VkImageViewSampleWeightCreateInfoQCOM</a> structure, then
<code>viewType</code> <strong>must</strong> be <code>VK_IMAGE_VIEW_TYPE_1D_ARRAY</code> or
<code>VK_IMAGE_VIEW_TYPE_2D_ARRAY</code></p>
</li>
<li>
<p><a id="VUID-VkImageViewCreateInfo-pNext-06950" href="#VUID-VkImageViewCreateInfo-pNext-06950"></a> <span class="vuid">VUID-VkImageViewCreateInfo-pNext-06950</span><br>

If the <code>pNext</code> chain includes
<a href="#VkImageViewSampleWeightCreateInfoQCOM">VkImageViewSampleWeightCreateInfoQCOM</a> structure and if
<code>viewType</code> is <code>VK_IMAGE_VIEW_TYPE_1D_ARRAY</code>, then <code>image</code>
<strong>must</strong> have been created with <code>imageType</code> <code>VK_IMAGE_TYPE_1D</code></p>
</li>
<li>
<p><a id="VUID-VkImageViewCreateInfo-pNext-06951" href="#VUID-VkImageViewCreateInfo-pNext-06951"></a> <span class="vuid">VUID-VkImageViewCreateInfo-pNext-06951</span><br>

If the <code>pNext</code> chain includes
<a href="#VkImageViewSampleWeightCreateInfoQCOM">VkImageViewSampleWeightCreateInfoQCOM</a> structure and <code>viewType</code>
is <code>VK_IMAGE_VIEW_TYPE_1D_ARRAY</code>, then
<code>subresourceRange.layerCount</code> <strong>must</strong> be equal to <code>2</code></p>
</li>
<li>
<p><a id="VUID-VkImageViewCreateInfo-pNext-06952" href="#VUID-VkImageViewCreateInfo-pNext-06952"></a> <span class="vuid">VUID-VkImageViewCreateInfo-pNext-06952</span><br>

If the <code>pNext</code> chain includes
<a href="#VkImageViewSampleWeightCreateInfoQCOM">VkImageViewSampleWeightCreateInfoQCOM</a> structure and <code>viewType</code>
is <code>VK_IMAGE_VIEW_TYPE_1D_ARRAY</code>, then <code>image</code> <strong>must</strong> have been
created with <code>width</code> equal to or greater than \((numPhases
\times \mathbin{max}\left(
\mathbin{align}\left(filterSize.width,4\right),
filterSize.height\right))\)</p>
</li>
<li>
<p><a id="VUID-VkImageViewCreateInfo-pNext-06953" href="#VUID-VkImageViewCreateInfo-pNext-06953"></a> <span class="vuid">VUID-VkImageViewCreateInfo-pNext-06953</span><br>

If the <code>pNext</code> chain includes
<a href="#VkImageViewSampleWeightCreateInfoQCOM">VkImageViewSampleWeightCreateInfoQCOM</a> structure and if
<code>viewType</code> is <code>VK_IMAGE_VIEW_TYPE_2D_ARRAY</code>, then <code>image</code>
<strong>must</strong> have been created with <code>imageType</code> <code>VK_IMAGE_TYPE_2D</code></p>
</li>
<li>
<p><a id="VUID-VkImageViewCreateInfo-pNext-06954" href="#VUID-VkImageViewCreateInfo-pNext-06954"></a> <span class="vuid">VUID-VkImageViewCreateInfo-pNext-06954</span><br>

If the <code>pNext</code> chain includes
<a href="#VkImageViewSampleWeightCreateInfoQCOM">VkImageViewSampleWeightCreateInfoQCOM</a> structure and <code>viewType</code>
is <code>VK_IMAGE_VIEW_TYPE_2D_ARRAY</code>, then
<code>subresourceRange.layerCount</code> <strong>must</strong> be equal or greater than
<span class="eq">numPhases</span></p>
</li>
<li>
<p><a id="VUID-VkImageViewCreateInfo-pNext-06955" href="#VUID-VkImageViewCreateInfo-pNext-06955"></a> <span class="vuid">VUID-VkImageViewCreateInfo-pNext-06955</span><br>

If the <code>pNext</code> chain includes
<a href="#VkImageViewSampleWeightCreateInfoQCOM">VkImageViewSampleWeightCreateInfoQCOM</a> structure and <code>viewType</code>
is <code>VK_IMAGE_VIEW_TYPE_2D_ARRAY</code>, then <code>image</code> <strong>must</strong> have been
created with <code>width</code> equal to or greater than <code>filterSize.width</code></p>
</li>
<li>
<p><a id="VUID-VkImageViewCreateInfo-pNext-06956" href="#VUID-VkImageViewCreateInfo-pNext-06956"></a> <span class="vuid">VUID-VkImageViewCreateInfo-pNext-06956</span><br>

If the <code>pNext</code> chain includes
<a href="#VkImageViewSampleWeightCreateInfoQCOM">VkImageViewSampleWeightCreateInfoQCOM</a> structure and <code>viewType</code>
is <code>VK_IMAGE_VIEW_TYPE_2D_ARRAY</code>, then <code>image</code> <strong>must</strong> have been
created with <code>height</code> equal to or greater than
<code>filterSize.height</code></p>
</li>
<li>
<p><a id="VUID-VkImageViewCreateInfo-pNext-06957" href="#VUID-VkImageViewCreateInfo-pNext-06957"></a> <span class="vuid">VUID-VkImageViewCreateInfo-pNext-06957</span><br>

If the <code>pNext</code> chain includes
<a href="#VkImageViewSampleWeightCreateInfoQCOM">VkImageViewSampleWeightCreateInfoQCOM</a> structure then
<a href="#VkImageViewSampleWeightCreateInfoQCOM">VkImageViewSampleWeightCreateInfoQCOM</a>::<code>filterSize.height</code>
<strong>must</strong> be less than or equal to <a href="devsandqueues.html#limits-weightfilter-maxdimension" class="xref page">    <code>VkPhysicalDeviceImageProcessingPropertiesQCOM</code>::<code>maxWeightFilterDimension.height</code></a></p>
</li>
<li>
<p><a id="VUID-VkImageViewCreateInfo-subresourceRange-09594" href="#VUID-VkImageViewCreateInfo-subresourceRange-09594"></a> <span class="vuid">VUID-VkImageViewCreateInfo-subresourceRange-09594</span><br>

<code>subresourceRange.aspectMask</code> <strong>must</strong> be valid for the <code>format</code>
the <code>image</code> was created with</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkImageViewCreateInfo-sType-sType" href="#VUID-VkImageViewCreateInfo-sType-sType"></a> <span class="vuid">VUID-VkImageViewCreateInfo-sType-sType</span><br>
 <code>sType</code> <strong>must</strong> be <code>VK_STRUCTURE_TYPE_IMAGE_VIEW_CREATE_INFO</code></p>
</li>
<li>
<p><a id="VUID-VkImageViewCreateInfo-pNext-pNext" href="#VUID-VkImageViewCreateInfo-pNext-pNext"></a> <span class="vuid">VUID-VkImageViewCreateInfo-pNext-pNext</span><br>
 Each <code>pNext</code> member of any structure (including this one) in the <code>pNext</code> chain <strong>must</strong> be either <code>NULL</code> or a pointer to a valid instance of <a href="memory.html#VkExportMetalObjectCreateInfoEXT" class="xref page">VkExportMetalObjectCreateInfoEXT</a>, <a href="#VkImageViewASTCDecodeModeEXT">VkImageViewASTCDecodeModeEXT</a>, <a href="#VkImageViewMinLodCreateInfoEXT">VkImageViewMinLodCreateInfoEXT</a>, <a href="#VkImageViewSampleWeightCreateInfoQCOM">VkImageViewSampleWeightCreateInfoQCOM</a>, <a href="#VkImageViewSlicedCreateInfoEXT">VkImageViewSlicedCreateInfoEXT</a>, <a href="#VkImageViewUsageCreateInfo">VkImageViewUsageCreateInfo</a>, <a href="descriptorsets.html#VkOpaqueCaptureDescriptorDataCreateInfoEXT" class="xref page">VkOpaqueCaptureDescriptorDataCreateInfoEXT</a>, or <a href="samplers.html#VkSamplerYcbcrConversionInfo" class="xref page">VkSamplerYcbcrConversionInfo</a></p>
</li>
<li>
<p><a id="VUID-VkImageViewCreateInfo-sType-unique" href="#VUID-VkImageViewCreateInfo-sType-unique"></a> <span class="vuid">VUID-VkImageViewCreateInfo-sType-unique</span><br>
 The <code>sType</code> value of each struct in the <code>pNext</code> chain <strong>must</strong> be unique, with the exception of structures of type <a href="memory.html#VkExportMetalObjectCreateInfoEXT" class="xref page">VkExportMetalObjectCreateInfoEXT</a></p>
</li>
<li>
<p><a id="VUID-VkImageViewCreateInfo-flags-parameter" href="#VUID-VkImageViewCreateInfo-flags-parameter"></a> <span class="vuid">VUID-VkImageViewCreateInfo-flags-parameter</span><br>
 <code>flags</code> <strong>must</strong> be a valid combination of <a href="#VkImageViewCreateFlagBits">VkImageViewCreateFlagBits</a> values</p>
</li>
<li>
<p><a id="VUID-VkImageViewCreateInfo-image-parameter" href="#VUID-VkImageViewCreateInfo-image-parameter"></a> <span class="vuid">VUID-VkImageViewCreateInfo-image-parameter</span><br>
 <code>image</code> <strong>must</strong> be a valid <a href="#VkImage">VkImage</a> handle</p>
</li>
<li>
<p><a id="VUID-VkImageViewCreateInfo-viewType-parameter" href="#VUID-VkImageViewCreateInfo-viewType-parameter"></a> <span class="vuid">VUID-VkImageViewCreateInfo-viewType-parameter</span><br>
 <code>viewType</code> <strong>must</strong> be a valid <a href="#VkImageViewType">VkImageViewType</a> value</p>
</li>
<li>
<p><a id="VUID-VkImageViewCreateInfo-format-parameter" href="#VUID-VkImageViewCreateInfo-format-parameter"></a> <span class="vuid">VUID-VkImageViewCreateInfo-format-parameter</span><br>
 <code>format</code> <strong>must</strong> be a valid <a href="formats.html#VkFormat" class="xref page">VkFormat</a> value</p>
</li>
<li>
<p><a id="VUID-VkImageViewCreateInfo-components-parameter" href="#VUID-VkImageViewCreateInfo-components-parameter"></a> <span class="vuid">VUID-VkImageViewCreateInfo-components-parameter</span><br>
 <code>components</code> <strong>must</strong> be a valid <a href="#VkComponentMapping">VkComponentMapping</a> structure</p>
</li>
<li>
<p><a id="VUID-VkImageViewCreateInfo-subresourceRange-parameter" href="#VUID-VkImageViewCreateInfo-subresourceRange-parameter"></a> <span class="vuid">VUID-VkImageViewCreateInfo-subresourceRange-parameter</span><br>
 <code>subresourceRange</code> <strong>must</strong> be a valid <a href="#VkImageSubresourceRange">VkImageSubresourceRange</a> structure</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Bits which <strong>can</strong> be set in <a href="#VkImageViewCreateInfo">VkImageViewCreateInfo</a>::<code>flags</code>,
specifying additional parameters of an image view, are:</p>
</div>
<div id="VkImageViewCreateFlagBits" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_VERSION_1_0
typedef enum VkImageViewCreateFlagBits {
  // Provided by VK_EXT_fragment_density_map
    VK_IMAGE_VIEW_CREATE_FRAGMENT_DENSITY_MAP_DYNAMIC_BIT_EXT = 0x00000001,
  // Provided by VK_EXT_descriptor_buffer
    VK_IMAGE_VIEW_CREATE_DESCRIPTOR_BUFFER_CAPTURE_REPLAY_BIT_EXT = 0x00000004,
  // Provided by VK_EXT_fragment_density_map2
    VK_IMAGE_VIEW_CREATE_FRAGMENT_DENSITY_MAP_DEFERRED_BIT_EXT = 0x00000002,
} VkImageViewCreateFlagBits;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>VK_IMAGE_VIEW_CREATE_FRAGMENT_DENSITY_MAP_DYNAMIC_BIT_EXT</code>
specifies that the fragment density map will be read by device during
<code>VK_PIPELINE_STAGE_FRAGMENT_DENSITY_PROCESS_BIT_EXT</code></p>
</li>
<li>
<p><code>VK_IMAGE_VIEW_CREATE_FRAGMENT_DENSITY_MAP_DEFERRED_BIT_EXT</code>
specifies that the fragment density map will be read by the host during
<a href="cmdbuffers.html#vkEndCommandBuffer" class="xref page">vkEndCommandBuffer</a> for the primary command buffer that the render
pass is recorded into</p>
</li>
<li>
<p><code>VK_IMAGE_VIEW_CREATE_DESCRIPTOR_BUFFER_CAPTURE_REPLAY_BIT_EXT</code>
specifies that the image view <strong>can</strong> be used with descriptor buffers when
capturing and replaying (e.g. for trace capture and replay), see
<a href="descriptorsets.html#VkOpaqueCaptureDescriptorDataCreateInfoEXT" class="xref page">VkOpaqueCaptureDescriptorDataCreateInfoEXT</a> for more detail.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div id="VkImageViewCreateFlags" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_VERSION_1_0
typedef VkFlags VkImageViewCreateFlags;</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>VkImageViewCreateFlags</code> is a bitmask type for setting a mask of zero or
more <a href="#VkImageViewCreateFlagBits">VkImageViewCreateFlagBits</a>.</p>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The set of usages for the created image view <strong>can</strong> be restricted compared to
the parent image&#8217;s <code>usage</code> flags by adding a
<code>VkImageViewUsageCreateInfo</code> structure to the <code>pNext</code> chain of
<a href="#VkImageViewCreateInfo">VkImageViewCreateInfo</a>.</p>
</div>
<div class="paragraph">
<p>The <code>VkImageViewUsageCreateInfo</code> structure is defined as:</p>
</div>
<div id="VkImageViewUsageCreateInfo" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_VERSION_1_1
typedef struct VkImageViewUsageCreateInfo {
    VkStructureType      sType;
    const void*          pNext;
    VkImageUsageFlags    usage;
} VkImageViewUsageCreateInfo;</code></pre>
</div>
</div>
<div class="paragraph">
<p>or the equivalent</p>
</div>
<div id="VkImageViewUsageCreateInfoKHR" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_KHR_maintenance2
typedef VkImageViewUsageCreateInfo VkImageViewUsageCreateInfoKHR;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is a <a href="fundamentals.html#VkStructureType" class="xref page">VkStructureType</a> value identifying this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>usage</code> is a bitmask of <a href="#VkImageUsageFlagBits">VkImageUsageFlagBits</a> specifying
allowed usages of the image view.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>When this structure is chained to <a href="#VkImageViewCreateInfo">VkImageViewCreateInfo</a> the
<code>usage</code> field overrides the implicit <code>usage</code> parameter inherited
from image creation time and its value is used instead for the purposes of
determining the valid usage conditions of <a href="#VkImageViewCreateInfo">VkImageViewCreateInfo</a>.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkImageViewUsageCreateInfo-sType-sType" href="#VUID-VkImageViewUsageCreateInfo-sType-sType"></a> <span class="vuid">VUID-VkImageViewUsageCreateInfo-sType-sType</span><br>
 <code>sType</code> <strong>must</strong> be <code>VK_STRUCTURE_TYPE_IMAGE_VIEW_USAGE_CREATE_INFO</code></p>
</li>
<li>
<p><a id="VUID-VkImageViewUsageCreateInfo-usage-parameter" href="#VUID-VkImageViewUsageCreateInfo-usage-parameter"></a> <span class="vuid">VUID-VkImageViewUsageCreateInfo-usage-parameter</span><br>
 <code>usage</code> <strong>must</strong> be a valid combination of <a href="#VkImageUsageFlagBits">VkImageUsageFlagBits</a> values</p>
</li>
<li>
<p><a id="VUID-VkImageViewUsageCreateInfo-usage-requiredbitmask" href="#VUID-VkImageViewUsageCreateInfo-usage-requiredbitmask"></a> <span class="vuid">VUID-VkImageViewUsageCreateInfo-usage-requiredbitmask</span><br>
 <code>usage</code> <strong>must</strong> not be <code>0</code></p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The range of 3D slices for the created image view <strong>can</strong> be restricted to a
subset of the parent image&#8217;s Z range by adding a
<code>VkImageViewSlicedCreateInfoEXT</code> structure to the <code>pNext</code> chain of
<a href="#VkImageViewCreateInfo">VkImageViewCreateInfo</a>.</p>
</div>
<div class="paragraph">
<p>The <code>VkImageViewSlicedCreateInfoEXT</code> structure is defined as:</p>
</div>
<div id="VkImageViewSlicedCreateInfoEXT" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_EXT_image_sliced_view_of_3d
typedef struct VkImageViewSlicedCreateInfoEXT {
    VkStructureType    sType;
    const void*        pNext;
    uint32_t           sliceOffset;
    uint32_t           sliceCount;
} VkImageViewSlicedCreateInfoEXT;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is a <a href="fundamentals.html#VkStructureType" class="xref page">VkStructureType</a> value identifying this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>sliceOffset</code> is the Z-offset for the first 3D slice accessible to
the image view.</p>
</li>
<li>
<p><code>sliceCount</code> is the number of 3D slices accessible to the image
view.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>When this structure is chained to <a href="#VkImageViewCreateInfo">VkImageViewCreateInfo</a> the
<code>sliceOffset</code> field is treated as a Z-offset for the sliced view and
<code>sliceCount</code> specifies the range.
Shader accesses using a Z coordinate of 0 will access the depth slice
corresponding to <code>sliceOffset</code> in the image, and in a shader, the
maximum in-bounds Z coordinate for the view is <span class="eq"><code>sliceCount</code> - 1</span>.</p>
</div>
<div class="paragraph">
<p>A sliced 3D view <strong>must</strong> only be used with a single mip level.
The slice coordinates are integer coordinates within the
<code>subresourceRange.baseMipLevel</code> used to create the image view.</p>
</div>
<div class="paragraph">
<p>The effective view depth is equal to <code>extent.depth</code> used to create the
<code>image</code> for this view adjusted by <code>subresourceRange.baseMipLevel</code> as
specified in <a href="#resources-image-mip-level-sizing">Image Mip Level Sizing</a>.</p>
</div>
<div class="paragraph">
<p>Shader access to this image view is only affected by
<code>VkImageViewSlicedCreateInfoEXT</code> if it uses a descriptor of type
<code>VK_DESCRIPTOR_TYPE_STORAGE_IMAGE</code>.
For access using any other descriptor type, the contents of
<code>VkImageViewSlicedCreateInfoEXT</code> are ignored; instead, <code>sliceOffset</code>
is treated as being equal to 0, and <code>sliceCount</code> is treated as being
equal to <code>VK_REMAINING_3D_SLICES_EXT</code>.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkImageViewSlicedCreateInfoEXT-sliceOffset-07867" href="#VUID-VkImageViewSlicedCreateInfoEXT-sliceOffset-07867"></a> <span class="vuid">VUID-VkImageViewSlicedCreateInfoEXT-sliceOffset-07867</span><br>

<code>sliceOffset</code> <strong>must</strong> be less than the effective view depth as
specified in <a href="#resources-image-mip-level-sizing">Image Mip Level Sizing</a></p>
</li>
<li>
<p><a id="VUID-VkImageViewSlicedCreateInfoEXT-sliceCount-07868" href="#VUID-VkImageViewSlicedCreateInfoEXT-sliceCount-07868"></a> <span class="vuid">VUID-VkImageViewSlicedCreateInfoEXT-sliceCount-07868</span><br>

If <code>sliceCount</code> is not <code>VK_REMAINING_3D_SLICES_EXT</code>, it <strong>must</strong> be
non-zero and <span class="eq"><code>sliceOffset</code> +  <code>sliceCount</code></span> <strong>must</strong> be
less than or equal to the effective view depth as specified in
<a href="#resources-image-mip-level-sizing">Image Mip Level Sizing</a></p>
</li>
<li>
<p><a id="VUID-VkImageViewSlicedCreateInfoEXT-image-07869" href="#VUID-VkImageViewSlicedCreateInfoEXT-image-07869"></a> <span class="vuid">VUID-VkImageViewSlicedCreateInfoEXT-image-07869</span><br>

<code>image</code> <strong>must</strong> have been created with <code>imageType</code> equal to
<code>VK_IMAGE_TYPE_3D</code></p>
</li>
<li>
<p><a id="VUID-VkImageViewSlicedCreateInfoEXT-viewType-07909" href="#VUID-VkImageViewSlicedCreateInfoEXT-viewType-07909"></a> <span class="vuid">VUID-VkImageViewSlicedCreateInfoEXT-viewType-07909</span><br>

<code>viewType</code> <strong>must</strong> be <code>VK_IMAGE_VIEW_TYPE_3D</code></p>
</li>
<li>
<p><a id="VUID-VkImageViewSlicedCreateInfoEXT-None-07870" href="#VUID-VkImageViewSlicedCreateInfoEXT-None-07870"></a> <span class="vuid">VUID-VkImageViewSlicedCreateInfoEXT-None-07870</span><br>

The image view <strong>must</strong> reference exactly 1 mip level</p>
</li>
<li>
<p><a id="VUID-VkImageViewSlicedCreateInfoEXT-None-07871" href="#VUID-VkImageViewSlicedCreateInfoEXT-None-07871"></a> <span class="vuid">VUID-VkImageViewSlicedCreateInfoEXT-None-07871</span><br>

The <a href="features.html#features-imageSlicedViewOf3D" class="xref page">imageSlicedViewOf3D</a> feature <strong>must</strong>
be enabled on the device</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkImageViewSlicedCreateInfoEXT-sType-sType" href="#VUID-VkImageViewSlicedCreateInfoEXT-sType-sType"></a> <span class="vuid">VUID-VkImageViewSlicedCreateInfoEXT-sType-sType</span><br>
 <code>sType</code> <strong>must</strong> be <code>VK_STRUCTURE_TYPE_IMAGE_VIEW_SLICED_CREATE_INFO_EXT</code></p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p><code>VK_REMAINING_3D_SLICES_EXT</code> is a special constant value used for
<a href="#VkImageViewSlicedCreateInfoEXT">VkImageViewSlicedCreateInfoEXT</a>::<code>sliceCount</code> to indicate that all
remaining 3D slices in an image after the first slice offset specified
should be included in the view.</p>
</div>
<div id="VK_REMAINING_3D_SLICES_EXT" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">#define VK_REMAINING_3D_SLICES_EXT        (~0U)</code></pre>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>VkImageSubresourceRange</code> structure is defined as:</p>
</div>
<div id="VkImageSubresourceRange" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_VERSION_1_0
typedef struct VkImageSubresourceRange {
    VkImageAspectFlags    aspectMask;
    uint32_t              baseMipLevel;
    uint32_t              levelCount;
    uint32_t              baseArrayLayer;
    uint32_t              layerCount;
} VkImageSubresourceRange;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>aspectMask</code> is a bitmask of <a href="#VkImageAspectFlagBits">VkImageAspectFlagBits</a> specifying
which aspect(s) of the image are included in the view.</p>
</li>
<li>
<p><code>baseMipLevel</code> is the first mipmap level accessible to the view.</p>
</li>
<li>
<p><code>levelCount</code> is the number of mipmap levels (starting from
<code>baseMipLevel</code>) accessible to the view.</p>
</li>
<li>
<p><code>baseArrayLayer</code> is the first array layer accessible to the view.</p>
</li>
<li>
<p><code>layerCount</code> is the number of array layers (starting from
<code>baseArrayLayer</code>) accessible to the view.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The number of mipmap levels and array layers <strong>must</strong> be a subset of the image
subresources in the image.
If an application wants to use all mip levels or layers in an image after
the <code>baseMipLevel</code> or <code>baseArrayLayer</code>, it <strong>can</strong> set <code>levelCount</code>
and <code>layerCount</code> to the special values <code>VK_REMAINING_MIP_LEVELS</code> and
<code>VK_REMAINING_ARRAY_LAYERS</code> without knowing the exact number of mip
levels or layers.</p>
</div>
<div class="paragraph">
<p>For cube and cube array image views, the layers of the image view starting
at <code>baseArrayLayer</code> correspond to faces in the order +X, -X, +Y, -Y, +Z,
-Z.
For cube arrays, each set of six sequential layers is a single cube, so the
number of cube maps in a cube map array view is <em><code>layerCount</code> / 6</em>, and
image array layer <span class="eq">(<code>baseArrayLayer</code> +  i)</span> is face index
<span class="eq">(i mod 6)</span> of cube <em>i / 6</em>.
If the number of layers in the view, whether set explicitly in
<code>layerCount</code> or implied by <code>VK_REMAINING_ARRAY_LAYERS</code>, is not a
multiple of 6, the last cube map in the array <strong>must</strong> not be accessed.</p>
</div>
<div class="paragraph">
<p><code>aspectMask</code> <strong>must</strong> be only <code>VK_IMAGE_ASPECT_COLOR_BIT</code>,
<code>VK_IMAGE_ASPECT_DEPTH_BIT</code> or <code>VK_IMAGE_ASPECT_STENCIL_BIT</code> if
<code>format</code> is a color, depth-only or stencil-only format,
respectively, except if <code>format</code> is a
<a href="formats.html#formats-requiring-sampler-ycbcr-conversion" class="xref page">multi-planar format</a>.
If using a depth/stencil format with both depth and stencil components,
<code>aspectMask</code> <strong>must</strong> include at least one of
<code>VK_IMAGE_ASPECT_DEPTH_BIT</code> and <code>VK_IMAGE_ASPECT_STENCIL_BIT</code>, and
<strong>can</strong> include both.</p>
</div>
<div class="paragraph">
<p>When the <code>VkImageSubresourceRange</code> structure is used to select a subset
of the slices of a 3D image&#8217;s mip level in order to create a 2D or 2D array
image view of a 3D image created with
<code>VK_IMAGE_CREATE_2D_ARRAY_COMPATIBLE_BIT</code>, <code>baseArrayLayer</code> and
<code>layerCount</code> specify the first slice index and the number of slices to
include in the created image view.
Such an image view <strong>can</strong> be used as a framebuffer attachment that refers only
to the specified range of slices of the selected mip level.
However, any layout transitions performed on such an attachment view during
a render pass instance still apply to the entire subresource referenced
which includes all the slices of the selected mip level.</p>
</div>
<div class="paragraph">
<p>When using an image view of a depth/stencil image to populate a descriptor
set (e.g. for sampling in the shader, or for use as an input attachment),
the <code>aspectMask</code> <strong>must</strong> only include one bit, which selects whether the
image view is used for depth reads (i.e. using a floating-point sampler or
input attachment in the shader) or stencil reads (i.e. using an unsigned
integer sampler or input attachment in the shader).
When an image view of a depth/stencil image is used as a depth/stencil
framebuffer attachment, the <code>aspectMask</code> is ignored and both depth and
stencil image subresources are used.</p>
</div>
<div class="paragraph">
<p>When creating a <code>VkImageView</code>, if <a href="samplers.html#samplers-YCbCr-conversion" class="xref page">sampler YC<sub>B</sub>C<sub>R</sub> conversion</a> is enabled in the sampler, the <code>aspectMask</code> of a
<code>subresourceRange</code> used by the <code>VkImageView</code> <strong>must</strong> be
<code>VK_IMAGE_ASPECT_COLOR_BIT</code>.</p>
</div>
<div class="paragraph">
<p>When creating a <code>VkImageView</code>, if sampler YC<sub>B</sub>C<sub>R</sub> conversion is not
enabled in the sampler and the image <code>format</code> is
<a href="formats.html#formats-requiring-sampler-ycbcr-conversion" class="xref page">multi-planar</a>, the image <strong>must</strong>
have been created with <code>VK_IMAGE_CREATE_MUTABLE_FORMAT_BIT</code>, and the
<code>aspectMask</code> of the <code>VkImageView</code>&#8217;s <code>subresourceRange</code> <strong>must</strong> be
<code>VK_IMAGE_ASPECT_PLANE_0_BIT</code>, <code>VK_IMAGE_ASPECT_PLANE_1_BIT</code> or
<code>VK_IMAGE_ASPECT_PLANE_2_BIT</code>.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkImageSubresourceRange-levelCount-01720" href="#VUID-VkImageSubresourceRange-levelCount-01720"></a> <span class="vuid">VUID-VkImageSubresourceRange-levelCount-01720</span><br>

If <code>levelCount</code> is not <code>VK_REMAINING_MIP_LEVELS</code>, it <strong>must</strong> be
greater than <code>0</code></p>
</li>
<li>
<p><a id="VUID-VkImageSubresourceRange-layerCount-01721" href="#VUID-VkImageSubresourceRange-layerCount-01721"></a> <span class="vuid">VUID-VkImageSubresourceRange-layerCount-01721</span><br>

If <code>layerCount</code> is not <code>VK_REMAINING_ARRAY_LAYERS</code>, it <strong>must</strong> be
greater than <code>0</code></p>
</li>
<li>
<p><a id="VUID-VkImageSubresourceRange-aspectMask-01670" href="#VUID-VkImageSubresourceRange-aspectMask-01670"></a> <span class="vuid">VUID-VkImageSubresourceRange-aspectMask-01670</span><br>

If <code>aspectMask</code> includes <code>VK_IMAGE_ASPECT_COLOR_BIT</code>, then it
<strong>must</strong> not include any of <code>VK_IMAGE_ASPECT_PLANE_0_BIT</code>,
<code>VK_IMAGE_ASPECT_PLANE_1_BIT</code>, or <code>VK_IMAGE_ASPECT_PLANE_2_BIT</code></p>
</li>
<li>
<p><a id="VUID-VkImageSubresourceRange-aspectMask-02278" href="#VUID-VkImageSubresourceRange-aspectMask-02278"></a> <span class="vuid">VUID-VkImageSubresourceRange-aspectMask-02278</span><br>

<code>aspectMask</code> <strong>must</strong> not include
<code>VK_IMAGE_ASPECT_MEMORY_PLANE<em>_i_</em>BIT_EXT</code> for any index <em>i</em></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkImageSubresourceRange-aspectMask-parameter" href="#VUID-VkImageSubresourceRange-aspectMask-parameter"></a> <span class="vuid">VUID-VkImageSubresourceRange-aspectMask-parameter</span><br>
 <code>aspectMask</code> <strong>must</strong> be a valid combination of <a href="#VkImageAspectFlagBits">VkImageAspectFlagBits</a> values</p>
</li>
<li>
<p><a id="VUID-VkImageSubresourceRange-aspectMask-requiredbitmask" href="#VUID-VkImageSubresourceRange-aspectMask-requiredbitmask"></a> <span class="vuid">VUID-VkImageSubresourceRange-aspectMask-requiredbitmask</span><br>
 <code>aspectMask</code> <strong>must</strong> not be <code>0</code></p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Bits which <strong>can</strong> be set in an aspect mask to specify aspects of an image for
purposes such as identifying a subresource, are:</p>
</div>
<div id="VkImageAspectFlagBits" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_VERSION_1_0
typedef enum VkImageAspectFlagBits {
    VK_IMAGE_ASPECT_COLOR_BIT = 0x00000001,
    VK_IMAGE_ASPECT_DEPTH_BIT = 0x00000002,
    VK_IMAGE_ASPECT_STENCIL_BIT = 0x00000004,
    VK_IMAGE_ASPECT_METADATA_BIT = 0x00000008,
  // Provided by VK_VERSION_1_1
    VK_IMAGE_ASPECT_PLANE_0_BIT = 0x00000010,
  // Provided by VK_VERSION_1_1
    VK_IMAGE_ASPECT_PLANE_1_BIT = 0x00000020,
  // Provided by VK_VERSION_1_1
    VK_IMAGE_ASPECT_PLANE_2_BIT = 0x00000040,
  // Provided by VK_VERSION_1_3
    VK_IMAGE_ASPECT_NONE = 0,
  // Provided by VK_EXT_image_drm_format_modifier
    VK_IMAGE_ASPECT_MEMORY_PLANE_0_BIT_EXT = 0x00000080,
  // Provided by VK_EXT_image_drm_format_modifier
    VK_IMAGE_ASPECT_MEMORY_PLANE_1_BIT_EXT = 0x00000100,
  // Provided by VK_EXT_image_drm_format_modifier
    VK_IMAGE_ASPECT_MEMORY_PLANE_2_BIT_EXT = 0x00000200,
  // Provided by VK_EXT_image_drm_format_modifier
    VK_IMAGE_ASPECT_MEMORY_PLANE_3_BIT_EXT = 0x00000400,
  // Provided by VK_KHR_sampler_ycbcr_conversion
    VK_IMAGE_ASPECT_PLANE_0_BIT_KHR = VK_IMAGE_ASPECT_PLANE_0_BIT,
  // Provided by VK_KHR_sampler_ycbcr_conversion
    VK_IMAGE_ASPECT_PLANE_1_BIT_KHR = VK_IMAGE_ASPECT_PLANE_1_BIT,
  // Provided by VK_KHR_sampler_ycbcr_conversion
    VK_IMAGE_ASPECT_PLANE_2_BIT_KHR = VK_IMAGE_ASPECT_PLANE_2_BIT,
  // Provided by VK_KHR_maintenance4
    VK_IMAGE_ASPECT_NONE_KHR = VK_IMAGE_ASPECT_NONE,
} VkImageAspectFlagBits;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>VK_IMAGE_ASPECT_NONE</code> specifies no image aspect, or the image
aspect is not applicable.</p>
</li>
<li>
<p><code>VK_IMAGE_ASPECT_COLOR_BIT</code> specifies the color aspect.</p>
</li>
<li>
<p><code>VK_IMAGE_ASPECT_DEPTH_BIT</code> specifies the depth aspect.</p>
</li>
<li>
<p><code>VK_IMAGE_ASPECT_STENCIL_BIT</code> specifies the stencil aspect.</p>
</li>
<li>
<p><code>VK_IMAGE_ASPECT_METADATA_BIT</code> specifies the metadata aspect used
for <a href="sparsemem.html#sparsememory" class="xref page">sparse resource</a> operations.</p>
</li>
<li>
<p><code>VK_IMAGE_ASPECT_PLANE_0_BIT</code> specifies plane 0 of a <em>multi-planar</em>
image format.</p>
</li>
<li>
<p><code>VK_IMAGE_ASPECT_PLANE_1_BIT</code> specifies plane 1 of a <em>multi-planar</em>
image format.</p>
</li>
<li>
<p><code>VK_IMAGE_ASPECT_PLANE_2_BIT</code> specifies plane 2 of a <em>multi-planar</em>
image format.</p>
</li>
<li>
<p><code>VK_IMAGE_ASPECT_MEMORY_PLANE_0_BIT_EXT</code> specifies <em>memory plane</em> 0.</p>
</li>
<li>
<p><code>VK_IMAGE_ASPECT_MEMORY_PLANE_1_BIT_EXT</code> specifies <em>memory plane</em> 1.</p>
</li>
<li>
<p><code>VK_IMAGE_ASPECT_MEMORY_PLANE_2_BIT_EXT</code> specifies <em>memory plane</em> 2.</p>
</li>
<li>
<p><code>VK_IMAGE_ASPECT_MEMORY_PLANE_3_BIT_EXT</code> specifies <em>memory plane</em> 3.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div id="VkImageAspectFlags" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_VERSION_1_0
typedef VkFlags VkImageAspectFlags;</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>VkImageAspectFlags</code> is a bitmask type for setting a mask of zero or
more <a href="#VkImageAspectFlagBits">VkImageAspectFlagBits</a>.</p>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>VkComponentMapping</code> structure is defined as:</p>
</div>
<div id="VkComponentMapping" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_VERSION_1_0
typedef struct VkComponentMapping {
    VkComponentSwizzle    r;
    VkComponentSwizzle    g;
    VkComponentSwizzle    b;
    VkComponentSwizzle    a;
} VkComponentMapping;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>r</code> is a <a href="#VkComponentSwizzle">VkComponentSwizzle</a> specifying the component value
placed in the R component of the output vector.</p>
</li>
<li>
<p><code>g</code> is a <a href="#VkComponentSwizzle">VkComponentSwizzle</a> specifying the component value
placed in the G component of the output vector.</p>
</li>
<li>
<p><code>b</code> is a <a href="#VkComponentSwizzle">VkComponentSwizzle</a> specifying the component value
placed in the B component of the output vector.</p>
</li>
<li>
<p><code>a</code> is a <a href="#VkComponentSwizzle">VkComponentSwizzle</a> specifying the component value
placed in the A component of the output vector.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkComponentMapping-r-parameter" href="#VUID-VkComponentMapping-r-parameter"></a> <span class="vuid">VUID-VkComponentMapping-r-parameter</span><br>
 <code>r</code> <strong>must</strong> be a valid <a href="#VkComponentSwizzle">VkComponentSwizzle</a> value</p>
</li>
<li>
<p><a id="VUID-VkComponentMapping-g-parameter" href="#VUID-VkComponentMapping-g-parameter"></a> <span class="vuid">VUID-VkComponentMapping-g-parameter</span><br>
 <code>g</code> <strong>must</strong> be a valid <a href="#VkComponentSwizzle">VkComponentSwizzle</a> value</p>
</li>
<li>
<p><a id="VUID-VkComponentMapping-b-parameter" href="#VUID-VkComponentMapping-b-parameter"></a> <span class="vuid">VUID-VkComponentMapping-b-parameter</span><br>
 <code>b</code> <strong>must</strong> be a valid <a href="#VkComponentSwizzle">VkComponentSwizzle</a> value</p>
</li>
<li>
<p><a id="VUID-VkComponentMapping-a-parameter" href="#VUID-VkComponentMapping-a-parameter"></a> <span class="vuid">VUID-VkComponentMapping-a-parameter</span><br>
 <code>a</code> <strong>must</strong> be a valid <a href="#VkComponentSwizzle">VkComponentSwizzle</a> value</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Possible values of the members of <a href="#VkComponentMapping">VkComponentMapping</a>, specifying the
component values placed in each component of the output vector, are:</p>
</div>
<div id="VkComponentSwizzle" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_VERSION_1_0
typedef enum VkComponentSwizzle {
    VK_COMPONENT_SWIZZLE_IDENTITY = 0,
    VK_COMPONENT_SWIZZLE_ZERO = 1,
    VK_COMPONENT_SWIZZLE_ONE = 2,
    VK_COMPONENT_SWIZZLE_R = 3,
    VK_COMPONENT_SWIZZLE_G = 4,
    VK_COMPONENT_SWIZZLE_B = 5,
    VK_COMPONENT_SWIZZLE_A = 6,
} VkComponentSwizzle;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>VK_COMPONENT_SWIZZLE_IDENTITY</code> specifies that the component is set
to the identity swizzle.</p>
</li>
<li>
<p><code>VK_COMPONENT_SWIZZLE_ZERO</code> specifies that the component is set to
zero.</p>
</li>
<li>
<p><code>VK_COMPONENT_SWIZZLE_ONE</code> specifies that the component is set to
either 1 or 1.0, depending on whether the type of the image view format
is integer or floating-point respectively, as determined by the
<a href="formats.html#formats-definition" class="xref page">Format Definition</a> section for each
<a href="formats.html#VkFormat" class="xref page">VkFormat</a>.</p>
</li>
<li>
<p><code>VK_COMPONENT_SWIZZLE_R</code> specifies that the component is set to the
value of the R component of the image.</p>
</li>
<li>
<p><code>VK_COMPONENT_SWIZZLE_G</code> specifies that the component is set to the
value of the G component of the image.</p>
</li>
<li>
<p><code>VK_COMPONENT_SWIZZLE_B</code> specifies that the component is set to the
value of the B component of the image.</p>
</li>
<li>
<p><code>VK_COMPONENT_SWIZZLE_A</code> specifies that the component is set to the
value of the A component of the image.</p>
</li>
</ul>
</div>
<div id="resources-image-views-identity-mappings" class="paragraph">
<p>Setting the identity swizzle on a component is equivalent to setting the
identity mapping on that component.
That is:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 2. Component Mappings Equivalent To <code>VK_COMPONENT_SWIZZLE_IDENTITY</code></caption>
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Component</th>
<th class="tableblock halign-left valign-top">Identity Mapping</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>components.r</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>VK_COMPONENT_SWIZZLE_R</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>components.g</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>VK_COMPONENT_SWIZZLE_G</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>components.b</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>VK_COMPONENT_SWIZZLE_B</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>components.a</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>VK_COMPONENT_SWIZZLE_A</code></p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>If the <code>pNext</code> chain includes a <code>VkImageViewASTCDecodeModeEXT</code>
structure, then that structure includes a parameter specifying the decode
mode for image views using ASTC compressed formats.</p>
</div>
<div class="paragraph">
<p>The <code>VkImageViewASTCDecodeModeEXT</code> structure is defined as:</p>
</div>
<div id="VkImageViewASTCDecodeModeEXT" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_EXT_astc_decode_mode
typedef struct VkImageViewASTCDecodeModeEXT {
    VkStructureType    sType;
    const void*        pNext;
    VkFormat           decodeMode;
} VkImageViewASTCDecodeModeEXT;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is a <a href="fundamentals.html#VkStructureType" class="xref page">VkStructureType</a> value identifying this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>decodeMode</code> is the intermediate format used to decode ASTC
compressed formats.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkImageViewASTCDecodeModeEXT-decodeMode-02230" href="#VUID-VkImageViewASTCDecodeModeEXT-decodeMode-02230"></a> <span class="vuid">VUID-VkImageViewASTCDecodeModeEXT-decodeMode-02230</span><br>

<code>decodeMode</code> <strong>must</strong> be one of <code>VK_FORMAT_R16G16B16A16_SFLOAT</code>,
<code>VK_FORMAT_R8G8B8A8_UNORM</code>, or
<code>VK_FORMAT_E5B9G9R9_UFLOAT_PACK32</code></p>
</li>
<li>
<p><a id="VUID-VkImageViewASTCDecodeModeEXT-decodeMode-02231" href="#VUID-VkImageViewASTCDecodeModeEXT-decodeMode-02231"></a> <span class="vuid">VUID-VkImageViewASTCDecodeModeEXT-decodeMode-02231</span><br>

If the <a href="features.html#features-astc-decodeModeSharedExponent" class="xref page">    <code>decodeModeSharedExponent</code></a> feature is not enabled,
<code>decodeMode</code> <strong>must</strong> not be <code>VK_FORMAT_E5B9G9R9_UFLOAT_PACK32</code></p>
</li>
<li>
<p><a id="VUID-VkImageViewASTCDecodeModeEXT-decodeMode-02232" href="#VUID-VkImageViewASTCDecodeModeEXT-decodeMode-02232"></a> <span class="vuid">VUID-VkImageViewASTCDecodeModeEXT-decodeMode-02232</span><br>

If <code>decodeMode</code> is <code>VK_FORMAT_R8G8B8A8_UNORM</code> the image view
<strong>must</strong> not include blocks using any of the ASTC HDR modes</p>
</li>
<li>
<p><a id="VUID-VkImageViewASTCDecodeModeEXT-format-04084" href="#VUID-VkImageViewASTCDecodeModeEXT-format-04084"></a> <span class="vuid">VUID-VkImageViewASTCDecodeModeEXT-format-04084</span><br>

<code>format</code> of the image view <strong>must</strong> be one of the
<a href="../appendices/compressedtex.html#appendix-compressedtex-astc" class="xref page">ASTC Compressed Image Formats</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="paragraph">
<p>If <code>format</code> uses sRGB encoding then the <code>decodeMode</code> has no effect.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkImageViewASTCDecodeModeEXT-sType-sType" href="#VUID-VkImageViewASTCDecodeModeEXT-sType-sType"></a> <span class="vuid">VUID-VkImageViewASTCDecodeModeEXT-sType-sType</span><br>
 <code>sType</code> <strong>must</strong> be <code>VK_STRUCTURE_TYPE_IMAGE_VIEW_ASTC_DECODE_MODE_EXT</code></p>
</li>
<li>
<p><a id="VUID-VkImageViewASTCDecodeModeEXT-decodeMode-parameter" href="#VUID-VkImageViewASTCDecodeModeEXT-decodeMode-parameter"></a> <span class="vuid">VUID-VkImageViewASTCDecodeModeEXT-decodeMode-parameter</span><br>
 <code>decodeMode</code> <strong>must</strong> be a valid <a href="formats.html#VkFormat" class="xref page">VkFormat</a> value</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>If the <code>pNext</code> chain includes a
<code>VkImageViewSampleWeightCreateInfoQCOM</code> structure, then that structure
includes a parameter specifying the parameters for weight image views used
in <a href="textures.html#textures-weightimage" class="xref page">weight image sampling</a>.</p>
</div>
<div class="paragraph">
<p>The <code>VkImageViewSampleWeightCreateInfoQCOM</code> structure is defined as:</p>
</div>
<div id="VkImageViewSampleWeightCreateInfoQCOM" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_QCOM_image_processing
typedef struct VkImageViewSampleWeightCreateInfoQCOM {
    VkStructureType    sType;
    const void*        pNext;
    VkOffset2D         filterCenter;
    VkExtent2D         filterSize;
    uint32_t           numPhases;
} VkImageViewSampleWeightCreateInfoQCOM;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is a <a href="fundamentals.html#VkStructureType" class="xref page">VkStructureType</a> value identifying this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>filterCenter</code> is a <a href="fundamentals.html#VkOffset2D" class="xref page">VkOffset2D</a> describing the location of the
weight filter origin.</p>
</li>
<li>
<p><code>filterSize</code> is a <a href="fundamentals.html#VkExtent2D" class="xref page">VkExtent2D</a> specifying weight filter
dimensions.</p>
</li>
<li>
<p><code>numPhases</code> is number of sub-pixel filter phases.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The <code>filterCenter</code> specifies the origin or center of the filter kernel,
as described in <a href="textures.html#textures-weightimage-filteroperation" class="xref page">Weight Sampling Operation</a>.
The <code>numPhases</code> describes the number of sub-pixel filter phases as
described in <a href="textures.html#textures-weightimage-filterphases" class="xref page">Weight Sampling Phases</a>.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkImageViewSampleWeightCreateInfoQCOM-filterSize-06958" href="#VUID-VkImageViewSampleWeightCreateInfoQCOM-filterSize-06958"></a> <span class="vuid">VUID-VkImageViewSampleWeightCreateInfoQCOM-filterSize-06958</span><br>

<code>filterSize.width</code> <strong>must</strong> be less than or equal to
<a href="devsandqueues.html#limits-weightfilter-maxdimension" class="xref page">    <code>VkPhysicalDeviceImageProcessingPropertiesQCOM</code>::<code>maxWeightFilterDimension.width</code></a></p>
</li>
<li>
<p><a id="VUID-VkImageViewSampleWeightCreateInfoQCOM-filterSize-06959" href="#VUID-VkImageViewSampleWeightCreateInfoQCOM-filterSize-06959"></a> <span class="vuid">VUID-VkImageViewSampleWeightCreateInfoQCOM-filterSize-06959</span><br>

<code>filterSize.height</code> <strong>must</strong> be less than or equal to
<a href="devsandqueues.html#limits-weightfilter-maxdimension" class="xref page">    <code>VkPhysicalDeviceImageProcessingPropertiesQCOM</code>::<code>maxWeightFilterDimension.height</code></a></p>
</li>
<li>
<p><a id="VUID-VkImageViewSampleWeightCreateInfoQCOM-filterCenter-06960" href="#VUID-VkImageViewSampleWeightCreateInfoQCOM-filterCenter-06960"></a> <span class="vuid">VUID-VkImageViewSampleWeightCreateInfoQCOM-filterCenter-06960</span><br>

<code>filterCenter.x</code> <strong>must</strong> be less than or equal to
<span class="eq">(filterSize.width - 1)</span></p>
</li>
<li>
<p><a id="VUID-VkImageViewSampleWeightCreateInfoQCOM-filterCenter-06961" href="#VUID-VkImageViewSampleWeightCreateInfoQCOM-filterCenter-06961"></a> <span class="vuid">VUID-VkImageViewSampleWeightCreateInfoQCOM-filterCenter-06961</span><br>

<code>filterCenter.y</code> <strong>must</strong> be less than or equal to
<span class="eq">(filterSize.height - 1)</span></p>
</li>
<li>
<p><a id="VUID-VkImageViewSampleWeightCreateInfoQCOM-numPhases-06962" href="#VUID-VkImageViewSampleWeightCreateInfoQCOM-numPhases-06962"></a> <span class="vuid">VUID-VkImageViewSampleWeightCreateInfoQCOM-numPhases-06962</span><br>

<code>numPhases</code> <strong>must</strong> be a power of two squared value (i.e., 1, 4, 16,
64, 256, etc.)</p>
</li>
<li>
<p><a id="VUID-VkImageViewSampleWeightCreateInfoQCOM-numPhases-06963" href="#VUID-VkImageViewSampleWeightCreateInfoQCOM-numPhases-06963"></a> <span class="vuid">VUID-VkImageViewSampleWeightCreateInfoQCOM-numPhases-06963</span><br>

<code>numPhases</code> <strong>must</strong> be less than or equal to
<a href="devsandqueues.html#limits-weightfilter-phases" class="xref page">    <code>VkPhysicalDeviceImageProcessingPropertiesQCOM</code>::<code>maxWeightFilterPhases</code></a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkImageViewSampleWeightCreateInfoQCOM-sType-sType" href="#VUID-VkImageViewSampleWeightCreateInfoQCOM-sType-sType"></a> <span class="vuid">VUID-VkImageViewSampleWeightCreateInfoQCOM-sType-sType</span><br>
 <code>sType</code> <strong>must</strong> be <code>VK_STRUCTURE_TYPE_IMAGE_VIEW_SAMPLE_WEIGHT_CREATE_INFO_QCOM</code></p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>To destroy an image view, call:</p>
</div>
<div id="vkDestroyImageView" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_VERSION_1_0
void vkDestroyImageView(
    VkDevice                                    device,
    VkImageView                                 imageView,
    const VkAllocationCallbacks*                pAllocator);</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>device</code> is the logical device that destroys the image view.</p>
</li>
<li>
<p><code>imageView</code> is the image view to destroy.</p>
</li>
<li>
<p><code>pAllocator</code> controls host memory allocation as described in the
<a href="memory.html#memory-allocation" class="xref page">Memory Allocation</a> chapter.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkDestroyImageView-imageView-01026" href="#VUID-vkDestroyImageView-imageView-01026"></a> <span class="vuid">VUID-vkDestroyImageView-imageView-01026</span><br>

All submitted commands that refer to <code>imageView</code> <strong>must</strong> have
completed execution</p>
</li>
<li>
<p><a id="VUID-vkDestroyImageView-imageView-01027" href="#VUID-vkDestroyImageView-imageView-01027"></a> <span class="vuid">VUID-vkDestroyImageView-imageView-01027</span><br>

If <code>VkAllocationCallbacks</code> were provided when <code>imageView</code> was
created, a compatible set of callbacks <strong>must</strong> be provided here</p>
</li>
<li>
<p><a id="VUID-vkDestroyImageView-imageView-01028" href="#VUID-vkDestroyImageView-imageView-01028"></a> <span class="vuid">VUID-vkDestroyImageView-imageView-01028</span><br>

If no <code>VkAllocationCallbacks</code> were provided when <code>imageView</code> was
created, <code>pAllocator</code> <strong>must</strong> be <code>NULL</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkDestroyImageView-device-parameter" href="#VUID-vkDestroyImageView-device-parameter"></a> <span class="vuid">VUID-vkDestroyImageView-device-parameter</span><br>
 <code>device</code> <strong>must</strong> be a valid <a href="devsandqueues.html#VkDevice" class="xref page">VkDevice</a> handle</p>
</li>
<li>
<p><a id="VUID-vkDestroyImageView-imageView-parameter" href="#VUID-vkDestroyImageView-imageView-parameter"></a> <span class="vuid">VUID-vkDestroyImageView-imageView-parameter</span><br>
 If <code>imageView</code> is not <a href="../appendices/boilerplate.html#VK_NULL_HANDLE" class="xref page">VK_NULL_HANDLE</a>, <code>imageView</code> <strong>must</strong> be a valid <a href="#VkImageView">VkImageView</a> handle</p>
</li>
<li>
<p><a id="VUID-vkDestroyImageView-pAllocator-parameter" href="#VUID-vkDestroyImageView-pAllocator-parameter"></a> <span class="vuid">VUID-vkDestroyImageView-pAllocator-parameter</span><br>
 If <code>pAllocator</code> is not <code>NULL</code>, <code>pAllocator</code> <strong>must</strong> be a valid pointer to a valid <a href="memory.html#VkAllocationCallbacks" class="xref page">VkAllocationCallbacks</a> structure</p>
</li>
<li>
<p><a id="VUID-vkDestroyImageView-imageView-parent" href="#VUID-vkDestroyImageView-imageView-parent"></a> <span class="vuid">VUID-vkDestroyImageView-imageView-parent</span><br>
 If <code>imageView</code> is a valid handle, it <strong>must</strong> have been created, allocated, or retrieved from <code>device</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Host Synchronization</div>
<div class="ulist">
<ul>
<li>
<p>Host access to <code>imageView</code> <strong>must</strong> be externally synchronized</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>To get the handle for an image view, call:</p>
</div>
<div id="vkGetImageViewHandleNVX" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_NVX_image_view_handle
uint32_t vkGetImageViewHandleNVX(
    VkDevice                                    device,
    const VkImageViewHandleInfoNVX*             pInfo);</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>device</code> is the logical device that owns the image view.</p>
</li>
<li>
<p><code>pInfo</code> describes the image view to query and type of handle.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkGetImageViewHandleNVX-device-parameter" href="#VUID-vkGetImageViewHandleNVX-device-parameter"></a> <span class="vuid">VUID-vkGetImageViewHandleNVX-device-parameter</span><br>
 <code>device</code> <strong>must</strong> be a valid <a href="devsandqueues.html#VkDevice" class="xref page">VkDevice</a> handle</p>
</li>
<li>
<p><a id="VUID-vkGetImageViewHandleNVX-pInfo-parameter" href="#VUID-vkGetImageViewHandleNVX-pInfo-parameter"></a> <span class="vuid">VUID-vkGetImageViewHandleNVX-pInfo-parameter</span><br>
 <code>pInfo</code> <strong>must</strong> be a valid pointer to a valid <a href="#VkImageViewHandleInfoNVX">VkImageViewHandleInfoNVX</a> structure</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>VkImageViewHandleInfoNVX</code> structure is defined as:</p>
</div>
<div id="VkImageViewHandleInfoNVX" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_NVX_image_view_handle
typedef struct VkImageViewHandleInfoNVX {
    VkStructureType     sType;
    const void*         pNext;
    VkImageView         imageView;
    VkDescriptorType    descriptorType;
    VkSampler           sampler;
} VkImageViewHandleInfoNVX;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is a <a href="fundamentals.html#VkStructureType" class="xref page">VkStructureType</a> value identifying this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>imageView</code> is the image view to query.</p>
</li>
<li>
<p><code>descriptorType</code> is the type of descriptor for which to query a
handle.</p>
</li>
<li>
<p><code>sampler</code> is the sampler to combine with the image view when
generating the handle.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkImageViewHandleInfoNVX-descriptorType-02654" href="#VUID-VkImageViewHandleInfoNVX-descriptorType-02654"></a> <span class="vuid">VUID-VkImageViewHandleInfoNVX-descriptorType-02654</span><br>

<code>descriptorType</code> <strong>must</strong> be <code>VK_DESCRIPTOR_TYPE_SAMPLED_IMAGE</code>,
<code>VK_DESCRIPTOR_TYPE_STORAGE_IMAGE</code>, or
<code>VK_DESCRIPTOR_TYPE_COMBINED_IMAGE_SAMPLER</code></p>
</li>
<li>
<p><a id="VUID-VkImageViewHandleInfoNVX-sampler-02655" href="#VUID-VkImageViewHandleInfoNVX-sampler-02655"></a> <span class="vuid">VUID-VkImageViewHandleInfoNVX-sampler-02655</span><br>

<code>sampler</code> <strong>must</strong> be a valid <a href="samplers.html#VkSampler" class="xref page">VkSampler</a> if <code>descriptorType</code>
is <code>VK_DESCRIPTOR_TYPE_COMBINED_IMAGE_SAMPLER</code></p>
</li>
<li>
<p><a id="VUID-VkImageViewHandleInfoNVX-imageView-02656" href="#VUID-VkImageViewHandleInfoNVX-imageView-02656"></a> <span class="vuid">VUID-VkImageViewHandleInfoNVX-imageView-02656</span><br>

If descriptorType is <code>VK_DESCRIPTOR_TYPE_SAMPLED_IMAGE</code> or
<code>VK_DESCRIPTOR_TYPE_COMBINED_IMAGE_SAMPLER</code>, the image that
<code>imageView</code> was created from <strong>must</strong> have been created with the
<code>VK_IMAGE_USAGE_SAMPLED_BIT</code> usage bit set</p>
</li>
<li>
<p><a id="VUID-VkImageViewHandleInfoNVX-imageView-02657" href="#VUID-VkImageViewHandleInfoNVX-imageView-02657"></a> <span class="vuid">VUID-VkImageViewHandleInfoNVX-imageView-02657</span><br>

If descriptorType is <code>VK_DESCRIPTOR_TYPE_STORAGE_IMAGE</code>, the image
that <code>imageView</code> was created from <strong>must</strong> have been created with the
<code>VK_IMAGE_USAGE_STORAGE_BIT</code> usage bit set</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkImageViewHandleInfoNVX-sType-sType" href="#VUID-VkImageViewHandleInfoNVX-sType-sType"></a> <span class="vuid">VUID-VkImageViewHandleInfoNVX-sType-sType</span><br>
 <code>sType</code> <strong>must</strong> be <code>VK_STRUCTURE_TYPE_IMAGE_VIEW_HANDLE_INFO_NVX</code></p>
</li>
<li>
<p><a id="VUID-VkImageViewHandleInfoNVX-pNext-pNext" href="#VUID-VkImageViewHandleInfoNVX-pNext-pNext"></a> <span class="vuid">VUID-VkImageViewHandleInfoNVX-pNext-pNext</span><br>
 <code>pNext</code> <strong>must</strong> be <code>NULL</code></p>
</li>
<li>
<p><a id="VUID-VkImageViewHandleInfoNVX-imageView-parameter" href="#VUID-VkImageViewHandleInfoNVX-imageView-parameter"></a> <span class="vuid">VUID-VkImageViewHandleInfoNVX-imageView-parameter</span><br>
 <code>imageView</code> <strong>must</strong> be a valid <a href="#VkImageView">VkImageView</a> handle</p>
</li>
<li>
<p><a id="VUID-VkImageViewHandleInfoNVX-descriptorType-parameter" href="#VUID-VkImageViewHandleInfoNVX-descriptorType-parameter"></a> <span class="vuid">VUID-VkImageViewHandleInfoNVX-descriptorType-parameter</span><br>
 <code>descriptorType</code> <strong>must</strong> be a valid <a href="descriptorsets.html#VkDescriptorType" class="xref page">VkDescriptorType</a> value</p>
</li>
<li>
<p><a id="VUID-VkImageViewHandleInfoNVX-sampler-parameter" href="#VUID-VkImageViewHandleInfoNVX-sampler-parameter"></a> <span class="vuid">VUID-VkImageViewHandleInfoNVX-sampler-parameter</span><br>
 If <code>sampler</code> is not <a href="../appendices/boilerplate.html#VK_NULL_HANDLE" class="xref page">VK_NULL_HANDLE</a>, <code>sampler</code> <strong>must</strong> be a valid <a href="samplers.html#VkSampler" class="xref page">VkSampler</a> handle</p>
</li>
<li>
<p><a id="VUID-VkImageViewHandleInfoNVX-commonparent" href="#VUID-VkImageViewHandleInfoNVX-commonparent"></a> <span class="vuid">VUID-VkImageViewHandleInfoNVX-commonparent</span><br>
 Both of <code>imageView</code>, and <code>sampler</code> that are valid handles of non-ignored parameters <strong>must</strong> have been created, allocated, or retrieved from the same <a href="devsandqueues.html#VkDevice" class="xref page">VkDevice</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>To get the device address for an image view, call:</p>
</div>
<div id="vkGetImageViewAddressNVX" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_NVX_image_view_handle
VkResult vkGetImageViewAddressNVX(
    VkDevice                                    device,
    VkImageView                                 imageView,
    VkImageViewAddressPropertiesNVX*            pProperties);</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>device</code> is the logical device that owns the image view.</p>
</li>
<li>
<p><code>imageView</code> is a handle to the image view.</p>
</li>
<li>
<p><code>pProperties</code> contains the device address and size when the call
returns.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkGetImageViewAddressNVX-device-parameter" href="#VUID-vkGetImageViewAddressNVX-device-parameter"></a> <span class="vuid">VUID-vkGetImageViewAddressNVX-device-parameter</span><br>
 <code>device</code> <strong>must</strong> be a valid <a href="devsandqueues.html#VkDevice" class="xref page">VkDevice</a> handle</p>
</li>
<li>
<p><a id="VUID-vkGetImageViewAddressNVX-imageView-parameter" href="#VUID-vkGetImageViewAddressNVX-imageView-parameter"></a> <span class="vuid">VUID-vkGetImageViewAddressNVX-imageView-parameter</span><br>
 <code>imageView</code> <strong>must</strong> be a valid <a href="#VkImageView">VkImageView</a> handle</p>
</li>
<li>
<p><a id="VUID-vkGetImageViewAddressNVX-pProperties-parameter" href="#VUID-vkGetImageViewAddressNVX-pProperties-parameter"></a> <span class="vuid">VUID-vkGetImageViewAddressNVX-pProperties-parameter</span><br>
 <code>pProperties</code> <strong>must</strong> be a valid pointer to a <a href="#VkImageViewAddressPropertiesNVX">VkImageViewAddressPropertiesNVX</a> structure</p>
</li>
<li>
<p><a id="VUID-vkGetImageViewAddressNVX-imageView-parent" href="#VUID-vkGetImageViewAddressNVX-imageView-parent"></a> <span class="vuid">VUID-vkGetImageViewAddressNVX-imageView-parent</span><br>
 <code>imageView</code> <strong>must</strong> have been created, allocated, or retrieved from <code>device</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Return Codes</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><a href="fundamentals.html#fundamentals-successcodes" class="xref page">Success</a></dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><code>VK_SUCCESS</code></p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1"><a href="fundamentals.html#fundamentals-errorcodes" class="xref page">Failure</a></dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><code>VK_ERROR_OUT_OF_HOST_MEMORY</code></p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>VkImageViewAddressPropertiesNVX</code> structure is defined as:</p>
</div>
<div id="VkImageViewAddressPropertiesNVX" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_NVX_image_view_handle
typedef struct VkImageViewAddressPropertiesNVX {
    VkStructureType    sType;
    void*              pNext;
    VkDeviceAddress    deviceAddress;
    VkDeviceSize       size;
} VkImageViewAddressPropertiesNVX;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is a <a href="fundamentals.html#VkStructureType" class="xref page">VkStructureType</a> value identifying this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>deviceAddress</code> is the device address of the image view.</p>
</li>
<li>
<p><code>size</code> is the size in bytes of the image view device memory.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkImageViewAddressPropertiesNVX-sType-sType" href="#VUID-VkImageViewAddressPropertiesNVX-sType-sType"></a> <span class="vuid">VUID-VkImageViewAddressPropertiesNVX-sType-sType</span><br>
 <code>sType</code> <strong>must</strong> be <code>VK_STRUCTURE_TYPE_IMAGE_VIEW_ADDRESS_PROPERTIES_NVX</code></p>
</li>
<li>
<p><a id="VUID-VkImageViewAddressPropertiesNVX-pNext-pNext" href="#VUID-VkImageViewAddressPropertiesNVX-pNext-pNext"></a> <span class="vuid">VUID-VkImageViewAddressPropertiesNVX-pNext-pNext</span><br>
 <code>pNext</code> <strong>must</strong> be <code>NULL</code></p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="resources-image-view-format-features"><a class="anchor" href="#resources-image-view-format-features"></a>Image View Format Features</h3>
<div class="paragraph">
<p>Valid uses of a <a href="#VkImageView">VkImageView</a> <strong>may</strong> depend on the image view&#8217;s <em>format
features</em>, defined below.
Such constraints are documented in the affected valid usage statement.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>If Vulkan 1.3 is supported or the <code><a href="../appendices/extensions.html#VK_KHR_format_feature_flags2" class="xref page">VK_KHR_format_feature_flags2</a></code>
extension is supported, and <a href="#VkImageViewCreateInfo">VkImageViewCreateInfo</a>::<code>image</code> was
created with <code>VK_IMAGE_TILING_LINEAR</code>, then the image view&#8217;s set of
<em>format features</em> is the value of
<a href="formats.html#VkFormatProperties3" class="xref page">VkFormatProperties3</a>::<code>linearTilingFeatures</code> found by calling
<a href="formats.html#vkGetPhysicalDeviceFormatProperties2" class="xref page">vkGetPhysicalDeviceFormatProperties2</a> on the same <code>format</code> as
<a href="#VkImageViewCreateInfo">VkImageViewCreateInfo</a>::<code>format</code>.</p>
</li>
<li>
<p>If Vulkan 1.3 is not supported and the
<code><a href="../appendices/extensions.html#VK_KHR_format_feature_flags2" class="xref page">VK_KHR_format_feature_flags2</a></code> extension is not supported, and
<a href="#VkImageViewCreateInfo">VkImageViewCreateInfo</a>::<code>image</code> was created with
<code>VK_IMAGE_TILING_LINEAR</code>, then the image view&#8217;s set of <em>format
features</em> is the union of the value of
<a href="formats.html#VkFormatProperties" class="xref page">VkFormatProperties</a>::<code>linearTilingFeatures</code> found by calling
<a href="formats.html#vkGetPhysicalDeviceFormatProperties" class="xref page">vkGetPhysicalDeviceFormatProperties</a> on the same <code>format</code> as
<a href="#VkImageViewCreateInfo">VkImageViewCreateInfo</a>::<code>format</code>, with:</p>
<div class="ulist">
<ul>
<li>
<p><code>VK_FORMAT_FEATURE_2_SAMPLED_IMAGE_DEPTH_COMPARISON_BIT</code> if the
format is a depth/stencil format and the image view features also
contain <code>VK_FORMAT_FEATURE_2_SAMPLED_IMAGE_BIT</code>.</p>
</li>
<li>
<p><code>VK_FORMAT_FEATURE_2_STORAGE_READ_WITHOUT_FORMAT_BIT</code> if the format
is one of the <a href="formats.html#formats-without-shader-storage-format" class="xref page">extended storage     formats</a> and <code>shaderStorageImageReadWithoutFormat</code> is enabled on
the device.</p>
</li>
<li>
<p><code>VK_FORMAT_FEATURE_2_STORAGE_WRITE_WITHOUT_FORMAT_BIT</code> if the
format is one of the <a href="formats.html#formats-without-shader-storage-format" class="xref page">extended     storage formats</a> and <code>shaderStorageImageWriteWithoutFormat</code> is
enabled on the device.</p>
</li>
</ul>
</div>
</li>
<li>
<p>If Vulkan 1.3 is supported or the <code><a href="../appendices/extensions.html#VK_KHR_format_feature_flags2" class="xref page">VK_KHR_format_feature_flags2</a></code>
extension is supported, and <a href="#VkImageViewCreateInfo">VkImageViewCreateInfo</a>::<code>image</code> was
created with <code>VK_IMAGE_TILING_OPTIMAL</code>,
but without an
<a href="memory.html#memory-external-android-hardware-buffer-external-formats" class="xref page">Android    hardware buffer external format</a>,
or a <a href="memory.html#memory-external-screen-buffer-external-formats" class="xref page">QNX Screen buffer    external format</a>,
then the image view&#8217;s set of <em>format features</em> is the value of
<a href="formats.html#VkFormatProperties" class="xref page">VkFormatProperties</a>::<code>optimalTilingFeatures</code> or
<a href="formats.html#VkFormatProperties3" class="xref page">VkFormatProperties3</a>::<code>optimalTilingFeatures</code> found by calling
<a href="formats.html#vkGetPhysicalDeviceFormatProperties" class="xref page">vkGetPhysicalDeviceFormatProperties</a> or
<a href="capabilities.html#vkGetPhysicalDeviceImageFormatProperties2" class="xref page">vkGetPhysicalDeviceImageFormatProperties2</a> on the same <code>format</code>
as <a href="#VkImageViewCreateInfo">VkImageViewCreateInfo</a>::<code>format</code>.</p>
</li>
<li>
<p>If Vulkan 1.3 is not supported and the
<code><a href="../appendices/extensions.html#VK_KHR_format_feature_flags2" class="xref page">VK_KHR_format_feature_flags2</a></code> extension is not supported, and
<a href="#VkImageViewCreateInfo">VkImageViewCreateInfo</a>::<code>image</code> was created with
<code>VK_IMAGE_TILING_OPTIMAL</code>,
but without an
<a href="memory.html#memory-external-android-hardware-buffer-external-formats" class="xref page">Android    hardware buffer external format</a>,
or a <a href="memory.html#memory-external-screen-buffer-external-formats" class="xref page">QNX Screen buffer    external format</a>,
then the image view&#8217;s set of <em>format features</em> is the union of the value
of <a href="formats.html#VkFormatProperties" class="xref page">VkFormatProperties</a>::<code>optimalTilingFeatures</code> found by
calling <a href="formats.html#vkGetPhysicalDeviceFormatProperties" class="xref page">vkGetPhysicalDeviceFormatProperties</a> on the same
<code>format</code> as <a href="#VkImageViewCreateInfo">VkImageViewCreateInfo</a>::<code>format</code>, with:</p>
<div class="ulist">
<ul>
<li>
<p><code>VK_FORMAT_FEATURE_2_SAMPLED_IMAGE_DEPTH_COMPARISON_BIT</code> if the
format is a depth/stencil format and the image view features also
contain <code>VK_FORMAT_FEATURE_2_SAMPLED_IMAGE_BIT</code>.</p>
</li>
<li>
<p><code>VK_FORMAT_FEATURE_2_STORAGE_READ_WITHOUT_FORMAT_BIT</code> if the format
is one of the <a href="formats.html#formats-without-shader-storage-format" class="xref page">extended storage     formats</a> and <code>shaderStorageImageReadWithoutFormat</code> is enabled on
the device.</p>
</li>
<li>
<p><code>VK_FORMAT_FEATURE_2_STORAGE_WRITE_WITHOUT_FORMAT_BIT</code> if the
format is one of the <a href="formats.html#formats-without-shader-storage-format" class="xref page">extended     storage formats</a> and <code>shaderStorageImageWriteWithoutFormat</code> is
enabled on the device.</p>
</li>
</ul>
</div>
</li>
<li>
<p>If <a href="#VkImageViewCreateInfo">VkImageViewCreateInfo</a>::<code>image</code> was created with an
<a href="memory.html#memory-external-android-hardware-buffer-external-formats" class="xref page">Android    hardware buffer external format</a>, then the image views&#8217;s set of <em>format
features</em> is the value of
<a href="memory.html#VkAndroidHardwareBufferFormatPropertiesANDROID" class="xref page">VkAndroidHardwareBufferFormatPropertiesANDROID</a>::<code>formatFeatures</code>
found by calling <a href="memory.html#vkGetAndroidHardwareBufferPropertiesANDROID" class="xref page">vkGetAndroidHardwareBufferPropertiesANDROID</a> on
the Android hardware buffer that was imported to the
<a href="memory.html#VkDeviceMemory" class="xref page">VkDeviceMemory</a> to which the
<a href="#VkImageViewCreateInfo">VkImageViewCreateInfo</a>::<code>image</code> is bound.</p>
</li>
<li>
<p>If <a href="#VkImageViewCreateInfo">VkImageViewCreateInfo</a>::<code>image</code> was created with a
<a href="memory.html#memory-external-screen-buffer-external-formats" class="xref page">QNX Screen buffer    external format</a>, then the image views&#8217;s set of <em>format features</em> is
the value of
<a href="memory.html#VkScreenBufferFormatPropertiesQNX" class="xref page">VkScreenBufferFormatPropertiesQNX</a>::<code>formatFeatures</code> found by
calling <a href="memory.html#vkGetScreenBufferPropertiesQNX" class="xref page">vkGetScreenBufferPropertiesQNX</a> on the QNX Screen buffer
that was imported to the <a href="memory.html#VkDeviceMemory" class="xref page">VkDeviceMemory</a> to which the
<a href="#VkImageViewCreateInfo">VkImageViewCreateInfo</a>::<code>image</code> is bound.</p>
</li>
<li>
<p>If <a href="#VkImageViewCreateInfo">VkImageViewCreateInfo</a>::<code>image</code> was created with a chained
<a href="#VkBufferCollectionImageCreateInfoFUCHSIA">VkBufferCollectionImageCreateInfoFUCHSIA</a>, then the image view&#8217;s
set of <em>format features</em> is the value of
<a href="#VkBufferCollectionPropertiesFUCHSIA">VkBufferCollectionPropertiesFUCHSIA</a>::<code>formatFeatures</code> found by
calling <a href="#vkGetBufferCollectionPropertiesFUCHSIA">vkGetBufferCollectionPropertiesFUCHSIA</a> on the buffer
collection passed as
<a href="#VkBufferCollectionImageCreateInfoFUCHSIA">VkBufferCollectionImageCreateInfoFUCHSIA</a>::<code>collection</code> when
the image was created.</p>
</li>
<li>
<p>If <a href="#VkImageViewCreateInfo">VkImageViewCreateInfo</a>::<code>image</code> was created with
<code>VK_IMAGE_TILING_DRM_FORMAT_MODIFIER_EXT</code>, then:</p>
<div class="ulist">
<ul>
<li>
<p>The image&#8217;s DRM format modifier is the value of
<a href="#VkImageDrmFormatModifierPropertiesEXT">VkImageDrmFormatModifierPropertiesEXT</a>::<code>drmFormatModifier</code>
found by calling <a href="#vkGetImageDrmFormatModifierPropertiesEXT">vkGetImageDrmFormatModifierPropertiesEXT</a>.</p>
</li>
<li>
<p>Let
<a href="formats.html#VkDrmFormatModifierPropertiesListEXT" class="xref page">VkDrmFormatModifierPropertiesListEXT</a>::<code>pDrmFormatModifierProperties</code>
be the array found by calling
<a href="formats.html#vkGetPhysicalDeviceFormatProperties2" class="xref page">vkGetPhysicalDeviceFormatProperties2</a> on the same <code>format</code> as
<a href="#VkImageViewCreateInfo">VkImageViewCreateInfo</a>::<code>format</code>.</p>
</li>
<li>
<p>Let <code>VkDrmFormatModifierPropertiesEXT prop</code> be the array element whose
<code>drmFormatModifier</code> member is the value of the image&#8217;s DRM format
modifier.</p>
</li>
<li>
<p>Then the image view&#8217;s set of <em>format features</em> is
<code>prop</code>::<code>drmFormatModifierTilingFeatures</code>.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>VkImageViewMinLodCreateInfoEXT</code> structure is defined as:</p>
</div>
<div id="VkImageViewMinLodCreateInfoEXT" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_EXT_image_view_min_lod
typedef struct VkImageViewMinLodCreateInfoEXT {
    VkStructureType    sType;
    const void*        pNext;
    float              minLod;
} VkImageViewMinLodCreateInfoEXT;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is a <a href="fundamentals.html#VkStructureType" class="xref page">VkStructureType</a> value identifying this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>minLod</code> is the value to clamp the minimum LOD accessible by this
<a href="#VkImageView">VkImageView</a>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>If the <code>pNext</code> chain includes a <code>VkImageViewMinLodCreateInfoEXT</code>
structure, then that structure includes a parameter specifying a value to
clamp the minimum LOD value during <a href="textures.html#textures-image-level-selection" class="xref page">Image Level(s) Selection</a>, <a href="textures.html#textures-gather" class="xref page">Texel Gathering</a> and
<a href="textures.html#textures-integer-coordinate-operations" class="xref page">Integer Texel Coordinate Operations</a>.</p>
</div>
<div class="paragraph">
<p>If the image view contains <code>VkImageViewMinLodCreateInfoEXT</code> and it is
used as part of a sampling operation:</p>
</div>
<div class="paragraph">
<p><span class="eq">minLodFloat<sub>imageView</sub> = <code>minLod</code></span></p>
</div>
<div class="paragraph">
<p>otherwise:</p>
</div>
<div class="paragraph">
<p><span class="eq">minLodFloat<sub>imageView</sub> = 0.0</span></p>
</div>
<div class="paragraph">
<p>An integer variant of this parameter is also defined for sampling operations
which access integer mipmap levels:</p>
</div>
<div class="paragraph">
<p><span class="eq">minLodInteger<sub>imageView</sub> = minLodFloat<sub>imageView</sub></span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkImageViewMinLodCreateInfoEXT-minLod-06455" href="#VUID-VkImageViewMinLodCreateInfoEXT-minLod-06455"></a> <span class="vuid">VUID-VkImageViewMinLodCreateInfoEXT-minLod-06455</span><br>

If the <a href="features.html#features-minLod" class="xref page"><code>minLod</code></a> feature is not enabled,
<code>minLod</code> <strong>must</strong> be <code>0.0</code></p>
</li>
<li>
<p><a id="VUID-VkImageViewMinLodCreateInfoEXT-minLod-06456" href="#VUID-VkImageViewMinLodCreateInfoEXT-minLod-06456"></a> <span class="vuid">VUID-VkImageViewMinLodCreateInfoEXT-minLod-06456</span><br>

<code>minLod</code> <strong>must</strong> be less or equal to the index of the last mipmap
level accessible to the view</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkImageViewMinLodCreateInfoEXT-sType-sType" href="#VUID-VkImageViewMinLodCreateInfoEXT-sType-sType"></a> <span class="vuid">VUID-VkImageViewMinLodCreateInfoEXT-sType-sType</span><br>
 <code>sType</code> <strong>must</strong> be <code>VK_STRUCTURE_TYPE_IMAGE_VIEW_MIN_LOD_CREATE_INFO_EXT</code></p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="resources-acceleration-structures"><a class="anchor" href="#resources-acceleration-structures"></a>Acceleration Structures</h2>
<div class="sectionbody">
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Acceleration structures are opaque data structures that are built by the
implementation to more efficiently perform spatial queries on the provided
geometric data.
For this extension, an acceleration structure is either a top-level
acceleration structure containing a set of bottom-level acceleration
structures or a bottom-level acceleration structure containing either a set
of axis-aligned bounding boxes for custom geometry or a set of triangles.</p>
</div>
<div class="paragraph">
<p>Each instance in the top-level acceleration structure contains a reference
to a bottom-level acceleration structure as well as an instance transform
plus information required to index into the shader bindings.
The top-level acceleration structure is what is bound to the acceleration
descriptor, for example to trace inside the shader in the ray tracing
pipeline.</p>
</div>
<div class="paragraph">
<p>Acceleration structures are represented by <code>VkAccelerationStructureKHR</code>
handles:</p>
</div>
<div id="VkAccelerationStructureKHR" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_KHR_acceleration_structure
VK_DEFINE_NON_DISPATCHABLE_HANDLE(VkAccelerationStructureKHR)</code></pre>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Acceleration structures for the <code><a href="../appendices/extensions.html#VK_NV_ray_tracing" class="xref page">VK_NV_ray_tracing</a> extension</code> are
represented by the similar <code>VkAccelerationStructureNV</code> handles:</p>
</div>
<div id="VkAccelerationStructureNV" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_NV_ray_tracing
VK_DEFINE_NON_DISPATCHABLE_HANDLE(VkAccelerationStructureNV)</code></pre>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>To create acceleration structures, call:</p>
</div>
<div id="vkCreateAccelerationStructureNV" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_NV_ray_tracing
VkResult vkCreateAccelerationStructureNV(
    VkDevice                                    device,
    const VkAccelerationStructureCreateInfoNV*  pCreateInfo,
    const VkAllocationCallbacks*                pAllocator,
    VkAccelerationStructureNV*                  pAccelerationStructure);</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>device</code> is the logical device that creates the buffer object.</p>
</li>
<li>
<p><code>pCreateInfo</code> is a pointer to a
<a href="#VkAccelerationStructureCreateInfoNV">VkAccelerationStructureCreateInfoNV</a> structure containing
parameters affecting creation of the acceleration structure.</p>
</li>
<li>
<p><code>pAllocator</code> controls host memory allocation as described in the
<a href="memory.html#memory-allocation" class="xref page">Memory Allocation</a> chapter.</p>
</li>
<li>
<p><code>pAccelerationStructure</code> is a pointer to a
<a href="#VkAccelerationStructureNV">VkAccelerationStructureNV</a> handle in which the resulting
acceleration structure object is returned.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Similarly to other objects in Vulkan, the acceleration structure creation
merely creates an object with a specific &#8220;shape&#8221; as specified by the
information in <a href="#VkAccelerationStructureInfoNV">VkAccelerationStructureInfoNV</a> and <code>compactedSize</code>
in <code>pCreateInfo</code>.</p>
</div>
<div class="paragraph">
<p>Once memory has been bound to the acceleration structure using
<a href="#vkBindAccelerationStructureMemoryNV">vkBindAccelerationStructureMemoryNV</a>, that memory is populated by calls
to <a href="accelstructures.html#vkCmdBuildAccelerationStructureNV" class="xref page">vkCmdBuildAccelerationStructureNV</a> and
<a href="accelstructures.html#vkCmdCopyAccelerationStructureNV" class="xref page">vkCmdCopyAccelerationStructureNV</a>.</p>
</div>
<div class="paragraph">
<p>Acceleration structure creation uses the count and type information from the
geometries, but does not use the data references in the structures.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCreateAccelerationStructureNV-device-parameter" href="#VUID-vkCreateAccelerationStructureNV-device-parameter"></a> <span class="vuid">VUID-vkCreateAccelerationStructureNV-device-parameter</span><br>
 <code>device</code> <strong>must</strong> be a valid <a href="devsandqueues.html#VkDevice" class="xref page">VkDevice</a> handle</p>
</li>
<li>
<p><a id="VUID-vkCreateAccelerationStructureNV-pCreateInfo-parameter" href="#VUID-vkCreateAccelerationStructureNV-pCreateInfo-parameter"></a> <span class="vuid">VUID-vkCreateAccelerationStructureNV-pCreateInfo-parameter</span><br>
 <code>pCreateInfo</code> <strong>must</strong> be a valid pointer to a valid <a href="#VkAccelerationStructureCreateInfoNV">VkAccelerationStructureCreateInfoNV</a> structure</p>
</li>
<li>
<p><a id="VUID-vkCreateAccelerationStructureNV-pAllocator-parameter" href="#VUID-vkCreateAccelerationStructureNV-pAllocator-parameter"></a> <span class="vuid">VUID-vkCreateAccelerationStructureNV-pAllocator-parameter</span><br>
 If <code>pAllocator</code> is not <code>NULL</code>, <code>pAllocator</code> <strong>must</strong> be a valid pointer to a valid <a href="memory.html#VkAllocationCallbacks" class="xref page">VkAllocationCallbacks</a> structure</p>
</li>
<li>
<p><a id="VUID-vkCreateAccelerationStructureNV-pAccelerationStructure-parameter" href="#VUID-vkCreateAccelerationStructureNV-pAccelerationStructure-parameter"></a> <span class="vuid">VUID-vkCreateAccelerationStructureNV-pAccelerationStructure-parameter</span><br>
 <code>pAccelerationStructure</code> <strong>must</strong> be a valid pointer to a <a href="#VkAccelerationStructureNV">VkAccelerationStructureNV</a> handle</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Return Codes</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><a href="fundamentals.html#fundamentals-successcodes" class="xref page">Success</a></dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><code>VK_SUCCESS</code></p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1"><a href="fundamentals.html#fundamentals-errorcodes" class="xref page">Failure</a></dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><code>VK_ERROR_OUT_OF_HOST_MEMORY</code></p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>VkAccelerationStructureCreateInfoNV</code> structure is defined as:</p>
</div>
<div id="VkAccelerationStructureCreateInfoNV" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_NV_ray_tracing
typedef struct VkAccelerationStructureCreateInfoNV {
    VkStructureType                  sType;
    const void*                      pNext;
    VkDeviceSize                     compactedSize;
    VkAccelerationStructureInfoNV    info;
} VkAccelerationStructureCreateInfoNV;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is a <a href="fundamentals.html#VkStructureType" class="xref page">VkStructureType</a> value identifying this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>compactedSize</code> is the size from the result of
<a href="accelstructures.html#vkCmdWriteAccelerationStructuresPropertiesNV" class="xref page">vkCmdWriteAccelerationStructuresPropertiesNV</a> if this acceleration
structure is going to be the target of a compacting copy.</p>
</li>
<li>
<p><code>info</code> is the <a href="#VkAccelerationStructureInfoNV">VkAccelerationStructureInfoNV</a> structure
specifying further parameters of the created acceleration structure.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkAccelerationStructureCreateInfoNV-compactedSize-02421" href="#VUID-VkAccelerationStructureCreateInfoNV-compactedSize-02421"></a> <span class="vuid">VUID-VkAccelerationStructureCreateInfoNV-compactedSize-02421</span><br>

If <code>compactedSize</code> is not <code>0</code> then both <code>info.geometryCount</code> and
<code>info.instanceCount</code> <strong>must</strong> be <code>0</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkAccelerationStructureCreateInfoNV-sType-sType" href="#VUID-VkAccelerationStructureCreateInfoNV-sType-sType"></a> <span class="vuid">VUID-VkAccelerationStructureCreateInfoNV-sType-sType</span><br>
 <code>sType</code> <strong>must</strong> be <code>VK_STRUCTURE_TYPE_ACCELERATION_STRUCTURE_CREATE_INFO_NV</code></p>
</li>
<li>
<p><a id="VUID-VkAccelerationStructureCreateInfoNV-pNext-pNext" href="#VUID-VkAccelerationStructureCreateInfoNV-pNext-pNext"></a> <span class="vuid">VUID-VkAccelerationStructureCreateInfoNV-pNext-pNext</span><br>
 <code>pNext</code> <strong>must</strong> be <code>NULL</code> or a pointer to a valid instance of <a href="descriptorsets.html#VkOpaqueCaptureDescriptorDataCreateInfoEXT" class="xref page">VkOpaqueCaptureDescriptorDataCreateInfoEXT</a></p>
</li>
<li>
<p><a id="VUID-VkAccelerationStructureCreateInfoNV-sType-unique" href="#VUID-VkAccelerationStructureCreateInfoNV-sType-unique"></a> <span class="vuid">VUID-VkAccelerationStructureCreateInfoNV-sType-unique</span><br>
 The <code>sType</code> value of each struct in the <code>pNext</code> chain <strong>must</strong> be unique</p>
</li>
<li>
<p><a id="VUID-VkAccelerationStructureCreateInfoNV-info-parameter" href="#VUID-VkAccelerationStructureCreateInfoNV-info-parameter"></a> <span class="vuid">VUID-VkAccelerationStructureCreateInfoNV-info-parameter</span><br>
 <code>info</code> <strong>must</strong> be a valid <a href="#VkAccelerationStructureInfoNV">VkAccelerationStructureInfoNV</a> structure</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>VkAccelerationStructureInfoNV</code> structure is defined as:</p>
</div>
<div id="VkAccelerationStructureInfoNV" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_NV_ray_tracing
typedef struct VkAccelerationStructureInfoNV {
    VkStructureType                        sType;
    const void*                            pNext;
    VkAccelerationStructureTypeNV          type;
    VkBuildAccelerationStructureFlagsNV    flags;
    uint32_t                               instanceCount;
    uint32_t                               geometryCount;
    const VkGeometryNV*                    pGeometries;
} VkAccelerationStructureInfoNV;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is a <a href="fundamentals.html#VkStructureType" class="xref page">VkStructureType</a> value identifying this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>type</code> is a <a href="#VkAccelerationStructureTypeNV">VkAccelerationStructureTypeNV</a> value specifying the
type of acceleration structure that will be created.</p>
</li>
<li>
<p><code>flags</code> is a bitmask of <a href="#VkBuildAccelerationStructureFlagBitsNV">VkBuildAccelerationStructureFlagBitsNV</a>
specifying additional parameters of the acceleration structure.</p>
</li>
<li>
<p><code>instanceCount</code> specifies the number of instances that will be in
the new acceleration structure.</p>
</li>
<li>
<p><code>geometryCount</code> specifies the number of geometries that will be in
the new acceleration structure.</p>
</li>
<li>
<p><code>pGeometries</code> is a pointer to an array of <code>geometryCount</code>
<a href="#VkGeometryNV">VkGeometryNV</a> structures containing the scene data being passed
into the acceleration structure.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><code>VkAccelerationStructureInfoNV</code> contains information that is used both
for acceleration structure creation with
<a href="#vkCreateAccelerationStructureNV">vkCreateAccelerationStructureNV</a> and in combination with the actual
geometric data to build the acceleration structure with
<a href="accelstructures.html#vkCmdBuildAccelerationStructureNV" class="xref page">vkCmdBuildAccelerationStructureNV</a>.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkAccelerationStructureInfoNV-geometryCount-02422" href="#VUID-VkAccelerationStructureInfoNV-geometryCount-02422"></a> <span class="vuid">VUID-VkAccelerationStructureInfoNV-geometryCount-02422</span><br>

<code>geometryCount</code> <strong>must</strong> be less than or equal to
<a href="limits.html#VkPhysicalDeviceRayTracingPropertiesNV" class="xref page">VkPhysicalDeviceRayTracingPropertiesNV</a>::<code>maxGeometryCount</code></p>
</li>
<li>
<p><a id="VUID-VkAccelerationStructureInfoNV-instanceCount-02423" href="#VUID-VkAccelerationStructureInfoNV-instanceCount-02423"></a> <span class="vuid">VUID-VkAccelerationStructureInfoNV-instanceCount-02423</span><br>

<code>instanceCount</code> <strong>must</strong> be less than or equal to
<a href="limits.html#VkPhysicalDeviceRayTracingPropertiesNV" class="xref page">VkPhysicalDeviceRayTracingPropertiesNV</a>::<code>maxInstanceCount</code></p>
</li>
<li>
<p><a id="VUID-VkAccelerationStructureInfoNV-maxTriangleCount-02424" href="#VUID-VkAccelerationStructureInfoNV-maxTriangleCount-02424"></a> <span class="vuid">VUID-VkAccelerationStructureInfoNV-maxTriangleCount-02424</span><br>

The total number of triangles in all geometries <strong>must</strong> be less than or
equal to
<a href="limits.html#VkPhysicalDeviceRayTracingPropertiesNV" class="xref page">VkPhysicalDeviceRayTracingPropertiesNV</a>::<code>maxTriangleCount</code></p>
</li>
<li>
<p><a id="VUID-VkAccelerationStructureInfoNV-type-02425" href="#VUID-VkAccelerationStructureInfoNV-type-02425"></a> <span class="vuid">VUID-VkAccelerationStructureInfoNV-type-02425</span><br>

If <code>type</code> is <code>VK_ACCELERATION_STRUCTURE_TYPE_TOP_LEVEL_NV</code> then
<code>geometryCount</code> <strong>must</strong> be <code>0</code></p>
</li>
<li>
<p><a id="VUID-VkAccelerationStructureInfoNV-type-02426" href="#VUID-VkAccelerationStructureInfoNV-type-02426"></a> <span class="vuid">VUID-VkAccelerationStructureInfoNV-type-02426</span><br>

If <code>type</code> is <code>VK_ACCELERATION_STRUCTURE_TYPE_BOTTOM_LEVEL_NV</code>
then <code>instanceCount</code> <strong>must</strong> be <code>0</code></p>
</li>
<li>
<p><a id="VUID-VkAccelerationStructureInfoNV-type-02786" href="#VUID-VkAccelerationStructureInfoNV-type-02786"></a> <span class="vuid">VUID-VkAccelerationStructureInfoNV-type-02786</span><br>

If <code>type</code> is <code>VK_ACCELERATION_STRUCTURE_TYPE_BOTTOM_LEVEL_NV</code>
then the <code>geometryType</code> member of each geometry in <code>pGeometries</code>
<strong>must</strong> be the same</p>
</li>
<li>
<p><a id="VUID-VkAccelerationStructureInfoNV-type-04623" href="#VUID-VkAccelerationStructureInfoNV-type-04623"></a> <span class="vuid">VUID-VkAccelerationStructureInfoNV-type-04623</span><br>

<code>type</code> <strong>must</strong> not be <code>VK_ACCELERATION_STRUCTURE_TYPE_GENERIC_KHR</code></p>
</li>
<li>
<p><a id="VUID-VkAccelerationStructureInfoNV-flags-02592" href="#VUID-VkAccelerationStructureInfoNV-flags-02592"></a> <span class="vuid">VUID-VkAccelerationStructureInfoNV-flags-02592</span><br>

If <code>flags</code> has the
<code>VK_BUILD_ACCELERATION_STRUCTURE_PREFER_FAST_TRACE_BIT_NV</code> bit set,
then it <strong>must</strong> not have the
<code>VK_BUILD_ACCELERATION_STRUCTURE_PREFER_FAST_BUILD_BIT_NV</code> bit set</p>
</li>
<li>
<p><a id="VUID-VkAccelerationStructureInfoNV-scratch-02781" href="#VUID-VkAccelerationStructureInfoNV-scratch-02781"></a> <span class="vuid">VUID-VkAccelerationStructureInfoNV-scratch-02781</span><br>

<code>scratch</code> <strong>must</strong> have been created with
<code>VK_BUFFER_USAGE_RAY_TRACING_BIT_NV</code> usage flag</p>
</li>
<li>
<p><a id="VUID-VkAccelerationStructureInfoNV-instanceData-02782" href="#VUID-VkAccelerationStructureInfoNV-instanceData-02782"></a> <span class="vuid">VUID-VkAccelerationStructureInfoNV-instanceData-02782</span><br>

If <code>instanceData</code> is not <a href="../appendices/boilerplate.html#VK_NULL_HANDLE" class="xref page">VK_NULL_HANDLE</a>, <code>instanceData</code>
<strong>must</strong> have been created with <code>VK_BUFFER_USAGE_RAY_TRACING_BIT_NV</code>
usage flag</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkAccelerationStructureInfoNV-sType-sType" href="#VUID-VkAccelerationStructureInfoNV-sType-sType"></a> <span class="vuid">VUID-VkAccelerationStructureInfoNV-sType-sType</span><br>
 <code>sType</code> <strong>must</strong> be <code>VK_STRUCTURE_TYPE_ACCELERATION_STRUCTURE_INFO_NV</code></p>
</li>
<li>
<p><a id="VUID-VkAccelerationStructureInfoNV-pNext-pNext" href="#VUID-VkAccelerationStructureInfoNV-pNext-pNext"></a> <span class="vuid">VUID-VkAccelerationStructureInfoNV-pNext-pNext</span><br>
 <code>pNext</code> <strong>must</strong> be <code>NULL</code></p>
</li>
<li>
<p><a id="VUID-VkAccelerationStructureInfoNV-type-parameter" href="#VUID-VkAccelerationStructureInfoNV-type-parameter"></a> <span class="vuid">VUID-VkAccelerationStructureInfoNV-type-parameter</span><br>
 <code>type</code> <strong>must</strong> be a valid <a href="#VkAccelerationStructureTypeNV">VkAccelerationStructureTypeNV</a> value</p>
</li>
<li>
<p><a id="VUID-VkAccelerationStructureInfoNV-flags-parameter" href="#VUID-VkAccelerationStructureInfoNV-flags-parameter"></a> <span class="vuid">VUID-VkAccelerationStructureInfoNV-flags-parameter</span><br>
 <code>flags</code> <strong>must</strong> be a valid combination of <a href="#VkBuildAccelerationStructureFlagBitsNV">VkBuildAccelerationStructureFlagBitsNV</a> values</p>
</li>
<li>
<p><a id="VUID-VkAccelerationStructureInfoNV-pGeometries-parameter" href="#VUID-VkAccelerationStructureInfoNV-pGeometries-parameter"></a> <span class="vuid">VUID-VkAccelerationStructureInfoNV-pGeometries-parameter</span><br>
 If <code>geometryCount</code> is not <code>0</code>, <code>pGeometries</code> <strong>must</strong> be a valid pointer to an array of <code>geometryCount</code> valid <a href="#VkGeometryNV">VkGeometryNV</a> structures</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>To create an acceleration structure, call:</p>
</div>
<div id="vkCreateAccelerationStructureKHR" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_KHR_acceleration_structure
VkResult vkCreateAccelerationStructureKHR(
    VkDevice                                    device,
    const VkAccelerationStructureCreateInfoKHR* pCreateInfo,
    const VkAllocationCallbacks*                pAllocator,
    VkAccelerationStructureKHR*                 pAccelerationStructure);</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>device</code> is the logical device that creates the acceleration
structure object.</p>
</li>
<li>
<p><code>pCreateInfo</code> is a pointer to a
<a href="#VkAccelerationStructureCreateInfoKHR">VkAccelerationStructureCreateInfoKHR</a> structure containing
parameters affecting creation of the acceleration structure.</p>
</li>
<li>
<p><code>pAllocator</code> controls host memory allocation as described in the
<a href="memory.html#memory-allocation" class="xref page">Memory Allocation</a> chapter.</p>
</li>
<li>
<p><code>pAccelerationStructure</code> is a pointer to a
<code>VkAccelerationStructureKHR</code> handle in which the resulting
acceleration structure object is returned.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Similar to other objects in Vulkan, the acceleration structure creation
merely creates an object with a specific &#8220;shape&#8221;.
The type and quantity of geometry that can be built into an acceleration
structure is determined by the parameters of
<a href="#VkAccelerationStructureCreateInfoKHR">VkAccelerationStructureCreateInfoKHR</a>.</p>
</div>
<div class="paragraph">
<p>The acceleration structure data is stored in the object referred to by
<code>VkAccelerationStructureCreateInfoKHR</code>::<code>buffer</code>.
Once memory has been bound to that buffer, it <strong>must</strong> be populated by
acceleration structure build or acceleration structure copy commands such as
<a href="accelstructures.html#vkCmdBuildAccelerationStructuresKHR" class="xref page">vkCmdBuildAccelerationStructuresKHR</a>,
<a href="accelstructures.html#vkBuildAccelerationStructuresKHR" class="xref page">vkBuildAccelerationStructuresKHR</a>,
<a href="accelstructures.html#vkCmdCopyAccelerationStructureKHR" class="xref page">vkCmdCopyAccelerationStructureKHR</a>, and
<a href="accelstructures.html#vkCopyAccelerationStructureKHR" class="xref page">vkCopyAccelerationStructureKHR</a>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="title">Note</div>
<div class="paragraph">
<p>The expected usage for a trace capture/replay tool is that it will serialize
and later deserialize the acceleration structure data using acceleration
structure copy commands.
During capture the tool will use
<a href="accelstructures.html#vkCopyAccelerationStructureToMemoryKHR" class="xref page">vkCopyAccelerationStructureToMemoryKHR</a> or
<a href="accelstructures.html#vkCmdCopyAccelerationStructureToMemoryKHR" class="xref page">vkCmdCopyAccelerationStructureToMemoryKHR</a> with a <code>mode</code> of
<code>VK_COPY_ACCELERATION_STRUCTURE_MODE_SERIALIZE_KHR</code>, and
<a href="accelstructures.html#vkCopyMemoryToAccelerationStructureKHR" class="xref page">vkCopyMemoryToAccelerationStructureKHR</a> or
<a href="accelstructures.html#vkCmdCopyMemoryToAccelerationStructureKHR" class="xref page">vkCmdCopyMemoryToAccelerationStructureKHR</a> with a <code>mode</code> of
<code>VK_COPY_ACCELERATION_STRUCTURE_MODE_DESERIALIZE_KHR</code> during replay.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="title">Note</div>
<div class="paragraph">
<p>Memory does not need to be bound to the underlying buffer when
<a href="#vkCreateAccelerationStructureKHR">vkCreateAccelerationStructureKHR</a> is called.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The input buffers passed to acceleration structure build commands will be
referenced by the implementation for the duration of the command.
After the command completes, the acceleration structure <strong>may</strong> hold a
reference to any acceleration structure specified by an active instance
contained therein.
Apart from this referencing, acceleration structures <strong>must</strong> be fully
self-contained.
The application <strong>can</strong> reuse or free any memory which was used by the command
as an input or as scratch without affecting the results of ray traversal.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCreateAccelerationStructureKHR-accelerationStructure-03611" href="#VUID-vkCreateAccelerationStructureKHR-accelerationStructure-03611"></a> <span class="vuid">VUID-vkCreateAccelerationStructureKHR-accelerationStructure-03611</span><br>

The <a href="features.html#features-accelerationStructure" class="xref page">    <code>VkPhysicalDeviceAccelerationStructureFeaturesKHR</code>::<code>accelerationStructure</code></a>
feature <strong>must</strong> be enabled</p>
</li>
<li>
<p><a id="VUID-vkCreateAccelerationStructureKHR-deviceAddress-03488" href="#VUID-vkCreateAccelerationStructureKHR-deviceAddress-03488"></a> <span class="vuid">VUID-vkCreateAccelerationStructureKHR-deviceAddress-03488</span><br>

If <a href="#VkAccelerationStructureCreateInfoKHR">VkAccelerationStructureCreateInfoKHR</a>::<code>deviceAddress</code> is
not zero, the <a href="features.html#features-accelerationStructureCaptureReplay" class="xref page">    <code>accelerationStructureCaptureReplay</code></a> feature <strong>must</strong> be enabled</p>
</li>
<li>
<p><a id="VUID-vkCreateAccelerationStructureKHR-device-03489" href="#VUID-vkCreateAccelerationStructureKHR-device-03489"></a> <span class="vuid">VUID-vkCreateAccelerationStructureKHR-device-03489</span><br>

If <code>device</code> was created with multiple physical devices, then the
<a href="features.html#features-bufferDeviceAddressMultiDevice" class="xref page">    <code>bufferDeviceAddressMultiDevice</code></a> feature <strong>must</strong> be enabled</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCreateAccelerationStructureKHR-device-parameter" href="#VUID-vkCreateAccelerationStructureKHR-device-parameter"></a> <span class="vuid">VUID-vkCreateAccelerationStructureKHR-device-parameter</span><br>
 <code>device</code> <strong>must</strong> be a valid <a href="devsandqueues.html#VkDevice" class="xref page">VkDevice</a> handle</p>
</li>
<li>
<p><a id="VUID-vkCreateAccelerationStructureKHR-pCreateInfo-parameter" href="#VUID-vkCreateAccelerationStructureKHR-pCreateInfo-parameter"></a> <span class="vuid">VUID-vkCreateAccelerationStructureKHR-pCreateInfo-parameter</span><br>
 <code>pCreateInfo</code> <strong>must</strong> be a valid pointer to a valid <a href="#VkAccelerationStructureCreateInfoKHR">VkAccelerationStructureCreateInfoKHR</a> structure</p>
</li>
<li>
<p><a id="VUID-vkCreateAccelerationStructureKHR-pAllocator-parameter" href="#VUID-vkCreateAccelerationStructureKHR-pAllocator-parameter"></a> <span class="vuid">VUID-vkCreateAccelerationStructureKHR-pAllocator-parameter</span><br>
 If <code>pAllocator</code> is not <code>NULL</code>, <code>pAllocator</code> <strong>must</strong> be a valid pointer to a valid <a href="memory.html#VkAllocationCallbacks" class="xref page">VkAllocationCallbacks</a> structure</p>
</li>
<li>
<p><a id="VUID-vkCreateAccelerationStructureKHR-pAccelerationStructure-parameter" href="#VUID-vkCreateAccelerationStructureKHR-pAccelerationStructure-parameter"></a> <span class="vuid">VUID-vkCreateAccelerationStructureKHR-pAccelerationStructure-parameter</span><br>
 <code>pAccelerationStructure</code> <strong>must</strong> be a valid pointer to a <a href="#VkAccelerationStructureKHR">VkAccelerationStructureKHR</a> handle</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Return Codes</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><a href="fundamentals.html#fundamentals-successcodes" class="xref page">Success</a></dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><code>VK_SUCCESS</code></p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1"><a href="fundamentals.html#fundamentals-errorcodes" class="xref page">Failure</a></dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><code>VK_ERROR_OUT_OF_HOST_MEMORY</code></p>
</li>
<li>
<p><code>VK_ERROR_INVALID_OPAQUE_CAPTURE_ADDRESS_KHR</code></p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>VkAccelerationStructureCreateInfoKHR</code> structure is defined as:</p>
</div>
<div id="VkAccelerationStructureCreateInfoKHR" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_KHR_acceleration_structure
typedef struct VkAccelerationStructureCreateInfoKHR {
    VkStructureType                          sType;
    const void*                              pNext;
    VkAccelerationStructureCreateFlagsKHR    createFlags;
    VkBuffer                                 buffer;
    VkDeviceSize                             offset;
    VkDeviceSize                             size;
    VkAccelerationStructureTypeKHR           type;
    VkDeviceAddress                          deviceAddress;
} VkAccelerationStructureCreateInfoKHR;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is a <a href="fundamentals.html#VkStructureType" class="xref page">VkStructureType</a> value identifying this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>createFlags</code> is a bitmask of
<a href="#VkAccelerationStructureCreateFlagBitsKHR">VkAccelerationStructureCreateFlagBitsKHR</a> specifying additional
creation parameters of the acceleration structure.</p>
</li>
<li>
<p><code>buffer</code> is the buffer on which the acceleration structure will be
stored.</p>
</li>
<li>
<p><code>offset</code> is an offset in bytes from the base address of the buffer
at which the acceleration structure will be stored, and <strong>must</strong> be a
multiple of <code>256</code>.</p>
</li>
<li>
<p><code>size</code> is the size required for the acceleration structure.</p>
</li>
<li>
<p><code>type</code> is a <a href="#VkAccelerationStructureTypeKHR">VkAccelerationStructureTypeKHR</a> value specifying
the type of acceleration structure that will be created.</p>
</li>
<li>
<p><code>deviceAddress</code> is the device address requested for the acceleration
structure if the <a href="features.html#features-accelerationStructureCaptureReplay" class="xref page">    <code>accelerationStructureCaptureReplay</code></a> feature is being used.
If <code>deviceAddress</code> is zero, no specific address is requested.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Applications <strong>should</strong> avoid creating acceleration structures with
application-provided addresses and implementation-provided addresses in the
same process, to reduce the likelihood of
<code>VK_ERROR_INVALID_OPAQUE_CAPTURE_ADDRESS_KHR</code> errors.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="title">Note</div>
<div class="paragraph">
<p>The expected usage for this is that a trace capture/replay tool will add the
<code>VK_BUFFER_CREATE_DEVICE_ADDRESS_CAPTURE_REPLAY_BIT</code> flag to all buffers
that use <code>VK_BUFFER_USAGE_SHADER_DEVICE_ADDRESS_BIT</code>, and will add
<code>VK_BUFFER_USAGE_SHADER_DEVICE_ADDRESS_BIT</code> to all buffers used as
storage for an acceleration structure where <code>deviceAddress</code> is not zero.
This also means that the tool will need to add
<code>VK_MEMORY_ALLOCATE_DEVICE_ADDRESS_BIT</code> to memory allocations to allow
the flag to be set where the application may not have otherwise required it.
During capture the tool will save the queried opaque device addresses in the
trace.
During replay, the buffers will be created specifying the original address
so any address values stored in the trace data will remain valid.</p>
</div>
<div class="paragraph">
<p>Implementations are expected to separate such buffers in the GPU address
space so normal allocations will avoid using these addresses.
Apps/tools should avoid mixing app-provided and implementation-provided
addresses for buffers created with
<code>VK_BUFFER_CREATE_DEVICE_ADDRESS_CAPTURE_REPLAY_BIT</code>, to avoid address
space allocation conflicts.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Applications <strong>should</strong> create an acceleration structure with a specific
<a href="#VkAccelerationStructureTypeKHR">VkAccelerationStructureTypeKHR</a> other than
<code>VK_ACCELERATION_STRUCTURE_TYPE_GENERIC_KHR</code>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="title">Note</div>
<div class="paragraph">
<p><code>VK_ACCELERATION_STRUCTURE_TYPE_GENERIC_KHR</code> is intended to be used by
API translation layers.
This can be used at acceleration structure creation time in cases where the
actual acceleration structure type (top or bottom) is not yet known.
The actual acceleration structure type must be specified as
<code>VK_ACCELERATION_STRUCTURE_TYPE_TOP_LEVEL_KHR</code> or
<code>VK_ACCELERATION_STRUCTURE_TYPE_BOTTOM_LEVEL_KHR</code> when the build is
performed.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>If the acceleration structure will be the target of a build operation, the
required size for an acceleration structure <strong>can</strong> be queried with
<a href="#vkGetAccelerationStructureBuildSizesKHR">vkGetAccelerationStructureBuildSizesKHR</a>.
If the acceleration structure is going to be the target of a compacting
copy, <a href="accelstructures.html#vkCmdWriteAccelerationStructuresPropertiesKHR" class="xref page">vkCmdWriteAccelerationStructuresPropertiesKHR</a> or
<a href="accelstructures.html#vkWriteAccelerationStructuresPropertiesKHR" class="xref page">vkWriteAccelerationStructuresPropertiesKHR</a> <strong>can</strong> be used to obtain the
compacted size required.</p>
</div>
<div class="paragraph">
<p>If the acceleration structure will be the target of a build operation with
<code>VK_BUILD_ACCELERATION_STRUCTURE_MOTION_BIT_NV</code> it <strong>must</strong> include
<code>VK_ACCELERATION_STRUCTURE_CREATE_MOTION_BIT_NV</code> in <code>createFlags</code>
and include <a href="#VkAccelerationStructureMotionInfoNV">VkAccelerationStructureMotionInfoNV</a> as an extension
structure in <code>pNext</code> with the number of instances as metadata for the
object.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkAccelerationStructureCreateInfoKHR-deviceAddress-03612" href="#VUID-VkAccelerationStructureCreateInfoKHR-deviceAddress-03612"></a> <span class="vuid">VUID-VkAccelerationStructureCreateInfoKHR-deviceAddress-03612</span><br>

If <code>deviceAddress</code> is not zero, <code>createFlags</code> <strong>must</strong> include
<code>VK_ACCELERATION_STRUCTURE_CREATE_DEVICE_ADDRESS_CAPTURE_REPLAY_BIT_KHR</code></p>
</li>
<li>
<p><a id="VUID-VkAccelerationStructureCreateInfoKHR-deviceAddress-09488" href="#VUID-VkAccelerationStructureCreateInfoKHR-deviceAddress-09488"></a> <span class="vuid">VUID-VkAccelerationStructureCreateInfoKHR-deviceAddress-09488</span><br>

If <code>deviceAddress</code> is not zero, it <strong>must</strong> have been retrieved from an
identically created acceleration structure, except for <code>buffer</code> and
<code>deviceAddress</code></p>
</li>
<li>
<p><a id="VUID-VkAccelerationStructureCreateInfoKHR-deviceAddress-09489" href="#VUID-VkAccelerationStructureCreateInfoKHR-deviceAddress-09489"></a> <span class="vuid">VUID-VkAccelerationStructureCreateInfoKHR-deviceAddress-09489</span><br>

If <code>deviceAddress</code> is not zero, <code>buffer</code> <strong>must</strong> have been created
identically to the <code>buffer</code> used to create the acceleration
structure from which <code>deviceAddress</code> was retrieved, except for
<a href="#VkBufferOpaqueCaptureAddressCreateInfo">VkBufferOpaqueCaptureAddressCreateInfo</a>::<code>opaqueCaptureAddress</code></p>
</li>
<li>
<p><a id="VUID-VkAccelerationStructureCreateInfoKHR-deviceAddress-09490" href="#VUID-VkAccelerationStructureCreateInfoKHR-deviceAddress-09490"></a> <span class="vuid">VUID-VkAccelerationStructureCreateInfoKHR-deviceAddress-09490</span><br>

If <code>deviceAddress</code> is not zero, <code>buffer</code> <strong>must</strong> have been created
with a
<a href="#VkBufferOpaqueCaptureAddressCreateInfo">VkBufferOpaqueCaptureAddressCreateInfo</a>::<code>opaqueCaptureAddress</code>
that was retrieved from <a href="descriptorsets.html#vkGetBufferOpaqueCaptureAddress" class="xref page">vkGetBufferOpaqueCaptureAddress</a> for the
<code>buffer</code> that was used to create the acceleration structure from
which <code>deviceAddress</code> was retrieved</p>
</li>
<li>
<p><a id="VUID-VkAccelerationStructureCreateInfoKHR-createFlags-03613" href="#VUID-VkAccelerationStructureCreateInfoKHR-createFlags-03613"></a> <span class="vuid">VUID-VkAccelerationStructureCreateInfoKHR-createFlags-03613</span><br>

If <code>createFlags</code> includes
<code>VK_ACCELERATION_STRUCTURE_CREATE_DEVICE_ADDRESS_CAPTURE_REPLAY_BIT_KHR</code>,
<a href="features.html#VkPhysicalDeviceAccelerationStructureFeaturesKHR" class="xref page">VkPhysicalDeviceAccelerationStructureFeaturesKHR</a>::<code>accelerationStructureCaptureReplay</code>
<strong>must</strong> be <code>VK_TRUE</code></p>
</li>
<li>
<p><a id="VUID-VkAccelerationStructureCreateInfoKHR-buffer-03614" href="#VUID-VkAccelerationStructureCreateInfoKHR-buffer-03614"></a> <span class="vuid">VUID-VkAccelerationStructureCreateInfoKHR-buffer-03614</span><br>

<code>buffer</code> <strong>must</strong> have been created with a <code>usage</code> value containing
<code>VK_BUFFER_USAGE_ACCELERATION_STRUCTURE_STORAGE_BIT_KHR</code></p>
</li>
<li>
<p><a id="VUID-VkAccelerationStructureCreateInfoKHR-buffer-03615" href="#VUID-VkAccelerationStructureCreateInfoKHR-buffer-03615"></a> <span class="vuid">VUID-VkAccelerationStructureCreateInfoKHR-buffer-03615</span><br>

<code>buffer</code> <strong>must</strong> not have been created with
<code>VK_BUFFER_CREATE_SPARSE_RESIDENCY_BIT</code></p>
</li>
<li>
<p><a id="VUID-VkAccelerationStructureCreateInfoKHR-offset-03616" href="#VUID-VkAccelerationStructureCreateInfoKHR-offset-03616"></a> <span class="vuid">VUID-VkAccelerationStructureCreateInfoKHR-offset-03616</span><br>

The sum of <code>offset</code> and <code>size</code> <strong>must</strong> be less than the size of
<code>buffer</code></p>
</li>
<li>
<p><a id="VUID-VkAccelerationStructureCreateInfoKHR-offset-03734" href="#VUID-VkAccelerationStructureCreateInfoKHR-offset-03734"></a> <span class="vuid">VUID-VkAccelerationStructureCreateInfoKHR-offset-03734</span><br>

<code>offset</code> <strong>must</strong> be a multiple of <code>256</code> bytes</p>
</li>
<li>
<p><a id="VUID-VkAccelerationStructureCreateInfoKHR-createFlags-04954" href="#VUID-VkAccelerationStructureCreateInfoKHR-createFlags-04954"></a> <span class="vuid">VUID-VkAccelerationStructureCreateInfoKHR-createFlags-04954</span><br>

If <code>VK_ACCELERATION_STRUCTURE_CREATE_MOTION_BIT_NV</code> is set in
<code>createFlags</code> and <code>type</code> is
<code>VK_ACCELERATION_STRUCTURE_TYPE_TOP_LEVEL_KHR</code>, one member of the
<code>pNext</code> chain <strong>must</strong> be a pointer to a valid instance of
<a href="#VkAccelerationStructureMotionInfoNV">VkAccelerationStructureMotionInfoNV</a></p>
</li>
<li>
<p><a id="VUID-VkAccelerationStructureCreateInfoKHR-createFlags-04955" href="#VUID-VkAccelerationStructureCreateInfoKHR-createFlags-04955"></a> <span class="vuid">VUID-VkAccelerationStructureCreateInfoKHR-createFlags-04955</span><br>

If any geometry includes
<code>VkAccelerationStructureGeometryMotionTrianglesDataNV</code> then
<code>createFlags</code> <strong>must</strong> contain
<code>VK_ACCELERATION_STRUCTURE_CREATE_MOTION_BIT_NV</code></p>
</li>
<li>
<p><a id="VUID-VkAccelerationStructureCreateInfoKHR-createFlags-08108" href="#VUID-VkAccelerationStructureCreateInfoKHR-createFlags-08108"></a> <span class="vuid">VUID-VkAccelerationStructureCreateInfoKHR-createFlags-08108</span><br>

If <code>createFlags</code> includes
<code>VK_ACCELERATION_STRUCTURE_CREATE_DESCRIPTOR_BUFFER_CAPTURE_REPLAY_BIT_EXT</code>,
the <a href="features.html#features-descriptorBufferCaptureReplay" class="xref page">    <code>descriptorBufferCaptureReplay</code></a> feature <strong>must</strong> be enabled</p>
</li>
<li>
<p><a id="VUID-VkAccelerationStructureCreateInfoKHR-pNext-08109" href="#VUID-VkAccelerationStructureCreateInfoKHR-pNext-08109"></a> <span class="vuid">VUID-VkAccelerationStructureCreateInfoKHR-pNext-08109</span><br>

If the <code>pNext</code> chain includes a
<a href="descriptorsets.html#VkOpaqueCaptureDescriptorDataCreateInfoEXT" class="xref page">VkOpaqueCaptureDescriptorDataCreateInfoEXT</a> structure,
<code>createFlags</code> <strong>must</strong> contain
<code>VK_ACCELERATION_STRUCTURE_CREATE_DESCRIPTOR_BUFFER_CAPTURE_REPLAY_BIT_EXT</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkAccelerationStructureCreateInfoKHR-sType-sType" href="#VUID-VkAccelerationStructureCreateInfoKHR-sType-sType"></a> <span class="vuid">VUID-VkAccelerationStructureCreateInfoKHR-sType-sType</span><br>
 <code>sType</code> <strong>must</strong> be <code>VK_STRUCTURE_TYPE_ACCELERATION_STRUCTURE_CREATE_INFO_KHR</code></p>
</li>
<li>
<p><a id="VUID-VkAccelerationStructureCreateInfoKHR-pNext-pNext" href="#VUID-VkAccelerationStructureCreateInfoKHR-pNext-pNext"></a> <span class="vuid">VUID-VkAccelerationStructureCreateInfoKHR-pNext-pNext</span><br>
 Each <code>pNext</code> member of any structure (including this one) in the <code>pNext</code> chain <strong>must</strong> be either <code>NULL</code> or a pointer to a valid instance of <a href="#VkAccelerationStructureMotionInfoNV">VkAccelerationStructureMotionInfoNV</a> or <a href="descriptorsets.html#VkOpaqueCaptureDescriptorDataCreateInfoEXT" class="xref page">VkOpaqueCaptureDescriptorDataCreateInfoEXT</a></p>
</li>
<li>
<p><a id="VUID-VkAccelerationStructureCreateInfoKHR-sType-unique" href="#VUID-VkAccelerationStructureCreateInfoKHR-sType-unique"></a> <span class="vuid">VUID-VkAccelerationStructureCreateInfoKHR-sType-unique</span><br>
 The <code>sType</code> value of each struct in the <code>pNext</code> chain <strong>must</strong> be unique</p>
</li>
<li>
<p><a id="VUID-VkAccelerationStructureCreateInfoKHR-createFlags-parameter" href="#VUID-VkAccelerationStructureCreateInfoKHR-createFlags-parameter"></a> <span class="vuid">VUID-VkAccelerationStructureCreateInfoKHR-createFlags-parameter</span><br>
 <code>createFlags</code> <strong>must</strong> be a valid combination of <a href="#VkAccelerationStructureCreateFlagBitsKHR">VkAccelerationStructureCreateFlagBitsKHR</a> values</p>
</li>
<li>
<p><a id="VUID-VkAccelerationStructureCreateInfoKHR-buffer-parameter" href="#VUID-VkAccelerationStructureCreateInfoKHR-buffer-parameter"></a> <span class="vuid">VUID-VkAccelerationStructureCreateInfoKHR-buffer-parameter</span><br>
 <code>buffer</code> <strong>must</strong> be a valid <a href="#VkBuffer">VkBuffer</a> handle</p>
</li>
<li>
<p><a id="VUID-VkAccelerationStructureCreateInfoKHR-type-parameter" href="#VUID-VkAccelerationStructureCreateInfoKHR-type-parameter"></a> <span class="vuid">VUID-VkAccelerationStructureCreateInfoKHR-type-parameter</span><br>
 <code>type</code> <strong>must</strong> be a valid <a href="#VkAccelerationStructureTypeKHR">VkAccelerationStructureTypeKHR</a> value</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>VkAccelerationStructureMotionInfoNV</code> structure is defined as:</p>
</div>
<div id="VkAccelerationStructureMotionInfoNV" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_NV_ray_tracing_motion_blur
typedef struct VkAccelerationStructureMotionInfoNV {
    VkStructureType                             sType;
    const void*                                 pNext;
    uint32_t                                    maxInstances;
    VkAccelerationStructureMotionInfoFlagsNV    flags;
} VkAccelerationStructureMotionInfoNV;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is a <a href="fundamentals.html#VkStructureType" class="xref page">VkStructureType</a> value identifying this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>maxInstances</code> is the maximum number of instances that <strong>may</strong> be used
in the motion top-level acceleration structure.</p>
</li>
<li>
<p><code>flags</code> is 0 and reserved for future use.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkAccelerationStructureMotionInfoNV-sType-sType" href="#VUID-VkAccelerationStructureMotionInfoNV-sType-sType"></a> <span class="vuid">VUID-VkAccelerationStructureMotionInfoNV-sType-sType</span><br>
 <code>sType</code> <strong>must</strong> be <code>VK_STRUCTURE_TYPE_ACCELERATION_STRUCTURE_MOTION_INFO_NV</code></p>
</li>
<li>
<p><a id="VUID-VkAccelerationStructureMotionInfoNV-flags-zerobitmask" href="#VUID-VkAccelerationStructureMotionInfoNV-flags-zerobitmask"></a> <span class="vuid">VUID-VkAccelerationStructureMotionInfoNV-flags-zerobitmask</span><br>
 <code>flags</code> <strong>must</strong> be <code>0</code></p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div id="VkAccelerationStructureMotionInfoFlagsNV" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_NV_ray_tracing_motion_blur
typedef VkFlags VkAccelerationStructureMotionInfoFlagsNV;</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>VkAccelerationStructureMotionInfoFlagsNV</code> is a bitmask type for setting
a mask, but is currently reserved for future use.</p>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>To get the build sizes for an acceleration structure, call:</p>
</div>
<div id="vkGetAccelerationStructureBuildSizesKHR" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_KHR_acceleration_structure
void vkGetAccelerationStructureBuildSizesKHR(
    VkDevice                                    device,
    VkAccelerationStructureBuildTypeKHR         buildType,
    const VkAccelerationStructureBuildGeometryInfoKHR* pBuildInfo,
    const uint32_t*                             pMaxPrimitiveCounts,
    VkAccelerationStructureBuildSizesInfoKHR*   pSizeInfo);</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>device</code> is the logical device that will be used for creating the
acceleration structure.</p>
</li>
<li>
<p><code>buildType</code> defines whether host or device operations (or both) are
being queried for.</p>
</li>
<li>
<p><code>pBuildInfo</code> is a pointer to a
<a href="accelstructures.html#VkAccelerationStructureBuildGeometryInfoKHR" class="xref page">VkAccelerationStructureBuildGeometryInfoKHR</a> structure describing
parameters of a build operation.</p>
</li>
<li>
<p><code>pMaxPrimitiveCounts</code> is a pointer to an array of
<code>pBuildInfo-&gt;geometryCount</code> <code>uint32_t</code> values defining the number
of primitives built into each geometry.</p>
</li>
<li>
<p><code>pSizeInfo</code> is a pointer to a
<a href="#VkAccelerationStructureBuildSizesInfoKHR">VkAccelerationStructureBuildSizesInfoKHR</a> structure which returns
the size required for an acceleration structure and the sizes required
for the scratch buffers, given the build parameters.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The <code>srcAccelerationStructure</code>, <code>dstAccelerationStructure</code>, and
<code>mode</code> members of <code>pBuildInfo</code> are ignored.
Any <a href="accelstructures.html#VkDeviceOrHostAddressKHR" class="xref page">VkDeviceOrHostAddressKHR</a> or <a href="accelstructures.html#VkDeviceOrHostAddressConstKHR" class="xref page">VkDeviceOrHostAddressConstKHR</a>
members of <code>pBuildInfo</code> are ignored by this command, except that the
<code>hostAddress</code> member of
<a href="accelstructures.html#VkAccelerationStructureGeometryTrianglesDataKHR" class="xref page">VkAccelerationStructureGeometryTrianglesDataKHR</a>::<code>transformData</code>
will be examined to check if it is <code>NULL</code>.</p>
</div>
<div class="paragraph">
<p>An acceleration structure created with the <code>accelerationStructureSize</code>
returned by this command supports any build or update with a
<a href="accelstructures.html#VkAccelerationStructureBuildGeometryInfoKHR" class="xref page">VkAccelerationStructureBuildGeometryInfoKHR</a> structure and array of
<a href="accelstructures.html#VkAccelerationStructureBuildRangeInfoKHR" class="xref page">VkAccelerationStructureBuildRangeInfoKHR</a> structures subject to the
following properties:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The build command is a host build command, and <code>buildType</code> is
<code>VK_ACCELERATION_STRUCTURE_BUILD_TYPE_HOST_KHR</code> or
<code>VK_ACCELERATION_STRUCTURE_BUILD_TYPE_HOST_OR_DEVICE_KHR</code></p>
</li>
<li>
<p>The build command is a device build command, and <code>buildType</code> is
<code>VK_ACCELERATION_STRUCTURE_BUILD_TYPE_DEVICE_KHR</code> or
<code>VK_ACCELERATION_STRUCTURE_BUILD_TYPE_HOST_OR_DEVICE_KHR</code></p>
</li>
<li>
<p>For <a href="accelstructures.html#VkAccelerationStructureBuildGeometryInfoKHR" class="xref page">VkAccelerationStructureBuildGeometryInfoKHR</a>:</p>
<div class="ulist">
<ul>
<li>
<p>Its <code>type</code>, and <code>flags</code> members are equal to
<code>pBuildInfo-&gt;type</code> and <code>pBuildInfo-&gt;flags</code>, respectively.</p>
</li>
<li>
<p><code>geometryCount</code> is less than or equal to
<code>pBuildInfo-&gt;geometryCount</code>.</p>
</li>
<li>
<p>For each element of either <code>pGeometries</code> or <code>ppGeometries</code> at a
given index, its <code>geometryType</code> member is equal to
<code>pBuildInfo-&gt;geometryType</code>.</p>
</li>
<li>
<p>For each element of either <code>pGeometries</code> or <code>ppGeometries</code> at a
given index, its <code>flags</code> member is equal to the corresponding
member of the same element in <code>pBuildInfo</code>.</p>
</li>
<li>
<p>For each element of either <code>pGeometries</code> or <code>ppGeometries</code> at a
given index, with a <code>geometryType</code> member equal to
<code>VK_GEOMETRY_TYPE_TRIANGLES_KHR</code>, the <code>vertexFormat</code> and
<code>indexType</code> members of <code>geometry.triangles</code> are equal to the
corresponding members of the same element in <code>pBuildInfo</code>.</p>
</li>
<li>
<p>For each element of either <code>pGeometries</code> or <code>ppGeometries</code> at a
given index, with a <code>geometryType</code> member equal to
<code>VK_GEOMETRY_TYPE_TRIANGLES_KHR</code>, the <code>maxVertex</code> member of
<code>geometry.triangles</code> is less than or equal to the corresponding
member of the same element in <code>pBuildInfo</code>.</p>
</li>
<li>
<p>For each element of either <code>pGeometries</code> or <code>ppGeometries</code> at a
given index, with a <code>geometryType</code> member equal to
<code>VK_GEOMETRY_TYPE_TRIANGLES_KHR</code>, if the applicable address in the
<code>transformData</code> member of <code>geometry.triangles</code> is not <code>NULL</code>,
the corresponding <code>transformData.hostAddress</code> parameter in
<code>pBuildInfo</code> is not <code>NULL</code>.</p>
</li>
</ul>
</div>
</li>
<li>
<p>For each <a href="accelstructures.html#VkAccelerationStructureBuildRangeInfoKHR" class="xref page">VkAccelerationStructureBuildRangeInfoKHR</a> corresponding to
the <a href="accelstructures.html#VkAccelerationStructureBuildGeometryInfoKHR" class="xref page">VkAccelerationStructureBuildGeometryInfoKHR</a>:</p>
<div class="ulist">
<ul>
<li>
<p>Its <code>primitiveCount</code> member is less than or equal to the
corresponding element of <code>pMaxPrimitiveCounts</code>.</p>
</li>
<li>
<p>For each element of either <code>pGeometries</code> or <code>ppGeometries</code> at a
given index, with a <code>geometryType</code> member equal to
<code>VK_GEOMETRY_TYPE_TRIANGLES_KHR</code>, if the <code>pNext</code> chain contains
<a href="accelstructures.html#VkAccelerationStructureTrianglesOpacityMicromapEXT" class="xref page">VkAccelerationStructureTrianglesOpacityMicromapEXT</a> the
corresponding member of <code>pBuildInfo</code> also contains
<a href="accelstructures.html#VkAccelerationStructureTrianglesOpacityMicromapEXT" class="xref page">VkAccelerationStructureTrianglesOpacityMicromapEXT</a> and with an
equivalent <code>micromap</code>.</p>
</li>
<li>
<p>For each element of either <code>pGeometries</code> or <code>ppGeometries</code> at a
given index, with a <code>geometryType</code> member equal to
<code>VK_GEOMETRY_TYPE_TRIANGLES_KHR</code>, if the <code>pNext</code> chain contains
<a href="accelstructures.html#VkAccelerationStructureTrianglesDisplacementMicromapNV" class="xref page">VkAccelerationStructureTrianglesDisplacementMicromapNV</a> the
corresponding member of <code>pBuildInfo</code> also contains
<a href="accelstructures.html#VkAccelerationStructureTrianglesDisplacementMicromapNV" class="xref page">VkAccelerationStructureTrianglesDisplacementMicromapNV</a> and with
an equivalent <code>micromap</code>.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>Similarly, the <code>updateScratchSize</code> value will support any build command
specifying the <code>VK_BUILD_ACCELERATION_STRUCTURE_MODE_UPDATE_KHR</code>
<code>mode</code> under the above conditions, and the <code>buildScratchSize</code> value
will support any build command specifying the
<code>VK_BUILD_ACCELERATION_STRUCTURE_MODE_BUILD_KHR</code> <code>mode</code> under the
above conditions.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkGetAccelerationStructureBuildSizesKHR-accelerationStructure-08933" href="#VUID-vkGetAccelerationStructureBuildSizesKHR-accelerationStructure-08933"></a> <span class="vuid">VUID-vkGetAccelerationStructureBuildSizesKHR-accelerationStructure-08933</span><br>

The <a href="features.html#features-accelerationStructure" class="xref page">    <code>VkPhysicalDeviceAccelerationStructureFeaturesKHR</code>::<code>accelerationStructure</code></a>
feature <strong>must</strong> be enabled</p>
</li>
<li>
<p><a id="VUID-vkGetAccelerationStructureBuildSizesKHR-device-03618" href="#VUID-vkGetAccelerationStructureBuildSizesKHR-device-03618"></a> <span class="vuid">VUID-vkGetAccelerationStructureBuildSizesKHR-device-03618</span><br>

If <code>device</code> was created with multiple physical devices, then the
<a href="features.html#features-bufferDeviceAddressMultiDevice" class="xref page">    <code>bufferDeviceAddressMultiDevice</code></a> feature <strong>must</strong> be enabled</p>
</li>
<li>
<p><a id="VUID-vkGetAccelerationStructureBuildSizesKHR-pBuildInfo-03619" href="#VUID-vkGetAccelerationStructureBuildSizesKHR-pBuildInfo-03619"></a> <span class="vuid">VUID-vkGetAccelerationStructureBuildSizesKHR-pBuildInfo-03619</span><br>

If <code>pBuildInfo-&gt;geometryCount</code> is not <code>0</code>, <code>pMaxPrimitiveCounts</code>
<strong>must</strong> be a valid pointer to an array of <code>pBuildInfo-&gt;geometryCount</code>
<code>uint32_t</code> values</p>
</li>
<li>
<p><a id="VUID-vkGetAccelerationStructureBuildSizesKHR-pBuildInfo-03785" href="#VUID-vkGetAccelerationStructureBuildSizesKHR-pBuildInfo-03785"></a> <span class="vuid">VUID-vkGetAccelerationStructureBuildSizesKHR-pBuildInfo-03785</span><br>

If <code>pBuildInfo-&gt;pGeometries</code> or <code>pBuildInfo-&gt;ppGeometries</code> has a
<code>geometryType</code> of <code>VK_GEOMETRY_TYPE_INSTANCES_KHR</code>, each
<code>pMaxPrimitiveCounts</code>[i] <strong>must</strong> be less than or equal to
<a href="limits.html#VkPhysicalDeviceAccelerationStructurePropertiesKHR" class="xref page">VkPhysicalDeviceAccelerationStructurePropertiesKHR</a>::<code>maxInstanceCount</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkGetAccelerationStructureBuildSizesKHR-device-parameter" href="#VUID-vkGetAccelerationStructureBuildSizesKHR-device-parameter"></a> <span class="vuid">VUID-vkGetAccelerationStructureBuildSizesKHR-device-parameter</span><br>
 <code>device</code> <strong>must</strong> be a valid <a href="devsandqueues.html#VkDevice" class="xref page">VkDevice</a> handle</p>
</li>
<li>
<p><a id="VUID-vkGetAccelerationStructureBuildSizesKHR-buildType-parameter" href="#VUID-vkGetAccelerationStructureBuildSizesKHR-buildType-parameter"></a> <span class="vuid">VUID-vkGetAccelerationStructureBuildSizesKHR-buildType-parameter</span><br>
 <code>buildType</code> <strong>must</strong> be a valid <a href="#VkAccelerationStructureBuildTypeKHR">VkAccelerationStructureBuildTypeKHR</a> value</p>
</li>
<li>
<p><a id="VUID-vkGetAccelerationStructureBuildSizesKHR-pBuildInfo-parameter" href="#VUID-vkGetAccelerationStructureBuildSizesKHR-pBuildInfo-parameter"></a> <span class="vuid">VUID-vkGetAccelerationStructureBuildSizesKHR-pBuildInfo-parameter</span><br>
 <code>pBuildInfo</code> <strong>must</strong> be a valid pointer to a valid <a href="accelstructures.html#VkAccelerationStructureBuildGeometryInfoKHR" class="xref page">VkAccelerationStructureBuildGeometryInfoKHR</a> structure</p>
</li>
<li>
<p><a id="VUID-vkGetAccelerationStructureBuildSizesKHR-pMaxPrimitiveCounts-parameter" href="#VUID-vkGetAccelerationStructureBuildSizesKHR-pMaxPrimitiveCounts-parameter"></a> <span class="vuid">VUID-vkGetAccelerationStructureBuildSizesKHR-pMaxPrimitiveCounts-parameter</span><br>
 If <code>pMaxPrimitiveCounts</code> is not <code>NULL</code>, <code>pMaxPrimitiveCounts</code> <strong>must</strong> be a valid pointer to an array of <code>pBuildInfo-&gt;geometryCount</code> <code>uint32_t</code> values</p>
</li>
<li>
<p><a id="VUID-vkGetAccelerationStructureBuildSizesKHR-pSizeInfo-parameter" href="#VUID-vkGetAccelerationStructureBuildSizesKHR-pSizeInfo-parameter"></a> <span class="vuid">VUID-vkGetAccelerationStructureBuildSizesKHR-pSizeInfo-parameter</span><br>
 <code>pSizeInfo</code> <strong>must</strong> be a valid pointer to a <a href="#VkAccelerationStructureBuildSizesInfoKHR">VkAccelerationStructureBuildSizesInfoKHR</a> structure</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>VkAccelerationStructureBuildSizesInfoKHR</code> structure describes the
required build sizes for an acceleration structure and scratch buffers and
is defined as:</p>
</div>
<div id="VkAccelerationStructureBuildSizesInfoKHR" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_KHR_acceleration_structure
typedef struct VkAccelerationStructureBuildSizesInfoKHR {
    VkStructureType    sType;
    const void*        pNext;
    VkDeviceSize       accelerationStructureSize;
    VkDeviceSize       updateScratchSize;
    VkDeviceSize       buildScratchSize;
} VkAccelerationStructureBuildSizesInfoKHR;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is a <a href="fundamentals.html#VkStructureType" class="xref page">VkStructureType</a> value identifying this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>accelerationStructureSize</code> is the size in bytes required in a
<a href="#VkAccelerationStructureKHR">VkAccelerationStructureKHR</a> for a build or update operation.</p>
</li>
<li>
<p><code>updateScratchSize</code> is the size in bytes required in a scratch
buffer for an update operation.</p>
</li>
<li>
<p><code>buildScratchSize</code> is the size in bytes required in a scratch buffer
for a build operation.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkAccelerationStructureBuildSizesInfoKHR-sType-sType" href="#VUID-VkAccelerationStructureBuildSizesInfoKHR-sType-sType"></a> <span class="vuid">VUID-VkAccelerationStructureBuildSizesInfoKHR-sType-sType</span><br>
 <code>sType</code> <strong>must</strong> be <code>VK_STRUCTURE_TYPE_ACCELERATION_STRUCTURE_BUILD_SIZES_INFO_KHR</code></p>
</li>
<li>
<p><a id="VUID-VkAccelerationStructureBuildSizesInfoKHR-pNext-pNext" href="#VUID-VkAccelerationStructureBuildSizesInfoKHR-pNext-pNext"></a> <span class="vuid">VUID-VkAccelerationStructureBuildSizesInfoKHR-pNext-pNext</span><br>
 <code>pNext</code> <strong>must</strong> be <code>NULL</code></p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Values which <strong>can</strong> be set in
<a href="#VkAccelerationStructureCreateInfoKHR">VkAccelerationStructureCreateInfoKHR</a>::<code>type</code>
or
<a href="#VkAccelerationStructureInfoNV">VkAccelerationStructureInfoNV</a>::<code>type</code>
specifying the type of acceleration structure, are:</p>
</div>
<div id="VkAccelerationStructureTypeKHR" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_KHR_acceleration_structure
typedef enum VkAccelerationStructureTypeKHR {
    VK_ACCELERATION_STRUCTURE_TYPE_TOP_LEVEL_KHR = 0,
    VK_ACCELERATION_STRUCTURE_TYPE_BOTTOM_LEVEL_KHR = 1,
    VK_ACCELERATION_STRUCTURE_TYPE_GENERIC_KHR = 2,
  // Provided by VK_NV_ray_tracing
    VK_ACCELERATION_STRUCTURE_TYPE_TOP_LEVEL_NV = VK_ACCELERATION_STRUCTURE_TYPE_TOP_LEVEL_KHR,
  // Provided by VK_NV_ray_tracing
    VK_ACCELERATION_STRUCTURE_TYPE_BOTTOM_LEVEL_NV = VK_ACCELERATION_STRUCTURE_TYPE_BOTTOM_LEVEL_KHR,
} VkAccelerationStructureTypeKHR;</code></pre>
</div>
</div>
<div class="paragraph">
<p>or the equivalent</p>
</div>
<div id="VkAccelerationStructureTypeNV" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_NV_ray_tracing
typedef VkAccelerationStructureTypeKHR VkAccelerationStructureTypeNV;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>VK_ACCELERATION_STRUCTURE_TYPE_TOP_LEVEL_KHR</code> is a top-level
acceleration structure containing instance data referring to
bottom-level acceleration structures.</p>
</li>
<li>
<p><code>VK_ACCELERATION_STRUCTURE_TYPE_BOTTOM_LEVEL_KHR</code> is a bottom-level
acceleration structure containing the AABBs or geometry to be
intersected.</p>
</li>
<li>
<p><code>VK_ACCELERATION_STRUCTURE_TYPE_GENERIC_KHR</code> is an acceleration
structure whose type is determined at build time used for special
circumstances.
In these cases, the acceleration structure type is not known at creation
time, but <strong>must</strong> be specified at build time as either top or bottom.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Bits which <strong>can</strong> be set in
<a href="#VkAccelerationStructureCreateInfoKHR">VkAccelerationStructureCreateInfoKHR</a>::<code>createFlags</code>, specifying
additional creation parameters for acceleration structures, are:</p>
</div>
<div id="VkAccelerationStructureCreateFlagBitsKHR" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_KHR_acceleration_structure
typedef enum VkAccelerationStructureCreateFlagBitsKHR {
    VK_ACCELERATION_STRUCTURE_CREATE_DEVICE_ADDRESS_CAPTURE_REPLAY_BIT_KHR = 0x00000001,
  // Provided by VK_EXT_descriptor_buffer
    VK_ACCELERATION_STRUCTURE_CREATE_DESCRIPTOR_BUFFER_CAPTURE_REPLAY_BIT_EXT = 0x00000008,
  // Provided by VK_NV_ray_tracing_motion_blur
    VK_ACCELERATION_STRUCTURE_CREATE_MOTION_BIT_NV = 0x00000004,
} VkAccelerationStructureCreateFlagBitsKHR;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>VK_ACCELERATION_STRUCTURE_CREATE_DEVICE_ADDRESS_CAPTURE_REPLAY_BIT_KHR</code>
specifies that the acceleration structure&#8217;s address <strong>can</strong> be saved and
reused on a subsequent run.</p>
</li>
<li>
<p><code>VK_ACCELERATION_STRUCTURE_CREATE_DESCRIPTOR_BUFFER_CAPTURE_REPLAY_BIT_EXT</code>
specifies that the acceleration structure <strong>can</strong> be used with descriptor
buffers when capturing and replaying (e.g. for trace capture and
replay), see <a href="descriptorsets.html#VkOpaqueCaptureDescriptorDataCreateInfoEXT" class="xref page">VkOpaqueCaptureDescriptorDataCreateInfoEXT</a> for more
detail.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div id="VkAccelerationStructureCreateFlagsKHR" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_KHR_acceleration_structure
typedef VkFlags VkAccelerationStructureCreateFlagsKHR;</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>VkAccelerationStructureCreateFlagsKHR</code> is a bitmask type for setting a
mask of zero or more <a href="#VkAccelerationStructureCreateFlagBitsKHR">VkAccelerationStructureCreateFlagBitsKHR</a>.</p>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Bits which <strong>can</strong> be set in
<a href="accelstructures.html#VkAccelerationStructureBuildGeometryInfoKHR" class="xref page">VkAccelerationStructureBuildGeometryInfoKHR</a>::<code>flags</code>
or
<a href="#VkAccelerationStructureInfoNV">VkAccelerationStructureInfoNV</a>::<code>flags</code>
specifying additional parameters for acceleration structure builds, are:</p>
</div>
<div id="VkBuildAccelerationStructureFlagBitsKHR" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_KHR_acceleration_structure
typedef enum VkBuildAccelerationStructureFlagBitsKHR {
    VK_BUILD_ACCELERATION_STRUCTURE_ALLOW_UPDATE_BIT_KHR = 0x00000001,
    VK_BUILD_ACCELERATION_STRUCTURE_ALLOW_COMPACTION_BIT_KHR = 0x00000002,
    VK_BUILD_ACCELERATION_STRUCTURE_PREFER_FAST_TRACE_BIT_KHR = 0x00000004,
    VK_BUILD_ACCELERATION_STRUCTURE_PREFER_FAST_BUILD_BIT_KHR = 0x00000008,
    VK_BUILD_ACCELERATION_STRUCTURE_LOW_MEMORY_BIT_KHR = 0x00000010,
  // Provided by VK_NV_ray_tracing_motion_blur
    VK_BUILD_ACCELERATION_STRUCTURE_MOTION_BIT_NV = 0x00000020,
  // Provided by VK_EXT_opacity_micromap
    VK_BUILD_ACCELERATION_STRUCTURE_ALLOW_OPACITY_MICROMAP_UPDATE_EXT = 0x00000040,
  // Provided by VK_EXT_opacity_micromap
    VK_BUILD_ACCELERATION_STRUCTURE_ALLOW_DISABLE_OPACITY_MICROMAPS_EXT = 0x00000080,
  // Provided by VK_EXT_opacity_micromap
    VK_BUILD_ACCELERATION_STRUCTURE_ALLOW_OPACITY_MICROMAP_DATA_UPDATE_EXT = 0x00000100,
#ifdef VK_ENABLE_BETA_EXTENSIONS
  // Provided by VK_NV_displacement_micromap
    VK_BUILD_ACCELERATION_STRUCTURE_ALLOW_DISPLACEMENT_MICROMAP_UPDATE_NV = 0x00000200,
#endif
  // Provided by VK_KHR_ray_tracing_position_fetch
    VK_BUILD_ACCELERATION_STRUCTURE_ALLOW_DATA_ACCESS_KHR = 0x00000800,
  // Provided by VK_NV_ray_tracing
    VK_BUILD_ACCELERATION_STRUCTURE_ALLOW_UPDATE_BIT_NV = VK_BUILD_ACCELERATION_STRUCTURE_ALLOW_UPDATE_BIT_KHR,
  // Provided by VK_NV_ray_tracing
    VK_BUILD_ACCELERATION_STRUCTURE_ALLOW_COMPACTION_BIT_NV = VK_BUILD_ACCELERATION_STRUCTURE_ALLOW_COMPACTION_BIT_KHR,
  // Provided by VK_NV_ray_tracing
    VK_BUILD_ACCELERATION_STRUCTURE_PREFER_FAST_TRACE_BIT_NV = VK_BUILD_ACCELERATION_STRUCTURE_PREFER_FAST_TRACE_BIT_KHR,
  // Provided by VK_NV_ray_tracing
    VK_BUILD_ACCELERATION_STRUCTURE_PREFER_FAST_BUILD_BIT_NV = VK_BUILD_ACCELERATION_STRUCTURE_PREFER_FAST_BUILD_BIT_KHR,
  // Provided by VK_NV_ray_tracing
    VK_BUILD_ACCELERATION_STRUCTURE_LOW_MEMORY_BIT_NV = VK_BUILD_ACCELERATION_STRUCTURE_LOW_MEMORY_BIT_KHR,
} VkBuildAccelerationStructureFlagBitsKHR;</code></pre>
</div>
</div>
<div class="paragraph">
<p>or the equivalent</p>
</div>
<div id="VkBuildAccelerationStructureFlagBitsNV" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_NV_ray_tracing
typedef VkBuildAccelerationStructureFlagBitsKHR VkBuildAccelerationStructureFlagBitsNV;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>VK_BUILD_ACCELERATION_STRUCTURE_ALLOW_UPDATE_BIT_KHR</code> indicates
    that the specified acceleration structure <strong>can</strong> be updated with
    a <code>mode</code> of <code>VK_BUILD_ACCELERATION_STRUCTURE_MODE_UPDATE_KHR</code> in
    <a href="accelstructures.html#VkAccelerationStructureBuildGeometryInfoKHR" class="xref page">VkAccelerationStructureBuildGeometryInfoKHR</a>
or
    an <code>update</code> of <code>VK_TRUE</code> in
    <a href="accelstructures.html#vkCmdBuildAccelerationStructureNV" class="xref page">vkCmdBuildAccelerationStructureNV</a>
    .</p>
</li>
<li>
<p><code>VK_BUILD_ACCELERATION_STRUCTURE_ALLOW_COMPACTION_BIT_KHR</code> indicates
that the specified acceleration structure <strong>can</strong> act as the source for a
copy acceleration structure command with <code>mode</code> of
<code>VK_COPY_ACCELERATION_STRUCTURE_MODE_COMPACT_KHR</code> to produce a
compacted acceleration structure.</p>
</li>
<li>
<p><code>VK_BUILD_ACCELERATION_STRUCTURE_PREFER_FAST_TRACE_BIT_KHR</code>
indicates that the given acceleration structure build <strong>should</strong> prioritize
trace performance over build time.</p>
</li>
<li>
<p><code>VK_BUILD_ACCELERATION_STRUCTURE_PREFER_FAST_BUILD_BIT_KHR</code>
indicates that the given acceleration structure build <strong>should</strong> prioritize
build time over trace performance.</p>
</li>
<li>
<p><code>VK_BUILD_ACCELERATION_STRUCTURE_LOW_MEMORY_BIT_KHR</code> indicates that
this acceleration structure <strong>should</strong> minimize the size of the scratch
memory and the final result acceleration structure, potentially at the
expense of build time or trace performance.</p>
</li>
<li>
<p><code>VK_BUILD_ACCELERATION_STRUCTURE_ALLOW_OPACITY_MICROMAP_UPDATE_EXT</code>
indicates that the opacity micromaps associated with the specified
acceleration structure <strong>may</strong> change with an acceleration structure
update.</p>
</li>
<li>
<p><code>VK_BUILD_ACCELERATION_STRUCTURE_ALLOW_OPACITY_MICROMAP_DATA_UPDATE_EXT</code>
indicates that the data of the opacity micromaps associated with the
specified acceleration structure <strong>may</strong> change with an acceleration
structure update.</p>
</li>
<li>
<p><code>VK_BUILD_ACCELERATION_STRUCTURE_ALLOW_DISABLE_OPACITY_MICROMAPS_EXT</code>
indicates that the specified acceleration structure <strong>may</strong> be referenced
in an instance with
<code>VK_GEOMETRY_INSTANCE_DISABLE_OPACITY_MICROMAPS_EXT</code> set.</p>
</li>
<li>
<p><code>VK_BUILD_ACCELERATION_STRUCTURE_ALLOW_DATA_ACCESS_KHR</code> indicates
that the specified acceleration structure <strong>can</strong> be used when fetching the
vertex positions of a hit triangle.</p>
</li>
<li>
<p><code>VK_BUILD_ACCELERATION_STRUCTURE_ALLOW_DISPLACEMENT_MICROMAP_UPDATE_NV</code>
indicates that the displacement micromaps associated with the specified
acceleration structure <strong>may</strong> change with an acceleration structure
update.</p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="title">Note</div>
<div class="paragraph">
<p><code>VK_BUILD_ACCELERATION_STRUCTURE_ALLOW_UPDATE_BIT_KHR</code> and
<code>VK_BUILD_ACCELERATION_STRUCTURE_ALLOW_COMPACTION_BIT_KHR</code> <strong>may</strong> take
more time and memory than a normal build, and so <strong>should</strong> only be used when
those features are needed.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div id="VkBuildAccelerationStructureFlagsKHR" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_KHR_acceleration_structure
typedef VkFlags VkBuildAccelerationStructureFlagsKHR;</code></pre>
</div>
</div>
<div class="paragraph">
<p>or the equivalent</p>
</div>
<div id="VkBuildAccelerationStructureFlagsNV" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_NV_ray_tracing
typedef VkBuildAccelerationStructureFlagsKHR VkBuildAccelerationStructureFlagsNV;</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>VkBuildAccelerationStructureFlagsKHR</code> is a bitmask type for setting a
mask of zero or more <a href="#VkBuildAccelerationStructureFlagBitsKHR">VkBuildAccelerationStructureFlagBitsKHR</a>.</p>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>VkGeometryNV</code> structure describes geometry in a bottom-level
acceleration structure and is defined as:</p>
</div>
<div id="VkGeometryNV" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_NV_ray_tracing
typedef struct VkGeometryNV {
    VkStructureType       sType;
    const void*           pNext;
    VkGeometryTypeKHR     geometryType;
    VkGeometryDataNV      geometry;
    VkGeometryFlagsKHR    flags;
} VkGeometryNV;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is a <a href="fundamentals.html#VkStructureType" class="xref page">VkStructureType</a> value identifying this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>geometryType</code> specifies the <a href="#VkGeometryTypeKHR">VkGeometryTypeKHR</a> which this
geometry refers to.</p>
</li>
<li>
<p><code>geometry</code> contains the geometry data as described in
<a href="#VkGeometryDataNV">VkGeometryDataNV</a>.</p>
</li>
<li>
<p><code>flags</code> has <a href="#VkGeometryFlagBitsKHR">VkGeometryFlagBitsKHR</a> describing options for this
geometry.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkGeometryNV-geometryType-03503" href="#VUID-VkGeometryNV-geometryType-03503"></a> <span class="vuid">VUID-VkGeometryNV-geometryType-03503</span><br>

<code>geometryType</code> <strong>must</strong> be <code>VK_GEOMETRY_TYPE_TRIANGLES_NV</code> or
<code>VK_GEOMETRY_TYPE_AABBS_NV</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkGeometryNV-sType-sType" href="#VUID-VkGeometryNV-sType-sType"></a> <span class="vuid">VUID-VkGeometryNV-sType-sType</span><br>
 <code>sType</code> <strong>must</strong> be <code>VK_STRUCTURE_TYPE_GEOMETRY_NV</code></p>
</li>
<li>
<p><a id="VUID-VkGeometryNV-pNext-pNext" href="#VUID-VkGeometryNV-pNext-pNext"></a> <span class="vuid">VUID-VkGeometryNV-pNext-pNext</span><br>
 <code>pNext</code> <strong>must</strong> be <code>NULL</code></p>
</li>
<li>
<p><a id="VUID-VkGeometryNV-geometryType-parameter" href="#VUID-VkGeometryNV-geometryType-parameter"></a> <span class="vuid">VUID-VkGeometryNV-geometryType-parameter</span><br>
 <code>geometryType</code> <strong>must</strong> be a valid <a href="#VkGeometryTypeKHR">VkGeometryTypeKHR</a> value</p>
</li>
<li>
<p><a id="VUID-VkGeometryNV-geometry-parameter" href="#VUID-VkGeometryNV-geometry-parameter"></a> <span class="vuid">VUID-VkGeometryNV-geometry-parameter</span><br>
 <code>geometry</code> <strong>must</strong> be a valid <a href="#VkGeometryDataNV">VkGeometryDataNV</a> structure</p>
</li>
<li>
<p><a id="VUID-VkGeometryNV-flags-parameter" href="#VUID-VkGeometryNV-flags-parameter"></a> <span class="vuid">VUID-VkGeometryNV-flags-parameter</span><br>
 <code>flags</code> <strong>must</strong> be a valid combination of <a href="#VkGeometryFlagBitsKHR">VkGeometryFlagBitsKHR</a> values</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Geometry types are specified by <a href="#VkGeometryTypeKHR">VkGeometryTypeKHR</a>, which takes values:</p>
</div>
<div id="VkGeometryTypeKHR" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_KHR_acceleration_structure
typedef enum VkGeometryTypeKHR {
    VK_GEOMETRY_TYPE_TRIANGLES_KHR = 0,
    VK_GEOMETRY_TYPE_AABBS_KHR = 1,
    VK_GEOMETRY_TYPE_INSTANCES_KHR = 2,
  // Provided by VK_NV_ray_tracing
    VK_GEOMETRY_TYPE_TRIANGLES_NV = VK_GEOMETRY_TYPE_TRIANGLES_KHR,
  // Provided by VK_NV_ray_tracing
    VK_GEOMETRY_TYPE_AABBS_NV = VK_GEOMETRY_TYPE_AABBS_KHR,
} VkGeometryTypeKHR;</code></pre>
</div>
</div>
<div class="paragraph">
<p>or the equivalent</p>
</div>
<div id="VkGeometryTypeNV" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_NV_ray_tracing
typedef VkGeometryTypeKHR VkGeometryTypeNV;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>VK_GEOMETRY_TYPE_TRIANGLES_KHR</code> specifies a geometry type
consisting of triangles.</p>
</li>
<li>
<p><code>VK_GEOMETRY_TYPE_AABBS_KHR</code> specifies a geometry type consisting of
axis-aligned bounding boxes.</p>
</li>
<li>
<p><code>VK_GEOMETRY_TYPE_INSTANCES_KHR</code> specifies a geometry type
consisting of acceleration structure instances.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Bits specifying additional parameters for geometries in acceleration
structure builds, are:</p>
</div>
<div id="VkGeometryFlagBitsKHR" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_KHR_acceleration_structure
typedef enum VkGeometryFlagBitsKHR {
    VK_GEOMETRY_OPAQUE_BIT_KHR = 0x00000001,
    VK_GEOMETRY_NO_DUPLICATE_ANY_HIT_INVOCATION_BIT_KHR = 0x00000002,
  // Provided by VK_NV_ray_tracing
    VK_GEOMETRY_OPAQUE_BIT_NV = VK_GEOMETRY_OPAQUE_BIT_KHR,
  // Provided by VK_NV_ray_tracing
    VK_GEOMETRY_NO_DUPLICATE_ANY_HIT_INVOCATION_BIT_NV = VK_GEOMETRY_NO_DUPLICATE_ANY_HIT_INVOCATION_BIT_KHR,
} VkGeometryFlagBitsKHR;</code></pre>
</div>
</div>
<div class="paragraph">
<p>or the equivalent</p>
</div>
<div id="VkGeometryFlagBitsNV" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_NV_ray_tracing
typedef VkGeometryFlagBitsKHR VkGeometryFlagBitsNV;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>VK_GEOMETRY_OPAQUE_BIT_KHR</code> indicates that this geometry does not
invoke the any-hit shaders even if present in a hit group.</p>
</li>
<li>
<p><code>VK_GEOMETRY_NO_DUPLICATE_ANY_HIT_INVOCATION_BIT_KHR</code> indicates that
the implementation <strong>must</strong> only call the any-hit shader a single time for
each primitive in this geometry.
If this bit is absent an implementation <strong>may</strong> invoke the any-hit shader
more than once for this geometry.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div id="VkGeometryFlagsKHR" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_KHR_acceleration_structure
typedef VkFlags VkGeometryFlagsKHR;</code></pre>
</div>
</div>
<div class="paragraph">
<p>or the equivalent</p>
</div>
<div id="VkGeometryFlagsNV" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_NV_ray_tracing
typedef VkGeometryFlagsKHR VkGeometryFlagsNV;</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>VkGeometryFlagsKHR</code> is a bitmask type for setting a mask of zero or
more <a href="#VkGeometryFlagBitsKHR">VkGeometryFlagBitsKHR</a>.</p>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>VkGeometryDataNV</code> structure specifies geometry in a bottom-level
acceleration structure and is defined as:</p>
</div>
<div id="VkGeometryDataNV" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_NV_ray_tracing
typedef struct VkGeometryDataNV {
    VkGeometryTrianglesNV    triangles;
    VkGeometryAABBNV         aabbs;
} VkGeometryDataNV;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>triangles</code> contains triangle data if
<a href="#VkGeometryNV">VkGeometryNV</a>::<code>geometryType</code> is
<code>VK_GEOMETRY_TYPE_TRIANGLES_NV</code>.</p>
</li>
<li>
<p><code>aabbs</code> contains axis-aligned bounding box data if
<a href="#VkGeometryNV">VkGeometryNV</a>::<code>geometryType</code> is
<code>VK_GEOMETRY_TYPE_AABBS_NV</code>.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkGeometryDataNV-triangles-parameter" href="#VUID-VkGeometryDataNV-triangles-parameter"></a> <span class="vuid">VUID-VkGeometryDataNV-triangles-parameter</span><br>
 <code>triangles</code> <strong>must</strong> be a valid <a href="#VkGeometryTrianglesNV">VkGeometryTrianglesNV</a> structure</p>
</li>
<li>
<p><a id="VUID-VkGeometryDataNV-aabbs-parameter" href="#VUID-VkGeometryDataNV-aabbs-parameter"></a> <span class="vuid">VUID-VkGeometryDataNV-aabbs-parameter</span><br>
 <code>aabbs</code> <strong>must</strong> be a valid <a href="#VkGeometryAABBNV">VkGeometryAABBNV</a> structure</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>VkGeometryTrianglesNV</code> structure specifies triangle geometry in a
bottom-level acceleration structure and is defined as:</p>
</div>
<div id="VkGeometryTrianglesNV" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_NV_ray_tracing
typedef struct VkGeometryTrianglesNV {
    VkStructureType    sType;
    const void*        pNext;
    VkBuffer           vertexData;
    VkDeviceSize       vertexOffset;
    uint32_t           vertexCount;
    VkDeviceSize       vertexStride;
    VkFormat           vertexFormat;
    VkBuffer           indexData;
    VkDeviceSize       indexOffset;
    uint32_t           indexCount;
    VkIndexType        indexType;
    VkBuffer           transformData;
    VkDeviceSize       transformOffset;
} VkGeometryTrianglesNV;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is a <a href="fundamentals.html#VkStructureType" class="xref page">VkStructureType</a> value identifying this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>vertexData</code> is the buffer containing vertex data for this geometry.</p>
</li>
<li>
<p><code>vertexOffset</code> is the offset in bytes within <code>vertexData</code>
containing vertex data for this geometry.</p>
</li>
<li>
<p><code>vertexCount</code> is the number of valid vertices.</p>
</li>
<li>
<p><code>vertexStride</code> is the stride in bytes between each vertex.</p>
</li>
<li>
<p><code>vertexFormat</code> is a <a href="formats.html#VkFormat" class="xref page">VkFormat</a> describing the format of each
vertex element.</p>
</li>
<li>
<p><code>indexData</code> is the buffer containing index data for this geometry.</p>
</li>
<li>
<p><code>indexOffset</code> is the offset in bytes within <code>indexData</code>
containing index data for this geometry.</p>
</li>
<li>
<p><code>indexCount</code> is the number of indices to include in this geometry.</p>
</li>
<li>
<p><code>indexType</code> is a <a href="drawing.html#VkIndexType" class="xref page">VkIndexType</a> describing the format of each
index.</p>
</li>
<li>
<p><code>transformData</code> is an optional buffer containing an
<a href="accelstructures.html#VkTransformMatrixNV" class="xref page">VkTransformMatrixNV</a> structure defining a transformation to be
applied to this geometry.</p>
</li>
<li>
<p><code>transformOffset</code> is the offset in bytes in <code>transformData</code> of
the transform information described above.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>If <code>indexType</code> is <code>VK_INDEX_TYPE_NONE_NV</code>, then this structure
describes a set of triangles determined by <code>vertexCount</code>.
Otherwise, this structure describes a set of indexed triangles determined by
<code>indexCount</code>.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkGeometryTrianglesNV-vertexOffset-02428" href="#VUID-VkGeometryTrianglesNV-vertexOffset-02428"></a> <span class="vuid">VUID-VkGeometryTrianglesNV-vertexOffset-02428</span><br>

<code>vertexOffset</code> <strong>must</strong> be less than the size of <code>vertexData</code></p>
</li>
<li>
<p><a id="VUID-VkGeometryTrianglesNV-vertexOffset-02429" href="#VUID-VkGeometryTrianglesNV-vertexOffset-02429"></a> <span class="vuid">VUID-VkGeometryTrianglesNV-vertexOffset-02429</span><br>

<code>vertexOffset</code> <strong>must</strong> be a multiple of the component size of
<code>vertexFormat</code></p>
</li>
<li>
<p><a id="VUID-VkGeometryTrianglesNV-vertexFormat-02430" href="#VUID-VkGeometryTrianglesNV-vertexFormat-02430"></a> <span class="vuid">VUID-VkGeometryTrianglesNV-vertexFormat-02430</span><br>

<code>vertexFormat</code> <strong>must</strong> be one of <code>VK_FORMAT_R32G32B32_SFLOAT</code>,
<code>VK_FORMAT_R32G32_SFLOAT</code>, <code>VK_FORMAT_R16G16B16_SFLOAT</code>,
<code>VK_FORMAT_R16G16_SFLOAT</code>, <code>VK_FORMAT_R16G16_SNORM</code>, or
<code>VK_FORMAT_R16G16B16_SNORM</code></p>
</li>
<li>
<p><a id="VUID-VkGeometryTrianglesNV-vertexStride-03818" href="#VUID-VkGeometryTrianglesNV-vertexStride-03818"></a> <span class="vuid">VUID-VkGeometryTrianglesNV-vertexStride-03818</span><br>

<code>vertexStride</code> <strong>must</strong> be less than or equal to <span class="eq">2<sup>32</sup>-1</span></p>
</li>
<li>
<p><a id="VUID-VkGeometryTrianglesNV-indexOffset-02431" href="#VUID-VkGeometryTrianglesNV-indexOffset-02431"></a> <span class="vuid">VUID-VkGeometryTrianglesNV-indexOffset-02431</span><br>

<code>indexOffset</code> <strong>must</strong> be less than the size of <code>indexData</code></p>
</li>
<li>
<p><a id="VUID-VkGeometryTrianglesNV-indexOffset-02432" href="#VUID-VkGeometryTrianglesNV-indexOffset-02432"></a> <span class="vuid">VUID-VkGeometryTrianglesNV-indexOffset-02432</span><br>

<code>indexOffset</code> <strong>must</strong> be a multiple of the element size of
<code>indexType</code></p>
</li>
<li>
<p><a id="VUID-VkGeometryTrianglesNV-indexType-02433" href="#VUID-VkGeometryTrianglesNV-indexType-02433"></a> <span class="vuid">VUID-VkGeometryTrianglesNV-indexType-02433</span><br>

<code>indexType</code> <strong>must</strong> be <code>VK_INDEX_TYPE_UINT16</code>,
<code>VK_INDEX_TYPE_UINT32</code>, or <code>VK_INDEX_TYPE_NONE_NV</code></p>
</li>
<li>
<p><a id="VUID-VkGeometryTrianglesNV-indexData-02434" href="#VUID-VkGeometryTrianglesNV-indexData-02434"></a> <span class="vuid">VUID-VkGeometryTrianglesNV-indexData-02434</span><br>

<code>indexData</code> <strong>must</strong> be <a href="../appendices/boilerplate.html#VK_NULL_HANDLE" class="xref page">VK_NULL_HANDLE</a> if <code>indexType</code> is
<code>VK_INDEX_TYPE_NONE_NV</code></p>
</li>
<li>
<p><a id="VUID-VkGeometryTrianglesNV-indexData-02435" href="#VUID-VkGeometryTrianglesNV-indexData-02435"></a> <span class="vuid">VUID-VkGeometryTrianglesNV-indexData-02435</span><br>

<code>indexData</code> <strong>must</strong> be a valid <code>VkBuffer</code> handle if
<code>indexType</code> is not <code>VK_INDEX_TYPE_NONE_NV</code></p>
</li>
<li>
<p><a id="VUID-VkGeometryTrianglesNV-indexCount-02436" href="#VUID-VkGeometryTrianglesNV-indexCount-02436"></a> <span class="vuid">VUID-VkGeometryTrianglesNV-indexCount-02436</span><br>

<code>indexCount</code> <strong>must</strong> be <code>0</code> if <code>indexType</code> is
<code>VK_INDEX_TYPE_NONE_NV</code></p>
</li>
<li>
<p><a id="VUID-VkGeometryTrianglesNV-transformOffset-02437" href="#VUID-VkGeometryTrianglesNV-transformOffset-02437"></a> <span class="vuid">VUID-VkGeometryTrianglesNV-transformOffset-02437</span><br>

<code>transformOffset</code> <strong>must</strong> be less than the size of <code>transformData</code></p>
</li>
<li>
<p><a id="VUID-VkGeometryTrianglesNV-transformOffset-02438" href="#VUID-VkGeometryTrianglesNV-transformOffset-02438"></a> <span class="vuid">VUID-VkGeometryTrianglesNV-transformOffset-02438</span><br>

<code>transformOffset</code> <strong>must</strong> be a multiple of <code>16</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkGeometryTrianglesNV-sType-sType" href="#VUID-VkGeometryTrianglesNV-sType-sType"></a> <span class="vuid">VUID-VkGeometryTrianglesNV-sType-sType</span><br>
 <code>sType</code> <strong>must</strong> be <code>VK_STRUCTURE_TYPE_GEOMETRY_TRIANGLES_NV</code></p>
</li>
<li>
<p><a id="VUID-VkGeometryTrianglesNV-pNext-pNext" href="#VUID-VkGeometryTrianglesNV-pNext-pNext"></a> <span class="vuid">VUID-VkGeometryTrianglesNV-pNext-pNext</span><br>
 <code>pNext</code> <strong>must</strong> be <code>NULL</code></p>
</li>
<li>
<p><a id="VUID-VkGeometryTrianglesNV-vertexData-parameter" href="#VUID-VkGeometryTrianglesNV-vertexData-parameter"></a> <span class="vuid">VUID-VkGeometryTrianglesNV-vertexData-parameter</span><br>
 If <code>vertexData</code> is not <a href="../appendices/boilerplate.html#VK_NULL_HANDLE" class="xref page">VK_NULL_HANDLE</a>, <code>vertexData</code> <strong>must</strong> be a valid <a href="#VkBuffer">VkBuffer</a> handle</p>
</li>
<li>
<p><a id="VUID-VkGeometryTrianglesNV-vertexFormat-parameter" href="#VUID-VkGeometryTrianglesNV-vertexFormat-parameter"></a> <span class="vuid">VUID-VkGeometryTrianglesNV-vertexFormat-parameter</span><br>
 <code>vertexFormat</code> <strong>must</strong> be a valid <a href="formats.html#VkFormat" class="xref page">VkFormat</a> value</p>
</li>
<li>
<p><a id="VUID-VkGeometryTrianglesNV-indexData-parameter" href="#VUID-VkGeometryTrianglesNV-indexData-parameter"></a> <span class="vuid">VUID-VkGeometryTrianglesNV-indexData-parameter</span><br>
 If <code>indexData</code> is not <a href="../appendices/boilerplate.html#VK_NULL_HANDLE" class="xref page">VK_NULL_HANDLE</a>, <code>indexData</code> <strong>must</strong> be a valid <a href="#VkBuffer">VkBuffer</a> handle</p>
</li>
<li>
<p><a id="VUID-VkGeometryTrianglesNV-indexType-parameter" href="#VUID-VkGeometryTrianglesNV-indexType-parameter"></a> <span class="vuid">VUID-VkGeometryTrianglesNV-indexType-parameter</span><br>
 <code>indexType</code> <strong>must</strong> be a valid <a href="drawing.html#VkIndexType" class="xref page">VkIndexType</a> value</p>
</li>
<li>
<p><a id="VUID-VkGeometryTrianglesNV-transformData-parameter" href="#VUID-VkGeometryTrianglesNV-transformData-parameter"></a> <span class="vuid">VUID-VkGeometryTrianglesNV-transformData-parameter</span><br>
 If <code>transformData</code> is not <a href="../appendices/boilerplate.html#VK_NULL_HANDLE" class="xref page">VK_NULL_HANDLE</a>, <code>transformData</code> <strong>must</strong> be a valid <a href="#VkBuffer">VkBuffer</a> handle</p>
</li>
<li>
<p><a id="VUID-VkGeometryTrianglesNV-commonparent" href="#VUID-VkGeometryTrianglesNV-commonparent"></a> <span class="vuid">VUID-VkGeometryTrianglesNV-commonparent</span><br>
 Each of <code>indexData</code>, <code>transformData</code>, and <code>vertexData</code> that are valid handles of non-ignored parameters <strong>must</strong> have been created, allocated, or retrieved from the same <a href="devsandqueues.html#VkDevice" class="xref page">VkDevice</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>VkGeometryAABBNV</code> structure specifies axis-aligned bounding box
geometry in a bottom-level acceleration structure, and is defined as:</p>
</div>
<div id="VkGeometryAABBNV" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_NV_ray_tracing
typedef struct VkGeometryAABBNV {
    VkStructureType    sType;
    const void*        pNext;
    VkBuffer           aabbData;
    uint32_t           numAABBs;
    uint32_t           stride;
    VkDeviceSize       offset;
} VkGeometryAABBNV;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is a <a href="fundamentals.html#VkStructureType" class="xref page">VkStructureType</a> value identifying this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>aabbData</code> is the buffer containing axis-aligned bounding box data.</p>
</li>
<li>
<p><code>numAABBs</code> is the number of AABBs in this geometry.</p>
</li>
<li>
<p><code>stride</code> is the stride in bytes between AABBs in <code>aabbData</code>.</p>
</li>
<li>
<p><code>offset</code> is the offset in bytes of the first AABB in <code>aabbData</code>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The AABB data in memory is six 32-bit floats consisting of the minimum x, y,
and z values followed by the maximum x, y, and z values.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkGeometryAABBNV-offset-02439" href="#VUID-VkGeometryAABBNV-offset-02439"></a> <span class="vuid">VUID-VkGeometryAABBNV-offset-02439</span><br>

<code>offset</code> <strong>must</strong> be less than the size of <code>aabbData</code></p>
</li>
<li>
<p><a id="VUID-VkGeometryAABBNV-offset-02440" href="#VUID-VkGeometryAABBNV-offset-02440"></a> <span class="vuid">VUID-VkGeometryAABBNV-offset-02440</span><br>

<code>offset</code> <strong>must</strong> be a multiple of <code>8</code></p>
</li>
<li>
<p><a id="VUID-VkGeometryAABBNV-stride-02441" href="#VUID-VkGeometryAABBNV-stride-02441"></a> <span class="vuid">VUID-VkGeometryAABBNV-stride-02441</span><br>

<code>stride</code> <strong>must</strong> be a multiple of <code>8</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkGeometryAABBNV-sType-sType" href="#VUID-VkGeometryAABBNV-sType-sType"></a> <span class="vuid">VUID-VkGeometryAABBNV-sType-sType</span><br>
 <code>sType</code> <strong>must</strong> be <code>VK_STRUCTURE_TYPE_GEOMETRY_AABB_NV</code></p>
</li>
<li>
<p><a id="VUID-VkGeometryAABBNV-pNext-pNext" href="#VUID-VkGeometryAABBNV-pNext-pNext"></a> <span class="vuid">VUID-VkGeometryAABBNV-pNext-pNext</span><br>
 <code>pNext</code> <strong>must</strong> be <code>NULL</code></p>
</li>
<li>
<p><a id="VUID-VkGeometryAABBNV-aabbData-parameter" href="#VUID-VkGeometryAABBNV-aabbData-parameter"></a> <span class="vuid">VUID-VkGeometryAABBNV-aabbData-parameter</span><br>
 If <code>aabbData</code> is not <a href="../appendices/boilerplate.html#VK_NULL_HANDLE" class="xref page">VK_NULL_HANDLE</a>, <code>aabbData</code> <strong>must</strong> be a valid <a href="#VkBuffer">VkBuffer</a> handle</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>To destroy an acceleration structure, call:</p>
</div>
<div id="vkDestroyAccelerationStructureKHR" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_KHR_acceleration_structure
void vkDestroyAccelerationStructureKHR(
    VkDevice                                    device,
    VkAccelerationStructureKHR                  accelerationStructure,
    const VkAllocationCallbacks*                pAllocator);</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>device</code> is the logical device that destroys the acceleration
structure.</p>
</li>
<li>
<p><code>accelerationStructure</code> is the acceleration structure to destroy.</p>
</li>
<li>
<p><code>pAllocator</code> controls host memory allocation as described in the
<a href="memory.html#memory-allocation" class="xref page">Memory Allocation</a> chapter.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkDestroyAccelerationStructureKHR-accelerationStructure-08934" href="#VUID-vkDestroyAccelerationStructureKHR-accelerationStructure-08934"></a> <span class="vuid">VUID-vkDestroyAccelerationStructureKHR-accelerationStructure-08934</span><br>

The <a href="features.html#features-accelerationStructure" class="xref page">    <code>VkPhysicalDeviceAccelerationStructureFeaturesKHR</code>::<code>accelerationStructure</code></a>
feature <strong>must</strong> be enabled</p>
</li>
<li>
<p><a id="VUID-vkDestroyAccelerationStructureKHR-accelerationStructure-02442" href="#VUID-vkDestroyAccelerationStructureKHR-accelerationStructure-02442"></a> <span class="vuid">VUID-vkDestroyAccelerationStructureKHR-accelerationStructure-02442</span><br>

All submitted commands that refer to <code>accelerationStructure</code> <strong>must</strong>
have completed execution</p>
</li>
<li>
<p><a id="VUID-vkDestroyAccelerationStructureKHR-accelerationStructure-02443" href="#VUID-vkDestroyAccelerationStructureKHR-accelerationStructure-02443"></a> <span class="vuid">VUID-vkDestroyAccelerationStructureKHR-accelerationStructure-02443</span><br>

If <code>VkAllocationCallbacks</code> were provided when
<code>accelerationStructure</code> was created, a compatible set of callbacks
<strong>must</strong> be provided here</p>
</li>
<li>
<p><a id="VUID-vkDestroyAccelerationStructureKHR-accelerationStructure-02444" href="#VUID-vkDestroyAccelerationStructureKHR-accelerationStructure-02444"></a> <span class="vuid">VUID-vkDestroyAccelerationStructureKHR-accelerationStructure-02444</span><br>

If no <code>VkAllocationCallbacks</code> were provided when
<code>accelerationStructure</code> was created, <code>pAllocator</code> <strong>must</strong> be
<code>NULL</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkDestroyAccelerationStructureKHR-device-parameter" href="#VUID-vkDestroyAccelerationStructureKHR-device-parameter"></a> <span class="vuid">VUID-vkDestroyAccelerationStructureKHR-device-parameter</span><br>
 <code>device</code> <strong>must</strong> be a valid <a href="devsandqueues.html#VkDevice" class="xref page">VkDevice</a> handle</p>
</li>
<li>
<p><a id="VUID-vkDestroyAccelerationStructureKHR-accelerationStructure-parameter" href="#VUID-vkDestroyAccelerationStructureKHR-accelerationStructure-parameter"></a> <span class="vuid">VUID-vkDestroyAccelerationStructureKHR-accelerationStructure-parameter</span><br>
 If <code>accelerationStructure</code> is not <a href="../appendices/boilerplate.html#VK_NULL_HANDLE" class="xref page">VK_NULL_HANDLE</a>, <code>accelerationStructure</code> <strong>must</strong> be a valid <a href="#VkAccelerationStructureKHR">VkAccelerationStructureKHR</a> handle</p>
</li>
<li>
<p><a id="VUID-vkDestroyAccelerationStructureKHR-pAllocator-parameter" href="#VUID-vkDestroyAccelerationStructureKHR-pAllocator-parameter"></a> <span class="vuid">VUID-vkDestroyAccelerationStructureKHR-pAllocator-parameter</span><br>
 If <code>pAllocator</code> is not <code>NULL</code>, <code>pAllocator</code> <strong>must</strong> be a valid pointer to a valid <a href="memory.html#VkAllocationCallbacks" class="xref page">VkAllocationCallbacks</a> structure</p>
</li>
<li>
<p><a id="VUID-vkDestroyAccelerationStructureKHR-accelerationStructure-parent" href="#VUID-vkDestroyAccelerationStructureKHR-accelerationStructure-parent"></a> <span class="vuid">VUID-vkDestroyAccelerationStructureKHR-accelerationStructure-parent</span><br>
 If <code>accelerationStructure</code> is a valid handle, it <strong>must</strong> have been created, allocated, or retrieved from <code>device</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Host Synchronization</div>
<div class="ulist">
<ul>
<li>
<p>Host access to <code>accelerationStructure</code> <strong>must</strong> be externally synchronized</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>To destroy an acceleration structure, call:</p>
</div>
<div id="vkDestroyAccelerationStructureNV" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_NV_ray_tracing
void vkDestroyAccelerationStructureNV(
    VkDevice                                    device,
    VkAccelerationStructureNV                   accelerationStructure,
    const VkAllocationCallbacks*                pAllocator);</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>device</code> is the logical device that destroys the buffer.</p>
</li>
<li>
<p><code>accelerationStructure</code> is the acceleration structure to destroy.</p>
</li>
<li>
<p><code>pAllocator</code> controls host memory allocation as described in the
<a href="memory.html#memory-allocation" class="xref page">Memory Allocation</a> chapter.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkDestroyAccelerationStructureNV-accelerationStructure-03752" href="#VUID-vkDestroyAccelerationStructureNV-accelerationStructure-03752"></a> <span class="vuid">VUID-vkDestroyAccelerationStructureNV-accelerationStructure-03752</span><br>

All submitted commands that refer to <code>accelerationStructure</code> <strong>must</strong>
have completed execution</p>
</li>
<li>
<p><a id="VUID-vkDestroyAccelerationStructureNV-accelerationStructure-03753" href="#VUID-vkDestroyAccelerationStructureNV-accelerationStructure-03753"></a> <span class="vuid">VUID-vkDestroyAccelerationStructureNV-accelerationStructure-03753</span><br>

If <code>VkAllocationCallbacks</code> were provided when
<code>accelerationStructure</code> was created, a compatible set of callbacks
<strong>must</strong> be provided here</p>
</li>
<li>
<p><a id="VUID-vkDestroyAccelerationStructureNV-accelerationStructure-03754" href="#VUID-vkDestroyAccelerationStructureNV-accelerationStructure-03754"></a> <span class="vuid">VUID-vkDestroyAccelerationStructureNV-accelerationStructure-03754</span><br>

If no <code>VkAllocationCallbacks</code> were provided when
<code>accelerationStructure</code> was created, <code>pAllocator</code> <strong>must</strong> be
<code>NULL</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkDestroyAccelerationStructureNV-device-parameter" href="#VUID-vkDestroyAccelerationStructureNV-device-parameter"></a> <span class="vuid">VUID-vkDestroyAccelerationStructureNV-device-parameter</span><br>
 <code>device</code> <strong>must</strong> be a valid <a href="devsandqueues.html#VkDevice" class="xref page">VkDevice</a> handle</p>
</li>
<li>
<p><a id="VUID-vkDestroyAccelerationStructureNV-accelerationStructure-parameter" href="#VUID-vkDestroyAccelerationStructureNV-accelerationStructure-parameter"></a> <span class="vuid">VUID-vkDestroyAccelerationStructureNV-accelerationStructure-parameter</span><br>
 If <code>accelerationStructure</code> is not <a href="../appendices/boilerplate.html#VK_NULL_HANDLE" class="xref page">VK_NULL_HANDLE</a>, <code>accelerationStructure</code> <strong>must</strong> be a valid <a href="#VkAccelerationStructureNV">VkAccelerationStructureNV</a> handle</p>
</li>
<li>
<p><a id="VUID-vkDestroyAccelerationStructureNV-pAllocator-parameter" href="#VUID-vkDestroyAccelerationStructureNV-pAllocator-parameter"></a> <span class="vuid">VUID-vkDestroyAccelerationStructureNV-pAllocator-parameter</span><br>
 If <code>pAllocator</code> is not <code>NULL</code>, <code>pAllocator</code> <strong>must</strong> be a valid pointer to a valid <a href="memory.html#VkAllocationCallbacks" class="xref page">VkAllocationCallbacks</a> structure</p>
</li>
<li>
<p><a id="VUID-vkDestroyAccelerationStructureNV-accelerationStructure-parent" href="#VUID-vkDestroyAccelerationStructureNV-accelerationStructure-parent"></a> <span class="vuid">VUID-vkDestroyAccelerationStructureNV-accelerationStructure-parent</span><br>
 If <code>accelerationStructure</code> is a valid handle, it <strong>must</strong> have been created, allocated, or retrieved from <code>device</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Host Synchronization</div>
<div class="ulist">
<ul>
<li>
<p>Host access to <code>accelerationStructure</code> <strong>must</strong> be externally synchronized</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>An acceleration structure has memory requirements for the structure object
itself, scratch space for the build, and scratch space for the update.</p>
</div>
<div class="paragraph">
<p>Scratch space is allocated as a <code>VkBuffer</code>, so for
<code>VK_ACCELERATION_STRUCTURE_MEMORY_REQUIREMENTS_TYPE_BUILD_SCRATCH_NV</code>
and
<code>VK_ACCELERATION_STRUCTURE_MEMORY_REQUIREMENTS_TYPE_UPDATE_SCRATCH_NV</code>
the <code>pMemoryRequirements-&gt;alignment</code> and
<code>pMemoryRequirements-&gt;memoryTypeBits</code> values returned by this call <strong>must</strong>
be filled with zero, and <strong>should</strong> be ignored by the application.</p>
</div>
<div class="paragraph">
<p>To query the memory requirements, call:</p>
</div>
<div id="vkGetAccelerationStructureMemoryRequirementsNV" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_NV_ray_tracing
void vkGetAccelerationStructureMemoryRequirementsNV(
    VkDevice                                    device,
    const VkAccelerationStructureMemoryRequirementsInfoNV* pInfo,
    VkMemoryRequirements2KHR*                   pMemoryRequirements);</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>device</code> is the logical device on which the acceleration structure
was created.</p>
</li>
<li>
<p><code>pInfo</code> is a pointer to a
<a href="#VkAccelerationStructureMemoryRequirementsInfoNV">VkAccelerationStructureMemoryRequirementsInfoNV</a> structure
specifying the acceleration structure to get memory requirements for.</p>
</li>
<li>
<p><code>pMemoryRequirements</code> is a pointer to a
<a href="#VkMemoryRequirements2KHR">VkMemoryRequirements2KHR</a> structure in which the requested
acceleration structure memory requirements are returned.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkGetAccelerationStructureMemoryRequirementsNV-device-parameter" href="#VUID-vkGetAccelerationStructureMemoryRequirementsNV-device-parameter"></a> <span class="vuid">VUID-vkGetAccelerationStructureMemoryRequirementsNV-device-parameter</span><br>
 <code>device</code> <strong>must</strong> be a valid <a href="devsandqueues.html#VkDevice" class="xref page">VkDevice</a> handle</p>
</li>
<li>
<p><a id="VUID-vkGetAccelerationStructureMemoryRequirementsNV-pInfo-parameter" href="#VUID-vkGetAccelerationStructureMemoryRequirementsNV-pInfo-parameter"></a> <span class="vuid">VUID-vkGetAccelerationStructureMemoryRequirementsNV-pInfo-parameter</span><br>
 <code>pInfo</code> <strong>must</strong> be a valid pointer to a valid <a href="#VkAccelerationStructureMemoryRequirementsInfoNV">VkAccelerationStructureMemoryRequirementsInfoNV</a> structure</p>
</li>
<li>
<p><a id="VUID-vkGetAccelerationStructureMemoryRequirementsNV-pMemoryRequirements-parameter" href="#VUID-vkGetAccelerationStructureMemoryRequirementsNV-pMemoryRequirements-parameter"></a> <span class="vuid">VUID-vkGetAccelerationStructureMemoryRequirementsNV-pMemoryRequirements-parameter</span><br>
 <code>pMemoryRequirements</code> <strong>must</strong> be a valid pointer to a <a href="#VkMemoryRequirements2KHR">VkMemoryRequirements2KHR</a> structure</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>VkAccelerationStructureMemoryRequirementsInfoNV</code> structure is
defined as:</p>
</div>
<div id="VkAccelerationStructureMemoryRequirementsInfoNV" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_NV_ray_tracing
typedef struct VkAccelerationStructureMemoryRequirementsInfoNV {
    VkStructureType                                    sType;
    const void*                                        pNext;
    VkAccelerationStructureMemoryRequirementsTypeNV    type;
    VkAccelerationStructureNV                          accelerationStructure;
} VkAccelerationStructureMemoryRequirementsInfoNV;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is a <a href="fundamentals.html#VkStructureType" class="xref page">VkStructureType</a> value identifying this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>type</code> selects the type of memory requirement being queried.
<code>VK_ACCELERATION_STRUCTURE_MEMORY_REQUIREMENTS_TYPE_OBJECT_NV</code>
returns the memory requirements for the object itself.
<code>VK_ACCELERATION_STRUCTURE_MEMORY_REQUIREMENTS_TYPE_BUILD_SCRATCH_NV</code>
returns the memory requirements for the scratch memory when doing a
build.
<code>VK_ACCELERATION_STRUCTURE_MEMORY_REQUIREMENTS_TYPE_UPDATE_SCRATCH_NV</code>
returns the memory requirements for the scratch memory when doing an
update.</p>
</li>
<li>
<p><code>accelerationStructure</code> is the acceleration structure to be queried
for memory requirements.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkAccelerationStructureMemoryRequirementsInfoNV-sType-sType" href="#VUID-VkAccelerationStructureMemoryRequirementsInfoNV-sType-sType"></a> <span class="vuid">VUID-VkAccelerationStructureMemoryRequirementsInfoNV-sType-sType</span><br>
 <code>sType</code> <strong>must</strong> be <code>VK_STRUCTURE_TYPE_ACCELERATION_STRUCTURE_MEMORY_REQUIREMENTS_INFO_NV</code></p>
</li>
<li>
<p><a id="VUID-VkAccelerationStructureMemoryRequirementsInfoNV-pNext-pNext" href="#VUID-VkAccelerationStructureMemoryRequirementsInfoNV-pNext-pNext"></a> <span class="vuid">VUID-VkAccelerationStructureMemoryRequirementsInfoNV-pNext-pNext</span><br>
 <code>pNext</code> <strong>must</strong> be <code>NULL</code></p>
</li>
<li>
<p><a id="VUID-VkAccelerationStructureMemoryRequirementsInfoNV-type-parameter" href="#VUID-VkAccelerationStructureMemoryRequirementsInfoNV-type-parameter"></a> <span class="vuid">VUID-VkAccelerationStructureMemoryRequirementsInfoNV-type-parameter</span><br>
 <code>type</code> <strong>must</strong> be a valid <a href="#VkAccelerationStructureMemoryRequirementsTypeNV">VkAccelerationStructureMemoryRequirementsTypeNV</a> value</p>
</li>
<li>
<p><a id="VUID-VkAccelerationStructureMemoryRequirementsInfoNV-accelerationStructure-parameter" href="#VUID-VkAccelerationStructureMemoryRequirementsInfoNV-accelerationStructure-parameter"></a> <span class="vuid">VUID-VkAccelerationStructureMemoryRequirementsInfoNV-accelerationStructure-parameter</span><br>
 <code>accelerationStructure</code> <strong>must</strong> be a valid <a href="#VkAccelerationStructureNV">VkAccelerationStructureNV</a> handle</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Possible values of <code>type</code> in
<code>VkAccelerationStructureMemoryRequirementsInfoNV</code> are:,</p>
</div>
<div id="VkAccelerationStructureMemoryRequirementsTypeNV" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_NV_ray_tracing
typedef enum VkAccelerationStructureMemoryRequirementsTypeNV {
    VK_ACCELERATION_STRUCTURE_MEMORY_REQUIREMENTS_TYPE_OBJECT_NV = 0,
    VK_ACCELERATION_STRUCTURE_MEMORY_REQUIREMENTS_TYPE_BUILD_SCRATCH_NV = 1,
    VK_ACCELERATION_STRUCTURE_MEMORY_REQUIREMENTS_TYPE_UPDATE_SCRATCH_NV = 2,
} VkAccelerationStructureMemoryRequirementsTypeNV;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>VK_ACCELERATION_STRUCTURE_MEMORY_REQUIREMENTS_TYPE_OBJECT_NV</code>
requests the memory requirement for the <code>VkAccelerationStructureNV</code>
backing store.</p>
</li>
<li>
<p><code>VK_ACCELERATION_STRUCTURE_MEMORY_REQUIREMENTS_TYPE_BUILD_SCRATCH_NV</code>
requests the memory requirement for scratch space during the initial
build.</p>
</li>
<li>
<p><code>VK_ACCELERATION_STRUCTURE_MEMORY_REQUIREMENTS_TYPE_UPDATE_SCRATCH_NV</code>
requests the memory requirement for scratch space during an update.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Possible values of <code>buildType</code> in
<a href="#vkGetAccelerationStructureBuildSizesKHR">vkGetAccelerationStructureBuildSizesKHR</a> are:</p>
</div>
<div id="VkAccelerationStructureBuildTypeKHR" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_KHR_acceleration_structure
typedef enum VkAccelerationStructureBuildTypeKHR {
    VK_ACCELERATION_STRUCTURE_BUILD_TYPE_HOST_KHR = 0,
    VK_ACCELERATION_STRUCTURE_BUILD_TYPE_DEVICE_KHR = 1,
    VK_ACCELERATION_STRUCTURE_BUILD_TYPE_HOST_OR_DEVICE_KHR = 2,
} VkAccelerationStructureBuildTypeKHR;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>VK_ACCELERATION_STRUCTURE_BUILD_TYPE_HOST_KHR</code> requests the memory
requirement for operations performed by the host.</p>
</li>
<li>
<p><code>VK_ACCELERATION_STRUCTURE_BUILD_TYPE_DEVICE_KHR</code> requests the
memory requirement for operations performed by the device.</p>
</li>
<li>
<p><code>VK_ACCELERATION_STRUCTURE_BUILD_TYPE_HOST_OR_DEVICE_KHR</code> requests
the memory requirement for operations performed by either the host, or
the device.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>To attach memory to one or more acceleration structures at a time, call:</p>
</div>
<div id="vkBindAccelerationStructureMemoryNV" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_NV_ray_tracing
VkResult vkBindAccelerationStructureMemoryNV(
    VkDevice                                    device,
    uint32_t                                    bindInfoCount,
    const VkBindAccelerationStructureMemoryInfoNV* pBindInfos);</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>device</code> is the logical device that owns the acceleration structures
and memory.</p>
</li>
<li>
<p><code>bindInfoCount</code> is the number of elements in <code>pBindInfos</code>.</p>
</li>
<li>
<p><code>pBindInfos</code> is a pointer to an array of
<a href="#VkBindAccelerationStructureMemoryInfoNV">VkBindAccelerationStructureMemoryInfoNV</a> structures describing
acceleration structures and memory to bind.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkBindAccelerationStructureMemoryNV-device-parameter" href="#VUID-vkBindAccelerationStructureMemoryNV-device-parameter"></a> <span class="vuid">VUID-vkBindAccelerationStructureMemoryNV-device-parameter</span><br>
 <code>device</code> <strong>must</strong> be a valid <a href="devsandqueues.html#VkDevice" class="xref page">VkDevice</a> handle</p>
</li>
<li>
<p><a id="VUID-vkBindAccelerationStructureMemoryNV-pBindInfos-parameter" href="#VUID-vkBindAccelerationStructureMemoryNV-pBindInfos-parameter"></a> <span class="vuid">VUID-vkBindAccelerationStructureMemoryNV-pBindInfos-parameter</span><br>
 <code>pBindInfos</code> <strong>must</strong> be a valid pointer to an array of <code>bindInfoCount</code> valid <a href="#VkBindAccelerationStructureMemoryInfoNV">VkBindAccelerationStructureMemoryInfoNV</a> structures</p>
</li>
<li>
<p><a id="VUID-vkBindAccelerationStructureMemoryNV-bindInfoCount-arraylength" href="#VUID-vkBindAccelerationStructureMemoryNV-bindInfoCount-arraylength"></a> <span class="vuid">VUID-vkBindAccelerationStructureMemoryNV-bindInfoCount-arraylength</span><br>
 <code>bindInfoCount</code> <strong>must</strong> be greater than <code>0</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Return Codes</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><a href="fundamentals.html#fundamentals-successcodes" class="xref page">Success</a></dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><code>VK_SUCCESS</code></p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1"><a href="fundamentals.html#fundamentals-errorcodes" class="xref page">Failure</a></dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><code>VK_ERROR_OUT_OF_HOST_MEMORY</code></p>
</li>
<li>
<p><code>VK_ERROR_OUT_OF_DEVICE_MEMORY</code></p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>VkBindAccelerationStructureMemoryInfoNV</code> structure is defined as:</p>
</div>
<div id="VkBindAccelerationStructureMemoryInfoNV" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_NV_ray_tracing
typedef struct VkBindAccelerationStructureMemoryInfoNV {
    VkStructureType              sType;
    const void*                  pNext;
    VkAccelerationStructureNV    accelerationStructure;
    VkDeviceMemory               memory;
    VkDeviceSize                 memoryOffset;
    uint32_t                     deviceIndexCount;
    const uint32_t*              pDeviceIndices;
} VkBindAccelerationStructureMemoryInfoNV;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is a <a href="fundamentals.html#VkStructureType" class="xref page">VkStructureType</a> value identifying this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>accelerationStructure</code> is the acceleration structure to be attached
to memory.</p>
</li>
<li>
<p><code>memory</code> is a <code>VkDeviceMemory</code> object describing the device
memory to attach.</p>
</li>
<li>
<p><code>memoryOffset</code> is the start offset of the region of memory that is
to be bound to the acceleration structure.
The number of bytes returned in the
<a href="#VkMemoryRequirements">VkMemoryRequirements</a>::<code>size</code> member in <code>memory</code>, starting
from <code>memoryOffset</code> bytes, will be bound to the specified
acceleration structure.</p>
</li>
<li>
<p><code>deviceIndexCount</code> is the number of elements in
<code>pDeviceIndices</code>.</p>
</li>
<li>
<p><code>pDeviceIndices</code> is a pointer to an array of device indices.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkBindAccelerationStructureMemoryInfoNV-accelerationStructure-03620" href="#VUID-VkBindAccelerationStructureMemoryInfoNV-accelerationStructure-03620"></a> <span class="vuid">VUID-VkBindAccelerationStructureMemoryInfoNV-accelerationStructure-03620</span><br>

<code>accelerationStructure</code> <strong>must</strong> not already be backed by a memory
object</p>
</li>
<li>
<p><a id="VUID-VkBindAccelerationStructureMemoryInfoNV-memoryOffset-03621" href="#VUID-VkBindAccelerationStructureMemoryInfoNV-memoryOffset-03621"></a> <span class="vuid">VUID-VkBindAccelerationStructureMemoryInfoNV-memoryOffset-03621</span><br>

<code>memoryOffset</code> <strong>must</strong> be less than the size of <code>memory</code></p>
</li>
<li>
<p><a id="VUID-VkBindAccelerationStructureMemoryInfoNV-memory-03622" href="#VUID-VkBindAccelerationStructureMemoryInfoNV-memory-03622"></a> <span class="vuid">VUID-VkBindAccelerationStructureMemoryInfoNV-memory-03622</span><br>

<code>memory</code> <strong>must</strong> have been allocated using one of the memory types
allowed in the <code>memoryTypeBits</code> member of the
<a href="#VkMemoryRequirements">VkMemoryRequirements</a> structure returned from a call to
<a href="#vkGetAccelerationStructureMemoryRequirementsNV">vkGetAccelerationStructureMemoryRequirementsNV</a> with
<code>accelerationStructure</code> and <code>type</code> of
<code>VK_ACCELERATION_STRUCTURE_MEMORY_REQUIREMENTS_TYPE_OBJECT_NV</code></p>
</li>
<li>
<p><a id="VUID-VkBindAccelerationStructureMemoryInfoNV-memoryOffset-03623" href="#VUID-VkBindAccelerationStructureMemoryInfoNV-memoryOffset-03623"></a> <span class="vuid">VUID-VkBindAccelerationStructureMemoryInfoNV-memoryOffset-03623</span><br>

<code>memoryOffset</code> <strong>must</strong> be an integer multiple of the <code>alignment</code>
member of the <a href="#VkMemoryRequirements">VkMemoryRequirements</a> structure returned from a call
to <a href="#vkGetAccelerationStructureMemoryRequirementsNV">vkGetAccelerationStructureMemoryRequirementsNV</a> with
<code>accelerationStructure</code> and <code>type</code> of
<code>VK_ACCELERATION_STRUCTURE_MEMORY_REQUIREMENTS_TYPE_OBJECT_NV</code></p>
</li>
<li>
<p><a id="VUID-VkBindAccelerationStructureMemoryInfoNV-size-03624" href="#VUID-VkBindAccelerationStructureMemoryInfoNV-size-03624"></a> <span class="vuid">VUID-VkBindAccelerationStructureMemoryInfoNV-size-03624</span><br>

The <code>size</code> member of the <code>VkMemoryRequirements</code> structure
returned from a call to
<a href="#vkGetAccelerationStructureMemoryRequirementsNV">vkGetAccelerationStructureMemoryRequirementsNV</a> with
<code>accelerationStructure</code> and <code>type</code> of
<code>VK_ACCELERATION_STRUCTURE_MEMORY_REQUIREMENTS_TYPE_OBJECT_NV</code> <strong>must</strong>
be less than or equal to the size of <code>memory</code> minus
<code>memoryOffset</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkBindAccelerationStructureMemoryInfoNV-sType-sType" href="#VUID-VkBindAccelerationStructureMemoryInfoNV-sType-sType"></a> <span class="vuid">VUID-VkBindAccelerationStructureMemoryInfoNV-sType-sType</span><br>
 <code>sType</code> <strong>must</strong> be <code>VK_STRUCTURE_TYPE_BIND_ACCELERATION_STRUCTURE_MEMORY_INFO_NV</code></p>
</li>
<li>
<p><a id="VUID-VkBindAccelerationStructureMemoryInfoNV-pNext-pNext" href="#VUID-VkBindAccelerationStructureMemoryInfoNV-pNext-pNext"></a> <span class="vuid">VUID-VkBindAccelerationStructureMemoryInfoNV-pNext-pNext</span><br>
 <code>pNext</code> <strong>must</strong> be <code>NULL</code></p>
</li>
<li>
<p><a id="VUID-VkBindAccelerationStructureMemoryInfoNV-accelerationStructure-parameter" href="#VUID-VkBindAccelerationStructureMemoryInfoNV-accelerationStructure-parameter"></a> <span class="vuid">VUID-VkBindAccelerationStructureMemoryInfoNV-accelerationStructure-parameter</span><br>
 <code>accelerationStructure</code> <strong>must</strong> be a valid <a href="#VkAccelerationStructureNV">VkAccelerationStructureNV</a> handle</p>
</li>
<li>
<p><a id="VUID-VkBindAccelerationStructureMemoryInfoNV-memory-parameter" href="#VUID-VkBindAccelerationStructureMemoryInfoNV-memory-parameter"></a> <span class="vuid">VUID-VkBindAccelerationStructureMemoryInfoNV-memory-parameter</span><br>
 <code>memory</code> <strong>must</strong> be a valid <a href="memory.html#VkDeviceMemory" class="xref page">VkDeviceMemory</a> handle</p>
</li>
<li>
<p><a id="VUID-VkBindAccelerationStructureMemoryInfoNV-pDeviceIndices-parameter" href="#VUID-VkBindAccelerationStructureMemoryInfoNV-pDeviceIndices-parameter"></a> <span class="vuid">VUID-VkBindAccelerationStructureMemoryInfoNV-pDeviceIndices-parameter</span><br>
 If <code>deviceIndexCount</code> is not <code>0</code>, <code>pDeviceIndices</code> <strong>must</strong> be a valid pointer to an array of <code>deviceIndexCount</code> <code>uint32_t</code> values</p>
</li>
<li>
<p><a id="VUID-VkBindAccelerationStructureMemoryInfoNV-commonparent" href="#VUID-VkBindAccelerationStructureMemoryInfoNV-commonparent"></a> <span class="vuid">VUID-VkBindAccelerationStructureMemoryInfoNV-commonparent</span><br>
 Both of <code>accelerationStructure</code>, and <code>memory</code> <strong>must</strong> have been created, allocated, or retrieved from the same <a href="devsandqueues.html#VkDevice" class="xref page">VkDevice</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>To allow constructing geometry instances with device code if desired, we
need to be able to query a opaque handle for an acceleration structure.
This handle is a value of 8 bytes.
To get this handle, call:</p>
</div>
<div id="vkGetAccelerationStructureHandleNV" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_NV_ray_tracing
VkResult vkGetAccelerationStructureHandleNV(
    VkDevice                                    device,
    VkAccelerationStructureNV                   accelerationStructure,
    size_t                                      dataSize,
    void*                                       pData);</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>device</code> is the logical device that owns the acceleration
structures.</p>
</li>
<li>
<p><code>accelerationStructure</code> is the acceleration structure.</p>
</li>
<li>
<p><code>dataSize</code> is the size in bytes of the buffer pointed to by
<code>pData</code>.</p>
</li>
<li>
<p><code>pData</code> is a pointer to a user-allocated buffer where the results
will be written.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkGetAccelerationStructureHandleNV-dataSize-02240" href="#VUID-vkGetAccelerationStructureHandleNV-dataSize-02240"></a> <span class="vuid">VUID-vkGetAccelerationStructureHandleNV-dataSize-02240</span><br>

<code>dataSize</code> <strong>must</strong> be large enough to contain the result of the query,
as described above</p>
</li>
<li>
<p><a id="VUID-vkGetAccelerationStructureHandleNV-accelerationStructure-02787" href="#VUID-vkGetAccelerationStructureHandleNV-accelerationStructure-02787"></a> <span class="vuid">VUID-vkGetAccelerationStructureHandleNV-accelerationStructure-02787</span><br>

<code>accelerationStructure</code> <strong>must</strong> be bound completely and contiguously
to a single <code>VkDeviceMemory</code> object via
<a href="#vkBindAccelerationStructureMemoryNV">vkBindAccelerationStructureMemoryNV</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkGetAccelerationStructureHandleNV-device-parameter" href="#VUID-vkGetAccelerationStructureHandleNV-device-parameter"></a> <span class="vuid">VUID-vkGetAccelerationStructureHandleNV-device-parameter</span><br>
 <code>device</code> <strong>must</strong> be a valid <a href="devsandqueues.html#VkDevice" class="xref page">VkDevice</a> handle</p>
</li>
<li>
<p><a id="VUID-vkGetAccelerationStructureHandleNV-accelerationStructure-parameter" href="#VUID-vkGetAccelerationStructureHandleNV-accelerationStructure-parameter"></a> <span class="vuid">VUID-vkGetAccelerationStructureHandleNV-accelerationStructure-parameter</span><br>
 <code>accelerationStructure</code> <strong>must</strong> be a valid <a href="#VkAccelerationStructureNV">VkAccelerationStructureNV</a> handle</p>
</li>
<li>
<p><a id="VUID-vkGetAccelerationStructureHandleNV-pData-parameter" href="#VUID-vkGetAccelerationStructureHandleNV-pData-parameter"></a> <span class="vuid">VUID-vkGetAccelerationStructureHandleNV-pData-parameter</span><br>
 <code>pData</code> <strong>must</strong> be a valid pointer to an array of <code>dataSize</code> bytes</p>
</li>
<li>
<p><a id="VUID-vkGetAccelerationStructureHandleNV-dataSize-arraylength" href="#VUID-vkGetAccelerationStructureHandleNV-dataSize-arraylength"></a> <span class="vuid">VUID-vkGetAccelerationStructureHandleNV-dataSize-arraylength</span><br>
 <code>dataSize</code> <strong>must</strong> be greater than <code>0</code></p>
</li>
<li>
<p><a id="VUID-vkGetAccelerationStructureHandleNV-accelerationStructure-parent" href="#VUID-vkGetAccelerationStructureHandleNV-accelerationStructure-parent"></a> <span class="vuid">VUID-vkGetAccelerationStructureHandleNV-accelerationStructure-parent</span><br>
 <code>accelerationStructure</code> <strong>must</strong> have been created, allocated, or retrieved from <code>device</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Return Codes</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><a href="fundamentals.html#fundamentals-successcodes" class="xref page">Success</a></dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><code>VK_SUCCESS</code></p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1"><a href="fundamentals.html#fundamentals-errorcodes" class="xref page">Failure</a></dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><code>VK_ERROR_OUT_OF_HOST_MEMORY</code></p>
</li>
<li>
<p><code>VK_ERROR_OUT_OF_DEVICE_MEMORY</code></p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>To query the 64-bit device address for an acceleration structure, call:</p>
</div>
<div id="vkGetAccelerationStructureDeviceAddressKHR" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_KHR_acceleration_structure
VkDeviceAddress vkGetAccelerationStructureDeviceAddressKHR(
    VkDevice                                    device,
    const VkAccelerationStructureDeviceAddressInfoKHR* pInfo);</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>device</code> is the logical device that the acceleration structure was
created on.</p>
</li>
<li>
<p><code>pInfo</code> is a pointer to a
<a href="#VkAccelerationStructureDeviceAddressInfoKHR">VkAccelerationStructureDeviceAddressInfoKHR</a> structure specifying
the acceleration structure to retrieve an address for.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The 64-bit return value is an address of the acceleration structure, which
can be used for device and shader operations that involve acceleration
structures, such as
ray traversal and
acceleration structure building.</p>
</div>
<div class="paragraph">
<p>If the acceleration structure was created with a non-zero value of
<a href="#VkAccelerationStructureCreateInfoKHR">VkAccelerationStructureCreateInfoKHR</a>::<code>deviceAddress</code>, the return
value will be the same address.</p>
</div>
<div class="paragraph">
<p>If the acceleration structure was created with a <code>type</code> of
<code>VK_ACCELERATION_STRUCTURE_TYPE_GENERIC_KHR</code>, the returned address <strong>must</strong>
be consistent with the relative offset to other acceleration structures with
<code>type</code> <code>VK_ACCELERATION_STRUCTURE_TYPE_GENERIC_KHR</code> allocated with
the same <a href="#VkBuffer">VkBuffer</a>.
That is, the difference in returned addresses between the two <strong>must</strong> be the
same as the difference in offsets provided at acceleration structure
creation.</p>
</div>
<div class="paragraph">
<p>The returned address <strong>must</strong> be aligned to 256 bytes.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="title">Note</div>
<div class="paragraph">
<p>The acceleration structure device address <strong>may</strong> be different from the buffer
device address corresponding to the acceleration structure&#8217;s start offset in
its storage buffer for acceleration structure types other than
<code>VK_ACCELERATION_STRUCTURE_TYPE_GENERIC_KHR</code>.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkGetAccelerationStructureDeviceAddressKHR-accelerationStructure-08935" href="#VUID-vkGetAccelerationStructureDeviceAddressKHR-accelerationStructure-08935"></a> <span class="vuid">VUID-vkGetAccelerationStructureDeviceAddressKHR-accelerationStructure-08935</span><br>

The <a href="features.html#features-accelerationStructure" class="xref page">    <code>VkPhysicalDeviceAccelerationStructureFeaturesKHR</code>::<code>accelerationStructure</code></a>
feature <strong>must</strong> be enabled</p>
</li>
<li>
<p><a id="VUID-vkGetAccelerationStructureDeviceAddressKHR-device-03504" href="#VUID-vkGetAccelerationStructureDeviceAddressKHR-device-03504"></a> <span class="vuid">VUID-vkGetAccelerationStructureDeviceAddressKHR-device-03504</span><br>

If <code>device</code> was created with multiple physical devices, then the
<a href="features.html#features-bufferDeviceAddressMultiDevice" class="xref page">    <code>bufferDeviceAddressMultiDevice</code></a> feature <strong>must</strong> be enabled</p>
</li>
<li>
<p><a id="VUID-vkGetAccelerationStructureDeviceAddressKHR-pInfo-09541" href="#VUID-vkGetAccelerationStructureDeviceAddressKHR-pInfo-09541"></a> <span class="vuid">VUID-vkGetAccelerationStructureDeviceAddressKHR-pInfo-09541</span><br>

If the buffer on which <code>pInfo-&gt;accelerationStructure</code> was placed is
non-sparse then it <strong>must</strong> be bound completely and contiguously to a
single <code>VkDeviceMemory</code> object</p>
</li>
<li>
<p><a id="VUID-vkGetAccelerationStructureDeviceAddressKHR-pInfo-09542" href="#VUID-vkGetAccelerationStructureDeviceAddressKHR-pInfo-09542"></a> <span class="vuid">VUID-vkGetAccelerationStructureDeviceAddressKHR-pInfo-09542</span><br>

The buffer on which <code>pInfo-&gt;accelerationStructure</code> was placed <strong>must</strong>
have been created with the
<code>VK_BUFFER_USAGE_SHADER_DEVICE_ADDRESS_BIT</code> usage flag</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkGetAccelerationStructureDeviceAddressKHR-device-parameter" href="#VUID-vkGetAccelerationStructureDeviceAddressKHR-device-parameter"></a> <span class="vuid">VUID-vkGetAccelerationStructureDeviceAddressKHR-device-parameter</span><br>
 <code>device</code> <strong>must</strong> be a valid <a href="devsandqueues.html#VkDevice" class="xref page">VkDevice</a> handle</p>
</li>
<li>
<p><a id="VUID-vkGetAccelerationStructureDeviceAddressKHR-pInfo-parameter" href="#VUID-vkGetAccelerationStructureDeviceAddressKHR-pInfo-parameter"></a> <span class="vuid">VUID-vkGetAccelerationStructureDeviceAddressKHR-pInfo-parameter</span><br>
 <code>pInfo</code> <strong>must</strong> be a valid pointer to a valid <a href="#VkAccelerationStructureDeviceAddressInfoKHR">VkAccelerationStructureDeviceAddressInfoKHR</a> structure</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>VkAccelerationStructureDeviceAddressInfoKHR</code> structure is defined
as:</p>
</div>
<div id="VkAccelerationStructureDeviceAddressInfoKHR" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_KHR_acceleration_structure
typedef struct VkAccelerationStructureDeviceAddressInfoKHR {
    VkStructureType               sType;
    const void*                   pNext;
    VkAccelerationStructureKHR    accelerationStructure;
} VkAccelerationStructureDeviceAddressInfoKHR;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is a <a href="fundamentals.html#VkStructureType" class="xref page">VkStructureType</a> value identifying this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>accelerationStructure</code> specifies the acceleration structure whose
address is being queried.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkAccelerationStructureDeviceAddressInfoKHR-sType-sType" href="#VUID-VkAccelerationStructureDeviceAddressInfoKHR-sType-sType"></a> <span class="vuid">VUID-VkAccelerationStructureDeviceAddressInfoKHR-sType-sType</span><br>
 <code>sType</code> <strong>must</strong> be <code>VK_STRUCTURE_TYPE_ACCELERATION_STRUCTURE_DEVICE_ADDRESS_INFO_KHR</code></p>
</li>
<li>
<p><a id="VUID-VkAccelerationStructureDeviceAddressInfoKHR-pNext-pNext" href="#VUID-VkAccelerationStructureDeviceAddressInfoKHR-pNext-pNext"></a> <span class="vuid">VUID-VkAccelerationStructureDeviceAddressInfoKHR-pNext-pNext</span><br>
 <code>pNext</code> <strong>must</strong> be <code>NULL</code></p>
</li>
<li>
<p><a id="VUID-VkAccelerationStructureDeviceAddressInfoKHR-accelerationStructure-parameter" href="#VUID-VkAccelerationStructureDeviceAddressInfoKHR-accelerationStructure-parameter"></a> <span class="vuid">VUID-VkAccelerationStructureDeviceAddressInfoKHR-accelerationStructure-parameter</span><br>
 <code>accelerationStructure</code> <strong>must</strong> be a valid <a href="#VkAccelerationStructureKHR">VkAccelerationStructureKHR</a> handle</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="resources-micromaps"><a class="anchor" href="#resources-micromaps"></a>Micromaps</h2>
<div class="sectionbody">
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Micromaps are opaque data structures that are built by the implementation to
encode sub-triangle data to be included in an acceleration structure.</p>
</div>
<div class="paragraph">
<p>Micromaps are represented by <code>VkMicromapEXT</code> handles:</p>
</div>
<div id="VkMicromapEXT" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_EXT_opacity_micromap
VK_DEFINE_NON_DISPATCHABLE_HANDLE(VkMicromapEXT)</code></pre>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>To create a micromap, call:</p>
</div>
<div id="vkCreateMicromapEXT" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_EXT_opacity_micromap
VkResult vkCreateMicromapEXT(
    VkDevice                                    device,
    const VkMicromapCreateInfoEXT*              pCreateInfo,
    const VkAllocationCallbacks*                pAllocator,
    VkMicromapEXT*                              pMicromap);</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>device</code> is the logical device that creates the acceleration
structure object.</p>
</li>
<li>
<p><code>pCreateInfo</code> is a pointer to a <a href="#VkMicromapCreateInfoEXT">VkMicromapCreateInfoEXT</a>
structure containing parameters affecting creation of the micromap.</p>
</li>
<li>
<p><code>pAllocator</code> controls host memory allocation as described in the
<a href="memory.html#memory-allocation" class="xref page">Memory Allocation</a> chapter.</p>
</li>
<li>
<p><code>pMicromap</code> is a pointer to a <code>VkMicromapEXT</code> handle in which
the resulting micromap object is returned.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Similar to other objects in Vulkan, the micromap creation merely creates an
object with a specific &#8220;shape&#8221;.
The type and quantity of geometry that can be built into a micromap is
determined by the parameters of <a href="#VkMicromapCreateInfoEXT">VkMicromapCreateInfoEXT</a>.</p>
</div>
<div class="paragraph">
<p>The micromap data is stored in the object referred to by
<code>VkMicromapCreateInfoEXT</code>::<code>buffer</code>.
Once memory has been bound to that buffer, it <strong>must</strong> be populated by micromap
build or micromap copy commands such as <a href="VK_EXT_opacity_micromap/micromaps.html#vkCmdBuildMicromapsEXT" class="xref page">vkCmdBuildMicromapsEXT</a>,
<a href="VK_EXT_opacity_micromap/micromaps.html#vkBuildMicromapsEXT" class="xref page">vkBuildMicromapsEXT</a>, <a href="VK_EXT_opacity_micromap/micromaps.html#vkCmdCopyMicromapEXT" class="xref page">vkCmdCopyMicromapEXT</a>, and
<a href="VK_EXT_opacity_micromap/micromaps.html#vkCopyMicromapEXT" class="xref page">vkCopyMicromapEXT</a>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="title">Note</div>
<div class="paragraph">
<p>The expected usage for a trace capture/replay tool is that it will serialize
and later deserialize the micromap data using micromap copy commands.
During capture the tool will use <a href="VK_EXT_opacity_micromap/micromaps.html#vkCopyMicromapToMemoryEXT" class="xref page">vkCopyMicromapToMemoryEXT</a> or
<a href="VK_EXT_opacity_micromap/micromaps.html#vkCmdCopyMicromapToMemoryEXT" class="xref page">vkCmdCopyMicromapToMemoryEXT</a> with a <code>mode</code> of
<code>VK_COPY_MICROMAP_MODE_SERIALIZE_EXT</code>, and
<a href="VK_EXT_opacity_micromap/micromaps.html#vkCopyMemoryToMicromapEXT" class="xref page">vkCopyMemoryToMicromapEXT</a> or <a href="VK_EXT_opacity_micromap/micromaps.html#vkCmdCopyMemoryToMicromapEXT" class="xref page">vkCmdCopyMemoryToMicromapEXT</a> with a
<code>mode</code> of <code>VK_COPY_MICROMAP_MODE_DESERIALIZE_EXT</code> during replay.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The input buffers passed to micromap build commands will be referenced by
the implementation for the duration of the command.
Micromaps <strong>must</strong> be fully self-contained.
The application <strong>can</strong> reuse or free any memory which was used by the command
as an input or as scratch without affecting the results of a subsequent
acceleration structure build using the micromap or traversal of that
acceleration structure.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCreateMicromapEXT-micromap-07430" href="#VUID-vkCreateMicromapEXT-micromap-07430"></a> <span class="vuid">VUID-vkCreateMicromapEXT-micromap-07430</span><br>

The <a href="features.html#features-micromap" class="xref page"><code>micromap</code></a> feature <strong>must</strong> be enabled</p>
</li>
<li>
<p><a id="VUID-vkCreateMicromapEXT-deviceAddress-07431" href="#VUID-vkCreateMicromapEXT-deviceAddress-07431"></a> <span class="vuid">VUID-vkCreateMicromapEXT-deviceAddress-07431</span><br>

If <a href="#VkMicromapCreateInfoEXT">VkMicromapCreateInfoEXT</a>::<code>deviceAddress</code> is not zero, the
<a href="features.html#features-micromapCaptureReplay" class="xref page"><code>micromapCaptureReplay</code></a> feature
<strong>must</strong> be enabled</p>
</li>
<li>
<p><a id="VUID-vkCreateMicromapEXT-device-07432" href="#VUID-vkCreateMicromapEXT-device-07432"></a> <span class="vuid">VUID-vkCreateMicromapEXT-device-07432</span><br>

If <code>device</code> was created with multiple physical devices, then the
<a href="features.html#features-bufferDeviceAddressMultiDevice" class="xref page">    <code>bufferDeviceAddressMultiDevice</code></a> feature <strong>must</strong> be enabled</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCreateMicromapEXT-device-parameter" href="#VUID-vkCreateMicromapEXT-device-parameter"></a> <span class="vuid">VUID-vkCreateMicromapEXT-device-parameter</span><br>
 <code>device</code> <strong>must</strong> be a valid <a href="devsandqueues.html#VkDevice" class="xref page">VkDevice</a> handle</p>
</li>
<li>
<p><a id="VUID-vkCreateMicromapEXT-pCreateInfo-parameter" href="#VUID-vkCreateMicromapEXT-pCreateInfo-parameter"></a> <span class="vuid">VUID-vkCreateMicromapEXT-pCreateInfo-parameter</span><br>
 <code>pCreateInfo</code> <strong>must</strong> be a valid pointer to a valid <a href="#VkMicromapCreateInfoEXT">VkMicromapCreateInfoEXT</a> structure</p>
</li>
<li>
<p><a id="VUID-vkCreateMicromapEXT-pAllocator-parameter" href="#VUID-vkCreateMicromapEXT-pAllocator-parameter"></a> <span class="vuid">VUID-vkCreateMicromapEXT-pAllocator-parameter</span><br>
 If <code>pAllocator</code> is not <code>NULL</code>, <code>pAllocator</code> <strong>must</strong> be a valid pointer to a valid <a href="memory.html#VkAllocationCallbacks" class="xref page">VkAllocationCallbacks</a> structure</p>
</li>
<li>
<p><a id="VUID-vkCreateMicromapEXT-pMicromap-parameter" href="#VUID-vkCreateMicromapEXT-pMicromap-parameter"></a> <span class="vuid">VUID-vkCreateMicromapEXT-pMicromap-parameter</span><br>
 <code>pMicromap</code> <strong>must</strong> be a valid pointer to a <a href="#VkMicromapEXT">VkMicromapEXT</a> handle</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Return Codes</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><a href="fundamentals.html#fundamentals-successcodes" class="xref page">Success</a></dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><code>VK_SUCCESS</code></p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1"><a href="fundamentals.html#fundamentals-errorcodes" class="xref page">Failure</a></dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><code>VK_ERROR_OUT_OF_HOST_MEMORY</code></p>
</li>
<li>
<p><code>VK_ERROR_INVALID_OPAQUE_CAPTURE_ADDRESS_KHR</code></p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>VkMicromapCreateInfoEXT</code> structure is defined as:</p>
</div>
<div id="VkMicromapCreateInfoEXT" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_EXT_opacity_micromap
typedef struct VkMicromapCreateInfoEXT {
    VkStructureType             sType;
    const void*                 pNext;
    VkMicromapCreateFlagsEXT    createFlags;
    VkBuffer                    buffer;
    VkDeviceSize                offset;
    VkDeviceSize                size;
    VkMicromapTypeEXT           type;
    VkDeviceAddress             deviceAddress;
} VkMicromapCreateInfoEXT;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is a <a href="fundamentals.html#VkStructureType" class="xref page">VkStructureType</a> value identifying this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>createFlags</code> is a bitmask of <a href="#VkMicromapCreateFlagBitsEXT">VkMicromapCreateFlagBitsEXT</a>
specifying additional creation parameters of the micromap.</p>
</li>
<li>
<p><code>buffer</code> is the buffer on which the micromap will be stored.</p>
</li>
<li>
<p><code>offset</code> is an offset in bytes from the base address of the buffer
at which the micromap will be stored, and <strong>must</strong> be a multiple of <code>256</code>.</p>
</li>
<li>
<p><code>size</code> is the size required for the micromap.</p>
</li>
<li>
<p><code>type</code> is a <a href="#VkMicromapTypeEXT">VkMicromapTypeEXT</a> value specifying the type of
micromap that will be created.</p>
</li>
<li>
<p><code>deviceAddress</code> is the device address requested for the micromap if
the <a href="features.html#features-micromapCaptureReplay" class="xref page"><code>micromapCaptureReplay</code></a>
feature is being used.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>If <code>deviceAddress</code> is zero, no specific address is requested.</p>
</div>
<div class="paragraph">
<p>If <code>deviceAddress</code> is not zero, <code>deviceAddress</code> <strong>must</strong> be an address
retrieved from an identically created micromap on the same implementation.
The micromap <strong>must</strong> also be placed on an identically created <code>buffer</code> and
at the same <code>offset</code>.</p>
</div>
<div class="paragraph">
<p>Applications <strong>should</strong> avoid creating micromaps with application-provided
addresses and implementation-provided addresses in the same process, to
reduce the likelihood of <code>VK_ERROR_INVALID_OPAQUE_CAPTURE_ADDRESS_KHR</code>
errors.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="title">Note</div>
<div class="paragraph">
<p>The expected usage for this is that a trace capture/replay tool will add the
<code>VK_BUFFER_CREATE_DEVICE_ADDRESS_CAPTURE_REPLAY_BIT</code> flag to all buffers
that use <code>VK_BUFFER_USAGE_SHADER_DEVICE_ADDRESS_BIT</code>, and will add
<code>VK_BUFFER_USAGE_SHADER_DEVICE_ADDRESS_BIT</code> to all buffers used as
storage for a micromap where <code>deviceAddress</code> is not zero.
This also means that the tool will need to add
<code>VK_MEMORY_ALLOCATE_DEVICE_ADDRESS_BIT</code> to memory allocations to allow
the flag to be set where the application may not have otherwise required it.
During capture the tool will save the queried opaque device addresses in the
trace.
During replay, the buffers will be created specifying the original address
so any address values stored in the trace data will remain valid.</p>
</div>
<div class="paragraph">
<p>Implementations are expected to separate such buffers in the GPU address
space so normal allocations will avoid using these addresses.
Apps/tools should avoid mixing app-provided and implementation-provided
addresses for buffers created with
<code>VK_BUFFER_CREATE_DEVICE_ADDRESS_CAPTURE_REPLAY_BIT</code>, to avoid address
space allocation conflicts.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>If the micromap will be the target of a build operation, the required size
for a micromap <strong>can</strong> be queried with <a href="#vkGetMicromapBuildSizesEXT">vkGetMicromapBuildSizesEXT</a>.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkMicromapCreateInfoEXT-deviceAddress-07433" href="#VUID-VkMicromapCreateInfoEXT-deviceAddress-07433"></a> <span class="vuid">VUID-VkMicromapCreateInfoEXT-deviceAddress-07433</span><br>

If <code>deviceAddress</code> is not zero, <code>createFlags</code> <strong>must</strong> include
<code>VK_MICROMAP_CREATE_DEVICE_ADDRESS_CAPTURE_REPLAY_BIT_EXT</code></p>
</li>
<li>
<p><a id="VUID-VkMicromapCreateInfoEXT-createFlags-07434" href="#VUID-VkMicromapCreateInfoEXT-createFlags-07434"></a> <span class="vuid">VUID-VkMicromapCreateInfoEXT-createFlags-07434</span><br>

If <code>createFlags</code> includes
<code>VK_MICROMAP_CREATE_DEVICE_ADDRESS_CAPTURE_REPLAY_BIT_EXT</code>,
<a href="features.html#VkPhysicalDeviceOpacityMicromapFeaturesEXT" class="xref page">VkPhysicalDeviceOpacityMicromapFeaturesEXT</a>::<code>micromapCaptureReplay</code>
<strong>must</strong> be <code>VK_TRUE</code></p>
</li>
<li>
<p><a id="VUID-VkMicromapCreateInfoEXT-buffer-07435" href="#VUID-VkMicromapCreateInfoEXT-buffer-07435"></a> <span class="vuid">VUID-VkMicromapCreateInfoEXT-buffer-07435</span><br>

<code>buffer</code> <strong>must</strong> have been created with a <code>usage</code> value containing
<code>VK_BUFFER_USAGE_MICROMAP_STORAGE_BIT_EXT</code></p>
</li>
<li>
<p><a id="VUID-VkMicromapCreateInfoEXT-buffer-07436" href="#VUID-VkMicromapCreateInfoEXT-buffer-07436"></a> <span class="vuid">VUID-VkMicromapCreateInfoEXT-buffer-07436</span><br>

<code>buffer</code> <strong>must</strong> not have been created with
<code>VK_BUFFER_CREATE_SPARSE_RESIDENCY_BIT</code></p>
</li>
<li>
<p><a id="VUID-VkMicromapCreateInfoEXT-offset-07437" href="#VUID-VkMicromapCreateInfoEXT-offset-07437"></a> <span class="vuid">VUID-VkMicromapCreateInfoEXT-offset-07437</span><br>

The sum of <code>offset</code> and <code>size</code> <strong>must</strong> be less than the size of
<code>buffer</code></p>
</li>
<li>
<p><a id="VUID-VkMicromapCreateInfoEXT-offset-07438" href="#VUID-VkMicromapCreateInfoEXT-offset-07438"></a> <span class="vuid">VUID-VkMicromapCreateInfoEXT-offset-07438</span><br>

<code>offset</code> <strong>must</strong> be a multiple of <code>256</code> bytes</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkMicromapCreateInfoEXT-sType-sType" href="#VUID-VkMicromapCreateInfoEXT-sType-sType"></a> <span class="vuid">VUID-VkMicromapCreateInfoEXT-sType-sType</span><br>
 <code>sType</code> <strong>must</strong> be <code>VK_STRUCTURE_TYPE_MICROMAP_CREATE_INFO_EXT</code></p>
</li>
<li>
<p><a id="VUID-VkMicromapCreateInfoEXT-pNext-pNext" href="#VUID-VkMicromapCreateInfoEXT-pNext-pNext"></a> <span class="vuid">VUID-VkMicromapCreateInfoEXT-pNext-pNext</span><br>
 <code>pNext</code> <strong>must</strong> be <code>NULL</code></p>
</li>
<li>
<p><a id="VUID-VkMicromapCreateInfoEXT-createFlags-parameter" href="#VUID-VkMicromapCreateInfoEXT-createFlags-parameter"></a> <span class="vuid">VUID-VkMicromapCreateInfoEXT-createFlags-parameter</span><br>
 <code>createFlags</code> <strong>must</strong> be a valid combination of <a href="#VkMicromapCreateFlagBitsEXT">VkMicromapCreateFlagBitsEXT</a> values</p>
</li>
<li>
<p><a id="VUID-VkMicromapCreateInfoEXT-buffer-parameter" href="#VUID-VkMicromapCreateInfoEXT-buffer-parameter"></a> <span class="vuid">VUID-VkMicromapCreateInfoEXT-buffer-parameter</span><br>
 <code>buffer</code> <strong>must</strong> be a valid <a href="#VkBuffer">VkBuffer</a> handle</p>
</li>
<li>
<p><a id="VUID-VkMicromapCreateInfoEXT-type-parameter" href="#VUID-VkMicromapCreateInfoEXT-type-parameter"></a> <span class="vuid">VUID-VkMicromapCreateInfoEXT-type-parameter</span><br>
 <code>type</code> <strong>must</strong> be a valid <a href="#VkMicromapTypeEXT">VkMicromapTypeEXT</a> value</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>To get the build sizes for a micromap, call:</p>
</div>
<div id="vkGetMicromapBuildSizesEXT" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_EXT_opacity_micromap
void vkGetMicromapBuildSizesEXT(
    VkDevice                                    device,
    VkAccelerationStructureBuildTypeKHR         buildType,
    const VkMicromapBuildInfoEXT*               pBuildInfo,
    VkMicromapBuildSizesInfoEXT*                pSizeInfo);</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>device</code> is the logical device that will be used for creating the
micromap.</p>
</li>
<li>
<p><code>buildType</code> defines whether host or device operations (or both) are
being queried for.</p>
</li>
<li>
<p><code>pBuildInfo</code> is a pointer to a <a href="VK_EXT_opacity_micromap/micromaps.html#VkMicromapBuildInfoEXT" class="xref page">VkMicromapBuildInfoEXT</a>
structure describing parameters of a build operation.</p>
</li>
<li>
<p><code>pSizeInfo</code> is a pointer to a <a href="#VkMicromapBuildSizesInfoEXT">VkMicromapBuildSizesInfoEXT</a>
structure which returns the size required for a micromap and the sizes
required for the scratch buffers, given the build parameters.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The <code>dstMicromap</code> and <code>mode</code> members of <code>pBuildInfo</code> are
ignored.
Any <a href="accelstructures.html#VkDeviceOrHostAddressKHR" class="xref page">VkDeviceOrHostAddressKHR</a> members of <code>pBuildInfo</code> are ignored
by this command.</p>
</div>
<div class="paragraph">
<p>A micromap created with the <code>micromapSize</code> returned by this command
supports any build with a <a href="VK_EXT_opacity_micromap/micromaps.html#VkMicromapBuildInfoEXT" class="xref page">VkMicromapBuildInfoEXT</a> structure subject to
the following properties:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The build command is a host build command, and <code>buildType</code> is
<code>VK_ACCELERATION_STRUCTURE_BUILD_TYPE_HOST_KHR</code> or
<code>VK_ACCELERATION_STRUCTURE_BUILD_TYPE_HOST_OR_DEVICE_KHR</code></p>
</li>
<li>
<p>The build command is a device build command, and <code>buildType</code> is
<code>VK_ACCELERATION_STRUCTURE_BUILD_TYPE_DEVICE_KHR</code> or
<code>VK_ACCELERATION_STRUCTURE_BUILD_TYPE_HOST_OR_DEVICE_KHR</code></p>
</li>
<li>
<p>For <a href="VK_EXT_opacity_micromap/micromaps.html#VkMicromapBuildInfoEXT" class="xref page">VkMicromapBuildInfoEXT</a>:</p>
<div class="ulist">
<ul>
<li>
<p>Its <code>type</code>, and <code>flags</code> members are equal to
<code>pBuildInfo-&gt;type</code> and <code>pBuildInfo-&gt;flags</code>, respectively.</p>
</li>
<li>
<p>The sum of usage information in either <code>pUsageCounts</code> or
<code>ppUsageCounts</code> is equal to the sum of usage information in either
<code>pBuildInfo-&gt;pUsageCounts</code> or <code>pBuildInfo-&gt;ppUsageCounts</code>.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>Similarly, the <code>buildScratchSize</code> value will support any build command
specifying the <code>VK_BUILD_MICROMAP_MODE_BUILD_EXT</code> <code>mode</code> under the
above conditions.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkGetMicromapBuildSizesEXT-dstMicromap-09180" href="#VUID-vkGetMicromapBuildSizesEXT-dstMicromap-09180"></a> <span class="vuid">VUID-vkGetMicromapBuildSizesEXT-dstMicromap-09180</span><br>

<a href="VK_EXT_opacity_micromap/micromaps.html#VkMicromapBuildInfoEXT" class="xref page">VkMicromapBuildInfoEXT</a>::<code>dstMicromap</code> <strong>must</strong> have been created
from <code>device</code></p>
</li>
<li>
<p><a id="VUID-vkGetMicromapBuildSizesEXT-micromap-07439" href="#VUID-vkGetMicromapBuildSizesEXT-micromap-07439"></a> <span class="vuid">VUID-vkGetMicromapBuildSizesEXT-micromap-07439</span><br>

The <a href="features.html#features-micromap" class="xref page"><code>micromap</code></a> feature <strong>must</strong> be enabled</p>
</li>
<li>
<p><a id="VUID-vkGetMicromapBuildSizesEXT-device-07440" href="#VUID-vkGetMicromapBuildSizesEXT-device-07440"></a> <span class="vuid">VUID-vkGetMicromapBuildSizesEXT-device-07440</span><br>

If <code>device</code> was created with multiple physical devices, then the
<a href="features.html#features-bufferDeviceAddressMultiDevice" class="xref page">    <code>bufferDeviceAddressMultiDevice</code></a> feature <strong>must</strong> be enabled</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkGetMicromapBuildSizesEXT-device-parameter" href="#VUID-vkGetMicromapBuildSizesEXT-device-parameter"></a> <span class="vuid">VUID-vkGetMicromapBuildSizesEXT-device-parameter</span><br>
 <code>device</code> <strong>must</strong> be a valid <a href="devsandqueues.html#VkDevice" class="xref page">VkDevice</a> handle</p>
</li>
<li>
<p><a id="VUID-vkGetMicromapBuildSizesEXT-buildType-parameter" href="#VUID-vkGetMicromapBuildSizesEXT-buildType-parameter"></a> <span class="vuid">VUID-vkGetMicromapBuildSizesEXT-buildType-parameter</span><br>
 <code>buildType</code> <strong>must</strong> be a valid <a href="#VkAccelerationStructureBuildTypeKHR">VkAccelerationStructureBuildTypeKHR</a> value</p>
</li>
<li>
<p><a id="VUID-vkGetMicromapBuildSizesEXT-pBuildInfo-parameter" href="#VUID-vkGetMicromapBuildSizesEXT-pBuildInfo-parameter"></a> <span class="vuid">VUID-vkGetMicromapBuildSizesEXT-pBuildInfo-parameter</span><br>
 <code>pBuildInfo</code> <strong>must</strong> be a valid pointer to a valid <a href="VK_EXT_opacity_micromap/micromaps.html#VkMicromapBuildInfoEXT" class="xref page">VkMicromapBuildInfoEXT</a> structure</p>
</li>
<li>
<p><a id="VUID-vkGetMicromapBuildSizesEXT-pSizeInfo-parameter" href="#VUID-vkGetMicromapBuildSizesEXT-pSizeInfo-parameter"></a> <span class="vuid">VUID-vkGetMicromapBuildSizesEXT-pSizeInfo-parameter</span><br>
 <code>pSizeInfo</code> <strong>must</strong> be a valid pointer to a <a href="#VkMicromapBuildSizesInfoEXT">VkMicromapBuildSizesInfoEXT</a> structure</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>VkMicromapBuildSizesInfoEXT</code> structure describes the required build
sizes for a micromap and scratch buffers and is defined as:</p>
</div>
<div id="VkMicromapBuildSizesInfoEXT" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_EXT_opacity_micromap
typedef struct VkMicromapBuildSizesInfoEXT {
    VkStructureType    sType;
    const void*        pNext;
    VkDeviceSize       micromapSize;
    VkDeviceSize       buildScratchSize;
    VkBool32           discardable;
} VkMicromapBuildSizesInfoEXT;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is a <a href="fundamentals.html#VkStructureType" class="xref page">VkStructureType</a> value identifying this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>micromapSize</code> is the size in bytes required in a
<a href="#VkMicromapEXT">VkMicromapEXT</a> for a build or update operation.</p>
</li>
<li>
<p><code>buildScratchSize</code> is the size in bytes required in a scratch buffer
for a build operation.</p>
</li>
<li>
<p><code>discardable</code> indicates whether or not the micromap object may be
destroyed after an acceleration structure build or update.
A false value means that acceleration structures built with this
micromap <strong>may</strong> contain references to the data contained therein, and the
application <strong>must</strong> not destroy the micromap until ray traversal has
concluded.
A true value means that the information in the micromap will be copied
by value into the acceleration structure, and the micromap <strong>may</strong> be
destroyed after the acceleration structure build concludes.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkMicromapBuildSizesInfoEXT-sType-sType" href="#VUID-VkMicromapBuildSizesInfoEXT-sType-sType"></a> <span class="vuid">VUID-VkMicromapBuildSizesInfoEXT-sType-sType</span><br>
 <code>sType</code> <strong>must</strong> be <code>VK_STRUCTURE_TYPE_MICROMAP_BUILD_SIZES_INFO_EXT</code></p>
</li>
<li>
<p><a id="VUID-VkMicromapBuildSizesInfoEXT-pNext-pNext" href="#VUID-VkMicromapBuildSizesInfoEXT-pNext-pNext"></a> <span class="vuid">VUID-VkMicromapBuildSizesInfoEXT-pNext-pNext</span><br>
 <code>pNext</code> <strong>must</strong> be <code>NULL</code></p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Values which <strong>can</strong> be set in <a href="#VkMicromapCreateInfoEXT">VkMicromapCreateInfoEXT</a>::<code>type</code>
specifying the type of micromap, are:</p>
</div>
<div id="VkMicromapTypeEXT" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_EXT_opacity_micromap
typedef enum VkMicromapTypeEXT {
    VK_MICROMAP_TYPE_OPACITY_MICROMAP_EXT = 0,
#ifdef VK_ENABLE_BETA_EXTENSIONS
  // Provided by VK_NV_displacement_micromap
    VK_MICROMAP_TYPE_DISPLACEMENT_MICROMAP_NV = 1000397000,
#endif
} VkMicromapTypeEXT;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>VK_MICROMAP_TYPE_OPACITY_MICROMAP_EXT</code> is a micromap containing
data to control the opacity of a triangle.</p>
</li>
<li>
<p><code>VK_MICROMAP_TYPE_DISPLACEMENT_MICROMAP_NV</code> is a micromap containing
data to control the displacement of subtriangles within a triangle.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Bits which <strong>can</strong> be set in <a href="#VkMicromapCreateInfoEXT">VkMicromapCreateInfoEXT</a>::<code>createFlags</code>,
specifying additional creation parameters for micromaps, are:</p>
</div>
<div id="VkMicromapCreateFlagBitsEXT" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_EXT_opacity_micromap
typedef enum VkMicromapCreateFlagBitsEXT {
    VK_MICROMAP_CREATE_DEVICE_ADDRESS_CAPTURE_REPLAY_BIT_EXT = 0x00000001,
} VkMicromapCreateFlagBitsEXT;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>VK_MICROMAP_CREATE_DEVICE_ADDRESS_CAPTURE_REPLAY_BIT_EXT</code> specifies
that the micromap&#8217;s address <strong>can</strong> be saved and reused on a subsequent
run.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div id="VkMicromapCreateFlagsEXT" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_EXT_opacity_micromap
typedef VkFlags VkMicromapCreateFlagsEXT;</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>VkMicromapCreateFlagsEXT</code> is a bitmask type for setting a mask of zero
or more <a href="#VkMicromapCreateFlagBitsEXT">VkMicromapCreateFlagBitsEXT</a>.</p>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Bits which <strong>can</strong> be set in <a href="VK_EXT_opacity_micromap/micromaps.html#VkMicromapBuildInfoEXT" class="xref page">VkMicromapBuildInfoEXT</a>::<code>flags</code>
specifying additional parameters for micromap builds, are:</p>
</div>
<div id="VkBuildMicromapFlagBitsEXT" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_EXT_opacity_micromap
typedef enum VkBuildMicromapFlagBitsEXT {
    VK_BUILD_MICROMAP_PREFER_FAST_TRACE_BIT_EXT = 0x00000001,
    VK_BUILD_MICROMAP_PREFER_FAST_BUILD_BIT_EXT = 0x00000002,
    VK_BUILD_MICROMAP_ALLOW_COMPACTION_BIT_EXT = 0x00000004,
} VkBuildMicromapFlagBitsEXT;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>VK_BUILD_MICROMAP_PREFER_FAST_TRACE_BIT_EXT</code> indicates that the
given micromap build <strong>should</strong> prioritize trace performance over build
time.</p>
</li>
<li>
<p><code>VK_BUILD_MICROMAP_PREFER_FAST_BUILD_BIT_EXT</code> indicates that the
given micromap build <strong>should</strong> prioritize build time over trace
performance.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div id="VkBuildMicromapFlagsEXT" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_EXT_opacity_micromap
typedef VkFlags VkBuildMicromapFlagsEXT;</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>VkBuildMicromapFlagsEXT</code> is a bitmask type for setting a mask of zero
or more <a href="#VkBuildMicromapFlagBitsEXT">VkBuildMicromapFlagBitsEXT</a>.</p>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>To destroy a micromap, call:</p>
</div>
<div id="vkDestroyMicromapEXT" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_EXT_opacity_micromap
void vkDestroyMicromapEXT(
    VkDevice                                    device,
    VkMicromapEXT                               micromap,
    const VkAllocationCallbacks*                pAllocator);</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>device</code> is the logical device that destroys the micromap.</p>
</li>
<li>
<p><code>micromap</code> is the micromap to destroy.</p>
</li>
<li>
<p><code>pAllocator</code> controls host memory allocation as described in the
<a href="memory.html#memory-allocation" class="xref page">Memory Allocation</a> chapter.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkDestroyMicromapEXT-micromap-07441" href="#VUID-vkDestroyMicromapEXT-micromap-07441"></a> <span class="vuid">VUID-vkDestroyMicromapEXT-micromap-07441</span><br>

All submitted commands that refer to <code>micromap</code> <strong>must</strong> have completed
execution</p>
</li>
<li>
<p><a id="VUID-vkDestroyMicromapEXT-micromap-07442" href="#VUID-vkDestroyMicromapEXT-micromap-07442"></a> <span class="vuid">VUID-vkDestroyMicromapEXT-micromap-07442</span><br>

If <code>VkAllocationCallbacks</code> were provided when <code>micromap</code> was
created, a compatible set of callbacks <strong>must</strong> be provided here</p>
</li>
<li>
<p><a id="VUID-vkDestroyMicromapEXT-micromap-07443" href="#VUID-vkDestroyMicromapEXT-micromap-07443"></a> <span class="vuid">VUID-vkDestroyMicromapEXT-micromap-07443</span><br>

If no <code>VkAllocationCallbacks</code> were provided when <code>micromap</code> was
created, <code>pAllocator</code> <strong>must</strong> be <code>NULL</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkDestroyMicromapEXT-device-parameter" href="#VUID-vkDestroyMicromapEXT-device-parameter"></a> <span class="vuid">VUID-vkDestroyMicromapEXT-device-parameter</span><br>
 <code>device</code> <strong>must</strong> be a valid <a href="devsandqueues.html#VkDevice" class="xref page">VkDevice</a> handle</p>
</li>
<li>
<p><a id="VUID-vkDestroyMicromapEXT-micromap-parameter" href="#VUID-vkDestroyMicromapEXT-micromap-parameter"></a> <span class="vuid">VUID-vkDestroyMicromapEXT-micromap-parameter</span><br>
 If <code>micromap</code> is not <a href="../appendices/boilerplate.html#VK_NULL_HANDLE" class="xref page">VK_NULL_HANDLE</a>, <code>micromap</code> <strong>must</strong> be a valid <a href="#VkMicromapEXT">VkMicromapEXT</a> handle</p>
</li>
<li>
<p><a id="VUID-vkDestroyMicromapEXT-pAllocator-parameter" href="#VUID-vkDestroyMicromapEXT-pAllocator-parameter"></a> <span class="vuid">VUID-vkDestroyMicromapEXT-pAllocator-parameter</span><br>
 If <code>pAllocator</code> is not <code>NULL</code>, <code>pAllocator</code> <strong>must</strong> be a valid pointer to a valid <a href="memory.html#VkAllocationCallbacks" class="xref page">VkAllocationCallbacks</a> structure</p>
</li>
<li>
<p><a id="VUID-vkDestroyMicromapEXT-micromap-parent" href="#VUID-vkDestroyMicromapEXT-micromap-parent"></a> <span class="vuid">VUID-vkDestroyMicromapEXT-micromap-parent</span><br>
 If <code>micromap</code> is a valid handle, it <strong>must</strong> have been created, allocated, or retrieved from <code>device</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Host Synchronization</div>
<div class="ulist">
<ul>
<li>
<p>Host access to <code>micromap</code> <strong>must</strong> be externally synchronized</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="resources-association"><a class="anchor" href="#resources-association"></a>Resource Memory Association</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Resources are initially created as <em>virtual allocations</em> with no backing
memory.
Device memory is allocated separately (see <a href="memory.html#memory-device" class="xref page">Device Memory</a>) and then
associated with the resource.
This association is done differently for sparse and non-sparse resources.</p>
</div>
<div class="paragraph">
<p>Resources created with any of the sparse creation flags are considered
sparse resources.
Resources created without these flags are non-sparse.
The details on resource memory association for sparse resources is described
in <a href="sparsemem.html#sparsememory" class="xref page">Sparse Resources</a>.</p>
</div>
<div class="paragraph">
<p>Non-sparse resources <strong>must</strong> be bound completely and contiguously to a single
<code>VkDeviceMemory</code> object before the resource is passed as a parameter to
any of the following operations:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>creating image or buffer views</p>
</li>
<li>
<p>updating descriptor sets</p>
</li>
<li>
<p>recording commands in a command buffer</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Once bound, the memory binding is immutable for the lifetime of the
resource.</p>
</div>
<div class="paragraph">
<p>In a logical device representing more than one physical device, buffer and
image resources exist on all physical devices but <strong>can</strong> be bound to memory
differently on each.
Each such replicated resource is an <em>instance</em> of the resource.
For sparse resources, each instance <strong>can</strong> be bound to memory arbitrarily
differently.
For non-sparse resources, each instance <strong>can</strong> either be bound to the local or
a peer instance of the memory, or for images <strong>can</strong> be bound to rectangular
regions from the local and/or peer instances.
When a resource is used in a descriptor set, each physical device interprets
the descriptor according to its own instance&#8217;s binding to memory.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="title">Note</div>
<div class="paragraph">
<p>There are no new copy commands to transfer data between physical devices.
Instead, an application <strong>can</strong> create a resource with a peer mapping and use
it as the source or destination of a transfer command executed by a single
physical device to copy the data from one physical device to another.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>To determine the memory requirements for a buffer resource, call:</p>
</div>
<div id="vkGetBufferMemoryRequirements" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_VERSION_1_0
void vkGetBufferMemoryRequirements(
    VkDevice                                    device,
    VkBuffer                                    buffer,
    VkMemoryRequirements*                       pMemoryRequirements);</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>device</code> is the logical device that owns the buffer.</p>
</li>
<li>
<p><code>buffer</code> is the buffer to query.</p>
</li>
<li>
<p><code>pMemoryRequirements</code> is a pointer to a <a href="#VkMemoryRequirements">VkMemoryRequirements</a>
structure in which the memory requirements of the buffer object are
returned.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkGetBufferMemoryRequirements-device-parameter" href="#VUID-vkGetBufferMemoryRequirements-device-parameter"></a> <span class="vuid">VUID-vkGetBufferMemoryRequirements-device-parameter</span><br>
 <code>device</code> <strong>must</strong> be a valid <a href="devsandqueues.html#VkDevice" class="xref page">VkDevice</a> handle</p>
</li>
<li>
<p><a id="VUID-vkGetBufferMemoryRequirements-buffer-parameter" href="#VUID-vkGetBufferMemoryRequirements-buffer-parameter"></a> <span class="vuid">VUID-vkGetBufferMemoryRequirements-buffer-parameter</span><br>
 <code>buffer</code> <strong>must</strong> be a valid <a href="#VkBuffer">VkBuffer</a> handle</p>
</li>
<li>
<p><a id="VUID-vkGetBufferMemoryRequirements-pMemoryRequirements-parameter" href="#VUID-vkGetBufferMemoryRequirements-pMemoryRequirements-parameter"></a> <span class="vuid">VUID-vkGetBufferMemoryRequirements-pMemoryRequirements-parameter</span><br>
 <code>pMemoryRequirements</code> <strong>must</strong> be a valid pointer to a <a href="#VkMemoryRequirements">VkMemoryRequirements</a> structure</p>
</li>
<li>
<p><a id="VUID-vkGetBufferMemoryRequirements-buffer-parent" href="#VUID-vkGetBufferMemoryRequirements-buffer-parent"></a> <span class="vuid">VUID-vkGetBufferMemoryRequirements-buffer-parent</span><br>
 <code>buffer</code> <strong>must</strong> have been created, allocated, or retrieved from <code>device</code></p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>To determine the memory requirements for an image resource which is not
created with the <code>VK_IMAGE_CREATE_DISJOINT_BIT</code> flag set, call:</p>
</div>
<div id="vkGetImageMemoryRequirements" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_VERSION_1_0
void vkGetImageMemoryRequirements(
    VkDevice                                    device,
    VkImage                                     image,
    VkMemoryRequirements*                       pMemoryRequirements);</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>device</code> is the logical device that owns the image.</p>
</li>
<li>
<p><code>image</code> is the image to query.</p>
</li>
<li>
<p><code>pMemoryRequirements</code> is a pointer to a <a href="#VkMemoryRequirements">VkMemoryRequirements</a>
structure in which the memory requirements of the image object are
returned.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkGetImageMemoryRequirements-image-01588" href="#VUID-vkGetImageMemoryRequirements-image-01588"></a> <span class="vuid">VUID-vkGetImageMemoryRequirements-image-01588</span><br>

<code>image</code> <strong>must</strong> not have been created with the
<code>VK_IMAGE_CREATE_DISJOINT_BIT</code> flag set</p>
</li>
<li>
<p><a id="VUID-vkGetImageMemoryRequirements-image-04004" href="#VUID-vkGetImageMemoryRequirements-image-04004"></a> <span class="vuid">VUID-vkGetImageMemoryRequirements-image-04004</span><br>

If <code>image</code> was created with the
<code>VK_EXTERNAL_MEMORY_HANDLE_TYPE_ANDROID_HARDWARE_BUFFER_BIT_ANDROID</code>
external memory handle type, then <code>image</code> <strong>must</strong> be bound to memory</p>
</li>
<li>
<p><a id="VUID-vkGetImageMemoryRequirements-image-08960" href="#VUID-vkGetImageMemoryRequirements-image-08960"></a> <span class="vuid">VUID-vkGetImageMemoryRequirements-image-08960</span><br>

If <code>image</code> was created with the
<code>VK_EXTERNAL_MEMORY_HANDLE_TYPE_SCREEN_BUFFER_BIT_QNX</code> external
memory handle type, then <code>image</code> <strong>must</strong> be bound to memory</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkGetImageMemoryRequirements-device-parameter" href="#VUID-vkGetImageMemoryRequirements-device-parameter"></a> <span class="vuid">VUID-vkGetImageMemoryRequirements-device-parameter</span><br>
 <code>device</code> <strong>must</strong> be a valid <a href="devsandqueues.html#VkDevice" class="xref page">VkDevice</a> handle</p>
</li>
<li>
<p><a id="VUID-vkGetImageMemoryRequirements-image-parameter" href="#VUID-vkGetImageMemoryRequirements-image-parameter"></a> <span class="vuid">VUID-vkGetImageMemoryRequirements-image-parameter</span><br>
 <code>image</code> <strong>must</strong> be a valid <a href="#VkImage">VkImage</a> handle</p>
</li>
<li>
<p><a id="VUID-vkGetImageMemoryRequirements-pMemoryRequirements-parameter" href="#VUID-vkGetImageMemoryRequirements-pMemoryRequirements-parameter"></a> <span class="vuid">VUID-vkGetImageMemoryRequirements-pMemoryRequirements-parameter</span><br>
 <code>pMemoryRequirements</code> <strong>must</strong> be a valid pointer to a <a href="#VkMemoryRequirements">VkMemoryRequirements</a> structure</p>
</li>
<li>
<p><a id="VUID-vkGetImageMemoryRequirements-image-parent" href="#VUID-vkGetImageMemoryRequirements-image-parent"></a> <span class="vuid">VUID-vkGetImageMemoryRequirements-image-parent</span><br>
 <code>image</code> <strong>must</strong> have been created, allocated, or retrieved from <code>device</code></p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>VkMemoryRequirements</code> structure is defined as:</p>
</div>
<div id="VkMemoryRequirements" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_VERSION_1_0
typedef struct VkMemoryRequirements {
    VkDeviceSize    size;
    VkDeviceSize    alignment;
    uint32_t        memoryTypeBits;
} VkMemoryRequirements;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>size</code> is the size, in bytes, of the memory allocation <strong>required</strong> for
the resource.</p>
</li>
<li>
<p><code>alignment</code> is the alignment, in bytes, of the offset within the
allocation <strong>required</strong> for the resource.</p>
</li>
<li>
<p><code>memoryTypeBits</code> is a bitmask and contains one bit set for every
supported memory type for the resource.
Bit <code>i</code> is set if and only if the memory type <code>i</code> in the
<code>VkPhysicalDeviceMemoryProperties</code> structure for the physical device
is supported for the resource.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="paragraph">
<p>The precise size of images that will be bound to external Android hardware
buffer memory is unknown until the memory has been imported or allocated, so
applications <strong>must</strong> not call <a href="#vkGetImageMemoryRequirements">vkGetImageMemoryRequirements</a> or
<a href="#vkGetImageMemoryRequirements2">vkGetImageMemoryRequirements2</a> with such a <a href="#VkImage">VkImage</a> before it has
been bound to memory.
For this reason, applications also <strong>must</strong> not call
<a href="#vkGetDeviceImageMemoryRequirements">vkGetDeviceImageMemoryRequirements</a> with a <a href="#VkImageCreateInfo">VkImageCreateInfo</a>
describing an external Android hardware buffer.
When importing Android hardware buffer memory, the <code>allocationSize</code> <strong>can</strong>
be determined by calling <a href="memory.html#vkGetAndroidHardwareBufferPropertiesANDROID" class="xref page">vkGetAndroidHardwareBufferPropertiesANDROID</a>.
When allocating new memory for a <a href="#VkImage">VkImage</a> that <strong>can</strong> be exported to an
Android hardware buffer, the memory&#8217;s <code>allocationSize</code> <strong>must</strong> be zero;
the actual size will be determined by the dedicated image&#8217;s parameters.
After the memory has been allocated, the amount of space allocated from the
memory&#8217;s heap <strong>can</strong> be obtained by getting the image&#8217;s memory requirements or
by calling <a href="memory.html#vkGetAndroidHardwareBufferPropertiesANDROID" class="xref page">vkGetAndroidHardwareBufferPropertiesANDROID</a> with the
Android hardware buffer exported from the memory.</p>
</div>
<div class="paragraph">
<p>When allocating new memory for a <a href="#VkBuffer">VkBuffer</a> that <strong>can</strong> be exported to an
Android hardware buffer an application <strong>may</strong> still call
<a href="#vkGetBufferMemoryRequirements">vkGetBufferMemoryRequirements</a> or <a href="#vkGetBufferMemoryRequirements2">vkGetBufferMemoryRequirements2</a>
with <a href="#VkBuffer">VkBuffer</a> before it has been bound to memory.</p>
</div>
<div class="paragraph">
<p>If the resource being queried was created with the
<code>VK_EXTERNAL_MEMORY_HANDLE_TYPE_D3D11_TEXTURE_BIT</code>,
<code>VK_EXTERNAL_MEMORY_HANDLE_TYPE_D3D11_TEXTURE_KMT_BIT</code>, or
<code>VK_EXTERNAL_MEMORY_HANDLE_TYPE_D3D12_RESOURCE_BIT</code> external memory
handle type, the value of <code>size</code> has no meaning and <strong>should</strong> be ignored.</p>
</div>
<div class="paragraph">
<p>The implementation guarantees certain properties about the memory
requirements returned by
<a href="#vkGetBufferMemoryRequirements2">vkGetBufferMemoryRequirements2</a>, <a href="#vkGetImageMemoryRequirements2">vkGetImageMemoryRequirements2</a>,
<a href="#vkGetDeviceBufferMemoryRequirements">vkGetDeviceBufferMemoryRequirements</a>,
<a href="#vkGetDeviceImageMemoryRequirements">vkGetDeviceImageMemoryRequirements</a>,
<a href="#vkGetBufferMemoryRequirements">vkGetBufferMemoryRequirements</a> and <a href="#vkGetImageMemoryRequirements">vkGetImageMemoryRequirements</a>:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The <code>memoryTypeBits</code> member always contains at least one bit set.</p>
</li>
<li>
<p>If <code>buffer</code> is a <code>VkBuffer</code> not created with the
<code>VK_BUFFER_CREATE_SPARSE_BINDING_BIT</code> or
<code>VK_BUFFER_CREATE_PROTECTED_BIT</code> bits set, or if <code>image</code> is a
<a href="../appendices/glossary.html#glossary-linear-resource" class="xref page">linear</a> image that was not created with the
<code>VK_IMAGE_CREATE_PROTECTED_BIT</code> bit set, then the
<code>memoryTypeBits</code> member always contains at least one bit set
corresponding to a <code>VkMemoryType</code> with a <code>propertyFlags</code> that
has both the <code>VK_MEMORY_PROPERTY_HOST_VISIBLE_BIT</code> bit and the
<code>VK_MEMORY_PROPERTY_HOST_COHERENT_BIT</code> bit set.
In other words, mappable coherent memory <strong>can</strong> always be attached to
these objects.</p>
</li>
<li>
<p>If <code>buffer</code> was created with
<a href="#VkExternalMemoryBufferCreateInfo">VkExternalMemoryBufferCreateInfo</a>::<code>handleTypes</code> set to <code>0</code> or
<code>image</code> was created with
<a href="#VkExternalMemoryImageCreateInfo">VkExternalMemoryImageCreateInfo</a>::<code>handleTypes</code> set to <code>0</code>, the
<code>memoryTypeBits</code> member always contains at least one bit set
corresponding to a <code>VkMemoryType</code> with a <code>propertyFlags</code> that
has the <code>VK_MEMORY_PROPERTY_DEVICE_LOCAL_BIT</code> bit set.</p>
</li>
<li>
<p>The <code>memoryTypeBits</code> member is identical for all <code>VkBuffer</code>
objects created with the same value for the <code>flags</code> and <code>usage</code>
members in the <a href="#VkBufferCreateInfo">VkBufferCreateInfo</a> structure
and the <code>handleTypes</code> member of the
<a href="#VkExternalMemoryBufferCreateInfo">VkExternalMemoryBufferCreateInfo</a> structure
passed to <a href="#vkCreateBuffer">vkCreateBuffer</a>.
Further, if <code>usage1</code> and <code>usage2</code> of type <a href="#VkBufferUsageFlags">VkBufferUsageFlags</a>
are such that the bits set in <code>usage2</code> are a subset of the bits set
in <code>usage1</code>, and they have the same
<code>flags</code> and
<a href="#VkExternalMemoryBufferCreateInfo">VkExternalMemoryBufferCreateInfo</a>::<code>handleTypes</code>,
then the bits set in <code>memoryTypeBits</code> returned for <code>usage1</code> <strong>must</strong>
be a subset of the bits set in <code>memoryTypeBits</code> returned for
<code>usage2</code>, for all values of <code>flags</code>.</p>
</li>
<li>
<p>The <code>alignment</code> member is a power of two.</p>
</li>
<li>
<p>The <code>alignment</code> member is identical for all <code>VkBuffer</code> objects
created with the same combination of values for the <code>usage</code> and
<code>flags</code> members in the <a href="#VkBufferCreateInfo">VkBufferCreateInfo</a> structure passed to
<a href="#vkCreateBuffer">vkCreateBuffer</a>.</p>
</li>
<li>
<p>If the <a href="features.html#features-maintenance4" class="xref page"><code>maintenance4</code></a> feature is enabled,
then the <code>alignment</code> member is identical for all <code>VkImage</code>
objects created with the same combination of values for the <code>flags</code>,
<code>imageType</code>, <code>format</code>, <code>extent</code>, <code>mipLevels</code>,
<code>arrayLayers</code>, <code>samples</code>, <code>tiling</code> and <code>usage</code> members
in the <a href="#VkImageCreateInfo">VkImageCreateInfo</a> structure passed to <a href="#vkCreateImage">vkCreateImage</a>.</p>
</li>
<li>
<p>The <code>alignment</code> member satisfies the buffer descriptor offset
alignment requirements associated with the <code>VkBuffer</code>&#8217;s <code>usage</code>:</p>
<div class="ulist">
<ul>
<li>
<p>If <code>usage</code> included <code>VK_BUFFER_USAGE_UNIFORM_TEXEL_BUFFER_BIT</code>
or <code>VK_BUFFER_USAGE_STORAGE_TEXEL_BUFFER_BIT</code>, <code>alignment</code>
<strong>must</strong> be an integer multiple of
<code>VkPhysicalDeviceLimits</code>::<code>minTexelBufferOffsetAlignment</code>.</p>
</li>
<li>
<p>If <code>usage</code> included <code>VK_BUFFER_USAGE_UNIFORM_BUFFER_BIT</code>,
<code>alignment</code> <strong>must</strong> be an integer multiple of
<code>VkPhysicalDeviceLimits</code>::<code>minUniformBufferOffsetAlignment</code>.</p>
</li>
<li>
<p>If <code>usage</code> included <code>VK_BUFFER_USAGE_STORAGE_BUFFER_BIT</code>,
<code>alignment</code> <strong>must</strong> be an integer multiple of
<code>VkPhysicalDeviceLimits</code>::<code>minStorageBufferOffsetAlignment</code>.</p>
</li>
</ul>
</div>
</li>
<li>
<p>For images created with a color format, the <code>memoryTypeBits</code> member
is identical for all <code>VkImage</code> objects created with the same
combination of values for the <code>tiling</code> member, the
<code>VK_IMAGE_CREATE_SPARSE_BINDING_BIT</code> bit of the <code>flags</code> member,
the <code>VK_IMAGE_CREATE_SPLIT_INSTANCE_BIND_REGIONS_BIT</code> bit of the
<code>flags</code> member,
the <code>VK_IMAGE_USAGE_HOST_TRANSFER_BIT_EXT</code> bit of the <code>usage</code>
member if the
<a href="limits.html#VkPhysicalDeviceHostImageCopyPropertiesEXT" class="xref page">VkPhysicalDeviceHostImageCopyPropertiesEXT</a>::<code>identicalMemoryTypeRequirements</code>
property is <code>VK_FALSE</code>,
<code>handleTypes</code> member of <a href="#VkExternalMemoryImageCreateInfo">VkExternalMemoryImageCreateInfo</a>,
and the <code>VK_IMAGE_USAGE_TRANSIENT_ATTACHMENT_BIT</code> of the <code>usage</code>
member in the <a href="#VkImageCreateInfo">VkImageCreateInfo</a> structure passed to
<a href="#vkCreateImage">vkCreateImage</a>.</p>
</li>
<li>
<p>For images created with a depth/stencil format, the <code>memoryTypeBits</code>
member is identical for all <code>VkImage</code> objects created with the same
combination of values for the <code>format</code> member, the <code>tiling</code>
member, the <code>VK_IMAGE_CREATE_SPARSE_BINDING_BIT</code> bit of the
<code>flags</code> member,
the <code>VK_IMAGE_CREATE_SPLIT_INSTANCE_BIND_REGIONS_BIT</code> bit of the
<code>flags</code> member,
the <code>VK_IMAGE_USAGE_HOST_TRANSFER_BIT_EXT</code> bit of the <code>usage</code>
member if the
<a href="limits.html#VkPhysicalDeviceHostImageCopyPropertiesEXT" class="xref page">VkPhysicalDeviceHostImageCopyPropertiesEXT</a>::<code>identicalMemoryTypeRequirements</code>
property is <code>VK_FALSE</code>,
<code>handleTypes</code> member of <a href="#VkExternalMemoryImageCreateInfo">VkExternalMemoryImageCreateInfo</a>,
and the <code>VK_IMAGE_USAGE_TRANSIENT_ATTACHMENT_BIT</code> of the <code>usage</code>
member in the <a href="#VkImageCreateInfo">VkImageCreateInfo</a> structure passed to
<a href="#vkCreateImage">vkCreateImage</a>.</p>
</li>
<li>
<p>If the memory requirements are for a <code>VkImage</code>, the
<code>memoryTypeBits</code> member <strong>must</strong> not refer to a <code>VkMemoryType</code> with
a <code>propertyFlags</code> that has the
<code>VK_MEMORY_PROPERTY_LAZILY_ALLOCATED_BIT</code> bit set if the <code>image</code>
did not have <code>VK_IMAGE_USAGE_TRANSIENT_ATTACHMENT_BIT</code> bit set in
the <code>usage</code> member of the <a href="#VkImageCreateInfo">VkImageCreateInfo</a> structure passed
to <a href="#vkCreateImage">vkCreateImage</a>.</p>
</li>
<li>
<p>If the memory requirements are for a <code>VkBuffer</code>, the
<code>memoryTypeBits</code> member <strong>must</strong> not refer to a <code>VkMemoryType</code> with
a <code>propertyFlags</code> that has the
<code>VK_MEMORY_PROPERTY_LAZILY_ALLOCATED_BIT</code> bit set.</p>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="title">Note</div>
<div class="paragraph">
<p>The implication of this requirement is that lazily allocated memory is
disallowed for buffers in all cases.</p>
</div>
</td>
</tr>
</table>
</div>
</li>
<li>
<p>The <code>size</code> member is identical for all <code>VkBuffer</code> objects
created with the same combination of creation parameters specified in
<a href="#VkBufferCreateInfo">VkBufferCreateInfo</a> and its <code>pNext</code> chain.</p>
</li>
<li>
<p>The <code>size</code> member is identical for all <code>VkImage</code> objects created
with the same combination of creation parameters specified in
<a href="#VkImageCreateInfo">VkImageCreateInfo</a> and its <code>pNext</code> chain.</p>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="title">Note</div>
<div class="paragraph">
<p>This, however, does not imply that they interpret the contents of the bound
memory identically with each other.
That additional guarantee, however, <strong>can</strong> be explicitly requested using
<code>VK_IMAGE_CREATE_ALIAS_BIT</code>.</p>
</div>
</td>
</tr>
</table>
</div>
</li>
<li>
<p>If the <a href="features.html#features-maintenance4" class="xref page"><code>maintenance4</code></a> feature is enabled,
these additional guarantees apply:</p>
<div class="ulist">
<ul>
<li>
<p>For a <code>VkBuffer</code>, the <code>size</code> memory requirement is never
greater than that of another <code>VkBuffer</code> created with a greater or
equal <code>size</code> specified in <a href="#VkBufferCreateInfo">VkBufferCreateInfo</a>, all other
creation parameters being identical.</p>
</li>
<li>
<p>For a <code>VkBuffer</code>, the <code>size</code> memory requirement is never
greater than the result of aligning
<a href="#VkBufferCreateInfo">VkBufferCreateInfo</a>::<code>size</code> with the <code>alignment</code> memory
requirement.</p>
</li>
<li>
<p>For a <a href="#VkImage">VkImage</a>, the <code>size</code> memory requirement is never greater
than that of another <a href="#VkImage">VkImage</a> created with a greater or equal
value in each of <code>extent.width</code>, <code>extent.height</code>, and
<code>extent.depth</code>; all other creation parameters being identical.</p>
</li>
<li>
<p>The memory requirements returned by
<a href="#vkGetDeviceBufferMemoryRequirements">vkGetDeviceBufferMemoryRequirements</a> are identical to those that
would be returned by <a href="#vkGetBufferMemoryRequirements2">vkGetBufferMemoryRequirements2</a> if it were
called with a <code>VkBuffer</code> created with the same
<a href="#VkBufferCreateInfo">VkBufferCreateInfo</a> values.</p>
</li>
<li>
<p>The memory requirements returned by
<a href="#vkGetDeviceImageMemoryRequirements">vkGetDeviceImageMemoryRequirements</a> are identical to those that
would be returned by <a href="#vkGetImageMemoryRequirements2">vkGetImageMemoryRequirements2</a> if it were
called with a <code>VkImage</code> created with the same
<a href="#VkImageCreateInfo">VkImageCreateInfo</a> values.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>To determine the memory requirements for a buffer resource, call:</p>
</div>
<div id="vkGetBufferMemoryRequirements2" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_VERSION_1_1
void vkGetBufferMemoryRequirements2(
    VkDevice                                    device,
    const VkBufferMemoryRequirementsInfo2*      pInfo,
    VkMemoryRequirements2*                      pMemoryRequirements);</code></pre>
</div>
</div>
<div class="paragraph">
<p>or the equivalent command</p>
</div>
<div id="vkGetBufferMemoryRequirements2KHR" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_KHR_get_memory_requirements2
void vkGetBufferMemoryRequirements2KHR(
    VkDevice                                    device,
    const VkBufferMemoryRequirementsInfo2*      pInfo,
    VkMemoryRequirements2*                      pMemoryRequirements);</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>device</code> is the logical device that owns the buffer.</p>
</li>
<li>
<p><code>pInfo</code> is a pointer to a <a href="#VkBufferMemoryRequirementsInfo2">VkBufferMemoryRequirementsInfo2</a>
structure containing parameters required for the memory requirements
query.</p>
</li>
<li>
<p><code>pMemoryRequirements</code> is a pointer to a <a href="#VkMemoryRequirements2">VkMemoryRequirements2</a>
structure in which the memory requirements of the buffer object are
returned.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkGetBufferMemoryRequirements2-device-parameter" href="#VUID-vkGetBufferMemoryRequirements2-device-parameter"></a> <span class="vuid">VUID-vkGetBufferMemoryRequirements2-device-parameter</span><br>
 <code>device</code> <strong>must</strong> be a valid <a href="devsandqueues.html#VkDevice" class="xref page">VkDevice</a> handle</p>
</li>
<li>
<p><a id="VUID-vkGetBufferMemoryRequirements2-pInfo-parameter" href="#VUID-vkGetBufferMemoryRequirements2-pInfo-parameter"></a> <span class="vuid">VUID-vkGetBufferMemoryRequirements2-pInfo-parameter</span><br>
 <code>pInfo</code> <strong>must</strong> be a valid pointer to a valid <a href="#VkBufferMemoryRequirementsInfo2">VkBufferMemoryRequirementsInfo2</a> structure</p>
</li>
<li>
<p><a id="VUID-vkGetBufferMemoryRequirements2-pMemoryRequirements-parameter" href="#VUID-vkGetBufferMemoryRequirements2-pMemoryRequirements-parameter"></a> <span class="vuid">VUID-vkGetBufferMemoryRequirements2-pMemoryRequirements-parameter</span><br>
 <code>pMemoryRequirements</code> <strong>must</strong> be a valid pointer to a <a href="#VkMemoryRequirements2">VkMemoryRequirements2</a> structure</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>To determine the memory requirements for a buffer resource without creating
an object, call:</p>
</div>
<div id="vkGetDeviceBufferMemoryRequirements" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_VERSION_1_3
void vkGetDeviceBufferMemoryRequirements(
    VkDevice                                    device,
    const VkDeviceBufferMemoryRequirements*     pInfo,
    VkMemoryRequirements2*                      pMemoryRequirements);</code></pre>
</div>
</div>
<div class="paragraph">
<p>or the equivalent command</p>
</div>
<div id="vkGetDeviceBufferMemoryRequirementsKHR" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_KHR_maintenance4
void vkGetDeviceBufferMemoryRequirementsKHR(
    VkDevice                                    device,
    const VkDeviceBufferMemoryRequirements*     pInfo,
    VkMemoryRequirements2*                      pMemoryRequirements);</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>device</code> is the logical device intended to own the buffer.</p>
</li>
<li>
<p><code>pInfo</code> is a pointer to a <a href="#VkDeviceBufferMemoryRequirements">VkDeviceBufferMemoryRequirements</a>
structure containing parameters required for the memory requirements
query.</p>
</li>
<li>
<p><code>pMemoryRequirements</code> is a pointer to a <a href="#VkMemoryRequirements2">VkMemoryRequirements2</a>
structure in which the memory requirements of the buffer object are
returned.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkGetDeviceBufferMemoryRequirements-device-parameter" href="#VUID-vkGetDeviceBufferMemoryRequirements-device-parameter"></a> <span class="vuid">VUID-vkGetDeviceBufferMemoryRequirements-device-parameter</span><br>
 <code>device</code> <strong>must</strong> be a valid <a href="devsandqueues.html#VkDevice" class="xref page">VkDevice</a> handle</p>
</li>
<li>
<p><a id="VUID-vkGetDeviceBufferMemoryRequirements-pInfo-parameter" href="#VUID-vkGetDeviceBufferMemoryRequirements-pInfo-parameter"></a> <span class="vuid">VUID-vkGetDeviceBufferMemoryRequirements-pInfo-parameter</span><br>
 <code>pInfo</code> <strong>must</strong> be a valid pointer to a valid <a href="#VkDeviceBufferMemoryRequirements">VkDeviceBufferMemoryRequirements</a> structure</p>
</li>
<li>
<p><a id="VUID-vkGetDeviceBufferMemoryRequirements-pMemoryRequirements-parameter" href="#VUID-vkGetDeviceBufferMemoryRequirements-pMemoryRequirements-parameter"></a> <span class="vuid">VUID-vkGetDeviceBufferMemoryRequirements-pMemoryRequirements-parameter</span><br>
 <code>pMemoryRequirements</code> <strong>must</strong> be a valid pointer to a <a href="#VkMemoryRequirements2">VkMemoryRequirements2</a> structure</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>VkBufferMemoryRequirementsInfo2</code> structure is defined as:</p>
</div>
<div id="VkBufferMemoryRequirementsInfo2" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_VERSION_1_1
typedef struct VkBufferMemoryRequirementsInfo2 {
    VkStructureType    sType;
    const void*        pNext;
    VkBuffer           buffer;
} VkBufferMemoryRequirementsInfo2;</code></pre>
</div>
</div>
<div class="paragraph">
<p>or the equivalent</p>
</div>
<div id="VkBufferMemoryRequirementsInfo2KHR" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_KHR_get_memory_requirements2
typedef VkBufferMemoryRequirementsInfo2 VkBufferMemoryRequirementsInfo2KHR;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is a <a href="fundamentals.html#VkStructureType" class="xref page">VkStructureType</a> value identifying this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>buffer</code> is the buffer to query.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkBufferMemoryRequirementsInfo2-sType-sType" href="#VUID-VkBufferMemoryRequirementsInfo2-sType-sType"></a> <span class="vuid">VUID-VkBufferMemoryRequirementsInfo2-sType-sType</span><br>
 <code>sType</code> <strong>must</strong> be <code>VK_STRUCTURE_TYPE_BUFFER_MEMORY_REQUIREMENTS_INFO_2</code></p>
</li>
<li>
<p><a id="VUID-VkBufferMemoryRequirementsInfo2-pNext-pNext" href="#VUID-VkBufferMemoryRequirementsInfo2-pNext-pNext"></a> <span class="vuid">VUID-VkBufferMemoryRequirementsInfo2-pNext-pNext</span><br>
 <code>pNext</code> <strong>must</strong> be <code>NULL</code></p>
</li>
<li>
<p><a id="VUID-VkBufferMemoryRequirementsInfo2-buffer-parameter" href="#VUID-VkBufferMemoryRequirementsInfo2-buffer-parameter"></a> <span class="vuid">VUID-VkBufferMemoryRequirementsInfo2-buffer-parameter</span><br>
 <code>buffer</code> <strong>must</strong> be a valid <a href="#VkBuffer">VkBuffer</a> handle</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>VkDeviceBufferMemoryRequirements</code> structure is defined as:</p>
</div>
<div id="VkDeviceBufferMemoryRequirements" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_VERSION_1_3
typedef struct VkDeviceBufferMemoryRequirements {
    VkStructureType              sType;
    const void*                  pNext;
    const VkBufferCreateInfo*    pCreateInfo;
} VkDeviceBufferMemoryRequirements;</code></pre>
</div>
</div>
<div class="paragraph">
<p>or the equivalent</p>
</div>
<div id="VkDeviceBufferMemoryRequirementsKHR" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_KHR_maintenance4
typedef VkDeviceBufferMemoryRequirements VkDeviceBufferMemoryRequirementsKHR;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is a <a href="fundamentals.html#VkStructureType" class="xref page">VkStructureType</a> value identifying this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>pCreateInfo</code> is a pointer to a <a href="#VkBufferCreateInfo">VkBufferCreateInfo</a> structure
containing parameters affecting creation of the buffer to query.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkDeviceBufferMemoryRequirements-sType-sType" href="#VUID-VkDeviceBufferMemoryRequirements-sType-sType"></a> <span class="vuid">VUID-VkDeviceBufferMemoryRequirements-sType-sType</span><br>
 <code>sType</code> <strong>must</strong> be <code>VK_STRUCTURE_TYPE_DEVICE_BUFFER_MEMORY_REQUIREMENTS</code></p>
</li>
<li>
<p><a id="VUID-VkDeviceBufferMemoryRequirements-pNext-pNext" href="#VUID-VkDeviceBufferMemoryRequirements-pNext-pNext"></a> <span class="vuid">VUID-VkDeviceBufferMemoryRequirements-pNext-pNext</span><br>
 <code>pNext</code> <strong>must</strong> be <code>NULL</code></p>
</li>
<li>
<p><a id="VUID-VkDeviceBufferMemoryRequirements-pCreateInfo-parameter" href="#VUID-VkDeviceBufferMemoryRequirements-pCreateInfo-parameter"></a> <span class="vuid">VUID-VkDeviceBufferMemoryRequirements-pCreateInfo-parameter</span><br>
 <code>pCreateInfo</code> <strong>must</strong> be a valid pointer to a valid <a href="#VkBufferCreateInfo">VkBufferCreateInfo</a> structure</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>To determine the memory requirements for an image resource, call:</p>
</div>
<div id="vkGetImageMemoryRequirements2" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_VERSION_1_1
void vkGetImageMemoryRequirements2(
    VkDevice                                    device,
    const VkImageMemoryRequirementsInfo2*       pInfo,
    VkMemoryRequirements2*                      pMemoryRequirements);</code></pre>
</div>
</div>
<div class="paragraph">
<p>or the equivalent command</p>
</div>
<div id="vkGetImageMemoryRequirements2KHR" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_KHR_get_memory_requirements2
void vkGetImageMemoryRequirements2KHR(
    VkDevice                                    device,
    const VkImageMemoryRequirementsInfo2*       pInfo,
    VkMemoryRequirements2*                      pMemoryRequirements);</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>device</code> is the logical device that owns the image.</p>
</li>
<li>
<p><code>pInfo</code> is a pointer to a <a href="#VkImageMemoryRequirementsInfo2">VkImageMemoryRequirementsInfo2</a>
structure containing parameters required for the memory requirements
query.</p>
</li>
<li>
<p><code>pMemoryRequirements</code> is a pointer to a <a href="#VkMemoryRequirements2">VkMemoryRequirements2</a>
structure in which the memory requirements of the image object are
returned.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkGetImageMemoryRequirements2-device-parameter" href="#VUID-vkGetImageMemoryRequirements2-device-parameter"></a> <span class="vuid">VUID-vkGetImageMemoryRequirements2-device-parameter</span><br>
 <code>device</code> <strong>must</strong> be a valid <a href="devsandqueues.html#VkDevice" class="xref page">VkDevice</a> handle</p>
</li>
<li>
<p><a id="VUID-vkGetImageMemoryRequirements2-pInfo-parameter" href="#VUID-vkGetImageMemoryRequirements2-pInfo-parameter"></a> <span class="vuid">VUID-vkGetImageMemoryRequirements2-pInfo-parameter</span><br>
 <code>pInfo</code> <strong>must</strong> be a valid pointer to a valid <a href="#VkImageMemoryRequirementsInfo2">VkImageMemoryRequirementsInfo2</a> structure</p>
</li>
<li>
<p><a id="VUID-vkGetImageMemoryRequirements2-pMemoryRequirements-parameter" href="#VUID-vkGetImageMemoryRequirements2-pMemoryRequirements-parameter"></a> <span class="vuid">VUID-vkGetImageMemoryRequirements2-pMemoryRequirements-parameter</span><br>
 <code>pMemoryRequirements</code> <strong>must</strong> be a valid pointer to a <a href="#VkMemoryRequirements2">VkMemoryRequirements2</a> structure</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>To determine the memory requirements for an image resource without creating
an object, call:</p>
</div>
<div id="vkGetDeviceImageMemoryRequirements" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_VERSION_1_3
void vkGetDeviceImageMemoryRequirements(
    VkDevice                                    device,
    const VkDeviceImageMemoryRequirements*      pInfo,
    VkMemoryRequirements2*                      pMemoryRequirements);</code></pre>
</div>
</div>
<div class="paragraph">
<p>or the equivalent command</p>
</div>
<div id="vkGetDeviceImageMemoryRequirementsKHR" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_KHR_maintenance4
void vkGetDeviceImageMemoryRequirementsKHR(
    VkDevice                                    device,
    const VkDeviceImageMemoryRequirements*      pInfo,
    VkMemoryRequirements2*                      pMemoryRequirements);</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>device</code> is the logical device intended to own the image.</p>
</li>
<li>
<p><code>pInfo</code> is a pointer to a <a href="#VkDeviceImageMemoryRequirements">VkDeviceImageMemoryRequirements</a>
structure containing parameters required for the memory requirements
query.</p>
</li>
<li>
<p><code>pMemoryRequirements</code> is a pointer to a <a href="#VkMemoryRequirements2">VkMemoryRequirements2</a>
structure in which the memory requirements of the image object are
returned.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkGetDeviceImageMemoryRequirements-device-parameter" href="#VUID-vkGetDeviceImageMemoryRequirements-device-parameter"></a> <span class="vuid">VUID-vkGetDeviceImageMemoryRequirements-device-parameter</span><br>
 <code>device</code> <strong>must</strong> be a valid <a href="devsandqueues.html#VkDevice" class="xref page">VkDevice</a> handle</p>
</li>
<li>
<p><a id="VUID-vkGetDeviceImageMemoryRequirements-pInfo-parameter" href="#VUID-vkGetDeviceImageMemoryRequirements-pInfo-parameter"></a> <span class="vuid">VUID-vkGetDeviceImageMemoryRequirements-pInfo-parameter</span><br>
 <code>pInfo</code> <strong>must</strong> be a valid pointer to a valid <a href="#VkDeviceImageMemoryRequirements">VkDeviceImageMemoryRequirements</a> structure</p>
</li>
<li>
<p><a id="VUID-vkGetDeviceImageMemoryRequirements-pMemoryRequirements-parameter" href="#VUID-vkGetDeviceImageMemoryRequirements-pMemoryRequirements-parameter"></a> <span class="vuid">VUID-vkGetDeviceImageMemoryRequirements-pMemoryRequirements-parameter</span><br>
 <code>pMemoryRequirements</code> <strong>must</strong> be a valid pointer to a <a href="#VkMemoryRequirements2">VkMemoryRequirements2</a> structure</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>VkImageMemoryRequirementsInfo2</code> structure is defined as:</p>
</div>
<div id="VkImageMemoryRequirementsInfo2" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_VERSION_1_1
typedef struct VkImageMemoryRequirementsInfo2 {
    VkStructureType    sType;
    const void*        pNext;
    VkImage            image;
} VkImageMemoryRequirementsInfo2;</code></pre>
</div>
</div>
<div class="paragraph">
<p>or the equivalent</p>
</div>
<div id="VkImageMemoryRequirementsInfo2KHR" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_KHR_get_memory_requirements2
typedef VkImageMemoryRequirementsInfo2 VkImageMemoryRequirementsInfo2KHR;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is a <a href="fundamentals.html#VkStructureType" class="xref page">VkStructureType</a> value identifying this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>image</code> is the image to query.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkImageMemoryRequirementsInfo2-image-01589" href="#VUID-VkImageMemoryRequirementsInfo2-image-01589"></a> <span class="vuid">VUID-VkImageMemoryRequirementsInfo2-image-01589</span><br>

If <code>image</code> was created with a <em>multi-planar</em> format and the
<code>VK_IMAGE_CREATE_DISJOINT_BIT</code> flag, there <strong>must</strong> be a
<a href="#VkImagePlaneMemoryRequirementsInfo">VkImagePlaneMemoryRequirementsInfo</a> included in the <code>pNext</code>
chain of the <a href="#VkImageMemoryRequirementsInfo2">VkImageMemoryRequirementsInfo2</a> structure</p>
</li>
<li>
<p><a id="VUID-VkImageMemoryRequirementsInfo2-image-02279" href="#VUID-VkImageMemoryRequirementsInfo2-image-02279"></a> <span class="vuid">VUID-VkImageMemoryRequirementsInfo2-image-02279</span><br>

If <code>image</code> was created with <code>VK_IMAGE_CREATE_DISJOINT_BIT</code> and
with <code>VK_IMAGE_TILING_DRM_FORMAT_MODIFIER_EXT</code>, then there <strong>must</strong> be
a <a href="#VkImagePlaneMemoryRequirementsInfo">VkImagePlaneMemoryRequirementsInfo</a> included in the <code>pNext</code>
chain of the <a href="#VkImageMemoryRequirementsInfo2">VkImageMemoryRequirementsInfo2</a> structure</p>
</li>
<li>
<p><a id="VUID-VkImageMemoryRequirementsInfo2-image-01590" href="#VUID-VkImageMemoryRequirementsInfo2-image-01590"></a> <span class="vuid">VUID-VkImageMemoryRequirementsInfo2-image-01590</span><br>

If <code>image</code> was not created with the
<code>VK_IMAGE_CREATE_DISJOINT_BIT</code> flag, there <strong>must</strong> not be a
<a href="#VkImagePlaneMemoryRequirementsInfo">VkImagePlaneMemoryRequirementsInfo</a> included in the <code>pNext</code>
chain of the <a href="#VkImageMemoryRequirementsInfo2">VkImageMemoryRequirementsInfo2</a> structure</p>
</li>
<li>
<p><a id="VUID-VkImageMemoryRequirementsInfo2-image-02280" href="#VUID-VkImageMemoryRequirementsInfo2-image-02280"></a> <span class="vuid">VUID-VkImageMemoryRequirementsInfo2-image-02280</span><br>

If <code>image</code> was created with a single-plane format and with any
<code>tiling</code> other than <code>VK_IMAGE_TILING_DRM_FORMAT_MODIFIER_EXT</code>,
then there <strong>must</strong> not be a <a href="#VkImagePlaneMemoryRequirementsInfo">VkImagePlaneMemoryRequirementsInfo</a>
included in the <code>pNext</code> chain of the
<a href="#VkImageMemoryRequirementsInfo2">VkImageMemoryRequirementsInfo2</a> structure</p>
</li>
<li>
<p><a id="VUID-VkImageMemoryRequirementsInfo2-image-01897" href="#VUID-VkImageMemoryRequirementsInfo2-image-01897"></a> <span class="vuid">VUID-VkImageMemoryRequirementsInfo2-image-01897</span><br>

If <code>image</code> was created with the
<code>VK_EXTERNAL_MEMORY_HANDLE_TYPE_ANDROID_HARDWARE_BUFFER_BIT_ANDROID</code>
external memory handle type, then <code>image</code> <strong>must</strong> be bound to memory</p>
</li>
<li>
<p><a id="VUID-VkImageMemoryRequirementsInfo2-image-08961" href="#VUID-VkImageMemoryRequirementsInfo2-image-08961"></a> <span class="vuid">VUID-VkImageMemoryRequirementsInfo2-image-08961</span><br>

If <code>image</code> was created with the
<code>VK_EXTERNAL_MEMORY_HANDLE_TYPE_SCREEN_BUFFER_BIT_QNX</code> external
memory handle type, then <code>image</code> <strong>must</strong> be bound to memory</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkImageMemoryRequirementsInfo2-sType-sType" href="#VUID-VkImageMemoryRequirementsInfo2-sType-sType"></a> <span class="vuid">VUID-VkImageMemoryRequirementsInfo2-sType-sType</span><br>
 <code>sType</code> <strong>must</strong> be <code>VK_STRUCTURE_TYPE_IMAGE_MEMORY_REQUIREMENTS_INFO_2</code></p>
</li>
<li>
<p><a id="VUID-VkImageMemoryRequirementsInfo2-pNext-pNext" href="#VUID-VkImageMemoryRequirementsInfo2-pNext-pNext"></a> <span class="vuid">VUID-VkImageMemoryRequirementsInfo2-pNext-pNext</span><br>
 <code>pNext</code> <strong>must</strong> be <code>NULL</code> or a pointer to a valid instance of <a href="#VkImagePlaneMemoryRequirementsInfo">VkImagePlaneMemoryRequirementsInfo</a></p>
</li>
<li>
<p><a id="VUID-VkImageMemoryRequirementsInfo2-sType-unique" href="#VUID-VkImageMemoryRequirementsInfo2-sType-unique"></a> <span class="vuid">VUID-VkImageMemoryRequirementsInfo2-sType-unique</span><br>
 The <code>sType</code> value of each struct in the <code>pNext</code> chain <strong>must</strong> be unique</p>
</li>
<li>
<p><a id="VUID-VkImageMemoryRequirementsInfo2-image-parameter" href="#VUID-VkImageMemoryRequirementsInfo2-image-parameter"></a> <span class="vuid">VUID-VkImageMemoryRequirementsInfo2-image-parameter</span><br>
 <code>image</code> <strong>must</strong> be a valid <a href="#VkImage">VkImage</a> handle</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>VkDeviceImageMemoryRequirements</code> structure is defined as:</p>
</div>
<div id="VkDeviceImageMemoryRequirements" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_VERSION_1_3
typedef struct VkDeviceImageMemoryRequirements {
    VkStructureType             sType;
    const void*                 pNext;
    const VkImageCreateInfo*    pCreateInfo;
    VkImageAspectFlagBits       planeAspect;
} VkDeviceImageMemoryRequirements;</code></pre>
</div>
</div>
<div class="paragraph">
<p>or the equivalent</p>
</div>
<div id="VkDeviceImageMemoryRequirementsKHR" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_KHR_maintenance4
typedef VkDeviceImageMemoryRequirements VkDeviceImageMemoryRequirementsKHR;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is a <a href="fundamentals.html#VkStructureType" class="xref page">VkStructureType</a> value identifying this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>pCreateInfo</code> is a pointer to a <a href="#VkImageCreateInfo">VkImageCreateInfo</a> structure
containing parameters affecting creation of the image to query.</p>
</li>
<li>
<p><code>planeAspect</code> is a <a href="#VkImageAspectFlagBits">VkImageAspectFlagBits</a> value specifying the
aspect corresponding to the image plane to query.
This parameter is ignored unless
<code>pCreateInfo-&gt;tiling</code> is
<code>VK_IMAGE_TILING_DRM_FORMAT_MODIFIER_EXT</code>, or
<code>pCreateInfo-&gt;flags</code> has <code>VK_IMAGE_CREATE_DISJOINT_BIT</code> set.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkDeviceImageMemoryRequirements-pCreateInfo-06416" href="#VUID-VkDeviceImageMemoryRequirements-pCreateInfo-06416"></a> <span class="vuid">VUID-VkDeviceImageMemoryRequirements-pCreateInfo-06416</span><br>

The <code>pCreateInfo-&gt;pNext</code> chain <strong>must</strong> not contain a
<a href="#VkImageSwapchainCreateInfoKHR">VkImageSwapchainCreateInfoKHR</a> structure</p>
</li>
<li>
<p><a id="VUID-VkDeviceImageMemoryRequirements-pCreateInfo-06776" href="#VUID-VkDeviceImageMemoryRequirements-pCreateInfo-06776"></a> <span class="vuid">VUID-VkDeviceImageMemoryRequirements-pCreateInfo-06776</span><br>

The <code>pCreateInfo-&gt;pNext</code> chain <strong>must</strong> not contain a
<a href="#VkImageDrmFormatModifierExplicitCreateInfoEXT">VkImageDrmFormatModifierExplicitCreateInfoEXT</a> structure</p>
</li>
<li>
<p><a id="VUID-VkDeviceImageMemoryRequirements-pNext-06996" href="#VUID-VkDeviceImageMemoryRequirements-pNext-06996"></a> <span class="vuid">VUID-VkDeviceImageMemoryRequirements-pNext-06996</span><br>

Applications also <strong>must</strong> not call
<a href="#vkGetDeviceImageMemoryRequirements">vkGetDeviceImageMemoryRequirements</a> with a <a href="#VkImageCreateInfo">VkImageCreateInfo</a>
whose <code>pNext</code> chain includes a <a href="#VkExternalFormatANDROID">VkExternalFormatANDROID</a>
structure with non-zero <code>externalFormat</code></p>
</li>
<li>
<p><a id="VUID-VkDeviceImageMemoryRequirements-pNext-08962" href="#VUID-VkDeviceImageMemoryRequirements-pNext-08962"></a> <span class="vuid">VUID-VkDeviceImageMemoryRequirements-pNext-08962</span><br>

Applications also <strong>must</strong> not call
<a href="#vkGetDeviceImageMemoryRequirements">vkGetDeviceImageMemoryRequirements</a> with a <a href="#VkImageCreateInfo">VkImageCreateInfo</a>
whose <code>pNext</code> chain includes a <a href="#VkExternalFormatQNX">VkExternalFormatQNX</a> structure
with non-zero <code>externalFormat</code></p>
</li>
<li>
<p><a id="VUID-VkDeviceImageMemoryRequirements-pCreateInfo-06417" href="#VUID-VkDeviceImageMemoryRequirements-pCreateInfo-06417"></a> <span class="vuid">VUID-VkDeviceImageMemoryRequirements-pCreateInfo-06417</span><br>

If <code>pCreateInfo-&gt;format</code> specifies a <em>multi-planar</em> format and
<code>pCreateInfo-&gt;flags</code> has <code>VK_IMAGE_CREATE_DISJOINT_BIT</code> set then
<code>planeAspect</code> <strong>must</strong> not be <code>VK_IMAGE_ASPECT_NONE_KHR</code></p>
</li>
<li>
<p><a id="VUID-VkDeviceImageMemoryRequirements-pCreateInfo-06419" href="#VUID-VkDeviceImageMemoryRequirements-pCreateInfo-06419"></a> <span class="vuid">VUID-VkDeviceImageMemoryRequirements-pCreateInfo-06419</span><br>

If <code>pCreateInfo-&gt;flags</code> has <code>VK_IMAGE_CREATE_DISJOINT_BIT</code> set
and if the <code>pCreateInfo-&gt;tiling</code> is <code>VK_IMAGE_TILING_LINEAR</code> or
<code>VK_IMAGE_TILING_OPTIMAL</code>, then <code>planeAspect</code> <strong>must</strong> be a single
valid <a href="formats.html#formats-planes-image-aspect" class="xref page">multi-planar aspect mask</a> bit</p>
</li>
<li>
<p><a id="VUID-VkDeviceImageMemoryRequirements-pCreateInfo-06420" href="#VUID-VkDeviceImageMemoryRequirements-pCreateInfo-06420"></a> <span class="vuid">VUID-VkDeviceImageMemoryRequirements-pCreateInfo-06420</span><br>

If <code>pCreateInfo-&gt;tiling</code> is
<code>VK_IMAGE_TILING_DRM_FORMAT_MODIFIER_EXT</code>, then <code>planeAspect</code>
<strong>must</strong> be a single valid <em>memory plane</em> for the image (that is,
<code>aspectMask</code> <strong>must</strong> specify a plane index that is less than the
<a href="formats.html#VkDrmFormatModifierPropertiesEXT" class="xref page">VkDrmFormatModifierPropertiesEXT</a>::<code>drmFormatModifierPlaneCount</code>
associated with the image&#8217;s <code>format</code> and
<a href="#VkImageDrmFormatModifierPropertiesEXT">VkImageDrmFormatModifierPropertiesEXT</a>::<code>drmFormatModifier</code>)</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkDeviceImageMemoryRequirements-sType-sType" href="#VUID-VkDeviceImageMemoryRequirements-sType-sType"></a> <span class="vuid">VUID-VkDeviceImageMemoryRequirements-sType-sType</span><br>
 <code>sType</code> <strong>must</strong> be <code>VK_STRUCTURE_TYPE_DEVICE_IMAGE_MEMORY_REQUIREMENTS</code></p>
</li>
<li>
<p><a id="VUID-VkDeviceImageMemoryRequirements-pNext-pNext" href="#VUID-VkDeviceImageMemoryRequirements-pNext-pNext"></a> <span class="vuid">VUID-VkDeviceImageMemoryRequirements-pNext-pNext</span><br>
 <code>pNext</code> <strong>must</strong> be <code>NULL</code></p>
</li>
<li>
<p><a id="VUID-VkDeviceImageMemoryRequirements-pCreateInfo-parameter" href="#VUID-VkDeviceImageMemoryRequirements-pCreateInfo-parameter"></a> <span class="vuid">VUID-VkDeviceImageMemoryRequirements-pCreateInfo-parameter</span><br>
 <code>pCreateInfo</code> <strong>must</strong> be a valid pointer to a valid <a href="#VkImageCreateInfo">VkImageCreateInfo</a> structure</p>
</li>
<li>
<p><a id="VUID-VkDeviceImageMemoryRequirements-planeAspect-parameter" href="#VUID-VkDeviceImageMemoryRequirements-planeAspect-parameter"></a> <span class="vuid">VUID-VkDeviceImageMemoryRequirements-planeAspect-parameter</span><br>
 If <code>planeAspect</code> is not <code>0</code>, <code>planeAspect</code> <strong>must</strong> be a valid <a href="#VkImageAspectFlagBits">VkImageAspectFlagBits</a> value</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>To determine the memory requirements for a plane of a disjoint image, add a
<code>VkImagePlaneMemoryRequirementsInfo</code> structure to the <code>pNext</code> chain
of the <code>VkImageMemoryRequirementsInfo2</code> structure.</p>
</div>
<div class="paragraph">
<p>The <code>VkImagePlaneMemoryRequirementsInfo</code> structure is defined as:</p>
</div>
<div id="VkImagePlaneMemoryRequirementsInfo" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_VERSION_1_1
typedef struct VkImagePlaneMemoryRequirementsInfo {
    VkStructureType          sType;
    const void*              pNext;
    VkImageAspectFlagBits    planeAspect;
} VkImagePlaneMemoryRequirementsInfo;</code></pre>
</div>
</div>
<div class="paragraph">
<p>or the equivalent</p>
</div>
<div id="VkImagePlaneMemoryRequirementsInfoKHR" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_KHR_sampler_ycbcr_conversion
typedef VkImagePlaneMemoryRequirementsInfo VkImagePlaneMemoryRequirementsInfoKHR;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is a <a href="fundamentals.html#VkStructureType" class="xref page">VkStructureType</a> value identifying this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>planeAspect</code> is a <a href="#VkImageAspectFlagBits">VkImageAspectFlagBits</a> value specifying the
aspect corresponding to the image plane to query.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkImagePlaneMemoryRequirementsInfo-planeAspect-02281" href="#VUID-VkImagePlaneMemoryRequirementsInfo-planeAspect-02281"></a> <span class="vuid">VUID-VkImagePlaneMemoryRequirementsInfo-planeAspect-02281</span><br>

If the image&#8217;s <code>tiling</code> is <code>VK_IMAGE_TILING_LINEAR</code> or
<code>VK_IMAGE_TILING_OPTIMAL</code>, then <code>planeAspect</code> <strong>must</strong> be a single
valid <a href="formats.html#formats-planes-image-aspect" class="xref page">multi-planar aspect mask</a> bit</p>
</li>
<li>
<p><a id="VUID-VkImagePlaneMemoryRequirementsInfo-planeAspect-02282" href="#VUID-VkImagePlaneMemoryRequirementsInfo-planeAspect-02282"></a> <span class="vuid">VUID-VkImagePlaneMemoryRequirementsInfo-planeAspect-02282</span><br>

If the image&#8217;s <code>tiling</code> is
<code>VK_IMAGE_TILING_DRM_FORMAT_MODIFIER_EXT</code>, then <code>planeAspect</code>
<strong>must</strong> be a single valid <em>memory plane</em> for the image (that is,
<code>aspectMask</code> <strong>must</strong> specify a plane index that is less than the
<a href="formats.html#VkDrmFormatModifierPropertiesEXT" class="xref page">VkDrmFormatModifierPropertiesEXT</a>::<code>drmFormatModifierPlaneCount</code>
associated with the image&#8217;s <code>format</code> and
<a href="#VkImageDrmFormatModifierPropertiesEXT">VkImageDrmFormatModifierPropertiesEXT</a>::<code>drmFormatModifier</code>)</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkImagePlaneMemoryRequirementsInfo-sType-sType" href="#VUID-VkImagePlaneMemoryRequirementsInfo-sType-sType"></a> <span class="vuid">VUID-VkImagePlaneMemoryRequirementsInfo-sType-sType</span><br>
 <code>sType</code> <strong>must</strong> be <code>VK_STRUCTURE_TYPE_IMAGE_PLANE_MEMORY_REQUIREMENTS_INFO</code></p>
</li>
<li>
<p><a id="VUID-VkImagePlaneMemoryRequirementsInfo-planeAspect-parameter" href="#VUID-VkImagePlaneMemoryRequirementsInfo-planeAspect-parameter"></a> <span class="vuid">VUID-VkImagePlaneMemoryRequirementsInfo-planeAspect-parameter</span><br>
 <code>planeAspect</code> <strong>must</strong> be a valid <a href="#VkImageAspectFlagBits">VkImageAspectFlagBits</a> value</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>VkMemoryRequirements2</code> structure is defined as:</p>
</div>
<div id="VkMemoryRequirements2" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_VERSION_1_1
typedef struct VkMemoryRequirements2 {
    VkStructureType         sType;
    void*                   pNext;
    VkMemoryRequirements    memoryRequirements;
} VkMemoryRequirements2;</code></pre>
</div>
</div>
<div class="paragraph">
<p>or the equivalent</p>
</div>
<div id="VkMemoryRequirements2KHR" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_KHR_get_memory_requirements2, VK_NV_ray_tracing with VK_KHR_get_memory_requirements2 or VK_VERSION_1_1
typedef VkMemoryRequirements2 VkMemoryRequirements2KHR;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is a <a href="fundamentals.html#VkStructureType" class="xref page">VkStructureType</a> value identifying this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>memoryRequirements</code> is a <a href="#VkMemoryRequirements">VkMemoryRequirements</a> structure
describing the memory requirements of the resource.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkMemoryRequirements2-sType-sType" href="#VUID-VkMemoryRequirements2-sType-sType"></a> <span class="vuid">VUID-VkMemoryRequirements2-sType-sType</span><br>
 <code>sType</code> <strong>must</strong> be <code>VK_STRUCTURE_TYPE_MEMORY_REQUIREMENTS_2</code></p>
</li>
<li>
<p><a id="VUID-VkMemoryRequirements2-pNext-pNext" href="#VUID-VkMemoryRequirements2-pNext-pNext"></a> <span class="vuid">VUID-VkMemoryRequirements2-pNext-pNext</span><br>
 <code>pNext</code> <strong>must</strong> be <code>NULL</code> or a pointer to a valid instance of <a href="#VkMemoryDedicatedRequirements">VkMemoryDedicatedRequirements</a></p>
</li>
<li>
<p><a id="VUID-VkMemoryRequirements2-sType-unique" href="#VUID-VkMemoryRequirements2-sType-unique"></a> <span class="vuid">VUID-VkMemoryRequirements2-sType-unique</span><br>
 The <code>sType</code> value of each struct in the <code>pNext</code> chain <strong>must</strong> be unique</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>VkMemoryDedicatedRequirements</code> structure is defined as:</p>
</div>
<div id="VkMemoryDedicatedRequirements" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_VERSION_1_1
typedef struct VkMemoryDedicatedRequirements {
    VkStructureType    sType;
    void*              pNext;
    VkBool32           prefersDedicatedAllocation;
    VkBool32           requiresDedicatedAllocation;
} VkMemoryDedicatedRequirements;</code></pre>
</div>
</div>
<div class="paragraph">
<p>or the equivalent</p>
</div>
<div id="VkMemoryDedicatedRequirementsKHR" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_KHR_dedicated_allocation
typedef VkMemoryDedicatedRequirements VkMemoryDedicatedRequirementsKHR;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is a <a href="fundamentals.html#VkStructureType" class="xref page">VkStructureType</a> value identifying this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>prefersDedicatedAllocation</code> specifies that the implementation would
prefer a dedicated allocation for this resource.
The application is still free to suballocate the resource but it <strong>may</strong>
get better performance if a dedicated allocation is used.</p>
</li>
<li>
<p><code>requiresDedicatedAllocation</code> specifies that a dedicated allocation
is required for this resource.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>To determine the dedicated allocation requirements of a buffer or image
resource, add a <a href="#VkMemoryDedicatedRequirements">VkMemoryDedicatedRequirements</a> structure to the
<code>pNext</code> chain of the <a href="#VkMemoryRequirements2">VkMemoryRequirements2</a> structure passed as the
<code>pMemoryRequirements</code> parameter of <a href="#vkGetBufferMemoryRequirements2">vkGetBufferMemoryRequirements2</a>
or <a href="#vkGetImageMemoryRequirements2">vkGetImageMemoryRequirements2</a>, respectively.</p>
</div>
<div class="paragraph">
<p>Constraints on the values returned for buffer resources are:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>requiresDedicatedAllocation</code> <strong>may</strong> be <code>VK_TRUE</code> if the
<code>pNext</code> chain of <a href="#VkBufferCreateInfo">VkBufferCreateInfo</a> for the call to
<code>vkCreateBuffer</code> used to create the buffer being queried included a
<a href="#VkExternalMemoryBufferCreateInfo">VkExternalMemoryBufferCreateInfo</a> structure, and any of the handle
types specified in
<a href="#VkExternalMemoryBufferCreateInfo">VkExternalMemoryBufferCreateInfo</a>::<code>handleTypes</code> requires
dedicated allocation, as reported by
<a href="capabilities.html#vkGetPhysicalDeviceExternalBufferProperties" class="xref page">vkGetPhysicalDeviceExternalBufferProperties</a> in
<code>VkExternalBufferProperties</code>::<code>externalMemoryProperties.externalMemoryFeatures</code>.
Otherwise, <code>requiresDedicatedAllocation</code> will be <code>VK_FALSE</code>.</p>
</li>
<li>
<p>When the implementation sets <code>requiresDedicatedAllocation</code> to
<code>VK_TRUE</code>, it <strong>must</strong> also set <code>prefersDedicatedAllocation</code> to
<code>VK_TRUE</code>.</p>
</li>
<li>
<p>If <code>VK_BUFFER_CREATE_SPARSE_BINDING_BIT</code> was set in
<a href="#VkBufferCreateInfo">VkBufferCreateInfo</a>::<code>flags</code> when <code>buffer</code> was created,
then both <code>prefersDedicatedAllocation</code> and
<code>requiresDedicatedAllocation</code> will be <code>VK_FALSE</code>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Constraints on the values returned for image resources are:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>requiresDedicatedAllocation</code> <strong>may</strong> be <code>VK_TRUE</code> if the
<code>pNext</code> chain of <a href="#VkImageCreateInfo">VkImageCreateInfo</a> for the call to
<a href="#vkCreateImage">vkCreateImage</a> used to create the image being queried included a
<a href="#VkExternalMemoryImageCreateInfo">VkExternalMemoryImageCreateInfo</a> structure, and any of the handle
types specified in
<a href="#VkExternalMemoryImageCreateInfo">VkExternalMemoryImageCreateInfo</a>::<code>handleTypes</code> requires
dedicated allocation, as reported by
<a href="capabilities.html#vkGetPhysicalDeviceImageFormatProperties2" class="xref page">vkGetPhysicalDeviceImageFormatProperties2</a> in
<code>VkExternalImageFormatProperties</code>::<code>externalMemoryProperties.externalMemoryFeatures</code>.</p>
</li>
<li>
<p><code>requiresDedicatedAllocation</code> <strong>may</strong> be <code>VK_TRUE</code> if the image&#8217;s
tiling is <code>VK_IMAGE_TILING_DRM_FORMAT_MODIFIER_EXT</code>.</p>
</li>
<li>
<p><code>requiresDedicatedAllocation</code> will
otherwise
be <code>VK_FALSE</code></p>
</li>
<li>
<p>If <code>VK_IMAGE_CREATE_SPARSE_BINDING_BIT</code> was set in
<a href="#VkImageCreateInfo">VkImageCreateInfo</a>::<code>flags</code> when <code>image</code> was created, then
both <code>prefersDedicatedAllocation</code> and
<code>requiresDedicatedAllocation</code> will be <code>VK_FALSE</code>.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkMemoryDedicatedRequirements-sType-sType" href="#VUID-VkMemoryDedicatedRequirements-sType-sType"></a> <span class="vuid">VUID-VkMemoryDedicatedRequirements-sType-sType</span><br>
 <code>sType</code> <strong>must</strong> be <code>VK_STRUCTURE_TYPE_MEMORY_DEDICATED_REQUIREMENTS</code></p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>To attach memory to a buffer object, call:</p>
</div>
<div id="vkBindBufferMemory" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_VERSION_1_0
VkResult vkBindBufferMemory(
    VkDevice                                    device,
    VkBuffer                                    buffer,
    VkDeviceMemory                              memory,
    VkDeviceSize                                memoryOffset);</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>device</code> is the logical device that owns the buffer and memory.</p>
</li>
<li>
<p><code>buffer</code> is the buffer to be attached to memory.</p>
</li>
<li>
<p><code>memory</code> is a <a href="memory.html#VkDeviceMemory" class="xref page">VkDeviceMemory</a> object describing the device
memory to attach.</p>
</li>
<li>
<p><code>memoryOffset</code> is the start offset of the region of <code>memory</code>
which is to be bound to the buffer.
The number of bytes returned in the
<code>VkMemoryRequirements</code>::<code>size</code> member in <code>memory</code>, starting
from <code>memoryOffset</code> bytes, will be bound to the specified buffer.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><code>vkBindBufferMemory</code> is equivalent to passing the same parameters
through <a href="#VkBindBufferMemoryInfo">VkBindBufferMemoryInfo</a> to <a href="#vkBindBufferMemory2">vkBindBufferMemory2</a>.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkBindBufferMemory-buffer-07459" href="#VUID-vkBindBufferMemory-buffer-07459"></a> <span class="vuid">VUID-vkBindBufferMemory-buffer-07459</span><br>

<code>buffer</code> <strong>must</strong> not have been bound to a memory object</p>
</li>
<li>
<p><a id="VUID-vkBindBufferMemory-buffer-01030" href="#VUID-vkBindBufferMemory-buffer-01030"></a> <span class="vuid">VUID-vkBindBufferMemory-buffer-01030</span><br>

<code>buffer</code> <strong>must</strong> not have been created with any sparse memory binding
flags</p>
</li>
<li>
<p><a id="VUID-vkBindBufferMemory-memoryOffset-01031" href="#VUID-vkBindBufferMemory-memoryOffset-01031"></a> <span class="vuid">VUID-vkBindBufferMemory-memoryOffset-01031</span><br>

<code>memoryOffset</code> <strong>must</strong> be less than the size of <code>memory</code></p>
</li>
<li>
<p><a id="VUID-vkBindBufferMemory-memory-01035" href="#VUID-vkBindBufferMemory-memory-01035"></a> <span class="vuid">VUID-vkBindBufferMemory-memory-01035</span><br>

<code>memory</code> <strong>must</strong> have been allocated using one of the memory types
allowed in the <code>memoryTypeBits</code> member of the
<code>VkMemoryRequirements</code> structure returned from a call to
<code>vkGetBufferMemoryRequirements</code> with <code>buffer</code></p>
</li>
<li>
<p><a id="VUID-vkBindBufferMemory-memoryOffset-01036" href="#VUID-vkBindBufferMemory-memoryOffset-01036"></a> <span class="vuid">VUID-vkBindBufferMemory-memoryOffset-01036</span><br>

<code>memoryOffset</code> <strong>must</strong> be an integer multiple of the <code>alignment</code>
member of the <code>VkMemoryRequirements</code> structure returned from a call
to <code>vkGetBufferMemoryRequirements</code> with <code>buffer</code></p>
</li>
<li>
<p><a id="VUID-vkBindBufferMemory-size-01037" href="#VUID-vkBindBufferMemory-size-01037"></a> <span class="vuid">VUID-vkBindBufferMemory-size-01037</span><br>

The <code>size</code> member of the <code>VkMemoryRequirements</code> structure
returned from a call to <code>vkGetBufferMemoryRequirements</code> with
<code>buffer</code> <strong>must</strong> be less than or equal to the size of <code>memory</code>
minus <code>memoryOffset</code></p>
</li>
<li>
<p><a id="VUID-vkBindBufferMemory-buffer-01444" href="#VUID-vkBindBufferMemory-buffer-01444"></a> <span class="vuid">VUID-vkBindBufferMemory-buffer-01444</span><br>

If <code>buffer</code> requires a dedicated allocation (as reported by
<a href="#vkGetBufferMemoryRequirements2">vkGetBufferMemoryRequirements2</a> in
<a href="#VkMemoryDedicatedRequirements">VkMemoryDedicatedRequirements</a>::<code>requiresDedicatedAllocation</code>
for <code>buffer</code>), <code>memory</code> <strong>must</strong> have been allocated with
<a href="memory.html#VkMemoryDedicatedAllocateInfo" class="xref page">VkMemoryDedicatedAllocateInfo</a>::<code>buffer</code> equal to <code>buffer</code></p>
</li>
<li>
<p><a id="VUID-vkBindBufferMemory-memory-01508" href="#VUID-vkBindBufferMemory-memory-01508"></a> <span class="vuid">VUID-vkBindBufferMemory-memory-01508</span><br>

If the <code>VkMemoryAllocateInfo</code> provided when <code>memory</code> was
allocated included a <a href="memory.html#VkMemoryDedicatedAllocateInfo" class="xref page">VkMemoryDedicatedAllocateInfo</a> structure in
its <code>pNext</code> chain, and
<a href="memory.html#VkMemoryDedicatedAllocateInfo" class="xref page">VkMemoryDedicatedAllocateInfo</a>::<code>buffer</code> was not
<a href="../appendices/boilerplate.html#VK_NULL_HANDLE" class="xref page">VK_NULL_HANDLE</a>, then <code>buffer</code> <strong>must</strong> equal
<a href="memory.html#VkMemoryDedicatedAllocateInfo" class="xref page">VkMemoryDedicatedAllocateInfo</a>::<code>buffer</code>, and
<code>memoryOffset</code> <strong>must</strong> be zero</p>
</li>
<li>
<p><a id="VUID-vkBindBufferMemory-None-01898" href="#VUID-vkBindBufferMemory-None-01898"></a> <span class="vuid">VUID-vkBindBufferMemory-None-01898</span><br>

If <code>buffer</code> was created with the
<code>VK_BUFFER_CREATE_PROTECTED_BIT</code> bit set, the buffer <strong>must</strong> be bound
to a memory object allocated with a memory type that reports
<code>VK_MEMORY_PROPERTY_PROTECTED_BIT</code></p>
</li>
<li>
<p><a id="VUID-vkBindBufferMemory-None-01899" href="#VUID-vkBindBufferMemory-None-01899"></a> <span class="vuid">VUID-vkBindBufferMemory-None-01899</span><br>

If <code>buffer</code> was created with the
<code>VK_BUFFER_CREATE_PROTECTED_BIT</code> bit not set, the buffer <strong>must</strong> not
be bound to a memory object allocated with a memory type that reports
<code>VK_MEMORY_PROPERTY_PROTECTED_BIT</code></p>
</li>
<li>
<p><a id="VUID-vkBindBufferMemory-buffer-01038" href="#VUID-vkBindBufferMemory-buffer-01038"></a> <span class="vuid">VUID-vkBindBufferMemory-buffer-01038</span><br>

If <code>buffer</code> was created with
<a href="#VkDedicatedAllocationBufferCreateInfoNV">VkDedicatedAllocationBufferCreateInfoNV</a>::<code>dedicatedAllocation</code>
equal to <code>VK_TRUE</code>, <code>memory</code> <strong>must</strong> have been allocated with
<a href="memory.html#VkDedicatedAllocationMemoryAllocateInfoNV" class="xref page">VkDedicatedAllocationMemoryAllocateInfoNV</a>::<code>buffer</code> equal to a
buffer handle created with identical creation parameters to <code>buffer</code>
and <code>memoryOffset</code> <strong>must</strong> be zero</p>
</li>
<li>
<p><a id="VUID-vkBindBufferMemory-apiVersion-07920" href="#VUID-vkBindBufferMemory-apiVersion-07920"></a> <span class="vuid">VUID-vkBindBufferMemory-apiVersion-07920</span><br>

    If
    the <a href="../appendices/extensions.html#VK_KHR_dedicated_allocation" class="xref page">VK_KHR_dedicated_allocation</a> extension is not enabled,
    <a href="devsandqueues.html#VkPhysicalDeviceProperties" class="xref page">VkPhysicalDeviceProperties</a>::<code>apiVersion</code> is less than Vulkan
    1.1,
and
    <code>buffer</code> was not created with
    <a href="#VkDedicatedAllocationBufferCreateInfoNV">VkDedicatedAllocationBufferCreateInfoNV</a>::<code>dedicatedAllocation</code>
    equal to <code>VK_TRUE</code>, <code>memory</code> <strong>must</strong> not have been allocated
    dedicated for a specific buffer or image</p>
</li>
<li>
<p><a id="VUID-vkBindBufferMemory-memory-02726" href="#VUID-vkBindBufferMemory-memory-02726"></a> <span class="vuid">VUID-vkBindBufferMemory-memory-02726</span><br>

If the value of <a href="memory.html#VkExportMemoryAllocateInfo" class="xref page">VkExportMemoryAllocateInfo</a>::<code>handleTypes</code> used
to allocate <code>memory</code> is not <code>0</code>, it <strong>must</strong> include at least one of
the handles set in
<a href="#VkExternalMemoryBufferCreateInfo">VkExternalMemoryBufferCreateInfo</a>::<code>handleTypes</code> when
<code>buffer</code> was created</p>
</li>
<li>
<p><a id="VUID-vkBindBufferMemory-memory-02985" href="#VUID-vkBindBufferMemory-memory-02985"></a> <span class="vuid">VUID-vkBindBufferMemory-memory-02985</span><br>

If <code>memory</code> was allocated by a memory import operation,
that is not <a href="memory.html#VkImportAndroidHardwareBufferInfoANDROID" class="xref page">VkImportAndroidHardwareBufferInfoANDROID</a> with a
non-<code>NULL</code> <code>buffer</code> value,
the external handle type of the imported memory <strong>must</strong> also have been set
in <a href="#VkExternalMemoryBufferCreateInfo">VkExternalMemoryBufferCreateInfo</a>::<code>handleTypes</code> when
<code>buffer</code> was created</p>
</li>
<li>
<p><a id="VUID-vkBindBufferMemory-memory-02986" href="#VUID-vkBindBufferMemory-memory-02986"></a> <span class="vuid">VUID-vkBindBufferMemory-memory-02986</span><br>

If <code>memory</code> was allocated with the
<a href="memory.html#VkImportAndroidHardwareBufferInfoANDROID" class="xref page">VkImportAndroidHardwareBufferInfoANDROID</a> memory import operation
with a non-<code>NULL</code> <code>buffer</code> value,
<code>VK_EXTERNAL_MEMORY_HANDLE_TYPE_ANDROID_HARDWARE_BUFFER_BIT_ANDROID</code>
<strong>must</strong> also have been set in
<a href="#VkExternalMemoryBufferCreateInfo">VkExternalMemoryBufferCreateInfo</a>::<code>handleTypes</code> when
<code>buffer</code> was created</p>
</li>
<li>
<p><a id="VUID-vkBindBufferMemory-bufferDeviceAddress-03339" href="#VUID-vkBindBufferMemory-bufferDeviceAddress-03339"></a> <span class="vuid">VUID-vkBindBufferMemory-bufferDeviceAddress-03339</span><br>

If the
<a href="features.html#VkPhysicalDeviceBufferDeviceAddressFeatures" class="xref page">VkPhysicalDeviceBufferDeviceAddressFeatures</a>::<code>bufferDeviceAddress</code>
feature is enabled and <code>buffer</code> was created with the
<code>VK_BUFFER_USAGE_SHADER_DEVICE_ADDRESS_BIT</code> bit set, <code>memory</code>
<strong>must</strong> have been allocated with the
<code>VK_MEMORY_ALLOCATE_DEVICE_ADDRESS_BIT</code> bit set</p>
</li>
<li>
<p><a id="VUID-vkBindBufferMemory-bufferDeviceAddressCaptureReplay-09200" href="#VUID-vkBindBufferMemory-bufferDeviceAddressCaptureReplay-09200"></a> <span class="vuid">VUID-vkBindBufferMemory-bufferDeviceAddressCaptureReplay-09200</span><br>

If the
<a href="features.html#VkPhysicalDeviceBufferDeviceAddressFeatures" class="xref page">VkPhysicalDeviceBufferDeviceAddressFeatures</a>::<code>bufferDeviceAddressCaptureReplay</code>
feature is enabled and <code>buffer</code> was created with the
<code>VK_BUFFER_CREATE_DEVICE_ADDRESS_CAPTURE_REPLAY_BIT</code> bit set,
<code>memory</code> <strong>must</strong> have been allocated with the
<code>VK_MEMORY_ALLOCATE_DEVICE_ADDRESS_CAPTURE_REPLAY_BIT</code> bit set</p>
</li>
<li>
<p><a id="VUID-vkBindBufferMemory-buffer-06408" href="#VUID-vkBindBufferMemory-buffer-06408"></a> <span class="vuid">VUID-vkBindBufferMemory-buffer-06408</span><br>

If <code>buffer</code> was created with
<a href="#VkBufferCollectionBufferCreateInfoFUCHSIA">VkBufferCollectionBufferCreateInfoFUCHSIA</a> chained to
<a href="#VkBufferCreateInfo">VkBufferCreateInfo</a>::<code>pNext</code>, <code>memory</code> <strong>must</strong> be allocated
with a <a href="#VkImportMemoryBufferCollectionFUCHSIA">VkImportMemoryBufferCollectionFUCHSIA</a> chained to
<a href="memory.html#VkMemoryAllocateInfo" class="xref page">VkMemoryAllocateInfo</a>::<code>pNext</code></p>
</li>
<li>
<p><a id="VUID-vkBindBufferMemory-descriptorBufferCaptureReplay-08112" href="#VUID-vkBindBufferMemory-descriptorBufferCaptureReplay-08112"></a> <span class="vuid">VUID-vkBindBufferMemory-descriptorBufferCaptureReplay-08112</span><br>

If the <code>buffer</code> was created with the
<code>VK_BUFFER_CREATE_DESCRIPTOR_BUFFER_CAPTURE_REPLAY_BIT_EXT</code> bit set,
<code>memory</code> <strong>must</strong> have been allocated with the
<code>VK_MEMORY_ALLOCATE_DEVICE_ADDRESS_BIT</code> bit set</p>
</li>
<li>
<p><a id="VUID-vkBindBufferMemory-buffer-09201" href="#VUID-vkBindBufferMemory-buffer-09201"></a> <span class="vuid">VUID-vkBindBufferMemory-buffer-09201</span><br>

If the <code>buffer</code> was created with the
<code>VK_BUFFER_CREATE_DESCRIPTOR_BUFFER_CAPTURE_REPLAY_BIT_EXT</code> bit set,
<code>memory</code> <strong>must</strong> have been allocated with the
<code>VK_MEMORY_ALLOCATE_DEVICE_ADDRESS_CAPTURE_REPLAY_BIT</code> bit set</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkBindBufferMemory-device-parameter" href="#VUID-vkBindBufferMemory-device-parameter"></a> <span class="vuid">VUID-vkBindBufferMemory-device-parameter</span><br>
 <code>device</code> <strong>must</strong> be a valid <a href="devsandqueues.html#VkDevice" class="xref page">VkDevice</a> handle</p>
</li>
<li>
<p><a id="VUID-vkBindBufferMemory-buffer-parameter" href="#VUID-vkBindBufferMemory-buffer-parameter"></a> <span class="vuid">VUID-vkBindBufferMemory-buffer-parameter</span><br>
 <code>buffer</code> <strong>must</strong> be a valid <a href="#VkBuffer">VkBuffer</a> handle</p>
</li>
<li>
<p><a id="VUID-vkBindBufferMemory-memory-parameter" href="#VUID-vkBindBufferMemory-memory-parameter"></a> <span class="vuid">VUID-vkBindBufferMemory-memory-parameter</span><br>
 <code>memory</code> <strong>must</strong> be a valid <a href="memory.html#VkDeviceMemory" class="xref page">VkDeviceMemory</a> handle</p>
</li>
<li>
<p><a id="VUID-vkBindBufferMemory-buffer-parent" href="#VUID-vkBindBufferMemory-buffer-parent"></a> <span class="vuid">VUID-vkBindBufferMemory-buffer-parent</span><br>
 <code>buffer</code> <strong>must</strong> have been created, allocated, or retrieved from <code>device</code></p>
</li>
<li>
<p><a id="VUID-vkBindBufferMemory-memory-parent" href="#VUID-vkBindBufferMemory-memory-parent"></a> <span class="vuid">VUID-vkBindBufferMemory-memory-parent</span><br>
 <code>memory</code> <strong>must</strong> have been created, allocated, or retrieved from <code>device</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Host Synchronization</div>
<div class="ulist">
<ul>
<li>
<p>Host access to <code>buffer</code> <strong>must</strong> be externally synchronized</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Return Codes</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><a href="fundamentals.html#fundamentals-successcodes" class="xref page">Success</a></dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><code>VK_SUCCESS</code></p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1"><a href="fundamentals.html#fundamentals-errorcodes" class="xref page">Failure</a></dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><code>VK_ERROR_OUT_OF_HOST_MEMORY</code></p>
</li>
<li>
<p><code>VK_ERROR_OUT_OF_DEVICE_MEMORY</code></p>
</li>
<li>
<p><code>VK_ERROR_INVALID_OPAQUE_CAPTURE_ADDRESS_KHR</code></p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>To attach memory to buffer objects for one or more buffers at a time, call:</p>
</div>
<div id="vkBindBufferMemory2" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_VERSION_1_1
VkResult vkBindBufferMemory2(
    VkDevice                                    device,
    uint32_t                                    bindInfoCount,
    const VkBindBufferMemoryInfo*               pBindInfos);</code></pre>
</div>
</div>
<div class="paragraph">
<p>or the equivalent command</p>
</div>
<div id="vkBindBufferMemory2KHR" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_KHR_bind_memory2
VkResult vkBindBufferMemory2KHR(
    VkDevice                                    device,
    uint32_t                                    bindInfoCount,
    const VkBindBufferMemoryInfo*               pBindInfos);</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>device</code> is the logical device that owns the buffers and memory.</p>
</li>
<li>
<p><code>bindInfoCount</code> is the number of elements in <code>pBindInfos</code>.</p>
</li>
<li>
<p><code>pBindInfos</code> is a pointer to an array of <code>bindInfoCount</code>
<a href="#VkBindBufferMemoryInfo">VkBindBufferMemoryInfo</a> structures describing buffers and memory to
bind.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>On some implementations, it <strong>may</strong> be more efficient to batch memory bindings
into a single command.</p>
</div>
<div class="paragraph">
<p>If the <a href="features.html#features-maintenance6" class="xref page"><code>maintenance6</code></a> feature is enabled,
this command <strong>must</strong> attempt to perform all of the memory binding operations
described by <code>pBindInfos</code>, and <strong>must</strong> not early exit on the first
failure.</p>
</div>
<div class="paragraph">
<p>If any of the memory binding operations described by <code>pBindInfos</code> fail,
the <a href="fundamentals.html#VkResult" class="xref page">VkResult</a> returned by this command <strong>must</strong> be the return value of any
one of the memory binding operations which did not return <code>VK_SUCCESS</code>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="title">Note</div>
<div class="paragraph">
<p>If the <code>vkBindBufferMemory2</code> command failed,
<a href="#VkBindMemoryStatusKHR">VkBindMemoryStatusKHR</a> structures were not included in the <code>pNext</code>
chains of each element of <code>pBindInfos</code>,
and <code>bindInfoCount</code> was greater than one, then the buffers referenced by
<code>pBindInfos</code> will be in an indeterminate state, and must not be used.</p>
</div>
<div class="paragraph">
<p>Applications should destroy these buffers.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkBindBufferMemory2-device-parameter" href="#VUID-vkBindBufferMemory2-device-parameter"></a> <span class="vuid">VUID-vkBindBufferMemory2-device-parameter</span><br>
 <code>device</code> <strong>must</strong> be a valid <a href="devsandqueues.html#VkDevice" class="xref page">VkDevice</a> handle</p>
</li>
<li>
<p><a id="VUID-vkBindBufferMemory2-pBindInfos-parameter" href="#VUID-vkBindBufferMemory2-pBindInfos-parameter"></a> <span class="vuid">VUID-vkBindBufferMemory2-pBindInfos-parameter</span><br>
 <code>pBindInfos</code> <strong>must</strong> be a valid pointer to an array of <code>bindInfoCount</code> valid <a href="#VkBindBufferMemoryInfo">VkBindBufferMemoryInfo</a> structures</p>
</li>
<li>
<p><a id="VUID-vkBindBufferMemory2-bindInfoCount-arraylength" href="#VUID-vkBindBufferMemory2-bindInfoCount-arraylength"></a> <span class="vuid">VUID-vkBindBufferMemory2-bindInfoCount-arraylength</span><br>
 <code>bindInfoCount</code> <strong>must</strong> be greater than <code>0</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Return Codes</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><a href="fundamentals.html#fundamentals-successcodes" class="xref page">Success</a></dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><code>VK_SUCCESS</code></p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1"><a href="fundamentals.html#fundamentals-errorcodes" class="xref page">Failure</a></dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><code>VK_ERROR_OUT_OF_HOST_MEMORY</code></p>
</li>
<li>
<p><code>VK_ERROR_OUT_OF_DEVICE_MEMORY</code></p>
</li>
<li>
<p><code>VK_ERROR_INVALID_OPAQUE_CAPTURE_ADDRESS_KHR</code></p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p><code>VkBindBufferMemoryInfo</code> contains members corresponding to the
parameters of <a href="#vkBindBufferMemory">vkBindBufferMemory</a>.</p>
</div>
<div class="paragraph">
<p>The <code>VkBindBufferMemoryInfo</code> structure is defined as:</p>
</div>
<div id="VkBindBufferMemoryInfo" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_VERSION_1_1
typedef struct VkBindBufferMemoryInfo {
    VkStructureType    sType;
    const void*        pNext;
    VkBuffer           buffer;
    VkDeviceMemory     memory;
    VkDeviceSize       memoryOffset;
} VkBindBufferMemoryInfo;</code></pre>
</div>
</div>
<div class="paragraph">
<p>or the equivalent</p>
</div>
<div id="VkBindBufferMemoryInfoKHR" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_KHR_bind_memory2
typedef VkBindBufferMemoryInfo VkBindBufferMemoryInfoKHR;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is a <a href="fundamentals.html#VkStructureType" class="xref page">VkStructureType</a> value identifying this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>buffer</code> is the buffer to be attached to memory.</p>
</li>
<li>
<p><code>memory</code> is a <a href="memory.html#VkDeviceMemory" class="xref page">VkDeviceMemory</a> object describing the device
memory to attach.</p>
</li>
<li>
<p><code>memoryOffset</code> is the start offset of the region of <code>memory</code>
which is to be bound to the buffer.
The number of bytes returned in the
<code>VkMemoryRequirements</code>::<code>size</code> member in <code>memory</code>, starting
from <code>memoryOffset</code> bytes, will be bound to the specified buffer.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkBindBufferMemoryInfo-buffer-07459" href="#VUID-VkBindBufferMemoryInfo-buffer-07459"></a> <span class="vuid">VUID-VkBindBufferMemoryInfo-buffer-07459</span><br>

<code>buffer</code> <strong>must</strong> not have been bound to a memory object</p>
</li>
<li>
<p><a id="VUID-VkBindBufferMemoryInfo-buffer-01030" href="#VUID-VkBindBufferMemoryInfo-buffer-01030"></a> <span class="vuid">VUID-VkBindBufferMemoryInfo-buffer-01030</span><br>

<code>buffer</code> <strong>must</strong> not have been created with any sparse memory binding
flags</p>
</li>
<li>
<p><a id="VUID-VkBindBufferMemoryInfo-memoryOffset-01031" href="#VUID-VkBindBufferMemoryInfo-memoryOffset-01031"></a> <span class="vuid">VUID-VkBindBufferMemoryInfo-memoryOffset-01031</span><br>

<code>memoryOffset</code> <strong>must</strong> be less than the size of <code>memory</code></p>
</li>
<li>
<p><a id="VUID-VkBindBufferMemoryInfo-memory-01035" href="#VUID-VkBindBufferMemoryInfo-memory-01035"></a> <span class="vuid">VUID-VkBindBufferMemoryInfo-memory-01035</span><br>

<code>memory</code> <strong>must</strong> have been allocated using one of the memory types
allowed in the <code>memoryTypeBits</code> member of the
<code>VkMemoryRequirements</code> structure returned from a call to
<code>vkGetBufferMemoryRequirements</code> with <code>buffer</code></p>
</li>
<li>
<p><a id="VUID-VkBindBufferMemoryInfo-memoryOffset-01036" href="#VUID-VkBindBufferMemoryInfo-memoryOffset-01036"></a> <span class="vuid">VUID-VkBindBufferMemoryInfo-memoryOffset-01036</span><br>

<code>memoryOffset</code> <strong>must</strong> be an integer multiple of the <code>alignment</code>
member of the <code>VkMemoryRequirements</code> structure returned from a call
to <code>vkGetBufferMemoryRequirements</code> with <code>buffer</code></p>
</li>
<li>
<p><a id="VUID-VkBindBufferMemoryInfo-size-01037" href="#VUID-VkBindBufferMemoryInfo-size-01037"></a> <span class="vuid">VUID-VkBindBufferMemoryInfo-size-01037</span><br>

The <code>size</code> member of the <code>VkMemoryRequirements</code> structure
returned from a call to <code>vkGetBufferMemoryRequirements</code> with
<code>buffer</code> <strong>must</strong> be less than or equal to the size of <code>memory</code>
minus <code>memoryOffset</code></p>
</li>
<li>
<p><a id="VUID-VkBindBufferMemoryInfo-buffer-01444" href="#VUID-VkBindBufferMemoryInfo-buffer-01444"></a> <span class="vuid">VUID-VkBindBufferMemoryInfo-buffer-01444</span><br>

If <code>buffer</code> requires a dedicated allocation (as reported by
<a href="#vkGetBufferMemoryRequirements2">vkGetBufferMemoryRequirements2</a> in
<a href="#VkMemoryDedicatedRequirements">VkMemoryDedicatedRequirements</a>::<code>requiresDedicatedAllocation</code>
for <code>buffer</code>), <code>memory</code> <strong>must</strong> have been allocated with
<a href="memory.html#VkMemoryDedicatedAllocateInfo" class="xref page">VkMemoryDedicatedAllocateInfo</a>::<code>buffer</code> equal to <code>buffer</code></p>
</li>
<li>
<p><a id="VUID-VkBindBufferMemoryInfo-memory-01508" href="#VUID-VkBindBufferMemoryInfo-memory-01508"></a> <span class="vuid">VUID-VkBindBufferMemoryInfo-memory-01508</span><br>

If the <code>VkMemoryAllocateInfo</code> provided when <code>memory</code> was
allocated included a <a href="memory.html#VkMemoryDedicatedAllocateInfo" class="xref page">VkMemoryDedicatedAllocateInfo</a> structure in
its <code>pNext</code> chain, and
<a href="memory.html#VkMemoryDedicatedAllocateInfo" class="xref page">VkMemoryDedicatedAllocateInfo</a>::<code>buffer</code> was not
<a href="../appendices/boilerplate.html#VK_NULL_HANDLE" class="xref page">VK_NULL_HANDLE</a>, then <code>buffer</code> <strong>must</strong> equal
<a href="memory.html#VkMemoryDedicatedAllocateInfo" class="xref page">VkMemoryDedicatedAllocateInfo</a>::<code>buffer</code>, and
<code>memoryOffset</code> <strong>must</strong> be zero</p>
</li>
<li>
<p><a id="VUID-VkBindBufferMemoryInfo-None-01898" href="#VUID-VkBindBufferMemoryInfo-None-01898"></a> <span class="vuid">VUID-VkBindBufferMemoryInfo-None-01898</span><br>

If <code>buffer</code> was created with the
<code>VK_BUFFER_CREATE_PROTECTED_BIT</code> bit set, the buffer <strong>must</strong> be bound
to a memory object allocated with a memory type that reports
<code>VK_MEMORY_PROPERTY_PROTECTED_BIT</code></p>
</li>
<li>
<p><a id="VUID-VkBindBufferMemoryInfo-None-01899" href="#VUID-VkBindBufferMemoryInfo-None-01899"></a> <span class="vuid">VUID-VkBindBufferMemoryInfo-None-01899</span><br>

If <code>buffer</code> was created with the
<code>VK_BUFFER_CREATE_PROTECTED_BIT</code> bit not set, the buffer <strong>must</strong> not
be bound to a memory object allocated with a memory type that reports
<code>VK_MEMORY_PROPERTY_PROTECTED_BIT</code></p>
</li>
<li>
<p><a id="VUID-VkBindBufferMemoryInfo-buffer-01038" href="#VUID-VkBindBufferMemoryInfo-buffer-01038"></a> <span class="vuid">VUID-VkBindBufferMemoryInfo-buffer-01038</span><br>

If <code>buffer</code> was created with
<a href="#VkDedicatedAllocationBufferCreateInfoNV">VkDedicatedAllocationBufferCreateInfoNV</a>::<code>dedicatedAllocation</code>
equal to <code>VK_TRUE</code>, <code>memory</code> <strong>must</strong> have been allocated with
<a href="memory.html#VkDedicatedAllocationMemoryAllocateInfoNV" class="xref page">VkDedicatedAllocationMemoryAllocateInfoNV</a>::<code>buffer</code> equal to a
buffer handle created with identical creation parameters to <code>buffer</code>
and <code>memoryOffset</code> <strong>must</strong> be zero</p>
</li>
<li>
<p><a id="VUID-VkBindBufferMemoryInfo-apiVersion-07920" href="#VUID-VkBindBufferMemoryInfo-apiVersion-07920"></a> <span class="vuid">VUID-VkBindBufferMemoryInfo-apiVersion-07920</span><br>

    If
    the <a href="../appendices/extensions.html#VK_KHR_dedicated_allocation" class="xref page">VK_KHR_dedicated_allocation</a> extension is not enabled,
    <a href="devsandqueues.html#VkPhysicalDeviceProperties" class="xref page">VkPhysicalDeviceProperties</a>::<code>apiVersion</code> is less than Vulkan
    1.1,
and
    <code>buffer</code> was not created with
    <a href="#VkDedicatedAllocationBufferCreateInfoNV">VkDedicatedAllocationBufferCreateInfoNV</a>::<code>dedicatedAllocation</code>
    equal to <code>VK_TRUE</code>, <code>memory</code> <strong>must</strong> not have been allocated
    dedicated for a specific buffer or image</p>
</li>
<li>
<p><a id="VUID-VkBindBufferMemoryInfo-memory-02726" href="#VUID-VkBindBufferMemoryInfo-memory-02726"></a> <span class="vuid">VUID-VkBindBufferMemoryInfo-memory-02726</span><br>

If the value of <a href="memory.html#VkExportMemoryAllocateInfo" class="xref page">VkExportMemoryAllocateInfo</a>::<code>handleTypes</code> used
to allocate <code>memory</code> is not <code>0</code>, it <strong>must</strong> include at least one of
the handles set in
<a href="#VkExternalMemoryBufferCreateInfo">VkExternalMemoryBufferCreateInfo</a>::<code>handleTypes</code> when
<code>buffer</code> was created</p>
</li>
<li>
<p><a id="VUID-VkBindBufferMemoryInfo-memory-02985" href="#VUID-VkBindBufferMemoryInfo-memory-02985"></a> <span class="vuid">VUID-VkBindBufferMemoryInfo-memory-02985</span><br>

If <code>memory</code> was allocated by a memory import operation,
that is not <a href="memory.html#VkImportAndroidHardwareBufferInfoANDROID" class="xref page">VkImportAndroidHardwareBufferInfoANDROID</a> with a
non-<code>NULL</code> <code>buffer</code> value,
the external handle type of the imported memory <strong>must</strong> also have been set
in <a href="#VkExternalMemoryBufferCreateInfo">VkExternalMemoryBufferCreateInfo</a>::<code>handleTypes</code> when
<code>buffer</code> was created</p>
</li>
<li>
<p><a id="VUID-VkBindBufferMemoryInfo-memory-02986" href="#VUID-VkBindBufferMemoryInfo-memory-02986"></a> <span class="vuid">VUID-VkBindBufferMemoryInfo-memory-02986</span><br>

If <code>memory</code> was allocated with the
<a href="memory.html#VkImportAndroidHardwareBufferInfoANDROID" class="xref page">VkImportAndroidHardwareBufferInfoANDROID</a> memory import operation
with a non-<code>NULL</code> <code>buffer</code> value,
<code>VK_EXTERNAL_MEMORY_HANDLE_TYPE_ANDROID_HARDWARE_BUFFER_BIT_ANDROID</code>
<strong>must</strong> also have been set in
<a href="#VkExternalMemoryBufferCreateInfo">VkExternalMemoryBufferCreateInfo</a>::<code>handleTypes</code> when
<code>buffer</code> was created</p>
</li>
<li>
<p><a id="VUID-VkBindBufferMemoryInfo-bufferDeviceAddress-03339" href="#VUID-VkBindBufferMemoryInfo-bufferDeviceAddress-03339"></a> <span class="vuid">VUID-VkBindBufferMemoryInfo-bufferDeviceAddress-03339</span><br>

If the
<a href="features.html#VkPhysicalDeviceBufferDeviceAddressFeatures" class="xref page">VkPhysicalDeviceBufferDeviceAddressFeatures</a>::<code>bufferDeviceAddress</code>
feature is enabled and <code>buffer</code> was created with the
<code>VK_BUFFER_USAGE_SHADER_DEVICE_ADDRESS_BIT</code> bit set, <code>memory</code>
<strong>must</strong> have been allocated with the
<code>VK_MEMORY_ALLOCATE_DEVICE_ADDRESS_BIT</code> bit set</p>
</li>
<li>
<p><a id="VUID-VkBindBufferMemoryInfo-bufferDeviceAddressCaptureReplay-09200" href="#VUID-VkBindBufferMemoryInfo-bufferDeviceAddressCaptureReplay-09200"></a> <span class="vuid">VUID-VkBindBufferMemoryInfo-bufferDeviceAddressCaptureReplay-09200</span><br>

If the
<a href="features.html#VkPhysicalDeviceBufferDeviceAddressFeatures" class="xref page">VkPhysicalDeviceBufferDeviceAddressFeatures</a>::<code>bufferDeviceAddressCaptureReplay</code>
feature is enabled and <code>buffer</code> was created with the
<code>VK_BUFFER_CREATE_DEVICE_ADDRESS_CAPTURE_REPLAY_BIT</code> bit set,
<code>memory</code> <strong>must</strong> have been allocated with the
<code>VK_MEMORY_ALLOCATE_DEVICE_ADDRESS_CAPTURE_REPLAY_BIT</code> bit set</p>
</li>
<li>
<p><a id="VUID-VkBindBufferMemoryInfo-buffer-06408" href="#VUID-VkBindBufferMemoryInfo-buffer-06408"></a> <span class="vuid">VUID-VkBindBufferMemoryInfo-buffer-06408</span><br>

If <code>buffer</code> was created with
<a href="#VkBufferCollectionBufferCreateInfoFUCHSIA">VkBufferCollectionBufferCreateInfoFUCHSIA</a> chained to
<a href="#VkBufferCreateInfo">VkBufferCreateInfo</a>::<code>pNext</code>, <code>memory</code> <strong>must</strong> be allocated
with a <a href="#VkImportMemoryBufferCollectionFUCHSIA">VkImportMemoryBufferCollectionFUCHSIA</a> chained to
<a href="memory.html#VkMemoryAllocateInfo" class="xref page">VkMemoryAllocateInfo</a>::<code>pNext</code></p>
</li>
<li>
<p><a id="VUID-VkBindBufferMemoryInfo-descriptorBufferCaptureReplay-08112" href="#VUID-VkBindBufferMemoryInfo-descriptorBufferCaptureReplay-08112"></a> <span class="vuid">VUID-VkBindBufferMemoryInfo-descriptorBufferCaptureReplay-08112</span><br>

If the <code>buffer</code> was created with the
<code>VK_BUFFER_CREATE_DESCRIPTOR_BUFFER_CAPTURE_REPLAY_BIT_EXT</code> bit set,
<code>memory</code> <strong>must</strong> have been allocated with the
<code>VK_MEMORY_ALLOCATE_DEVICE_ADDRESS_BIT</code> bit set</p>
</li>
<li>
<p><a id="VUID-VkBindBufferMemoryInfo-buffer-09201" href="#VUID-VkBindBufferMemoryInfo-buffer-09201"></a> <span class="vuid">VUID-VkBindBufferMemoryInfo-buffer-09201</span><br>

If the <code>buffer</code> was created with the
<code>VK_BUFFER_CREATE_DESCRIPTOR_BUFFER_CAPTURE_REPLAY_BIT_EXT</code> bit set,
<code>memory</code> <strong>must</strong> have been allocated with the
<code>VK_MEMORY_ALLOCATE_DEVICE_ADDRESS_CAPTURE_REPLAY_BIT</code> bit set</p>
</li>
<li>
<p><a id="VUID-VkBindBufferMemoryInfo-pNext-01605" href="#VUID-VkBindBufferMemoryInfo-pNext-01605"></a> <span class="vuid">VUID-VkBindBufferMemoryInfo-pNext-01605</span><br>

If the <code>pNext</code> chain includes a
<a href="#VkBindBufferMemoryDeviceGroupInfo">VkBindBufferMemoryDeviceGroupInfo</a> structure, all instances of
<code>memory</code> specified by
<a href="#VkBindBufferMemoryDeviceGroupInfo">VkBindBufferMemoryDeviceGroupInfo</a>::<code>pDeviceIndices</code> <strong>must</strong> have
been allocated</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkBindBufferMemoryInfo-sType-sType" href="#VUID-VkBindBufferMemoryInfo-sType-sType"></a> <span class="vuid">VUID-VkBindBufferMemoryInfo-sType-sType</span><br>
 <code>sType</code> <strong>must</strong> be <code>VK_STRUCTURE_TYPE_BIND_BUFFER_MEMORY_INFO</code></p>
</li>
<li>
<p><a id="VUID-VkBindBufferMemoryInfo-pNext-pNext" href="#VUID-VkBindBufferMemoryInfo-pNext-pNext"></a> <span class="vuid">VUID-VkBindBufferMemoryInfo-pNext-pNext</span><br>
 Each <code>pNext</code> member of any structure (including this one) in the <code>pNext</code> chain <strong>must</strong> be either <code>NULL</code> or a pointer to a valid instance of <a href="#VkBindBufferMemoryDeviceGroupInfo">VkBindBufferMemoryDeviceGroupInfo</a> or <a href="#VkBindMemoryStatusKHR">VkBindMemoryStatusKHR</a></p>
</li>
<li>
<p><a id="VUID-VkBindBufferMemoryInfo-sType-unique" href="#VUID-VkBindBufferMemoryInfo-sType-unique"></a> <span class="vuid">VUID-VkBindBufferMemoryInfo-sType-unique</span><br>
 The <code>sType</code> value of each struct in the <code>pNext</code> chain <strong>must</strong> be unique</p>
</li>
<li>
<p><a id="VUID-VkBindBufferMemoryInfo-buffer-parameter" href="#VUID-VkBindBufferMemoryInfo-buffer-parameter"></a> <span class="vuid">VUID-VkBindBufferMemoryInfo-buffer-parameter</span><br>
 <code>buffer</code> <strong>must</strong> be a valid <a href="#VkBuffer">VkBuffer</a> handle</p>
</li>
<li>
<p><a id="VUID-VkBindBufferMemoryInfo-memory-parameter" href="#VUID-VkBindBufferMemoryInfo-memory-parameter"></a> <span class="vuid">VUID-VkBindBufferMemoryInfo-memory-parameter</span><br>
 <code>memory</code> <strong>must</strong> be a valid <a href="memory.html#VkDeviceMemory" class="xref page">VkDeviceMemory</a> handle</p>
</li>
<li>
<p><a id="VUID-VkBindBufferMemoryInfo-commonparent" href="#VUID-VkBindBufferMemoryInfo-commonparent"></a> <span class="vuid">VUID-VkBindBufferMemoryInfo-commonparent</span><br>
 Both of <code>buffer</code>, and <code>memory</code> <strong>must</strong> have been created, allocated, or retrieved from the same <a href="devsandqueues.html#VkDevice" class="xref page">VkDevice</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>VkBindBufferMemoryDeviceGroupInfo</code> structure is defined as:</p>
</div>
<div id="VkBindBufferMemoryDeviceGroupInfo" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_VERSION_1_1
typedef struct VkBindBufferMemoryDeviceGroupInfo {
    VkStructureType    sType;
    const void*        pNext;
    uint32_t           deviceIndexCount;
    const uint32_t*    pDeviceIndices;
} VkBindBufferMemoryDeviceGroupInfo;</code></pre>
</div>
</div>
<div class="paragraph">
<p>or the equivalent</p>
</div>
<div id="VkBindBufferMemoryDeviceGroupInfoKHR" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_KHR_bind_memory2 with VK_KHR_device_group
typedef VkBindBufferMemoryDeviceGroupInfo VkBindBufferMemoryDeviceGroupInfoKHR;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is a <a href="fundamentals.html#VkStructureType" class="xref page">VkStructureType</a> value identifying this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>deviceIndexCount</code> is the number of elements in
<code>pDeviceIndices</code>.</p>
</li>
<li>
<p><code>pDeviceIndices</code> is a pointer to an array of device indices.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>If the <code>pNext</code> chain of <a href="#VkBindBufferMemoryInfo">VkBindBufferMemoryInfo</a> includes a
<code>VkBindBufferMemoryDeviceGroupInfo</code> structure, then that structure
determines how memory is bound to buffers across multiple devices in a
device group.</p>
</div>
<div class="paragraph">
<p>If <code>deviceIndexCount</code> is greater than zero, then on device index <span class="eq">i</span>
the buffer is attached to the instance of <code>memory</code> on the physical
device with device index <span class="eq"><code>pDeviceIndices</code>[i]</span>.</p>
</div>
<div class="paragraph">
<p>If <code>deviceIndexCount</code> is zero and <code>memory</code> comes from a memory heap
with the <code>VK_MEMORY_HEAP_MULTI_INSTANCE_BIT</code> bit set, then it is as if
<code>pDeviceIndices</code> contains consecutive indices from zero to the number of
physical devices in the logical device, minus one.
In other words, by default each physical device attaches to its own instance
of <code>memory</code>.</p>
</div>
<div class="paragraph">
<p>If <code>deviceIndexCount</code> is zero and <code>memory</code> comes from a memory heap
without the <code>VK_MEMORY_HEAP_MULTI_INSTANCE_BIT</code> bit set, then it is as
if <code>pDeviceIndices</code> contains an array of zeros.
In other words, by default each physical device attaches to instance zero.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkBindBufferMemoryDeviceGroupInfo-deviceIndexCount-01606" href="#VUID-VkBindBufferMemoryDeviceGroupInfo-deviceIndexCount-01606"></a> <span class="vuid">VUID-VkBindBufferMemoryDeviceGroupInfo-deviceIndexCount-01606</span><br>

<code>deviceIndexCount</code> <strong>must</strong> either be zero or equal to the number of
physical devices in the logical device</p>
</li>
<li>
<p><a id="VUID-VkBindBufferMemoryDeviceGroupInfo-pDeviceIndices-01607" href="#VUID-VkBindBufferMemoryDeviceGroupInfo-pDeviceIndices-01607"></a> <span class="vuid">VUID-VkBindBufferMemoryDeviceGroupInfo-pDeviceIndices-01607</span><br>

All elements of <code>pDeviceIndices</code> <strong>must</strong> be valid device indices</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkBindBufferMemoryDeviceGroupInfo-sType-sType" href="#VUID-VkBindBufferMemoryDeviceGroupInfo-sType-sType"></a> <span class="vuid">VUID-VkBindBufferMemoryDeviceGroupInfo-sType-sType</span><br>
 <code>sType</code> <strong>must</strong> be <code>VK_STRUCTURE_TYPE_BIND_BUFFER_MEMORY_DEVICE_GROUP_INFO</code></p>
</li>
<li>
<p><a id="VUID-VkBindBufferMemoryDeviceGroupInfo-pDeviceIndices-parameter" href="#VUID-VkBindBufferMemoryDeviceGroupInfo-pDeviceIndices-parameter"></a> <span class="vuid">VUID-VkBindBufferMemoryDeviceGroupInfo-pDeviceIndices-parameter</span><br>
 If <code>deviceIndexCount</code> is not <code>0</code>, <code>pDeviceIndices</code> <strong>must</strong> be a valid pointer to an array of <code>deviceIndexCount</code> <code>uint32_t</code> values</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>VkBindMemoryStatusKHR</code> structure is defined as:</p>
</div>
<div id="VkBindMemoryStatusKHR" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_KHR_maintenance6
typedef struct VkBindMemoryStatusKHR {
    VkStructureType    sType;
    const void*        pNext;
    VkResult*          pResult;
} VkBindMemoryStatusKHR;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is a <a href="fundamentals.html#VkStructureType" class="xref page">VkStructureType</a> value identifying this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>pResult</code> is a pointer to a <code>VkResult</code> value.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>If the <code>pNext</code> chain of <a href="#VkBindBufferMemoryInfo">VkBindBufferMemoryInfo</a> or
<a href="#VkBindImageMemoryInfo">VkBindImageMemoryInfo</a> includes a <code>VkBindMemoryStatusKHR</code>
structure, then the <code>VkBindMemoryStatusKHR</code>::<code>pResult</code> will be
populated with a value describing the result of the corresponding memory
binding operation.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkBindMemoryStatusKHR-sType-sType" href="#VUID-VkBindMemoryStatusKHR-sType-sType"></a> <span class="vuid">VUID-VkBindMemoryStatusKHR-sType-sType</span><br>
 <code>sType</code> <strong>must</strong> be <code>VK_STRUCTURE_TYPE_BIND_MEMORY_STATUS_KHR</code></p>
</li>
<li>
<p><a id="VUID-VkBindMemoryStatusKHR-pResult-parameter" href="#VUID-VkBindMemoryStatusKHR-pResult-parameter"></a> <span class="vuid">VUID-VkBindMemoryStatusKHR-pResult-parameter</span><br>
 <code>pResult</code> <strong>must</strong> be a valid pointer to a <a href="fundamentals.html#VkResult" class="xref page">VkResult</a> value</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>To attach memory to a <code>VkImage</code> object created without the
<code>VK_IMAGE_CREATE_DISJOINT_BIT</code> set, call:</p>
</div>
<div id="vkBindImageMemory" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_VERSION_1_0
VkResult vkBindImageMemory(
    VkDevice                                    device,
    VkImage                                     image,
    VkDeviceMemory                              memory,
    VkDeviceSize                                memoryOffset);</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>device</code> is the logical device that owns the image and memory.</p>
</li>
<li>
<p><code>image</code> is the image.</p>
</li>
<li>
<p><code>memory</code> is the <a href="memory.html#VkDeviceMemory" class="xref page">VkDeviceMemory</a> object describing the device
memory to attach.</p>
</li>
<li>
<p><code>memoryOffset</code> is the start offset of the region of <code>memory</code>
which is to be bound to the image.
The number of bytes returned in the
<code>VkMemoryRequirements</code>::<code>size</code> member in <code>memory</code>, starting
from <code>memoryOffset</code> bytes, will be bound to the specified image.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><code>vkBindImageMemory</code> is equivalent to passing the same parameters through
<a href="#VkBindImageMemoryInfo">VkBindImageMemoryInfo</a> to <a href="#vkBindImageMemory2">vkBindImageMemory2</a>.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkBindImageMemory-image-07460" href="#VUID-vkBindImageMemory-image-07460"></a> <span class="vuid">VUID-vkBindImageMemory-image-07460</span><br>

<code>image</code> <strong>must</strong> not have been bound to a memory object</p>
</li>
<li>
<p><a id="VUID-vkBindImageMemory-image-01045" href="#VUID-vkBindImageMemory-image-01045"></a> <span class="vuid">VUID-vkBindImageMemory-image-01045</span><br>

<code>image</code> <strong>must</strong> not have been created with any sparse memory binding
flags</p>
</li>
<li>
<p><a id="VUID-vkBindImageMemory-memoryOffset-01046" href="#VUID-vkBindImageMemory-memoryOffset-01046"></a> <span class="vuid">VUID-vkBindImageMemory-memoryOffset-01046</span><br>

<code>memoryOffset</code> <strong>must</strong> be less than the size of <code>memory</code></p>
</li>
<li>
<p><a id="VUID-vkBindImageMemory-image-01445" href="#VUID-vkBindImageMemory-image-01445"></a> <span class="vuid">VUID-vkBindImageMemory-image-01445</span><br>

If <code>image</code> requires a dedicated allocation (as reported by
<a href="#vkGetImageMemoryRequirements2">vkGetImageMemoryRequirements2</a> in
<a href="#VkMemoryDedicatedRequirements">VkMemoryDedicatedRequirements</a>::<code>requiresDedicatedAllocation</code>
for <code>image</code>), <code>memory</code> <strong>must</strong> have been created with
<a href="memory.html#VkMemoryDedicatedAllocateInfo" class="xref page">VkMemoryDedicatedAllocateInfo</a>::<code>image</code> equal to <code>image</code></p>
</li>
<li>
<p><a id="VUID-vkBindImageMemory-memory-02628" href="#VUID-vkBindImageMemory-memory-02628"></a> <span class="vuid">VUID-vkBindImageMemory-memory-02628</span><br>

If
the <a href="features.html#features-dedicatedAllocationImageAliasing" class="xref page">    <code>dedicatedAllocationImageAliasing</code></a> feature is not enabled, and
the <code>VkMemoryAllocateInfo</code> provided when <code>memory</code> was allocated
included a <a href="memory.html#VkMemoryDedicatedAllocateInfo" class="xref page">VkMemoryDedicatedAllocateInfo</a> structure in its
<code>pNext</code> chain, and <a href="memory.html#VkMemoryDedicatedAllocateInfo" class="xref page">VkMemoryDedicatedAllocateInfo</a>::<code>image</code>
was not <a href="../appendices/boilerplate.html#VK_NULL_HANDLE" class="xref page">VK_NULL_HANDLE</a>, then <code>image</code> <strong>must</strong> equal
<a href="memory.html#VkMemoryDedicatedAllocateInfo" class="xref page">VkMemoryDedicatedAllocateInfo</a>::<code>image</code> and <code>memoryOffset</code>
<strong>must</strong> be zero</p>
</li>
<li>
<p><a id="VUID-vkBindImageMemory-memory-02629" href="#VUID-vkBindImageMemory-memory-02629"></a> <span class="vuid">VUID-vkBindImageMemory-memory-02629</span><br>

If the <a href="features.html#features-dedicatedAllocationImageAliasing" class="xref page">    <code>dedicatedAllocationImageAliasing</code></a> feature is enabled, and the
<code>VkMemoryAllocateInfo</code> provided when <code>memory</code> was allocated
included a <a href="memory.html#VkMemoryDedicatedAllocateInfo" class="xref page">VkMemoryDedicatedAllocateInfo</a> structure in its
<code>pNext</code> chain, and <a href="memory.html#VkMemoryDedicatedAllocateInfo" class="xref page">VkMemoryDedicatedAllocateInfo</a>::<code>image</code>
was not <a href="../appendices/boilerplate.html#VK_NULL_HANDLE" class="xref page">VK_NULL_HANDLE</a>, then <code>memoryOffset</code> <strong>must</strong> be zero, and
<code>image</code> <strong>must</strong> be either equal to
<a href="memory.html#VkMemoryDedicatedAllocateInfo" class="xref page">VkMemoryDedicatedAllocateInfo</a>::<code>image</code> or an image that was
created using the same parameters in <a href="#VkImageCreateInfo">VkImageCreateInfo</a>, with the
exception that <code>extent</code> and <code>arrayLayers</code> <strong>may</strong> differ subject to
the following restrictions: every dimension in the <code>extent</code>
parameter of the image being bound <strong>must</strong> be equal to or smaller than the
original image for which the allocation was created; and the
<code>arrayLayers</code> parameter of the image being bound <strong>must</strong> be equal to
or smaller than the original image for which the allocation was created</p>
</li>
<li>
<p><a id="VUID-vkBindImageMemory-None-01901" href="#VUID-vkBindImageMemory-None-01901"></a> <span class="vuid">VUID-vkBindImageMemory-None-01901</span><br>

If image was created with the <code>VK_IMAGE_CREATE_PROTECTED_BIT</code> bit
set, the image <strong>must</strong> be bound to a memory object allocated with a memory
type that reports <code>VK_MEMORY_PROPERTY_PROTECTED_BIT</code></p>
</li>
<li>
<p><a id="VUID-vkBindImageMemory-None-01902" href="#VUID-vkBindImageMemory-None-01902"></a> <span class="vuid">VUID-vkBindImageMemory-None-01902</span><br>

If image was created with the <code>VK_IMAGE_CREATE_PROTECTED_BIT</code> bit
not set, the image <strong>must</strong> not be bound to a memory object created with a
memory type that reports <code>VK_MEMORY_PROPERTY_PROTECTED_BIT</code></p>
</li>
<li>
<p><a id="VUID-vkBindImageMemory-image-01050" href="#VUID-vkBindImageMemory-image-01050"></a> <span class="vuid">VUID-vkBindImageMemory-image-01050</span><br>

If <code>image</code> was created with
<a href="#VkDedicatedAllocationImageCreateInfoNV">VkDedicatedAllocationImageCreateInfoNV</a>::<code>dedicatedAllocation</code>
equal to <code>VK_TRUE</code>, <code>memory</code> <strong>must</strong> have been created with
<a href="memory.html#VkDedicatedAllocationMemoryAllocateInfoNV" class="xref page">VkDedicatedAllocationMemoryAllocateInfoNV</a>::<code>image</code> equal to an
image handle created with identical creation parameters to <code>image</code>
and <code>memoryOffset</code> <strong>must</strong> be zero</p>
</li>
<li>
<p><a id="VUID-vkBindImageMemory-apiVersion-07921" href="#VUID-vkBindImageMemory-apiVersion-07921"></a> <span class="vuid">VUID-vkBindImageMemory-apiVersion-07921</span><br>

    If
    the <a href="../appendices/extensions.html#VK_KHR_dedicated_allocation" class="xref page">VK_KHR_dedicated_allocation</a> extension is not enabled,
    <a href="devsandqueues.html#VkPhysicalDeviceProperties" class="xref page">VkPhysicalDeviceProperties</a>::<code>apiVersion</code> is less than Vulkan
    1.1,
and
    <code>image</code> was not created with
    <a href="#VkDedicatedAllocationImageCreateInfoNV">VkDedicatedAllocationImageCreateInfoNV</a>::<code>dedicatedAllocation</code>
    equal to <code>VK_TRUE</code>, <code>memory</code> <strong>must</strong> not have been allocated
    dedicated for a specific buffer or image</p>
</li>
<li>
<p><a id="VUID-vkBindImageMemory-memory-02728" href="#VUID-vkBindImageMemory-memory-02728"></a> <span class="vuid">VUID-vkBindImageMemory-memory-02728</span><br>

If the value of <a href="memory.html#VkExportMemoryAllocateInfo" class="xref page">VkExportMemoryAllocateInfo</a>::<code>handleTypes</code> used
to allocate <code>memory</code> is not <code>0</code>, it <strong>must</strong> include at least one of
the handles set in
<a href="#VkExternalMemoryImageCreateInfo">VkExternalMemoryImageCreateInfo</a>::<code>handleTypes</code> when
<code>image</code> was created</p>
</li>
<li>
<p><a id="VUID-vkBindImageMemory-memory-02989" href="#VUID-vkBindImageMemory-memory-02989"></a> <span class="vuid">VUID-vkBindImageMemory-memory-02989</span><br>

If <code>memory</code> was created by a memory import operation,
that is not <a href="memory.html#VkImportAndroidHardwareBufferInfoANDROID" class="xref page">VkImportAndroidHardwareBufferInfoANDROID</a> with a
non-<code>NULL</code> <code>buffer</code> value,
the external handle type of the imported memory <strong>must</strong> also have been set
in <a href="#VkExternalMemoryImageCreateInfo">VkExternalMemoryImageCreateInfo</a>::<code>handleTypes</code> when
<code>image</code> was created</p>
</li>
<li>
<p><a id="VUID-vkBindImageMemory-memory-02990" href="#VUID-vkBindImageMemory-memory-02990"></a> <span class="vuid">VUID-vkBindImageMemory-memory-02990</span><br>

If <code>memory</code> was created with the
<a href="memory.html#VkImportAndroidHardwareBufferInfoANDROID" class="xref page">VkImportAndroidHardwareBufferInfoANDROID</a> memory import operation
with a non-<code>NULL</code> <code>buffer</code> value,
<code>VK_EXTERNAL_MEMORY_HANDLE_TYPE_ANDROID_HARDWARE_BUFFER_BIT_ANDROID</code>
<strong>must</strong> also have been set in
<a href="#VkExternalMemoryImageCreateInfo">VkExternalMemoryImageCreateInfo</a>::<code>handleTypes</code> when
<code>image</code> was created</p>
</li>
<li>
<p><a id="VUID-vkBindImageMemory-descriptorBufferCaptureReplay-08113" href="#VUID-vkBindImageMemory-descriptorBufferCaptureReplay-08113"></a> <span class="vuid">VUID-vkBindImageMemory-descriptorBufferCaptureReplay-08113</span><br>

If the <code>image</code> was created with the
<code>VK_IMAGE_CREATE_DESCRIPTOR_BUFFER_CAPTURE_REPLAY_BIT_EXT</code> bit set,
<code>memory</code> <strong>must</strong> have been allocated with the
<code>VK_MEMORY_ALLOCATE_DEVICE_ADDRESS_BIT</code> bit set</p>
</li>
<li>
<p><a id="VUID-vkBindImageMemory-image-09202" href="#VUID-vkBindImageMemory-image-09202"></a> <span class="vuid">VUID-vkBindImageMemory-image-09202</span><br>

If the <code>image</code> was created with the
<code>VK_IMAGE_CREATE_DESCRIPTOR_BUFFER_CAPTURE_REPLAY_BIT_EXT</code> bit set,
<code>memory</code> <strong>must</strong> have been allocated with the
<code>VK_MEMORY_ALLOCATE_DEVICE_ADDRESS_CAPTURE_REPLAY_BIT</code> bit set</p>
</li>
<li>
<p><a id="VUID-vkBindImageMemory-image-01608" href="#VUID-vkBindImageMemory-image-01608"></a> <span class="vuid">VUID-vkBindImageMemory-image-01608</span><br>

<code>image</code> <strong>must</strong> not have been created with the
<code>VK_IMAGE_CREATE_DISJOINT_BIT</code> set</p>
</li>
<li>
<p><a id="VUID-vkBindImageMemory-memory-01047" href="#VUID-vkBindImageMemory-memory-01047"></a> <span class="vuid">VUID-vkBindImageMemory-memory-01047</span><br>

<code>memory</code> <strong>must</strong> have been allocated using one of the memory types
allowed in the <code>memoryTypeBits</code> member of the
<code>VkMemoryRequirements</code> structure returned from a call to
<a href="#vkGetImageMemoryRequirements">vkGetImageMemoryRequirements</a> with <code>image</code></p>
</li>
<li>
<p><a id="VUID-vkBindImageMemory-memoryOffset-01048" href="#VUID-vkBindImageMemory-memoryOffset-01048"></a> <span class="vuid">VUID-vkBindImageMemory-memoryOffset-01048</span><br>

<code>memoryOffset</code> <strong>must</strong> be an integer multiple of the <code>alignment</code>
member of the <code>VkMemoryRequirements</code> structure returned from a call
to <a href="#vkGetImageMemoryRequirements">vkGetImageMemoryRequirements</a> with <code>image</code></p>
</li>
<li>
<p><a id="VUID-vkBindImageMemory-size-01049" href="#VUID-vkBindImageMemory-size-01049"></a> <span class="vuid">VUID-vkBindImageMemory-size-01049</span><br>

The difference of the size of <code>memory</code> and <code>memoryOffset</code> <strong>must</strong>
be greater than or equal to the <code>size</code> member of the
<a href="#VkMemoryRequirements">VkMemoryRequirements</a> structure returned from a call to
<a href="#vkGetImageMemoryRequirements">vkGetImageMemoryRequirements</a> with the same <code>image</code></p>
</li>
<li>
<p><a id="VUID-vkBindImageMemory-image-06392" href="#VUID-vkBindImageMemory-image-06392"></a> <span class="vuid">VUID-vkBindImageMemory-image-06392</span><br>

If <code>image</code> was created with
<a href="#VkBufferCollectionImageCreateInfoFUCHSIA">VkBufferCollectionImageCreateInfoFUCHSIA</a> chained to
<a href="#VkImageCreateInfo">VkImageCreateInfo</a>::<code>pNext</code>, <code>memory</code> <strong>must</strong> be allocated
with a <a href="#VkImportMemoryBufferCollectionFUCHSIA">VkImportMemoryBufferCollectionFUCHSIA</a> chained to
<a href="memory.html#VkMemoryAllocateInfo" class="xref page">VkMemoryAllocateInfo</a>::<code>pNext</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkBindImageMemory-device-parameter" href="#VUID-vkBindImageMemory-device-parameter"></a> <span class="vuid">VUID-vkBindImageMemory-device-parameter</span><br>
 <code>device</code> <strong>must</strong> be a valid <a href="devsandqueues.html#VkDevice" class="xref page">VkDevice</a> handle</p>
</li>
<li>
<p><a id="VUID-vkBindImageMemory-image-parameter" href="#VUID-vkBindImageMemory-image-parameter"></a> <span class="vuid">VUID-vkBindImageMemory-image-parameter</span><br>
 <code>image</code> <strong>must</strong> be a valid <a href="#VkImage">VkImage</a> handle</p>
</li>
<li>
<p><a id="VUID-vkBindImageMemory-memory-parameter" href="#VUID-vkBindImageMemory-memory-parameter"></a> <span class="vuid">VUID-vkBindImageMemory-memory-parameter</span><br>
 <code>memory</code> <strong>must</strong> be a valid <a href="memory.html#VkDeviceMemory" class="xref page">VkDeviceMemory</a> handle</p>
</li>
<li>
<p><a id="VUID-vkBindImageMemory-image-parent" href="#VUID-vkBindImageMemory-image-parent"></a> <span class="vuid">VUID-vkBindImageMemory-image-parent</span><br>
 <code>image</code> <strong>must</strong> have been created, allocated, or retrieved from <code>device</code></p>
</li>
<li>
<p><a id="VUID-vkBindImageMemory-memory-parent" href="#VUID-vkBindImageMemory-memory-parent"></a> <span class="vuid">VUID-vkBindImageMemory-memory-parent</span><br>
 <code>memory</code> <strong>must</strong> have been created, allocated, or retrieved from <code>device</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Host Synchronization</div>
<div class="ulist">
<ul>
<li>
<p>Host access to <code>image</code> <strong>must</strong> be externally synchronized</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Return Codes</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><a href="fundamentals.html#fundamentals-successcodes" class="xref page">Success</a></dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><code>VK_SUCCESS</code></p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1"><a href="fundamentals.html#fundamentals-errorcodes" class="xref page">Failure</a></dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><code>VK_ERROR_OUT_OF_HOST_MEMORY</code></p>
</li>
<li>
<p><code>VK_ERROR_OUT_OF_DEVICE_MEMORY</code></p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>To attach memory to image objects for one or more images at a time, call:</p>
</div>
<div id="vkBindImageMemory2" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_VERSION_1_1
VkResult vkBindImageMemory2(
    VkDevice                                    device,
    uint32_t                                    bindInfoCount,
    const VkBindImageMemoryInfo*                pBindInfos);</code></pre>
</div>
</div>
<div class="paragraph">
<p>or the equivalent command</p>
</div>
<div id="vkBindImageMemory2KHR" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_KHR_bind_memory2
VkResult vkBindImageMemory2KHR(
    VkDevice                                    device,
    uint32_t                                    bindInfoCount,
    const VkBindImageMemoryInfo*                pBindInfos);</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>device</code> is the logical device that owns the images and memory.</p>
</li>
<li>
<p><code>bindInfoCount</code> is the number of elements in <code>pBindInfos</code>.</p>
</li>
<li>
<p><code>pBindInfos</code> is a pointer to an array of <a href="#VkBindImageMemoryInfo">VkBindImageMemoryInfo</a>
structures, describing images and memory to bind.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>On some implementations, it <strong>may</strong> be more efficient to batch memory bindings
into a single command.</p>
</div>
<div class="paragraph">
<p>If the <a href="features.html#features-maintenance6" class="xref page"><code>maintenance6</code></a> feature is enabled,
this command <strong>must</strong> attempt to perform all of the memory binding operations
described by <code>pBindInfos</code>, and <strong>must</strong> not early exit on the first
failure.</p>
</div>
<div class="paragraph">
<p>If any of the memory binding operations described by <code>pBindInfos</code> fail,
the <a href="fundamentals.html#VkResult" class="xref page">VkResult</a> returned by this command <strong>must</strong> be the return value of any
one of the memory binding operations which did not return <code>VK_SUCCESS</code>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="title">Note</div>
<div class="paragraph">
<p>If the <code>vkBindImageMemory2</code> command failed,
<a href="#VkBindMemoryStatusKHR">VkBindMemoryStatusKHR</a> structures were not included in the <code>pNext</code>
chains of each element of <code>pBindInfos</code>,
and <code>bindInfoCount</code> was greater than one, then the images referenced by
<code>pBindInfos</code> will be in an indeterminate state, and must not be used.</p>
</div>
<div class="paragraph">
<p>Applications should destroy these images.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkBindImageMemory2-pBindInfos-02858" href="#VUID-vkBindImageMemory2-pBindInfos-02858"></a> <span class="vuid">VUID-vkBindImageMemory2-pBindInfos-02858</span><br>

If any <a href="#VkBindImageMemoryInfo">VkBindImageMemoryInfo</a>::<code>image</code> was created with
<code>VK_IMAGE_CREATE_DISJOINT_BIT</code> then all planes of
<a href="#VkBindImageMemoryInfo">VkBindImageMemoryInfo</a>::<code>image</code> <strong>must</strong> be bound individually in
separate <code>pBindInfos</code></p>
</li>
<li>
<p><a id="VUID-vkBindImageMemory2-pBindInfos-04006" href="#VUID-vkBindImageMemory2-pBindInfos-04006"></a> <span class="vuid">VUID-vkBindImageMemory2-pBindInfos-04006</span><br>

<code>pBindInfos</code> <strong>must</strong> not refer to the same image subresource more than
once</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkBindImageMemory2-device-parameter" href="#VUID-vkBindImageMemory2-device-parameter"></a> <span class="vuid">VUID-vkBindImageMemory2-device-parameter</span><br>
 <code>device</code> <strong>must</strong> be a valid <a href="devsandqueues.html#VkDevice" class="xref page">VkDevice</a> handle</p>
</li>
<li>
<p><a id="VUID-vkBindImageMemory2-pBindInfos-parameter" href="#VUID-vkBindImageMemory2-pBindInfos-parameter"></a> <span class="vuid">VUID-vkBindImageMemory2-pBindInfos-parameter</span><br>
 <code>pBindInfos</code> <strong>must</strong> be a valid pointer to an array of <code>bindInfoCount</code> valid <a href="#VkBindImageMemoryInfo">VkBindImageMemoryInfo</a> structures</p>
</li>
<li>
<p><a id="VUID-vkBindImageMemory2-bindInfoCount-arraylength" href="#VUID-vkBindImageMemory2-bindInfoCount-arraylength"></a> <span class="vuid">VUID-vkBindImageMemory2-bindInfoCount-arraylength</span><br>
 <code>bindInfoCount</code> <strong>must</strong> be greater than <code>0</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Return Codes</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><a href="fundamentals.html#fundamentals-successcodes" class="xref page">Success</a></dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><code>VK_SUCCESS</code></p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1"><a href="fundamentals.html#fundamentals-errorcodes" class="xref page">Failure</a></dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><code>VK_ERROR_OUT_OF_HOST_MEMORY</code></p>
</li>
<li>
<p><code>VK_ERROR_OUT_OF_DEVICE_MEMORY</code></p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p><code>VkBindImageMemoryInfo</code> contains members corresponding to the parameters
of <a href="#vkBindImageMemory">vkBindImageMemory</a>.</p>
</div>
<div class="paragraph">
<p>The <code>VkBindImageMemoryInfo</code> structure is defined as:</p>
</div>
<div id="VkBindImageMemoryInfo" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_VERSION_1_1
typedef struct VkBindImageMemoryInfo {
    VkStructureType    sType;
    const void*        pNext;
    VkImage            image;
    VkDeviceMemory     memory;
    VkDeviceSize       memoryOffset;
} VkBindImageMemoryInfo;</code></pre>
</div>
</div>
<div class="paragraph">
<p>or the equivalent</p>
</div>
<div id="VkBindImageMemoryInfoKHR" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_KHR_bind_memory2
typedef VkBindImageMemoryInfo VkBindImageMemoryInfoKHR;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is a <a href="fundamentals.html#VkStructureType" class="xref page">VkStructureType</a> value identifying this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>image</code> is the image to be attached to memory.</p>
</li>
<li>
<p><code>memory</code> is a <a href="memory.html#VkDeviceMemory" class="xref page">VkDeviceMemory</a> object describing the device
memory to attach.</p>
</li>
<li>
<p><code>memoryOffset</code> is the start offset of the region of <code>memory</code>
which is to be bound to the image.
The number of bytes returned in the
<code>VkMemoryRequirements</code>::<code>size</code> member in <code>memory</code>, starting
from <code>memoryOffset</code> bytes, will be bound to the specified image.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkBindImageMemoryInfo-image-07460" href="#VUID-VkBindImageMemoryInfo-image-07460"></a> <span class="vuid">VUID-VkBindImageMemoryInfo-image-07460</span><br>

<code>image</code> <strong>must</strong> not have been bound to a memory object</p>
</li>
<li>
<p><a id="VUID-VkBindImageMemoryInfo-image-01045" href="#VUID-VkBindImageMemoryInfo-image-01045"></a> <span class="vuid">VUID-VkBindImageMemoryInfo-image-01045</span><br>

<code>image</code> <strong>must</strong> not have been created with any sparse memory binding
flags</p>
</li>
<li>
<p><a id="VUID-VkBindImageMemoryInfo-memoryOffset-01046" href="#VUID-VkBindImageMemoryInfo-memoryOffset-01046"></a> <span class="vuid">VUID-VkBindImageMemoryInfo-memoryOffset-01046</span><br>

<code>memoryOffset</code> <strong>must</strong> be less than the size of <code>memory</code></p>
</li>
<li>
<p><a id="VUID-VkBindImageMemoryInfo-image-01445" href="#VUID-VkBindImageMemoryInfo-image-01445"></a> <span class="vuid">VUID-VkBindImageMemoryInfo-image-01445</span><br>

If <code>image</code> requires a dedicated allocation (as reported by
<a href="#vkGetImageMemoryRequirements2">vkGetImageMemoryRequirements2</a> in
<a href="#VkMemoryDedicatedRequirements">VkMemoryDedicatedRequirements</a>::<code>requiresDedicatedAllocation</code>
for <code>image</code>), <code>memory</code> <strong>must</strong> have been created with
<a href="memory.html#VkMemoryDedicatedAllocateInfo" class="xref page">VkMemoryDedicatedAllocateInfo</a>::<code>image</code> equal to <code>image</code></p>
</li>
<li>
<p><a id="VUID-VkBindImageMemoryInfo-memory-02628" href="#VUID-VkBindImageMemoryInfo-memory-02628"></a> <span class="vuid">VUID-VkBindImageMemoryInfo-memory-02628</span><br>

If
the <a href="features.html#features-dedicatedAllocationImageAliasing" class="xref page">    <code>dedicatedAllocationImageAliasing</code></a> feature is not enabled, and
the <code>VkMemoryAllocateInfo</code> provided when <code>memory</code> was allocated
included a <a href="memory.html#VkMemoryDedicatedAllocateInfo" class="xref page">VkMemoryDedicatedAllocateInfo</a> structure in its
<code>pNext</code> chain, and <a href="memory.html#VkMemoryDedicatedAllocateInfo" class="xref page">VkMemoryDedicatedAllocateInfo</a>::<code>image</code>
was not <a href="../appendices/boilerplate.html#VK_NULL_HANDLE" class="xref page">VK_NULL_HANDLE</a>, then <code>image</code> <strong>must</strong> equal
<a href="memory.html#VkMemoryDedicatedAllocateInfo" class="xref page">VkMemoryDedicatedAllocateInfo</a>::<code>image</code> and <code>memoryOffset</code>
<strong>must</strong> be zero</p>
</li>
<li>
<p><a id="VUID-VkBindImageMemoryInfo-memory-02629" href="#VUID-VkBindImageMemoryInfo-memory-02629"></a> <span class="vuid">VUID-VkBindImageMemoryInfo-memory-02629</span><br>

If the <a href="features.html#features-dedicatedAllocationImageAliasing" class="xref page">    <code>dedicatedAllocationImageAliasing</code></a> feature is enabled, and the
<code>VkMemoryAllocateInfo</code> provided when <code>memory</code> was allocated
included a <a href="memory.html#VkMemoryDedicatedAllocateInfo" class="xref page">VkMemoryDedicatedAllocateInfo</a> structure in its
<code>pNext</code> chain, and <a href="memory.html#VkMemoryDedicatedAllocateInfo" class="xref page">VkMemoryDedicatedAllocateInfo</a>::<code>image</code>
was not <a href="../appendices/boilerplate.html#VK_NULL_HANDLE" class="xref page">VK_NULL_HANDLE</a>, then <code>memoryOffset</code> <strong>must</strong> be zero, and
<code>image</code> <strong>must</strong> be either equal to
<a href="memory.html#VkMemoryDedicatedAllocateInfo" class="xref page">VkMemoryDedicatedAllocateInfo</a>::<code>image</code> or an image that was
created using the same parameters in <a href="#VkImageCreateInfo">VkImageCreateInfo</a>, with the
exception that <code>extent</code> and <code>arrayLayers</code> <strong>may</strong> differ subject to
the following restrictions: every dimension in the <code>extent</code>
parameter of the image being bound <strong>must</strong> be equal to or smaller than the
original image for which the allocation was created; and the
<code>arrayLayers</code> parameter of the image being bound <strong>must</strong> be equal to
or smaller than the original image for which the allocation was created</p>
</li>
<li>
<p><a id="VUID-VkBindImageMemoryInfo-None-01901" href="#VUID-VkBindImageMemoryInfo-None-01901"></a> <span class="vuid">VUID-VkBindImageMemoryInfo-None-01901</span><br>

If image was created with the <code>VK_IMAGE_CREATE_PROTECTED_BIT</code> bit
set, the image <strong>must</strong> be bound to a memory object allocated with a memory
type that reports <code>VK_MEMORY_PROPERTY_PROTECTED_BIT</code></p>
</li>
<li>
<p><a id="VUID-VkBindImageMemoryInfo-None-01902" href="#VUID-VkBindImageMemoryInfo-None-01902"></a> <span class="vuid">VUID-VkBindImageMemoryInfo-None-01902</span><br>

If image was created with the <code>VK_IMAGE_CREATE_PROTECTED_BIT</code> bit
not set, the image <strong>must</strong> not be bound to a memory object created with a
memory type that reports <code>VK_MEMORY_PROPERTY_PROTECTED_BIT</code></p>
</li>
<li>
<p><a id="VUID-VkBindImageMemoryInfo-image-01050" href="#VUID-VkBindImageMemoryInfo-image-01050"></a> <span class="vuid">VUID-VkBindImageMemoryInfo-image-01050</span><br>

If <code>image</code> was created with
<a href="#VkDedicatedAllocationImageCreateInfoNV">VkDedicatedAllocationImageCreateInfoNV</a>::<code>dedicatedAllocation</code>
equal to <code>VK_TRUE</code>, <code>memory</code> <strong>must</strong> have been created with
<a href="memory.html#VkDedicatedAllocationMemoryAllocateInfoNV" class="xref page">VkDedicatedAllocationMemoryAllocateInfoNV</a>::<code>image</code> equal to an
image handle created with identical creation parameters to <code>image</code>
and <code>memoryOffset</code> <strong>must</strong> be zero</p>
</li>
<li>
<p><a id="VUID-VkBindImageMemoryInfo-apiVersion-07921" href="#VUID-VkBindImageMemoryInfo-apiVersion-07921"></a> <span class="vuid">VUID-VkBindImageMemoryInfo-apiVersion-07921</span><br>

    If
    the <a href="../appendices/extensions.html#VK_KHR_dedicated_allocation" class="xref page">VK_KHR_dedicated_allocation</a> extension is not enabled,
    <a href="devsandqueues.html#VkPhysicalDeviceProperties" class="xref page">VkPhysicalDeviceProperties</a>::<code>apiVersion</code> is less than Vulkan
    1.1,
and
    <code>image</code> was not created with
    <a href="#VkDedicatedAllocationImageCreateInfoNV">VkDedicatedAllocationImageCreateInfoNV</a>::<code>dedicatedAllocation</code>
    equal to <code>VK_TRUE</code>, <code>memory</code> <strong>must</strong> not have been allocated
    dedicated for a specific buffer or image</p>
</li>
<li>
<p><a id="VUID-VkBindImageMemoryInfo-memory-02728" href="#VUID-VkBindImageMemoryInfo-memory-02728"></a> <span class="vuid">VUID-VkBindImageMemoryInfo-memory-02728</span><br>

If the value of <a href="memory.html#VkExportMemoryAllocateInfo" class="xref page">VkExportMemoryAllocateInfo</a>::<code>handleTypes</code> used
to allocate <code>memory</code> is not <code>0</code>, it <strong>must</strong> include at least one of
the handles set in
<a href="#VkExternalMemoryImageCreateInfo">VkExternalMemoryImageCreateInfo</a>::<code>handleTypes</code> when
<code>image</code> was created</p>
</li>
<li>
<p><a id="VUID-VkBindImageMemoryInfo-memory-02989" href="#VUID-VkBindImageMemoryInfo-memory-02989"></a> <span class="vuid">VUID-VkBindImageMemoryInfo-memory-02989</span><br>

If <code>memory</code> was created by a memory import operation,
that is not <a href="memory.html#VkImportAndroidHardwareBufferInfoANDROID" class="xref page">VkImportAndroidHardwareBufferInfoANDROID</a> with a
non-<code>NULL</code> <code>buffer</code> value,
the external handle type of the imported memory <strong>must</strong> also have been set
in <a href="#VkExternalMemoryImageCreateInfo">VkExternalMemoryImageCreateInfo</a>::<code>handleTypes</code> when
<code>image</code> was created</p>
</li>
<li>
<p><a id="VUID-VkBindImageMemoryInfo-memory-02990" href="#VUID-VkBindImageMemoryInfo-memory-02990"></a> <span class="vuid">VUID-VkBindImageMemoryInfo-memory-02990</span><br>

If <code>memory</code> was created with the
<a href="memory.html#VkImportAndroidHardwareBufferInfoANDROID" class="xref page">VkImportAndroidHardwareBufferInfoANDROID</a> memory import operation
with a non-<code>NULL</code> <code>buffer</code> value,
<code>VK_EXTERNAL_MEMORY_HANDLE_TYPE_ANDROID_HARDWARE_BUFFER_BIT_ANDROID</code>
<strong>must</strong> also have been set in
<a href="#VkExternalMemoryImageCreateInfo">VkExternalMemoryImageCreateInfo</a>::<code>handleTypes</code> when
<code>image</code> was created</p>
</li>
<li>
<p><a id="VUID-VkBindImageMemoryInfo-descriptorBufferCaptureReplay-08113" href="#VUID-VkBindImageMemoryInfo-descriptorBufferCaptureReplay-08113"></a> <span class="vuid">VUID-VkBindImageMemoryInfo-descriptorBufferCaptureReplay-08113</span><br>

If the <code>image</code> was created with the
<code>VK_IMAGE_CREATE_DESCRIPTOR_BUFFER_CAPTURE_REPLAY_BIT_EXT</code> bit set,
<code>memory</code> <strong>must</strong> have been allocated with the
<code>VK_MEMORY_ALLOCATE_DEVICE_ADDRESS_BIT</code> bit set</p>
</li>
<li>
<p><a id="VUID-VkBindImageMemoryInfo-image-09202" href="#VUID-VkBindImageMemoryInfo-image-09202"></a> <span class="vuid">VUID-VkBindImageMemoryInfo-image-09202</span><br>

If the <code>image</code> was created with the
<code>VK_IMAGE_CREATE_DESCRIPTOR_BUFFER_CAPTURE_REPLAY_BIT_EXT</code> bit set,
<code>memory</code> <strong>must</strong> have been allocated with the
<code>VK_MEMORY_ALLOCATE_DEVICE_ADDRESS_CAPTURE_REPLAY_BIT</code> bit set</p>
</li>
<li>
<p><a id="VUID-VkBindImageMemoryInfo-pNext-01615" href="#VUID-VkBindImageMemoryInfo-pNext-01615"></a> <span class="vuid">VUID-VkBindImageMemoryInfo-pNext-01615</span><br>

If the <code>pNext</code> chain does not include a
<a href="#VkBindImagePlaneMemoryInfo">VkBindImagePlaneMemoryInfo</a> structure, <code>memory</code> <strong>must</strong> have been
allocated using one of the memory types allowed in the
<code>memoryTypeBits</code> member of the <a href="#VkMemoryRequirements">VkMemoryRequirements</a> structure
returned from a call to <a href="#vkGetImageMemoryRequirements2">vkGetImageMemoryRequirements2</a> with
<code>image</code></p>
</li>
<li>
<p><a id="VUID-VkBindImageMemoryInfo-pNext-01616" href="#VUID-VkBindImageMemoryInfo-pNext-01616"></a> <span class="vuid">VUID-VkBindImageMemoryInfo-pNext-01616</span><br>

If the <code>pNext</code> chain does not include a
<a href="#VkBindImagePlaneMemoryInfo">VkBindImagePlaneMemoryInfo</a> structure, <code>memoryOffset</code> <strong>must</strong> be
an integer multiple of the <code>alignment</code> member of the
<a href="#VkMemoryRequirements">VkMemoryRequirements</a> structure returned from a call to
<a href="#vkGetImageMemoryRequirements2">vkGetImageMemoryRequirements2</a> with <code>image</code></p>
</li>
<li>
<p><a id="VUID-VkBindImageMemoryInfo-pNext-01617" href="#VUID-VkBindImageMemoryInfo-pNext-01617"></a> <span class="vuid">VUID-VkBindImageMemoryInfo-pNext-01617</span><br>

If the <code>pNext</code> chain does not include a
<a href="#VkBindImagePlaneMemoryInfo">VkBindImagePlaneMemoryInfo</a> structure, the difference of the size
of <code>memory</code> and <code>memoryOffset</code> <strong>must</strong> be greater than or equal to
the <code>size</code> member of the <a href="#VkMemoryRequirements">VkMemoryRequirements</a> structure
returned from a call to <a href="#vkGetImageMemoryRequirements2">vkGetImageMemoryRequirements2</a> with the
same <code>image</code></p>
</li>
<li>
<p><a id="VUID-VkBindImageMemoryInfo-pNext-01618" href="#VUID-VkBindImageMemoryInfo-pNext-01618"></a> <span class="vuid">VUID-VkBindImageMemoryInfo-pNext-01618</span><br>

If the <code>pNext</code> chain includes a <a href="#VkBindImagePlaneMemoryInfo">VkBindImagePlaneMemoryInfo</a>
structure, <code>image</code> <strong>must</strong> have been created with the
<code>VK_IMAGE_CREATE_DISJOINT_BIT</code> bit set</p>
</li>
<li>
<p><a id="VUID-VkBindImageMemoryInfo-image-07736" href="#VUID-VkBindImageMemoryInfo-image-07736"></a> <span class="vuid">VUID-VkBindImageMemoryInfo-image-07736</span><br>

If <code>image</code> was created with the <code>VK_IMAGE_CREATE_DISJOINT_BIT</code>
bit set, then the <code>pNext</code> chain <strong>must</strong> include a
<a href="#VkBindImagePlaneMemoryInfo">VkBindImagePlaneMemoryInfo</a> structure</p>
</li>
<li>
<p><a id="VUID-VkBindImageMemoryInfo-pNext-01619" href="#VUID-VkBindImageMemoryInfo-pNext-01619"></a> <span class="vuid">VUID-VkBindImageMemoryInfo-pNext-01619</span><br>

If the <code>pNext</code> chain includes a <a href="#VkBindImagePlaneMemoryInfo">VkBindImagePlaneMemoryInfo</a>
structure, <code>memory</code> <strong>must</strong> have been allocated using one of the
memory types allowed in the <code>memoryTypeBits</code> member of the
<a href="#VkMemoryRequirements">VkMemoryRequirements</a> structure returned from a call to
<a href="#vkGetImageMemoryRequirements2">vkGetImageMemoryRequirements2</a> with <code>image</code> and where
<a href="#VkBindImagePlaneMemoryInfo">VkBindImagePlaneMemoryInfo</a>::<code>planeAspect</code> corresponds to the
<a href="#VkImagePlaneMemoryRequirementsInfo">VkImagePlaneMemoryRequirementsInfo</a>::<code>planeAspect</code> in the
<a href="#VkImageMemoryRequirementsInfo2">VkImageMemoryRequirementsInfo2</a> structure&#8217;s <code>pNext</code> chain</p>
</li>
<li>
<p><a id="VUID-VkBindImageMemoryInfo-pNext-01620" href="#VUID-VkBindImageMemoryInfo-pNext-01620"></a> <span class="vuid">VUID-VkBindImageMemoryInfo-pNext-01620</span><br>

If the <code>pNext</code> chain includes a <a href="#VkBindImagePlaneMemoryInfo">VkBindImagePlaneMemoryInfo</a>
structure, <code>memoryOffset</code> <strong>must</strong> be an integer multiple of the
<code>alignment</code> member of the <a href="#VkMemoryRequirements">VkMemoryRequirements</a> structure
returned from a call to <a href="#vkGetImageMemoryRequirements2">vkGetImageMemoryRequirements2</a> with
<code>image</code> and where
<a href="#VkBindImagePlaneMemoryInfo">VkBindImagePlaneMemoryInfo</a>::<code>planeAspect</code> corresponds to the
<a href="#VkImagePlaneMemoryRequirementsInfo">VkImagePlaneMemoryRequirementsInfo</a>::<code>planeAspect</code> in the
<a href="#VkImageMemoryRequirementsInfo2">VkImageMemoryRequirementsInfo2</a> structure&#8217;s <code>pNext</code> chain</p>
</li>
<li>
<p><a id="VUID-VkBindImageMemoryInfo-pNext-01621" href="#VUID-VkBindImageMemoryInfo-pNext-01621"></a> <span class="vuid">VUID-VkBindImageMemoryInfo-pNext-01621</span><br>

If the <code>pNext</code> chain includes a <a href="#VkBindImagePlaneMemoryInfo">VkBindImagePlaneMemoryInfo</a>
structure, the difference of the size of <code>memory</code> and
<code>memoryOffset</code> <strong>must</strong> be greater than or equal to the <code>size</code>
member of the <a href="#VkMemoryRequirements">VkMemoryRequirements</a> structure returned from a call
to <a href="#vkGetImageMemoryRequirements2">vkGetImageMemoryRequirements2</a> with the same <code>image</code> and
where <a href="#VkBindImagePlaneMemoryInfo">VkBindImagePlaneMemoryInfo</a>::<code>planeAspect</code> corresponds to
the <a href="#VkImagePlaneMemoryRequirementsInfo">VkImagePlaneMemoryRequirementsInfo</a>::<code>planeAspect</code> in the
<a href="#VkImageMemoryRequirementsInfo2">VkImageMemoryRequirementsInfo2</a> structure&#8217;s <code>pNext</code> chain</p>
</li>
<li>
<p><a id="VUID-VkBindImageMemoryInfo-pNext-01626" href="#VUID-VkBindImageMemoryInfo-pNext-01626"></a> <span class="vuid">VUID-VkBindImageMemoryInfo-pNext-01626</span><br>

If the <code>pNext</code> chain includes a
<a href="#VkBindImageMemoryDeviceGroupInfo">VkBindImageMemoryDeviceGroupInfo</a> structure, all instances of
<code>memory</code> specified by
<a href="#VkBindImageMemoryDeviceGroupInfo">VkBindImageMemoryDeviceGroupInfo</a>::<code>pDeviceIndices</code> <strong>must</strong> have
been allocated</p>
</li>
<li>
<p><a id="VUID-VkBindImageMemoryInfo-pNext-01627" href="#VUID-VkBindImageMemoryInfo-pNext-01627"></a> <span class="vuid">VUID-VkBindImageMemoryInfo-pNext-01627</span><br>

If the <code>pNext</code> chain includes a
<a href="#VkBindImageMemoryDeviceGroupInfo">VkBindImageMemoryDeviceGroupInfo</a> structure, and
<a href="#VkBindImageMemoryDeviceGroupInfo">VkBindImageMemoryDeviceGroupInfo</a>::<code>splitInstanceBindRegionCount</code>
is not zero, then <code>image</code> <strong>must</strong> have been created with the
<code>VK_IMAGE_CREATE_SPLIT_INSTANCE_BIND_REGIONS_BIT</code> bit set</p>
</li>
<li>
<p><a id="VUID-VkBindImageMemoryInfo-pNext-01628" href="#VUID-VkBindImageMemoryInfo-pNext-01628"></a> <span class="vuid">VUID-VkBindImageMemoryInfo-pNext-01628</span><br>

If the <code>pNext</code> chain includes a
<a href="#VkBindImageMemoryDeviceGroupInfo">VkBindImageMemoryDeviceGroupInfo</a> structure, all elements of
<a href="#VkBindImageMemoryDeviceGroupInfo">VkBindImageMemoryDeviceGroupInfo</a>::<code>pSplitInstanceBindRegions</code>
<strong>must</strong> be valid rectangles contained within the dimensions of <code>image</code></p>
</li>
<li>
<p><a id="VUID-VkBindImageMemoryInfo-pNext-01629" href="#VUID-VkBindImageMemoryInfo-pNext-01629"></a> <span class="vuid">VUID-VkBindImageMemoryInfo-pNext-01629</span><br>

If the <code>pNext</code> chain includes a
<a href="#VkBindImageMemoryDeviceGroupInfo">VkBindImageMemoryDeviceGroupInfo</a> structure, the union of the areas
of all elements of
<a href="#VkBindImageMemoryDeviceGroupInfo">VkBindImageMemoryDeviceGroupInfo</a>::<code>pSplitInstanceBindRegions</code>
that correspond to the same instance of <code>image</code> <strong>must</strong> cover the
entire image</p>
</li>
<li>
<p><a id="VUID-VkBindImageMemoryInfo-image-01630" href="#VUID-VkBindImageMemoryInfo-image-01630"></a> <span class="vuid">VUID-VkBindImageMemoryInfo-image-01630</span><br>

If <code>image</code> was created with a valid swapchain handle in
<a href="#VkImageSwapchainCreateInfoKHR">VkImageSwapchainCreateInfoKHR</a>::<code>swapchain</code>, then the
<code>pNext</code> chain <strong>must</strong> include a
<a href="#VkBindImageMemorySwapchainInfoKHR">VkBindImageMemorySwapchainInfoKHR</a> structure containing the same
swapchain handle</p>
</li>
<li>
<p><a id="VUID-VkBindImageMemoryInfo-pNext-01631" href="#VUID-VkBindImageMemoryInfo-pNext-01631"></a> <span class="vuid">VUID-VkBindImageMemoryInfo-pNext-01631</span><br>

If the <code>pNext</code> chain includes a
<a href="#VkBindImageMemorySwapchainInfoKHR">VkBindImageMemorySwapchainInfoKHR</a> structure, <code>memory</code> <strong>must</strong> be
<a href="../appendices/boilerplate.html#VK_NULL_HANDLE" class="xref page">VK_NULL_HANDLE</a></p>
</li>
<li>
<p><a id="VUID-VkBindImageMemoryInfo-pNext-01632" href="#VUID-VkBindImageMemoryInfo-pNext-01632"></a> <span class="vuid">VUID-VkBindImageMemoryInfo-pNext-01632</span><br>

If the <code>pNext</code> chain does not include a
<a href="#VkBindImageMemorySwapchainInfoKHR">VkBindImageMemorySwapchainInfoKHR</a> structure, <code>memory</code> <strong>must</strong> be
a valid <a href="memory.html#VkDeviceMemory" class="xref page">VkDeviceMemory</a> handle</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkBindImageMemoryInfo-sType-sType" href="#VUID-VkBindImageMemoryInfo-sType-sType"></a> <span class="vuid">VUID-VkBindImageMemoryInfo-sType-sType</span><br>
 <code>sType</code> <strong>must</strong> be <code>VK_STRUCTURE_TYPE_BIND_IMAGE_MEMORY_INFO</code></p>
</li>
<li>
<p><a id="VUID-VkBindImageMemoryInfo-pNext-pNext" href="#VUID-VkBindImageMemoryInfo-pNext-pNext"></a> <span class="vuid">VUID-VkBindImageMemoryInfo-pNext-pNext</span><br>
 Each <code>pNext</code> member of any structure (including this one) in the <code>pNext</code> chain <strong>must</strong> be either <code>NULL</code> or a pointer to a valid instance of <a href="#VkBindImageMemoryDeviceGroupInfo">VkBindImageMemoryDeviceGroupInfo</a>, <a href="#VkBindImageMemorySwapchainInfoKHR">VkBindImageMemorySwapchainInfoKHR</a>, <a href="#VkBindImagePlaneMemoryInfo">VkBindImagePlaneMemoryInfo</a>, or <a href="#VkBindMemoryStatusKHR">VkBindMemoryStatusKHR</a></p>
</li>
<li>
<p><a id="VUID-VkBindImageMemoryInfo-sType-unique" href="#VUID-VkBindImageMemoryInfo-sType-unique"></a> <span class="vuid">VUID-VkBindImageMemoryInfo-sType-unique</span><br>
 The <code>sType</code> value of each struct in the <code>pNext</code> chain <strong>must</strong> be unique</p>
</li>
<li>
<p><a id="VUID-VkBindImageMemoryInfo-image-parameter" href="#VUID-VkBindImageMemoryInfo-image-parameter"></a> <span class="vuid">VUID-VkBindImageMemoryInfo-image-parameter</span><br>
 <code>image</code> <strong>must</strong> be a valid <a href="#VkImage">VkImage</a> handle</p>
</li>
<li>
<p><a id="VUID-VkBindImageMemoryInfo-commonparent" href="#VUID-VkBindImageMemoryInfo-commonparent"></a> <span class="vuid">VUID-VkBindImageMemoryInfo-commonparent</span><br>
 Both of <code>image</code>, and <code>memory</code> that are valid handles of non-ignored parameters <strong>must</strong> have been created, allocated, or retrieved from the same <a href="devsandqueues.html#VkDevice" class="xref page">VkDevice</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>VkBindImageMemoryDeviceGroupInfo</code> structure is defined as:</p>
</div>
<div id="VkBindImageMemoryDeviceGroupInfo" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_VERSION_1_1
typedef struct VkBindImageMemoryDeviceGroupInfo {
    VkStructureType    sType;
    const void*        pNext;
    uint32_t           deviceIndexCount;
    const uint32_t*    pDeviceIndices;
    uint32_t           splitInstanceBindRegionCount;
    const VkRect2D*    pSplitInstanceBindRegions;
} VkBindImageMemoryDeviceGroupInfo;</code></pre>
</div>
</div>
<div class="paragraph">
<p>or the equivalent</p>
</div>
<div id="VkBindImageMemoryDeviceGroupInfoKHR" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_KHR_bind_memory2 with VK_KHR_device_group
typedef VkBindImageMemoryDeviceGroupInfo VkBindImageMemoryDeviceGroupInfoKHR;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is a <a href="fundamentals.html#VkStructureType" class="xref page">VkStructureType</a> value identifying this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>deviceIndexCount</code> is the number of elements in
<code>pDeviceIndices</code>.</p>
</li>
<li>
<p><code>pDeviceIndices</code> is a pointer to an array of device indices.</p>
</li>
<li>
<p><code>splitInstanceBindRegionCount</code> is the number of elements in
<code>pSplitInstanceBindRegions</code>.</p>
</li>
<li>
<p><code>pSplitInstanceBindRegions</code> is a pointer to an array of
<a href="fundamentals.html#VkRect2D" class="xref page">VkRect2D</a> structures describing which regions of the image are
attached to each instance of memory.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>If the <code>pNext</code> chain of <a href="#VkBindImageMemoryInfo">VkBindImageMemoryInfo</a> includes a
<code>VkBindImageMemoryDeviceGroupInfo</code> structure, then that structure
determines how memory is bound to images across multiple devices in a device
group.</p>
</div>
<div class="paragraph">
<p>If <code>deviceIndexCount</code> is greater than zero, then on device index <span class="eq">i</span>
<code>image</code> is attached to the instance of the memory on the physical device
with device index <span class="eq"><code>pDeviceIndices</code>[i]</span>.</p>
</div>
<div class="paragraph">
<p>Let <span class="eq">N</span> be the number of physical devices in the logical device.
If <code>splitInstanceBindRegionCount</code> is greater than zero, then
<code>pSplitInstanceBindRegions</code> is a pointer to an array of <span class="eq">N<sup>2</sup></span>
rectangles, where the image region specified by the rectangle at element
<span class="eq">i*N+j</span> in resource instance <span class="eq">i</span> is bound to the memory instance
<span class="eq">j</span>.
The blocks of the memory that are bound to each sparse image block region
use an offset in memory, relative to <code>memoryOffset</code>, computed as if the
whole image was being bound to a contiguous range of memory.
In other words, horizontally adjacent image blocks use consecutive blocks of
memory, vertically adjacent image blocks are separated by the number of
bytes per block multiplied by the width in blocks of <code>image</code>, and the
block at <span class="eq">(0,0)</span> corresponds to memory starting at <code>memoryOffset</code>.</p>
</div>
<div class="paragraph">
<p>If <code>splitInstanceBindRegionCount</code> and <code>deviceIndexCount</code> are zero
and the memory comes from a memory heap with the
<code>VK_MEMORY_HEAP_MULTI_INSTANCE_BIT</code> bit set, then it is as if
<code>pDeviceIndices</code> contains consecutive indices from zero to the number of
physical devices in the logical device, minus one.
In other words, by default each physical device attaches to its own instance
of the memory.</p>
</div>
<div class="paragraph">
<p>If <code>splitInstanceBindRegionCount</code> and <code>deviceIndexCount</code> are zero
and the memory comes from a memory heap without the
<code>VK_MEMORY_HEAP_MULTI_INSTANCE_BIT</code> bit set, then it is as if
<code>pDeviceIndices</code> contains an array of zeros.
In other words, by default each physical device attaches to instance zero.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkBindImageMemoryDeviceGroupInfo-deviceIndexCount-01633" href="#VUID-VkBindImageMemoryDeviceGroupInfo-deviceIndexCount-01633"></a> <span class="vuid">VUID-VkBindImageMemoryDeviceGroupInfo-deviceIndexCount-01633</span><br>

At least one of <code>deviceIndexCount</code> and
<code>splitInstanceBindRegionCount</code> <strong>must</strong> be zero</p>
</li>
<li>
<p><a id="VUID-VkBindImageMemoryDeviceGroupInfo-deviceIndexCount-01634" href="#VUID-VkBindImageMemoryDeviceGroupInfo-deviceIndexCount-01634"></a> <span class="vuid">VUID-VkBindImageMemoryDeviceGroupInfo-deviceIndexCount-01634</span><br>

<code>deviceIndexCount</code> <strong>must</strong> either be zero or equal to the number of
physical devices in the logical device</p>
</li>
<li>
<p><a id="VUID-VkBindImageMemoryDeviceGroupInfo-pDeviceIndices-01635" href="#VUID-VkBindImageMemoryDeviceGroupInfo-pDeviceIndices-01635"></a> <span class="vuid">VUID-VkBindImageMemoryDeviceGroupInfo-pDeviceIndices-01635</span><br>

All elements of <code>pDeviceIndices</code> <strong>must</strong> be valid device indices</p>
</li>
<li>
<p><a id="VUID-VkBindImageMemoryDeviceGroupInfo-splitInstanceBindRegionCount-01636" href="#VUID-VkBindImageMemoryDeviceGroupInfo-splitInstanceBindRegionCount-01636"></a> <span class="vuid">VUID-VkBindImageMemoryDeviceGroupInfo-splitInstanceBindRegionCount-01636</span><br>

<code>splitInstanceBindRegionCount</code> <strong>must</strong> either be zero or equal to the
number of physical devices in the logical device squared</p>
</li>
<li>
<p><a id="VUID-VkBindImageMemoryDeviceGroupInfo-pSplitInstanceBindRegions-01637" href="#VUID-VkBindImageMemoryDeviceGroupInfo-pSplitInstanceBindRegions-01637"></a> <span class="vuid">VUID-VkBindImageMemoryDeviceGroupInfo-pSplitInstanceBindRegions-01637</span><br>

Elements of <code>pSplitInstanceBindRegions</code> that correspond to the same
instance of an image <strong>must</strong> not overlap</p>
</li>
<li>
<p><a id="VUID-VkBindImageMemoryDeviceGroupInfo-offset-01638" href="#VUID-VkBindImageMemoryDeviceGroupInfo-offset-01638"></a> <span class="vuid">VUID-VkBindImageMemoryDeviceGroupInfo-offset-01638</span><br>

The <code>offset.x</code> member of any element of
<code>pSplitInstanceBindRegions</code> <strong>must</strong> be a multiple of the sparse image
block width
(<code>VkSparseImageFormatProperties</code>::<code>imageGranularity.width</code>) of
all non-metadata aspects of the image</p>
</li>
<li>
<p><a id="VUID-VkBindImageMemoryDeviceGroupInfo-offset-01639" href="#VUID-VkBindImageMemoryDeviceGroupInfo-offset-01639"></a> <span class="vuid">VUID-VkBindImageMemoryDeviceGroupInfo-offset-01639</span><br>

The <code>offset.y</code> member of any element of
<code>pSplitInstanceBindRegions</code> <strong>must</strong> be a multiple of the sparse image
block height
(<code>VkSparseImageFormatProperties</code>::<code>imageGranularity.height</code>) of
all non-metadata aspects of the image</p>
</li>
<li>
<p><a id="VUID-VkBindImageMemoryDeviceGroupInfo-extent-01640" href="#VUID-VkBindImageMemoryDeviceGroupInfo-extent-01640"></a> <span class="vuid">VUID-VkBindImageMemoryDeviceGroupInfo-extent-01640</span><br>

The <code>extent.width</code> member of any element of
<code>pSplitInstanceBindRegions</code> <strong>must</strong> either be a multiple of the sparse
image block width of all non-metadata aspects of the image, or else
<code>extent.width</code> +  <code>offset.x</code> <strong>must</strong> equal the width of the
image subresource</p>
</li>
<li>
<p><a id="VUID-VkBindImageMemoryDeviceGroupInfo-extent-01641" href="#VUID-VkBindImageMemoryDeviceGroupInfo-extent-01641"></a> <span class="vuid">VUID-VkBindImageMemoryDeviceGroupInfo-extent-01641</span><br>

The <code>extent.height</code> member of any element of
<code>pSplitInstanceBindRegions</code> <strong>must</strong> either be a multiple of the sparse
image block height of all non-metadata aspects of the image, or else
<code>extent.height</code> +  <code>offset.y</code> <strong>must</strong> equal the height of the
image subresource</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkBindImageMemoryDeviceGroupInfo-sType-sType" href="#VUID-VkBindImageMemoryDeviceGroupInfo-sType-sType"></a> <span class="vuid">VUID-VkBindImageMemoryDeviceGroupInfo-sType-sType</span><br>
 <code>sType</code> <strong>must</strong> be <code>VK_STRUCTURE_TYPE_BIND_IMAGE_MEMORY_DEVICE_GROUP_INFO</code></p>
</li>
<li>
<p><a id="VUID-VkBindImageMemoryDeviceGroupInfo-pDeviceIndices-parameter" href="#VUID-VkBindImageMemoryDeviceGroupInfo-pDeviceIndices-parameter"></a> <span class="vuid">VUID-VkBindImageMemoryDeviceGroupInfo-pDeviceIndices-parameter</span><br>
 If <code>deviceIndexCount</code> is not <code>0</code>, <code>pDeviceIndices</code> <strong>must</strong> be a valid pointer to an array of <code>deviceIndexCount</code> <code>uint32_t</code> values</p>
</li>
<li>
<p><a id="VUID-VkBindImageMemoryDeviceGroupInfo-pSplitInstanceBindRegions-parameter" href="#VUID-VkBindImageMemoryDeviceGroupInfo-pSplitInstanceBindRegions-parameter"></a> <span class="vuid">VUID-VkBindImageMemoryDeviceGroupInfo-pSplitInstanceBindRegions-parameter</span><br>
 If <code>splitInstanceBindRegionCount</code> is not <code>0</code>, <code>pSplitInstanceBindRegions</code> <strong>must</strong> be a valid pointer to an array of <code>splitInstanceBindRegionCount</code> <a href="fundamentals.html#VkRect2D" class="xref page">VkRect2D</a> structures</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>If the <code>pNext</code> chain of <a href="#VkBindImageMemoryInfo">VkBindImageMemoryInfo</a> includes a
<code>VkBindImageMemorySwapchainInfoKHR</code> structure, then that structure
includes a swapchain handle and image index indicating that the image will
be bound to memory from that swapchain.</p>
</div>
<div class="paragraph">
<p>The <code>VkBindImageMemorySwapchainInfoKHR</code> structure is defined as:</p>
</div>
<div id="VkBindImageMemorySwapchainInfoKHR" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_VERSION_1_1 with VK_KHR_swapchain, VK_KHR_device_group with VK_KHR_swapchain
typedef struct VkBindImageMemorySwapchainInfoKHR {
    VkStructureType    sType;
    const void*        pNext;
    VkSwapchainKHR     swapchain;
    uint32_t           imageIndex;
} VkBindImageMemorySwapchainInfoKHR;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is a <a href="fundamentals.html#VkStructureType" class="xref page">VkStructureType</a> value identifying this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>swapchain</code> is <a href="../appendices/boilerplate.html#VK_NULL_HANDLE" class="xref page">VK_NULL_HANDLE</a> or a swapchain handle.</p>
</li>
<li>
<p><code>imageIndex</code> is an image index within <code>swapchain</code>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>If <code>swapchain</code> is not <code>NULL</code>, the <code>swapchain</code> and <code>imageIndex</code>
are used to determine the memory that the image is bound to, instead of
<code>memory</code> and <code>memoryOffset</code>.</p>
</div>
<div class="paragraph">
<p>Memory <strong>can</strong> be bound to a swapchain and use the <code>pDeviceIndices</code> or
<code>pSplitInstanceBindRegions</code> members of
<a href="#VkBindImageMemoryDeviceGroupInfo">VkBindImageMemoryDeviceGroupInfo</a>.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkBindImageMemorySwapchainInfoKHR-imageIndex-01644" href="#VUID-VkBindImageMemorySwapchainInfoKHR-imageIndex-01644"></a> <span class="vuid">VUID-VkBindImageMemorySwapchainInfoKHR-imageIndex-01644</span><br>

<code>imageIndex</code> <strong>must</strong> be less than the number of images in
<code>swapchain</code></p>
</li>
<li>
<p><a id="VUID-VkBindImageMemorySwapchainInfoKHR-swapchain-07756" href="#VUID-VkBindImageMemorySwapchainInfoKHR-swapchain-07756"></a> <span class="vuid">VUID-VkBindImageMemorySwapchainInfoKHR-swapchain-07756</span><br>

If the <code>swapchain</code> has been created with
<code>VK_SWAPCHAIN_CREATE_DEFERRED_MEMORY_ALLOCATION_BIT_EXT</code>,
<code>imageIndex</code> <strong>must</strong> be one that has previously been returned by
<a href="VK_KHR_surface/wsi.html#vkAcquireNextImageKHR" class="xref page">vkAcquireNextImageKHR</a> or <a href="VK_KHR_surface/wsi.html#vkAcquireNextImage2KHR" class="xref page">vkAcquireNextImage2KHR</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkBindImageMemorySwapchainInfoKHR-sType-sType" href="#VUID-VkBindImageMemorySwapchainInfoKHR-sType-sType"></a> <span class="vuid">VUID-VkBindImageMemorySwapchainInfoKHR-sType-sType</span><br>
 <code>sType</code> <strong>must</strong> be <code>VK_STRUCTURE_TYPE_BIND_IMAGE_MEMORY_SWAPCHAIN_INFO_KHR</code></p>
</li>
<li>
<p><a id="VUID-VkBindImageMemorySwapchainInfoKHR-swapchain-parameter" href="#VUID-VkBindImageMemorySwapchainInfoKHR-swapchain-parameter"></a> <span class="vuid">VUID-VkBindImageMemorySwapchainInfoKHR-swapchain-parameter</span><br>
 <code>swapchain</code> <strong>must</strong> be a valid <a href="VK_KHR_surface/wsi.html#VkSwapchainKHR" class="xref page">VkSwapchainKHR</a> handle</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Host Synchronization</div>
<div class="ulist">
<ul>
<li>
<p>Host access to <code>swapchain</code> <strong>must</strong> be externally synchronized</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>In order to bind <em>planes</em> of a <em>disjoint image</em>, add a
<code>VkBindImagePlaneMemoryInfo</code> structure to the <code>pNext</code> chain of
<a href="#VkBindImageMemoryInfo">VkBindImageMemoryInfo</a>.</p>
</div>
<div class="paragraph">
<p>The <code>VkBindImagePlaneMemoryInfo</code> structure is defined as:</p>
</div>
<div id="VkBindImagePlaneMemoryInfo" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_VERSION_1_1
typedef struct VkBindImagePlaneMemoryInfo {
    VkStructureType          sType;
    const void*              pNext;
    VkImageAspectFlagBits    planeAspect;
} VkBindImagePlaneMemoryInfo;</code></pre>
</div>
</div>
<div class="paragraph">
<p>or the equivalent</p>
</div>
<div id="VkBindImagePlaneMemoryInfoKHR" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_KHR_sampler_ycbcr_conversion
typedef VkBindImagePlaneMemoryInfo VkBindImagePlaneMemoryInfoKHR;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is a <a href="fundamentals.html#VkStructureType" class="xref page">VkStructureType</a> value identifying this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>planeAspect</code> is a <code>VkImageAspectFlagBits</code> value specifying the
aspect of the disjoint image plane to bind.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkBindImagePlaneMemoryInfo-planeAspect-02283" href="#VUID-VkBindImagePlaneMemoryInfo-planeAspect-02283"></a> <span class="vuid">VUID-VkBindImagePlaneMemoryInfo-planeAspect-02283</span><br>

If the image&#8217;s <code>tiling</code> is <code>VK_IMAGE_TILING_LINEAR</code> or
<code>VK_IMAGE_TILING_OPTIMAL</code>, then <code>planeAspect</code> <strong>must</strong> be a single
valid <a href="formats.html#formats-planes-image-aspect" class="xref page">multi-planar aspect mask</a> bit</p>
</li>
<li>
<p><a id="VUID-VkBindImagePlaneMemoryInfo-planeAspect-02284" href="#VUID-VkBindImagePlaneMemoryInfo-planeAspect-02284"></a> <span class="vuid">VUID-VkBindImagePlaneMemoryInfo-planeAspect-02284</span><br>

If the image&#8217;s <code>tiling</code> is
<code>VK_IMAGE_TILING_DRM_FORMAT_MODIFIER_EXT</code>, then <code>planeAspect</code>
<strong>must</strong> be a single valid <em>memory plane</em> for the image (that is,
<code>aspectMask</code> <strong>must</strong> specify a plane index that is less than the
<a href="formats.html#VkDrmFormatModifierPropertiesEXT" class="xref page">VkDrmFormatModifierPropertiesEXT</a>::<code>drmFormatModifierPlaneCount</code>
associated with the image&#8217;s <code>format</code> and
<a href="#VkImageDrmFormatModifierPropertiesEXT">VkImageDrmFormatModifierPropertiesEXT</a>::<code>drmFormatModifier</code>)</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkBindImagePlaneMemoryInfo-sType-sType" href="#VUID-VkBindImagePlaneMemoryInfo-sType-sType"></a> <span class="vuid">VUID-VkBindImagePlaneMemoryInfo-sType-sType</span><br>
 <code>sType</code> <strong>must</strong> be <code>VK_STRUCTURE_TYPE_BIND_IMAGE_PLANE_MEMORY_INFO</code></p>
</li>
<li>
<p><a id="VUID-VkBindImagePlaneMemoryInfo-planeAspect-parameter" href="#VUID-VkBindImagePlaneMemoryInfo-planeAspect-parameter"></a> <span class="vuid">VUID-VkBindImagePlaneMemoryInfo-planeAspect-parameter</span><br>
 <code>planeAspect</code> <strong>must</strong> be a valid <a href="#VkImageAspectFlagBits">VkImageAspectFlagBits</a> value</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div id="resources-bufferimagegranularity" class="paragraph">
<div class="title">Buffer-Image Granularity</div>
<p>The implementation-dependent limit <a href="limits.html#limits-bufferImageGranularity" class="xref page"><code>bufferImageGranularity</code></a> specifies a page-like granularity at which
linear and non-linear resources <strong>must</strong> be placed in adjacent memory locations
to avoid aliasing.
Two resources which do not satisfy this granularity requirement are said to
<a href="#resources-memory-aliasing">alias</a>.
<code>bufferImageGranularity</code> is specified in bytes, and <strong>must</strong> be a power of
two.
Implementations which do not impose a granularity restriction <strong>may</strong> report a
<code>bufferImageGranularity</code> value of one.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="title">Note</div>
<div class="paragraph">
<p>Despite its name, <code>bufferImageGranularity</code> is really a granularity
between &#8220;linear&#8221; and &#8220;non-linear&#8221; resources.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Given resourceA at the lower memory offset and resourceB at the higher
memory offset in the same <code>VkDeviceMemory</code> object, where one resource is
linear and the other is non-linear (as defined in the
<a href="../appendices/glossary.html#glossary-linear-resource" class="xref page">Glossary</a>), and the following:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c hljs" data-lang="c">resourceA.end       = resourceA.memoryOffset + resourceA.size - 1
resourceA.endPage   = resourceA.end &amp; ~(bufferImageGranularity-1)
resourceB.start     = resourceB.memoryOffset
resourceB.startPage = resourceB.start &amp; ~(bufferImageGranularity-1)</code></pre>
</div>
</div>
<div class="paragraph">
<p>The following property <strong>must</strong> hold:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c hljs" data-lang="c">resourceA.endPage &lt; resourceB.startPage</code></pre>
</div>
</div>
<div class="paragraph">
<p>That is, the end of the first resource (A) and the beginning of the second
resource (B) <strong>must</strong> be on separate &#8220;pages&#8221; of size
<code>bufferImageGranularity</code>.
<code>bufferImageGranularity</code> <strong>may</strong> be different than the physical page size
of the memory heap.
This restriction is only needed when a linear resource and a non-linear
resource are adjacent in memory and will be used simultaneously.
The memory ranges of adjacent resources <strong>can</strong> be closer than
<code>bufferImageGranularity</code>, provided they meet the <code>alignment</code>
requirement for the objects in question.</p>
</div>
<div class="paragraph">
<p>Sparse block size in bytes and sparse image and buffer memory alignments
<strong>must</strong> all be multiples of the <code>bufferImageGranularity</code>.
Therefore, memory bound to sparse resources naturally satisfies the
<code>bufferImageGranularity</code>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="resources-sharing"><a class="anchor" href="#resources-sharing"></a>Resource Sharing Mode</h2>
<div class="sectionbody">
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Buffer and image objects are created with a <em>sharing mode</em> controlling how
they <strong>can</strong> be accessed from queues.
The supported sharing modes are:</p>
</div>
<div id="VkSharingMode" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_VERSION_1_0
typedef enum VkSharingMode {
    VK_SHARING_MODE_EXCLUSIVE = 0,
    VK_SHARING_MODE_CONCURRENT = 1,
} VkSharingMode;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>VK_SHARING_MODE_EXCLUSIVE</code> specifies that access to any range or
image subresource of the object will be exclusive to a single queue
family at a time.</p>
</li>
<li>
<p><code>VK_SHARING_MODE_CONCURRENT</code> specifies that concurrent access to any
range or image subresource of the object from multiple queue families is
supported.</p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="title">Note</div>
<div class="paragraph">
<p><code>VK_SHARING_MODE_CONCURRENT</code> <strong>may</strong> result in lower performance access to
the buffer or image than <code>VK_SHARING_MODE_EXCLUSIVE</code>.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Ranges of buffers and image subresources of image objects created using
<code>VK_SHARING_MODE_EXCLUSIVE</code> <strong>must</strong> only be accessed by queues in the
queue family that has <em>ownership</em> of the resource.
Upon creation, such resources are not owned by any queue family; ownership
is implicitly acquired upon first use within a queue.
Once a resource using <code>VK_SHARING_MODE_EXCLUSIVE</code> is owned by some queue
family, the application <strong>must</strong> perform a
<a href="synchronization.html#synchronization-queue-transfers" class="xref page">queue family ownership transfer</a> to make
the memory contents of a range or image subresource accessible to a
different queue family.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="title">Note</div>
<div class="paragraph">
<p>Images still require a <a href="#resources-image-layouts">layout transition</a> from
<code>VK_IMAGE_LAYOUT_UNDEFINED</code> or <code>VK_IMAGE_LAYOUT_PREINITIALIZED</code>
before being used on the first queue.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>A queue family <strong>can</strong> take ownership of an image subresource or buffer range
of a resource created with <code>VK_SHARING_MODE_EXCLUSIVE</code>, without an
ownership transfer, in the same way as for a resource that was just created;
however, taking ownership in this way has the effect that the contents of
the image subresource or buffer range are <strong>undefined</strong>.</p>
</div>
<div class="paragraph">
<p>Ranges of buffers and image subresources of image objects created using
<code>VK_SHARING_MODE_CONCURRENT</code> <strong>must</strong> only be accessed by queues from the
queue families specified through the <code>queueFamilyIndexCount</code> and
<code>pQueueFamilyIndices</code> members of the corresponding create info
structures.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="resources-external-sharing"><a class="anchor" href="#resources-external-sharing"></a>External Resource Sharing</h3>
<div class="paragraph">
<p>Resources <strong>should</strong> only be accessed in the Vulkan instance that has exclusive
ownership of their underlying memory.
Only one Vulkan instance has exclusive ownership of a resource&#8217;s underlying
memory at a given time, regardless of whether the resource was created using
<code>VK_SHARING_MODE_EXCLUSIVE</code> or <code>VK_SHARING_MODE_CONCURRENT</code>.
Applications can transfer ownership of a resource&#8217;s underlying memory only
if the memory has been imported from or exported to another instance or
external API using external memory handles.
The semantics for transferring ownership outside of the instance are similar
to those used for transferring ownership of <code>VK_SHARING_MODE_EXCLUSIVE</code>
resources between queues, and is also accomplished using
<a href="synchronization.html#VkBufferMemoryBarrier" class="xref page">VkBufferMemoryBarrier</a> or <a href="synchronization.html#VkImageMemoryBarrier" class="xref page">VkImageMemoryBarrier</a> operations.
To make the contents of the underlying memory accessible in the destination
instance or API, applications <strong>must</strong></p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Release exclusive ownership from the source instance or API.</p>
</li>
<li>
<p>Ensure the release operation has completed using semaphores or fences.</p>
</li>
<li>
<p>Acquire exclusive ownership in the destination instance or API</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Unlike queue family ownership transfers, the destination instance or API is
not specified explicitly when releasing ownership, nor is the source
instance or API specified when acquiring ownership.
Instead, the image or memory barrier&#8217;s <code>dstQueueFamilyIndex</code> or
<code>srcQueueFamilyIndex</code> parameters are set to the reserved queue family
index <code>VK_QUEUE_FAMILY_EXTERNAL</code>
or <code>VK_QUEUE_FAMILY_FOREIGN_EXT</code>
to represent the external destination or source respectively.</p>
</div>
<div class="paragraph">
<p>Binding a resource to a memory object shared between multiple Vulkan
instances or other APIs does not change the ownership of the underlying
memory.
The first entity to access the resource implicitly acquires ownership.
An entity <strong>can</strong> also implicitly take ownership from another entity in the
same way without an explicit ownership transfer.
However, taking ownership in this way has the effect that the contents of
the underlying memory are <strong>undefined</strong>.</p>
</div>
<div class="paragraph">
<p>Accessing a resource backed by memory that is owned by a particular instance
or API has the same semantics as accessing a <code>VK_SHARING_MODE_EXCLUSIVE</code>
resource, with one exception: Implementations <strong>must</strong> ensure layout
transitions performed on one member of a set of identical subresources of
identical images that alias the same range of an underlying memory object
affect the layout of all the subresources in the set.</p>
</div>
<div class="paragraph">
<p>As a corollary, writes to any image subresources in such a set <strong>must</strong> not
make the contents of memory used by other subresources in the set
<strong>undefined</strong>.
An application <strong>can</strong> define the content of a subresource of one image by
performing device writes to an identical subresource of another image
provided both images are bound to the same region of external memory.
Applications <strong>may</strong> also add resources to such a set after the content of the
existing set members has been defined without making the content <strong>undefined</strong>
by creating a new image with the initial layout
<code>VK_IMAGE_LAYOUT_UNDEFINED</code> and binding it to the same region of
external memory as the existing images.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="title">Note</div>
<div class="paragraph">
<p>Because layout transitions apply to all identical images aliasing the same
region of external memory, the actual layout of the memory backing a new
image as well as an existing image with defined content will not be
<strong>undefined</strong>.
Such an image is not usable until it acquires ownership of its memory from
the existing owner.
Therefore, the layout specified as part of this transition will be the true
initial layout of the image.
The <strong>undefined</strong> layout specified when creating it is a placeholder to
simplify valid usage requirements.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="resources-memory-aliasing"><a class="anchor" href="#resources-memory-aliasing"></a>Memory Aliasing</h2>
<div class="sectionbody">
<div class="paragraph">
<p>A range of a <code>VkDeviceMemory</code> allocation is <em>aliased</em> if it is bound to
multiple resources simultaneously, as described below, via
<a href="#vkBindImageMemory">vkBindImageMemory</a>, <a href="#vkBindBufferMemory">vkBindBufferMemory</a>,
<a href="#vkBindAccelerationStructureMemoryNV">vkBindAccelerationStructureMemoryNV</a>,
via <a href="sparsemem.html#sparsememory-resource-binding" class="xref page">sparse memory bindings</a>,
or by binding the memory to resources in multiple Vulkan instances or
external APIs using external memory handle export and import mechanisms.</p>
</div>
<div class="paragraph">
<p>Consider two resources, resource<sub>A</sub> and resource<sub>B</sub>, bound respectively to
memory range<sub>A</sub> and range<sub>B</sub>.
Let paddedRange<sub>A</sub> and paddedRange<sub>B</sub> be, respectively, range<sub>A</sub> and
range<sub>B</sub> aligned to <code>bufferImageGranularity</code>.
If the resources are both linear or both non-linear (as defined in the
<a href="../appendices/glossary.html#glossary-linear-resource" class="xref page">Glossary</a>), then the resources <em>alias</em> the
memory in the intersection of range<sub>A</sub> and range<sub>B</sub>.
If one resource is linear and the other is non-linear, then the resources
<em>alias</em> the memory in the intersection of paddedRange<sub>A</sub> and paddedRange<sub>B</sub>.</p>
</div>
<div class="paragraph">
<p>Applications <strong>can</strong> alias memory, but use of multiple aliases is subject to
several constraints.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="title">Note</div>
<div class="paragraph">
<p>Memory aliasing <strong>can</strong> be useful to reduce the total device memory footprint
of an application, if some large resources are used for disjoint periods of
time.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>When a <a href="../appendices/glossary.html#glossary-linear-resource" class="xref page">non-linear</a>,
non-<code>VK_IMAGE_CREATE_SPARSE_RESIDENCY_BIT</code> image is bound to an aliased
range, all image subresources of the image <em>overlap</em> the range.
When a linear image is bound to an aliased range, the image subresources
that (according to the image&#8217;s advertised layout) include bytes from the
aliased range overlap the range.
When a <code>VK_IMAGE_CREATE_SPARSE_RESIDENCY_BIT</code> image has sparse image
blocks bound to an aliased range, only image subresources including those
sparse image blocks overlap the range, and when the memory bound to the
image&#8217;s mip tail overlaps an aliased range all image subresources in the mip
tail overlap the range.</p>
</div>
<div class="paragraph">
<p>Buffers, and linear image subresources in either the
<code>VK_IMAGE_LAYOUT_PREINITIALIZED</code> or <code>VK_IMAGE_LAYOUT_GENERAL</code>
layouts, are <em>host-accessible subresources</em>.
That is, the host has a well-defined addressing scheme to interpret the
contents, and thus the layout of the data in memory <strong>can</strong> be consistently
interpreted across aliases if each of those aliases is a host-accessible
subresource.
Non-linear images, and linear image subresources in other layouts, are not
host-accessible.</p>
</div>
<div class="paragraph">
<p>If two aliases are both host-accessible, then they interpret the contents of
the memory in consistent ways, and data written to one alias <strong>can</strong> be read by
the other alias.</p>
</div>
<div id="resources-memory-aliasing-consistency" class="paragraph">
<p>If two aliases are both images that were created with identical creation
parameters, both were created with the <code>VK_IMAGE_CREATE_ALIAS_BIT</code> flag
set, and both are bound identically to memory
except for <a href="#VkBindImageMemoryDeviceGroupInfo">VkBindImageMemoryDeviceGroupInfo</a>::<code>pDeviceIndices</code> and
<a href="#VkBindImageMemoryDeviceGroupInfo">VkBindImageMemoryDeviceGroupInfo</a>::<code>pSplitInstanceBindRegions</code>,
then they interpret the contents of the memory in consistent ways, and data
written to one alias <strong>can</strong> be read by the other alias.</p>
</div>
<div id="resources-memory-aliasing-consistency-planes" class="paragraph">
<p>Additionally, if an individual plane of a multi-planar image and a
single-plane image alias the same memory, then they also interpret the
contents of the memory in consistent ways under the same conditions, but
with the following modifications:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Both <strong>must</strong> have been created with the <code>VK_IMAGE_CREATE_DISJOINT_BIT</code>
flag.</p>
</li>
<li>
<p>The single-plane image <strong>must</strong> have a <a href="formats.html#VkFormat" class="xref page">VkFormat</a> that is
<a href="formats.html#formats-compatible-planes" class="xref page">equivalent</a> to that of the multi-planar
image&#8217;s individual plane.</p>
</li>
<li>
<p>The single-plane image and the individual plane of the multi-planar
image <strong>must</strong> be bound identically to memory
except for <a href="#VkBindImageMemoryDeviceGroupInfo">VkBindImageMemoryDeviceGroupInfo</a>::<code>pDeviceIndices</code>
and
<a href="#VkBindImageMemoryDeviceGroupInfo">VkBindImageMemoryDeviceGroupInfo</a>::<code>pSplitInstanceBindRegions</code>.</p>
</li>
<li>
<p>The <code>width</code> and <code>height</code> of the single-plane image are derived
from the multi-planar image&#8217;s dimensions in the manner listed for
<a href="formats.html#formats-compatible-planes" class="xref page">plane compatibility</a> for the aliased plane.</p>
</li>
<li>
<p>If either image&#8217;s <code>tiling</code> is
<code>VK_IMAGE_TILING_DRM_FORMAT_MODIFIER_EXT</code>, then both images <strong>must</strong> be
<a href="../appendices/glossary.html#glossary-linear-resource" class="xref page">linear</a>.</p>
</li>
<li>
<p>All other creation parameters <strong>must</strong> be identical</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Aliases created by binding the same memory to resources in multiple Vulkan
instances or external APIs using external memory handle export and import
mechanisms interpret the contents of the memory in consistent ways, and data
written to one alias <strong>can</strong> be read by the other alias.</p>
</div>
<div class="paragraph">
<p>Otherwise, the aliases interpret the contents of the memory differently, and
writes via one alias make the contents of memory partially or completely
<strong>undefined</strong> to the other alias.
If the first alias is a host-accessible subresource, then the bytes affected
are those written by the memory operations according to its addressing
scheme.
If the first alias is not host-accessible, then the bytes affected are those
overlapped by the image subresources that were written.
If the second alias is a host-accessible subresource, the affected bytes
become <strong>undefined</strong>.
If the second alias is not host-accessible, all sparse image blocks (for
sparse partially-resident images) or all image subresources (for non-sparse
image and fully resident sparse images) that overlap the affected bytes
become <strong>undefined</strong>.</p>
</div>
<div class="paragraph">
<p>If any image subresources are made <strong>undefined</strong> due to writes to an alias,
then each of those image subresources <strong>must</strong> have its layout transitioned
from <code>VK_IMAGE_LAYOUT_UNDEFINED</code> to a valid layout before it is used, or
from <code>VK_IMAGE_LAYOUT_PREINITIALIZED</code> if the memory has been written by
the host.
If any sparse blocks of a sparse image have been made <strong>undefined</strong>, then only
the image subresources containing them <strong>must</strong> be transitioned.</p>
</div>
<div class="paragraph">
<p>Use of an overlapping range by two aliases <strong>must</strong> be separated by a memory
dependency using the appropriate <a href="synchronization.html#synchronization-access-types" class="xref page">access types</a> if at least one of those uses performs writes, whether the aliases
interpret memory consistently or not.
If buffer or image memory barriers are used, the scope of the barrier <strong>must</strong>
contain the entire range and/or set of image subresources that overlap.</p>
</div>
<div class="paragraph">
<p>If two aliasing image views are used in the same framebuffer, then the
render pass <strong>must</strong> declare the attachments using the
<a href="renderpass.html#renderpass-aliasing" class="xref page"><code>VK_ATTACHMENT_DESCRIPTION_MAY_ALIAS_BIT</code></a>, and
follow the other rules listed in that section.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="title">Note</div>
<div class="paragraph">
<p>Memory recycled via an application suballocator (i.e. without freeing and
reallocating the memory objects) is not substantially different from memory
aliasing.
However, a suballocator usually waits on a fence before recycling a region
of memory, and signaling a fence involves sufficient implicit dependencies
to satisfy all the above requirements.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="sect2">
<h3 id="resources-memory-overlap"><a class="anchor" href="#resources-memory-overlap"></a>Resource Memory Overlap</h3>
<div class="paragraph">
<p>Applications <strong>can</strong> safely access a resource concurrently as long as the
memory locations do not overlap as defined in
<a href="../appendices/memorymodel.html#memory-model-memory-location" class="xref page">Memory Location</a>.
This includes aliased resources if such aliasing is well-defined.
It also includes access from different queues and/or queue families if such
concurrent access is supported by the resource.
Transfer commands only access memory locations specified by the range of the
transfer command.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="title">Note</div>
<div class="paragraph">
<p>The intent is that buffers (or linear images) can be accessed concurrently,
even when they share cache lines, but otherwise do not access the same
memory range.
The concept of a device cache line size is not exposed in the memory model.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="resources-buffer-collection-fuchsia"><a class="anchor" href="#resources-buffer-collection-fuchsia"></a>Buffer Collections</h2>
<div class="sectionbody">
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Fuchsia&#8217;s FIDL-based Sysmem service interoperates with Vulkan via the
<code><a href="../appendices/extensions.html#VK_FUCHSIA_buffer_collection" class="xref page">VK_FUCHSIA_buffer_collection</a></code> extension.</p>
</div>
<div class="paragraph">
<p>A buffer collection is a set of one or more buffers which were allocated
together as a group and which all have the same properties.
These properties describe the buffers' internal representation, such as its
dimensions and memory layout.
This ensures that all of the buffers can be used interchangeably by tasks
that require swapping among multiple buffers, such as double-buffered
graphics rendering.</p>
</div>
<div class="paragraph">
<p>On Fuchsia, the Sysmem service uses buffer collections as a core construct
in its design.</p>
</div>
<div class="paragraph">
<p>Buffer collections are represented by <code>VkBufferCollectionFUCHSIA</code>
handles:</p>
</div>
<div id="VkBufferCollectionFUCHSIA" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_FUCHSIA_buffer_collection
VK_DEFINE_NON_DISPATCHABLE_HANDLE(VkBufferCollectionFUCHSIA)</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_definitions"><a class="anchor" href="#_definitions"></a>Definitions</h3>
<div class="ulist">
<ul>
<li>
<p>FIDL - Fuchsia Interface Definition Language.
The declarative language used to define FIDL interprocess communication
interfaces on Fuchsia.
FIDL files use the <code>fidl</code> extension.
FIDL is also used to refer to the services defined by interfaces
declared in the FIDL language</p>
</li>
<li>
<p>Sysmem - The FIDL service that facilitates optimal buffer sharing and
reuse on Fuchsia</p>
</li>
<li>
<p>client - Any participant of the buffer collection e.g. the Vulkan
application</p>
</li>
<li>
<p>token - A <code>zx_handle_t</code> Zircon channel object that allows
participation in the buffer collection</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_platform_initialization_for_buffer_collections"><a class="anchor" href="#_platform_initialization_for_buffer_collections"></a>Platform Initialization for Buffer Collections</h3>
<div class="paragraph">
<p>To initialize a buffer collection on Fuchsia:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Connect to the Sysmem service to initialize a Sysmem allocator</p>
</li>
<li>
<p>Create an initial buffer collection token using the Sysmem allocator</p>
</li>
<li>
<p>Duplicate the token for each participant beyond the initiator</p>
</li>
<li>
<p>See the Sysmem Overview and fuchsia.sysmem FIDL documentation on
fuchsia.dev for more detailed information</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_create_the_buffer_collection"><a class="anchor" href="#_create_the_buffer_collection"></a>Create the Buffer Collection</h3>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>To create a <a href="#VkBufferCollectionFUCHSIA">VkBufferCollectionFUCHSIA</a> for Vulkan to participate in the
buffer collection:</p>
</div>
<div id="vkCreateBufferCollectionFUCHSIA" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_FUCHSIA_buffer_collection
VkResult vkCreateBufferCollectionFUCHSIA(
    VkDevice                                    device,
    const VkBufferCollectionCreateInfoFUCHSIA*  pCreateInfo,
    const VkAllocationCallbacks*                pAllocator,
    VkBufferCollectionFUCHSIA*                  pCollection);</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>device</code> is the logical device that creates the
<code>VkBufferCollectionFUCHSIA</code></p>
</li>
<li>
<p><code>pCreateInfo</code> is a pointer to a
<a href="#VkBufferCollectionCreateInfoFUCHSIA">VkBufferCollectionCreateInfoFUCHSIA</a> structure containing
parameters affecting creation of the buffer collection</p>
</li>
<li>
<p><code>pAllocator</code> is a pointer to a <a href="memory.html#VkAllocationCallbacks" class="xref page">VkAllocationCallbacks</a> structure
controlling host memory allocation as described in the
<a href="memory.html#memory-allocation" class="xref page">Memory Allocation</a> chapter</p>
</li>
<li>
<p><code>pBufferCollection</code> is a pointer to a
<a href="#VkBufferCollectionFUCHSIA">VkBufferCollectionFUCHSIA</a> handle in which the resulting buffer
collection object is returned</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCreateBufferCollectionFUCHSIA-device-parameter" href="#VUID-vkCreateBufferCollectionFUCHSIA-device-parameter"></a> <span class="vuid">VUID-vkCreateBufferCollectionFUCHSIA-device-parameter</span><br>
 <code>device</code> <strong>must</strong> be a valid <a href="devsandqueues.html#VkDevice" class="xref page">VkDevice</a> handle</p>
</li>
<li>
<p><a id="VUID-vkCreateBufferCollectionFUCHSIA-pCreateInfo-parameter" href="#VUID-vkCreateBufferCollectionFUCHSIA-pCreateInfo-parameter"></a> <span class="vuid">VUID-vkCreateBufferCollectionFUCHSIA-pCreateInfo-parameter</span><br>
 <code>pCreateInfo</code> <strong>must</strong> be a valid pointer to a valid <a href="#VkBufferCollectionCreateInfoFUCHSIA">VkBufferCollectionCreateInfoFUCHSIA</a> structure</p>
</li>
<li>
<p><a id="VUID-vkCreateBufferCollectionFUCHSIA-pAllocator-parameter" href="#VUID-vkCreateBufferCollectionFUCHSIA-pAllocator-parameter"></a> <span class="vuid">VUID-vkCreateBufferCollectionFUCHSIA-pAllocator-parameter</span><br>
 If <code>pAllocator</code> is not <code>NULL</code>, <code>pAllocator</code> <strong>must</strong> be a valid pointer to a valid <a href="memory.html#VkAllocationCallbacks" class="xref page">VkAllocationCallbacks</a> structure</p>
</li>
<li>
<p><a id="VUID-vkCreateBufferCollectionFUCHSIA-pCollection-parameter" href="#VUID-vkCreateBufferCollectionFUCHSIA-pCollection-parameter"></a> <span class="vuid">VUID-vkCreateBufferCollectionFUCHSIA-pCollection-parameter</span><br>
 <code>pCollection</code> <strong>must</strong> be a valid pointer to a <a href="#VkBufferCollectionFUCHSIA">VkBufferCollectionFUCHSIA</a> handle</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Return Codes</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><a href="fundamentals.html#fundamentals-successcodes" class="xref page">Success</a></dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><code>VK_SUCCESS</code></p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1"><a href="fundamentals.html#fundamentals-errorcodes" class="xref page">Failure</a></dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><code>VK_ERROR_OUT_OF_HOST_MEMORY</code></p>
</li>
<li>
<p><code>VK_ERROR_INVALID_EXTERNAL_HANDLE</code></p>
</li>
<li>
<p><code>VK_ERROR_INITIALIZATION_FAILED</code></p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Host Access</div>
<div class="paragraph">
<p>All functions referencing a <a href="#VkBufferCollectionFUCHSIA">VkBufferCollectionFUCHSIA</a> <strong>must</strong> be
externally synchronized with the exception of
<code>vkCreateBufferCollectionFUCHSIA</code>.</p>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>VkBufferCollectionCreateInfoFUCHSIA</code> structure is defined as:</p>
</div>
<div id="VkBufferCollectionCreateInfoFUCHSIA" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_FUCHSIA_buffer_collection
typedef struct VkBufferCollectionCreateInfoFUCHSIA {
    VkStructureType    sType;
    const void*        pNext;
    zx_handle_t        collectionToken;
} VkBufferCollectionCreateInfoFUCHSIA;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is a <a href="fundamentals.html#VkStructureType" class="xref page">VkStructureType</a> value identifying this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure</p>
</li>
<li>
<p><code>collectionToken</code> is a <code>zx_handle_t</code> containing the Sysmem
client&#8217;s buffer collection token</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkBufferCollectionCreateInfoFUCHSIA-collectionToken-06393" href="#VUID-VkBufferCollectionCreateInfoFUCHSIA-collectionToken-06393"></a> <span class="vuid">VUID-VkBufferCollectionCreateInfoFUCHSIA-collectionToken-06393</span><br>

<code>collectionToken</code> <strong>must</strong> be a valid <code>zx_handle_t</code> to a Zircon
channel allocated from Sysmem
(<code>fuchsia.sysmem.Allocator</code>/AllocateSharedCollection) with
<code>ZX_DEFAULT_CHANNEL_RIGHTS</code> rights</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkBufferCollectionCreateInfoFUCHSIA-sType-sType" href="#VUID-VkBufferCollectionCreateInfoFUCHSIA-sType-sType"></a> <span class="vuid">VUID-VkBufferCollectionCreateInfoFUCHSIA-sType-sType</span><br>
 <code>sType</code> <strong>must</strong> be <code>VK_STRUCTURE_TYPE_BUFFER_COLLECTION_CREATE_INFO_FUCHSIA</code></p>
</li>
<li>
<p><a id="VUID-VkBufferCollectionCreateInfoFUCHSIA-pNext-pNext" href="#VUID-VkBufferCollectionCreateInfoFUCHSIA-pNext-pNext"></a> <span class="vuid">VUID-VkBufferCollectionCreateInfoFUCHSIA-pNext-pNext</span><br>
 <code>pNext</code> <strong>must</strong> be <code>NULL</code></p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_set_the_constraints"><a class="anchor" href="#_set_the_constraints"></a>Set the Constraints</h3>
<div class="paragraph">
<p>Buffer collections can be established for <a href="#VkImage">VkImage</a> allocations or
<a href="#VkBuffer">VkBuffer</a> allocations.</p>
</div>
<div class="sect3">
<h4 id="_set_image_based_buffer_collection_constraints"><a class="anchor" href="#_set_image_based_buffer_collection_constraints"></a>Set Image-based Buffer Collection Constraints</h4>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Setting the constraints on the buffer collection initiates the format
negotiation and allocation of the buffer collection.
To set the constraints on a <a href="#VkImage">VkImage</a> buffer collection, call:</p>
</div>
<div id="vkSetBufferCollectionImageConstraintsFUCHSIA" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_FUCHSIA_buffer_collection
VkResult vkSetBufferCollectionImageConstraintsFUCHSIA(
    VkDevice                                    device,
    VkBufferCollectionFUCHSIA                   collection,
    const VkImageConstraintsInfoFUCHSIA*        pImageConstraintsInfo);</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>device</code> is the logical device</p>
</li>
<li>
<p><code>collection</code> is the <a href="#VkBufferCollectionFUCHSIA">VkBufferCollectionFUCHSIA</a> handle</p>
</li>
<li>
<p><code>pImageConstraintsInfo</code> is a pointer to a
<a href="#VkImageConstraintsInfoFUCHSIA">VkImageConstraintsInfoFUCHSIA</a> structure</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><code>vkSetBufferCollectionImageConstraintsFUCHSIA</code> <strong>may</strong> fail if
<code>pImageConstraintsInfo-&gt;formatConstraintsCount</code> is larger than the
implementation-defined limit.
If that occurs, <a href="#vkSetBufferCollectionImageConstraintsFUCHSIA">vkSetBufferCollectionImageConstraintsFUCHSIA</a> will
return <code>VK_ERROR_INITIALIZATION_FAILED</code>.</p>
</div>
<div class="paragraph">
<p><code>vkSetBufferCollectionImageConstraintsFUCHSIA</code> <strong>may</strong> fail if the
implementation does not support any of the formats described by the
<code>pImageConstraintsInfo</code> structure.
If that occurs, <a href="#vkSetBufferCollectionImageConstraintsFUCHSIA">vkSetBufferCollectionImageConstraintsFUCHSIA</a> will
return <code>VK_ERROR_FORMAT_NOT_SUPPORTED</code>.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkSetBufferCollectionImageConstraintsFUCHSIA-collection-06394" href="#VUID-vkSetBufferCollectionImageConstraintsFUCHSIA-collection-06394"></a> <span class="vuid">VUID-vkSetBufferCollectionImageConstraintsFUCHSIA-collection-06394</span><br>

<code>vkSetBufferCollectionImageConstraintsFUCHSIA</code> or
<code>vkSetBufferCollectionBufferConstraintsFUCHSIA</code> <strong>must</strong> not have
already been called on <code>collection</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkSetBufferCollectionImageConstraintsFUCHSIA-device-parameter" href="#VUID-vkSetBufferCollectionImageConstraintsFUCHSIA-device-parameter"></a> <span class="vuid">VUID-vkSetBufferCollectionImageConstraintsFUCHSIA-device-parameter</span><br>
 <code>device</code> <strong>must</strong> be a valid <a href="devsandqueues.html#VkDevice" class="xref page">VkDevice</a> handle</p>
</li>
<li>
<p><a id="VUID-vkSetBufferCollectionImageConstraintsFUCHSIA-collection-parameter" href="#VUID-vkSetBufferCollectionImageConstraintsFUCHSIA-collection-parameter"></a> <span class="vuid">VUID-vkSetBufferCollectionImageConstraintsFUCHSIA-collection-parameter</span><br>
 <code>collection</code> <strong>must</strong> be a valid <a href="#VkBufferCollectionFUCHSIA">VkBufferCollectionFUCHSIA</a> handle</p>
</li>
<li>
<p><a id="VUID-vkSetBufferCollectionImageConstraintsFUCHSIA-pImageConstraintsInfo-parameter" href="#VUID-vkSetBufferCollectionImageConstraintsFUCHSIA-pImageConstraintsInfo-parameter"></a> <span class="vuid">VUID-vkSetBufferCollectionImageConstraintsFUCHSIA-pImageConstraintsInfo-parameter</span><br>
 <code>pImageConstraintsInfo</code> <strong>must</strong> be a valid pointer to a valid <a href="#VkImageConstraintsInfoFUCHSIA">VkImageConstraintsInfoFUCHSIA</a> structure</p>
</li>
<li>
<p><a id="VUID-vkSetBufferCollectionImageConstraintsFUCHSIA-collection-parent" href="#VUID-vkSetBufferCollectionImageConstraintsFUCHSIA-collection-parent"></a> <span class="vuid">VUID-vkSetBufferCollectionImageConstraintsFUCHSIA-collection-parent</span><br>
 <code>collection</code> <strong>must</strong> have been created, allocated, or retrieved from <code>device</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Return Codes</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><a href="fundamentals.html#fundamentals-successcodes" class="xref page">Success</a></dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><code>VK_SUCCESS</code></p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1"><a href="fundamentals.html#fundamentals-errorcodes" class="xref page">Failure</a></dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><code>VK_ERROR_INITIALIZATION_FAILED</code></p>
</li>
<li>
<p><code>VK_ERROR_OUT_OF_HOST_MEMORY</code></p>
</li>
<li>
<p><code>VK_ERROR_FORMAT_NOT_SUPPORTED</code></p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>VkImageConstraintsInfoFUCHSIA</code> structure is defined as:</p>
</div>
<div id="VkImageConstraintsInfoFUCHSIA" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_FUCHSIA_buffer_collection
typedef struct VkImageConstraintsInfoFUCHSIA {
    VkStructureType                               sType;
    const void*                                   pNext;
    uint32_t                                      formatConstraintsCount;
    const VkImageFormatConstraintsInfoFUCHSIA*    pFormatConstraints;
    VkBufferCollectionConstraintsInfoFUCHSIA      bufferCollectionConstraints;
    VkImageConstraintsInfoFlagsFUCHSIA            flags;
} VkImageConstraintsInfoFUCHSIA;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is a <a href="fundamentals.html#VkStructureType" class="xref page">VkStructureType</a> value identifying this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>formatConstraintsCount</code> is the number of elements in
<code>pFormatConstraints</code>.</p>
</li>
<li>
<p><code>pFormatConstraints</code> is a pointer to an array of
<a href="#VkImageFormatConstraintsInfoFUCHSIA">VkImageFormatConstraintsInfoFUCHSIA</a> structures of size
<code>formatConstraintsCount</code> that is used to further constrain buffer
collection format selection for image-based buffer collections.</p>
</li>
<li>
<p><code>bufferCollectionConstraints</code> is a
<a href="#VkBufferCollectionConstraintsInfoFUCHSIA">VkBufferCollectionConstraintsInfoFUCHSIA</a> structure used to supply
parameters for the negotiation and allocation for buffer-based buffer
collections.</p>
</li>
<li>
<p><code>flags</code> is a <a href="#VkImageConstraintsInfoFlagBitsFUCHSIA">VkImageConstraintsInfoFlagBitsFUCHSIA</a> value
specifying hints about the type of memory Sysmem should allocate for the
buffer collection.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkImageConstraintsInfoFUCHSIA-pFormatConstraints-06395" href="#VUID-VkImageConstraintsInfoFUCHSIA-pFormatConstraints-06395"></a> <span class="vuid">VUID-VkImageConstraintsInfoFUCHSIA-pFormatConstraints-06395</span><br>

All elements of <code>pFormatConstraints</code> <strong>must</strong> have at least one bit set
in its
<a href="#VkImageFormatConstraintsInfoFUCHSIA">VkImageFormatConstraintsInfoFUCHSIA</a>::<code>requiredFormatFeatures</code></p>
</li>
<li>
<p><a id="VUID-VkImageConstraintsInfoFUCHSIA-pFormatConstraints-06396" href="#VUID-VkImageConstraintsInfoFUCHSIA-pFormatConstraints-06396"></a> <span class="vuid">VUID-VkImageConstraintsInfoFUCHSIA-pFormatConstraints-06396</span><br>

If <code>pFormatConstraints-&gt;imageCreateInfo&#8594;usage</code> contains
<code>VK_IMAGE_USAGE_SAMPLED_BIT</code>, then
<code>pFormatConstraints-&gt;requiredFormatFeatures</code> <strong>must</strong> contain
<code>VK_FORMAT_FEATURE_SAMPLED_IMAGE_BIT</code></p>
</li>
<li>
<p><a id="VUID-VkImageConstraintsInfoFUCHSIA-pFormatConstraints-06397" href="#VUID-VkImageConstraintsInfoFUCHSIA-pFormatConstraints-06397"></a> <span class="vuid">VUID-VkImageConstraintsInfoFUCHSIA-pFormatConstraints-06397</span><br>

If <code>pFormatConstraints-&gt;imageCreateInfo&#8594;usage</code> contains
<code>VK_IMAGE_USAGE_STORAGE_BIT</code>, then
<code>pFormatConstraints-&gt;requiredFormatFeatures</code> <strong>must</strong> contain
<code>VK_FORMAT_FEATURE_STORAGE_IMAGE_BIT</code></p>
</li>
<li>
<p><a id="VUID-VkImageConstraintsInfoFUCHSIA-pFormatConstraints-06398" href="#VUID-VkImageConstraintsInfoFUCHSIA-pFormatConstraints-06398"></a> <span class="vuid">VUID-VkImageConstraintsInfoFUCHSIA-pFormatConstraints-06398</span><br>

If <code>pFormatConstraints-&gt;imageCreateInfo&#8594;usage</code> contains
<code>VK_IMAGE_USAGE_COLOR_ATTACHMENT_BIT</code>, then
<code>pFormatConstraints-&gt;requiredFormatFeatures</code> <strong>must</strong> contain
<code>VK_FORMAT_FEATURE_COLOR_ATTACHMENT_BIT</code></p>
</li>
<li>
<p><a id="VUID-VkImageConstraintsInfoFUCHSIA-pFormatConstraints-06399" href="#VUID-VkImageConstraintsInfoFUCHSIA-pFormatConstraints-06399"></a> <span class="vuid">VUID-VkImageConstraintsInfoFUCHSIA-pFormatConstraints-06399</span><br>

If <code>pFormatConstraints-&gt;imageCreateInfo&#8594;usage</code> contains
<code>VK_IMAGE_USAGE_DEPTH_STENCIL_ATTACHMENT_BIT</code>, then
<code>pFormatConstraints-&gt;requiredFormatFeatures</code> <strong>must</strong> contain
<code>VK_FORMAT_FEATURE_DEPTH_STENCIL_ATTACHMENT_BIT</code></p>
</li>
<li>
<p><a id="VUID-VkImageConstraintsInfoFUCHSIA-pFormatConstraints-06400" href="#VUID-VkImageConstraintsInfoFUCHSIA-pFormatConstraints-06400"></a> <span class="vuid">VUID-VkImageConstraintsInfoFUCHSIA-pFormatConstraints-06400</span><br>

If <code>pFormatConstraints-&gt;imageCreateInfo&#8594;usage</code> contains
<code>VK_IMAGE_USAGE_INPUT_ATTACHMENT_BIT</code>, then
<code>pFormatConstraints-&gt;requiredFormatFeatures</code> <strong>must</strong> contain at least
one of <code>VK_FORMAT_FEATURE_COLOR_ATTACHMENT_BIT</code> or
<code>VK_FORMAT_FEATURE_DEPTH_STENCIL_ATTACHMENT_BIT</code></p>
</li>
<li>
<p><a id="VUID-VkImageConstraintsInfoFUCHSIA-attachmentFragmentShadingRate-06401" href="#VUID-VkImageConstraintsInfoFUCHSIA-attachmentFragmentShadingRate-06401"></a> <span class="vuid">VUID-VkImageConstraintsInfoFUCHSIA-attachmentFragmentShadingRate-06401</span><br>

If the <a href="features.html#features-attachmentFragmentShadingRate" class="xref page">    <code>attachmentFragmentShadingRate</code></a> feature is enabled, and
<code>pFormatConstraints-&gt;imageCreateInfo&#8594;usage</code> contains
<code>VK_IMAGE_USAGE_FRAGMENT_SHADING_RATE_ATTACHMENT_BIT_KHR</code>, then
<code>pFormatConstraints-&gt;requiredFormatFeatures</code> <strong>must</strong> contain
<code>VK_FORMAT_FEATURE_FRAGMENT_SHADING_RATE_ATTACHMENT_BIT_KHR</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkImageConstraintsInfoFUCHSIA-sType-sType" href="#VUID-VkImageConstraintsInfoFUCHSIA-sType-sType"></a> <span class="vuid">VUID-VkImageConstraintsInfoFUCHSIA-sType-sType</span><br>
 <code>sType</code> <strong>must</strong> be <code>VK_STRUCTURE_TYPE_IMAGE_CONSTRAINTS_INFO_FUCHSIA</code></p>
</li>
<li>
<p><a id="VUID-VkImageConstraintsInfoFUCHSIA-pNext-pNext" href="#VUID-VkImageConstraintsInfoFUCHSIA-pNext-pNext"></a> <span class="vuid">VUID-VkImageConstraintsInfoFUCHSIA-pNext-pNext</span><br>
 <code>pNext</code> <strong>must</strong> be <code>NULL</code></p>
</li>
<li>
<p><a id="VUID-VkImageConstraintsInfoFUCHSIA-pFormatConstraints-parameter" href="#VUID-VkImageConstraintsInfoFUCHSIA-pFormatConstraints-parameter"></a> <span class="vuid">VUID-VkImageConstraintsInfoFUCHSIA-pFormatConstraints-parameter</span><br>
 <code>pFormatConstraints</code> <strong>must</strong> be a valid pointer to an array of <code>formatConstraintsCount</code> valid <a href="#VkImageFormatConstraintsInfoFUCHSIA">VkImageFormatConstraintsInfoFUCHSIA</a> structures</p>
</li>
<li>
<p><a id="VUID-VkImageConstraintsInfoFUCHSIA-bufferCollectionConstraints-parameter" href="#VUID-VkImageConstraintsInfoFUCHSIA-bufferCollectionConstraints-parameter"></a> <span class="vuid">VUID-VkImageConstraintsInfoFUCHSIA-bufferCollectionConstraints-parameter</span><br>
 <code>bufferCollectionConstraints</code> <strong>must</strong> be a valid <a href="#VkBufferCollectionConstraintsInfoFUCHSIA">VkBufferCollectionConstraintsInfoFUCHSIA</a> structure</p>
</li>
<li>
<p><a id="VUID-VkImageConstraintsInfoFUCHSIA-flags-parameter" href="#VUID-VkImageConstraintsInfoFUCHSIA-flags-parameter"></a> <span class="vuid">VUID-VkImageConstraintsInfoFUCHSIA-flags-parameter</span><br>
 <code>flags</code> <strong>must</strong> be a valid combination of <a href="#VkImageConstraintsInfoFlagBitsFUCHSIA">VkImageConstraintsInfoFlagBitsFUCHSIA</a> values</p>
</li>
<li>
<p><a id="VUID-VkImageConstraintsInfoFUCHSIA-formatConstraintsCount-arraylength" href="#VUID-VkImageConstraintsInfoFUCHSIA-formatConstraintsCount-arraylength"></a> <span class="vuid">VUID-VkImageConstraintsInfoFUCHSIA-formatConstraintsCount-arraylength</span><br>
 <code>formatConstraintsCount</code> <strong>must</strong> be greater than <code>0</code></p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div id="VkImageConstraintsInfoFlagsFUCHSIA" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_FUCHSIA_buffer_collection
typedef VkFlags VkImageConstraintsInfoFlagsFUCHSIA;</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>VkImageConstraintsInfoFlagsFUCHSIA</code> is a bitmask type for setting a
mask of zero or more <a href="#VkImageConstraintsInfoFlagBitsFUCHSIA">VkImageConstraintsInfoFlagBitsFUCHSIA</a> bits.</p>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Bits which <strong>can</strong> be set in
<a href="#VkImageConstraintsInfoFlagBitsFUCHSIA">VkImageConstraintsInfoFlagBitsFUCHSIA</a>::<code>flags</code> include:</p>
</div>
<div id="VkImageConstraintsInfoFlagBitsFUCHSIA" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_FUCHSIA_buffer_collection
typedef enum VkImageConstraintsInfoFlagBitsFUCHSIA {
    VK_IMAGE_CONSTRAINTS_INFO_CPU_READ_RARELY_FUCHSIA = 0x00000001,
    VK_IMAGE_CONSTRAINTS_INFO_CPU_READ_OFTEN_FUCHSIA = 0x00000002,
    VK_IMAGE_CONSTRAINTS_INFO_CPU_WRITE_RARELY_FUCHSIA = 0x00000004,
    VK_IMAGE_CONSTRAINTS_INFO_CPU_WRITE_OFTEN_FUCHSIA = 0x00000008,
    VK_IMAGE_CONSTRAINTS_INFO_PROTECTED_OPTIONAL_FUCHSIA = 0x00000010,
} VkImageConstraintsInfoFlagBitsFUCHSIA;</code></pre>
</div>
</div>
<div class="paragraph">
<p>General hints about the type of memory that should be allocated by Sysmem
based on the expected usage of the images in the buffer collection include:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>VK_IMAGE_CONSTRAINTS_INFO_CPU_READ_RARELY_FUCHSIA</code></p>
</li>
<li>
<p><code>VK_IMAGE_CONSTRAINTS_INFO_CPU_READ_OFTEN_FUCHSIA</code></p>
</li>
<li>
<p><code>VK_IMAGE_CONSTRAINTS_INFO_CPU_WRITE_RARELY_FUCHSIA</code></p>
</li>
<li>
<p><code>VK_IMAGE_CONSTRAINTS_INFO_CPU_WRITE_OFTEN_FUCHSIA</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>For protected memory:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>VK_IMAGE_CONSTRAINTS_INFO_PROTECTED_OPTIONAL_FUCHSIA</code> specifies
that protected memory is optional for the buffer collection.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Note that if all participants in the buffer collection (Vulkan or otherwise)
specify that protected memory is optional, Sysmem will not allocate
protected memory.</p>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>VkImageFormatConstraintsInfoFUCHSIA</code> structure is defined as:</p>
</div>
<div id="VkImageFormatConstraintsInfoFUCHSIA" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_FUCHSIA_buffer_collection
typedef struct VkImageFormatConstraintsInfoFUCHSIA {
    VkStructureType                         sType;
    const void*                             pNext;
    VkImageCreateInfo                       imageCreateInfo;
    VkFormatFeatureFlags                    requiredFormatFeatures;
    VkImageFormatConstraintsFlagsFUCHSIA    flags;
    uint64_t                                sysmemPixelFormat;
    uint32_t                                colorSpaceCount;
    const VkSysmemColorSpaceFUCHSIA*        pColorSpaces;
} VkImageFormatConstraintsInfoFUCHSIA;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is a <a href="fundamentals.html#VkStructureType" class="xref page">VkStructureType</a> value identifying this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure</p>
</li>
<li>
<p><code>imageCreateInfo</code> is the <a href="#VkImageCreateInfo">VkImageCreateInfo</a> used to create a
<a href="#VkImage">VkImage</a> that is to use memory from the
<a href="#VkBufferCollectionFUCHSIA">VkBufferCollectionFUCHSIA</a></p>
</li>
<li>
<p><code>requiredFormatFeatures</code> is a bitmask of
<code>VkFormatFeatureFlagBits</code> specifying required features of the
buffers in the buffer collection</p>
</li>
<li>
<p><code>flags</code> is reserved for future use</p>
</li>
<li>
<p><code>sysmemPixelFormat</code> is a <code>PixelFormatType</code> value from the
<code>fuchsia.sysmem/image_formats.fidl</code> FIDL interface</p>
</li>
<li>
<p><code>colorSpaceCount</code> the element count of <code>pColorSpaces</code></p>
</li>
<li>
<p><code>pColorSpaces</code> is a pointer to an array of
<a href="#VkSysmemColorSpaceFUCHSIA">VkSysmemColorSpaceFUCHSIA</a> structs of size <code>colorSpaceCount</code></p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkImageFormatConstraintsInfoFUCHSIA-sType-sType" href="#VUID-VkImageFormatConstraintsInfoFUCHSIA-sType-sType"></a> <span class="vuid">VUID-VkImageFormatConstraintsInfoFUCHSIA-sType-sType</span><br>
 <code>sType</code> <strong>must</strong> be <code>VK_STRUCTURE_TYPE_IMAGE_FORMAT_CONSTRAINTS_INFO_FUCHSIA</code></p>
</li>
<li>
<p><a id="VUID-VkImageFormatConstraintsInfoFUCHSIA-pNext-pNext" href="#VUID-VkImageFormatConstraintsInfoFUCHSIA-pNext-pNext"></a> <span class="vuid">VUID-VkImageFormatConstraintsInfoFUCHSIA-pNext-pNext</span><br>
 <code>pNext</code> <strong>must</strong> be <code>NULL</code></p>
</li>
<li>
<p><a id="VUID-VkImageFormatConstraintsInfoFUCHSIA-imageCreateInfo-parameter" href="#VUID-VkImageFormatConstraintsInfoFUCHSIA-imageCreateInfo-parameter"></a> <span class="vuid">VUID-VkImageFormatConstraintsInfoFUCHSIA-imageCreateInfo-parameter</span><br>
 <code>imageCreateInfo</code> <strong>must</strong> be a valid <a href="#VkImageCreateInfo">VkImageCreateInfo</a> structure</p>
</li>
<li>
<p><a id="VUID-VkImageFormatConstraintsInfoFUCHSIA-requiredFormatFeatures-parameter" href="#VUID-VkImageFormatConstraintsInfoFUCHSIA-requiredFormatFeatures-parameter"></a> <span class="vuid">VUID-VkImageFormatConstraintsInfoFUCHSIA-requiredFormatFeatures-parameter</span><br>
 <code>requiredFormatFeatures</code> <strong>must</strong> be a valid combination of <a href="formats.html#VkFormatFeatureFlagBits" class="xref page">VkFormatFeatureFlagBits</a> values</p>
</li>
<li>
<p><a id="VUID-VkImageFormatConstraintsInfoFUCHSIA-requiredFormatFeatures-requiredbitmask" href="#VUID-VkImageFormatConstraintsInfoFUCHSIA-requiredFormatFeatures-requiredbitmask"></a> <span class="vuid">VUID-VkImageFormatConstraintsInfoFUCHSIA-requiredFormatFeatures-requiredbitmask</span><br>
 <code>requiredFormatFeatures</code> <strong>must</strong> not be <code>0</code></p>
</li>
<li>
<p><a id="VUID-VkImageFormatConstraintsInfoFUCHSIA-flags-zerobitmask" href="#VUID-VkImageFormatConstraintsInfoFUCHSIA-flags-zerobitmask"></a> <span class="vuid">VUID-VkImageFormatConstraintsInfoFUCHSIA-flags-zerobitmask</span><br>
 <code>flags</code> <strong>must</strong> be <code>0</code></p>
</li>
<li>
<p><a id="VUID-VkImageFormatConstraintsInfoFUCHSIA-pColorSpaces-parameter" href="#VUID-VkImageFormatConstraintsInfoFUCHSIA-pColorSpaces-parameter"></a> <span class="vuid">VUID-VkImageFormatConstraintsInfoFUCHSIA-pColorSpaces-parameter</span><br>
 <code>pColorSpaces</code> <strong>must</strong> be a valid pointer to an array of <code>colorSpaceCount</code> valid <a href="#VkSysmemColorSpaceFUCHSIA">VkSysmemColorSpaceFUCHSIA</a> structures</p>
</li>
<li>
<p><a id="VUID-VkImageFormatConstraintsInfoFUCHSIA-colorSpaceCount-arraylength" href="#VUID-VkImageFormatConstraintsInfoFUCHSIA-colorSpaceCount-arraylength"></a> <span class="vuid">VUID-VkImageFormatConstraintsInfoFUCHSIA-colorSpaceCount-arraylength</span><br>
 <code>colorSpaceCount</code> <strong>must</strong> be greater than <code>0</code></p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div id="VkImageFormatConstraintsFlagsFUCHSIA" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_FUCHSIA_buffer_collection
typedef VkFlags VkImageFormatConstraintsFlagsFUCHSIA;</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>VkImageFormatConstraintsFlagsFUCHSIA</code> is a bitmask type for setting a
mask, but is currently reserved for future use.</p>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>VkBufferCollectionConstraintsInfoFUCHSIA</code> structure is defined as:</p>
</div>
<div id="VkBufferCollectionConstraintsInfoFUCHSIA" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_FUCHSIA_buffer_collection
typedef struct VkBufferCollectionConstraintsInfoFUCHSIA {
    VkStructureType    sType;
    const void*        pNext;
    uint32_t           minBufferCount;
    uint32_t           maxBufferCount;
    uint32_t           minBufferCountForCamping;
    uint32_t           minBufferCountForDedicatedSlack;
    uint32_t           minBufferCountForSharedSlack;
} VkBufferCollectionConstraintsInfoFUCHSIA;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is a <a href="fundamentals.html#VkStructureType" class="xref page">VkStructureType</a> value identifying this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure</p>
</li>
<li>
<p><code>minBufferCount</code> is the minimum number of buffers available in the
collection</p>
</li>
<li>
<p><code>maxBufferCount</code> is the maximum number of buffers allowed in the
collection</p>
</li>
<li>
<p><code>minBufferCountForCamping</code> is the per-participant minimum buffers
for camping</p>
</li>
<li>
<p><code>minBufferCountForDedicatedSlack</code> is the per-participant minimum
buffers for dedicated slack</p>
</li>
<li>
<p><code>minBufferCountForSharedSlack</code> is the per-participant minimum
buffers for shared slack</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Sysmem uses all buffer count parameters in combination to determine the
number of buffers it will allocate.
Sysmem defines buffer count constraints in
<code>fuchsia.sysmem/constraints.fidl</code>.</p>
</div>
<div class="paragraph">
<p><em>Camping</em> as referred to by <code>minBufferCountForCamping</code>, is the number of
buffers that should be available for the participant that are not for
transient use.
This number of buffers is required for the participant to logically operate.</p>
</div>
<div class="paragraph">
<p><em>Slack</em> as referred to by <code>minBufferCountForDedicatedSlack</code> and
<code>minBufferCountForSharedSlack</code>, refers to the number of buffers desired
by participants for optimal performance.
<code>minBufferCountForDedicatedSlack</code> refers to the current participant.
<code>minBufferCountForSharedSlack</code> refers to buffer slack for all
participants in the collection.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkBufferCollectionConstraintsInfoFUCHSIA-sType-sType" href="#VUID-VkBufferCollectionConstraintsInfoFUCHSIA-sType-sType"></a> <span class="vuid">VUID-VkBufferCollectionConstraintsInfoFUCHSIA-sType-sType</span><br>
 <code>sType</code> <strong>must</strong> be <code>VK_STRUCTURE_TYPE_BUFFER_COLLECTION_CONSTRAINTS_INFO_FUCHSIA</code></p>
</li>
<li>
<p><a id="VUID-VkBufferCollectionConstraintsInfoFUCHSIA-pNext-pNext" href="#VUID-VkBufferCollectionConstraintsInfoFUCHSIA-pNext-pNext"></a> <span class="vuid">VUID-VkBufferCollectionConstraintsInfoFUCHSIA-pNext-pNext</span><br>
 <code>pNext</code> <strong>must</strong> be <code>NULL</code></p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>VkSysmemColorSpaceFUCHSIA</code> structure is defined as:</p>
</div>
<div id="VkSysmemColorSpaceFUCHSIA" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_FUCHSIA_buffer_collection
typedef struct VkSysmemColorSpaceFUCHSIA {
    VkStructureType    sType;
    const void*        pNext;
    uint32_t           colorSpace;
} VkSysmemColorSpaceFUCHSIA;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is a <a href="fundamentals.html#VkStructureType" class="xref page">VkStructureType</a> value identifying this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure</p>
</li>
<li>
<p><code>colorSpace</code> value of the Sysmem <code>ColorSpaceType</code></p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkSysmemColorSpaceFUCHSIA-colorSpace-06402" href="#VUID-VkSysmemColorSpaceFUCHSIA-colorSpace-06402"></a> <span class="vuid">VUID-VkSysmemColorSpaceFUCHSIA-colorSpace-06402</span><br>

<code>colorSpace</code> <strong>must</strong> be a <code>ColorSpaceType</code> as defined in
<code>fuchsia.sysmem/image_formats.fidl</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkSysmemColorSpaceFUCHSIA-sType-sType" href="#VUID-VkSysmemColorSpaceFUCHSIA-sType-sType"></a> <span class="vuid">VUID-VkSysmemColorSpaceFUCHSIA-sType-sType</span><br>
 <code>sType</code> <strong>must</strong> be <code>VK_STRUCTURE_TYPE_SYSMEM_COLOR_SPACE_FUCHSIA</code></p>
</li>
<li>
<p><a id="VUID-VkSysmemColorSpaceFUCHSIA-pNext-pNext" href="#VUID-VkSysmemColorSpaceFUCHSIA-pNext-pNext"></a> <span class="vuid">VUID-VkSysmemColorSpaceFUCHSIA-pNext-pNext</span><br>
 <code>pNext</code> <strong>must</strong> be <code>NULL</code></p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_set_buffer_based_buffer_collection_constraints"><a class="anchor" href="#_set_buffer_based_buffer_collection_constraints"></a>Set Buffer-based Buffer Collection Constraints</h4>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>To set the constraints on a <a href="#VkBuffer">VkBuffer</a> buffer collection, call:</p>
</div>
<div id="vkSetBufferCollectionBufferConstraintsFUCHSIA" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_FUCHSIA_buffer_collection
VkResult vkSetBufferCollectionBufferConstraintsFUCHSIA(
    VkDevice                                    device,
    VkBufferCollectionFUCHSIA                   collection,
    const VkBufferConstraintsInfoFUCHSIA*       pBufferConstraintsInfo);</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>device</code> is the logical device</p>
</li>
<li>
<p><code>collection</code> is the <a href="#VkBufferCollectionFUCHSIA">VkBufferCollectionFUCHSIA</a> handle</p>
</li>
<li>
<p><code>pBufferConstraintsInfo</code> is a pointer to a
<a href="#VkBufferConstraintsInfoFUCHSIA">VkBufferConstraintsInfoFUCHSIA</a> structure</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><code>vkSetBufferCollectionBufferConstraintsFUCHSIA</code> <strong>may</strong> fail if the
implementation does not support the constraints specified in the
<code>bufferCollectionConstraints</code> structure.
If that occurs, <a href="#vkSetBufferCollectionBufferConstraintsFUCHSIA">vkSetBufferCollectionBufferConstraintsFUCHSIA</a> will
return <code>VK_ERROR_FORMAT_NOT_SUPPORTED</code>.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkSetBufferCollectionBufferConstraintsFUCHSIA-collection-06403" href="#VUID-vkSetBufferCollectionBufferConstraintsFUCHSIA-collection-06403"></a> <span class="vuid">VUID-vkSetBufferCollectionBufferConstraintsFUCHSIA-collection-06403</span><br>

<code>vkSetBufferCollectionImageConstraintsFUCHSIA</code> or
<code>vkSetBufferCollectionBufferConstraintsFUCHSIA</code> <strong>must</strong> not have
already been called on <code>collection</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkSetBufferCollectionBufferConstraintsFUCHSIA-device-parameter" href="#VUID-vkSetBufferCollectionBufferConstraintsFUCHSIA-device-parameter"></a> <span class="vuid">VUID-vkSetBufferCollectionBufferConstraintsFUCHSIA-device-parameter</span><br>
 <code>device</code> <strong>must</strong> be a valid <a href="devsandqueues.html#VkDevice" class="xref page">VkDevice</a> handle</p>
</li>
<li>
<p><a id="VUID-vkSetBufferCollectionBufferConstraintsFUCHSIA-collection-parameter" href="#VUID-vkSetBufferCollectionBufferConstraintsFUCHSIA-collection-parameter"></a> <span class="vuid">VUID-vkSetBufferCollectionBufferConstraintsFUCHSIA-collection-parameter</span><br>
 <code>collection</code> <strong>must</strong> be a valid <a href="#VkBufferCollectionFUCHSIA">VkBufferCollectionFUCHSIA</a> handle</p>
</li>
<li>
<p><a id="VUID-vkSetBufferCollectionBufferConstraintsFUCHSIA-pBufferConstraintsInfo-parameter" href="#VUID-vkSetBufferCollectionBufferConstraintsFUCHSIA-pBufferConstraintsInfo-parameter"></a> <span class="vuid">VUID-vkSetBufferCollectionBufferConstraintsFUCHSIA-pBufferConstraintsInfo-parameter</span><br>
 <code>pBufferConstraintsInfo</code> <strong>must</strong> be a valid pointer to a valid <a href="#VkBufferConstraintsInfoFUCHSIA">VkBufferConstraintsInfoFUCHSIA</a> structure</p>
</li>
<li>
<p><a id="VUID-vkSetBufferCollectionBufferConstraintsFUCHSIA-collection-parent" href="#VUID-vkSetBufferCollectionBufferConstraintsFUCHSIA-collection-parent"></a> <span class="vuid">VUID-vkSetBufferCollectionBufferConstraintsFUCHSIA-collection-parent</span><br>
 <code>collection</code> <strong>must</strong> have been created, allocated, or retrieved from <code>device</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Return Codes</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><a href="fundamentals.html#fundamentals-successcodes" class="xref page">Success</a></dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><code>VK_SUCCESS</code></p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1"><a href="fundamentals.html#fundamentals-errorcodes" class="xref page">Failure</a></dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><code>VK_ERROR_INITIALIZATION_FAILED</code></p>
</li>
<li>
<p><code>VK_ERROR_OUT_OF_HOST_MEMORY</code></p>
</li>
<li>
<p><code>VK_ERROR_FORMAT_NOT_SUPPORTED</code></p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>VkBufferConstraintsInfoFUCHSIA</code> structure is defined as:</p>
</div>
<div id="VkBufferConstraintsInfoFUCHSIA" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_FUCHSIA_buffer_collection
typedef struct VkBufferConstraintsInfoFUCHSIA {
    VkStructureType                             sType;
    const void*                                 pNext;
    VkBufferCreateInfo                          createInfo;
    VkFormatFeatureFlags                        requiredFormatFeatures;
    VkBufferCollectionConstraintsInfoFUCHSIA    bufferCollectionConstraints;
} VkBufferConstraintsInfoFUCHSIA;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is a <a href="fundamentals.html#VkStructureType" class="xref page">VkStructureType</a> value identifying this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure</p>
</li>
<li>
<p><code>pBufferCreateInfo</code> a pointer to a <a href="#VkBufferCreateInfo">VkBufferCreateInfo</a> struct
describing the buffer attributes for the buffer collection</p>
</li>
<li>
<p><code>requiredFormatFeatures</code> bitmask of <code>VkFormatFeatureFlagBits</code>
required features of the buffers in the buffer collection</p>
</li>
<li>
<p><code>bufferCollectionConstraints</code> is used to supply parameters for the
negotiation and allocation of the buffer collection</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkBufferConstraintsInfoFUCHSIA-requiredFormatFeatures-06404" href="#VUID-VkBufferConstraintsInfoFUCHSIA-requiredFormatFeatures-06404"></a> <span class="vuid">VUID-VkBufferConstraintsInfoFUCHSIA-requiredFormatFeatures-06404</span><br>

The <code>requiredFormatFeatures</code> bitmask of
<code>VkFormatFeatureFlagBits</code> <strong>must</strong> be chosen from among the buffer
compatible format features listed in
<a href="formats.html#buffer-compatible-format-features" class="xref page">buffer compatible format features</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkBufferConstraintsInfoFUCHSIA-sType-sType" href="#VUID-VkBufferConstraintsInfoFUCHSIA-sType-sType"></a> <span class="vuid">VUID-VkBufferConstraintsInfoFUCHSIA-sType-sType</span><br>
 <code>sType</code> <strong>must</strong> be <code>VK_STRUCTURE_TYPE_BUFFER_CONSTRAINTS_INFO_FUCHSIA</code></p>
</li>
<li>
<p><a id="VUID-VkBufferConstraintsInfoFUCHSIA-pNext-pNext" href="#VUID-VkBufferConstraintsInfoFUCHSIA-pNext-pNext"></a> <span class="vuid">VUID-VkBufferConstraintsInfoFUCHSIA-pNext-pNext</span><br>
 <code>pNext</code> <strong>must</strong> be <code>NULL</code></p>
</li>
<li>
<p><a id="VUID-VkBufferConstraintsInfoFUCHSIA-createInfo-parameter" href="#VUID-VkBufferConstraintsInfoFUCHSIA-createInfo-parameter"></a> <span class="vuid">VUID-VkBufferConstraintsInfoFUCHSIA-createInfo-parameter</span><br>
 <code>createInfo</code> <strong>must</strong> be a valid <a href="#VkBufferCreateInfo">VkBufferCreateInfo</a> structure</p>
</li>
<li>
<p><a id="VUID-VkBufferConstraintsInfoFUCHSIA-requiredFormatFeatures-parameter" href="#VUID-VkBufferConstraintsInfoFUCHSIA-requiredFormatFeatures-parameter"></a> <span class="vuid">VUID-VkBufferConstraintsInfoFUCHSIA-requiredFormatFeatures-parameter</span><br>
 <code>requiredFormatFeatures</code> <strong>must</strong> be a valid combination of <a href="formats.html#VkFormatFeatureFlagBits" class="xref page">VkFormatFeatureFlagBits</a> values</p>
</li>
<li>
<p><a id="VUID-VkBufferConstraintsInfoFUCHSIA-bufferCollectionConstraints-parameter" href="#VUID-VkBufferConstraintsInfoFUCHSIA-bufferCollectionConstraints-parameter"></a> <span class="vuid">VUID-VkBufferConstraintsInfoFUCHSIA-bufferCollectionConstraints-parameter</span><br>
 <code>bufferCollectionConstraints</code> <strong>must</strong> be a valid <a href="#VkBufferCollectionConstraintsInfoFUCHSIA">VkBufferCollectionConstraintsInfoFUCHSIA</a> structure</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_retrieve_buffer_collection_properties"><a class="anchor" href="#_retrieve_buffer_collection_properties"></a>Retrieve Buffer Collection Properties</h3>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>After constraints have been set on the buffer collection by calling
<a href="#vkSetBufferCollectionImageConstraintsFUCHSIA">vkSetBufferCollectionImageConstraintsFUCHSIA</a> or
<a href="#vkSetBufferCollectionBufferConstraintsFUCHSIA">vkSetBufferCollectionBufferConstraintsFUCHSIA</a>, call
<code>vkGetBufferCollectionPropertiesFUCHSIA</code> to retrieve the negotiated and
finalized properties of the buffer collection.</p>
</div>
<div class="paragraph">
<p>The call to <code>vkGetBufferCollectionPropertiesFUCHSIA</code> is synchronous.
It waits for the Sysmem format negotiation and buffer collection allocation
to complete before returning.</p>
</div>
<div id="vkGetBufferCollectionPropertiesFUCHSIA" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_FUCHSIA_buffer_collection
VkResult vkGetBufferCollectionPropertiesFUCHSIA(
    VkDevice                                    device,
    VkBufferCollectionFUCHSIA                   collection,
    VkBufferCollectionPropertiesFUCHSIA*        pProperties);</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>device</code> is the logical device handle</p>
</li>
<li>
<p><code>collection</code> is the <a href="#VkBufferCollectionFUCHSIA">VkBufferCollectionFUCHSIA</a> handle</p>
</li>
<li>
<p><code>pProperties</code> is a pointer to the retrieved
<a href="#VkBufferCollectionPropertiesFUCHSIA">VkBufferCollectionPropertiesFUCHSIA</a> struct</p>
</li>
</ul>
</div>
<div id="sysmem-chosen-create-infos" class="paragraph">
<p>For image-based buffer collections, upon calling
<code>vkGetBufferCollectionPropertiesFUCHSIA</code>, Sysmem will choose an element
of the <a href="#VkImageConstraintsInfoFUCHSIA">VkImageConstraintsInfoFUCHSIA</a>::<code>pImageCreateInfos</code>
established by the preceding call to
<a href="#vkSetBufferCollectionImageConstraintsFUCHSIA">vkSetBufferCollectionImageConstraintsFUCHSIA</a>.
The index of the element chosen is stored in and can be retrieved from
<a href="#VkBufferCollectionPropertiesFUCHSIA">VkBufferCollectionPropertiesFUCHSIA</a>::<code>createInfoIndex</code>.</p>
</div>
<div class="paragraph">
<p>For buffer-based buffer collections, a single <a href="#VkBufferCreateInfo">VkBufferCreateInfo</a> is
specified as <a href="#VkBufferConstraintsInfoFUCHSIA">VkBufferConstraintsInfoFUCHSIA</a>::<code>createInfo</code>.
<a href="#VkBufferCollectionPropertiesFUCHSIA">VkBufferCollectionPropertiesFUCHSIA</a>::<code>createInfoIndex</code> will
therefore always be zero.</p>
</div>
<div class="paragraph">
<p><code>vkGetBufferCollectionPropertiesFUCHSIA</code> <strong>may</strong> fail if Sysmem is unable
to resolve the constraints of all of the participants in the buffer
collection.
If that occurs, <code>vkGetBufferCollectionPropertiesFUCHSIA</code> will return
<code>VK_ERROR_INITIALIZATION_FAILED</code>.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkGetBufferCollectionPropertiesFUCHSIA-None-06405" href="#VUID-vkGetBufferCollectionPropertiesFUCHSIA-None-06405"></a> <span class="vuid">VUID-vkGetBufferCollectionPropertiesFUCHSIA-None-06405</span><br>

Prior to calling <a href="#vkGetBufferCollectionPropertiesFUCHSIA">vkGetBufferCollectionPropertiesFUCHSIA</a>, the
constraints on the buffer collection <strong>must</strong> have been set by either
<a href="#vkSetBufferCollectionImageConstraintsFUCHSIA">vkSetBufferCollectionImageConstraintsFUCHSIA</a> or
<a href="#vkSetBufferCollectionBufferConstraintsFUCHSIA">vkSetBufferCollectionBufferConstraintsFUCHSIA</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkGetBufferCollectionPropertiesFUCHSIA-device-parameter" href="#VUID-vkGetBufferCollectionPropertiesFUCHSIA-device-parameter"></a> <span class="vuid">VUID-vkGetBufferCollectionPropertiesFUCHSIA-device-parameter</span><br>
 <code>device</code> <strong>must</strong> be a valid <a href="devsandqueues.html#VkDevice" class="xref page">VkDevice</a> handle</p>
</li>
<li>
<p><a id="VUID-vkGetBufferCollectionPropertiesFUCHSIA-collection-parameter" href="#VUID-vkGetBufferCollectionPropertiesFUCHSIA-collection-parameter"></a> <span class="vuid">VUID-vkGetBufferCollectionPropertiesFUCHSIA-collection-parameter</span><br>
 <code>collection</code> <strong>must</strong> be a valid <a href="#VkBufferCollectionFUCHSIA">VkBufferCollectionFUCHSIA</a> handle</p>
</li>
<li>
<p><a id="VUID-vkGetBufferCollectionPropertiesFUCHSIA-pProperties-parameter" href="#VUID-vkGetBufferCollectionPropertiesFUCHSIA-pProperties-parameter"></a> <span class="vuid">VUID-vkGetBufferCollectionPropertiesFUCHSIA-pProperties-parameter</span><br>
 <code>pProperties</code> <strong>must</strong> be a valid pointer to a <a href="#VkBufferCollectionPropertiesFUCHSIA">VkBufferCollectionPropertiesFUCHSIA</a> structure</p>
</li>
<li>
<p><a id="VUID-vkGetBufferCollectionPropertiesFUCHSIA-collection-parent" href="#VUID-vkGetBufferCollectionPropertiesFUCHSIA-collection-parent"></a> <span class="vuid">VUID-vkGetBufferCollectionPropertiesFUCHSIA-collection-parent</span><br>
 <code>collection</code> <strong>must</strong> have been created, allocated, or retrieved from <code>device</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Return Codes</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><a href="fundamentals.html#fundamentals-successcodes" class="xref page">Success</a></dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><code>VK_SUCCESS</code></p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1"><a href="fundamentals.html#fundamentals-errorcodes" class="xref page">Failure</a></dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><code>VK_ERROR_OUT_OF_HOST_MEMORY</code></p>
</li>
<li>
<p><code>VK_ERROR_INITIALIZATION_FAILED</code></p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>VkBufferCollectionPropertiesFUCHSIA</code> structure is defined as:</p>
</div>
<div id="VkBufferCollectionPropertiesFUCHSIA" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_FUCHSIA_buffer_collection
typedef struct VkBufferCollectionPropertiesFUCHSIA {
    VkStructureType                  sType;
    void*                            pNext;
    uint32_t                         memoryTypeBits;
    uint32_t                         bufferCount;
    uint32_t                         createInfoIndex;
    uint64_t                         sysmemPixelFormat;
    VkFormatFeatureFlags             formatFeatures;
    VkSysmemColorSpaceFUCHSIA        sysmemColorSpaceIndex;
    VkComponentMapping               samplerYcbcrConversionComponents;
    VkSamplerYcbcrModelConversion    suggestedYcbcrModel;
    VkSamplerYcbcrRange              suggestedYcbcrRange;
    VkChromaLocation                 suggestedXChromaOffset;
    VkChromaLocation                 suggestedYChromaOffset;
} VkBufferCollectionPropertiesFUCHSIA;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is a <a href="fundamentals.html#VkStructureType" class="xref page">VkStructureType</a> value identifying this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure</p>
</li>
<li>
<p><code>memoryTypeBits</code> is a bitmask containing one bit set for every
memory type which the buffer collection can be imported as buffer
collection</p>
</li>
<li>
<p><code>bufferCount</code> is the number of buffers in the collection</p>
</li>
<li>
<p><code>createInfoIndex</code> as described in <a href="#sysmem-chosen-create-infos">    Sysmem chosen create infos</a></p>
</li>
<li>
<p><code>sysmemPixelFormat</code> is the Sysmem <code>PixelFormatType</code> as defined in
<code>fuchsia.sysmem/image_formats.fidl</code></p>
</li>
<li>
<p><code>formatFeatures</code> is a bitmask of <a href="formats.html#VkFormatFeatureFlagBits" class="xref page">VkFormatFeatureFlagBits</a>
shared by the buffer collection</p>
</li>
<li>
<p><code>sysmemColorSpaceIndex</code> is a <a href="#VkSysmemColorSpaceFUCHSIA">VkSysmemColorSpaceFUCHSIA</a> struct
specifying the color space</p>
</li>
<li>
<p><code>samplerYcbcrConversionComponents</code> is a <a href="#VkComponentMapping">VkComponentMapping</a>
struct specifying the component mapping</p>
</li>
<li>
<p><code>suggestedYcbcrModel</code> is a <a href="samplers.html#VkSamplerYcbcrModelConversion" class="xref page">VkSamplerYcbcrModelConversion</a> value
specifying the suggested YC<sub>B</sub>C<sub>R</sub> model</p>
</li>
<li>
<p><code>suggestedYcbcrRange</code> is a <a href="samplers.html#VkSamplerYcbcrRange" class="xref page">VkSamplerYcbcrRange</a> value
specifying the suggested YC<sub>B</sub>C<sub>R</sub> range</p>
</li>
<li>
<p><code>suggestedXChromaOffset</code> is a <a href="samplers.html#VkChromaLocation" class="xref page">VkChromaLocation</a> value
specifying the suggested X chroma offset</p>
</li>
<li>
<p><code>suggestedYChromaOffset</code> is a <a href="samplers.html#VkChromaLocation" class="xref page">VkChromaLocation</a> value
specifying the suggested Y chroma offset</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><code>sysmemColorSpace</code> is only set for image-based buffer collections where
the constraints were specified using <a href="#VkImageConstraintsInfoFUCHSIA">VkImageConstraintsInfoFUCHSIA</a> in
a call to <a href="#vkSetBufferCollectionImageConstraintsFUCHSIA">vkSetBufferCollectionImageConstraintsFUCHSIA</a>.</p>
</div>
<div class="paragraph">
<p>For image-based buffer collections, <code>createInfoIndex</code> will identify both
the <a href="#VkImageConstraintsInfoFUCHSIA">VkImageConstraintsInfoFUCHSIA</a>::<code>pImageCreateInfos</code> element and
the <a href="#VkImageConstraintsInfoFUCHSIA">VkImageConstraintsInfoFUCHSIA</a>::<code>pFormatConstraints</code> element
chosen by Sysmem when <a href="#vkSetBufferCollectionImageConstraintsFUCHSIA">vkSetBufferCollectionImageConstraintsFUCHSIA</a> was
called.
The value of <code>sysmemColorSpaceIndex</code> will be an index to one of the
color spaces provided in the
<a href="#VkImageFormatConstraintsInfoFUCHSIA">VkImageFormatConstraintsInfoFUCHSIA</a>::<code>pColorSpaces</code> array.</p>
</div>
<div class="paragraph">
<p>The implementation must have <code>formatFeatures</code> with all bits set that
were set in
<a href="#VkImageFormatConstraintsInfoFUCHSIA">VkImageFormatConstraintsInfoFUCHSIA</a>::<code>requiredFormatFeatures</code>, by
the call to <a href="#vkSetBufferCollectionImageConstraintsFUCHSIA">vkSetBufferCollectionImageConstraintsFUCHSIA</a>, at
<code>createInfoIndex</code> (other bits could be set as well).</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkBufferCollectionPropertiesFUCHSIA-sType-sType" href="#VUID-VkBufferCollectionPropertiesFUCHSIA-sType-sType"></a> <span class="vuid">VUID-VkBufferCollectionPropertiesFUCHSIA-sType-sType</span><br>
 <code>sType</code> <strong>must</strong> be <code>VK_STRUCTURE_TYPE_BUFFER_COLLECTION_PROPERTIES_FUCHSIA</code></p>
</li>
<li>
<p><a id="VUID-VkBufferCollectionPropertiesFUCHSIA-pNext-pNext" href="#VUID-VkBufferCollectionPropertiesFUCHSIA-pNext-pNext"></a> <span class="vuid">VUID-VkBufferCollectionPropertiesFUCHSIA-pNext-pNext</span><br>
 <code>pNext</code> <strong>must</strong> be <code>NULL</code></p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_memory_allocation"><a class="anchor" href="#_memory_allocation"></a>Memory Allocation</h3>
<div class="paragraph">
<p>To import memory from a buffer collection into a <a href="#VkImage">VkImage</a> or a
<a href="#VkBuffer">VkBuffer</a>, chain a <a href="#VkImportMemoryBufferCollectionFUCHSIA">VkImportMemoryBufferCollectionFUCHSIA</a>
structure to the <code>pNext</code> member of the <a href="memory.html#VkMemoryAllocateInfo" class="xref page">VkMemoryAllocateInfo</a> in the
call to <a href="memory.html#vkAllocateMemory" class="xref page">vkAllocateMemory</a>.</p>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>VkImportMemoryBufferCollectionFUCHSIA</code> structure is defined as:</p>
</div>
<div id="VkImportMemoryBufferCollectionFUCHSIA" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_FUCHSIA_buffer_collection
typedef struct VkImportMemoryBufferCollectionFUCHSIA {
    VkStructureType              sType;
    const void*                  pNext;
    VkBufferCollectionFUCHSIA    collection;
    uint32_t                     index;
} VkImportMemoryBufferCollectionFUCHSIA;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is a <a href="fundamentals.html#VkStructureType" class="xref page">VkStructureType</a> value identifying this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure</p>
</li>
<li>
<p><code>collection</code> is the <a href="#VkBufferCollectionFUCHSIA">VkBufferCollectionFUCHSIA</a> handle</p>
</li>
<li>
<p><code>index</code> the index of the buffer to import from <code>collection</code></p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkImportMemoryBufferCollectionFUCHSIA-index-06406" href="#VUID-VkImportMemoryBufferCollectionFUCHSIA-index-06406"></a> <span class="vuid">VUID-VkImportMemoryBufferCollectionFUCHSIA-index-06406</span><br>

<code>index</code> <strong>must</strong> be less than the value retrieved as
<a href="#VkBufferCollectionPropertiesFUCHSIA">VkBufferCollectionPropertiesFUCHSIA</a>:bufferCount</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkImportMemoryBufferCollectionFUCHSIA-sType-sType" href="#VUID-VkImportMemoryBufferCollectionFUCHSIA-sType-sType"></a> <span class="vuid">VUID-VkImportMemoryBufferCollectionFUCHSIA-sType-sType</span><br>
 <code>sType</code> <strong>must</strong> be <code>VK_STRUCTURE_TYPE_IMPORT_MEMORY_BUFFER_COLLECTION_FUCHSIA</code></p>
</li>
<li>
<p><a id="VUID-VkImportMemoryBufferCollectionFUCHSIA-collection-parameter" href="#VUID-VkImportMemoryBufferCollectionFUCHSIA-collection-parameter"></a> <span class="vuid">VUID-VkImportMemoryBufferCollectionFUCHSIA-collection-parameter</span><br>
 <code>collection</code> <strong>must</strong> be a valid <a href="#VkBufferCollectionFUCHSIA">VkBufferCollectionFUCHSIA</a> handle</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>To release a <a href="#VkBufferCollectionFUCHSIA">VkBufferCollectionFUCHSIA</a>:</p>
</div>
<div id="vkDestroyBufferCollectionFUCHSIA" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_FUCHSIA_buffer_collection
void vkDestroyBufferCollectionFUCHSIA(
    VkDevice                                    device,
    VkBufferCollectionFUCHSIA                   collection,
    const VkAllocationCallbacks*                pAllocator);</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>device</code> is the logical device that creates the
<code>VkBufferCollectionFUCHSIA</code></p>
</li>
<li>
<p><code>collection</code> is the <a href="#VkBufferCollectionFUCHSIA">VkBufferCollectionFUCHSIA</a> handle</p>
</li>
<li>
<p><code>pAllocator</code> is a pointer to a <a href="memory.html#VkAllocationCallbacks" class="xref page">VkAllocationCallbacks</a> structure
controlling host memory allocation as described in the
<a href="memory.html#memory-allocation" class="xref page">Memory Allocation</a> chapter</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkDestroyBufferCollectionFUCHSIA-collection-06407" href="#VUID-vkDestroyBufferCollectionFUCHSIA-collection-06407"></a> <span class="vuid">VUID-vkDestroyBufferCollectionFUCHSIA-collection-06407</span><br>

<a href="#VkImage">VkImage</a> and <a href="#VkBuffer">VkBuffer</a> objects that referenced
<code>collection</code> upon creation by inclusion of a
<a href="#VkBufferCollectionImageCreateInfoFUCHSIA">VkBufferCollectionImageCreateInfoFUCHSIA</a> or
<a href="#VkBufferCollectionBufferCreateInfoFUCHSIA">VkBufferCollectionBufferCreateInfoFUCHSIA</a> chained to their
<a href="#VkImageCreateInfo">VkImageCreateInfo</a> or <a href="#VkBufferCreateInfo">VkBufferCreateInfo</a> structures
respectively, <strong>may</strong> outlive <code>collection</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkDestroyBufferCollectionFUCHSIA-device-parameter" href="#VUID-vkDestroyBufferCollectionFUCHSIA-device-parameter"></a> <span class="vuid">VUID-vkDestroyBufferCollectionFUCHSIA-device-parameter</span><br>
 <code>device</code> <strong>must</strong> be a valid <a href="devsandqueues.html#VkDevice" class="xref page">VkDevice</a> handle</p>
</li>
<li>
<p><a id="VUID-vkDestroyBufferCollectionFUCHSIA-collection-parameter" href="#VUID-vkDestroyBufferCollectionFUCHSIA-collection-parameter"></a> <span class="vuid">VUID-vkDestroyBufferCollectionFUCHSIA-collection-parameter</span><br>
 <code>collection</code> <strong>must</strong> be a valid <a href="#VkBufferCollectionFUCHSIA">VkBufferCollectionFUCHSIA</a> handle</p>
</li>
<li>
<p><a id="VUID-vkDestroyBufferCollectionFUCHSIA-pAllocator-parameter" href="#VUID-vkDestroyBufferCollectionFUCHSIA-pAllocator-parameter"></a> <span class="vuid">VUID-vkDestroyBufferCollectionFUCHSIA-pAllocator-parameter</span><br>
 If <code>pAllocator</code> is not <code>NULL</code>, <code>pAllocator</code> <strong>must</strong> be a valid pointer to a valid <a href="memory.html#VkAllocationCallbacks" class="xref page">VkAllocationCallbacks</a> structure</p>
</li>
<li>
<p><a id="VUID-vkDestroyBufferCollectionFUCHSIA-collection-parent" href="#VUID-vkDestroyBufferCollectionFUCHSIA-collection-parent"></a> <span class="vuid">VUID-vkDestroyBufferCollectionFUCHSIA-collection-parent</span><br>
 <code>collection</code> <strong>must</strong> have been created, allocated, or retrieved from <code>device</code></p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</article>
  </div>
</main>
</div>
<footer class="footer">
    <!--
  <p>This page was built using the Antora default UI.</p>
  <p>The source code for this UI is licensed under the terms of the MPL-2.0 license.</p>
    -->
</footer>
<script id="site-script" src="../../../_/js/site.js" data-ui-root-path="../../../_"></script>
<script async src="../../../_/js/vendor/highlight.js"></script>
<script src="../../../_/js/vendor/lunr.js"></script>
<script src="../../../_/js/search-ui.js" id="search-ui-script" data-site-root-path="../../.." data-snippet-length="100" data-stylesheet="../../../_/css/search.css"></script>
<script async src="../../../search-index.js"></script>
  </body>
</html>
