<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Copy Commands :: Vulkan Documentation Project</title>
    <meta name="generator" content="Antora 3.1.4">
    <link rel="stylesheet" href="../../../_/css/site.css">
    <link rel="apple-touch-icon" sizes="180x180" href="../../../_/img/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="../../../_/img/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="../../../_/img/favicon-16x16.png">
    <link rel="manifest" href="../../../_/static/site.webmanifest">
    <link rel="mask-icon" href="../../../_/img/safari-pinned-tab.svg" color="#a41e22">
    <meta name="msapplication-TileColor" content="#ffc40d">
    <meta name="theme-color" content="#ffffff">
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="../../.."><img class="navbar-item" alt="Vulkan White Label" src="../../../_/Vulkan_Docs.svg" /></a>
      <div class="navbar-item search hide-for-print">
        <div id="search-field" class="field has-filter">
          <label for="search-input"></label>
          <input id="search-input" type="text" placeholder="Search the docs">
          <label class="filter checkbox">
            <input type="checkbox" data-facet-filter="component:spec" checked> In this component
          </label>
        </div>
      </div>
      <button class="navbar-burger" aria-controls="topbar-nav" aria-expanded="false" aria-label="Toggle main menu">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <!-- <a class="navbar-item" href="#">Home</a> -->
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Specs</a>
          <div class="navbar-dropdown is-right">
            <a class="navbar-item" href="../../../spec/latest/chapters/introduction.html">Vulkan 1.3</a>
            <a class="navbar-item" href="https://registry.khronos.org/OpenGL/specs/gl/GLSLangSpec.4.60.html">GLSL</a>
            <a class="navbar-item" href="../../../guide/latest/hlsl.html">HLSL</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Education</a>
          <div class="navbar-dropdown is-right">
            <a class="navbar-item" href="../../../features/latest/features/index.html">Vulkan Feature Descriptions</a>
            <a class="navbar-item" href="../../../guide/latest/index.html">Vulkan Guide</a>
            <a class="navbar-item" href="../../../samples/latest/README.html">Vulkan Samples</a>
            <a class="navbar-item" href="../../../tutorial/latest/index.html">Vulkan Tutorial</a>
            <a class="navbar-item" href="https://www.youtube.com/c/vulkan">YouTube</a>
            <a class="navbar-item" href="https://vulkan.org">More Info at Vulkan.org</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Feedback</a>
          <div class="navbar-dropdown is-right">
            <a class="navbar-item" href="https://github.com/KhronosGroup/Vulkan-Site/issues/new/choose" target="_blank">Report a Problem</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Community</a>
          <div class="navbar-dropdown is-right">
            <a class="navbar-item" href="https://discord.gg/vulkan">Vulkan Discord</a>
            <a class="navbar-item" href="https://reddit.com/r/vulkan">Reddit</a>
            <a class="navbar-item" href="https://stackoverflow.com/questions/tagged/vulkan">Stack Overflow</a>
            <a class="navbar-item" href="https://fosstodon.org/@vulkan">Mastodon</a>
          </div>
        </div>
      </div>
    </div>
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="spec" data-version="latest">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <button class="nav-menu-toggle" aria-label="Toggle expand/collapse all" style="display: none"></button>
    <h3 class="title"><a href="../index.html">Vulkan Specification</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="introduction.html">Introduction</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="fundamentals.html">Fundamentals</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="initialization.html">Initialization</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="devsandqueues.html">Devices and Queues</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="cmdbuffers.html">Command Buffers</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="synchronization.html">Synchronization and Cache Control</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="renderpass.html">Render Pass</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="shaders.html">Shaders</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="pipelines.html">Pipelines</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="memory.html">Memory Allocation</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="resources.html">Resource Creation</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="samplers.html">Samplers</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="descriptorsets.html">Resource Descriptors</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="interfaces.html">Shader Interfaces</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="textures.html">Image Operations</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="fragmentdensitymapops.html">Fragment Density Map Operations</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="queries.html">Queries</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="clears.html">Clear Commands</a>
  </li>
  <li class="nav-item is-current-page" data-depth="1">
    <a class="nav-link" href="copies.html">Copy Commands</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="drawing.html">Drawing Commands</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="fxvertex.html">Fixed-Function Vertex Processing</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="tessellation.html">Tessellation</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="geometry.html">Geometry Shading</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="VK_NV_mesh_shader/mesh.html">Mesh Shading</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="VK_HUAWEI_cluster_culling_shader/clusterculling.html">Cluster Culling Shading</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="vertexpostproc.html">Fixed-Function Vertex Post-Processing</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="primsrast.html">Rasterization</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="fragops.html">Fragment Operations</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="framebuffer.html">The Framebuffer</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="dispatch.html">Dispatching Commands</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="device_generated_commands/generatedcommands.html">Device-Generated Commands</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="sparsemem.html">Sparse Resources</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="VK_KHR_surface/wsi.html">Window System Integration (WSI)</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="VK_KHR_deferred_host_operations/deferred_host_operations.html">Deferred Host Operations</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="VK_EXT_private_data.html">Private Data</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="accelstructures.html">Acceleration Structures</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="VK_EXT_opacity_micromap/micromaps.html">Micromap</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="raytraversal.html">Ray Traversal</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="raytracing.html">Ray Tracing</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="VK_NV_memory_decompression.html">Memory Decompression</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="videocoding.html">Video Coding</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="VK_NV_optical_flow/optical_flow.html">Optical Flow</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="executiongraphs.html">Execution Graphs</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="extensions.html">Extending Vulkan</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="features.html">Features</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="limits.html">Limits</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="formats.html">Formats</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="capabilities.html">Additional Capabilities</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="debugging.html">Debugging</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../appendices/spirvenv.html">Vulkan Environment for SPIR-V</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../appendices/memorymodel.html">Memory Model</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../appendices/compressedtex.html">Compressed Image Formats</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../appendices/versions.html">Core Revisions (Informative)</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../appendices/extensions.html">Layers &amp; Extensions (Informative)</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../appendices/roadmap.html">Vulkan Roadmap Milestones</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../appendices/boilerplate.html">API Boilerplate</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../appendices/invariance.html">Invariance</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../appendices/glossary.html">Lexicon</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../appendices/credits.html">Credits (Informative)</a>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">Vulkan Specification</span>
    <span class="version">latest</span>
  </div>
  <ul class="components">
    <li class="component">
      <div class="title"><a href="../../../tutorial/latest/00_Introduction.html">Khronos Vulkan Tutorial</a></div>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../tutorial/latest/00_Introduction.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <div class="title"><a href="../../../features/latest/features/index.html">Vulkan Feature Descriptions</a></div>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../features/latest/features/index.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <div class="title"><a href="../../../guide/latest/index.html">Vulkan Guide</a></div>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../guide/latest/index.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <div class="title"><a href="../../../samples/latest/README.html">Vulkan Samples</a></div>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../samples/latest/README.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component is-current">
      <div class="title"><a href="../index.html">Vulkan Specification</a></div>
      <ul class="versions">
        <li class="version is-current is-latest">
          <a href="../index.html">latest</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="../index.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="../index.html">Vulkan Specification</a></li>
    <li><a href="copies.html">Copy Commands</a></li>
  </ul>
</nav>
</div>
  <div class="content">
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
<article class="doc">
<h1 class="page">Copy Commands</h1>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>An application <strong>can</strong> copy buffer and image data using several methods
described in this chapter, depending on the type of data transfer.</p>
</div>
<div class="paragraph">
<p>All copy commands are treated as &#8220;transfer&#8221; operations for the purposes of
synchronization barriers.</p>
</div>
<div class="paragraph">
<p>All copy commands that have a source format with an X component in its
format description read <strong>undefined</strong> values from those bits.</p>
</div>
<div class="paragraph">
<p>All copy commands that have a destination format with an X component in its
format description write <strong>undefined</strong> values to those bits.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="copies-buffers"><a class="anchor" href="#copies-buffers"></a>Copying Data Between Buffers</h2>
<div class="sectionbody">
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>To copy data between buffer objects, call:</p>
</div>
<div id="vkCmdCopyBuffer" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_VERSION_1_0
void vkCmdCopyBuffer(
    VkCommandBuffer                             commandBuffer,
    VkBuffer                                    srcBuffer,
    VkBuffer                                    dstBuffer,
    uint32_t                                    regionCount,
    const VkBufferCopy*                         pRegions);</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>commandBuffer</code> is the command buffer into which the command will be
recorded.</p>
</li>
<li>
<p><code>srcBuffer</code> is the source buffer.</p>
</li>
<li>
<p><code>dstBuffer</code> is the destination buffer.</p>
</li>
<li>
<p><code>regionCount</code> is the number of regions to copy.</p>
</li>
<li>
<p><code>pRegions</code> is a pointer to an array of <a href="#VkBufferCopy">VkBufferCopy</a> structures
specifying the regions to copy.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Each source region specified by <code>pRegions</code> is copied from the source
buffer to the destination region of the destination buffer.
If any of the specified regions in <code>srcBuffer</code> overlaps in memory with
any of the specified regions in <code>dstBuffer</code>, values read from those
overlapping regions are <strong>undefined</strong>.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCmdCopyBuffer-commandBuffer-01822" href="#VUID-vkCmdCopyBuffer-commandBuffer-01822"></a> <span class="vuid">VUID-vkCmdCopyBuffer-commandBuffer-01822</span><br>

If <code>commandBuffer</code> is an unprotected command buffer and
<a href="devsandqueues.html#limits-protectedNoFault" class="xref page"><code>protectedNoFault</code></a> is not supported,
<code>srcBuffer</code> <strong>must</strong> not be a protected buffer</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyBuffer-commandBuffer-01823" href="#VUID-vkCmdCopyBuffer-commandBuffer-01823"></a> <span class="vuid">VUID-vkCmdCopyBuffer-commandBuffer-01823</span><br>

If <code>commandBuffer</code> is an unprotected command buffer and
<a href="devsandqueues.html#limits-protectedNoFault" class="xref page"><code>protectedNoFault</code></a> is not supported,
<code>dstBuffer</code> <strong>must</strong> not be a protected buffer</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyBuffer-commandBuffer-01824" href="#VUID-vkCmdCopyBuffer-commandBuffer-01824"></a> <span class="vuid">VUID-vkCmdCopyBuffer-commandBuffer-01824</span><br>

If <code>commandBuffer</code> is a protected command buffer and
<a href="devsandqueues.html#limits-protectedNoFault" class="xref page"><code>protectedNoFault</code></a> is not supported,
<code>dstBuffer</code> <strong>must</strong> not be an unprotected buffer</p>
</li>
</ul>
</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCmdCopyBuffer-srcOffset-00113" href="#VUID-vkCmdCopyBuffer-srcOffset-00113"></a> <span class="vuid">VUID-vkCmdCopyBuffer-srcOffset-00113</span><br>

The <code>srcOffset</code> member of each element of <code>pRegions</code> <strong>must</strong> be
less than the size of <code>srcBuffer</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyBuffer-dstOffset-00114" href="#VUID-vkCmdCopyBuffer-dstOffset-00114"></a> <span class="vuid">VUID-vkCmdCopyBuffer-dstOffset-00114</span><br>

The <code>dstOffset</code> member of each element of <code>pRegions</code> <strong>must</strong> be
less than the size of <code>dstBuffer</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyBuffer-size-00115" href="#VUID-vkCmdCopyBuffer-size-00115"></a> <span class="vuid">VUID-vkCmdCopyBuffer-size-00115</span><br>

The <code>size</code> member of each element of <code>pRegions</code> <strong>must</strong> be less
than or equal to the size of <code>srcBuffer</code> minus <code>srcOffset</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyBuffer-size-00116" href="#VUID-vkCmdCopyBuffer-size-00116"></a> <span class="vuid">VUID-vkCmdCopyBuffer-size-00116</span><br>

The <code>size</code> member of each element of <code>pRegions</code> <strong>must</strong> be less
than or equal to the size of <code>dstBuffer</code> minus <code>dstOffset</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyBuffer-pRegions-00117" href="#VUID-vkCmdCopyBuffer-pRegions-00117"></a> <span class="vuid">VUID-vkCmdCopyBuffer-pRegions-00117</span><br>

The union of the source regions, and the union of the destination
regions, specified by the elements of <code>pRegions</code>, <strong>must</strong> not overlap
in memory</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyBuffer-srcBuffer-00118" href="#VUID-vkCmdCopyBuffer-srcBuffer-00118"></a> <span class="vuid">VUID-vkCmdCopyBuffer-srcBuffer-00118</span><br>

<code>srcBuffer</code> <strong>must</strong> have been created with
<code>VK_BUFFER_USAGE_TRANSFER_SRC_BIT</code> usage flag</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyBuffer-srcBuffer-00119" href="#VUID-vkCmdCopyBuffer-srcBuffer-00119"></a> <span class="vuid">VUID-vkCmdCopyBuffer-srcBuffer-00119</span><br>

If <code>srcBuffer</code> is non-sparse then it <strong>must</strong> be bound completely and
contiguously to a single <code>VkDeviceMemory</code> object</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyBuffer-dstBuffer-00120" href="#VUID-vkCmdCopyBuffer-dstBuffer-00120"></a> <span class="vuid">VUID-vkCmdCopyBuffer-dstBuffer-00120</span><br>

<code>dstBuffer</code> <strong>must</strong> have been created with
<code>VK_BUFFER_USAGE_TRANSFER_DST_BIT</code> usage flag</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyBuffer-dstBuffer-00121" href="#VUID-vkCmdCopyBuffer-dstBuffer-00121"></a> <span class="vuid">VUID-vkCmdCopyBuffer-dstBuffer-00121</span><br>

If <code>dstBuffer</code> is non-sparse then it <strong>must</strong> be bound completely and
contiguously to a single <code>VkDeviceMemory</code> object</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCmdCopyBuffer-commandBuffer-parameter" href="#VUID-vkCmdCopyBuffer-commandBuffer-parameter"></a> <span class="vuid">VUID-vkCmdCopyBuffer-commandBuffer-parameter</span><br>
 <code>commandBuffer</code> <strong>must</strong> be a valid <a href="cmdbuffers.html#VkCommandBuffer" class="xref page">VkCommandBuffer</a> handle</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyBuffer-srcBuffer-parameter" href="#VUID-vkCmdCopyBuffer-srcBuffer-parameter"></a> <span class="vuid">VUID-vkCmdCopyBuffer-srcBuffer-parameter</span><br>
 <code>srcBuffer</code> <strong>must</strong> be a valid <a href="resources.html#VkBuffer" class="xref page">VkBuffer</a> handle</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyBuffer-dstBuffer-parameter" href="#VUID-vkCmdCopyBuffer-dstBuffer-parameter"></a> <span class="vuid">VUID-vkCmdCopyBuffer-dstBuffer-parameter</span><br>
 <code>dstBuffer</code> <strong>must</strong> be a valid <a href="resources.html#VkBuffer" class="xref page">VkBuffer</a> handle</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyBuffer-pRegions-parameter" href="#VUID-vkCmdCopyBuffer-pRegions-parameter"></a> <span class="vuid">VUID-vkCmdCopyBuffer-pRegions-parameter</span><br>
 <code>pRegions</code> <strong>must</strong> be a valid pointer to an array of <code>regionCount</code> valid <a href="#VkBufferCopy">VkBufferCopy</a> structures</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyBuffer-commandBuffer-recording" href="#VUID-vkCmdCopyBuffer-commandBuffer-recording"></a> <span class="vuid">VUID-vkCmdCopyBuffer-commandBuffer-recording</span><br>
 <code>commandBuffer</code> <strong>must</strong> be in the <a href="cmdbuffers.html#commandbuffers-lifecycle" class="xref page">recording state</a></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyBuffer-commandBuffer-cmdpool" href="#VUID-vkCmdCopyBuffer-commandBuffer-cmdpool"></a> <span class="vuid">VUID-vkCmdCopyBuffer-commandBuffer-cmdpool</span><br>
 The <code>VkCommandPool</code> that <code>commandBuffer</code> was allocated from <strong>must</strong> support transfer, graphics, or compute operations</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyBuffer-renderpass" href="#VUID-vkCmdCopyBuffer-renderpass"></a> <span class="vuid">VUID-vkCmdCopyBuffer-renderpass</span><br>
 This command <strong>must</strong> only be called outside of a render pass instance</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyBuffer-regionCount-arraylength" href="#VUID-vkCmdCopyBuffer-regionCount-arraylength"></a> <span class="vuid">VUID-vkCmdCopyBuffer-regionCount-arraylength</span><br>
 <code>regionCount</code> <strong>must</strong> be greater than <code>0</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyBuffer-commonparent" href="#VUID-vkCmdCopyBuffer-commonparent"></a> <span class="vuid">VUID-vkCmdCopyBuffer-commonparent</span><br>
 Each of <code>commandBuffer</code>, <code>dstBuffer</code>, and <code>srcBuffer</code> <strong>must</strong> have been created, allocated, or retrieved from the same <a href="devsandqueues.html#VkDevice" class="xref page">VkDevice</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Host Synchronization</div>
<div class="ulist">
<ul>
<li>
<p>Host access to <code>commandBuffer</code> <strong>must</strong> be externally synchronized</p>
</li>
<li>
<p>Host access to the <code>VkCommandPool</code> that <code>commandBuffer</code> was allocated from <strong>must</strong> be externally synchronized</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Command Properties</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><a href="cmdbuffers.html#VkCommandBufferLevel" class="xref page">Command Buffer Levels</a></th>
<th class="tableblock halign-left valign-top"><a href="renderpass.html#vkCmdBeginRenderPass" class="xref page">Render Pass Scope</a></th>
<th class="tableblock halign-left valign-top"><a href="devsandqueues.html#VkQueueFlagBits" class="xref page">Supported Queue Types</a></th>
<th class="tableblock halign-left valign-top"><a href="fundamentals.html#fundamentals-queueoperation-command-types" class="xref page">Command Type</a></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Primary<br>
Secondary</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Outside</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Transfer<br>
Graphics<br>
Compute</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Action</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>VkBufferCopy</code> structure is defined as:</p>
</div>
<div id="VkBufferCopy" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_VERSION_1_0
typedef struct VkBufferCopy {
    VkDeviceSize    srcOffset;
    VkDeviceSize    dstOffset;
    VkDeviceSize    size;
} VkBufferCopy;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>srcOffset</code> is the starting offset in bytes from the start of
<code>srcBuffer</code>.</p>
</li>
<li>
<p><code>dstOffset</code> is the starting offset in bytes from the start of
<code>dstBuffer</code>.</p>
</li>
<li>
<p><code>size</code> is the number of bytes to copy.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkBufferCopy-size-01988" href="#VUID-VkBufferCopy-size-01988"></a> <span class="vuid">VUID-VkBufferCopy-size-01988</span><br>

The <code>size</code> <strong>must</strong> be greater than <code>0</code></p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>A more extensible version of the copy buffer command is defined below.</p>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>To copy data between buffer objects, call:</p>
</div>
<div id="vkCmdCopyBuffer2" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_VERSION_1_3
void vkCmdCopyBuffer2(
    VkCommandBuffer                             commandBuffer,
    const VkCopyBufferInfo2*                    pCopyBufferInfo);</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>commandBuffer</code> is the command buffer into which the command will be
recorded.</p>
</li>
<li>
<p><code>pCopyBufferInfo</code> is a pointer to a <a href="#VkCopyBufferInfo2">VkCopyBufferInfo2</a>
structure describing the copy parameters.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Each source region specified by <code>pCopyBufferInfo-&gt;pRegions</code> is copied
from the source buffer to the destination region of the destination buffer.
If any of the specified regions in <code>pCopyBufferInfo-&gt;srcBuffer</code> overlaps
in memory with any of the specified regions in
<code>pCopyBufferInfo-&gt;dstBuffer</code>, values read from those overlapping regions
are <strong>undefined</strong>.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCmdCopyBuffer2-commandBuffer-01822" href="#VUID-vkCmdCopyBuffer2-commandBuffer-01822"></a> <span class="vuid">VUID-vkCmdCopyBuffer2-commandBuffer-01822</span><br>

If <code>commandBuffer</code> is an unprotected command buffer and
<a href="devsandqueues.html#limits-protectedNoFault" class="xref page"><code>protectedNoFault</code></a> is not supported,
<code>srcBuffer</code> <strong>must</strong> not be a protected buffer</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyBuffer2-commandBuffer-01823" href="#VUID-vkCmdCopyBuffer2-commandBuffer-01823"></a> <span class="vuid">VUID-vkCmdCopyBuffer2-commandBuffer-01823</span><br>

If <code>commandBuffer</code> is an unprotected command buffer and
<a href="devsandqueues.html#limits-protectedNoFault" class="xref page"><code>protectedNoFault</code></a> is not supported,
<code>dstBuffer</code> <strong>must</strong> not be a protected buffer</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyBuffer2-commandBuffer-01824" href="#VUID-vkCmdCopyBuffer2-commandBuffer-01824"></a> <span class="vuid">VUID-vkCmdCopyBuffer2-commandBuffer-01824</span><br>

If <code>commandBuffer</code> is a protected command buffer and
<a href="devsandqueues.html#limits-protectedNoFault" class="xref page"><code>protectedNoFault</code></a> is not supported,
<code>dstBuffer</code> <strong>must</strong> not be an unprotected buffer</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCmdCopyBuffer2-commandBuffer-parameter" href="#VUID-vkCmdCopyBuffer2-commandBuffer-parameter"></a> <span class="vuid">VUID-vkCmdCopyBuffer2-commandBuffer-parameter</span><br>
 <code>commandBuffer</code> <strong>must</strong> be a valid <a href="cmdbuffers.html#VkCommandBuffer" class="xref page">VkCommandBuffer</a> handle</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyBuffer2-pCopyBufferInfo-parameter" href="#VUID-vkCmdCopyBuffer2-pCopyBufferInfo-parameter"></a> <span class="vuid">VUID-vkCmdCopyBuffer2-pCopyBufferInfo-parameter</span><br>
 <code>pCopyBufferInfo</code> <strong>must</strong> be a valid pointer to a valid <a href="#VkCopyBufferInfo2">VkCopyBufferInfo2</a> structure</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyBuffer2-commandBuffer-recording" href="#VUID-vkCmdCopyBuffer2-commandBuffer-recording"></a> <span class="vuid">VUID-vkCmdCopyBuffer2-commandBuffer-recording</span><br>
 <code>commandBuffer</code> <strong>must</strong> be in the <a href="cmdbuffers.html#commandbuffers-lifecycle" class="xref page">recording state</a></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyBuffer2-commandBuffer-cmdpool" href="#VUID-vkCmdCopyBuffer2-commandBuffer-cmdpool"></a> <span class="vuid">VUID-vkCmdCopyBuffer2-commandBuffer-cmdpool</span><br>
 The <code>VkCommandPool</code> that <code>commandBuffer</code> was allocated from <strong>must</strong> support transfer, graphics, or compute operations</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyBuffer2-renderpass" href="#VUID-vkCmdCopyBuffer2-renderpass"></a> <span class="vuid">VUID-vkCmdCopyBuffer2-renderpass</span><br>
 This command <strong>must</strong> only be called outside of a render pass instance</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Host Synchronization</div>
<div class="ulist">
<ul>
<li>
<p>Host access to <code>commandBuffer</code> <strong>must</strong> be externally synchronized</p>
</li>
<li>
<p>Host access to the <code>VkCommandPool</code> that <code>commandBuffer</code> was allocated from <strong>must</strong> be externally synchronized</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Command Properties</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><a href="cmdbuffers.html#VkCommandBufferLevel" class="xref page">Command Buffer Levels</a></th>
<th class="tableblock halign-left valign-top"><a href="renderpass.html#vkCmdBeginRenderPass" class="xref page">Render Pass Scope</a></th>
<th class="tableblock halign-left valign-top"><a href="devsandqueues.html#VkQueueFlagBits" class="xref page">Supported Queue Types</a></th>
<th class="tableblock halign-left valign-top"><a href="fundamentals.html#fundamentals-queueoperation-command-types" class="xref page">Command Type</a></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Primary<br>
Secondary</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Outside</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Transfer<br>
Graphics<br>
Compute</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Action</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>VkCopyBufferInfo2</code> structure is defined as:</p>
</div>
<div id="VkCopyBufferInfo2" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_VERSION_1_3
typedef struct VkCopyBufferInfo2 {
    VkStructureType         sType;
    const void*             pNext;
    VkBuffer                srcBuffer;
    VkBuffer                dstBuffer;
    uint32_t                regionCount;
    const VkBufferCopy2*    pRegions;
} VkCopyBufferInfo2;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is a <a href="fundamentals.html#VkStructureType" class="xref page">VkStructureType</a> value identifying this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>srcBuffer</code> is the source buffer.</p>
</li>
<li>
<p><code>dstBuffer</code> is the destination buffer.</p>
</li>
<li>
<p><code>regionCount</code> is the number of regions to copy.</p>
</li>
<li>
<p><code>pRegions</code> is a pointer to an array of <a href="#VkBufferCopy2">VkBufferCopy2</a>
structures specifying the regions to copy.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkCopyBufferInfo2-srcOffset-00113" href="#VUID-VkCopyBufferInfo2-srcOffset-00113"></a> <span class="vuid">VUID-VkCopyBufferInfo2-srcOffset-00113</span><br>

The <code>srcOffset</code> member of each element of <code>pRegions</code> <strong>must</strong> be
less than the size of <code>srcBuffer</code></p>
</li>
<li>
<p><a id="VUID-VkCopyBufferInfo2-dstOffset-00114" href="#VUID-VkCopyBufferInfo2-dstOffset-00114"></a> <span class="vuid">VUID-VkCopyBufferInfo2-dstOffset-00114</span><br>

The <code>dstOffset</code> member of each element of <code>pRegions</code> <strong>must</strong> be
less than the size of <code>dstBuffer</code></p>
</li>
<li>
<p><a id="VUID-VkCopyBufferInfo2-size-00115" href="#VUID-VkCopyBufferInfo2-size-00115"></a> <span class="vuid">VUID-VkCopyBufferInfo2-size-00115</span><br>

The <code>size</code> member of each element of <code>pRegions</code> <strong>must</strong> be less
than or equal to the size of <code>srcBuffer</code> minus <code>srcOffset</code></p>
</li>
<li>
<p><a id="VUID-VkCopyBufferInfo2-size-00116" href="#VUID-VkCopyBufferInfo2-size-00116"></a> <span class="vuid">VUID-VkCopyBufferInfo2-size-00116</span><br>

The <code>size</code> member of each element of <code>pRegions</code> <strong>must</strong> be less
than or equal to the size of <code>dstBuffer</code> minus <code>dstOffset</code></p>
</li>
<li>
<p><a id="VUID-VkCopyBufferInfo2-pRegions-00117" href="#VUID-VkCopyBufferInfo2-pRegions-00117"></a> <span class="vuid">VUID-VkCopyBufferInfo2-pRegions-00117</span><br>

The union of the source regions, and the union of the destination
regions, specified by the elements of <code>pRegions</code>, <strong>must</strong> not overlap
in memory</p>
</li>
<li>
<p><a id="VUID-VkCopyBufferInfo2-srcBuffer-00118" href="#VUID-VkCopyBufferInfo2-srcBuffer-00118"></a> <span class="vuid">VUID-VkCopyBufferInfo2-srcBuffer-00118</span><br>

<code>srcBuffer</code> <strong>must</strong> have been created with
<code>VK_BUFFER_USAGE_TRANSFER_SRC_BIT</code> usage flag</p>
</li>
<li>
<p><a id="VUID-VkCopyBufferInfo2-srcBuffer-00119" href="#VUID-VkCopyBufferInfo2-srcBuffer-00119"></a> <span class="vuid">VUID-VkCopyBufferInfo2-srcBuffer-00119</span><br>

If <code>srcBuffer</code> is non-sparse then it <strong>must</strong> be bound completely and
contiguously to a single <code>VkDeviceMemory</code> object</p>
</li>
<li>
<p><a id="VUID-VkCopyBufferInfo2-dstBuffer-00120" href="#VUID-VkCopyBufferInfo2-dstBuffer-00120"></a> <span class="vuid">VUID-VkCopyBufferInfo2-dstBuffer-00120</span><br>

<code>dstBuffer</code> <strong>must</strong> have been created with
<code>VK_BUFFER_USAGE_TRANSFER_DST_BIT</code> usage flag</p>
</li>
<li>
<p><a id="VUID-VkCopyBufferInfo2-dstBuffer-00121" href="#VUID-VkCopyBufferInfo2-dstBuffer-00121"></a> <span class="vuid">VUID-VkCopyBufferInfo2-dstBuffer-00121</span><br>

If <code>dstBuffer</code> is non-sparse then it <strong>must</strong> be bound completely and
contiguously to a single <code>VkDeviceMemory</code> object</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkCopyBufferInfo2-sType-sType" href="#VUID-VkCopyBufferInfo2-sType-sType"></a> <span class="vuid">VUID-VkCopyBufferInfo2-sType-sType</span><br>
 <code>sType</code> <strong>must</strong> be <code>VK_STRUCTURE_TYPE_COPY_BUFFER_INFO_2</code></p>
</li>
<li>
<p><a id="VUID-VkCopyBufferInfo2-pNext-pNext" href="#VUID-VkCopyBufferInfo2-pNext-pNext"></a> <span class="vuid">VUID-VkCopyBufferInfo2-pNext-pNext</span><br>
 <code>pNext</code> <strong>must</strong> be <code>NULL</code></p>
</li>
<li>
<p><a id="VUID-VkCopyBufferInfo2-srcBuffer-parameter" href="#VUID-VkCopyBufferInfo2-srcBuffer-parameter"></a> <span class="vuid">VUID-VkCopyBufferInfo2-srcBuffer-parameter</span><br>
 <code>srcBuffer</code> <strong>must</strong> be a valid <a href="resources.html#VkBuffer" class="xref page">VkBuffer</a> handle</p>
</li>
<li>
<p><a id="VUID-VkCopyBufferInfo2-dstBuffer-parameter" href="#VUID-VkCopyBufferInfo2-dstBuffer-parameter"></a> <span class="vuid">VUID-VkCopyBufferInfo2-dstBuffer-parameter</span><br>
 <code>dstBuffer</code> <strong>must</strong> be a valid <a href="resources.html#VkBuffer" class="xref page">VkBuffer</a> handle</p>
</li>
<li>
<p><a id="VUID-VkCopyBufferInfo2-pRegions-parameter" href="#VUID-VkCopyBufferInfo2-pRegions-parameter"></a> <span class="vuid">VUID-VkCopyBufferInfo2-pRegions-parameter</span><br>
 <code>pRegions</code> <strong>must</strong> be a valid pointer to an array of <code>regionCount</code> valid <a href="#VkBufferCopy2">VkBufferCopy2</a> structures</p>
</li>
<li>
<p><a id="VUID-VkCopyBufferInfo2-regionCount-arraylength" href="#VUID-VkCopyBufferInfo2-regionCount-arraylength"></a> <span class="vuid">VUID-VkCopyBufferInfo2-regionCount-arraylength</span><br>
 <code>regionCount</code> <strong>must</strong> be greater than <code>0</code></p>
</li>
<li>
<p><a id="VUID-VkCopyBufferInfo2-commonparent" href="#VUID-VkCopyBufferInfo2-commonparent"></a> <span class="vuid">VUID-VkCopyBufferInfo2-commonparent</span><br>
 Both of <code>dstBuffer</code>, and <code>srcBuffer</code> <strong>must</strong> have been created, allocated, or retrieved from the same <a href="devsandqueues.html#VkDevice" class="xref page">VkDevice</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>VkBufferCopy2</code> structure is defined as:</p>
</div>
<div id="VkBufferCopy2" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_VERSION_1_3
typedef struct VkBufferCopy2 {
    VkStructureType    sType;
    const void*        pNext;
    VkDeviceSize       srcOffset;
    VkDeviceSize       dstOffset;
    VkDeviceSize       size;
} VkBufferCopy2;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is a <a href="fundamentals.html#VkStructureType" class="xref page">VkStructureType</a> value identifying this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>srcOffset</code> is the starting offset in bytes from the start of
<code>srcBuffer</code>.</p>
</li>
<li>
<p><code>dstOffset</code> is the starting offset in bytes from the start of
<code>dstBuffer</code>.</p>
</li>
<li>
<p><code>size</code> is the number of bytes to copy.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkBufferCopy2-size-01988" href="#VUID-VkBufferCopy2-size-01988"></a> <span class="vuid">VUID-VkBufferCopy2-size-01988</span><br>

The <code>size</code> <strong>must</strong> be greater than <code>0</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkBufferCopy2-sType-sType" href="#VUID-VkBufferCopy2-sType-sType"></a> <span class="vuid">VUID-VkBufferCopy2-sType-sType</span><br>
 <code>sType</code> <strong>must</strong> be <code>VK_STRUCTURE_TYPE_BUFFER_COPY_2</code></p>
</li>
<li>
<p><a id="VUID-VkBufferCopy2-pNext-pNext" href="#VUID-VkBufferCopy2-pNext-pNext"></a> <span class="vuid">VUID-VkBufferCopy2-pNext-pNext</span><br>
 <code>pNext</code> <strong>must</strong> be <code>NULL</code></p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="copies-images"><a class="anchor" href="#copies-images"></a>Copying Data Between Images</h2>
<div class="sectionbody">
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>To copy data between image objects, call:</p>
</div>
<div id="vkCmdCopyImage" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_VERSION_1_0
void vkCmdCopyImage(
    VkCommandBuffer                             commandBuffer,
    VkImage                                     srcImage,
    VkImageLayout                               srcImageLayout,
    VkImage                                     dstImage,
    VkImageLayout                               dstImageLayout,
    uint32_t                                    regionCount,
    const VkImageCopy*                          pRegions);</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>commandBuffer</code> is the command buffer into which the command will be
recorded.</p>
</li>
<li>
<p><code>srcImage</code> is the source image.</p>
</li>
<li>
<p><code>srcImageLayout</code> is the current layout of the source image
subresource.</p>
</li>
<li>
<p><code>dstImage</code> is the destination image.</p>
</li>
<li>
<p><code>dstImageLayout</code> is the current layout of the destination image
subresource.</p>
</li>
<li>
<p><code>regionCount</code> is the number of regions to copy.</p>
</li>
<li>
<p><code>pRegions</code> is a pointer to an array of <a href="#VkImageCopy">VkImageCopy</a> structures
specifying the regions to copy.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Each source region specified by <code>pRegions</code> is copied from the source
image to the destination region of the destination image.
If any of the specified regions in <code>srcImage</code> overlaps in memory with
any of the specified regions in <code>dstImage</code>, values read from those
overlapping regions are <strong>undefined</strong>.</p>
</div>
<div class="paragraph">
<p><a href="formats.html#formats-requiring-sampler-ycbcr-conversion" class="xref page">Multi-planar images</a> <strong>can</strong>
only be copied on a per-plane basis, and the subresources used in each
region when copying to or from such images <strong>must</strong> specify only one plane,
though different regions <strong>can</strong> specify different planes.
When copying planes of multi-planar images, the format considered is the
<a href="formats.html#formats-compatible-planes" class="xref page">compatible format for that plane</a>, rather than
the format of the multi-planar image.</p>
</div>
<div class="paragraph">
<p>If the format of the destination image has a different
<a href="formats.html#formats-compatibility-classes" class="xref page">block extent</a> than the source image (e.g.
one is a compressed format), the offset and extent for each of the regions
specified is <a href="formats.html#formats-size-compatibility" class="xref page">scaled according to the block extents of each format</a> to match in size.
Copy regions for each image <strong>must</strong> be aligned to a multiple of the texel
block extent in each dimension, except at the edges of the image, where
region extents <strong>must</strong> match the edge of the image.</p>
</div>
<div class="paragraph">
<p>Image data <strong>can</strong> be copied between images with different image types.
If one image is <code>VK_IMAGE_TYPE_3D</code> and the other image is
<code>VK_IMAGE_TYPE_2D</code> with multiple layers, then each slice is copied to or
from a different layer; <code>depth</code> slices in the 3D image correspond to
<code>layerCount</code> layers in the 2D image, with an effective <code>depth</code> of
<code>1</code> used for the 2D image.
Other combinations of image types are disallowed.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCmdCopyImage-commandBuffer-01825" href="#VUID-vkCmdCopyImage-commandBuffer-01825"></a> <span class="vuid">VUID-vkCmdCopyImage-commandBuffer-01825</span><br>

If <code>commandBuffer</code> is an unprotected command buffer and
<a href="devsandqueues.html#limits-protectedNoFault" class="xref page"><code>protectedNoFault</code></a> is not supported,
<code>srcImage</code> <strong>must</strong> not be a protected image</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage-commandBuffer-01826" href="#VUID-vkCmdCopyImage-commandBuffer-01826"></a> <span class="vuid">VUID-vkCmdCopyImage-commandBuffer-01826</span><br>

If <code>commandBuffer</code> is an unprotected command buffer and
<a href="devsandqueues.html#limits-protectedNoFault" class="xref page"><code>protectedNoFault</code></a> is not supported,
<code>dstImage</code> <strong>must</strong> not be a protected image</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage-commandBuffer-01827" href="#VUID-vkCmdCopyImage-commandBuffer-01827"></a> <span class="vuid">VUID-vkCmdCopyImage-commandBuffer-01827</span><br>

If <code>commandBuffer</code> is a protected command buffer and
<a href="devsandqueues.html#limits-protectedNoFault" class="xref page"><code>protectedNoFault</code></a> is not supported,
<code>dstImage</code> <strong>must</strong> not be an unprotected image</p>
</li>
</ul>
</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCmdCopyImage-pRegions-00124" href="#VUID-vkCmdCopyImage-pRegions-00124"></a> <span class="vuid">VUID-vkCmdCopyImage-pRegions-00124</span><br>

The union of all source regions, and the union of all destination
regions, specified by the elements of <code>pRegions</code>, <strong>must</strong> not overlap
in memory</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage-srcImage-01995" href="#VUID-vkCmdCopyImage-srcImage-01995"></a> <span class="vuid">VUID-vkCmdCopyImage-srcImage-01995</span><br>

The <a href="resources.html#resources-image-format-features" class="xref page">format features</a> of
<code>srcImage</code> <strong>must</strong> contain <code>VK_FORMAT_FEATURE_TRANSFER_SRC_BIT</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage-srcImageLayout-00128" href="#VUID-vkCmdCopyImage-srcImageLayout-00128"></a> <span class="vuid">VUID-vkCmdCopyImage-srcImageLayout-00128</span><br>

<code>srcImageLayout</code> <strong>must</strong> specify the layout of the image subresources
of <code>srcImage</code> specified in <code>pRegions</code> at the time this command
is executed on a <code>VkDevice</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage-srcImageLayout-01917" href="#VUID-vkCmdCopyImage-srcImageLayout-01917"></a> <span class="vuid">VUID-vkCmdCopyImage-srcImageLayout-01917</span><br>

<code>srcImageLayout</code> <strong>must</strong> be
<code>VK_IMAGE_LAYOUT_TRANSFER_SRC_OPTIMAL</code>, or
<code>VK_IMAGE_LAYOUT_GENERAL</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage-srcImage-09460" href="#VUID-vkCmdCopyImage-srcImage-09460"></a> <span class="vuid">VUID-vkCmdCopyImage-srcImage-09460</span><br>

If <code>srcImage</code> and <code>dstImage</code> are the same, and any elements of
<code>pRegions</code> contains the <code>srcSubresource</code> and
<code>dstSubresource</code> with matching <code>mipLevel</code> and overlapping array
layers, then the <code>srcImageLayout</code> and <code>dstImageLayout</code> <strong>must</strong> be
<code>VK_IMAGE_LAYOUT_GENERAL</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage-dstImage-01996" href="#VUID-vkCmdCopyImage-dstImage-01996"></a> <span class="vuid">VUID-vkCmdCopyImage-dstImage-01996</span><br>

The <a href="resources.html#resources-image-format-features" class="xref page">format features</a> of
<code>dstImage</code> <strong>must</strong> contain <code>VK_FORMAT_FEATURE_TRANSFER_DST_BIT</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage-dstImageLayout-00133" href="#VUID-vkCmdCopyImage-dstImageLayout-00133"></a> <span class="vuid">VUID-vkCmdCopyImage-dstImageLayout-00133</span><br>

<code>dstImageLayout</code> <strong>must</strong> specify the layout of the image subresources
of <code>dstImage</code> specified in <code>pRegions</code> at the time this command
is executed on a <code>VkDevice</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage-dstImageLayout-01395" href="#VUID-vkCmdCopyImage-dstImageLayout-01395"></a> <span class="vuid">VUID-vkCmdCopyImage-dstImageLayout-01395</span><br>

<code>dstImageLayout</code> <strong>must</strong> be
<code>VK_IMAGE_LAYOUT_TRANSFER_DST_OPTIMAL</code>, or
<code>VK_IMAGE_LAYOUT_GENERAL</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage-srcImage-01548" href="#VUID-vkCmdCopyImage-srcImage-01548"></a> <span class="vuid">VUID-vkCmdCopyImage-srcImage-01548</span><br>

If the <a href="formats.html#VkFormat" class="xref page">VkFormat</a> of each of <code>srcImage</code> and <code>dstImage</code> is
not a <a href="formats.html#formats-requiring-sampler-ycbcr-conversion" class="xref page"><em>multi-planar    format</em></a>, the
<a href="formats.html#VkFormat" class="xref page">VkFormat</a> of each of <code>srcImage</code> and <code>dstImage</code> <strong>must</strong> be
<a href="formats.html#formats-size-compatibility" class="xref page">size-compatible</a></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage-None-01549" href="#VUID-vkCmdCopyImage-None-01549"></a> <span class="vuid">VUID-vkCmdCopyImage-None-01549</span><br>

In a copy to or from a plane of a
<a href="formats.html#formats-requiring-sampler-ycbcr-conversion" class="xref page">multi-planar image</a>, the
<a href="formats.html#VkFormat" class="xref page">VkFormat</a> of the image and plane <strong>must</strong> be compatible according to
<a href="formats.html#formats-compatible-planes" class="xref page">the description of compatible planes</a> for
the plane being copied</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage-srcImage-09247" href="#VUID-vkCmdCopyImage-srcImage-09247"></a> <span class="vuid">VUID-vkCmdCopyImage-srcImage-09247</span><br>

If the <a href="formats.html#VkFormat" class="xref page">VkFormat</a> of each of <code>srcImage</code> and <code>dstImage</code> is a
<a href="../appendices/compressedtex.html#compressed_image_formats" class="xref page">compressed image format</a>, the formats <strong>must</strong>
have the same texel block extent</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage-srcImage-00136" href="#VUID-vkCmdCopyImage-srcImage-00136"></a> <span class="vuid">VUID-vkCmdCopyImage-srcImage-00136</span><br>

The sample count of <code>srcImage</code> and <code>dstImage</code> <strong>must</strong> match</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage-srcOffset-01783" href="#VUID-vkCmdCopyImage-srcOffset-01783"></a> <span class="vuid">VUID-vkCmdCopyImage-srcOffset-01783</span><br>

The <code>srcOffset</code> and <code>extent</code> members of each element of
<code>pRegions</code> <strong>must</strong> respect the image transfer granularity requirements
of <code>commandBuffer</code>&#8217;s command pool&#8217;s queue family, as described in
<a href="devsandqueues.html#VkQueueFamilyProperties" class="xref page">VkQueueFamilyProperties</a></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage-dstOffset-01784" href="#VUID-vkCmdCopyImage-dstOffset-01784"></a> <span class="vuid">VUID-vkCmdCopyImage-dstOffset-01784</span><br>

The <code>dstOffset</code> and <code>extent</code> members of each element of
<code>pRegions</code> <strong>must</strong> respect the image transfer granularity requirements
of <code>commandBuffer</code>&#8217;s command pool&#8217;s queue family, as described in
<a href="devsandqueues.html#VkQueueFamilyProperties" class="xref page">VkQueueFamilyProperties</a></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage-srcImage-01551" href="#VUID-vkCmdCopyImage-srcImage-01551"></a> <span class="vuid">VUID-vkCmdCopyImage-srcImage-01551</span><br>

If neither <code>srcImage</code> nor <code>dstImage</code> has a
<a href="formats.html#formats-requiring-sampler-ycbcr-conversion" class="xref page">multi-planar image    format</a> then for each element of <code>pRegions</code>,
<code>srcSubresource.aspectMask</code> and <code>dstSubresource.aspectMask</code>
<strong>must</strong> match</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage-srcImage-08713" href="#VUID-vkCmdCopyImage-srcImage-08713"></a> <span class="vuid">VUID-vkCmdCopyImage-srcImage-08713</span><br>

If <code>srcImage</code> has a <a href="formats.html#formats-requiring-sampler-ycbcr-conversion" class="xref page">    multi-planar image format</a>, then for each element of <code>pRegions</code>,
<code>srcSubresource.aspectMask</code> <strong>must</strong> be a single valid
<a href="formats.html#formats-planes-image-aspect" class="xref page">multi-planar aspect mask</a> bit</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage-dstImage-08714" href="#VUID-vkCmdCopyImage-dstImage-08714"></a> <span class="vuid">VUID-vkCmdCopyImage-dstImage-08714</span><br>

If <code>dstImage</code> has a <a href="formats.html#formats-requiring-sampler-ycbcr-conversion" class="xref page">    multi-planar image format</a>, then for each element of <code>pRegions</code>,
<code>dstSubresource.aspectMask</code> <strong>must</strong> be a single valid
<a href="formats.html#formats-planes-image-aspect" class="xref page">multi-planar aspect mask</a> bit</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage-srcImage-01556" href="#VUID-vkCmdCopyImage-srcImage-01556"></a> <span class="vuid">VUID-vkCmdCopyImage-srcImage-01556</span><br>

If <code>srcImage</code> has a
<a href="formats.html#formats-requiring-sampler-ycbcr-conversion" class="xref page">multi-planar image format</a>
and the <code>dstImage</code> does not have a multi-planar image format, then
for each element of <code>pRegions</code>, <code>dstSubresource.aspectMask</code>
<strong>must</strong> be <code>VK_IMAGE_ASPECT_COLOR_BIT</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage-dstImage-01557" href="#VUID-vkCmdCopyImage-dstImage-01557"></a> <span class="vuid">VUID-vkCmdCopyImage-dstImage-01557</span><br>

If <code>dstImage</code> has a
<a href="formats.html#formats-requiring-sampler-ycbcr-conversion" class="xref page">multi-planar image format</a>
and the <code>srcImage</code> does not have a multi-planar image format, then
for each element of <code>pRegions</code>, <code>srcSubresource.aspectMask</code>
<strong>must</strong> be <code>VK_IMAGE_ASPECT_COLOR_BIT</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage-apiVersion-07932" href="#VUID-vkCmdCopyImage-apiVersion-07932"></a> <span class="vuid">VUID-vkCmdCopyImage-apiVersion-07932</span><br>

    If
or
    <a href="devsandqueues.html#VkPhysicalDeviceProperties" class="xref page">VkPhysicalDeviceProperties</a>::<code>apiVersion</code> is less than Vulkan
    1.1,
and
    either <code>srcImage</code> or <code>dstImage</code> is of type
    <code>VK_IMAGE_TYPE_3D</code>, then for each element of <code>pRegions</code>,
    <code>srcSubresource.baseArrayLayer</code> and
    <code>dstSubresource.baseArrayLayer</code> <strong>must</strong> both be <code>0</code>, and
    <code>srcSubresource.layerCount</code> and <code>dstSubresource.layerCount</code>
    <strong>must</strong> both be <code>1</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage-srcImage-04443" href="#VUID-vkCmdCopyImage-srcImage-04443"></a> <span class="vuid">VUID-vkCmdCopyImage-srcImage-04443</span><br>

If <code>srcImage</code> is of type <code>VK_IMAGE_TYPE_3D</code>, then for each
element of <code>pRegions</code>, <code>srcSubresource.baseArrayLayer</code> <strong>must</strong> be
<code>0</code> and <code>srcSubresource.layerCount</code> <strong>must</strong> be <code>1</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage-dstImage-04444" href="#VUID-vkCmdCopyImage-dstImage-04444"></a> <span class="vuid">VUID-vkCmdCopyImage-dstImage-04444</span><br>

If <code>dstImage</code> is of type <code>VK_IMAGE_TYPE_3D</code>, then for each
element of <code>pRegions</code>, <code>dstSubresource.baseArrayLayer</code> <strong>must</strong> be
<code>0</code> and <code>dstSubresource.layerCount</code> <strong>must</strong> be <code>1</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage-aspectMask-00142" href="#VUID-vkCmdCopyImage-aspectMask-00142"></a> <span class="vuid">VUID-vkCmdCopyImage-aspectMask-00142</span><br>

For each element of <code>pRegions</code>, <code>srcSubresource.aspectMask</code>
<strong>must</strong> specify aspects present in <code>srcImage</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage-aspectMask-00143" href="#VUID-vkCmdCopyImage-aspectMask-00143"></a> <span class="vuid">VUID-vkCmdCopyImage-aspectMask-00143</span><br>

For each element of <code>pRegions</code>, <code>dstSubresource.aspectMask</code>
<strong>must</strong> specify aspects present in <code>dstImage</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage-srcOffset-00144" href="#VUID-vkCmdCopyImage-srcOffset-00144"></a> <span class="vuid">VUID-vkCmdCopyImage-srcOffset-00144</span><br>

For each element of <code>pRegions</code>, <code>srcOffset.x</code> and
<span class="eq">(<code>extent.width</code> +  <code>srcOffset.x</code>)</span> <strong>must</strong> both be
greater than or equal to <code>0</code> and less than or equal to the width of the
specified <code>srcSubresource</code> of <code>srcImage</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage-srcOffset-00145" href="#VUID-vkCmdCopyImage-srcOffset-00145"></a> <span class="vuid">VUID-vkCmdCopyImage-srcOffset-00145</span><br>

For each element of <code>pRegions</code>, <code>srcOffset.y</code> and
<span class="eq">(<code>extent.height</code> +  <code>srcOffset.y</code>)</span> <strong>must</strong> both be
greater than or equal to <code>0</code> and less than or equal to the height of the
specified <code>srcSubresource</code> of <code>srcImage</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage-srcImage-00146" href="#VUID-vkCmdCopyImage-srcImage-00146"></a> <span class="vuid">VUID-vkCmdCopyImage-srcImage-00146</span><br>

If <code>srcImage</code> is of type <code>VK_IMAGE_TYPE_1D</code>, then for each
element of <code>pRegions</code>, <code>srcOffset.y</code> <strong>must</strong> be <code>0</code> and
<code>extent.height</code> <strong>must</strong> be <code>1</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage-srcOffset-00147" href="#VUID-vkCmdCopyImage-srcOffset-00147"></a> <span class="vuid">VUID-vkCmdCopyImage-srcOffset-00147</span><br>

If <code>srcImage</code> is of type <code>VK_IMAGE_TYPE_3D</code>, then for each
element of <code>pRegions</code>, <code>srcOffset.z</code> and
<span class="eq">(<code>extent.depth</code> +  <code>srcOffset.z</code>)</span> <strong>must</strong> both be
greater than or equal to <code>0</code> and less than or equal to the depth of the
specified <code>srcSubresource</code> of <code>srcImage</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage-srcImage-01785" href="#VUID-vkCmdCopyImage-srcImage-01785"></a> <span class="vuid">VUID-vkCmdCopyImage-srcImage-01785</span><br>

If <code>srcImage</code> is of type <code>VK_IMAGE_TYPE_1D</code>, then for each
element of <code>pRegions</code>, <code>srcOffset.z</code> <strong>must</strong> be <code>0</code> and
<code>extent.depth</code> <strong>must</strong> be <code>1</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage-dstImage-01786" href="#VUID-vkCmdCopyImage-dstImage-01786"></a> <span class="vuid">VUID-vkCmdCopyImage-dstImage-01786</span><br>

If <code>dstImage</code> is of type <code>VK_IMAGE_TYPE_1D</code>, then for each
element of <code>pRegions</code>, <code>dstOffset.z</code> <strong>must</strong> be <code>0</code> and
<code>extent.depth</code> <strong>must</strong> be <code>1</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage-srcImage-01787" href="#VUID-vkCmdCopyImage-srcImage-01787"></a> <span class="vuid">VUID-vkCmdCopyImage-srcImage-01787</span><br>

If <code>srcImage</code> is of type <code>VK_IMAGE_TYPE_2D</code>, then for each
element of <code>pRegions</code>, <code>srcOffset.z</code> <strong>must</strong> be <code>0</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage-dstImage-01788" href="#VUID-vkCmdCopyImage-dstImage-01788"></a> <span class="vuid">VUID-vkCmdCopyImage-dstImage-01788</span><br>

If <code>dstImage</code> is of type <code>VK_IMAGE_TYPE_2D</code>, then for each
element of <code>pRegions</code>, <code>dstOffset.z</code> <strong>must</strong> be <code>0</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage-apiVersion-07933" href="#VUID-vkCmdCopyImage-apiVersion-07933"></a> <span class="vuid">VUID-vkCmdCopyImage-apiVersion-07933</span><br>

    If
and
    <a href="devsandqueues.html#VkPhysicalDeviceProperties" class="xref page">VkPhysicalDeviceProperties</a>::<code>apiVersion</code> is less than Vulkan
    1.1,
    <code>srcImage</code> and <code>dstImage</code> <strong>must</strong> have the same <a href="resources.html#VkImageType" class="xref page">VkImageType</a></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage-apiVersion-08969" href="#VUID-vkCmdCopyImage-apiVersion-08969"></a> <span class="vuid">VUID-vkCmdCopyImage-apiVersion-08969</span><br>

    If
and
    <a href="devsandqueues.html#VkPhysicalDeviceProperties" class="xref page">VkPhysicalDeviceProperties</a>::<code>apiVersion</code> is less than Vulkan
    1.1,
    <code>srcImage</code> or <code>dstImage</code> is of type <code>VK_IMAGE_TYPE_2D</code>, then
    for each element of <code>pRegions</code>, <code>extent.depth</code> <strong>must</strong> be <code>1</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage-srcImage-07743" href="#VUID-vkCmdCopyImage-srcImage-07743"></a> <span class="vuid">VUID-vkCmdCopyImage-srcImage-07743</span><br>

If <code>srcImage</code> and <code>dstImage</code> have a different <a href="resources.html#VkImageType" class="xref page">VkImageType</a>,
one <strong>must</strong> be <code>VK_IMAGE_TYPE_3D</code> and the other <strong>must</strong> be
<code>VK_IMAGE_TYPE_2D</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage-srcImage-08793" href="#VUID-vkCmdCopyImage-srcImage-08793"></a> <span class="vuid">VUID-vkCmdCopyImage-srcImage-08793</span><br>

If <code>srcImage</code> and <code>dstImage</code> have the same <a href="resources.html#VkImageType" class="xref page">VkImageType</a>,
for each element of <code>pRegions</code>,
the <code>layerCount</code> members of <code>srcSubresource</code> or
<code>dstSubresource</code> <strong>must</strong> match</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage-srcImage-01790" href="#VUID-vkCmdCopyImage-srcImage-01790"></a> <span class="vuid">VUID-vkCmdCopyImage-srcImage-01790</span><br>

If <code>srcImage</code> and <code>dstImage</code> are both of type
<code>VK_IMAGE_TYPE_2D</code>, then for each element of <code>pRegions</code>,
<code>extent.depth</code> <strong>must</strong> be <code>1</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage-srcImage-01791" href="#VUID-vkCmdCopyImage-srcImage-01791"></a> <span class="vuid">VUID-vkCmdCopyImage-srcImage-01791</span><br>

If <code>srcImage</code> is of type <code>VK_IMAGE_TYPE_2D</code>, and <code>dstImage</code>
is of type <code>VK_IMAGE_TYPE_3D</code>, then for each element of
<code>pRegions</code>, <code>extent.depth</code> <strong>must</strong> equal
<code>srcSubresource.layerCount</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage-dstImage-01792" href="#VUID-vkCmdCopyImage-dstImage-01792"></a> <span class="vuid">VUID-vkCmdCopyImage-dstImage-01792</span><br>

If <code>dstImage</code> is of type <code>VK_IMAGE_TYPE_2D</code>, and <code>srcImage</code>
is of type <code>VK_IMAGE_TYPE_3D</code>, then for each element of
<code>pRegions</code>, <code>extent.depth</code> <strong>must</strong> equal
<code>dstSubresource.layerCount</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage-dstOffset-00150" href="#VUID-vkCmdCopyImage-dstOffset-00150"></a> <span class="vuid">VUID-vkCmdCopyImage-dstOffset-00150</span><br>

For each element of <code>pRegions</code>, <code>dstOffset.x</code> and
<span class="eq">(<code>extent.width</code> +  <code>dstOffset.x</code>)</span> <strong>must</strong> both be
greater than or equal to <code>0</code> and less than or equal to the width of the
specified <code>dstSubresource</code> of <code>dstImage</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage-dstOffset-00151" href="#VUID-vkCmdCopyImage-dstOffset-00151"></a> <span class="vuid">VUID-vkCmdCopyImage-dstOffset-00151</span><br>

For each element of <code>pRegions</code>, <code>dstOffset.y</code> and
<span class="eq">(<code>extent.height</code> +  <code>dstOffset.y</code>)</span> <strong>must</strong> both be
greater than or equal to <code>0</code> and less than or equal to the height of the
specified <code>dstSubresource</code> of <code>dstImage</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage-dstImage-00152" href="#VUID-vkCmdCopyImage-dstImage-00152"></a> <span class="vuid">VUID-vkCmdCopyImage-dstImage-00152</span><br>

If <code>dstImage</code> is of type <code>VK_IMAGE_TYPE_1D</code>, then for each
element of <code>pRegions</code>, <code>dstOffset.y</code> <strong>must</strong> be <code>0</code> and
<code>extent.height</code> <strong>must</strong> be <code>1</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage-dstOffset-00153" href="#VUID-vkCmdCopyImage-dstOffset-00153"></a> <span class="vuid">VUID-vkCmdCopyImage-dstOffset-00153</span><br>

If <code>dstImage</code> is of type <code>VK_IMAGE_TYPE_3D</code>, then for each
element of <code>pRegions</code>, <code>dstOffset.z</code> and
<span class="eq">(<code>extent.depth</code> +  <code>dstOffset.z</code>)</span> <strong>must</strong> both be
greater than or equal to <code>0</code> and less than or equal to the depth of the
specified <code>dstSubresource</code> of <code>dstImage</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage-pRegions-07278" href="#VUID-vkCmdCopyImage-pRegions-07278"></a> <span class="vuid">VUID-vkCmdCopyImage-pRegions-07278</span><br>

For each element of <code>pRegions</code>, <code>srcOffset.x</code> <strong>must</strong> be a
multiple of the <a href="formats.html#formats-compatibility-classes" class="xref page">texel block extent    width</a> of the <a href="formats.html#VkFormat" class="xref page">VkFormat</a> of <code>srcImage</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage-pRegions-07279" href="#VUID-vkCmdCopyImage-pRegions-07279"></a> <span class="vuid">VUID-vkCmdCopyImage-pRegions-07279</span><br>

For each element of <code>pRegions</code>, <code>srcOffset.y</code> <strong>must</strong> be a
multiple of the <a href="formats.html#formats-compatibility-classes" class="xref page">texel block extent    height</a> of the <a href="formats.html#VkFormat" class="xref page">VkFormat</a> of <code>srcImage</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage-pRegions-07280" href="#VUID-vkCmdCopyImage-pRegions-07280"></a> <span class="vuid">VUID-vkCmdCopyImage-pRegions-07280</span><br>

For each element of <code>pRegions</code>, <code>srcOffset.z</code> <strong>must</strong> be a
multiple of the <a href="formats.html#formats-compatibility-classes" class="xref page">texel block extent    depth</a> of the <a href="formats.html#VkFormat" class="xref page">VkFormat</a> of <code>srcImage</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage-pRegions-07281" href="#VUID-vkCmdCopyImage-pRegions-07281"></a> <span class="vuid">VUID-vkCmdCopyImage-pRegions-07281</span><br>

For each element of <code>pRegions</code>, <code>dstOffset.x</code> <strong>must</strong> be a
multiple of the <a href="formats.html#formats-compatibility-classes" class="xref page">texel block extent    width</a> of the <a href="formats.html#VkFormat" class="xref page">VkFormat</a> of <code>dstImage</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage-pRegions-07282" href="#VUID-vkCmdCopyImage-pRegions-07282"></a> <span class="vuid">VUID-vkCmdCopyImage-pRegions-07282</span><br>

For each element of <code>pRegions</code>, <code>dstOffset.y</code> <strong>must</strong> be a
multiple of the <a href="formats.html#formats-compatibility-classes" class="xref page">texel block extent    height</a> of the <a href="formats.html#VkFormat" class="xref page">VkFormat</a> of <code>dstImage</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage-pRegions-07283" href="#VUID-vkCmdCopyImage-pRegions-07283"></a> <span class="vuid">VUID-vkCmdCopyImage-pRegions-07283</span><br>

For each element of <code>pRegions</code>, <code>dstOffset.z</code> <strong>must</strong> be a
multiple of the <a href="formats.html#formats-compatibility-classes" class="xref page">texel block extent    depth</a> of the <a href="formats.html#VkFormat" class="xref page">VkFormat</a> of <code>dstImage</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage-srcImage-01728" href="#VUID-vkCmdCopyImage-srcImage-01728"></a> <span class="vuid">VUID-vkCmdCopyImage-srcImage-01728</span><br>

For each element of <code>pRegions</code>, if the sum of <code>srcOffset.x</code> and
<code>extent.width</code> does not equal the width of the subresource specified
by <code>srcSubresource</code>, <code>extent.width</code> <strong>must</strong> be a multiple of the
<a href="formats.html#formats-compatibility-classes" class="xref page">texel block extent width</a> of the
<a href="formats.html#VkFormat" class="xref page">VkFormat</a> of <code>srcImage</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage-srcImage-01729" href="#VUID-vkCmdCopyImage-srcImage-01729"></a> <span class="vuid">VUID-vkCmdCopyImage-srcImage-01729</span><br>

For each element of <code>pRegions</code>, if the sum of <code>srcOffset.y</code> and
<code>extent.height</code> does not equal the height of the subresource
specified by <code>srcSubresource</code>, <code>extent.height</code> <strong>must</strong> be a
multiple of the <a href="formats.html#formats-compatibility-classes" class="xref page">texel block extent    height</a> of the <a href="formats.html#VkFormat" class="xref page">VkFormat</a> of <code>srcImage</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage-srcImage-01730" href="#VUID-vkCmdCopyImage-srcImage-01730"></a> <span class="vuid">VUID-vkCmdCopyImage-srcImage-01730</span><br>

For each element of <code>pRegions</code>, if the sum of <code>srcOffset.z</code> and
<code>extent.depth</code> does not equal the depth of the subresource specified
by <code>srcSubresource</code>, <code>extent.depth</code> <strong>must</strong> be a multiple of the
<a href="formats.html#formats-compatibility-classes" class="xref page">texel block extent depth</a> of the
<a href="formats.html#VkFormat" class="xref page">VkFormat</a> of <code>srcImage</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage-dstImage-01732" href="#VUID-vkCmdCopyImage-dstImage-01732"></a> <span class="vuid">VUID-vkCmdCopyImage-dstImage-01732</span><br>

For each element of <code>pRegions</code>, if the sum of <code>dstOffset.x</code> and
<code>extent.width</code> does not equal the width of the subresource specified
by <code>dstSubresource</code>, <code>extent.width</code> <strong>must</strong> be a multiple of the
<a href="formats.html#formats-compatibility-classes" class="xref page">texel block extent width</a> of the
<a href="formats.html#VkFormat" class="xref page">VkFormat</a> of <code>dstImage</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage-dstImage-01733" href="#VUID-vkCmdCopyImage-dstImage-01733"></a> <span class="vuid">VUID-vkCmdCopyImage-dstImage-01733</span><br>

For each element of <code>pRegions</code>, if the sum of <code>dstOffset.y</code> and
<code>extent.height</code> does not equal the height of the subresource
specified by <code>dstSubresource</code>, <code>extent.height</code> <strong>must</strong> be a
multiple of the <a href="formats.html#formats-compatibility-classes" class="xref page">texel block extent    height</a> of the <a href="formats.html#VkFormat" class="xref page">VkFormat</a> of <code>dstImage</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage-dstImage-01734" href="#VUID-vkCmdCopyImage-dstImage-01734"></a> <span class="vuid">VUID-vkCmdCopyImage-dstImage-01734</span><br>

For each element of <code>pRegions</code>, if the sum of <code>dstOffset.z</code> and
<code>extent.depth</code> does not equal the depth of the subresource specified
by <code>dstSubresource</code>, <code>extent.depth</code> <strong>must</strong> be a multiple of the
<a href="formats.html#formats-compatibility-classes" class="xref page">texel block extent depth</a> of the
<a href="formats.html#VkFormat" class="xref page">VkFormat</a> of <code>dstImage</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage-aspect-06662" href="#VUID-vkCmdCopyImage-aspect-06662"></a> <span class="vuid">VUID-vkCmdCopyImage-aspect-06662</span><br>

If the <code>aspect</code> member of any element of <code>pRegions</code> includes any
flag other than <code>VK_IMAGE_ASPECT_STENCIL_BIT</code> or <code>srcImage</code> was
not created with <a href="resources.html#VkImageStencilUsageCreateInfo" class="xref page">separate stencil    usage</a>,
<code>VK_IMAGE_USAGE_TRANSFER_SRC_BIT</code> <strong>must</strong> have been included in the
<a href="resources.html#VkImageCreateInfo" class="xref page">VkImageCreateInfo</a>::<code>usage</code> used to create <code>srcImage</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage-aspect-06663" href="#VUID-vkCmdCopyImage-aspect-06663"></a> <span class="vuid">VUID-vkCmdCopyImage-aspect-06663</span><br>

If the <code>aspect</code> member of any element of <code>pRegions</code> includes any
flag other than <code>VK_IMAGE_ASPECT_STENCIL_BIT</code> or <code>dstImage</code> was
not created with <a href="resources.html#VkImageStencilUsageCreateInfo" class="xref page">separate stencil    usage</a>,
<code>VK_IMAGE_USAGE_TRANSFER_DST_BIT</code> <strong>must</strong> have been included in the
<a href="resources.html#VkImageCreateInfo" class="xref page">VkImageCreateInfo</a>::<code>usage</code> used to create <code>dstImage</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage-aspect-06664" href="#VUID-vkCmdCopyImage-aspect-06664"></a> <span class="vuid">VUID-vkCmdCopyImage-aspect-06664</span><br>

If the <code>aspect</code> member of any element of <code>pRegions</code> includes
<code>VK_IMAGE_ASPECT_STENCIL_BIT</code>, and <code>srcImage</code> was created with
<a href="resources.html#VkImageStencilUsageCreateInfo" class="xref page">separate stencil usage</a>,
<code>VK_IMAGE_USAGE_TRANSFER_SRC_BIT</code> <strong>must</strong> have been included in the
<a href="resources.html#VkImageStencilUsageCreateInfo" class="xref page">VkImageStencilUsageCreateInfo</a>::<code>stencilUsage</code> used to create
<code>srcImage</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage-aspect-06665" href="#VUID-vkCmdCopyImage-aspect-06665"></a> <span class="vuid">VUID-vkCmdCopyImage-aspect-06665</span><br>

If the <code>aspect</code> member of any element of <code>pRegions</code> includes
<code>VK_IMAGE_ASPECT_STENCIL_BIT</code>, and <code>dstImage</code> was created with
<a href="resources.html#VkImageStencilUsageCreateInfo" class="xref page">separate stencil usage</a>,
<code>VK_IMAGE_USAGE_TRANSFER_DST_BIT</code> <strong>must</strong> have been included in the
<a href="resources.html#VkImageStencilUsageCreateInfo" class="xref page">VkImageStencilUsageCreateInfo</a>::<code>stencilUsage</code> used to create
<code>dstImage</code></p>
</li>
</ul>
</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCmdCopyImage-srcImage-07966" href="#VUID-vkCmdCopyImage-srcImage-07966"></a> <span class="vuid">VUID-vkCmdCopyImage-srcImage-07966</span><br>

If <code>srcImage</code> is non-sparse then the image
or the specified <em>disjoint</em> plane
<strong>must</strong> be bound completely and contiguously to a single
<code>VkDeviceMemory</code> object</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage-srcSubresource-07967" href="#VUID-vkCmdCopyImage-srcSubresource-07967"></a> <span class="vuid">VUID-vkCmdCopyImage-srcSubresource-07967</span><br>

The <code>srcSubresource.mipLevel</code> member of each element of
<code>pRegions</code> <strong>must</strong> be less than the <code>mipLevels</code> specified in
<a href="resources.html#VkImageCreateInfo" class="xref page">VkImageCreateInfo</a> when <code>srcImage</code> was created</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage-srcSubresource-07968" href="#VUID-vkCmdCopyImage-srcSubresource-07968"></a> <span class="vuid">VUID-vkCmdCopyImage-srcSubresource-07968</span><br>

<span class="eq"><code>srcSubresource.baseArrayLayer</code> + 
<code>srcSubresource.layerCount</code></span> of each element of <code>pRegions</code>
<strong>must</strong> be less than or equal to the <code>arrayLayers</code> specified in
<a href="resources.html#VkImageCreateInfo" class="xref page">VkImageCreateInfo</a> when <code>srcImage</code> was created</p>
</li>
</ul>
</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCmdCopyImage-dstImage-07966" href="#VUID-vkCmdCopyImage-dstImage-07966"></a> <span class="vuid">VUID-vkCmdCopyImage-dstImage-07966</span><br>

If <code>dstImage</code> is non-sparse then the image
or the specified <em>disjoint</em> plane
<strong>must</strong> be bound completely and contiguously to a single
<code>VkDeviceMemory</code> object</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage-dstSubresource-07967" href="#VUID-vkCmdCopyImage-dstSubresource-07967"></a> <span class="vuid">VUID-vkCmdCopyImage-dstSubresource-07967</span><br>

The <code>dstSubresource.mipLevel</code> member of each element of
<code>pRegions</code> <strong>must</strong> be less than the <code>mipLevels</code> specified in
<a href="resources.html#VkImageCreateInfo" class="xref page">VkImageCreateInfo</a> when <code>dstImage</code> was created</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage-dstSubresource-07968" href="#VUID-vkCmdCopyImage-dstSubresource-07968"></a> <span class="vuid">VUID-vkCmdCopyImage-dstSubresource-07968</span><br>

<span class="eq"><code>dstSubresource.baseArrayLayer</code> + 
<code>dstSubresource.layerCount</code></span> of each element of <code>pRegions</code>
<strong>must</strong> be less than or equal to the <code>arrayLayers</code> specified in
<a href="resources.html#VkImageCreateInfo" class="xref page">VkImageCreateInfo</a> when <code>dstImage</code> was created</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCmdCopyImage-commandBuffer-parameter" href="#VUID-vkCmdCopyImage-commandBuffer-parameter"></a> <span class="vuid">VUID-vkCmdCopyImage-commandBuffer-parameter</span><br>
 <code>commandBuffer</code> <strong>must</strong> be a valid <a href="cmdbuffers.html#VkCommandBuffer" class="xref page">VkCommandBuffer</a> handle</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage-srcImage-parameter" href="#VUID-vkCmdCopyImage-srcImage-parameter"></a> <span class="vuid">VUID-vkCmdCopyImage-srcImage-parameter</span><br>
 <code>srcImage</code> <strong>must</strong> be a valid <a href="resources.html#VkImage" class="xref page">VkImage</a> handle</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage-srcImageLayout-parameter" href="#VUID-vkCmdCopyImage-srcImageLayout-parameter"></a> <span class="vuid">VUID-vkCmdCopyImage-srcImageLayout-parameter</span><br>
 <code>srcImageLayout</code> <strong>must</strong> be a valid <a href="resources.html#VkImageLayout" class="xref page">VkImageLayout</a> value</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage-dstImage-parameter" href="#VUID-vkCmdCopyImage-dstImage-parameter"></a> <span class="vuid">VUID-vkCmdCopyImage-dstImage-parameter</span><br>
 <code>dstImage</code> <strong>must</strong> be a valid <a href="resources.html#VkImage" class="xref page">VkImage</a> handle</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage-dstImageLayout-parameter" href="#VUID-vkCmdCopyImage-dstImageLayout-parameter"></a> <span class="vuid">VUID-vkCmdCopyImage-dstImageLayout-parameter</span><br>
 <code>dstImageLayout</code> <strong>must</strong> be a valid <a href="resources.html#VkImageLayout" class="xref page">VkImageLayout</a> value</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage-pRegions-parameter" href="#VUID-vkCmdCopyImage-pRegions-parameter"></a> <span class="vuid">VUID-vkCmdCopyImage-pRegions-parameter</span><br>
 <code>pRegions</code> <strong>must</strong> be a valid pointer to an array of <code>regionCount</code> valid <a href="#VkImageCopy">VkImageCopy</a> structures</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage-commandBuffer-recording" href="#VUID-vkCmdCopyImage-commandBuffer-recording"></a> <span class="vuid">VUID-vkCmdCopyImage-commandBuffer-recording</span><br>
 <code>commandBuffer</code> <strong>must</strong> be in the <a href="cmdbuffers.html#commandbuffers-lifecycle" class="xref page">recording state</a></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage-commandBuffer-cmdpool" href="#VUID-vkCmdCopyImage-commandBuffer-cmdpool"></a> <span class="vuid">VUID-vkCmdCopyImage-commandBuffer-cmdpool</span><br>
 The <code>VkCommandPool</code> that <code>commandBuffer</code> was allocated from <strong>must</strong> support transfer, graphics, or compute operations</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage-renderpass" href="#VUID-vkCmdCopyImage-renderpass"></a> <span class="vuid">VUID-vkCmdCopyImage-renderpass</span><br>
 This command <strong>must</strong> only be called outside of a render pass instance</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage-regionCount-arraylength" href="#VUID-vkCmdCopyImage-regionCount-arraylength"></a> <span class="vuid">VUID-vkCmdCopyImage-regionCount-arraylength</span><br>
 <code>regionCount</code> <strong>must</strong> be greater than <code>0</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage-commonparent" href="#VUID-vkCmdCopyImage-commonparent"></a> <span class="vuid">VUID-vkCmdCopyImage-commonparent</span><br>
 Each of <code>commandBuffer</code>, <code>dstImage</code>, and <code>srcImage</code> <strong>must</strong> have been created, allocated, or retrieved from the same <a href="devsandqueues.html#VkDevice" class="xref page">VkDevice</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Host Synchronization</div>
<div class="ulist">
<ul>
<li>
<p>Host access to <code>commandBuffer</code> <strong>must</strong> be externally synchronized</p>
</li>
<li>
<p>Host access to the <code>VkCommandPool</code> that <code>commandBuffer</code> was allocated from <strong>must</strong> be externally synchronized</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Command Properties</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><a href="cmdbuffers.html#VkCommandBufferLevel" class="xref page">Command Buffer Levels</a></th>
<th class="tableblock halign-left valign-top"><a href="renderpass.html#vkCmdBeginRenderPass" class="xref page">Render Pass Scope</a></th>
<th class="tableblock halign-left valign-top"><a href="devsandqueues.html#VkQueueFlagBits" class="xref page">Supported Queue Types</a></th>
<th class="tableblock halign-left valign-top"><a href="fundamentals.html#fundamentals-queueoperation-command-types" class="xref page">Command Type</a></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Primary<br>
Secondary</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Outside</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Transfer<br>
Graphics<br>
Compute</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Action</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>VkImageCopy</code> structure is defined as:</p>
</div>
<div id="VkImageCopy" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_VERSION_1_0
typedef struct VkImageCopy {
    VkImageSubresourceLayers    srcSubresource;
    VkOffset3D                  srcOffset;
    VkImageSubresourceLayers    dstSubresource;
    VkOffset3D                  dstOffset;
    VkExtent3D                  extent;
} VkImageCopy;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>srcSubresource</code> and <code>dstSubresource</code> are
<a href="#VkImageSubresourceLayers">VkImageSubresourceLayers</a> structures specifying the image
subresources of the images used for the source and destination image
data, respectively.</p>
</li>
<li>
<p><code>srcOffset</code> and <code>dstOffset</code> select the initial <code>x</code>, <code>y</code>,
and <code>z</code> offsets in texels of the sub-regions of the source and
destination image data.</p>
</li>
<li>
<p><code>extent</code> is the size in texels of the image to copy in <code>width</code>,
<code>height</code> and <code>depth</code>.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkImageCopy-apiVersion-07940" href="#VUID-VkImageCopy-apiVersion-07940"></a> <span class="vuid">VUID-VkImageCopy-apiVersion-07940</span><br>

If
and
    <a href="devsandqueues.html#VkPhysicalDeviceProperties" class="xref page">VkPhysicalDeviceProperties</a>::<code>apiVersion</code> is less than Vulkan
    1.1,
the
    <code>aspectMask</code> member of <code>srcSubresource</code> and <code>dstSubresource</code>
    <strong>must</strong> match</p>
</li>
<li>
<p><a id="VUID-VkImageCopy-apiVersion-07941" href="#VUID-VkImageCopy-apiVersion-07941"></a> <span class="vuid">VUID-VkImageCopy-apiVersion-07941</span><br>

If
and
    <a href="devsandqueues.html#VkPhysicalDeviceProperties" class="xref page">VkPhysicalDeviceProperties</a>::<code>apiVersion</code> is less than Vulkan
    1.1,
the
    <code>layerCount</code> member of <code>srcSubresource</code> and <code>dstSubresource</code>
    <strong>must</strong> match</p>
</li>
<li>
<p><a id="VUID-VkImageCopy-extent-06668" href="#VUID-VkImageCopy-extent-06668"></a> <span class="vuid">VUID-VkImageCopy-extent-06668</span><br>

<code>extent.width</code> <strong>must</strong> not be 0</p>
</li>
<li>
<p><a id="VUID-VkImageCopy-extent-06669" href="#VUID-VkImageCopy-extent-06669"></a> <span class="vuid">VUID-VkImageCopy-extent-06669</span><br>

<code>extent.height</code> <strong>must</strong> not be 0</p>
</li>
<li>
<p><a id="VUID-VkImageCopy-extent-06670" href="#VUID-VkImageCopy-extent-06670"></a> <span class="vuid">VUID-VkImageCopy-extent-06670</span><br>

<code>extent.depth</code> <strong>must</strong> not be 0</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkImageCopy-srcSubresource-parameter" href="#VUID-VkImageCopy-srcSubresource-parameter"></a> <span class="vuid">VUID-VkImageCopy-srcSubresource-parameter</span><br>
 <code>srcSubresource</code> <strong>must</strong> be a valid <a href="#VkImageSubresourceLayers">VkImageSubresourceLayers</a> structure</p>
</li>
<li>
<p><a id="VUID-VkImageCopy-dstSubresource-parameter" href="#VUID-VkImageCopy-dstSubresource-parameter"></a> <span class="vuid">VUID-VkImageCopy-dstSubresource-parameter</span><br>
 <code>dstSubresource</code> <strong>must</strong> be a valid <a href="#VkImageSubresourceLayers">VkImageSubresourceLayers</a> structure</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>VkImageSubresourceLayers</code> structure is defined as:</p>
</div>
<div id="VkImageSubresourceLayers" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_VERSION_1_0
typedef struct VkImageSubresourceLayers {
    VkImageAspectFlags    aspectMask;
    uint32_t              mipLevel;
    uint32_t              baseArrayLayer;
    uint32_t              layerCount;
} VkImageSubresourceLayers;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>aspectMask</code> is a combination of <a href="resources.html#VkImageAspectFlagBits" class="xref page">VkImageAspectFlagBits</a>,
selecting the color, depth and/or stencil aspects to be copied.</p>
</li>
<li>
<p><code>mipLevel</code> is the mipmap level to copy</p>
</li>
<li>
<p><code>baseArrayLayer</code> and <code>layerCount</code> are the starting layer and
number of layers to copy.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkImageSubresourceLayers-aspectMask-00167" href="#VUID-VkImageSubresourceLayers-aspectMask-00167"></a> <span class="vuid">VUID-VkImageSubresourceLayers-aspectMask-00167</span><br>

If <code>aspectMask</code> contains <code>VK_IMAGE_ASPECT_COLOR_BIT</code>, it <strong>must</strong>
not contain either of <code>VK_IMAGE_ASPECT_DEPTH_BIT</code> or
<code>VK_IMAGE_ASPECT_STENCIL_BIT</code></p>
</li>
<li>
<p><a id="VUID-VkImageSubresourceLayers-aspectMask-00168" href="#VUID-VkImageSubresourceLayers-aspectMask-00168"></a> <span class="vuid">VUID-VkImageSubresourceLayers-aspectMask-00168</span><br>

<code>aspectMask</code> <strong>must</strong> not contain <code>VK_IMAGE_ASPECT_METADATA_BIT</code></p>
</li>
<li>
<p><a id="VUID-VkImageSubresourceLayers-layerCount-09243" href="#VUID-VkImageSubresourceLayers-layerCount-09243"></a> <span class="vuid">VUID-VkImageSubresourceLayers-layerCount-09243</span><br>


<code>layerCount</code> <strong>must</strong> not be <code>VK_REMAINING_ARRAY_LAYERS</code></p>
</li>
<li>
<p><a id="VUID-VkImageSubresourceLayers-layerCount-01700" href="#VUID-VkImageSubresourceLayers-layerCount-01700"></a> <span class="vuid">VUID-VkImageSubresourceLayers-layerCount-01700</span><br>

If <code>layerCount</code> is not <code>VK_REMAINING_ARRAY_LAYERS</code>, it <strong>must</strong> be
greater than 0</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkImageSubresourceLayers-aspectMask-parameter" href="#VUID-VkImageSubresourceLayers-aspectMask-parameter"></a> <span class="vuid">VUID-VkImageSubresourceLayers-aspectMask-parameter</span><br>
 <code>aspectMask</code> <strong>must</strong> be a valid combination of <a href="resources.html#VkImageAspectFlagBits" class="xref page">VkImageAspectFlagBits</a> values</p>
</li>
<li>
<p><a id="VUID-VkImageSubresourceLayers-aspectMask-requiredbitmask" href="#VUID-VkImageSubresourceLayers-aspectMask-requiredbitmask"></a> <span class="vuid">VUID-VkImageSubresourceLayers-aspectMask-requiredbitmask</span><br>
 <code>aspectMask</code> <strong>must</strong> not be <code>0</code></p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>A more extensible version of the copy image command is defined below.</p>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>To copy data between image objects, call:</p>
</div>
<div id="vkCmdCopyImage2" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_VERSION_1_3
void vkCmdCopyImage2(
    VkCommandBuffer                             commandBuffer,
    const VkCopyImageInfo2*                     pCopyImageInfo);</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>commandBuffer</code> is the command buffer into which the command will be
recorded.</p>
</li>
<li>
<p><code>pCopyImageInfo</code> is a pointer to a <a href="#VkCopyImageInfo2">VkCopyImageInfo2</a> structure
describing the copy parameters.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>This command is functionally identical to <a href="#vkCmdCopyImage">vkCmdCopyImage</a>, but includes
extensible sub-structures that include <code>sType</code> and <code>pNext</code>
parameters, allowing them to be more easily extended.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCmdCopyImage2-commandBuffer-01825" href="#VUID-vkCmdCopyImage2-commandBuffer-01825"></a> <span class="vuid">VUID-vkCmdCopyImage2-commandBuffer-01825</span><br>

If <code>commandBuffer</code> is an unprotected command buffer and
<a href="devsandqueues.html#limits-protectedNoFault" class="xref page"><code>protectedNoFault</code></a> is not supported,
<code>srcImage</code> <strong>must</strong> not be a protected image</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage2-commandBuffer-01826" href="#VUID-vkCmdCopyImage2-commandBuffer-01826"></a> <span class="vuid">VUID-vkCmdCopyImage2-commandBuffer-01826</span><br>

If <code>commandBuffer</code> is an unprotected command buffer and
<a href="devsandqueues.html#limits-protectedNoFault" class="xref page"><code>protectedNoFault</code></a> is not supported,
<code>dstImage</code> <strong>must</strong> not be a protected image</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage2-commandBuffer-01827" href="#VUID-vkCmdCopyImage2-commandBuffer-01827"></a> <span class="vuid">VUID-vkCmdCopyImage2-commandBuffer-01827</span><br>

If <code>commandBuffer</code> is a protected command buffer and
<a href="devsandqueues.html#limits-protectedNoFault" class="xref page"><code>protectedNoFault</code></a> is not supported,
<code>dstImage</code> <strong>must</strong> not be an unprotected image</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCmdCopyImage2-commandBuffer-parameter" href="#VUID-vkCmdCopyImage2-commandBuffer-parameter"></a> <span class="vuid">VUID-vkCmdCopyImage2-commandBuffer-parameter</span><br>
 <code>commandBuffer</code> <strong>must</strong> be a valid <a href="cmdbuffers.html#VkCommandBuffer" class="xref page">VkCommandBuffer</a> handle</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage2-pCopyImageInfo-parameter" href="#VUID-vkCmdCopyImage2-pCopyImageInfo-parameter"></a> <span class="vuid">VUID-vkCmdCopyImage2-pCopyImageInfo-parameter</span><br>
 <code>pCopyImageInfo</code> <strong>must</strong> be a valid pointer to a valid <a href="#VkCopyImageInfo2">VkCopyImageInfo2</a> structure</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage2-commandBuffer-recording" href="#VUID-vkCmdCopyImage2-commandBuffer-recording"></a> <span class="vuid">VUID-vkCmdCopyImage2-commandBuffer-recording</span><br>
 <code>commandBuffer</code> <strong>must</strong> be in the <a href="cmdbuffers.html#commandbuffers-lifecycle" class="xref page">recording state</a></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage2-commandBuffer-cmdpool" href="#VUID-vkCmdCopyImage2-commandBuffer-cmdpool"></a> <span class="vuid">VUID-vkCmdCopyImage2-commandBuffer-cmdpool</span><br>
 The <code>VkCommandPool</code> that <code>commandBuffer</code> was allocated from <strong>must</strong> support transfer, graphics, or compute operations</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage2-renderpass" href="#VUID-vkCmdCopyImage2-renderpass"></a> <span class="vuid">VUID-vkCmdCopyImage2-renderpass</span><br>
 This command <strong>must</strong> only be called outside of a render pass instance</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Host Synchronization</div>
<div class="ulist">
<ul>
<li>
<p>Host access to <code>commandBuffer</code> <strong>must</strong> be externally synchronized</p>
</li>
<li>
<p>Host access to the <code>VkCommandPool</code> that <code>commandBuffer</code> was allocated from <strong>must</strong> be externally synchronized</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Command Properties</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><a href="cmdbuffers.html#VkCommandBufferLevel" class="xref page">Command Buffer Levels</a></th>
<th class="tableblock halign-left valign-top"><a href="renderpass.html#vkCmdBeginRenderPass" class="xref page">Render Pass Scope</a></th>
<th class="tableblock halign-left valign-top"><a href="devsandqueues.html#VkQueueFlagBits" class="xref page">Supported Queue Types</a></th>
<th class="tableblock halign-left valign-top"><a href="fundamentals.html#fundamentals-queueoperation-command-types" class="xref page">Command Type</a></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Primary<br>
Secondary</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Outside</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Transfer<br>
Graphics<br>
Compute</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Action</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>VkCopyImageInfo2</code> structure is defined as:</p>
</div>
<div id="VkCopyImageInfo2" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_VERSION_1_3
typedef struct VkCopyImageInfo2 {
    VkStructureType        sType;
    const void*            pNext;
    VkImage                srcImage;
    VkImageLayout          srcImageLayout;
    VkImage                dstImage;
    VkImageLayout          dstImageLayout;
    uint32_t               regionCount;
    const VkImageCopy2*    pRegions;
} VkCopyImageInfo2;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is a <a href="fundamentals.html#VkStructureType" class="xref page">VkStructureType</a> value identifying this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>srcImage</code> is the source image.</p>
</li>
<li>
<p><code>srcImageLayout</code> is the current layout of the source image
subresource.</p>
</li>
<li>
<p><code>dstImage</code> is the destination image.</p>
</li>
<li>
<p><code>dstImageLayout</code> is the current layout of the destination image
subresource.</p>
</li>
<li>
<p><code>regionCount</code> is the number of regions to copy.</p>
</li>
<li>
<p><code>pRegions</code> is a pointer to an array of <a href="#VkImageCopy2">VkImageCopy2</a> structures
specifying the regions to copy.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkCopyImageInfo2-pRegions-00124" href="#VUID-VkCopyImageInfo2-pRegions-00124"></a> <span class="vuid">VUID-VkCopyImageInfo2-pRegions-00124</span><br>

The union of all source regions, and the union of all destination
regions, specified by the elements of <code>pRegions</code>, <strong>must</strong> not overlap
in memory</p>
</li>
<li>
<p><a id="VUID-VkCopyImageInfo2-srcImage-01995" href="#VUID-VkCopyImageInfo2-srcImage-01995"></a> <span class="vuid">VUID-VkCopyImageInfo2-srcImage-01995</span><br>

The <a href="resources.html#resources-image-format-features" class="xref page">format features</a> of
<code>srcImage</code> <strong>must</strong> contain <code>VK_FORMAT_FEATURE_TRANSFER_SRC_BIT</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageInfo2-srcImageLayout-00128" href="#VUID-VkCopyImageInfo2-srcImageLayout-00128"></a> <span class="vuid">VUID-VkCopyImageInfo2-srcImageLayout-00128</span><br>

<code>srcImageLayout</code> <strong>must</strong> specify the layout of the image subresources
of <code>srcImage</code> specified in <code>pRegions</code> at the time this command
is executed on a <code>VkDevice</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageInfo2-srcImageLayout-01917" href="#VUID-VkCopyImageInfo2-srcImageLayout-01917"></a> <span class="vuid">VUID-VkCopyImageInfo2-srcImageLayout-01917</span><br>

<code>srcImageLayout</code> <strong>must</strong> be
<code>VK_IMAGE_LAYOUT_TRANSFER_SRC_OPTIMAL</code>, or
<code>VK_IMAGE_LAYOUT_GENERAL</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageInfo2-srcImage-09460" href="#VUID-VkCopyImageInfo2-srcImage-09460"></a> <span class="vuid">VUID-VkCopyImageInfo2-srcImage-09460</span><br>

If <code>srcImage</code> and <code>dstImage</code> are the same, and any elements of
<code>pRegions</code> contains the <code>srcSubresource</code> and
<code>dstSubresource</code> with matching <code>mipLevel</code> and overlapping array
layers, then the <code>srcImageLayout</code> and <code>dstImageLayout</code> <strong>must</strong> be
<code>VK_IMAGE_LAYOUT_GENERAL</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageInfo2-dstImage-01996" href="#VUID-VkCopyImageInfo2-dstImage-01996"></a> <span class="vuid">VUID-VkCopyImageInfo2-dstImage-01996</span><br>

The <a href="resources.html#resources-image-format-features" class="xref page">format features</a> of
<code>dstImage</code> <strong>must</strong> contain <code>VK_FORMAT_FEATURE_TRANSFER_DST_BIT</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageInfo2-dstImageLayout-00133" href="#VUID-VkCopyImageInfo2-dstImageLayout-00133"></a> <span class="vuid">VUID-VkCopyImageInfo2-dstImageLayout-00133</span><br>

<code>dstImageLayout</code> <strong>must</strong> specify the layout of the image subresources
of <code>dstImage</code> specified in <code>pRegions</code> at the time this command
is executed on a <code>VkDevice</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageInfo2-dstImageLayout-01395" href="#VUID-VkCopyImageInfo2-dstImageLayout-01395"></a> <span class="vuid">VUID-VkCopyImageInfo2-dstImageLayout-01395</span><br>

<code>dstImageLayout</code> <strong>must</strong> be
<code>VK_IMAGE_LAYOUT_TRANSFER_DST_OPTIMAL</code>, or
<code>VK_IMAGE_LAYOUT_GENERAL</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageInfo2-srcImage-01548" href="#VUID-VkCopyImageInfo2-srcImage-01548"></a> <span class="vuid">VUID-VkCopyImageInfo2-srcImage-01548</span><br>

If the <a href="formats.html#VkFormat" class="xref page">VkFormat</a> of each of <code>srcImage</code> and <code>dstImage</code> is
not a <a href="formats.html#formats-requiring-sampler-ycbcr-conversion" class="xref page"><em>multi-planar    format</em></a>, the
<a href="formats.html#VkFormat" class="xref page">VkFormat</a> of each of <code>srcImage</code> and <code>dstImage</code> <strong>must</strong> be
<a href="formats.html#formats-size-compatibility" class="xref page">size-compatible</a></p>
</li>
<li>
<p><a id="VUID-VkCopyImageInfo2-None-01549" href="#VUID-VkCopyImageInfo2-None-01549"></a> <span class="vuid">VUID-VkCopyImageInfo2-None-01549</span><br>

In a copy to or from a plane of a
<a href="formats.html#formats-requiring-sampler-ycbcr-conversion" class="xref page">multi-planar image</a>, the
<a href="formats.html#VkFormat" class="xref page">VkFormat</a> of the image and plane <strong>must</strong> be compatible according to
<a href="formats.html#formats-compatible-planes" class="xref page">the description of compatible planes</a> for
the plane being copied</p>
</li>
<li>
<p><a id="VUID-VkCopyImageInfo2-srcImage-09247" href="#VUID-VkCopyImageInfo2-srcImage-09247"></a> <span class="vuid">VUID-VkCopyImageInfo2-srcImage-09247</span><br>

If the <a href="formats.html#VkFormat" class="xref page">VkFormat</a> of each of <code>srcImage</code> and <code>dstImage</code> is a
<a href="../appendices/compressedtex.html#compressed_image_formats" class="xref page">compressed image format</a>, the formats <strong>must</strong>
have the same texel block extent</p>
</li>
<li>
<p><a id="VUID-VkCopyImageInfo2-srcImage-00136" href="#VUID-VkCopyImageInfo2-srcImage-00136"></a> <span class="vuid">VUID-VkCopyImageInfo2-srcImage-00136</span><br>

The sample count of <code>srcImage</code> and <code>dstImage</code> <strong>must</strong> match</p>
</li>
<li>
<p><a id="VUID-VkCopyImageInfo2-srcOffset-01783" href="#VUID-VkCopyImageInfo2-srcOffset-01783"></a> <span class="vuid">VUID-VkCopyImageInfo2-srcOffset-01783</span><br>

The <code>srcOffset</code> and <code>extent</code> members of each element of
<code>pRegions</code> <strong>must</strong> respect the image transfer granularity requirements
of <code>commandBuffer</code>&#8217;s command pool&#8217;s queue family, as described in
<a href="devsandqueues.html#VkQueueFamilyProperties" class="xref page">VkQueueFamilyProperties</a></p>
</li>
<li>
<p><a id="VUID-VkCopyImageInfo2-dstOffset-01784" href="#VUID-VkCopyImageInfo2-dstOffset-01784"></a> <span class="vuid">VUID-VkCopyImageInfo2-dstOffset-01784</span><br>

The <code>dstOffset</code> and <code>extent</code> members of each element of
<code>pRegions</code> <strong>must</strong> respect the image transfer granularity requirements
of <code>commandBuffer</code>&#8217;s command pool&#8217;s queue family, as described in
<a href="devsandqueues.html#VkQueueFamilyProperties" class="xref page">VkQueueFamilyProperties</a></p>
</li>
<li>
<p><a id="VUID-VkCopyImageInfo2-srcImage-01551" href="#VUID-VkCopyImageInfo2-srcImage-01551"></a> <span class="vuid">VUID-VkCopyImageInfo2-srcImage-01551</span><br>

If neither <code>srcImage</code> nor <code>dstImage</code> has a
<a href="formats.html#formats-requiring-sampler-ycbcr-conversion" class="xref page">multi-planar image    format</a> then for each element of <code>pRegions</code>,
<code>srcSubresource.aspectMask</code> and <code>dstSubresource.aspectMask</code>
<strong>must</strong> match</p>
</li>
<li>
<p><a id="VUID-VkCopyImageInfo2-srcImage-08713" href="#VUID-VkCopyImageInfo2-srcImage-08713"></a> <span class="vuid">VUID-VkCopyImageInfo2-srcImage-08713</span><br>

If <code>srcImage</code> has a <a href="formats.html#formats-requiring-sampler-ycbcr-conversion" class="xref page">    multi-planar image format</a>, then for each element of <code>pRegions</code>,
<code>srcSubresource.aspectMask</code> <strong>must</strong> be a single valid
<a href="formats.html#formats-planes-image-aspect" class="xref page">multi-planar aspect mask</a> bit</p>
</li>
<li>
<p><a id="VUID-VkCopyImageInfo2-dstImage-08714" href="#VUID-VkCopyImageInfo2-dstImage-08714"></a> <span class="vuid">VUID-VkCopyImageInfo2-dstImage-08714</span><br>

If <code>dstImage</code> has a <a href="formats.html#formats-requiring-sampler-ycbcr-conversion" class="xref page">    multi-planar image format</a>, then for each element of <code>pRegions</code>,
<code>dstSubresource.aspectMask</code> <strong>must</strong> be a single valid
<a href="formats.html#formats-planes-image-aspect" class="xref page">multi-planar aspect mask</a> bit</p>
</li>
<li>
<p><a id="VUID-VkCopyImageInfo2-srcImage-01556" href="#VUID-VkCopyImageInfo2-srcImage-01556"></a> <span class="vuid">VUID-VkCopyImageInfo2-srcImage-01556</span><br>

If <code>srcImage</code> has a
<a href="formats.html#formats-requiring-sampler-ycbcr-conversion" class="xref page">multi-planar image format</a>
and the <code>dstImage</code> does not have a multi-planar image format, then
for each element of <code>pRegions</code>, <code>dstSubresource.aspectMask</code>
<strong>must</strong> be <code>VK_IMAGE_ASPECT_COLOR_BIT</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageInfo2-dstImage-01557" href="#VUID-VkCopyImageInfo2-dstImage-01557"></a> <span class="vuid">VUID-VkCopyImageInfo2-dstImage-01557</span><br>

If <code>dstImage</code> has a
<a href="formats.html#formats-requiring-sampler-ycbcr-conversion" class="xref page">multi-planar image format</a>
and the <code>srcImage</code> does not have a multi-planar image format, then
for each element of <code>pRegions</code>, <code>srcSubresource.aspectMask</code>
<strong>must</strong> be <code>VK_IMAGE_ASPECT_COLOR_BIT</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageInfo2-apiVersion-07932" href="#VUID-VkCopyImageInfo2-apiVersion-07932"></a> <span class="vuid">VUID-VkCopyImageInfo2-apiVersion-07932</span><br>

    If
or
    <a href="devsandqueues.html#VkPhysicalDeviceProperties" class="xref page">VkPhysicalDeviceProperties</a>::<code>apiVersion</code> is less than Vulkan
    1.1,
and
    either <code>srcImage</code> or <code>dstImage</code> is of type
    <code>VK_IMAGE_TYPE_3D</code>, then for each element of <code>pRegions</code>,
    <code>srcSubresource.baseArrayLayer</code> and
    <code>dstSubresource.baseArrayLayer</code> <strong>must</strong> both be <code>0</code>, and
    <code>srcSubresource.layerCount</code> and <code>dstSubresource.layerCount</code>
    <strong>must</strong> both be <code>1</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageInfo2-srcImage-04443" href="#VUID-VkCopyImageInfo2-srcImage-04443"></a> <span class="vuid">VUID-VkCopyImageInfo2-srcImage-04443</span><br>

If <code>srcImage</code> is of type <code>VK_IMAGE_TYPE_3D</code>, then for each
element of <code>pRegions</code>, <code>srcSubresource.baseArrayLayer</code> <strong>must</strong> be
<code>0</code> and <code>srcSubresource.layerCount</code> <strong>must</strong> be <code>1</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageInfo2-dstImage-04444" href="#VUID-VkCopyImageInfo2-dstImage-04444"></a> <span class="vuid">VUID-VkCopyImageInfo2-dstImage-04444</span><br>

If <code>dstImage</code> is of type <code>VK_IMAGE_TYPE_3D</code>, then for each
element of <code>pRegions</code>, <code>dstSubresource.baseArrayLayer</code> <strong>must</strong> be
<code>0</code> and <code>dstSubresource.layerCount</code> <strong>must</strong> be <code>1</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageInfo2-aspectMask-00142" href="#VUID-VkCopyImageInfo2-aspectMask-00142"></a> <span class="vuid">VUID-VkCopyImageInfo2-aspectMask-00142</span><br>

For each element of <code>pRegions</code>, <code>srcSubresource.aspectMask</code>
<strong>must</strong> specify aspects present in <code>srcImage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageInfo2-aspectMask-00143" href="#VUID-VkCopyImageInfo2-aspectMask-00143"></a> <span class="vuid">VUID-VkCopyImageInfo2-aspectMask-00143</span><br>

For each element of <code>pRegions</code>, <code>dstSubresource.aspectMask</code>
<strong>must</strong> specify aspects present in <code>dstImage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageInfo2-srcOffset-00144" href="#VUID-VkCopyImageInfo2-srcOffset-00144"></a> <span class="vuid">VUID-VkCopyImageInfo2-srcOffset-00144</span><br>

For each element of <code>pRegions</code>, <code>srcOffset.x</code> and
<span class="eq">(<code>extent.width</code> +  <code>srcOffset.x</code>)</span> <strong>must</strong> both be
greater than or equal to <code>0</code> and less than or equal to the width of the
specified <code>srcSubresource</code> of <code>srcImage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageInfo2-srcOffset-00145" href="#VUID-VkCopyImageInfo2-srcOffset-00145"></a> <span class="vuid">VUID-VkCopyImageInfo2-srcOffset-00145</span><br>

For each element of <code>pRegions</code>, <code>srcOffset.y</code> and
<span class="eq">(<code>extent.height</code> +  <code>srcOffset.y</code>)</span> <strong>must</strong> both be
greater than or equal to <code>0</code> and less than or equal to the height of the
specified <code>srcSubresource</code> of <code>srcImage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageInfo2-srcImage-00146" href="#VUID-VkCopyImageInfo2-srcImage-00146"></a> <span class="vuid">VUID-VkCopyImageInfo2-srcImage-00146</span><br>

If <code>srcImage</code> is of type <code>VK_IMAGE_TYPE_1D</code>, then for each
element of <code>pRegions</code>, <code>srcOffset.y</code> <strong>must</strong> be <code>0</code> and
<code>extent.height</code> <strong>must</strong> be <code>1</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageInfo2-srcOffset-00147" href="#VUID-VkCopyImageInfo2-srcOffset-00147"></a> <span class="vuid">VUID-VkCopyImageInfo2-srcOffset-00147</span><br>

If <code>srcImage</code> is of type <code>VK_IMAGE_TYPE_3D</code>, then for each
element of <code>pRegions</code>, <code>srcOffset.z</code> and
<span class="eq">(<code>extent.depth</code> +  <code>srcOffset.z</code>)</span> <strong>must</strong> both be
greater than or equal to <code>0</code> and less than or equal to the depth of the
specified <code>srcSubresource</code> of <code>srcImage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageInfo2-srcImage-01785" href="#VUID-VkCopyImageInfo2-srcImage-01785"></a> <span class="vuid">VUID-VkCopyImageInfo2-srcImage-01785</span><br>

If <code>srcImage</code> is of type <code>VK_IMAGE_TYPE_1D</code>, then for each
element of <code>pRegions</code>, <code>srcOffset.z</code> <strong>must</strong> be <code>0</code> and
<code>extent.depth</code> <strong>must</strong> be <code>1</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageInfo2-dstImage-01786" href="#VUID-VkCopyImageInfo2-dstImage-01786"></a> <span class="vuid">VUID-VkCopyImageInfo2-dstImage-01786</span><br>

If <code>dstImage</code> is of type <code>VK_IMAGE_TYPE_1D</code>, then for each
element of <code>pRegions</code>, <code>dstOffset.z</code> <strong>must</strong> be <code>0</code> and
<code>extent.depth</code> <strong>must</strong> be <code>1</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageInfo2-srcImage-01787" href="#VUID-VkCopyImageInfo2-srcImage-01787"></a> <span class="vuid">VUID-VkCopyImageInfo2-srcImage-01787</span><br>

If <code>srcImage</code> is of type <code>VK_IMAGE_TYPE_2D</code>, then for each
element of <code>pRegions</code>, <code>srcOffset.z</code> <strong>must</strong> be <code>0</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageInfo2-dstImage-01788" href="#VUID-VkCopyImageInfo2-dstImage-01788"></a> <span class="vuid">VUID-VkCopyImageInfo2-dstImage-01788</span><br>

If <code>dstImage</code> is of type <code>VK_IMAGE_TYPE_2D</code>, then for each
element of <code>pRegions</code>, <code>dstOffset.z</code> <strong>must</strong> be <code>0</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageInfo2-apiVersion-07933" href="#VUID-VkCopyImageInfo2-apiVersion-07933"></a> <span class="vuid">VUID-VkCopyImageInfo2-apiVersion-07933</span><br>

    If
and
    <a href="devsandqueues.html#VkPhysicalDeviceProperties" class="xref page">VkPhysicalDeviceProperties</a>::<code>apiVersion</code> is less than Vulkan
    1.1,
    <code>srcImage</code> and <code>dstImage</code> <strong>must</strong> have the same <a href="resources.html#VkImageType" class="xref page">VkImageType</a></p>
</li>
<li>
<p><a id="VUID-VkCopyImageInfo2-apiVersion-08969" href="#VUID-VkCopyImageInfo2-apiVersion-08969"></a> <span class="vuid">VUID-VkCopyImageInfo2-apiVersion-08969</span><br>

    If
and
    <a href="devsandqueues.html#VkPhysicalDeviceProperties" class="xref page">VkPhysicalDeviceProperties</a>::<code>apiVersion</code> is less than Vulkan
    1.1,
    <code>srcImage</code> or <code>dstImage</code> is of type <code>VK_IMAGE_TYPE_2D</code>, then
    for each element of <code>pRegions</code>, <code>extent.depth</code> <strong>must</strong> be <code>1</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageInfo2-srcImage-07743" href="#VUID-VkCopyImageInfo2-srcImage-07743"></a> <span class="vuid">VUID-VkCopyImageInfo2-srcImage-07743</span><br>

If <code>srcImage</code> and <code>dstImage</code> have a different <a href="resources.html#VkImageType" class="xref page">VkImageType</a>,
one <strong>must</strong> be <code>VK_IMAGE_TYPE_3D</code> and the other <strong>must</strong> be
<code>VK_IMAGE_TYPE_2D</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageInfo2-srcImage-08793" href="#VUID-VkCopyImageInfo2-srcImage-08793"></a> <span class="vuid">VUID-VkCopyImageInfo2-srcImage-08793</span><br>

If <code>srcImage</code> and <code>dstImage</code> have the same <a href="resources.html#VkImageType" class="xref page">VkImageType</a>,
for each element of <code>pRegions</code>,
the <code>layerCount</code> members of <code>srcSubresource</code> or
<code>dstSubresource</code> <strong>must</strong> match</p>
</li>
<li>
<p><a id="VUID-VkCopyImageInfo2-srcImage-01790" href="#VUID-VkCopyImageInfo2-srcImage-01790"></a> <span class="vuid">VUID-VkCopyImageInfo2-srcImage-01790</span><br>

If <code>srcImage</code> and <code>dstImage</code> are both of type
<code>VK_IMAGE_TYPE_2D</code>, then for each element of <code>pRegions</code>,
<code>extent.depth</code> <strong>must</strong> be <code>1</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageInfo2-srcImage-01791" href="#VUID-VkCopyImageInfo2-srcImage-01791"></a> <span class="vuid">VUID-VkCopyImageInfo2-srcImage-01791</span><br>

If <code>srcImage</code> is of type <code>VK_IMAGE_TYPE_2D</code>, and <code>dstImage</code>
is of type <code>VK_IMAGE_TYPE_3D</code>, then for each element of
<code>pRegions</code>, <code>extent.depth</code> <strong>must</strong> equal
<code>srcSubresource.layerCount</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageInfo2-dstImage-01792" href="#VUID-VkCopyImageInfo2-dstImage-01792"></a> <span class="vuid">VUID-VkCopyImageInfo2-dstImage-01792</span><br>

If <code>dstImage</code> is of type <code>VK_IMAGE_TYPE_2D</code>, and <code>srcImage</code>
is of type <code>VK_IMAGE_TYPE_3D</code>, then for each element of
<code>pRegions</code>, <code>extent.depth</code> <strong>must</strong> equal
<code>dstSubresource.layerCount</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageInfo2-dstOffset-00150" href="#VUID-VkCopyImageInfo2-dstOffset-00150"></a> <span class="vuid">VUID-VkCopyImageInfo2-dstOffset-00150</span><br>

For each element of <code>pRegions</code>, <code>dstOffset.x</code> and
<span class="eq">(<code>extent.width</code> +  <code>dstOffset.x</code>)</span> <strong>must</strong> both be
greater than or equal to <code>0</code> and less than or equal to the width of the
specified <code>dstSubresource</code> of <code>dstImage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageInfo2-dstOffset-00151" href="#VUID-VkCopyImageInfo2-dstOffset-00151"></a> <span class="vuid">VUID-VkCopyImageInfo2-dstOffset-00151</span><br>

For each element of <code>pRegions</code>, <code>dstOffset.y</code> and
<span class="eq">(<code>extent.height</code> +  <code>dstOffset.y</code>)</span> <strong>must</strong> both be
greater than or equal to <code>0</code> and less than or equal to the height of the
specified <code>dstSubresource</code> of <code>dstImage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageInfo2-dstImage-00152" href="#VUID-VkCopyImageInfo2-dstImage-00152"></a> <span class="vuid">VUID-VkCopyImageInfo2-dstImage-00152</span><br>

If <code>dstImage</code> is of type <code>VK_IMAGE_TYPE_1D</code>, then for each
element of <code>pRegions</code>, <code>dstOffset.y</code> <strong>must</strong> be <code>0</code> and
<code>extent.height</code> <strong>must</strong> be <code>1</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageInfo2-dstOffset-00153" href="#VUID-VkCopyImageInfo2-dstOffset-00153"></a> <span class="vuid">VUID-VkCopyImageInfo2-dstOffset-00153</span><br>

If <code>dstImage</code> is of type <code>VK_IMAGE_TYPE_3D</code>, then for each
element of <code>pRegions</code>, <code>dstOffset.z</code> and
<span class="eq">(<code>extent.depth</code> +  <code>dstOffset.z</code>)</span> <strong>must</strong> both be
greater than or equal to <code>0</code> and less than or equal to the depth of the
specified <code>dstSubresource</code> of <code>dstImage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageInfo2-pRegions-07278" href="#VUID-VkCopyImageInfo2-pRegions-07278"></a> <span class="vuid">VUID-VkCopyImageInfo2-pRegions-07278</span><br>

For each element of <code>pRegions</code>, <code>srcOffset.x</code> <strong>must</strong> be a
multiple of the <a href="formats.html#formats-compatibility-classes" class="xref page">texel block extent    width</a> of the <a href="formats.html#VkFormat" class="xref page">VkFormat</a> of <code>srcImage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageInfo2-pRegions-07279" href="#VUID-VkCopyImageInfo2-pRegions-07279"></a> <span class="vuid">VUID-VkCopyImageInfo2-pRegions-07279</span><br>

For each element of <code>pRegions</code>, <code>srcOffset.y</code> <strong>must</strong> be a
multiple of the <a href="formats.html#formats-compatibility-classes" class="xref page">texel block extent    height</a> of the <a href="formats.html#VkFormat" class="xref page">VkFormat</a> of <code>srcImage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageInfo2-pRegions-07280" href="#VUID-VkCopyImageInfo2-pRegions-07280"></a> <span class="vuid">VUID-VkCopyImageInfo2-pRegions-07280</span><br>

For each element of <code>pRegions</code>, <code>srcOffset.z</code> <strong>must</strong> be a
multiple of the <a href="formats.html#formats-compatibility-classes" class="xref page">texel block extent    depth</a> of the <a href="formats.html#VkFormat" class="xref page">VkFormat</a> of <code>srcImage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageInfo2-pRegions-07281" href="#VUID-VkCopyImageInfo2-pRegions-07281"></a> <span class="vuid">VUID-VkCopyImageInfo2-pRegions-07281</span><br>

For each element of <code>pRegions</code>, <code>dstOffset.x</code> <strong>must</strong> be a
multiple of the <a href="formats.html#formats-compatibility-classes" class="xref page">texel block extent    width</a> of the <a href="formats.html#VkFormat" class="xref page">VkFormat</a> of <code>dstImage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageInfo2-pRegions-07282" href="#VUID-VkCopyImageInfo2-pRegions-07282"></a> <span class="vuid">VUID-VkCopyImageInfo2-pRegions-07282</span><br>

For each element of <code>pRegions</code>, <code>dstOffset.y</code> <strong>must</strong> be a
multiple of the <a href="formats.html#formats-compatibility-classes" class="xref page">texel block extent    height</a> of the <a href="formats.html#VkFormat" class="xref page">VkFormat</a> of <code>dstImage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageInfo2-pRegions-07283" href="#VUID-VkCopyImageInfo2-pRegions-07283"></a> <span class="vuid">VUID-VkCopyImageInfo2-pRegions-07283</span><br>

For each element of <code>pRegions</code>, <code>dstOffset.z</code> <strong>must</strong> be a
multiple of the <a href="formats.html#formats-compatibility-classes" class="xref page">texel block extent    depth</a> of the <a href="formats.html#VkFormat" class="xref page">VkFormat</a> of <code>dstImage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageInfo2-srcImage-01728" href="#VUID-VkCopyImageInfo2-srcImage-01728"></a> <span class="vuid">VUID-VkCopyImageInfo2-srcImage-01728</span><br>

For each element of <code>pRegions</code>, if the sum of <code>srcOffset.x</code> and
<code>extent.width</code> does not equal the width of the subresource specified
by <code>srcSubresource</code>, <code>extent.width</code> <strong>must</strong> be a multiple of the
<a href="formats.html#formats-compatibility-classes" class="xref page">texel block extent width</a> of the
<a href="formats.html#VkFormat" class="xref page">VkFormat</a> of <code>srcImage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageInfo2-srcImage-01729" href="#VUID-VkCopyImageInfo2-srcImage-01729"></a> <span class="vuid">VUID-VkCopyImageInfo2-srcImage-01729</span><br>

For each element of <code>pRegions</code>, if the sum of <code>srcOffset.y</code> and
<code>extent.height</code> does not equal the height of the subresource
specified by <code>srcSubresource</code>, <code>extent.height</code> <strong>must</strong> be a
multiple of the <a href="formats.html#formats-compatibility-classes" class="xref page">texel block extent    height</a> of the <a href="formats.html#VkFormat" class="xref page">VkFormat</a> of <code>srcImage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageInfo2-srcImage-01730" href="#VUID-VkCopyImageInfo2-srcImage-01730"></a> <span class="vuid">VUID-VkCopyImageInfo2-srcImage-01730</span><br>

For each element of <code>pRegions</code>, if the sum of <code>srcOffset.z</code> and
<code>extent.depth</code> does not equal the depth of the subresource specified
by <code>srcSubresource</code>, <code>extent.depth</code> <strong>must</strong> be a multiple of the
<a href="formats.html#formats-compatibility-classes" class="xref page">texel block extent depth</a> of the
<a href="formats.html#VkFormat" class="xref page">VkFormat</a> of <code>srcImage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageInfo2-dstImage-01732" href="#VUID-VkCopyImageInfo2-dstImage-01732"></a> <span class="vuid">VUID-VkCopyImageInfo2-dstImage-01732</span><br>

For each element of <code>pRegions</code>, if the sum of <code>dstOffset.x</code> and
<code>extent.width</code> does not equal the width of the subresource specified
by <code>dstSubresource</code>, <code>extent.width</code> <strong>must</strong> be a multiple of the
<a href="formats.html#formats-compatibility-classes" class="xref page">texel block extent width</a> of the
<a href="formats.html#VkFormat" class="xref page">VkFormat</a> of <code>dstImage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageInfo2-dstImage-01733" href="#VUID-VkCopyImageInfo2-dstImage-01733"></a> <span class="vuid">VUID-VkCopyImageInfo2-dstImage-01733</span><br>

For each element of <code>pRegions</code>, if the sum of <code>dstOffset.y</code> and
<code>extent.height</code> does not equal the height of the subresource
specified by <code>dstSubresource</code>, <code>extent.height</code> <strong>must</strong> be a
multiple of the <a href="formats.html#formats-compatibility-classes" class="xref page">texel block extent    height</a> of the <a href="formats.html#VkFormat" class="xref page">VkFormat</a> of <code>dstImage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageInfo2-dstImage-01734" href="#VUID-VkCopyImageInfo2-dstImage-01734"></a> <span class="vuid">VUID-VkCopyImageInfo2-dstImage-01734</span><br>

For each element of <code>pRegions</code>, if the sum of <code>dstOffset.z</code> and
<code>extent.depth</code> does not equal the depth of the subresource specified
by <code>dstSubresource</code>, <code>extent.depth</code> <strong>must</strong> be a multiple of the
<a href="formats.html#formats-compatibility-classes" class="xref page">texel block extent depth</a> of the
<a href="formats.html#VkFormat" class="xref page">VkFormat</a> of <code>dstImage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageInfo2-aspect-06662" href="#VUID-VkCopyImageInfo2-aspect-06662"></a> <span class="vuid">VUID-VkCopyImageInfo2-aspect-06662</span><br>

If the <code>aspect</code> member of any element of <code>pRegions</code> includes any
flag other than <code>VK_IMAGE_ASPECT_STENCIL_BIT</code> or <code>srcImage</code> was
not created with <a href="resources.html#VkImageStencilUsageCreateInfo" class="xref page">separate stencil    usage</a>,
<code>VK_IMAGE_USAGE_TRANSFER_SRC_BIT</code> <strong>must</strong> have been included in the
<a href="resources.html#VkImageCreateInfo" class="xref page">VkImageCreateInfo</a>::<code>usage</code> used to create <code>srcImage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageInfo2-aspect-06663" href="#VUID-VkCopyImageInfo2-aspect-06663"></a> <span class="vuid">VUID-VkCopyImageInfo2-aspect-06663</span><br>

If the <code>aspect</code> member of any element of <code>pRegions</code> includes any
flag other than <code>VK_IMAGE_ASPECT_STENCIL_BIT</code> or <code>dstImage</code> was
not created with <a href="resources.html#VkImageStencilUsageCreateInfo" class="xref page">separate stencil    usage</a>,
<code>VK_IMAGE_USAGE_TRANSFER_DST_BIT</code> <strong>must</strong> have been included in the
<a href="resources.html#VkImageCreateInfo" class="xref page">VkImageCreateInfo</a>::<code>usage</code> used to create <code>dstImage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageInfo2-aspect-06664" href="#VUID-VkCopyImageInfo2-aspect-06664"></a> <span class="vuid">VUID-VkCopyImageInfo2-aspect-06664</span><br>

If the <code>aspect</code> member of any element of <code>pRegions</code> includes
<code>VK_IMAGE_ASPECT_STENCIL_BIT</code>, and <code>srcImage</code> was created with
<a href="resources.html#VkImageStencilUsageCreateInfo" class="xref page">separate stencil usage</a>,
<code>VK_IMAGE_USAGE_TRANSFER_SRC_BIT</code> <strong>must</strong> have been included in the
<a href="resources.html#VkImageStencilUsageCreateInfo" class="xref page">VkImageStencilUsageCreateInfo</a>::<code>stencilUsage</code> used to create
<code>srcImage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageInfo2-aspect-06665" href="#VUID-VkCopyImageInfo2-aspect-06665"></a> <span class="vuid">VUID-VkCopyImageInfo2-aspect-06665</span><br>

If the <code>aspect</code> member of any element of <code>pRegions</code> includes
<code>VK_IMAGE_ASPECT_STENCIL_BIT</code>, and <code>dstImage</code> was created with
<a href="resources.html#VkImageStencilUsageCreateInfo" class="xref page">separate stencil usage</a>,
<code>VK_IMAGE_USAGE_TRANSFER_DST_BIT</code> <strong>must</strong> have been included in the
<a href="resources.html#VkImageStencilUsageCreateInfo" class="xref page">VkImageStencilUsageCreateInfo</a>::<code>stencilUsage</code> used to create
<code>dstImage</code></p>
</li>
</ul>
</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkCopyImageInfo2-srcImage-07966" href="#VUID-VkCopyImageInfo2-srcImage-07966"></a> <span class="vuid">VUID-VkCopyImageInfo2-srcImage-07966</span><br>

If <code>srcImage</code> is non-sparse then the image
or the specified <em>disjoint</em> plane
<strong>must</strong> be bound completely and contiguously to a single
<code>VkDeviceMemory</code> object</p>
</li>
<li>
<p><a id="VUID-VkCopyImageInfo2-srcSubresource-07967" href="#VUID-VkCopyImageInfo2-srcSubresource-07967"></a> <span class="vuid">VUID-VkCopyImageInfo2-srcSubresource-07967</span><br>

The <code>srcSubresource.mipLevel</code> member of each element of
<code>pRegions</code> <strong>must</strong> be less than the <code>mipLevels</code> specified in
<a href="resources.html#VkImageCreateInfo" class="xref page">VkImageCreateInfo</a> when <code>srcImage</code> was created</p>
</li>
<li>
<p><a id="VUID-VkCopyImageInfo2-srcSubresource-07968" href="#VUID-VkCopyImageInfo2-srcSubresource-07968"></a> <span class="vuid">VUID-VkCopyImageInfo2-srcSubresource-07968</span><br>

<span class="eq"><code>srcSubresource.baseArrayLayer</code> + 
<code>srcSubresource.layerCount</code></span> of each element of <code>pRegions</code>
<strong>must</strong> be less than or equal to the <code>arrayLayers</code> specified in
<a href="resources.html#VkImageCreateInfo" class="xref page">VkImageCreateInfo</a> when <code>srcImage</code> was created</p>
</li>
</ul>
</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkCopyImageInfo2-dstImage-07966" href="#VUID-VkCopyImageInfo2-dstImage-07966"></a> <span class="vuid">VUID-VkCopyImageInfo2-dstImage-07966</span><br>

If <code>dstImage</code> is non-sparse then the image
or the specified <em>disjoint</em> plane
<strong>must</strong> be bound completely and contiguously to a single
<code>VkDeviceMemory</code> object</p>
</li>
<li>
<p><a id="VUID-VkCopyImageInfo2-dstSubresource-07967" href="#VUID-VkCopyImageInfo2-dstSubresource-07967"></a> <span class="vuid">VUID-VkCopyImageInfo2-dstSubresource-07967</span><br>

The <code>dstSubresource.mipLevel</code> member of each element of
<code>pRegions</code> <strong>must</strong> be less than the <code>mipLevels</code> specified in
<a href="resources.html#VkImageCreateInfo" class="xref page">VkImageCreateInfo</a> when <code>dstImage</code> was created</p>
</li>
<li>
<p><a id="VUID-VkCopyImageInfo2-dstSubresource-07968" href="#VUID-VkCopyImageInfo2-dstSubresource-07968"></a> <span class="vuid">VUID-VkCopyImageInfo2-dstSubresource-07968</span><br>

<span class="eq"><code>dstSubresource.baseArrayLayer</code> + 
<code>dstSubresource.layerCount</code></span> of each element of <code>pRegions</code>
<strong>must</strong> be less than or equal to the <code>arrayLayers</code> specified in
<a href="resources.html#VkImageCreateInfo" class="xref page">VkImageCreateInfo</a> when <code>dstImage</code> was created</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkCopyImageInfo2-sType-sType" href="#VUID-VkCopyImageInfo2-sType-sType"></a> <span class="vuid">VUID-VkCopyImageInfo2-sType-sType</span><br>
 <code>sType</code> <strong>must</strong> be <code>VK_STRUCTURE_TYPE_COPY_IMAGE_INFO_2</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageInfo2-pNext-pNext" href="#VUID-VkCopyImageInfo2-pNext-pNext"></a> <span class="vuid">VUID-VkCopyImageInfo2-pNext-pNext</span><br>
 <code>pNext</code> <strong>must</strong> be <code>NULL</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageInfo2-srcImage-parameter" href="#VUID-VkCopyImageInfo2-srcImage-parameter"></a> <span class="vuid">VUID-VkCopyImageInfo2-srcImage-parameter</span><br>
 <code>srcImage</code> <strong>must</strong> be a valid <a href="resources.html#VkImage" class="xref page">VkImage</a> handle</p>
</li>
<li>
<p><a id="VUID-VkCopyImageInfo2-srcImageLayout-parameter" href="#VUID-VkCopyImageInfo2-srcImageLayout-parameter"></a> <span class="vuid">VUID-VkCopyImageInfo2-srcImageLayout-parameter</span><br>
 <code>srcImageLayout</code> <strong>must</strong> be a valid <a href="resources.html#VkImageLayout" class="xref page">VkImageLayout</a> value</p>
</li>
<li>
<p><a id="VUID-VkCopyImageInfo2-dstImage-parameter" href="#VUID-VkCopyImageInfo2-dstImage-parameter"></a> <span class="vuid">VUID-VkCopyImageInfo2-dstImage-parameter</span><br>
 <code>dstImage</code> <strong>must</strong> be a valid <a href="resources.html#VkImage" class="xref page">VkImage</a> handle</p>
</li>
<li>
<p><a id="VUID-VkCopyImageInfo2-dstImageLayout-parameter" href="#VUID-VkCopyImageInfo2-dstImageLayout-parameter"></a> <span class="vuid">VUID-VkCopyImageInfo2-dstImageLayout-parameter</span><br>
 <code>dstImageLayout</code> <strong>must</strong> be a valid <a href="resources.html#VkImageLayout" class="xref page">VkImageLayout</a> value</p>
</li>
<li>
<p><a id="VUID-VkCopyImageInfo2-pRegions-parameter" href="#VUID-VkCopyImageInfo2-pRegions-parameter"></a> <span class="vuid">VUID-VkCopyImageInfo2-pRegions-parameter</span><br>
 <code>pRegions</code> <strong>must</strong> be a valid pointer to an array of <code>regionCount</code> valid <a href="#VkImageCopy2">VkImageCopy2</a> structures</p>
</li>
<li>
<p><a id="VUID-VkCopyImageInfo2-regionCount-arraylength" href="#VUID-VkCopyImageInfo2-regionCount-arraylength"></a> <span class="vuid">VUID-VkCopyImageInfo2-regionCount-arraylength</span><br>
 <code>regionCount</code> <strong>must</strong> be greater than <code>0</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageInfo2-commonparent" href="#VUID-VkCopyImageInfo2-commonparent"></a> <span class="vuid">VUID-VkCopyImageInfo2-commonparent</span><br>
 Both of <code>dstImage</code>, and <code>srcImage</code> <strong>must</strong> have been created, allocated, or retrieved from the same <a href="devsandqueues.html#VkDevice" class="xref page">VkDevice</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>VkImageCopy2</code> structure is defined as:</p>
</div>
<div id="VkImageCopy2" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_VERSION_1_3
typedef struct VkImageCopy2 {
    VkStructureType             sType;
    const void*                 pNext;
    VkImageSubresourceLayers    srcSubresource;
    VkOffset3D                  srcOffset;
    VkImageSubresourceLayers    dstSubresource;
    VkOffset3D                  dstOffset;
    VkExtent3D                  extent;
} VkImageCopy2;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is a <a href="fundamentals.html#VkStructureType" class="xref page">VkStructureType</a> value identifying this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>srcSubresource</code> and <code>dstSubresource</code> are
<a href="#VkImageSubresourceLayers">VkImageSubresourceLayers</a> structures specifying the image
subresources of the images used for the source and destination image
data, respectively.</p>
</li>
<li>
<p><code>srcOffset</code> and <code>dstOffset</code> select the initial <code>x</code>, <code>y</code>,
and <code>z</code> offsets in texels of the sub-regions of the source and
destination image data.</p>
</li>
<li>
<p><code>extent</code> is the size in texels of the image to copy in <code>width</code>,
<code>height</code> and <code>depth</code>.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkImageCopy2-apiVersion-07940" href="#VUID-VkImageCopy2-apiVersion-07940"></a> <span class="vuid">VUID-VkImageCopy2-apiVersion-07940</span><br>

If
and
    <a href="devsandqueues.html#VkPhysicalDeviceProperties" class="xref page">VkPhysicalDeviceProperties</a>::<code>apiVersion</code> is less than Vulkan
    1.1,
the
    <code>aspectMask</code> member of <code>srcSubresource</code> and <code>dstSubresource</code>
    <strong>must</strong> match</p>
</li>
<li>
<p><a id="VUID-VkImageCopy2-apiVersion-07941" href="#VUID-VkImageCopy2-apiVersion-07941"></a> <span class="vuid">VUID-VkImageCopy2-apiVersion-07941</span><br>

If
and
    <a href="devsandqueues.html#VkPhysicalDeviceProperties" class="xref page">VkPhysicalDeviceProperties</a>::<code>apiVersion</code> is less than Vulkan
    1.1,
the
    <code>layerCount</code> member of <code>srcSubresource</code> and <code>dstSubresource</code>
    <strong>must</strong> match</p>
</li>
<li>
<p><a id="VUID-VkImageCopy2-extent-06668" href="#VUID-VkImageCopy2-extent-06668"></a> <span class="vuid">VUID-VkImageCopy2-extent-06668</span><br>

<code>extent.width</code> <strong>must</strong> not be 0</p>
</li>
<li>
<p><a id="VUID-VkImageCopy2-extent-06669" href="#VUID-VkImageCopy2-extent-06669"></a> <span class="vuid">VUID-VkImageCopy2-extent-06669</span><br>

<code>extent.height</code> <strong>must</strong> not be 0</p>
</li>
<li>
<p><a id="VUID-VkImageCopy2-extent-06670" href="#VUID-VkImageCopy2-extent-06670"></a> <span class="vuid">VUID-VkImageCopy2-extent-06670</span><br>

<code>extent.depth</code> <strong>must</strong> not be 0</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkImageCopy2-sType-sType" href="#VUID-VkImageCopy2-sType-sType"></a> <span class="vuid">VUID-VkImageCopy2-sType-sType</span><br>
 <code>sType</code> <strong>must</strong> be <code>VK_STRUCTURE_TYPE_IMAGE_COPY_2</code></p>
</li>
<li>
<p><a id="VUID-VkImageCopy2-pNext-pNext" href="#VUID-VkImageCopy2-pNext-pNext"></a> <span class="vuid">VUID-VkImageCopy2-pNext-pNext</span><br>
 <code>pNext</code> <strong>must</strong> be <code>NULL</code></p>
</li>
<li>
<p><a id="VUID-VkImageCopy2-srcSubresource-parameter" href="#VUID-VkImageCopy2-srcSubresource-parameter"></a> <span class="vuid">VUID-VkImageCopy2-srcSubresource-parameter</span><br>
 <code>srcSubresource</code> <strong>must</strong> be a valid <a href="#VkImageSubresourceLayers">VkImageSubresourceLayers</a> structure</p>
</li>
<li>
<p><a id="VUID-VkImageCopy2-dstSubresource-parameter" href="#VUID-VkImageCopy2-dstSubresource-parameter"></a> <span class="vuid">VUID-VkImageCopy2-dstSubresource-parameter</span><br>
 <code>dstSubresource</code> <strong>must</strong> be a valid <a href="#VkImageSubresourceLayers">VkImageSubresourceLayers</a> structure</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="copies-buffers-images"><a class="anchor" href="#copies-buffers-images"></a>Copying Data Between Buffers and Images</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Data <strong>can</strong> be copied between buffers and images, enabling applications to
load and store data between images and application-defined offsets in buffer
memory.</p>
</div>
<div id="copies-buffers-images-addressing" class="paragraph">
<p>When copying between a buffer and an image, texels in the image and bytes in
the buffer are accessed as follows.</p>
</div>
<div class="paragraph">
<p>Texels at each coordinate <span class="eq">(x,y,z,layer)</span> in the image subresource are
accessed, where:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"></dt>
<dd>
<p><span class="eq">x</span> is in the range <span class="eq">[<code>imageOffset.x</code>,
<code>imageOffset.x</code> +  <code>imageExtent.width</code>)</span>,</p>
</dd>
<dt class="hdlist1"></dt>
<dd>
<p><span class="eq">y</span> is in the range <span class="eq">[<code>imageOffset.y</code>,
<code>imageOffset.y</code> +  <code>imageExtent.height</code>)</span>,</p>
</dd>
<dt class="hdlist1"></dt>
<dd>
<p><span class="eq">z</span> is in the range <span class="eq">[<code>imageOffset.z</code>,
<code>imageOffset.z</code> +  <code>imageExtent.depth</code>)</span>,</p>
</dd>
<dt class="hdlist1"></dt>
<dd>
<p><span class="eq">layer</span> is in the range
[eq]#[<code>imageSubresource.baseArrayLayer</code>,
<code>imageSubresource.baseArrayLayer</code> + 
<code>imageSubresource.layerCount</code>)</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>For each <span class="eq">(x,y,z,layer)</span> coordinate in the image, bytes in the buffer
are accessed at offsets in the range <span class="eq">[texelOffset, texelOffset + 
blockSize)</span>, where:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"></dt>
<dd>
<p><span class="eq">texelOffset = <code>bufferOffset</code> +  (⌊(x -
imageOffset.x) / blockWidth⌋ × blockSize) + 
(⌊(y - imageOffset.y) / blockHeight⌋ ×
rowExtent) +  (⌊(z - imageOffset.z) /
blockDepth⌋ × sliceExtent) +  ((layer -
<code>imageSubresource.baseArrayLayer</code>) × layerExtent)</span></p>
</dd>
<dt class="hdlist1"></dt>
<dd>
<p><span class="eq">rowExtent = ⌈ max(<code>bufferRowLength</code>,
<code>imageExtent.width</code>) / blockWidth ⌉ × blockSize</span></p>
</dd>
<dt class="hdlist1"></dt>
<dd>
<p><span class="eq">sliceExtent = ⌈ max(<code>bufferImageHeight</code>,
<code>imageExtent.height</code>) / blockHeight ⌉ ×
rowExtent</span></p>
</dd>
<dt class="hdlist1"></dt>
<dd>
<p><span class="eq">layerExtent = ⌈ <code>imageExtent.depth</code> / blockDepth
⌉ × sliceExtent</span></p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>and where <span class="eq">blockSize</span>, <span class="eq">blockWidth</span>, <span class="eq">blockHeight</span>, and
<span class="eq">blockDepth</span> are the <a href="formats.html#formats-compatibility-classes" class="xref page">texel block size and extents</a> of the image&#8217;s format.</p>
</div>
<div id="copies-buffers-images-depth-stencil" class="paragraph">
<p>When copying between a buffer and the depth or stencil aspect of an image,
data in the buffer is assumed to be laid out as separate planes rather than
interleaved.
Addressing calculations are thus performed for a different format than the
base image, according to the aspect, as described in the following table:</p>
</div>
<table class="tableblock frame-all grid-all" style="width: 95%;">
<caption class="title">Table 1. Depth/Stencil Aspect Copy Table</caption>
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-center valign-top">Base Format</th>
<th class="tableblock halign-center valign-top">Depth Aspect Format</th>
<th class="tableblock halign-center valign-top">Stencil Aspect Format</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>VK_FORMAT_D16_UNORM</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>VK_FORMAT_D16_UNORM</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">-</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>VK_FORMAT_X8_D24_UNORM_PACK32</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>VK_FORMAT_X8_D24_UNORM_PACK32</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">-</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>VK_FORMAT_D32_SFLOAT</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>VK_FORMAT_D32_SFLOAT</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">-</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>VK_FORMAT_S8_UINT</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>VK_FORMAT_S8_UINT</code></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>VK_FORMAT_D16_UNORM_S8_UINT</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>VK_FORMAT_D16_UNORM</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>VK_FORMAT_S8_UINT</code></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>VK_FORMAT_D24_UNORM_S8_UINT</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>VK_FORMAT_X8_D24_UNORM_PACK32</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>VK_FORMAT_S8_UINT</code></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>VK_FORMAT_D32_SFLOAT_S8_UINT</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>VK_FORMAT_D32_SFLOAT</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>VK_FORMAT_S8_UINT</code></p></td>
</tr>
</tbody>
</table>
<div id="copies-buffers-images-multi-planar" class="paragraph">
<p>When copying between a buffer and any plane of a
<a href="formats.html#formats-requiring-sampler-ycbcr-conversion" class="xref page">multi-planar image</a>,
addressing calculations are performed using the <a href="formats.html#formats-compatible-planes" class="xref page">compatible format for that plane</a>, rather than the format of the
multi-planar image.</p>
</div>
<div class="paragraph">
<p>Each texel block is copied from one resource to the other according to the
above addressing equations.</p>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>To copy data from a buffer object to an image object, call:</p>
</div>
<div id="vkCmdCopyBufferToImage" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_VERSION_1_0
void vkCmdCopyBufferToImage(
    VkCommandBuffer                             commandBuffer,
    VkBuffer                                    srcBuffer,
    VkImage                                     dstImage,
    VkImageLayout                               dstImageLayout,
    uint32_t                                    regionCount,
    const VkBufferImageCopy*                    pRegions);</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>commandBuffer</code> is the command buffer into which the command will be
recorded.</p>
</li>
<li>
<p><code>srcBuffer</code> is the source buffer.</p>
</li>
<li>
<p><code>dstImage</code> is the destination image.</p>
</li>
<li>
<p><code>dstImageLayout</code> is the layout of the destination image subresources
for the copy.</p>
</li>
<li>
<p><code>regionCount</code> is the number of regions to copy.</p>
</li>
<li>
<p><code>pRegions</code> is a pointer to an array of <a href="#VkBufferImageCopy">VkBufferImageCopy</a>
structures specifying the regions to copy.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Each source region specified by <code>pRegions</code> is copied from the source
buffer to the destination region of the destination image according to the
<a href="#copies-buffers-images-addressing">addressing calculations</a> for each
resource.
If any of the specified regions in <code>srcBuffer</code> overlaps in memory with
any of the specified regions in <code>dstImage</code>, values read from those
overlapping regions are <strong>undefined</strong>.
If any region accesses a depth aspect in <code>dstImage</code>
values copied from <code>srcBuffer</code> outside of the range <span class="eq">[0,1]</span> will be
written as <strong>undefined</strong> values to the destination image.</p>
</div>
<div class="paragraph">
<p>Copy regions for the image <strong>must</strong> be aligned to a multiple of the texel block
extent in each dimension, except at the edges of the image, where region
extents <strong>must</strong> match the edge of the image.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCmdCopyBufferToImage-dstImage-07966" href="#VUID-vkCmdCopyBufferToImage-dstImage-07966"></a> <span class="vuid">VUID-vkCmdCopyBufferToImage-dstImage-07966</span><br>

If <code>dstImage</code> is non-sparse then the image
or the specified <em>disjoint</em> plane
<strong>must</strong> be bound completely and contiguously to a single
<code>VkDeviceMemory</code> object</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyBufferToImage-imageSubresource-07967" href="#VUID-vkCmdCopyBufferToImage-imageSubresource-07967"></a> <span class="vuid">VUID-vkCmdCopyBufferToImage-imageSubresource-07967</span><br>

The <code>imageSubresource.mipLevel</code> member of each element of
<code>pRegions</code> <strong>must</strong> be less than the <code>mipLevels</code> specified in
<a href="resources.html#VkImageCreateInfo" class="xref page">VkImageCreateInfo</a> when <code>dstImage</code> was created</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyBufferToImage-imageSubresource-07968" href="#VUID-vkCmdCopyBufferToImage-imageSubresource-07968"></a> <span class="vuid">VUID-vkCmdCopyBufferToImage-imageSubresource-07968</span><br>

<span class="eq"><code>imageSubresource.baseArrayLayer</code> + 
<code>imageSubresource.layerCount</code></span> of each element of <code>pRegions</code>
<strong>must</strong> be less than or equal to the <code>arrayLayers</code> specified in
<a href="resources.html#VkImageCreateInfo" class="xref page">VkImageCreateInfo</a> when <code>dstImage</code> was created</p>
</li>
</ul>
</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCmdCopyBufferToImage-imageSubresource-07970" href="#VUID-vkCmdCopyBufferToImage-imageSubresource-07970"></a> <span class="vuid">VUID-vkCmdCopyBufferToImage-imageSubresource-07970</span><br>

The image region specified by each element of <code>pRegions</code> <strong>must</strong> be
contained within the specified <code>imageSubresource</code> of
<code>dstImage</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyBufferToImage-imageSubresource-07971" href="#VUID-vkCmdCopyBufferToImage-imageSubresource-07971"></a> <span class="vuid">VUID-vkCmdCopyBufferToImage-imageSubresource-07971</span><br>

For each element of <code>pRegions</code>, <code>imageOffset.x</code> and
<span class="eq">(<code>imageExtent.width</code> +  <code>imageOffset.x</code>)</span> <strong>must</strong>
both be greater than or equal to <code>0</code> and less than or equal to the width
of the specified <code>imageSubresource</code> of <code>dstImage</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyBufferToImage-imageSubresource-07972" href="#VUID-vkCmdCopyBufferToImage-imageSubresource-07972"></a> <span class="vuid">VUID-vkCmdCopyBufferToImage-imageSubresource-07972</span><br>

For each element of <code>pRegions</code>, <code>imageOffset.y</code> and
<span class="eq">(<code>imageExtent.height</code> +  <code>imageOffset.y</code>)</span> <strong>must</strong>
both be greater than or equal to <code>0</code> and less than or equal to the
height of the specified <code>imageSubresource</code> of <code>dstImage</code></p>
</li>
</ul>
</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCmdCopyBufferToImage-dstImage-07973" href="#VUID-vkCmdCopyBufferToImage-dstImage-07973"></a> <span class="vuid">VUID-vkCmdCopyBufferToImage-dstImage-07973</span><br>

<code>dstImage</code> <strong>must</strong> have a sample count equal to
<code>VK_SAMPLE_COUNT_1_BIT</code></p>
</li>
</ul>
</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCmdCopyBufferToImage-commandBuffer-01828" href="#VUID-vkCmdCopyBufferToImage-commandBuffer-01828"></a> <span class="vuid">VUID-vkCmdCopyBufferToImage-commandBuffer-01828</span><br>

If <code>commandBuffer</code> is an unprotected command buffer and
<a href="devsandqueues.html#limits-protectedNoFault" class="xref page"><code>protectedNoFault</code></a> is not supported,
<code>srcBuffer</code> <strong>must</strong> not be a protected buffer</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyBufferToImage-commandBuffer-01829" href="#VUID-vkCmdCopyBufferToImage-commandBuffer-01829"></a> <span class="vuid">VUID-vkCmdCopyBufferToImage-commandBuffer-01829</span><br>

If <code>commandBuffer</code> is an unprotected command buffer and
<a href="devsandqueues.html#limits-protectedNoFault" class="xref page"><code>protectedNoFault</code></a> is not supported,
<code>dstImage</code> <strong>must</strong> not be a protected image</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyBufferToImage-commandBuffer-01830" href="#VUID-vkCmdCopyBufferToImage-commandBuffer-01830"></a> <span class="vuid">VUID-vkCmdCopyBufferToImage-commandBuffer-01830</span><br>

If <code>commandBuffer</code> is a protected command buffer and
<a href="devsandqueues.html#limits-protectedNoFault" class="xref page"><code>protectedNoFault</code></a> is not supported,
<code>dstImage</code> <strong>must</strong> not be an unprotected image</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyBufferToImage-commandBuffer-07737" href="#VUID-vkCmdCopyBufferToImage-commandBuffer-07737"></a> <span class="vuid">VUID-vkCmdCopyBufferToImage-commandBuffer-07737</span><br>

If the queue family used to create the <a href="cmdbuffers.html#VkCommandPool" class="xref page">VkCommandPool</a> which
<code>commandBuffer</code> was allocated from does not support
<code>VK_QUEUE_GRAPHICS_BIT</code> or <code>VK_QUEUE_COMPUTE_BIT</code>, the
<code>bufferOffset</code> member of any element of <code>pRegions</code> <strong>must</strong> be a
multiple of <code>4</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyBufferToImage-imageOffset-07738" href="#VUID-vkCmdCopyBufferToImage-imageOffset-07738"></a> <span class="vuid">VUID-vkCmdCopyBufferToImage-imageOffset-07738</span><br>

The <code>imageOffset</code> and <code>imageExtent</code> members of each element of
<code>pRegions</code> <strong>must</strong> respect the image transfer granularity requirements
of <code>commandBuffer</code>&#8217;s command pool&#8217;s queue family, as described in
<a href="devsandqueues.html#VkQueueFamilyProperties" class="xref page">VkQueueFamilyProperties</a></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyBufferToImage-commandBuffer-07739" href="#VUID-vkCmdCopyBufferToImage-commandBuffer-07739"></a> <span class="vuid">VUID-vkCmdCopyBufferToImage-commandBuffer-07739</span><br>

If the queue family used to create the <a href="cmdbuffers.html#VkCommandPool" class="xref page">VkCommandPool</a> which
<code>commandBuffer</code> was allocated from does not support
<code>VK_QUEUE_GRAPHICS_BIT</code>, for each element of <code>pRegions</code>, the
<code>aspectMask</code> member of <code>imageSubresource</code> <strong>must</strong> not be
<code>VK_IMAGE_ASPECT_DEPTH_BIT</code> or <code>VK_IMAGE_ASPECT_STENCIL_BIT</code></p>
</li>
</ul>
</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCmdCopyBufferToImage-pRegions-00171" href="#VUID-vkCmdCopyBufferToImage-pRegions-00171"></a> <span class="vuid">VUID-vkCmdCopyBufferToImage-pRegions-00171</span><br>

<code>srcBuffer</code> <strong>must</strong> be large enough to contain all buffer locations
that are accessed according to <a href="#copies-buffers-images-addressing">Buffer    and Image Addressing</a>, for each element of <code>pRegions</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyBufferToImage-pRegions-00173" href="#VUID-vkCmdCopyBufferToImage-pRegions-00173"></a> <span class="vuid">VUID-vkCmdCopyBufferToImage-pRegions-00173</span><br>

The union of all source regions, and the union of all destination
regions, specified by the elements of <code>pRegions</code>, <strong>must</strong> not overlap
in memory</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyBufferToImage-srcBuffer-00174" href="#VUID-vkCmdCopyBufferToImage-srcBuffer-00174"></a> <span class="vuid">VUID-vkCmdCopyBufferToImage-srcBuffer-00174</span><br>

<code>srcBuffer</code> <strong>must</strong> have been created with
<code>VK_BUFFER_USAGE_TRANSFER_SRC_BIT</code> usage flag</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyBufferToImage-dstImage-01997" href="#VUID-vkCmdCopyBufferToImage-dstImage-01997"></a> <span class="vuid">VUID-vkCmdCopyBufferToImage-dstImage-01997</span><br>

The <a href="resources.html#resources-image-format-features" class="xref page">format features</a> of
<code>dstImage</code> <strong>must</strong> contain <code>VK_FORMAT_FEATURE_TRANSFER_DST_BIT</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyBufferToImage-srcBuffer-00176" href="#VUID-vkCmdCopyBufferToImage-srcBuffer-00176"></a> <span class="vuid">VUID-vkCmdCopyBufferToImage-srcBuffer-00176</span><br>

If <code>srcBuffer</code> is non-sparse then it <strong>must</strong> be bound completely and
contiguously to a single <code>VkDeviceMemory</code> object</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyBufferToImage-dstImage-00177" href="#VUID-vkCmdCopyBufferToImage-dstImage-00177"></a> <span class="vuid">VUID-vkCmdCopyBufferToImage-dstImage-00177</span><br>

<code>dstImage</code> <strong>must</strong> have been created with
<code>VK_IMAGE_USAGE_TRANSFER_DST_BIT</code> usage flag</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyBufferToImage-dstImageLayout-00180" href="#VUID-vkCmdCopyBufferToImage-dstImageLayout-00180"></a> <span class="vuid">VUID-vkCmdCopyBufferToImage-dstImageLayout-00180</span><br>

<code>dstImageLayout</code> <strong>must</strong> specify the layout of the image subresources
of <code>dstImage</code> specified in <code>pRegions</code> at the time this command
is executed on a <code>VkDevice</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyBufferToImage-dstImageLayout-01396" href="#VUID-vkCmdCopyBufferToImage-dstImageLayout-01396"></a> <span class="vuid">VUID-vkCmdCopyBufferToImage-dstImageLayout-01396</span><br>

<code>dstImageLayout</code> <strong>must</strong> be
<code>VK_IMAGE_LAYOUT_TRANSFER_DST_OPTIMAL</code>, or
<code>VK_IMAGE_LAYOUT_GENERAL</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyBufferToImage-pRegions-07931" href="#VUID-vkCmdCopyBufferToImage-pRegions-07931"></a> <span class="vuid">VUID-vkCmdCopyBufferToImage-pRegions-07931</span><br>

For
    each element of <code>pRegions</code> whose <code>imageSubresource</code> contains a
    depth aspect, the data in <code>srcBuffer</code> <strong>must</strong> be in the range
    <span class="eq">[0,1]</span></p>
</li>
</ul>
</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCmdCopyBufferToImage-dstImage-07979" href="#VUID-vkCmdCopyBufferToImage-dstImage-07979"></a> <span class="vuid">VUID-vkCmdCopyBufferToImage-dstImage-07979</span><br>

If <code>dstImage</code> is of type <code>VK_IMAGE_TYPE_1D</code>, then for each
element of <code>pRegions</code>, <code>imageOffset.y</code> <strong>must</strong> be <code>0</code> and
<code>imageExtent.height</code> <strong>must</strong> be <code>1</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyBufferToImage-imageOffset-09104" href="#VUID-vkCmdCopyBufferToImage-imageOffset-09104"></a> <span class="vuid">VUID-vkCmdCopyBufferToImage-imageOffset-09104</span><br>

For each element of <code>pRegions</code>, <code>imageOffset.z</code> and
<span class="eq">(<code>imageExtent.depth</code> +  <code>imageOffset.z</code>)</span> <strong>must</strong>
both be greater than or equal to <code>0</code> and less than or equal to the depth
of the specified <code>imageSubresource</code> of <code>dstImage</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyBufferToImage-dstImage-07980" href="#VUID-vkCmdCopyBufferToImage-dstImage-07980"></a> <span class="vuid">VUID-vkCmdCopyBufferToImage-dstImage-07980</span><br>

If <code>dstImage</code> is of type <code>VK_IMAGE_TYPE_1D</code> or
<code>VK_IMAGE_TYPE_2D</code>, then for each element of <code>pRegions</code>,
<code>imageOffset.z</code> <strong>must</strong> be <code>0</code> and <code>imageExtent.depth</code> <strong>must</strong>
be <code>1</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyBufferToImage-dstImage-07274" href="#VUID-vkCmdCopyBufferToImage-dstImage-07274"></a> <span class="vuid">VUID-vkCmdCopyBufferToImage-dstImage-07274</span><br>

For each element of <code>pRegions</code>,
<code>imageOffset.x</code> <strong>must</strong> be a multiple of the
<a href="formats.html#formats-compatibility-classes" class="xref page">texel block extent width</a> of the
<a href="formats.html#VkFormat" class="xref page">VkFormat</a> of <code>dstImage</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyBufferToImage-dstImage-07275" href="#VUID-vkCmdCopyBufferToImage-dstImage-07275"></a> <span class="vuid">VUID-vkCmdCopyBufferToImage-dstImage-07275</span><br>

For each element of <code>pRegions</code>,
<code>imageOffset.y</code> <strong>must</strong> be a multiple of the
<a href="formats.html#formats-compatibility-classes" class="xref page">texel block extent height</a> of the
<a href="formats.html#VkFormat" class="xref page">VkFormat</a> of <code>dstImage</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyBufferToImage-dstImage-07276" href="#VUID-vkCmdCopyBufferToImage-dstImage-07276"></a> <span class="vuid">VUID-vkCmdCopyBufferToImage-dstImage-07276</span><br>

For each element of <code>pRegions</code>, <code>imageOffset.z</code> <strong>must</strong> be a
multiple of the <a href="formats.html#formats-compatibility-classes" class="xref page">texel block extent    depth</a> of the <a href="formats.html#VkFormat" class="xref page">VkFormat</a> of <code>dstImage</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyBufferToImage-dstImage-00207" href="#VUID-vkCmdCopyBufferToImage-dstImage-00207"></a> <span class="vuid">VUID-vkCmdCopyBufferToImage-dstImage-00207</span><br>

For each element of <code>pRegions</code>, if
the sum of <code>imageOffset.x</code> and <code>extent.width</code> does not equal
the width of the subresource specified by <code>imageSubresource</code>,
<code>extent.width</code> <strong>must</strong> be a multiple of the
<a href="formats.html#formats-compatibility-classes" class="xref page">texel block extent width</a> of the
<a href="formats.html#VkFormat" class="xref page">VkFormat</a> of <code>dstImage</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyBufferToImage-dstImage-00208" href="#VUID-vkCmdCopyBufferToImage-dstImage-00208"></a> <span class="vuid">VUID-vkCmdCopyBufferToImage-dstImage-00208</span><br>

For each element of <code>pRegions</code>, if
the sum of <code>imageOffset.y</code> and <code>extent.height</code> does not equal
the height of the subresource specified by <code>imageSubresource</code>,
<code>extent.height</code> <strong>must</strong> be a multiple of the
<a href="formats.html#formats-compatibility-classes" class="xref page">texel block extent height</a> of the
<a href="formats.html#VkFormat" class="xref page">VkFormat</a> of <code>dstImage</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyBufferToImage-dstImage-00209" href="#VUID-vkCmdCopyBufferToImage-dstImage-00209"></a> <span class="vuid">VUID-vkCmdCopyBufferToImage-dstImage-00209</span><br>

For each element of <code>pRegions</code>, if the sum of <code>imageOffset.z</code>
and <code>extent.depth</code> does not equal the depth of the subresource
specified by <code>srcSubresource</code>, <code>extent.depth</code> <strong>must</strong> be a
multiple of the <a href="formats.html#formats-compatibility-classes" class="xref page">texel block extent    depth</a> of the <a href="formats.html#VkFormat" class="xref page">VkFormat</a> of <code>dstImage</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyBufferToImage-imageSubresource-09105" href="#VUID-vkCmdCopyBufferToImage-imageSubresource-09105"></a> <span class="vuid">VUID-vkCmdCopyBufferToImage-imageSubresource-09105</span><br>

For each element of <code>pRegions</code>, <code>imageSubresource.aspectMask</code>
<strong>must</strong> specify aspects present in <code>dstImage</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyBufferToImage-dstImage-07981" href="#VUID-vkCmdCopyBufferToImage-dstImage-07981"></a> <span class="vuid">VUID-vkCmdCopyBufferToImage-dstImage-07981</span><br>

If <code>dstImage</code> has a
<a href="formats.html#formats-requiring-sampler-ycbcr-conversion" class="xref page">multi-planar image    format</a>, then for each element of <code>pRegions</code>,
<code>imageSubresource.aspectMask</code> <strong>must</strong> be a single valid
<a href="formats.html#formats-planes-image-aspect" class="xref page">multi-planar aspect mask</a> bit</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyBufferToImage-dstImage-07983" href="#VUID-vkCmdCopyBufferToImage-dstImage-07983"></a> <span class="vuid">VUID-vkCmdCopyBufferToImage-dstImage-07983</span><br>

If <code>dstImage</code> is of type <code>VK_IMAGE_TYPE_3D</code>, for each
element of <code>pRegions</code>, <code>imageSubresource.baseArrayLayer</code> <strong>must</strong>
be <code>0</code> and <code>imageSubresource.layerCount</code> <strong>must</strong> be <code>1</code></p>
</li>
</ul>
</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCmdCopyBufferToImage-bufferRowLength-09106" href="#VUID-vkCmdCopyBufferToImage-bufferRowLength-09106"></a> <span class="vuid">VUID-vkCmdCopyBufferToImage-bufferRowLength-09106</span><br>

For each element of <code>pRegions</code>, <code>bufferRowLength</code> <strong>must</strong> be a
multiple of the <a href="formats.html#formats-compatibility-classes" class="xref page">texel block extent    width</a> of the <a href="formats.html#VkFormat" class="xref page">VkFormat</a> of <code>dstImage</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyBufferToImage-bufferImageHeight-09107" href="#VUID-vkCmdCopyBufferToImage-bufferImageHeight-09107"></a> <span class="vuid">VUID-vkCmdCopyBufferToImage-bufferImageHeight-09107</span><br>

For each element of <code>pRegions</code>, <code>bufferImageHeight</code> <strong>must</strong> be a
multiple of the <a href="formats.html#formats-compatibility-classes" class="xref page">texel block extent    height</a> of the <a href="formats.html#VkFormat" class="xref page">VkFormat</a> of <code>dstImage</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyBufferToImage-bufferRowLength-09108" href="#VUID-vkCmdCopyBufferToImage-bufferRowLength-09108"></a> <span class="vuid">VUID-vkCmdCopyBufferToImage-bufferRowLength-09108</span><br>

For each element of <code>pRegions</code>, <code>bufferRowLength</code> divided by
the <a href="formats.html#formats-compatibility-classes" class="xref page">texel block extent width</a> and then
multiplied by the texel block size of <code>dstImage</code> <strong>must</strong> be less
than or equal to <span class="eq">2<sup>31</sup>-1</span></p>
</li>
</ul>
</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCmdCopyBufferToImage-dstImage-07975" href="#VUID-vkCmdCopyBufferToImage-dstImage-07975"></a> <span class="vuid">VUID-vkCmdCopyBufferToImage-dstImage-07975</span><br>

If <code>dstImage</code> does not have either a depth/stencil format
or a <a href="formats.html#formats-requiring-sampler-ycbcr-conversion" class="xref page">multi-planar format</a>,
then for each element of <code>pRegions</code>, <code>bufferOffset</code> <strong>must</strong> be a
multiple of the <a href="formats.html#formats-compatibility-classes" class="xref page">texel block size</a></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyBufferToImage-dstImage-07976" href="#VUID-vkCmdCopyBufferToImage-dstImage-07976"></a> <span class="vuid">VUID-vkCmdCopyBufferToImage-dstImage-07976</span><br>

If <code>dstImage</code> has a
<a href="formats.html#formats-requiring-sampler-ycbcr-conversion" class="xref page">multi-planar format</a>, then
for each element of <code>pRegions</code>, <code>bufferOffset</code> <strong>must</strong> be a
multiple of the element size of the compatible format for the format and
the <code>aspectMask</code> of the <code>imageSubresource</code> as defined in
<a href="formats.html#formats-compatible-planes" class="xref page">Compatible Formats of Planes of Multi-Planar Formats</a></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyBufferToImage-dstImage-07978" href="#VUID-vkCmdCopyBufferToImage-dstImage-07978"></a> <span class="vuid">VUID-vkCmdCopyBufferToImage-dstImage-07978</span><br>

If <code>dstImage</code> has a depth/stencil format, the <code>bufferOffset</code>
member of any element of <code>pRegions</code> <strong>must</strong> be a multiple of <code>4</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCmdCopyBufferToImage-commandBuffer-parameter" href="#VUID-vkCmdCopyBufferToImage-commandBuffer-parameter"></a> <span class="vuid">VUID-vkCmdCopyBufferToImage-commandBuffer-parameter</span><br>
 <code>commandBuffer</code> <strong>must</strong> be a valid <a href="cmdbuffers.html#VkCommandBuffer" class="xref page">VkCommandBuffer</a> handle</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyBufferToImage-srcBuffer-parameter" href="#VUID-vkCmdCopyBufferToImage-srcBuffer-parameter"></a> <span class="vuid">VUID-vkCmdCopyBufferToImage-srcBuffer-parameter</span><br>
 <code>srcBuffer</code> <strong>must</strong> be a valid <a href="resources.html#VkBuffer" class="xref page">VkBuffer</a> handle</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyBufferToImage-dstImage-parameter" href="#VUID-vkCmdCopyBufferToImage-dstImage-parameter"></a> <span class="vuid">VUID-vkCmdCopyBufferToImage-dstImage-parameter</span><br>
 <code>dstImage</code> <strong>must</strong> be a valid <a href="resources.html#VkImage" class="xref page">VkImage</a> handle</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyBufferToImage-dstImageLayout-parameter" href="#VUID-vkCmdCopyBufferToImage-dstImageLayout-parameter"></a> <span class="vuid">VUID-vkCmdCopyBufferToImage-dstImageLayout-parameter</span><br>
 <code>dstImageLayout</code> <strong>must</strong> be a valid <a href="resources.html#VkImageLayout" class="xref page">VkImageLayout</a> value</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyBufferToImage-pRegions-parameter" href="#VUID-vkCmdCopyBufferToImage-pRegions-parameter"></a> <span class="vuid">VUID-vkCmdCopyBufferToImage-pRegions-parameter</span><br>
 <code>pRegions</code> <strong>must</strong> be a valid pointer to an array of <code>regionCount</code> valid <a href="#VkBufferImageCopy">VkBufferImageCopy</a> structures</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyBufferToImage-commandBuffer-recording" href="#VUID-vkCmdCopyBufferToImage-commandBuffer-recording"></a> <span class="vuid">VUID-vkCmdCopyBufferToImage-commandBuffer-recording</span><br>
 <code>commandBuffer</code> <strong>must</strong> be in the <a href="cmdbuffers.html#commandbuffers-lifecycle" class="xref page">recording state</a></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyBufferToImage-commandBuffer-cmdpool" href="#VUID-vkCmdCopyBufferToImage-commandBuffer-cmdpool"></a> <span class="vuid">VUID-vkCmdCopyBufferToImage-commandBuffer-cmdpool</span><br>
 The <code>VkCommandPool</code> that <code>commandBuffer</code> was allocated from <strong>must</strong> support transfer, graphics, or compute operations</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyBufferToImage-renderpass" href="#VUID-vkCmdCopyBufferToImage-renderpass"></a> <span class="vuid">VUID-vkCmdCopyBufferToImage-renderpass</span><br>
 This command <strong>must</strong> only be called outside of a render pass instance</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyBufferToImage-regionCount-arraylength" href="#VUID-vkCmdCopyBufferToImage-regionCount-arraylength"></a> <span class="vuid">VUID-vkCmdCopyBufferToImage-regionCount-arraylength</span><br>
 <code>regionCount</code> <strong>must</strong> be greater than <code>0</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyBufferToImage-commonparent" href="#VUID-vkCmdCopyBufferToImage-commonparent"></a> <span class="vuid">VUID-vkCmdCopyBufferToImage-commonparent</span><br>
 Each of <code>commandBuffer</code>, <code>dstImage</code>, and <code>srcBuffer</code> <strong>must</strong> have been created, allocated, or retrieved from the same <a href="devsandqueues.html#VkDevice" class="xref page">VkDevice</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Host Synchronization</div>
<div class="ulist">
<ul>
<li>
<p>Host access to <code>commandBuffer</code> <strong>must</strong> be externally synchronized</p>
</li>
<li>
<p>Host access to the <code>VkCommandPool</code> that <code>commandBuffer</code> was allocated from <strong>must</strong> be externally synchronized</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Command Properties</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><a href="cmdbuffers.html#VkCommandBufferLevel" class="xref page">Command Buffer Levels</a></th>
<th class="tableblock halign-left valign-top"><a href="renderpass.html#vkCmdBeginRenderPass" class="xref page">Render Pass Scope</a></th>
<th class="tableblock halign-left valign-top"><a href="devsandqueues.html#VkQueueFlagBits" class="xref page">Supported Queue Types</a></th>
<th class="tableblock halign-left valign-top"><a href="fundamentals.html#fundamentals-queueoperation-command-types" class="xref page">Command Type</a></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Primary<br>
Secondary</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Outside</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Transfer<br>
Graphics<br>
Compute</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Action</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>To copy data from an image object to a buffer object, call:</p>
</div>
<div id="vkCmdCopyImageToBuffer" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_VERSION_1_0
void vkCmdCopyImageToBuffer(
    VkCommandBuffer                             commandBuffer,
    VkImage                                     srcImage,
    VkImageLayout                               srcImageLayout,
    VkBuffer                                    dstBuffer,
    uint32_t                                    regionCount,
    const VkBufferImageCopy*                    pRegions);</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>commandBuffer</code> is the command buffer into which the command will be
recorded.</p>
</li>
<li>
<p><code>srcImage</code> is the source image.</p>
</li>
<li>
<p><code>srcImageLayout</code> is the layout of the source image subresources for
the copy.</p>
</li>
<li>
<p><code>dstBuffer</code> is the destination buffer.</p>
</li>
<li>
<p><code>regionCount</code> is the number of regions to copy.</p>
</li>
<li>
<p><code>pRegions</code> is a pointer to an array of <a href="#VkBufferImageCopy">VkBufferImageCopy</a>
structures specifying the regions to copy.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Each source region specified by <code>pRegions</code> is copied from the source
image to the destination region of the destination buffer according to the
<a href="#copies-buffers-images-addressing">addressing calculations</a> for each
resource.
If any of the specified regions in <code>srcImage</code> overlaps in memory with
any of the specified regions in <code>dstBuffer</code>, values read from those
overlapping regions are <strong>undefined</strong>.</p>
</div>
<div class="paragraph">
<p>Copy regions for the image <strong>must</strong> be aligned to a multiple of the texel block
extent in each dimension, except at the edges of the image, where region
extents <strong>must</strong> match the edge of the image.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCmdCopyImageToBuffer-srcImage-07966" href="#VUID-vkCmdCopyImageToBuffer-srcImage-07966"></a> <span class="vuid">VUID-vkCmdCopyImageToBuffer-srcImage-07966</span><br>

If <code>srcImage</code> is non-sparse then the image
or the specified <em>disjoint</em> plane
<strong>must</strong> be bound completely and contiguously to a single
<code>VkDeviceMemory</code> object</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImageToBuffer-imageSubresource-07967" href="#VUID-vkCmdCopyImageToBuffer-imageSubresource-07967"></a> <span class="vuid">VUID-vkCmdCopyImageToBuffer-imageSubresource-07967</span><br>

The <code>imageSubresource.mipLevel</code> member of each element of
<code>pRegions</code> <strong>must</strong> be less than the <code>mipLevels</code> specified in
<a href="resources.html#VkImageCreateInfo" class="xref page">VkImageCreateInfo</a> when <code>srcImage</code> was created</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImageToBuffer-imageSubresource-07968" href="#VUID-vkCmdCopyImageToBuffer-imageSubresource-07968"></a> <span class="vuid">VUID-vkCmdCopyImageToBuffer-imageSubresource-07968</span><br>

<span class="eq"><code>imageSubresource.baseArrayLayer</code> + 
<code>imageSubresource.layerCount</code></span> of each element of <code>pRegions</code>
<strong>must</strong> be less than or equal to the <code>arrayLayers</code> specified in
<a href="resources.html#VkImageCreateInfo" class="xref page">VkImageCreateInfo</a> when <code>srcImage</code> was created</p>
</li>
</ul>
</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCmdCopyImageToBuffer-imageSubresource-07970" href="#VUID-vkCmdCopyImageToBuffer-imageSubresource-07970"></a> <span class="vuid">VUID-vkCmdCopyImageToBuffer-imageSubresource-07970</span><br>

The image region specified by each element of <code>pRegions</code> <strong>must</strong> be
contained within the specified <code>imageSubresource</code> of
<code>srcImage</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImageToBuffer-imageSubresource-07971" href="#VUID-vkCmdCopyImageToBuffer-imageSubresource-07971"></a> <span class="vuid">VUID-vkCmdCopyImageToBuffer-imageSubresource-07971</span><br>

For each element of <code>pRegions</code>, <code>imageOffset.x</code> and
<span class="eq">(<code>imageExtent.width</code> +  <code>imageOffset.x</code>)</span> <strong>must</strong>
both be greater than or equal to <code>0</code> and less than or equal to the width
of the specified <code>imageSubresource</code> of <code>srcImage</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImageToBuffer-imageSubresource-07972" href="#VUID-vkCmdCopyImageToBuffer-imageSubresource-07972"></a> <span class="vuid">VUID-vkCmdCopyImageToBuffer-imageSubresource-07972</span><br>

For each element of <code>pRegions</code>, <code>imageOffset.y</code> and
<span class="eq">(<code>imageExtent.height</code> +  <code>imageOffset.y</code>)</span> <strong>must</strong>
both be greater than or equal to <code>0</code> and less than or equal to the
height of the specified <code>imageSubresource</code> of <code>srcImage</code></p>
</li>
</ul>
</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCmdCopyImageToBuffer-srcImage-07973" href="#VUID-vkCmdCopyImageToBuffer-srcImage-07973"></a> <span class="vuid">VUID-vkCmdCopyImageToBuffer-srcImage-07973</span><br>

<code>srcImage</code> <strong>must</strong> have a sample count equal to
<code>VK_SAMPLE_COUNT_1_BIT</code></p>
</li>
</ul>
</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCmdCopyImageToBuffer-commandBuffer-01831" href="#VUID-vkCmdCopyImageToBuffer-commandBuffer-01831"></a> <span class="vuid">VUID-vkCmdCopyImageToBuffer-commandBuffer-01831</span><br>

If <code>commandBuffer</code> is an unprotected command buffer and
<a href="devsandqueues.html#limits-protectedNoFault" class="xref page"><code>protectedNoFault</code></a> is not supported,
<code>srcImage</code> <strong>must</strong> not be a protected image</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImageToBuffer-commandBuffer-01832" href="#VUID-vkCmdCopyImageToBuffer-commandBuffer-01832"></a> <span class="vuid">VUID-vkCmdCopyImageToBuffer-commandBuffer-01832</span><br>

If <code>commandBuffer</code> is an unprotected command buffer and
<a href="devsandqueues.html#limits-protectedNoFault" class="xref page"><code>protectedNoFault</code></a> is not supported,
<code>dstBuffer</code> <strong>must</strong> not be a protected buffer</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImageToBuffer-commandBuffer-01833" href="#VUID-vkCmdCopyImageToBuffer-commandBuffer-01833"></a> <span class="vuid">VUID-vkCmdCopyImageToBuffer-commandBuffer-01833</span><br>

If <code>commandBuffer</code> is a protected command buffer and
<a href="devsandqueues.html#limits-protectedNoFault" class="xref page"><code>protectedNoFault</code></a> is not supported,
<code>dstBuffer</code> <strong>must</strong> not be an unprotected buffer</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImageToBuffer-commandBuffer-07746" href="#VUID-vkCmdCopyImageToBuffer-commandBuffer-07746"></a> <span class="vuid">VUID-vkCmdCopyImageToBuffer-commandBuffer-07746</span><br>

If the queue family used to create the <a href="cmdbuffers.html#VkCommandPool" class="xref page">VkCommandPool</a> which
<code>commandBuffer</code> was allocated from does not support
<code>VK_QUEUE_GRAPHICS_BIT</code> or <code>VK_QUEUE_COMPUTE_BIT</code>, the
<code>bufferOffset</code> member of any element of <code>pRegions</code> <strong>must</strong> be a
multiple of <code>4</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImageToBuffer-imageOffset-07747" href="#VUID-vkCmdCopyImageToBuffer-imageOffset-07747"></a> <span class="vuid">VUID-vkCmdCopyImageToBuffer-imageOffset-07747</span><br>

The <code>imageOffset</code> and <code>imageExtent</code> members of each element of
<code>pRegions</code> <strong>must</strong> respect the image transfer granularity requirements
of <code>commandBuffer</code>&#8217;s command pool&#8217;s queue family, as described in
<a href="devsandqueues.html#VkQueueFamilyProperties" class="xref page">VkQueueFamilyProperties</a></p>
</li>
</ul>
</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCmdCopyImageToBuffer-pRegions-00183" href="#VUID-vkCmdCopyImageToBuffer-pRegions-00183"></a> <span class="vuid">VUID-vkCmdCopyImageToBuffer-pRegions-00183</span><br>

<code>dstBuffer</code> <strong>must</strong> be large enough to contain all buffer locations
that are accessed according to <a href="#copies-buffers-images-addressing">Buffer    and Image Addressing</a>, for each element of <code>pRegions</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImageToBuffer-pRegions-00184" href="#VUID-vkCmdCopyImageToBuffer-pRegions-00184"></a> <span class="vuid">VUID-vkCmdCopyImageToBuffer-pRegions-00184</span><br>

The union of all source regions, and the union of all destination
regions, specified by the elements of <code>pRegions</code>, <strong>must</strong> not overlap
in memory</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImageToBuffer-srcImage-00186" href="#VUID-vkCmdCopyImageToBuffer-srcImage-00186"></a> <span class="vuid">VUID-vkCmdCopyImageToBuffer-srcImage-00186</span><br>

<code>srcImage</code> <strong>must</strong> have been created with
<code>VK_IMAGE_USAGE_TRANSFER_SRC_BIT</code> usage flag</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImageToBuffer-srcImage-01998" href="#VUID-vkCmdCopyImageToBuffer-srcImage-01998"></a> <span class="vuid">VUID-vkCmdCopyImageToBuffer-srcImage-01998</span><br>

The <a href="resources.html#resources-image-format-features" class="xref page">format features</a> of
<code>srcImage</code> <strong>must</strong> contain <code>VK_FORMAT_FEATURE_TRANSFER_SRC_BIT</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImageToBuffer-dstBuffer-00191" href="#VUID-vkCmdCopyImageToBuffer-dstBuffer-00191"></a> <span class="vuid">VUID-vkCmdCopyImageToBuffer-dstBuffer-00191</span><br>

<code>dstBuffer</code> <strong>must</strong> have been created with
<code>VK_BUFFER_USAGE_TRANSFER_DST_BIT</code> usage flag</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImageToBuffer-dstBuffer-00192" href="#VUID-vkCmdCopyImageToBuffer-dstBuffer-00192"></a> <span class="vuid">VUID-vkCmdCopyImageToBuffer-dstBuffer-00192</span><br>

If <code>dstBuffer</code> is non-sparse then it <strong>must</strong> be bound completely and
contiguously to a single <code>VkDeviceMemory</code> object</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImageToBuffer-srcImageLayout-00189" href="#VUID-vkCmdCopyImageToBuffer-srcImageLayout-00189"></a> <span class="vuid">VUID-vkCmdCopyImageToBuffer-srcImageLayout-00189</span><br>

<code>srcImageLayout</code> <strong>must</strong> specify the layout of the image subresources
of <code>srcImage</code> specified in <code>pRegions</code> at the time this command
is executed on a <code>VkDevice</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImageToBuffer-srcImageLayout-01397" href="#VUID-vkCmdCopyImageToBuffer-srcImageLayout-01397"></a> <span class="vuid">VUID-vkCmdCopyImageToBuffer-srcImageLayout-01397</span><br>

<code>srcImageLayout</code> <strong>must</strong> be
<code>VK_IMAGE_LAYOUT_TRANSFER_SRC_OPTIMAL</code>, or
<code>VK_IMAGE_LAYOUT_GENERAL</code></p>
</li>
</ul>
</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCmdCopyImageToBuffer-srcImage-07979" href="#VUID-vkCmdCopyImageToBuffer-srcImage-07979"></a> <span class="vuid">VUID-vkCmdCopyImageToBuffer-srcImage-07979</span><br>

If <code>srcImage</code> is of type <code>VK_IMAGE_TYPE_1D</code>, then for each
element of <code>pRegions</code>, <code>imageOffset.y</code> <strong>must</strong> be <code>0</code> and
<code>imageExtent.height</code> <strong>must</strong> be <code>1</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImageToBuffer-imageOffset-09104" href="#VUID-vkCmdCopyImageToBuffer-imageOffset-09104"></a> <span class="vuid">VUID-vkCmdCopyImageToBuffer-imageOffset-09104</span><br>

For each element of <code>pRegions</code>, <code>imageOffset.z</code> and
<span class="eq">(<code>imageExtent.depth</code> +  <code>imageOffset.z</code>)</span> <strong>must</strong>
both be greater than or equal to <code>0</code> and less than or equal to the depth
of the specified <code>imageSubresource</code> of <code>srcImage</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImageToBuffer-srcImage-07980" href="#VUID-vkCmdCopyImageToBuffer-srcImage-07980"></a> <span class="vuid">VUID-vkCmdCopyImageToBuffer-srcImage-07980</span><br>

If <code>srcImage</code> is of type <code>VK_IMAGE_TYPE_1D</code> or
<code>VK_IMAGE_TYPE_2D</code>, then for each element of <code>pRegions</code>,
<code>imageOffset.z</code> <strong>must</strong> be <code>0</code> and <code>imageExtent.depth</code> <strong>must</strong>
be <code>1</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImageToBuffer-srcImage-07274" href="#VUID-vkCmdCopyImageToBuffer-srcImage-07274"></a> <span class="vuid">VUID-vkCmdCopyImageToBuffer-srcImage-07274</span><br>

For each element of <code>pRegions</code>,
<code>imageOffset.x</code> <strong>must</strong> be a multiple of the
<a href="formats.html#formats-compatibility-classes" class="xref page">texel block extent width</a> of the
<a href="formats.html#VkFormat" class="xref page">VkFormat</a> of <code>srcImage</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImageToBuffer-srcImage-07275" href="#VUID-vkCmdCopyImageToBuffer-srcImage-07275"></a> <span class="vuid">VUID-vkCmdCopyImageToBuffer-srcImage-07275</span><br>

For each element of <code>pRegions</code>,
<code>imageOffset.y</code> <strong>must</strong> be a multiple of the
<a href="formats.html#formats-compatibility-classes" class="xref page">texel block extent height</a> of the
<a href="formats.html#VkFormat" class="xref page">VkFormat</a> of <code>srcImage</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImageToBuffer-srcImage-07276" href="#VUID-vkCmdCopyImageToBuffer-srcImage-07276"></a> <span class="vuid">VUID-vkCmdCopyImageToBuffer-srcImage-07276</span><br>

For each element of <code>pRegions</code>, <code>imageOffset.z</code> <strong>must</strong> be a
multiple of the <a href="formats.html#formats-compatibility-classes" class="xref page">texel block extent    depth</a> of the <a href="formats.html#VkFormat" class="xref page">VkFormat</a> of <code>srcImage</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImageToBuffer-srcImage-00207" href="#VUID-vkCmdCopyImageToBuffer-srcImage-00207"></a> <span class="vuid">VUID-vkCmdCopyImageToBuffer-srcImage-00207</span><br>

For each element of <code>pRegions</code>, if
the sum of <code>imageOffset.x</code> and <code>extent.width</code> does not equal
the width of the subresource specified by <code>imageSubresource</code>,
<code>extent.width</code> <strong>must</strong> be a multiple of the
<a href="formats.html#formats-compatibility-classes" class="xref page">texel block extent width</a> of the
<a href="formats.html#VkFormat" class="xref page">VkFormat</a> of <code>srcImage</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImageToBuffer-srcImage-00208" href="#VUID-vkCmdCopyImageToBuffer-srcImage-00208"></a> <span class="vuid">VUID-vkCmdCopyImageToBuffer-srcImage-00208</span><br>

For each element of <code>pRegions</code>, if
the sum of <code>imageOffset.y</code> and <code>extent.height</code> does not equal
the height of the subresource specified by <code>imageSubresource</code>,
<code>extent.height</code> <strong>must</strong> be a multiple of the
<a href="formats.html#formats-compatibility-classes" class="xref page">texel block extent height</a> of the
<a href="formats.html#VkFormat" class="xref page">VkFormat</a> of <code>srcImage</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImageToBuffer-srcImage-00209" href="#VUID-vkCmdCopyImageToBuffer-srcImage-00209"></a> <span class="vuid">VUID-vkCmdCopyImageToBuffer-srcImage-00209</span><br>

For each element of <code>pRegions</code>, if the sum of <code>imageOffset.z</code>
and <code>extent.depth</code> does not equal the depth of the subresource
specified by <code>srcSubresource</code>, <code>extent.depth</code> <strong>must</strong> be a
multiple of the <a href="formats.html#formats-compatibility-classes" class="xref page">texel block extent    depth</a> of the <a href="formats.html#VkFormat" class="xref page">VkFormat</a> of <code>srcImage</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImageToBuffer-imageSubresource-09105" href="#VUID-vkCmdCopyImageToBuffer-imageSubresource-09105"></a> <span class="vuid">VUID-vkCmdCopyImageToBuffer-imageSubresource-09105</span><br>

For each element of <code>pRegions</code>, <code>imageSubresource.aspectMask</code>
<strong>must</strong> specify aspects present in <code>srcImage</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImageToBuffer-srcImage-07981" href="#VUID-vkCmdCopyImageToBuffer-srcImage-07981"></a> <span class="vuid">VUID-vkCmdCopyImageToBuffer-srcImage-07981</span><br>

If <code>srcImage</code> has a
<a href="formats.html#formats-requiring-sampler-ycbcr-conversion" class="xref page">multi-planar image    format</a>, then for each element of <code>pRegions</code>,
<code>imageSubresource.aspectMask</code> <strong>must</strong> be a single valid
<a href="formats.html#formats-planes-image-aspect" class="xref page">multi-planar aspect mask</a> bit</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImageToBuffer-srcImage-07983" href="#VUID-vkCmdCopyImageToBuffer-srcImage-07983"></a> <span class="vuid">VUID-vkCmdCopyImageToBuffer-srcImage-07983</span><br>

If <code>srcImage</code> is of type <code>VK_IMAGE_TYPE_3D</code>, for each
element of <code>pRegions</code>, <code>imageSubresource.baseArrayLayer</code> <strong>must</strong>
be <code>0</code> and <code>imageSubresource.layerCount</code> <strong>must</strong> be <code>1</code></p>
</li>
</ul>
</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCmdCopyImageToBuffer-bufferRowLength-09106" href="#VUID-vkCmdCopyImageToBuffer-bufferRowLength-09106"></a> <span class="vuid">VUID-vkCmdCopyImageToBuffer-bufferRowLength-09106</span><br>

For each element of <code>pRegions</code>, <code>bufferRowLength</code> <strong>must</strong> be a
multiple of the <a href="formats.html#formats-compatibility-classes" class="xref page">texel block extent    width</a> of the <a href="formats.html#VkFormat" class="xref page">VkFormat</a> of <code>srcImage</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImageToBuffer-bufferImageHeight-09107" href="#VUID-vkCmdCopyImageToBuffer-bufferImageHeight-09107"></a> <span class="vuid">VUID-vkCmdCopyImageToBuffer-bufferImageHeight-09107</span><br>

For each element of <code>pRegions</code>, <code>bufferImageHeight</code> <strong>must</strong> be a
multiple of the <a href="formats.html#formats-compatibility-classes" class="xref page">texel block extent    height</a> of the <a href="formats.html#VkFormat" class="xref page">VkFormat</a> of <code>srcImage</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImageToBuffer-bufferRowLength-09108" href="#VUID-vkCmdCopyImageToBuffer-bufferRowLength-09108"></a> <span class="vuid">VUID-vkCmdCopyImageToBuffer-bufferRowLength-09108</span><br>

For each element of <code>pRegions</code>, <code>bufferRowLength</code> divided by
the <a href="formats.html#formats-compatibility-classes" class="xref page">texel block extent width</a> and then
multiplied by the texel block size of <code>srcImage</code> <strong>must</strong> be less
than or equal to <span class="eq">2<sup>31</sup>-1</span></p>
</li>
</ul>
</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCmdCopyImageToBuffer-srcImage-07975" href="#VUID-vkCmdCopyImageToBuffer-srcImage-07975"></a> <span class="vuid">VUID-vkCmdCopyImageToBuffer-srcImage-07975</span><br>

If <code>srcImage</code> does not have either a depth/stencil format
or a <a href="formats.html#formats-requiring-sampler-ycbcr-conversion" class="xref page">multi-planar format</a>,
then for each element of <code>pRegions</code>, <code>bufferOffset</code> <strong>must</strong> be a
multiple of the <a href="formats.html#formats-compatibility-classes" class="xref page">texel block size</a></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImageToBuffer-srcImage-07976" href="#VUID-vkCmdCopyImageToBuffer-srcImage-07976"></a> <span class="vuid">VUID-vkCmdCopyImageToBuffer-srcImage-07976</span><br>

If <code>srcImage</code> has a
<a href="formats.html#formats-requiring-sampler-ycbcr-conversion" class="xref page">multi-planar format</a>, then
for each element of <code>pRegions</code>, <code>bufferOffset</code> <strong>must</strong> be a
multiple of the element size of the compatible format for the format and
the <code>aspectMask</code> of the <code>imageSubresource</code> as defined in
<a href="formats.html#formats-compatible-planes" class="xref page">Compatible Formats of Planes of Multi-Planar Formats</a></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImageToBuffer-srcImage-07978" href="#VUID-vkCmdCopyImageToBuffer-srcImage-07978"></a> <span class="vuid">VUID-vkCmdCopyImageToBuffer-srcImage-07978</span><br>

If <code>srcImage</code> has a depth/stencil format, the <code>bufferOffset</code>
member of any element of <code>pRegions</code> <strong>must</strong> be a multiple of <code>4</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCmdCopyImageToBuffer-commandBuffer-parameter" href="#VUID-vkCmdCopyImageToBuffer-commandBuffer-parameter"></a> <span class="vuid">VUID-vkCmdCopyImageToBuffer-commandBuffer-parameter</span><br>
 <code>commandBuffer</code> <strong>must</strong> be a valid <a href="cmdbuffers.html#VkCommandBuffer" class="xref page">VkCommandBuffer</a> handle</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImageToBuffer-srcImage-parameter" href="#VUID-vkCmdCopyImageToBuffer-srcImage-parameter"></a> <span class="vuid">VUID-vkCmdCopyImageToBuffer-srcImage-parameter</span><br>
 <code>srcImage</code> <strong>must</strong> be a valid <a href="resources.html#VkImage" class="xref page">VkImage</a> handle</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImageToBuffer-srcImageLayout-parameter" href="#VUID-vkCmdCopyImageToBuffer-srcImageLayout-parameter"></a> <span class="vuid">VUID-vkCmdCopyImageToBuffer-srcImageLayout-parameter</span><br>
 <code>srcImageLayout</code> <strong>must</strong> be a valid <a href="resources.html#VkImageLayout" class="xref page">VkImageLayout</a> value</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImageToBuffer-dstBuffer-parameter" href="#VUID-vkCmdCopyImageToBuffer-dstBuffer-parameter"></a> <span class="vuid">VUID-vkCmdCopyImageToBuffer-dstBuffer-parameter</span><br>
 <code>dstBuffer</code> <strong>must</strong> be a valid <a href="resources.html#VkBuffer" class="xref page">VkBuffer</a> handle</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImageToBuffer-pRegions-parameter" href="#VUID-vkCmdCopyImageToBuffer-pRegions-parameter"></a> <span class="vuid">VUID-vkCmdCopyImageToBuffer-pRegions-parameter</span><br>
 <code>pRegions</code> <strong>must</strong> be a valid pointer to an array of <code>regionCount</code> valid <a href="#VkBufferImageCopy">VkBufferImageCopy</a> structures</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImageToBuffer-commandBuffer-recording" href="#VUID-vkCmdCopyImageToBuffer-commandBuffer-recording"></a> <span class="vuid">VUID-vkCmdCopyImageToBuffer-commandBuffer-recording</span><br>
 <code>commandBuffer</code> <strong>must</strong> be in the <a href="cmdbuffers.html#commandbuffers-lifecycle" class="xref page">recording state</a></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImageToBuffer-commandBuffer-cmdpool" href="#VUID-vkCmdCopyImageToBuffer-commandBuffer-cmdpool"></a> <span class="vuid">VUID-vkCmdCopyImageToBuffer-commandBuffer-cmdpool</span><br>
 The <code>VkCommandPool</code> that <code>commandBuffer</code> was allocated from <strong>must</strong> support transfer, graphics, or compute operations</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImageToBuffer-renderpass" href="#VUID-vkCmdCopyImageToBuffer-renderpass"></a> <span class="vuid">VUID-vkCmdCopyImageToBuffer-renderpass</span><br>
 This command <strong>must</strong> only be called outside of a render pass instance</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImageToBuffer-regionCount-arraylength" href="#VUID-vkCmdCopyImageToBuffer-regionCount-arraylength"></a> <span class="vuid">VUID-vkCmdCopyImageToBuffer-regionCount-arraylength</span><br>
 <code>regionCount</code> <strong>must</strong> be greater than <code>0</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImageToBuffer-commonparent" href="#VUID-vkCmdCopyImageToBuffer-commonparent"></a> <span class="vuid">VUID-vkCmdCopyImageToBuffer-commonparent</span><br>
 Each of <code>commandBuffer</code>, <code>dstBuffer</code>, and <code>srcImage</code> <strong>must</strong> have been created, allocated, or retrieved from the same <a href="devsandqueues.html#VkDevice" class="xref page">VkDevice</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Host Synchronization</div>
<div class="ulist">
<ul>
<li>
<p>Host access to <code>commandBuffer</code> <strong>must</strong> be externally synchronized</p>
</li>
<li>
<p>Host access to the <code>VkCommandPool</code> that <code>commandBuffer</code> was allocated from <strong>must</strong> be externally synchronized</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Command Properties</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><a href="cmdbuffers.html#VkCommandBufferLevel" class="xref page">Command Buffer Levels</a></th>
<th class="tableblock halign-left valign-top"><a href="renderpass.html#vkCmdBeginRenderPass" class="xref page">Render Pass Scope</a></th>
<th class="tableblock halign-left valign-top"><a href="devsandqueues.html#VkQueueFlagBits" class="xref page">Supported Queue Types</a></th>
<th class="tableblock halign-left valign-top"><a href="fundamentals.html#fundamentals-queueoperation-command-types" class="xref page">Command Type</a></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Primary<br>
Secondary</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Outside</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Transfer<br>
Graphics<br>
Compute</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Action</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>For both <a href="#vkCmdCopyBufferToImage">vkCmdCopyBufferToImage</a> and <a href="#vkCmdCopyImageToBuffer">vkCmdCopyImageToBuffer</a>, each
element of <code>pRegions</code> is a structure defined as:</p>
</div>
<div id="VkBufferImageCopy" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_VERSION_1_0
typedef struct VkBufferImageCopy {
    VkDeviceSize                bufferOffset;
    uint32_t                    bufferRowLength;
    uint32_t                    bufferImageHeight;
    VkImageSubresourceLayers    imageSubresource;
    VkOffset3D                  imageOffset;
    VkExtent3D                  imageExtent;
} VkBufferImageCopy;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>bufferOffset</code> is the offset in bytes from the start of the buffer
object where the image data is copied from or to.</p>
</li>
<li>
<p><code>bufferRowLength</code> and <code>bufferImageHeight</code> specify in texels a
subregion of a larger two- or three-dimensional image in buffer memory,
and control the addressing calculations.
If either of these values is zero, that aspect of the buffer memory is
considered to be tightly packed according to the <code>imageExtent</code>.</p>
</li>
<li>
<p><code>imageSubresource</code> is a <a href="#VkImageSubresourceLayers">VkImageSubresourceLayers</a> used to
specify the specific image subresources of the image used for the source
or destination image data.</p>
</li>
<li>
<p><code>imageOffset</code> selects the initial <code>x</code>, <code>y</code>, <code>z</code> offsets
in texels of the sub-region of the source or destination image data.</p>
</li>
<li>
<p><code>imageExtent</code> is the size in texels of the image to copy in
<code>width</code>, <code>height</code> and <code>depth</code>.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkBufferImageCopy-bufferRowLength-09101" href="#VUID-VkBufferImageCopy-bufferRowLength-09101"></a> <span class="vuid">VUID-VkBufferImageCopy-bufferRowLength-09101</span><br>

<code>bufferRowLength</code> <strong>must</strong> be <code>0</code>, or greater than or equal to the
<code>width</code> member of <code>imageExtent</code></p>
</li>
<li>
<p><a id="VUID-VkBufferImageCopy-bufferImageHeight-09102" href="#VUID-VkBufferImageCopy-bufferImageHeight-09102"></a> <span class="vuid">VUID-VkBufferImageCopy-bufferImageHeight-09102</span><br>

<code>bufferImageHeight</code> <strong>must</strong> be <code>0</code>, or greater than or equal to the
<code>height</code> member of <code>imageExtent</code></p>
</li>
<li>
<p><a id="VUID-VkBufferImageCopy-aspectMask-09103" href="#VUID-VkBufferImageCopy-aspectMask-09103"></a> <span class="vuid">VUID-VkBufferImageCopy-aspectMask-09103</span><br>

The <code>aspectMask</code> member of <code>imageSubresource</code> <strong>must</strong> only have a
single bit set</p>
</li>
<li>
<p><a id="VUID-VkBufferImageCopy-imageExtent-06659" href="#VUID-VkBufferImageCopy-imageExtent-06659"></a> <span class="vuid">VUID-VkBufferImageCopy-imageExtent-06659</span><br>

<code>imageExtent.width</code> <strong>must</strong> not be 0</p>
</li>
<li>
<p><a id="VUID-VkBufferImageCopy-imageExtent-06660" href="#VUID-VkBufferImageCopy-imageExtent-06660"></a> <span class="vuid">VUID-VkBufferImageCopy-imageExtent-06660</span><br>

<code>imageExtent.height</code> <strong>must</strong> not be 0</p>
</li>
<li>
<p><a id="VUID-VkBufferImageCopy-imageExtent-06661" href="#VUID-VkBufferImageCopy-imageExtent-06661"></a> <span class="vuid">VUID-VkBufferImageCopy-imageExtent-06661</span><br>

<code>imageExtent.depth</code> <strong>must</strong> not be 0</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkBufferImageCopy-imageSubresource-parameter" href="#VUID-VkBufferImageCopy-imageSubresource-parameter"></a> <span class="vuid">VUID-VkBufferImageCopy-imageSubresource-parameter</span><br>
 <code>imageSubresource</code> <strong>must</strong> be a valid <a href="#VkImageSubresourceLayers">VkImageSubresourceLayers</a> structure</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>More extensible versions of the commands to copy between buffers and images
are defined below.</p>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>To copy data from a buffer object to an image object, call:</p>
</div>
<div id="vkCmdCopyBufferToImage2" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_VERSION_1_3
void vkCmdCopyBufferToImage2(
    VkCommandBuffer                             commandBuffer,
    const VkCopyBufferToImageInfo2*             pCopyBufferToImageInfo);</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>commandBuffer</code> is the command buffer into which the command will be
recorded.</p>
</li>
<li>
<p><code>pCopyBufferToImageInfo</code> is a pointer to a
<a href="#VkCopyBufferToImageInfo2">VkCopyBufferToImageInfo2</a> structure describing the copy parameters.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>This command is functionally identical to <a href="#vkCmdCopyBufferToImage">vkCmdCopyBufferToImage</a>, but
includes extensible sub-structures that include <code>sType</code> and <code>pNext</code>
parameters, allowing them to be more easily extended.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCmdCopyBufferToImage2-commandBuffer-01828" href="#VUID-vkCmdCopyBufferToImage2-commandBuffer-01828"></a> <span class="vuid">VUID-vkCmdCopyBufferToImage2-commandBuffer-01828</span><br>

If <code>commandBuffer</code> is an unprotected command buffer and
<a href="devsandqueues.html#limits-protectedNoFault" class="xref page"><code>protectedNoFault</code></a> is not supported,
<code>srcBuffer</code> <strong>must</strong> not be a protected buffer</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyBufferToImage2-commandBuffer-01829" href="#VUID-vkCmdCopyBufferToImage2-commandBuffer-01829"></a> <span class="vuid">VUID-vkCmdCopyBufferToImage2-commandBuffer-01829</span><br>

If <code>commandBuffer</code> is an unprotected command buffer and
<a href="devsandqueues.html#limits-protectedNoFault" class="xref page"><code>protectedNoFault</code></a> is not supported,
<code>dstImage</code> <strong>must</strong> not be a protected image</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyBufferToImage2-commandBuffer-01830" href="#VUID-vkCmdCopyBufferToImage2-commandBuffer-01830"></a> <span class="vuid">VUID-vkCmdCopyBufferToImage2-commandBuffer-01830</span><br>

If <code>commandBuffer</code> is a protected command buffer and
<a href="devsandqueues.html#limits-protectedNoFault" class="xref page"><code>protectedNoFault</code></a> is not supported,
<code>dstImage</code> <strong>must</strong> not be an unprotected image</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyBufferToImage2-commandBuffer-07737" href="#VUID-vkCmdCopyBufferToImage2-commandBuffer-07737"></a> <span class="vuid">VUID-vkCmdCopyBufferToImage2-commandBuffer-07737</span><br>

If the queue family used to create the <a href="cmdbuffers.html#VkCommandPool" class="xref page">VkCommandPool</a> which
<code>commandBuffer</code> was allocated from does not support
<code>VK_QUEUE_GRAPHICS_BIT</code> or <code>VK_QUEUE_COMPUTE_BIT</code>, the
<code>bufferOffset</code> member of any element of <code>pCopyBufferToImageInfo-&gt;pRegions</code> <strong>must</strong> be a
multiple of <code>4</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyBufferToImage2-imageOffset-07738" href="#VUID-vkCmdCopyBufferToImage2-imageOffset-07738"></a> <span class="vuid">VUID-vkCmdCopyBufferToImage2-imageOffset-07738</span><br>

The <code>imageOffset</code> and <code>imageExtent</code> members of each element of
<code>pCopyBufferToImageInfo-&gt;pRegions</code> <strong>must</strong> respect the image transfer granularity requirements
of <code>commandBuffer</code>&#8217;s command pool&#8217;s queue family, as described in
<a href="devsandqueues.html#VkQueueFamilyProperties" class="xref page">VkQueueFamilyProperties</a></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyBufferToImage2-commandBuffer-07739" href="#VUID-vkCmdCopyBufferToImage2-commandBuffer-07739"></a> <span class="vuid">VUID-vkCmdCopyBufferToImage2-commandBuffer-07739</span><br>

If the queue family used to create the <a href="cmdbuffers.html#VkCommandPool" class="xref page">VkCommandPool</a> which
<code>commandBuffer</code> was allocated from does not support
<code>VK_QUEUE_GRAPHICS_BIT</code>, for each element of <code>pCopyBufferToImageInfo-&gt;pRegions</code>, the
<code>aspectMask</code> member of <code>imageSubresource</code> <strong>must</strong> not be
<code>VK_IMAGE_ASPECT_DEPTH_BIT</code> or <code>VK_IMAGE_ASPECT_STENCIL_BIT</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCmdCopyBufferToImage2-commandBuffer-parameter" href="#VUID-vkCmdCopyBufferToImage2-commandBuffer-parameter"></a> <span class="vuid">VUID-vkCmdCopyBufferToImage2-commandBuffer-parameter</span><br>
 <code>commandBuffer</code> <strong>must</strong> be a valid <a href="cmdbuffers.html#VkCommandBuffer" class="xref page">VkCommandBuffer</a> handle</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyBufferToImage2-pCopyBufferToImageInfo-parameter" href="#VUID-vkCmdCopyBufferToImage2-pCopyBufferToImageInfo-parameter"></a> <span class="vuid">VUID-vkCmdCopyBufferToImage2-pCopyBufferToImageInfo-parameter</span><br>
 <code>pCopyBufferToImageInfo</code> <strong>must</strong> be a valid pointer to a valid <a href="#VkCopyBufferToImageInfo2">VkCopyBufferToImageInfo2</a> structure</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyBufferToImage2-commandBuffer-recording" href="#VUID-vkCmdCopyBufferToImage2-commandBuffer-recording"></a> <span class="vuid">VUID-vkCmdCopyBufferToImage2-commandBuffer-recording</span><br>
 <code>commandBuffer</code> <strong>must</strong> be in the <a href="cmdbuffers.html#commandbuffers-lifecycle" class="xref page">recording state</a></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyBufferToImage2-commandBuffer-cmdpool" href="#VUID-vkCmdCopyBufferToImage2-commandBuffer-cmdpool"></a> <span class="vuid">VUID-vkCmdCopyBufferToImage2-commandBuffer-cmdpool</span><br>
 The <code>VkCommandPool</code> that <code>commandBuffer</code> was allocated from <strong>must</strong> support transfer, graphics, or compute operations</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyBufferToImage2-renderpass" href="#VUID-vkCmdCopyBufferToImage2-renderpass"></a> <span class="vuid">VUID-vkCmdCopyBufferToImage2-renderpass</span><br>
 This command <strong>must</strong> only be called outside of a render pass instance</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Host Synchronization</div>
<div class="ulist">
<ul>
<li>
<p>Host access to <code>commandBuffer</code> <strong>must</strong> be externally synchronized</p>
</li>
<li>
<p>Host access to the <code>VkCommandPool</code> that <code>commandBuffer</code> was allocated from <strong>must</strong> be externally synchronized</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Command Properties</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><a href="cmdbuffers.html#VkCommandBufferLevel" class="xref page">Command Buffer Levels</a></th>
<th class="tableblock halign-left valign-top"><a href="renderpass.html#vkCmdBeginRenderPass" class="xref page">Render Pass Scope</a></th>
<th class="tableblock halign-left valign-top"><a href="devsandqueues.html#VkQueueFlagBits" class="xref page">Supported Queue Types</a></th>
<th class="tableblock halign-left valign-top"><a href="fundamentals.html#fundamentals-queueoperation-command-types" class="xref page">Command Type</a></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Primary<br>
Secondary</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Outside</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Transfer<br>
Graphics<br>
Compute</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Action</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>VkCopyBufferToImageInfo2</code> structure is defined as:</p>
</div>
<div id="VkCopyBufferToImageInfo2" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_VERSION_1_3
typedef struct VkCopyBufferToImageInfo2 {
    VkStructureType              sType;
    const void*                  pNext;
    VkBuffer                     srcBuffer;
    VkImage                      dstImage;
    VkImageLayout                dstImageLayout;
    uint32_t                     regionCount;
    const VkBufferImageCopy2*    pRegions;
} VkCopyBufferToImageInfo2;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is a <a href="fundamentals.html#VkStructureType" class="xref page">VkStructureType</a> value identifying this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>srcBuffer</code> is the source buffer.</p>
</li>
<li>
<p><code>dstImage</code> is the destination image.</p>
</li>
<li>
<p><code>dstImageLayout</code> is the layout of the destination image subresources
for the copy.</p>
</li>
<li>
<p><code>regionCount</code> is the number of regions to copy.</p>
</li>
<li>
<p><code>pRegions</code> is a pointer to an array of <a href="#VkBufferImageCopy2">VkBufferImageCopy2</a>
structures specifying the regions to copy.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkCopyBufferToImageInfo2-pRegions-04565" href="#VUID-VkCopyBufferToImageInfo2-pRegions-04565"></a> <span class="vuid">VUID-VkCopyBufferToImageInfo2-pRegions-04565</span><br>

The image region specified by each element of <code>pRegions</code>
<strong>must</strong> be contained within the specified <code>imageSubresource</code> of
<code>dstImage</code></p>
</li>
</ul>
</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkCopyBufferToImageInfo2-pRegions-00171" href="#VUID-VkCopyBufferToImageInfo2-pRegions-00171"></a> <span class="vuid">VUID-VkCopyBufferToImageInfo2-pRegions-00171</span><br>

<code>srcBuffer</code> <strong>must</strong> be large enough to contain all buffer locations
that are accessed according to <a href="#copies-buffers-images-addressing">Buffer    and Image Addressing</a>, for each element of <code>pRegions</code></p>
</li>
<li>
<p><a id="VUID-VkCopyBufferToImageInfo2-pRegions-00173" href="#VUID-VkCopyBufferToImageInfo2-pRegions-00173"></a> <span class="vuid">VUID-VkCopyBufferToImageInfo2-pRegions-00173</span><br>

The union of all source regions, and the union of all destination
regions, specified by the elements of <code>pRegions</code>, <strong>must</strong> not overlap
in memory</p>
</li>
<li>
<p><a id="VUID-VkCopyBufferToImageInfo2-srcBuffer-00174" href="#VUID-VkCopyBufferToImageInfo2-srcBuffer-00174"></a> <span class="vuid">VUID-VkCopyBufferToImageInfo2-srcBuffer-00174</span><br>

<code>srcBuffer</code> <strong>must</strong> have been created with
<code>VK_BUFFER_USAGE_TRANSFER_SRC_BIT</code> usage flag</p>
</li>
<li>
<p><a id="VUID-VkCopyBufferToImageInfo2-dstImage-01997" href="#VUID-VkCopyBufferToImageInfo2-dstImage-01997"></a> <span class="vuid">VUID-VkCopyBufferToImageInfo2-dstImage-01997</span><br>

The <a href="resources.html#resources-image-format-features" class="xref page">format features</a> of
<code>dstImage</code> <strong>must</strong> contain <code>VK_FORMAT_FEATURE_TRANSFER_DST_BIT</code></p>
</li>
<li>
<p><a id="VUID-VkCopyBufferToImageInfo2-srcBuffer-00176" href="#VUID-VkCopyBufferToImageInfo2-srcBuffer-00176"></a> <span class="vuid">VUID-VkCopyBufferToImageInfo2-srcBuffer-00176</span><br>

If <code>srcBuffer</code> is non-sparse then it <strong>must</strong> be bound completely and
contiguously to a single <code>VkDeviceMemory</code> object</p>
</li>
<li>
<p><a id="VUID-VkCopyBufferToImageInfo2-dstImage-00177" href="#VUID-VkCopyBufferToImageInfo2-dstImage-00177"></a> <span class="vuid">VUID-VkCopyBufferToImageInfo2-dstImage-00177</span><br>

<code>dstImage</code> <strong>must</strong> have been created with
<code>VK_IMAGE_USAGE_TRANSFER_DST_BIT</code> usage flag</p>
</li>
<li>
<p><a id="VUID-VkCopyBufferToImageInfo2-dstImageLayout-00180" href="#VUID-VkCopyBufferToImageInfo2-dstImageLayout-00180"></a> <span class="vuid">VUID-VkCopyBufferToImageInfo2-dstImageLayout-00180</span><br>

<code>dstImageLayout</code> <strong>must</strong> specify the layout of the image subresources
of <code>dstImage</code> specified in <code>pRegions</code> at the time this command
is executed on a <code>VkDevice</code></p>
</li>
<li>
<p><a id="VUID-VkCopyBufferToImageInfo2-dstImageLayout-01396" href="#VUID-VkCopyBufferToImageInfo2-dstImageLayout-01396"></a> <span class="vuid">VUID-VkCopyBufferToImageInfo2-dstImageLayout-01396</span><br>

<code>dstImageLayout</code> <strong>must</strong> be
<code>VK_IMAGE_LAYOUT_TRANSFER_DST_OPTIMAL</code>, or
<code>VK_IMAGE_LAYOUT_GENERAL</code></p>
</li>
<li>
<p><a id="VUID-VkCopyBufferToImageInfo2-pRegions-07931" href="#VUID-VkCopyBufferToImageInfo2-pRegions-07931"></a> <span class="vuid">VUID-VkCopyBufferToImageInfo2-pRegions-07931</span><br>

For
    each element of <code>pRegions</code> whose <code>imageSubresource</code> contains a
    depth aspect, the data in <code>srcBuffer</code> <strong>must</strong> be in the range
    <span class="eq">[0,1]</span></p>
</li>
</ul>
</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkCopyBufferToImageInfo2-dstImage-07966" href="#VUID-VkCopyBufferToImageInfo2-dstImage-07966"></a> <span class="vuid">VUID-VkCopyBufferToImageInfo2-dstImage-07966</span><br>

If <code>dstImage</code> is non-sparse then the image
or the specified <em>disjoint</em> plane
<strong>must</strong> be bound completely and contiguously to a single
<code>VkDeviceMemory</code> object</p>
</li>
<li>
<p><a id="VUID-VkCopyBufferToImageInfo2-imageSubresource-07967" href="#VUID-VkCopyBufferToImageInfo2-imageSubresource-07967"></a> <span class="vuid">VUID-VkCopyBufferToImageInfo2-imageSubresource-07967</span><br>

The <code>imageSubresource.mipLevel</code> member of each element of
<code>pRegions</code> <strong>must</strong> be less than the <code>mipLevels</code> specified in
<a href="resources.html#VkImageCreateInfo" class="xref page">VkImageCreateInfo</a> when <code>dstImage</code> was created</p>
</li>
<li>
<p><a id="VUID-VkCopyBufferToImageInfo2-imageSubresource-07968" href="#VUID-VkCopyBufferToImageInfo2-imageSubresource-07968"></a> <span class="vuid">VUID-VkCopyBufferToImageInfo2-imageSubresource-07968</span><br>

<span class="eq"><code>imageSubresource.baseArrayLayer</code> + 
<code>imageSubresource.layerCount</code></span> of each element of <code>pRegions</code>
<strong>must</strong> be less than or equal to the <code>arrayLayers</code> specified in
<a href="resources.html#VkImageCreateInfo" class="xref page">VkImageCreateInfo</a> when <code>dstImage</code> was created</p>
</li>
</ul>
</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkCopyBufferToImageInfo2-dstImage-07973" href="#VUID-VkCopyBufferToImageInfo2-dstImage-07973"></a> <span class="vuid">VUID-VkCopyBufferToImageInfo2-dstImage-07973</span><br>

<code>dstImage</code> <strong>must</strong> have a sample count equal to
<code>VK_SAMPLE_COUNT_1_BIT</code></p>
</li>
</ul>
</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkCopyBufferToImageInfo2-dstImage-07979" href="#VUID-VkCopyBufferToImageInfo2-dstImage-07979"></a> <span class="vuid">VUID-VkCopyBufferToImageInfo2-dstImage-07979</span><br>

If <code>dstImage</code> is of type <code>VK_IMAGE_TYPE_1D</code>, then for each
element of <code>pRegions</code>, <code>imageOffset.y</code> <strong>must</strong> be <code>0</code> and
<code>imageExtent.height</code> <strong>must</strong> be <code>1</code></p>
</li>
<li>
<p><a id="VUID-VkCopyBufferToImageInfo2-imageOffset-09104" href="#VUID-VkCopyBufferToImageInfo2-imageOffset-09104"></a> <span class="vuid">VUID-VkCopyBufferToImageInfo2-imageOffset-09104</span><br>

For each element of <code>pRegions</code>, <code>imageOffset.z</code> and
<span class="eq">(<code>imageExtent.depth</code> +  <code>imageOffset.z</code>)</span> <strong>must</strong>
both be greater than or equal to <code>0</code> and less than or equal to the depth
of the specified <code>imageSubresource</code> of <code>dstImage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyBufferToImageInfo2-dstImage-07980" href="#VUID-VkCopyBufferToImageInfo2-dstImage-07980"></a> <span class="vuid">VUID-VkCopyBufferToImageInfo2-dstImage-07980</span><br>

If <code>dstImage</code> is of type <code>VK_IMAGE_TYPE_1D</code> or
<code>VK_IMAGE_TYPE_2D</code>, then for each element of <code>pRegions</code>,
<code>imageOffset.z</code> <strong>must</strong> be <code>0</code> and <code>imageExtent.depth</code> <strong>must</strong>
be <code>1</code></p>
</li>
<li>
<p><a id="VUID-VkCopyBufferToImageInfo2-dstImage-07274" href="#VUID-VkCopyBufferToImageInfo2-dstImage-07274"></a> <span class="vuid">VUID-VkCopyBufferToImageInfo2-dstImage-07274</span><br>

For each element of <code>pRegions</code>,
<code>imageOffset.x</code> <strong>must</strong> be a multiple of the
<a href="formats.html#formats-compatibility-classes" class="xref page">texel block extent width</a> of the
<a href="formats.html#VkFormat" class="xref page">VkFormat</a> of <code>dstImage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyBufferToImageInfo2-dstImage-07275" href="#VUID-VkCopyBufferToImageInfo2-dstImage-07275"></a> <span class="vuid">VUID-VkCopyBufferToImageInfo2-dstImage-07275</span><br>

For each element of <code>pRegions</code>,
<code>imageOffset.y</code> <strong>must</strong> be a multiple of the
<a href="formats.html#formats-compatibility-classes" class="xref page">texel block extent height</a> of the
<a href="formats.html#VkFormat" class="xref page">VkFormat</a> of <code>dstImage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyBufferToImageInfo2-dstImage-07276" href="#VUID-VkCopyBufferToImageInfo2-dstImage-07276"></a> <span class="vuid">VUID-VkCopyBufferToImageInfo2-dstImage-07276</span><br>

For each element of <code>pRegions</code>, <code>imageOffset.z</code> <strong>must</strong> be a
multiple of the <a href="formats.html#formats-compatibility-classes" class="xref page">texel block extent    depth</a> of the <a href="formats.html#VkFormat" class="xref page">VkFormat</a> of <code>dstImage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyBufferToImageInfo2-dstImage-00207" href="#VUID-VkCopyBufferToImageInfo2-dstImage-00207"></a> <span class="vuid">VUID-VkCopyBufferToImageInfo2-dstImage-00207</span><br>

For each element of <code>pRegions</code>, if
the sum of <code>imageOffset.x</code> and <code>extent.width</code> does not equal
the width of the subresource specified by <code>imageSubresource</code>,
<code>extent.width</code> <strong>must</strong> be a multiple of the
<a href="formats.html#formats-compatibility-classes" class="xref page">texel block extent width</a> of the
<a href="formats.html#VkFormat" class="xref page">VkFormat</a> of <code>dstImage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyBufferToImageInfo2-dstImage-00208" href="#VUID-VkCopyBufferToImageInfo2-dstImage-00208"></a> <span class="vuid">VUID-VkCopyBufferToImageInfo2-dstImage-00208</span><br>

For each element of <code>pRegions</code>, if
the sum of <code>imageOffset.y</code> and <code>extent.height</code> does not equal
the height of the subresource specified by <code>imageSubresource</code>,
<code>extent.height</code> <strong>must</strong> be a multiple of the
<a href="formats.html#formats-compatibility-classes" class="xref page">texel block extent height</a> of the
<a href="formats.html#VkFormat" class="xref page">VkFormat</a> of <code>dstImage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyBufferToImageInfo2-dstImage-00209" href="#VUID-VkCopyBufferToImageInfo2-dstImage-00209"></a> <span class="vuid">VUID-VkCopyBufferToImageInfo2-dstImage-00209</span><br>

For each element of <code>pRegions</code>, if the sum of <code>imageOffset.z</code>
and <code>extent.depth</code> does not equal the depth of the subresource
specified by <code>srcSubresource</code>, <code>extent.depth</code> <strong>must</strong> be a
multiple of the <a href="formats.html#formats-compatibility-classes" class="xref page">texel block extent    depth</a> of the <a href="formats.html#VkFormat" class="xref page">VkFormat</a> of <code>dstImage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyBufferToImageInfo2-imageSubresource-09105" href="#VUID-VkCopyBufferToImageInfo2-imageSubresource-09105"></a> <span class="vuid">VUID-VkCopyBufferToImageInfo2-imageSubresource-09105</span><br>

For each element of <code>pRegions</code>, <code>imageSubresource.aspectMask</code>
<strong>must</strong> specify aspects present in <code>dstImage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyBufferToImageInfo2-dstImage-07981" href="#VUID-VkCopyBufferToImageInfo2-dstImage-07981"></a> <span class="vuid">VUID-VkCopyBufferToImageInfo2-dstImage-07981</span><br>

If <code>dstImage</code> has a
<a href="formats.html#formats-requiring-sampler-ycbcr-conversion" class="xref page">multi-planar image    format</a>, then for each element of <code>pRegions</code>,
<code>imageSubresource.aspectMask</code> <strong>must</strong> be a single valid
<a href="formats.html#formats-planes-image-aspect" class="xref page">multi-planar aspect mask</a> bit</p>
</li>
<li>
<p><a id="VUID-VkCopyBufferToImageInfo2-dstImage-07983" href="#VUID-VkCopyBufferToImageInfo2-dstImage-07983"></a> <span class="vuid">VUID-VkCopyBufferToImageInfo2-dstImage-07983</span><br>

If <code>dstImage</code> is of type <code>VK_IMAGE_TYPE_3D</code>, for each
element of <code>pRegions</code>, <code>imageSubresource.baseArrayLayer</code> <strong>must</strong>
be <code>0</code> and <code>imageSubresource.layerCount</code> <strong>must</strong> be <code>1</code></p>
</li>
</ul>
</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkCopyBufferToImageInfo2-bufferRowLength-09106" href="#VUID-VkCopyBufferToImageInfo2-bufferRowLength-09106"></a> <span class="vuid">VUID-VkCopyBufferToImageInfo2-bufferRowLength-09106</span><br>

For each element of <code>pRegions</code>, <code>bufferRowLength</code> <strong>must</strong> be a
multiple of the <a href="formats.html#formats-compatibility-classes" class="xref page">texel block extent    width</a> of the <a href="formats.html#VkFormat" class="xref page">VkFormat</a> of <code>dstImage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyBufferToImageInfo2-bufferImageHeight-09107" href="#VUID-VkCopyBufferToImageInfo2-bufferImageHeight-09107"></a> <span class="vuid">VUID-VkCopyBufferToImageInfo2-bufferImageHeight-09107</span><br>

For each element of <code>pRegions</code>, <code>bufferImageHeight</code> <strong>must</strong> be a
multiple of the <a href="formats.html#formats-compatibility-classes" class="xref page">texel block extent    height</a> of the <a href="formats.html#VkFormat" class="xref page">VkFormat</a> of <code>dstImage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyBufferToImageInfo2-bufferRowLength-09108" href="#VUID-VkCopyBufferToImageInfo2-bufferRowLength-09108"></a> <span class="vuid">VUID-VkCopyBufferToImageInfo2-bufferRowLength-09108</span><br>

For each element of <code>pRegions</code>, <code>bufferRowLength</code> divided by
the <a href="formats.html#formats-compatibility-classes" class="xref page">texel block extent width</a> and then
multiplied by the texel block size of <code>dstImage</code> <strong>must</strong> be less
than or equal to <span class="eq">2<sup>31</sup>-1</span></p>
</li>
</ul>
</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkCopyBufferToImageInfo2-dstImage-07975" href="#VUID-VkCopyBufferToImageInfo2-dstImage-07975"></a> <span class="vuid">VUID-VkCopyBufferToImageInfo2-dstImage-07975</span><br>

If <code>dstImage</code> does not have either a depth/stencil format
or a <a href="formats.html#formats-requiring-sampler-ycbcr-conversion" class="xref page">multi-planar format</a>,
then for each element of <code>pRegions</code>, <code>bufferOffset</code> <strong>must</strong> be a
multiple of the <a href="formats.html#formats-compatibility-classes" class="xref page">texel block size</a></p>
</li>
<li>
<p><a id="VUID-VkCopyBufferToImageInfo2-dstImage-07976" href="#VUID-VkCopyBufferToImageInfo2-dstImage-07976"></a> <span class="vuid">VUID-VkCopyBufferToImageInfo2-dstImage-07976</span><br>

If <code>dstImage</code> has a
<a href="formats.html#formats-requiring-sampler-ycbcr-conversion" class="xref page">multi-planar format</a>, then
for each element of <code>pRegions</code>, <code>bufferOffset</code> <strong>must</strong> be a
multiple of the element size of the compatible format for the format and
the <code>aspectMask</code> of the <code>imageSubresource</code> as defined in
<a href="formats.html#formats-compatible-planes" class="xref page">Compatible Formats of Planes of Multi-Planar Formats</a></p>
</li>
<li>
<p><a id="VUID-VkCopyBufferToImageInfo2-dstImage-07978" href="#VUID-VkCopyBufferToImageInfo2-dstImage-07978"></a> <span class="vuid">VUID-VkCopyBufferToImageInfo2-dstImage-07978</span><br>

If <code>dstImage</code> has a depth/stencil format, the <code>bufferOffset</code>
member of any element of <code>pRegions</code> <strong>must</strong> be a multiple of <code>4</code></p>
</li>
<li>
<p><a id="VUID-VkCopyBufferToImageInfo2-pRegions-06223" href="#VUID-VkCopyBufferToImageInfo2-pRegions-06223"></a> <span class="vuid">VUID-VkCopyBufferToImageInfo2-pRegions-06223</span><br>

For each element of <code>pRegions</code> not containing
<code>VkCopyCommandTransformInfoQCOM</code> in its <code>pNext</code> chain,
<code>imageOffset.x</code> and <span class="eq">(<code>imageExtent.width</code> + 
<code>imageOffset.x</code>)</span> <strong>must</strong> both be greater than or equal to <code>0</code> and
less than or equal to the width of the specified <code>imageSubresource</code>
of <code>dstImage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyBufferToImageInfo2-pRegions-06224" href="#VUID-VkCopyBufferToImageInfo2-pRegions-06224"></a> <span class="vuid">VUID-VkCopyBufferToImageInfo2-pRegions-06224</span><br>

For each element of <code>pRegions</code> not containing
<code>VkCopyCommandTransformInfoQCOM</code> in its <code>pNext</code> chain,
<code>imageOffset.y</code> and <span class="eq">(<code>imageExtent.height</code> + 
<code>imageOffset.y</code>)</span> <strong>must</strong> both be greater than or equal to <code>0</code> and
less than or equal to the height of the specified <code>imageSubresource</code>
of <code>dstImage</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkCopyBufferToImageInfo2-sType-sType" href="#VUID-VkCopyBufferToImageInfo2-sType-sType"></a> <span class="vuid">VUID-VkCopyBufferToImageInfo2-sType-sType</span><br>
 <code>sType</code> <strong>must</strong> be <code>VK_STRUCTURE_TYPE_COPY_BUFFER_TO_IMAGE_INFO_2</code></p>
</li>
<li>
<p><a id="VUID-VkCopyBufferToImageInfo2-pNext-pNext" href="#VUID-VkCopyBufferToImageInfo2-pNext-pNext"></a> <span class="vuid">VUID-VkCopyBufferToImageInfo2-pNext-pNext</span><br>
 <code>pNext</code> <strong>must</strong> be <code>NULL</code></p>
</li>
<li>
<p><a id="VUID-VkCopyBufferToImageInfo2-srcBuffer-parameter" href="#VUID-VkCopyBufferToImageInfo2-srcBuffer-parameter"></a> <span class="vuid">VUID-VkCopyBufferToImageInfo2-srcBuffer-parameter</span><br>
 <code>srcBuffer</code> <strong>must</strong> be a valid <a href="resources.html#VkBuffer" class="xref page">VkBuffer</a> handle</p>
</li>
<li>
<p><a id="VUID-VkCopyBufferToImageInfo2-dstImage-parameter" href="#VUID-VkCopyBufferToImageInfo2-dstImage-parameter"></a> <span class="vuid">VUID-VkCopyBufferToImageInfo2-dstImage-parameter</span><br>
 <code>dstImage</code> <strong>must</strong> be a valid <a href="resources.html#VkImage" class="xref page">VkImage</a> handle</p>
</li>
<li>
<p><a id="VUID-VkCopyBufferToImageInfo2-dstImageLayout-parameter" href="#VUID-VkCopyBufferToImageInfo2-dstImageLayout-parameter"></a> <span class="vuid">VUID-VkCopyBufferToImageInfo2-dstImageLayout-parameter</span><br>
 <code>dstImageLayout</code> <strong>must</strong> be a valid <a href="resources.html#VkImageLayout" class="xref page">VkImageLayout</a> value</p>
</li>
<li>
<p><a id="VUID-VkCopyBufferToImageInfo2-pRegions-parameter" href="#VUID-VkCopyBufferToImageInfo2-pRegions-parameter"></a> <span class="vuid">VUID-VkCopyBufferToImageInfo2-pRegions-parameter</span><br>
 <code>pRegions</code> <strong>must</strong> be a valid pointer to an array of <code>regionCount</code> valid <a href="#VkBufferImageCopy2">VkBufferImageCopy2</a> structures</p>
</li>
<li>
<p><a id="VUID-VkCopyBufferToImageInfo2-regionCount-arraylength" href="#VUID-VkCopyBufferToImageInfo2-regionCount-arraylength"></a> <span class="vuid">VUID-VkCopyBufferToImageInfo2-regionCount-arraylength</span><br>
 <code>regionCount</code> <strong>must</strong> be greater than <code>0</code></p>
</li>
<li>
<p><a id="VUID-VkCopyBufferToImageInfo2-commonparent" href="#VUID-VkCopyBufferToImageInfo2-commonparent"></a> <span class="vuid">VUID-VkCopyBufferToImageInfo2-commonparent</span><br>
 Both of <code>dstImage</code>, and <code>srcBuffer</code> <strong>must</strong> have been created, allocated, or retrieved from the same <a href="devsandqueues.html#VkDevice" class="xref page">VkDevice</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>To copy data from an image object to a buffer object, call:</p>
</div>
<div id="vkCmdCopyImageToBuffer2" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_VERSION_1_3
void vkCmdCopyImageToBuffer2(
    VkCommandBuffer                             commandBuffer,
    const VkCopyImageToBufferInfo2*             pCopyImageToBufferInfo);</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>commandBuffer</code> is the command buffer into which the command will be
recorded.</p>
</li>
<li>
<p><code>pCopyImageToBufferInfo</code> is a pointer to a
<a href="#VkCopyImageToBufferInfo2">VkCopyImageToBufferInfo2</a> structure describing the copy parameters.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>This command is functionally identical to <a href="#vkCmdCopyImageToBuffer">vkCmdCopyImageToBuffer</a>, but
includes extensible sub-structures that include <code>sType</code> and <code>pNext</code>
parameters, allowing them to be more easily extended.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCmdCopyImageToBuffer2-commandBuffer-01831" href="#VUID-vkCmdCopyImageToBuffer2-commandBuffer-01831"></a> <span class="vuid">VUID-vkCmdCopyImageToBuffer2-commandBuffer-01831</span><br>

If <code>commandBuffer</code> is an unprotected command buffer and
<a href="devsandqueues.html#limits-protectedNoFault" class="xref page"><code>protectedNoFault</code></a> is not supported,
<code>srcImage</code> <strong>must</strong> not be a protected image</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImageToBuffer2-commandBuffer-01832" href="#VUID-vkCmdCopyImageToBuffer2-commandBuffer-01832"></a> <span class="vuid">VUID-vkCmdCopyImageToBuffer2-commandBuffer-01832</span><br>

If <code>commandBuffer</code> is an unprotected command buffer and
<a href="devsandqueues.html#limits-protectedNoFault" class="xref page"><code>protectedNoFault</code></a> is not supported,
<code>dstBuffer</code> <strong>must</strong> not be a protected buffer</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImageToBuffer2-commandBuffer-01833" href="#VUID-vkCmdCopyImageToBuffer2-commandBuffer-01833"></a> <span class="vuid">VUID-vkCmdCopyImageToBuffer2-commandBuffer-01833</span><br>

If <code>commandBuffer</code> is a protected command buffer and
<a href="devsandqueues.html#limits-protectedNoFault" class="xref page"><code>protectedNoFault</code></a> is not supported,
<code>dstBuffer</code> <strong>must</strong> not be an unprotected buffer</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImageToBuffer2-commandBuffer-07746" href="#VUID-vkCmdCopyImageToBuffer2-commandBuffer-07746"></a> <span class="vuid">VUID-vkCmdCopyImageToBuffer2-commandBuffer-07746</span><br>

If the queue family used to create the <a href="cmdbuffers.html#VkCommandPool" class="xref page">VkCommandPool</a> which
<code>commandBuffer</code> was allocated from does not support
<code>VK_QUEUE_GRAPHICS_BIT</code> or <code>VK_QUEUE_COMPUTE_BIT</code>, the
<code>bufferOffset</code> member of any element of <code>pCopyImageToBufferInfo-&gt;pRegions</code> <strong>must</strong> be a
multiple of <code>4</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImageToBuffer2-imageOffset-07747" href="#VUID-vkCmdCopyImageToBuffer2-imageOffset-07747"></a> <span class="vuid">VUID-vkCmdCopyImageToBuffer2-imageOffset-07747</span><br>

The <code>imageOffset</code> and <code>imageExtent</code> members of each element of
<code>pCopyImageToBufferInfo-&gt;pRegions</code> <strong>must</strong> respect the image transfer granularity requirements
of <code>commandBuffer</code>&#8217;s command pool&#8217;s queue family, as described in
<a href="devsandqueues.html#VkQueueFamilyProperties" class="xref page">VkQueueFamilyProperties</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCmdCopyImageToBuffer2-commandBuffer-parameter" href="#VUID-vkCmdCopyImageToBuffer2-commandBuffer-parameter"></a> <span class="vuid">VUID-vkCmdCopyImageToBuffer2-commandBuffer-parameter</span><br>
 <code>commandBuffer</code> <strong>must</strong> be a valid <a href="cmdbuffers.html#VkCommandBuffer" class="xref page">VkCommandBuffer</a> handle</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImageToBuffer2-pCopyImageToBufferInfo-parameter" href="#VUID-vkCmdCopyImageToBuffer2-pCopyImageToBufferInfo-parameter"></a> <span class="vuid">VUID-vkCmdCopyImageToBuffer2-pCopyImageToBufferInfo-parameter</span><br>
 <code>pCopyImageToBufferInfo</code> <strong>must</strong> be a valid pointer to a valid <a href="#VkCopyImageToBufferInfo2">VkCopyImageToBufferInfo2</a> structure</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImageToBuffer2-commandBuffer-recording" href="#VUID-vkCmdCopyImageToBuffer2-commandBuffer-recording"></a> <span class="vuid">VUID-vkCmdCopyImageToBuffer2-commandBuffer-recording</span><br>
 <code>commandBuffer</code> <strong>must</strong> be in the <a href="cmdbuffers.html#commandbuffers-lifecycle" class="xref page">recording state</a></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImageToBuffer2-commandBuffer-cmdpool" href="#VUID-vkCmdCopyImageToBuffer2-commandBuffer-cmdpool"></a> <span class="vuid">VUID-vkCmdCopyImageToBuffer2-commandBuffer-cmdpool</span><br>
 The <code>VkCommandPool</code> that <code>commandBuffer</code> was allocated from <strong>must</strong> support transfer, graphics, or compute operations</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImageToBuffer2-renderpass" href="#VUID-vkCmdCopyImageToBuffer2-renderpass"></a> <span class="vuid">VUID-vkCmdCopyImageToBuffer2-renderpass</span><br>
 This command <strong>must</strong> only be called outside of a render pass instance</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Host Synchronization</div>
<div class="ulist">
<ul>
<li>
<p>Host access to <code>commandBuffer</code> <strong>must</strong> be externally synchronized</p>
</li>
<li>
<p>Host access to the <code>VkCommandPool</code> that <code>commandBuffer</code> was allocated from <strong>must</strong> be externally synchronized</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Command Properties</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><a href="cmdbuffers.html#VkCommandBufferLevel" class="xref page">Command Buffer Levels</a></th>
<th class="tableblock halign-left valign-top"><a href="renderpass.html#vkCmdBeginRenderPass" class="xref page">Render Pass Scope</a></th>
<th class="tableblock halign-left valign-top"><a href="devsandqueues.html#VkQueueFlagBits" class="xref page">Supported Queue Types</a></th>
<th class="tableblock halign-left valign-top"><a href="fundamentals.html#fundamentals-queueoperation-command-types" class="xref page">Command Type</a></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Primary<br>
Secondary</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Outside</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Transfer<br>
Graphics<br>
Compute</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Action</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>VkCopyImageToBufferInfo2</code> structure is defined as:</p>
</div>
<div id="VkCopyImageToBufferInfo2" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_VERSION_1_3
typedef struct VkCopyImageToBufferInfo2 {
    VkStructureType              sType;
    const void*                  pNext;
    VkImage                      srcImage;
    VkImageLayout                srcImageLayout;
    VkBuffer                     dstBuffer;
    uint32_t                     regionCount;
    const VkBufferImageCopy2*    pRegions;
} VkCopyImageToBufferInfo2;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is a <a href="fundamentals.html#VkStructureType" class="xref page">VkStructureType</a> value identifying this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>srcImage</code> is the source image.</p>
</li>
<li>
<p><code>srcImageLayout</code> is the layout of the source image subresources for
the copy.</p>
</li>
<li>
<p><code>dstBuffer</code> is the destination buffer.</p>
</li>
<li>
<p><code>regionCount</code> is the number of regions to copy.</p>
</li>
<li>
<p><code>pRegions</code> is a pointer to an array of <a href="#VkBufferImageCopy2">VkBufferImageCopy2</a>
structures specifying the regions to copy.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkCopyImageToBufferInfo2-pRegions-04566" href="#VUID-VkCopyImageToBufferInfo2-pRegions-04566"></a> <span class="vuid">VUID-VkCopyImageToBufferInfo2-pRegions-04566</span><br>

The image region specified by each element of <code>pRegions</code>
<strong>must</strong> be contained within the specified <code>imageSubresource</code> of
<code>srcImage</code></p>
</li>
</ul>
</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkCopyImageToBufferInfo2-pRegions-00183" href="#VUID-VkCopyImageToBufferInfo2-pRegions-00183"></a> <span class="vuid">VUID-VkCopyImageToBufferInfo2-pRegions-00183</span><br>

<code>dstBuffer</code> <strong>must</strong> be large enough to contain all buffer locations
that are accessed according to <a href="#copies-buffers-images-addressing">Buffer    and Image Addressing</a>, for each element of <code>pRegions</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageToBufferInfo2-pRegions-00184" href="#VUID-VkCopyImageToBufferInfo2-pRegions-00184"></a> <span class="vuid">VUID-VkCopyImageToBufferInfo2-pRegions-00184</span><br>

The union of all source regions, and the union of all destination
regions, specified by the elements of <code>pRegions</code>, <strong>must</strong> not overlap
in memory</p>
</li>
<li>
<p><a id="VUID-VkCopyImageToBufferInfo2-srcImage-00186" href="#VUID-VkCopyImageToBufferInfo2-srcImage-00186"></a> <span class="vuid">VUID-VkCopyImageToBufferInfo2-srcImage-00186</span><br>

<code>srcImage</code> <strong>must</strong> have been created with
<code>VK_IMAGE_USAGE_TRANSFER_SRC_BIT</code> usage flag</p>
</li>
<li>
<p><a id="VUID-VkCopyImageToBufferInfo2-srcImage-01998" href="#VUID-VkCopyImageToBufferInfo2-srcImage-01998"></a> <span class="vuid">VUID-VkCopyImageToBufferInfo2-srcImage-01998</span><br>

The <a href="resources.html#resources-image-format-features" class="xref page">format features</a> of
<code>srcImage</code> <strong>must</strong> contain <code>VK_FORMAT_FEATURE_TRANSFER_SRC_BIT</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageToBufferInfo2-dstBuffer-00191" href="#VUID-VkCopyImageToBufferInfo2-dstBuffer-00191"></a> <span class="vuid">VUID-VkCopyImageToBufferInfo2-dstBuffer-00191</span><br>

<code>dstBuffer</code> <strong>must</strong> have been created with
<code>VK_BUFFER_USAGE_TRANSFER_DST_BIT</code> usage flag</p>
</li>
<li>
<p><a id="VUID-VkCopyImageToBufferInfo2-dstBuffer-00192" href="#VUID-VkCopyImageToBufferInfo2-dstBuffer-00192"></a> <span class="vuid">VUID-VkCopyImageToBufferInfo2-dstBuffer-00192</span><br>

If <code>dstBuffer</code> is non-sparse then it <strong>must</strong> be bound completely and
contiguously to a single <code>VkDeviceMemory</code> object</p>
</li>
<li>
<p><a id="VUID-VkCopyImageToBufferInfo2-srcImageLayout-00189" href="#VUID-VkCopyImageToBufferInfo2-srcImageLayout-00189"></a> <span class="vuid">VUID-VkCopyImageToBufferInfo2-srcImageLayout-00189</span><br>

<code>srcImageLayout</code> <strong>must</strong> specify the layout of the image subresources
of <code>srcImage</code> specified in <code>pRegions</code> at the time this command
is executed on a <code>VkDevice</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageToBufferInfo2-srcImageLayout-01397" href="#VUID-VkCopyImageToBufferInfo2-srcImageLayout-01397"></a> <span class="vuid">VUID-VkCopyImageToBufferInfo2-srcImageLayout-01397</span><br>

<code>srcImageLayout</code> <strong>must</strong> be
<code>VK_IMAGE_LAYOUT_TRANSFER_SRC_OPTIMAL</code>, or
<code>VK_IMAGE_LAYOUT_GENERAL</code></p>
</li>
</ul>
</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkCopyImageToBufferInfo2-srcImage-07966" href="#VUID-VkCopyImageToBufferInfo2-srcImage-07966"></a> <span class="vuid">VUID-VkCopyImageToBufferInfo2-srcImage-07966</span><br>

If <code>srcImage</code> is non-sparse then the image
or the specified <em>disjoint</em> plane
<strong>must</strong> be bound completely and contiguously to a single
<code>VkDeviceMemory</code> object</p>
</li>
<li>
<p><a id="VUID-VkCopyImageToBufferInfo2-imageSubresource-07967" href="#VUID-VkCopyImageToBufferInfo2-imageSubresource-07967"></a> <span class="vuid">VUID-VkCopyImageToBufferInfo2-imageSubresource-07967</span><br>

The <code>imageSubresource.mipLevel</code> member of each element of
<code>pRegions</code> <strong>must</strong> be less than the <code>mipLevels</code> specified in
<a href="resources.html#VkImageCreateInfo" class="xref page">VkImageCreateInfo</a> when <code>srcImage</code> was created</p>
</li>
<li>
<p><a id="VUID-VkCopyImageToBufferInfo2-imageSubresource-07968" href="#VUID-VkCopyImageToBufferInfo2-imageSubresource-07968"></a> <span class="vuid">VUID-VkCopyImageToBufferInfo2-imageSubresource-07968</span><br>

<span class="eq"><code>imageSubresource.baseArrayLayer</code> + 
<code>imageSubresource.layerCount</code></span> of each element of <code>pRegions</code>
<strong>must</strong> be less than or equal to the <code>arrayLayers</code> specified in
<a href="resources.html#VkImageCreateInfo" class="xref page">VkImageCreateInfo</a> when <code>srcImage</code> was created</p>
</li>
</ul>
</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkCopyImageToBufferInfo2-srcImage-07973" href="#VUID-VkCopyImageToBufferInfo2-srcImage-07973"></a> <span class="vuid">VUID-VkCopyImageToBufferInfo2-srcImage-07973</span><br>

<code>srcImage</code> <strong>must</strong> have a sample count equal to
<code>VK_SAMPLE_COUNT_1_BIT</code></p>
</li>
</ul>
</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkCopyImageToBufferInfo2-srcImage-07979" href="#VUID-VkCopyImageToBufferInfo2-srcImage-07979"></a> <span class="vuid">VUID-VkCopyImageToBufferInfo2-srcImage-07979</span><br>

If <code>srcImage</code> is of type <code>VK_IMAGE_TYPE_1D</code>, then for each
element of <code>pRegions</code>, <code>imageOffset.y</code> <strong>must</strong> be <code>0</code> and
<code>imageExtent.height</code> <strong>must</strong> be <code>1</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageToBufferInfo2-imageOffset-09104" href="#VUID-VkCopyImageToBufferInfo2-imageOffset-09104"></a> <span class="vuid">VUID-VkCopyImageToBufferInfo2-imageOffset-09104</span><br>

For each element of <code>pRegions</code>, <code>imageOffset.z</code> and
<span class="eq">(<code>imageExtent.depth</code> +  <code>imageOffset.z</code>)</span> <strong>must</strong>
both be greater than or equal to <code>0</code> and less than or equal to the depth
of the specified <code>imageSubresource</code> of <code>srcImage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageToBufferInfo2-srcImage-07980" href="#VUID-VkCopyImageToBufferInfo2-srcImage-07980"></a> <span class="vuid">VUID-VkCopyImageToBufferInfo2-srcImage-07980</span><br>

If <code>srcImage</code> is of type <code>VK_IMAGE_TYPE_1D</code> or
<code>VK_IMAGE_TYPE_2D</code>, then for each element of <code>pRegions</code>,
<code>imageOffset.z</code> <strong>must</strong> be <code>0</code> and <code>imageExtent.depth</code> <strong>must</strong>
be <code>1</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageToBufferInfo2-srcImage-07274" href="#VUID-VkCopyImageToBufferInfo2-srcImage-07274"></a> <span class="vuid">VUID-VkCopyImageToBufferInfo2-srcImage-07274</span><br>

For each element of <code>pRegions</code>,
<code>imageOffset.x</code> <strong>must</strong> be a multiple of the
<a href="formats.html#formats-compatibility-classes" class="xref page">texel block extent width</a> of the
<a href="formats.html#VkFormat" class="xref page">VkFormat</a> of <code>srcImage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageToBufferInfo2-srcImage-07275" href="#VUID-VkCopyImageToBufferInfo2-srcImage-07275"></a> <span class="vuid">VUID-VkCopyImageToBufferInfo2-srcImage-07275</span><br>

For each element of <code>pRegions</code>,
<code>imageOffset.y</code> <strong>must</strong> be a multiple of the
<a href="formats.html#formats-compatibility-classes" class="xref page">texel block extent height</a> of the
<a href="formats.html#VkFormat" class="xref page">VkFormat</a> of <code>srcImage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageToBufferInfo2-srcImage-07276" href="#VUID-VkCopyImageToBufferInfo2-srcImage-07276"></a> <span class="vuid">VUID-VkCopyImageToBufferInfo2-srcImage-07276</span><br>

For each element of <code>pRegions</code>, <code>imageOffset.z</code> <strong>must</strong> be a
multiple of the <a href="formats.html#formats-compatibility-classes" class="xref page">texel block extent    depth</a> of the <a href="formats.html#VkFormat" class="xref page">VkFormat</a> of <code>srcImage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageToBufferInfo2-srcImage-00207" href="#VUID-VkCopyImageToBufferInfo2-srcImage-00207"></a> <span class="vuid">VUID-VkCopyImageToBufferInfo2-srcImage-00207</span><br>

For each element of <code>pRegions</code>, if
the sum of <code>imageOffset.x</code> and <code>extent.width</code> does not equal
the width of the subresource specified by <code>imageSubresource</code>,
<code>extent.width</code> <strong>must</strong> be a multiple of the
<a href="formats.html#formats-compatibility-classes" class="xref page">texel block extent width</a> of the
<a href="formats.html#VkFormat" class="xref page">VkFormat</a> of <code>srcImage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageToBufferInfo2-srcImage-00208" href="#VUID-VkCopyImageToBufferInfo2-srcImage-00208"></a> <span class="vuid">VUID-VkCopyImageToBufferInfo2-srcImage-00208</span><br>

For each element of <code>pRegions</code>, if
the sum of <code>imageOffset.y</code> and <code>extent.height</code> does not equal
the height of the subresource specified by <code>imageSubresource</code>,
<code>extent.height</code> <strong>must</strong> be a multiple of the
<a href="formats.html#formats-compatibility-classes" class="xref page">texel block extent height</a> of the
<a href="formats.html#VkFormat" class="xref page">VkFormat</a> of <code>srcImage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageToBufferInfo2-srcImage-00209" href="#VUID-VkCopyImageToBufferInfo2-srcImage-00209"></a> <span class="vuid">VUID-VkCopyImageToBufferInfo2-srcImage-00209</span><br>

For each element of <code>pRegions</code>, if the sum of <code>imageOffset.z</code>
and <code>extent.depth</code> does not equal the depth of the subresource
specified by <code>srcSubresource</code>, <code>extent.depth</code> <strong>must</strong> be a
multiple of the <a href="formats.html#formats-compatibility-classes" class="xref page">texel block extent    depth</a> of the <a href="formats.html#VkFormat" class="xref page">VkFormat</a> of <code>srcImage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageToBufferInfo2-imageSubresource-09105" href="#VUID-VkCopyImageToBufferInfo2-imageSubresource-09105"></a> <span class="vuid">VUID-VkCopyImageToBufferInfo2-imageSubresource-09105</span><br>

For each element of <code>pRegions</code>, <code>imageSubresource.aspectMask</code>
<strong>must</strong> specify aspects present in <code>srcImage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageToBufferInfo2-srcImage-07981" href="#VUID-VkCopyImageToBufferInfo2-srcImage-07981"></a> <span class="vuid">VUID-VkCopyImageToBufferInfo2-srcImage-07981</span><br>

If <code>srcImage</code> has a
<a href="formats.html#formats-requiring-sampler-ycbcr-conversion" class="xref page">multi-planar image    format</a>, then for each element of <code>pRegions</code>,
<code>imageSubresource.aspectMask</code> <strong>must</strong> be a single valid
<a href="formats.html#formats-planes-image-aspect" class="xref page">multi-planar aspect mask</a> bit</p>
</li>
<li>
<p><a id="VUID-VkCopyImageToBufferInfo2-srcImage-07983" href="#VUID-VkCopyImageToBufferInfo2-srcImage-07983"></a> <span class="vuid">VUID-VkCopyImageToBufferInfo2-srcImage-07983</span><br>

If <code>srcImage</code> is of type <code>VK_IMAGE_TYPE_3D</code>, for each
element of <code>pRegions</code>, <code>imageSubresource.baseArrayLayer</code> <strong>must</strong>
be <code>0</code> and <code>imageSubresource.layerCount</code> <strong>must</strong> be <code>1</code></p>
</li>
</ul>
</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkCopyImageToBufferInfo2-bufferRowLength-09106" href="#VUID-VkCopyImageToBufferInfo2-bufferRowLength-09106"></a> <span class="vuid">VUID-VkCopyImageToBufferInfo2-bufferRowLength-09106</span><br>

For each element of <code>pRegions</code>, <code>bufferRowLength</code> <strong>must</strong> be a
multiple of the <a href="formats.html#formats-compatibility-classes" class="xref page">texel block extent    width</a> of the <a href="formats.html#VkFormat" class="xref page">VkFormat</a> of <code>srcImage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageToBufferInfo2-bufferImageHeight-09107" href="#VUID-VkCopyImageToBufferInfo2-bufferImageHeight-09107"></a> <span class="vuid">VUID-VkCopyImageToBufferInfo2-bufferImageHeight-09107</span><br>

For each element of <code>pRegions</code>, <code>bufferImageHeight</code> <strong>must</strong> be a
multiple of the <a href="formats.html#formats-compatibility-classes" class="xref page">texel block extent    height</a> of the <a href="formats.html#VkFormat" class="xref page">VkFormat</a> of <code>srcImage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageToBufferInfo2-bufferRowLength-09108" href="#VUID-VkCopyImageToBufferInfo2-bufferRowLength-09108"></a> <span class="vuid">VUID-VkCopyImageToBufferInfo2-bufferRowLength-09108</span><br>

For each element of <code>pRegions</code>, <code>bufferRowLength</code> divided by
the <a href="formats.html#formats-compatibility-classes" class="xref page">texel block extent width</a> and then
multiplied by the texel block size of <code>srcImage</code> <strong>must</strong> be less
than or equal to <span class="eq">2<sup>31</sup>-1</span></p>
</li>
</ul>
</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkCopyImageToBufferInfo2-srcImage-07975" href="#VUID-VkCopyImageToBufferInfo2-srcImage-07975"></a> <span class="vuid">VUID-VkCopyImageToBufferInfo2-srcImage-07975</span><br>

If <code>srcImage</code> does not have either a depth/stencil format
or a <a href="formats.html#formats-requiring-sampler-ycbcr-conversion" class="xref page">multi-planar format</a>,
then for each element of <code>pRegions</code>, <code>bufferOffset</code> <strong>must</strong> be a
multiple of the <a href="formats.html#formats-compatibility-classes" class="xref page">texel block size</a></p>
</li>
<li>
<p><a id="VUID-VkCopyImageToBufferInfo2-srcImage-07976" href="#VUID-VkCopyImageToBufferInfo2-srcImage-07976"></a> <span class="vuid">VUID-VkCopyImageToBufferInfo2-srcImage-07976</span><br>

If <code>srcImage</code> has a
<a href="formats.html#formats-requiring-sampler-ycbcr-conversion" class="xref page">multi-planar format</a>, then
for each element of <code>pRegions</code>, <code>bufferOffset</code> <strong>must</strong> be a
multiple of the element size of the compatible format for the format and
the <code>aspectMask</code> of the <code>imageSubresource</code> as defined in
<a href="formats.html#formats-compatible-planes" class="xref page">Compatible Formats of Planes of Multi-Planar Formats</a></p>
</li>
<li>
<p><a id="VUID-VkCopyImageToBufferInfo2-srcImage-07978" href="#VUID-VkCopyImageToBufferInfo2-srcImage-07978"></a> <span class="vuid">VUID-VkCopyImageToBufferInfo2-srcImage-07978</span><br>

If <code>srcImage</code> has a depth/stencil format, the <code>bufferOffset</code>
member of any element of <code>pRegions</code> <strong>must</strong> be a multiple of <code>4</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageToBufferInfo2-imageOffset-00197" href="#VUID-VkCopyImageToBufferInfo2-imageOffset-00197"></a> <span class="vuid">VUID-VkCopyImageToBufferInfo2-imageOffset-00197</span><br>

For each element of <code>pRegions</code> not containing
<code>VkCopyCommandTransformInfoQCOM</code> in its <code>pNext</code> chain,
<code>imageOffset.x</code> and <span class="eq">(<code>imageExtent.width</code> + 
<code>imageOffset.x</code>)</span> <strong>must</strong> both be greater than or equal to <code>0</code> and
less than or equal to the width of the specified <code>imageSubresource</code>
of <code>srcImage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageToBufferInfo2-imageOffset-00198" href="#VUID-VkCopyImageToBufferInfo2-imageOffset-00198"></a> <span class="vuid">VUID-VkCopyImageToBufferInfo2-imageOffset-00198</span><br>

For each element of <code>pRegions</code> not containing
<code>VkCopyCommandTransformInfoQCOM</code> in its <code>pNext</code> chain,
<code>imageOffset.y</code> and <span class="eq">(<code>imageExtent.height</code> + 
<code>imageOffset.y</code>)</span> <strong>must</strong> both be greater than or equal to <code>0</code> and
less than or equal to the height of the specified <code>imageSubresource</code>
of <code>srcImage</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkCopyImageToBufferInfo2-sType-sType" href="#VUID-VkCopyImageToBufferInfo2-sType-sType"></a> <span class="vuid">VUID-VkCopyImageToBufferInfo2-sType-sType</span><br>
 <code>sType</code> <strong>must</strong> be <code>VK_STRUCTURE_TYPE_COPY_IMAGE_TO_BUFFER_INFO_2</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageToBufferInfo2-pNext-pNext" href="#VUID-VkCopyImageToBufferInfo2-pNext-pNext"></a> <span class="vuid">VUID-VkCopyImageToBufferInfo2-pNext-pNext</span><br>
 <code>pNext</code> <strong>must</strong> be <code>NULL</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageToBufferInfo2-srcImage-parameter" href="#VUID-VkCopyImageToBufferInfo2-srcImage-parameter"></a> <span class="vuid">VUID-VkCopyImageToBufferInfo2-srcImage-parameter</span><br>
 <code>srcImage</code> <strong>must</strong> be a valid <a href="resources.html#VkImage" class="xref page">VkImage</a> handle</p>
</li>
<li>
<p><a id="VUID-VkCopyImageToBufferInfo2-srcImageLayout-parameter" href="#VUID-VkCopyImageToBufferInfo2-srcImageLayout-parameter"></a> <span class="vuid">VUID-VkCopyImageToBufferInfo2-srcImageLayout-parameter</span><br>
 <code>srcImageLayout</code> <strong>must</strong> be a valid <a href="resources.html#VkImageLayout" class="xref page">VkImageLayout</a> value</p>
</li>
<li>
<p><a id="VUID-VkCopyImageToBufferInfo2-dstBuffer-parameter" href="#VUID-VkCopyImageToBufferInfo2-dstBuffer-parameter"></a> <span class="vuid">VUID-VkCopyImageToBufferInfo2-dstBuffer-parameter</span><br>
 <code>dstBuffer</code> <strong>must</strong> be a valid <a href="resources.html#VkBuffer" class="xref page">VkBuffer</a> handle</p>
</li>
<li>
<p><a id="VUID-VkCopyImageToBufferInfo2-pRegions-parameter" href="#VUID-VkCopyImageToBufferInfo2-pRegions-parameter"></a> <span class="vuid">VUID-VkCopyImageToBufferInfo2-pRegions-parameter</span><br>
 <code>pRegions</code> <strong>must</strong> be a valid pointer to an array of <code>regionCount</code> valid <a href="#VkBufferImageCopy2">VkBufferImageCopy2</a> structures</p>
</li>
<li>
<p><a id="VUID-VkCopyImageToBufferInfo2-regionCount-arraylength" href="#VUID-VkCopyImageToBufferInfo2-regionCount-arraylength"></a> <span class="vuid">VUID-VkCopyImageToBufferInfo2-regionCount-arraylength</span><br>
 <code>regionCount</code> <strong>must</strong> be greater than <code>0</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageToBufferInfo2-commonparent" href="#VUID-VkCopyImageToBufferInfo2-commonparent"></a> <span class="vuid">VUID-VkCopyImageToBufferInfo2-commonparent</span><br>
 Both of <code>dstBuffer</code>, and <code>srcImage</code> <strong>must</strong> have been created, allocated, or retrieved from the same <a href="devsandqueues.html#VkDevice" class="xref page">VkDevice</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>For both <a href="#vkCmdCopyBufferToImage2">vkCmdCopyBufferToImage2</a> and <a href="#vkCmdCopyImageToBuffer2">vkCmdCopyImageToBuffer2</a>,
each element of <code>pRegions</code> is a structure defined as:</p>
</div>
<div id="VkBufferImageCopy2" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_VERSION_1_3
typedef struct VkBufferImageCopy2 {
    VkStructureType             sType;
    const void*                 pNext;
    VkDeviceSize                bufferOffset;
    uint32_t                    bufferRowLength;
    uint32_t                    bufferImageHeight;
    VkImageSubresourceLayers    imageSubresource;
    VkOffset3D                  imageOffset;
    VkExtent3D                  imageExtent;
} VkBufferImageCopy2;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is a <a href="fundamentals.html#VkStructureType" class="xref page">VkStructureType</a> value identifying this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>bufferOffset</code> is the offset in bytes from the start of the buffer
object where the image data is copied from or to.</p>
</li>
<li>
<p><code>bufferRowLength</code> and <code>bufferImageHeight</code> specify in texels a
subregion of a larger two- or three-dimensional image in buffer memory,
and control the addressing calculations.
If either of these values is zero, that aspect of the buffer memory is
considered to be tightly packed according to the <code>imageExtent</code>.</p>
</li>
<li>
<p><code>imageSubresource</code> is a <a href="#VkImageSubresourceLayers">VkImageSubresourceLayers</a> used to
specify the specific image subresources of the image used for the source
or destination image data.</p>
</li>
<li>
<p><code>imageOffset</code> selects the initial <code>x</code>, <code>y</code>, <code>z</code> offsets
in texels of the sub-region of the source or destination image data.</p>
</li>
<li>
<p><code>imageExtent</code> is the size in texels of the image to copy in
<code>width</code>, <code>height</code> and <code>depth</code>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>This structure is functionally identical to <a href="#VkBufferImageCopy">VkBufferImageCopy</a>, but
adds <code>sType</code> and <code>pNext</code> parameters, allowing it to be more easily
extended.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkBufferImageCopy2-bufferRowLength-09101" href="#VUID-VkBufferImageCopy2-bufferRowLength-09101"></a> <span class="vuid">VUID-VkBufferImageCopy2-bufferRowLength-09101</span><br>

<code>bufferRowLength</code> <strong>must</strong> be <code>0</code>, or greater than or equal to the
<code>width</code> member of <code>imageExtent</code></p>
</li>
<li>
<p><a id="VUID-VkBufferImageCopy2-bufferImageHeight-09102" href="#VUID-VkBufferImageCopy2-bufferImageHeight-09102"></a> <span class="vuid">VUID-VkBufferImageCopy2-bufferImageHeight-09102</span><br>

<code>bufferImageHeight</code> <strong>must</strong> be <code>0</code>, or greater than or equal to the
<code>height</code> member of <code>imageExtent</code></p>
</li>
<li>
<p><a id="VUID-VkBufferImageCopy2-aspectMask-09103" href="#VUID-VkBufferImageCopy2-aspectMask-09103"></a> <span class="vuid">VUID-VkBufferImageCopy2-aspectMask-09103</span><br>

The <code>aspectMask</code> member of <code>imageSubresource</code> <strong>must</strong> only have a
single bit set</p>
</li>
<li>
<p><a id="VUID-VkBufferImageCopy2-imageExtent-06659" href="#VUID-VkBufferImageCopy2-imageExtent-06659"></a> <span class="vuid">VUID-VkBufferImageCopy2-imageExtent-06659</span><br>

<code>imageExtent.width</code> <strong>must</strong> not be 0</p>
</li>
<li>
<p><a id="VUID-VkBufferImageCopy2-imageExtent-06660" href="#VUID-VkBufferImageCopy2-imageExtent-06660"></a> <span class="vuid">VUID-VkBufferImageCopy2-imageExtent-06660</span><br>

<code>imageExtent.height</code> <strong>must</strong> not be 0</p>
</li>
<li>
<p><a id="VUID-VkBufferImageCopy2-imageExtent-06661" href="#VUID-VkBufferImageCopy2-imageExtent-06661"></a> <span class="vuid">VUID-VkBufferImageCopy2-imageExtent-06661</span><br>

<code>imageExtent.depth</code> <strong>must</strong> not be 0</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkBufferImageCopy2-sType-sType" href="#VUID-VkBufferImageCopy2-sType-sType"></a> <span class="vuid">VUID-VkBufferImageCopy2-sType-sType</span><br>
 <code>sType</code> <strong>must</strong> be <code>VK_STRUCTURE_TYPE_BUFFER_IMAGE_COPY_2</code></p>
</li>
<li>
<p><a id="VUID-VkBufferImageCopy2-pNext-pNext" href="#VUID-VkBufferImageCopy2-pNext-pNext"></a> <span class="vuid">VUID-VkBufferImageCopy2-pNext-pNext</span><br>
 <code>pNext</code> <strong>must</strong> be <code>NULL</code></p>
</li>
<li>
<p><a id="VUID-VkBufferImageCopy2-imageSubresource-parameter" href="#VUID-VkBufferImageCopy2-imageSubresource-parameter"></a> <span class="vuid">VUID-VkBufferImageCopy2-imageSubresource-parameter</span><br>
 <code>imageSubresource</code> <strong>must</strong> be a valid <a href="#VkImageSubresourceLayers">VkImageSubresourceLayers</a> structure</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="copies-imagescaling"><a class="anchor" href="#copies-imagescaling"></a>Image Copies With Scaling</h2>
<div class="sectionbody">
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>To copy regions of a source image into a destination image, potentially
performing format conversion, arbitrary scaling, and filtering, call:</p>
</div>
<div id="vkCmdBlitImage" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_VERSION_1_0
void vkCmdBlitImage(
    VkCommandBuffer                             commandBuffer,
    VkImage                                     srcImage,
    VkImageLayout                               srcImageLayout,
    VkImage                                     dstImage,
    VkImageLayout                               dstImageLayout,
    uint32_t                                    regionCount,
    const VkImageBlit*                          pRegions,
    VkFilter                                    filter);</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>commandBuffer</code> is the command buffer into which the command will be
recorded.</p>
</li>
<li>
<p><code>srcImage</code> is the source image.</p>
</li>
<li>
<p><code>srcImageLayout</code> is the layout of the source image subresources for
the blit.</p>
</li>
<li>
<p><code>dstImage</code> is the destination image.</p>
</li>
<li>
<p><code>dstImageLayout</code> is the layout of the destination image subresources
for the blit.</p>
</li>
<li>
<p><code>regionCount</code> is the number of regions to blit.</p>
</li>
<li>
<p><code>pRegions</code> is a pointer to an array of <a href="#VkImageBlit">VkImageBlit</a> structures
specifying the regions to blit.</p>
</li>
<li>
<p><code>filter</code> is a <a href="samplers.html#VkFilter" class="xref page">VkFilter</a> specifying the filter to apply if the
blits require scaling.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><code>vkCmdBlitImage</code> <strong>must</strong> not be used for multisampled source or
destination images.
Use <a href="#vkCmdResolveImage">vkCmdResolveImage</a> for this purpose.</p>
</div>
<div class="paragraph">
<p>As the sizes of the source and destination extents <strong>can</strong> differ in any
dimension, texels in the source extent are scaled and filtered to the
destination extent.
Scaling occurs via the following operations:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>For each destination texel, the integer coordinate of that texel is
converted to an unnormalized texture coordinate, using the effective
inverse of the equations described in
<a href="textures.html#textures-unnormalized-to-integer" class="xref page">unnormalized to integer    conversion</a>:</p>
<div class="dlist">
<dl>
<dt class="hdlist1"></dt>
<dd>
<p><span class="eq">u<sub>base</sub> = i +  ½</span></p>
</dd>
<dt class="hdlist1"></dt>
<dd>
<p><span class="eq">v<sub>base</sub> = j +  ½</span></p>
</dd>
<dt class="hdlist1"></dt>
<dd>
<p><span class="eq">w<sub>base</sub> = k +  ½</span></p>
</dd>
</dl>
</div>
</li>
<li>
<p>These base coordinates are then offset by the first destination offset:</p>
<div class="dlist">
<dl>
<dt class="hdlist1"></dt>
<dd>
<p><span class="eq">u<sub>offset</sub> = u<sub>base</sub> - x<sub>dst0</sub></span></p>
</dd>
<dt class="hdlist1"></dt>
<dd>
<p><span class="eq">v<sub>offset</sub> = v<sub>base</sub> - y<sub>dst0</sub></span></p>
</dd>
<dt class="hdlist1"></dt>
<dd>
<p><span class="eq">w<sub>offset</sub> = w<sub>base</sub> - z<sub>dst0</sub></span></p>
</dd>
<dt class="hdlist1"></dt>
<dd>
<p><span class="eq">a<sub>offset</sub> = a - <code>baseArrayCount</code><sub>dst</sub></span></p>
</dd>
</dl>
</div>
</li>
<li>
<p>The scale is determined from the source and destination regions, and
applied to the offset coordinates:</p>
<div class="dlist">
<dl>
<dt class="hdlist1"></dt>
<dd>
<p><span class="eq">scale<sub>u</sub> = (x<sub>src1</sub> - x<sub>src0</sub>) / (x<sub>dst1</sub> - x<sub>dst0</sub>)</span></p>
</dd>
<dt class="hdlist1"></dt>
<dd>
<p><span class="eq">scale<sub>v</sub> = (y<sub>src1</sub> - y<sub>src0</sub>) / (y<sub>dst1</sub> - y<sub>dst0</sub>)</span></p>
</dd>
<dt class="hdlist1"></dt>
<dd>
<p><span class="eq">scale<sub>w</sub> = (z<sub>src1</sub> - z<sub>src0</sub>) / (z<sub>dst1</sub> - z<sub>dst0</sub>)</span></p>
</dd>
<dt class="hdlist1"></dt>
<dd>
<p><span class="eq">u<sub>scaled</sub> = u<sub>offset</sub> × scale<sub>u</sub></span></p>
</dd>
<dt class="hdlist1"></dt>
<dd>
<p><span class="eq">v<sub>scaled</sub> = v<sub>offset</sub> × scale<sub>v</sub></span></p>
</dd>
<dt class="hdlist1"></dt>
<dd>
<p><span class="eq">w<sub>scaled</sub> = w<sub>offset</sub> × scale<sub>w</sub></span></p>
</dd>
</dl>
</div>
</li>
<li>
<p>Finally the source offset is added to the scaled coordinates, to
determine the final unnormalized coordinates used to sample from
<code>srcImage</code>:</p>
<div class="dlist">
<dl>
<dt class="hdlist1"></dt>
<dd>
<p><span class="eq">u = u<sub>scaled</sub> +  x<sub>src0</sub></span></p>
</dd>
<dt class="hdlist1"></dt>
<dd>
<p><span class="eq">v = v<sub>scaled</sub> +  y<sub>src0</sub></span></p>
</dd>
<dt class="hdlist1"></dt>
<dd>
<p><span class="eq">w = w<sub>scaled</sub> +  z<sub>src0</sub></span></p>
</dd>
<dt class="hdlist1"></dt>
<dd>
<p><span class="eq">q = <code>mipLevel</code></span></p>
</dd>
<dt class="hdlist1"></dt>
<dd>
<p><span class="eq">a = a<sub>offset</sub> +  <code>baseArrayCount</code><sub>src</sub></span></p>
</dd>
</dl>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>These coordinates are used to sample from the source image, as described in
<a href="textures.html#textures" class="xref page">Image Operations chapter</a>, with the filter mode equal to that
of <code>filter</code>, a mipmap mode of <code>VK_SAMPLER_MIPMAP_MODE_NEAREST</code> and
an address mode of <code>VK_SAMPLER_ADDRESS_MODE_CLAMP_TO_EDGE</code>.
Implementations <strong>must</strong> clamp at the edge of the source image, and <strong>may</strong>
additionally clamp to the edge of the source region.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Due to allowable rounding errors in the generation of the source texture
coordinates, it is not always possible to guarantee exactly which source
texels will be sampled for a given blit.
As rounding errors are implementation-dependent, the exact results of a
blitting operation are also implementation-dependent.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Blits are done layer by layer starting with the <code>baseArrayLayer</code> member
of <code>srcSubresource</code> for the source and <code>dstSubresource</code> for the
destination.
<code>layerCount</code> layers are blitted to the destination image.</p>
</div>
<div class="paragraph">
<p>When blitting 3D textures, slices in the destination region bounded by
<code>dstOffsets</code>[0].z and <code>dstOffsets</code>[1].z are sampled from slices in
the source region bounded by <code>srcOffsets</code>[0].z and
<code>srcOffsets</code>[1].z.
If the <code>filter</code> parameter is <code>VK_FILTER_LINEAR</code> then the value
sampled from the source image is taken by doing linear filtering using the
interpolated <strong>z</strong> coordinate represented by <strong>w</strong> in the previous equations.
If the <code>filter</code> parameter is <code>VK_FILTER_NEAREST</code> then the value
sampled from the source image is taken from the single nearest slice, with
an implementation-dependent arithmetic rounding mode.</p>
</div>
<div class="paragraph">
<p>The following filtering and conversion rules apply:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Integer formats <strong>can</strong> only be converted to other integer formats with the
same signedness.</p>
</li>
<li>
<p>No format conversion is supported between depth/stencil images.
The formats <strong>must</strong> match.</p>
</li>
<li>
<p>Format conversions on unorm, snorm, scaled and packed float formats of
the copied aspect of the image are performed by first converting the
pixels to float values.</p>
</li>
<li>
<p>For sRGB source formats, nonlinear RGB values are converted to linear
representation prior to filtering.</p>
</li>
<li>
<p>After filtering, the float values are first clamped and then cast to the
destination image format.
In case of sRGB destination format, linear RGB values are converted to
nonlinear representation before writing the pixel to the image.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Signed and unsigned integers are converted by first clamping to the
representable range of the destination format, then casting the value.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCmdBlitImage-commandBuffer-01834" href="#VUID-vkCmdBlitImage-commandBuffer-01834"></a> <span class="vuid">VUID-vkCmdBlitImage-commandBuffer-01834</span><br>

If <code>commandBuffer</code> is an unprotected command buffer and
<a href="devsandqueues.html#limits-protectedNoFault" class="xref page"><code>protectedNoFault</code></a> is not supported,
<code>srcImage</code> <strong>must</strong> not be a protected image</p>
</li>
<li>
<p><a id="VUID-vkCmdBlitImage-commandBuffer-01835" href="#VUID-vkCmdBlitImage-commandBuffer-01835"></a> <span class="vuid">VUID-vkCmdBlitImage-commandBuffer-01835</span><br>

If <code>commandBuffer</code> is an unprotected command buffer and
<a href="devsandqueues.html#limits-protectedNoFault" class="xref page"><code>protectedNoFault</code></a> is not supported,
<code>dstImage</code> <strong>must</strong> not be a protected image</p>
</li>
<li>
<p><a id="VUID-vkCmdBlitImage-commandBuffer-01836" href="#VUID-vkCmdBlitImage-commandBuffer-01836"></a> <span class="vuid">VUID-vkCmdBlitImage-commandBuffer-01836</span><br>

If <code>commandBuffer</code> is a protected command buffer and
<a href="devsandqueues.html#limits-protectedNoFault" class="xref page"><code>protectedNoFault</code></a> is not supported,
<code>dstImage</code> <strong>must</strong> not be an unprotected image</p>
</li>
</ul>
</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCmdBlitImage-pRegions-00215" href="#VUID-vkCmdBlitImage-pRegions-00215"></a> <span class="vuid">VUID-vkCmdBlitImage-pRegions-00215</span><br>

The source region specified by each element of <code>pRegions</code> <strong>must</strong> be a
region that is contained within <code>srcImage</code></p>
</li>
<li>
<p><a id="VUID-vkCmdBlitImage-pRegions-00216" href="#VUID-vkCmdBlitImage-pRegions-00216"></a> <span class="vuid">VUID-vkCmdBlitImage-pRegions-00216</span><br>

The destination region specified by each element of <code>pRegions</code> <strong>must</strong>
be a region that is contained within <code>dstImage</code></p>
</li>
<li>
<p><a id="VUID-vkCmdBlitImage-pRegions-00217" href="#VUID-vkCmdBlitImage-pRegions-00217"></a> <span class="vuid">VUID-vkCmdBlitImage-pRegions-00217</span><br>

The union of all destination regions, specified by the elements of
<code>pRegions</code>, <strong>must</strong> not overlap in memory with any texel that <strong>may</strong> be
sampled during the blit operation</p>
</li>
<li>
<p><a id="VUID-vkCmdBlitImage-srcImage-01999" href="#VUID-vkCmdBlitImage-srcImage-01999"></a> <span class="vuid">VUID-vkCmdBlitImage-srcImage-01999</span><br>

The <a href="resources.html#resources-image-format-features" class="xref page">format features</a> of
<code>srcImage</code> <strong>must</strong> contain <code>VK_FORMAT_FEATURE_BLIT_SRC_BIT</code></p>
</li>
<li>
<p><a id="VUID-vkCmdBlitImage-srcImage-06421" href="#VUID-vkCmdBlitImage-srcImage-06421"></a> <span class="vuid">VUID-vkCmdBlitImage-srcImage-06421</span><br>

<code>srcImage</code> <strong>must</strong> not use a
<a href="formats.html#formats-requiring-sampler-ycbcr-conversion" class="xref page">format that requires a    sampler Y′C<sub>B</sub>C<sub>R</sub> conversion</a></p>
</li>
<li>
<p><a id="VUID-vkCmdBlitImage-srcImage-00219" href="#VUID-vkCmdBlitImage-srcImage-00219"></a> <span class="vuid">VUID-vkCmdBlitImage-srcImage-00219</span><br>

<code>srcImage</code> <strong>must</strong> have been created with
<code>VK_IMAGE_USAGE_TRANSFER_SRC_BIT</code> usage flag</p>
</li>
<li>
<p><a id="VUID-vkCmdBlitImage-srcImage-00220" href="#VUID-vkCmdBlitImage-srcImage-00220"></a> <span class="vuid">VUID-vkCmdBlitImage-srcImage-00220</span><br>

If <code>srcImage</code> is non-sparse then it <strong>must</strong> be bound completely and
contiguously to a single <code>VkDeviceMemory</code> object</p>
</li>
<li>
<p><a id="VUID-vkCmdBlitImage-srcImageLayout-00221" href="#VUID-vkCmdBlitImage-srcImageLayout-00221"></a> <span class="vuid">VUID-vkCmdBlitImage-srcImageLayout-00221</span><br>

<code>srcImageLayout</code> <strong>must</strong> specify the layout of the image subresources
of <code>srcImage</code> specified in <code>pRegions</code> at the time this command
is executed on a <code>VkDevice</code></p>
</li>
<li>
<p><a id="VUID-vkCmdBlitImage-srcImageLayout-00222" href="#VUID-vkCmdBlitImage-srcImageLayout-00222"></a> <span class="vuid">VUID-vkCmdBlitImage-srcImageLayout-00222</span><br>

<code>srcImageLayout</code> <strong>must</strong> be <code>VK_IMAGE_LAYOUT_TRANSFER_SRC_OPTIMAL</code>
or <code>VK_IMAGE_LAYOUT_GENERAL</code></p>
</li>
<li>
<p><a id="VUID-vkCmdBlitImage-srcImage-09459" href="#VUID-vkCmdBlitImage-srcImage-09459"></a> <span class="vuid">VUID-vkCmdBlitImage-srcImage-09459</span><br>

If <code>srcImage</code> and <code>dstImage</code> are the same, and an elements of
<code>pRegions</code> contains the <code>srcSubresource</code> and
<code>dstSubresource</code> with matching <code>mipLevel</code> and overlapping array
layers, then the <code>srcImageLayout</code> and <code>dstImageLayout</code> <strong>must</strong> be
<code>VK_IMAGE_LAYOUT_GENERAL</code></p>
</li>
<li>
<p><a id="VUID-vkCmdBlitImage-dstImage-02000" href="#VUID-vkCmdBlitImage-dstImage-02000"></a> <span class="vuid">VUID-vkCmdBlitImage-dstImage-02000</span><br>

The <a href="resources.html#resources-image-format-features" class="xref page">format features</a> of
<code>dstImage</code> <strong>must</strong> contain <code>VK_FORMAT_FEATURE_BLIT_DST_BIT</code></p>
</li>
<li>
<p><a id="VUID-vkCmdBlitImage-dstImage-06422" href="#VUID-vkCmdBlitImage-dstImage-06422"></a> <span class="vuid">VUID-vkCmdBlitImage-dstImage-06422</span><br>

<code>dstImage</code> <strong>must</strong> not use a
<a href="formats.html#formats-requiring-sampler-ycbcr-conversion" class="xref page">format that requires a    sampler Y′C<sub>B</sub>C<sub>R</sub> conversion</a></p>
</li>
<li>
<p><a id="VUID-vkCmdBlitImage-dstImage-00224" href="#VUID-vkCmdBlitImage-dstImage-00224"></a> <span class="vuid">VUID-vkCmdBlitImage-dstImage-00224</span><br>

<code>dstImage</code> <strong>must</strong> have been created with
<code>VK_IMAGE_USAGE_TRANSFER_DST_BIT</code> usage flag</p>
</li>
<li>
<p><a id="VUID-vkCmdBlitImage-dstImage-00225" href="#VUID-vkCmdBlitImage-dstImage-00225"></a> <span class="vuid">VUID-vkCmdBlitImage-dstImage-00225</span><br>

If <code>dstImage</code> is non-sparse then it <strong>must</strong> be bound completely and
contiguously to a single <code>VkDeviceMemory</code> object</p>
</li>
<li>
<p><a id="VUID-vkCmdBlitImage-dstImageLayout-00226" href="#VUID-vkCmdBlitImage-dstImageLayout-00226"></a> <span class="vuid">VUID-vkCmdBlitImage-dstImageLayout-00226</span><br>

<code>dstImageLayout</code> <strong>must</strong> specify the layout of the image subresources
of <code>dstImage</code> specified in <code>pRegions</code> at the time this command
is executed on a <code>VkDevice</code></p>
</li>
<li>
<p><a id="VUID-vkCmdBlitImage-dstImageLayout-00227" href="#VUID-vkCmdBlitImage-dstImageLayout-00227"></a> <span class="vuid">VUID-vkCmdBlitImage-dstImageLayout-00227</span><br>

<code>dstImageLayout</code> <strong>must</strong> be <code>VK_IMAGE_LAYOUT_TRANSFER_DST_OPTIMAL</code>
or <code>VK_IMAGE_LAYOUT_GENERAL</code></p>
</li>
<li>
<p><a id="VUID-vkCmdBlitImage-srcImage-00229" href="#VUID-vkCmdBlitImage-srcImage-00229"></a> <span class="vuid">VUID-vkCmdBlitImage-srcImage-00229</span><br>

If either of <code>srcImage</code> or <code>dstImage</code> was created with a signed
integer <a href="formats.html#VkFormat" class="xref page">VkFormat</a>, the other <strong>must</strong> also have been created with a
signed integer <a href="formats.html#VkFormat" class="xref page">VkFormat</a></p>
</li>
<li>
<p><a id="VUID-vkCmdBlitImage-srcImage-00230" href="#VUID-vkCmdBlitImage-srcImage-00230"></a> <span class="vuid">VUID-vkCmdBlitImage-srcImage-00230</span><br>

If either of <code>srcImage</code> or <code>dstImage</code> was created with an
unsigned integer <a href="formats.html#VkFormat" class="xref page">VkFormat</a>, the other <strong>must</strong> also have been created
with an unsigned integer <a href="formats.html#VkFormat" class="xref page">VkFormat</a></p>
</li>
<li>
<p><a id="VUID-vkCmdBlitImage-srcImage-00231" href="#VUID-vkCmdBlitImage-srcImage-00231"></a> <span class="vuid">VUID-vkCmdBlitImage-srcImage-00231</span><br>

If either of <code>srcImage</code> or <code>dstImage</code> was created with a
depth/stencil format, the other <strong>must</strong> have exactly the same format</p>
</li>
<li>
<p><a id="VUID-vkCmdBlitImage-srcImage-00232" href="#VUID-vkCmdBlitImage-srcImage-00232"></a> <span class="vuid">VUID-vkCmdBlitImage-srcImage-00232</span><br>

If <code>srcImage</code> was created with a depth/stencil format, <code>filter</code>
<strong>must</strong> be <code>VK_FILTER_NEAREST</code></p>
</li>
<li>
<p><a id="VUID-vkCmdBlitImage-srcImage-00233" href="#VUID-vkCmdBlitImage-srcImage-00233"></a> <span class="vuid">VUID-vkCmdBlitImage-srcImage-00233</span><br>

<code>srcImage</code> <strong>must</strong> have been created with a <code>samples</code> value of
<code>VK_SAMPLE_COUNT_1_BIT</code></p>
</li>
<li>
<p><a id="VUID-vkCmdBlitImage-dstImage-00234" href="#VUID-vkCmdBlitImage-dstImage-00234"></a> <span class="vuid">VUID-vkCmdBlitImage-dstImage-00234</span><br>

<code>dstImage</code> <strong>must</strong> have been created with a <code>samples</code> value of
<code>VK_SAMPLE_COUNT_1_BIT</code></p>
</li>
<li>
<p><a id="VUID-vkCmdBlitImage-filter-02001" href="#VUID-vkCmdBlitImage-filter-02001"></a> <span class="vuid">VUID-vkCmdBlitImage-filter-02001</span><br>

If <code>filter</code> is <code>VK_FILTER_LINEAR</code>, then the
<a href="resources.html#resources-image-format-features" class="xref page">format features</a> of <code>srcImage</code>
<strong>must</strong> contain <code>VK_FORMAT_FEATURE_SAMPLED_IMAGE_FILTER_LINEAR_BIT</code></p>
</li>
<li>
<p><a id="VUID-vkCmdBlitImage-srcSubresource-01705" href="#VUID-vkCmdBlitImage-srcSubresource-01705"></a> <span class="vuid">VUID-vkCmdBlitImage-srcSubresource-01705</span><br>

The <code>srcSubresource.mipLevel</code> member of each element of
<code>pRegions</code> <strong>must</strong> be less than the <code>mipLevels</code> specified in
<a href="resources.html#VkImageCreateInfo" class="xref page">VkImageCreateInfo</a> when <code>srcImage</code> was created</p>
</li>
<li>
<p><a id="VUID-vkCmdBlitImage-dstSubresource-01706" href="#VUID-vkCmdBlitImage-dstSubresource-01706"></a> <span class="vuid">VUID-vkCmdBlitImage-dstSubresource-01706</span><br>

The <code>dstSubresource.mipLevel</code> member of each element of
<code>pRegions</code> <strong>must</strong> be less than the <code>mipLevels</code> specified in
<a href="resources.html#VkImageCreateInfo" class="xref page">VkImageCreateInfo</a> when <code>dstImage</code> was created</p>
</li>
<li>
<p><a id="VUID-vkCmdBlitImage-srcSubresource-01707" href="#VUID-vkCmdBlitImage-srcSubresource-01707"></a> <span class="vuid">VUID-vkCmdBlitImage-srcSubresource-01707</span><br>

<span class="eq"><code>srcSubresource.baseArrayLayer</code> + 
<code>srcSubresource.layerCount</code></span> of each element of <code>pRegions</code> <strong>must</strong>
be less than or equal to the <code>arrayLayers</code> specified in
<a href="resources.html#VkImageCreateInfo" class="xref page">VkImageCreateInfo</a> when <code>srcImage</code> was created</p>
</li>
<li>
<p><a id="VUID-vkCmdBlitImage-dstSubresource-01708" href="#VUID-vkCmdBlitImage-dstSubresource-01708"></a> <span class="vuid">VUID-vkCmdBlitImage-dstSubresource-01708</span><br>

<span class="eq"><code>dstSubresource.baseArrayLayer</code> + 
<code>dstSubresource.layerCount</code></span> of each element of <code>pRegions</code> <strong>must</strong>
be less than or equal to the <code>arrayLayers</code> specified in
<a href="resources.html#VkImageCreateInfo" class="xref page">VkImageCreateInfo</a> when <code>dstImage</code> was created</p>
</li>
<li>
<p><a id="VUID-vkCmdBlitImage-srcImage-00240" href="#VUID-vkCmdBlitImage-srcImage-00240"></a> <span class="vuid">VUID-vkCmdBlitImage-srcImage-00240</span><br>

If either <code>srcImage</code> or <code>dstImage</code> is of type
<code>VK_IMAGE_TYPE_3D</code>, then for each element of <code>pRegions</code>,
<code>srcSubresource.baseArrayLayer</code> and
<code>dstSubresource.baseArrayLayer</code> <strong>must</strong> each be <code>0</code>, and
<code>srcSubresource.layerCount</code> and <code>dstSubresource.layerCount</code>
<strong>must</strong> each be <code>1</code></p>
</li>
<li>
<p><a id="VUID-vkCmdBlitImage-aspectMask-00241" href="#VUID-vkCmdBlitImage-aspectMask-00241"></a> <span class="vuid">VUID-vkCmdBlitImage-aspectMask-00241</span><br>

For each element of <code>pRegions</code>, <code>srcSubresource.aspectMask</code>
<strong>must</strong> specify aspects present in <code>srcImage</code></p>
</li>
<li>
<p><a id="VUID-vkCmdBlitImage-aspectMask-00242" href="#VUID-vkCmdBlitImage-aspectMask-00242"></a> <span class="vuid">VUID-vkCmdBlitImage-aspectMask-00242</span><br>

For each element of <code>pRegions</code>, <code>dstSubresource.aspectMask</code>
<strong>must</strong> specify aspects present in <code>dstImage</code></p>
</li>
<li>
<p><a id="VUID-vkCmdBlitImage-srcOffset-00243" href="#VUID-vkCmdBlitImage-srcOffset-00243"></a> <span class="vuid">VUID-vkCmdBlitImage-srcOffset-00243</span><br>

For each element of <code>pRegions</code>, <code>srcOffsets</code>[0].x and
<code>srcOffsets</code>[1].x <strong>must</strong> both be greater than or equal to <code>0</code> and
less than or equal to the width of the specified <code>srcSubresource</code> of
<code>srcImage</code></p>
</li>
<li>
<p><a id="VUID-vkCmdBlitImage-srcOffset-00244" href="#VUID-vkCmdBlitImage-srcOffset-00244"></a> <span class="vuid">VUID-vkCmdBlitImage-srcOffset-00244</span><br>

For each element of <code>pRegions</code>, <code>srcOffsets</code>[0].y and
<code>srcOffsets</code>[1].y <strong>must</strong> both be greater than or equal to <code>0</code> and
less than or equal to the height of the specified <code>srcSubresource</code>
of <code>srcImage</code></p>
</li>
<li>
<p><a id="VUID-vkCmdBlitImage-srcImage-00245" href="#VUID-vkCmdBlitImage-srcImage-00245"></a> <span class="vuid">VUID-vkCmdBlitImage-srcImage-00245</span><br>

If <code>srcImage</code> is of type <code>VK_IMAGE_TYPE_1D</code>, then for each
element of <code>pRegions</code>, <code>srcOffsets</code>[0].y <strong>must</strong> be <code>0</code> and
<code>srcOffsets</code>[1].y <strong>must</strong> be <code>1</code></p>
</li>
<li>
<p><a id="VUID-vkCmdBlitImage-srcOffset-00246" href="#VUID-vkCmdBlitImage-srcOffset-00246"></a> <span class="vuid">VUID-vkCmdBlitImage-srcOffset-00246</span><br>

For each element of <code>pRegions</code>, <code>srcOffsets</code>[0].z and
<code>srcOffsets</code>[1].z <strong>must</strong> both be greater than or equal to <code>0</code> and
less than or equal to the depth of the specified <code>srcSubresource</code> of
<code>srcImage</code></p>
</li>
<li>
<p><a id="VUID-vkCmdBlitImage-srcImage-00247" href="#VUID-vkCmdBlitImage-srcImage-00247"></a> <span class="vuid">VUID-vkCmdBlitImage-srcImage-00247</span><br>

If <code>srcImage</code> is of type <code>VK_IMAGE_TYPE_1D</code> or
<code>VK_IMAGE_TYPE_2D</code>, then for each element of <code>pRegions</code>,
<code>srcOffsets</code>[0].z <strong>must</strong> be <code>0</code> and <code>srcOffsets</code>[1].z <strong>must</strong> be
<code>1</code></p>
</li>
<li>
<p><a id="VUID-vkCmdBlitImage-dstOffset-00248" href="#VUID-vkCmdBlitImage-dstOffset-00248"></a> <span class="vuid">VUID-vkCmdBlitImage-dstOffset-00248</span><br>

For each element of <code>pRegions</code>, <code>dstOffsets</code>[0].x and
<code>dstOffsets</code>[1].x <strong>must</strong> both be greater than or equal to <code>0</code> and
less than or equal to the width of the specified <code>dstSubresource</code> of
<code>dstImage</code></p>
</li>
<li>
<p><a id="VUID-vkCmdBlitImage-dstOffset-00249" href="#VUID-vkCmdBlitImage-dstOffset-00249"></a> <span class="vuid">VUID-vkCmdBlitImage-dstOffset-00249</span><br>

For each element of <code>pRegions</code>, <code>dstOffsets</code>[0].y and
<code>dstOffsets</code>[1].y <strong>must</strong> both be greater than or equal to <code>0</code> and
less than or equal to the height of the specified <code>dstSubresource</code>
of <code>dstImage</code></p>
</li>
<li>
<p><a id="VUID-vkCmdBlitImage-dstImage-00250" href="#VUID-vkCmdBlitImage-dstImage-00250"></a> <span class="vuid">VUID-vkCmdBlitImage-dstImage-00250</span><br>

If <code>dstImage</code> is of type <code>VK_IMAGE_TYPE_1D</code>, then for each
element of <code>pRegions</code>, <code>dstOffsets</code>[0].y <strong>must</strong> be <code>0</code> and
<code>dstOffsets</code>[1].y <strong>must</strong> be <code>1</code></p>
</li>
<li>
<p><a id="VUID-vkCmdBlitImage-dstOffset-00251" href="#VUID-vkCmdBlitImage-dstOffset-00251"></a> <span class="vuid">VUID-vkCmdBlitImage-dstOffset-00251</span><br>

For each element of <code>pRegions</code>, <code>dstOffsets</code>[0].z and
<code>dstOffsets</code>[1].z <strong>must</strong> both be greater than or equal to <code>0</code> and
less than or equal to the depth of the specified <code>dstSubresource</code> of
<code>dstImage</code></p>
</li>
<li>
<p><a id="VUID-vkCmdBlitImage-dstImage-00252" href="#VUID-vkCmdBlitImage-dstImage-00252"></a> <span class="vuid">VUID-vkCmdBlitImage-dstImage-00252</span><br>

If <code>dstImage</code> is of type <code>VK_IMAGE_TYPE_1D</code> or
<code>VK_IMAGE_TYPE_2D</code>, then for each element of <code>pRegions</code>,
<code>dstOffsets</code>[0].z <strong>must</strong> be <code>0</code> and <code>dstOffsets</code>[1].z <strong>must</strong> be
<code>1</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCmdBlitImage-commandBuffer-parameter" href="#VUID-vkCmdBlitImage-commandBuffer-parameter"></a> <span class="vuid">VUID-vkCmdBlitImage-commandBuffer-parameter</span><br>
 <code>commandBuffer</code> <strong>must</strong> be a valid <a href="cmdbuffers.html#VkCommandBuffer" class="xref page">VkCommandBuffer</a> handle</p>
</li>
<li>
<p><a id="VUID-vkCmdBlitImage-srcImage-parameter" href="#VUID-vkCmdBlitImage-srcImage-parameter"></a> <span class="vuid">VUID-vkCmdBlitImage-srcImage-parameter</span><br>
 <code>srcImage</code> <strong>must</strong> be a valid <a href="resources.html#VkImage" class="xref page">VkImage</a> handle</p>
</li>
<li>
<p><a id="VUID-vkCmdBlitImage-srcImageLayout-parameter" href="#VUID-vkCmdBlitImage-srcImageLayout-parameter"></a> <span class="vuid">VUID-vkCmdBlitImage-srcImageLayout-parameter</span><br>
 <code>srcImageLayout</code> <strong>must</strong> be a valid <a href="resources.html#VkImageLayout" class="xref page">VkImageLayout</a> value</p>
</li>
<li>
<p><a id="VUID-vkCmdBlitImage-dstImage-parameter" href="#VUID-vkCmdBlitImage-dstImage-parameter"></a> <span class="vuid">VUID-vkCmdBlitImage-dstImage-parameter</span><br>
 <code>dstImage</code> <strong>must</strong> be a valid <a href="resources.html#VkImage" class="xref page">VkImage</a> handle</p>
</li>
<li>
<p><a id="VUID-vkCmdBlitImage-dstImageLayout-parameter" href="#VUID-vkCmdBlitImage-dstImageLayout-parameter"></a> <span class="vuid">VUID-vkCmdBlitImage-dstImageLayout-parameter</span><br>
 <code>dstImageLayout</code> <strong>must</strong> be a valid <a href="resources.html#VkImageLayout" class="xref page">VkImageLayout</a> value</p>
</li>
<li>
<p><a id="VUID-vkCmdBlitImage-pRegions-parameter" href="#VUID-vkCmdBlitImage-pRegions-parameter"></a> <span class="vuid">VUID-vkCmdBlitImage-pRegions-parameter</span><br>
 <code>pRegions</code> <strong>must</strong> be a valid pointer to an array of <code>regionCount</code> valid <a href="#VkImageBlit">VkImageBlit</a> structures</p>
</li>
<li>
<p><a id="VUID-vkCmdBlitImage-filter-parameter" href="#VUID-vkCmdBlitImage-filter-parameter"></a> <span class="vuid">VUID-vkCmdBlitImage-filter-parameter</span><br>
 <code>filter</code> <strong>must</strong> be a valid <a href="samplers.html#VkFilter" class="xref page">VkFilter</a> value</p>
</li>
<li>
<p><a id="VUID-vkCmdBlitImage-commandBuffer-recording" href="#VUID-vkCmdBlitImage-commandBuffer-recording"></a> <span class="vuid">VUID-vkCmdBlitImage-commandBuffer-recording</span><br>
 <code>commandBuffer</code> <strong>must</strong> be in the <a href="cmdbuffers.html#commandbuffers-lifecycle" class="xref page">recording state</a></p>
</li>
<li>
<p><a id="VUID-vkCmdBlitImage-commandBuffer-cmdpool" href="#VUID-vkCmdBlitImage-commandBuffer-cmdpool"></a> <span class="vuid">VUID-vkCmdBlitImage-commandBuffer-cmdpool</span><br>
 The <code>VkCommandPool</code> that <code>commandBuffer</code> was allocated from <strong>must</strong> support graphics operations</p>
</li>
<li>
<p><a id="VUID-vkCmdBlitImage-renderpass" href="#VUID-vkCmdBlitImage-renderpass"></a> <span class="vuid">VUID-vkCmdBlitImage-renderpass</span><br>
 This command <strong>must</strong> only be called outside of a render pass instance</p>
</li>
<li>
<p><a id="VUID-vkCmdBlitImage-regionCount-arraylength" href="#VUID-vkCmdBlitImage-regionCount-arraylength"></a> <span class="vuid">VUID-vkCmdBlitImage-regionCount-arraylength</span><br>
 <code>regionCount</code> <strong>must</strong> be greater than <code>0</code></p>
</li>
<li>
<p><a id="VUID-vkCmdBlitImage-commonparent" href="#VUID-vkCmdBlitImage-commonparent"></a> <span class="vuid">VUID-vkCmdBlitImage-commonparent</span><br>
 Each of <code>commandBuffer</code>, <code>dstImage</code>, and <code>srcImage</code> <strong>must</strong> have been created, allocated, or retrieved from the same <a href="devsandqueues.html#VkDevice" class="xref page">VkDevice</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Host Synchronization</div>
<div class="ulist">
<ul>
<li>
<p>Host access to <code>commandBuffer</code> <strong>must</strong> be externally synchronized</p>
</li>
<li>
<p>Host access to the <code>VkCommandPool</code> that <code>commandBuffer</code> was allocated from <strong>must</strong> be externally synchronized</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Command Properties</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><a href="cmdbuffers.html#VkCommandBufferLevel" class="xref page">Command Buffer Levels</a></th>
<th class="tableblock halign-left valign-top"><a href="renderpass.html#vkCmdBeginRenderPass" class="xref page">Render Pass Scope</a></th>
<th class="tableblock halign-left valign-top"><a href="devsandqueues.html#VkQueueFlagBits" class="xref page">Supported Queue Types</a></th>
<th class="tableblock halign-left valign-top"><a href="fundamentals.html#fundamentals-queueoperation-command-types" class="xref page">Command Type</a></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Primary<br>
Secondary</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Outside</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Graphics</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Action</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>VkImageBlit</code> structure is defined as:</p>
</div>
<div id="VkImageBlit" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_VERSION_1_0
typedef struct VkImageBlit {
    VkImageSubresourceLayers    srcSubresource;
    VkOffset3D                  srcOffsets[2];
    VkImageSubresourceLayers    dstSubresource;
    VkOffset3D                  dstOffsets[2];
} VkImageBlit;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>srcSubresource</code> is the subresource to blit from.</p>
</li>
<li>
<p><code>srcOffsets</code> is a pointer to an array of two <a href="fundamentals.html#VkOffset3D" class="xref page">VkOffset3D</a>
structures specifying the bounds of the source region within
<code>srcSubresource</code>.</p>
</li>
<li>
<p><code>dstSubresource</code> is the subresource to blit into.</p>
</li>
<li>
<p><code>dstOffsets</code> is a pointer to an array of two <a href="fundamentals.html#VkOffset3D" class="xref page">VkOffset3D</a>
structures specifying the bounds of the destination region within
<code>dstSubresource</code>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>For each element of the <code>pRegions</code> array, a blit operation is performed
for the specified source and destination regions.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkImageBlit-aspectMask-00238" href="#VUID-VkImageBlit-aspectMask-00238"></a> <span class="vuid">VUID-VkImageBlit-aspectMask-00238</span><br>

The <code>aspectMask</code> member of <code>srcSubresource</code> and
<code>dstSubresource</code> <strong>must</strong> match</p>
</li>
<li>
<p><a id="VUID-VkImageBlit-layerCount-08800" href="#VUID-VkImageBlit-layerCount-08800"></a> <span class="vuid">VUID-VkImageBlit-layerCount-08800</span><br>

The
    <code>layerCount</code> members of <code>srcSubresource</code> or <code>dstSubresource</code>
    <strong>must</strong> match</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkImageBlit-srcSubresource-parameter" href="#VUID-VkImageBlit-srcSubresource-parameter"></a> <span class="vuid">VUID-VkImageBlit-srcSubresource-parameter</span><br>
 <code>srcSubresource</code> <strong>must</strong> be a valid <a href="#VkImageSubresourceLayers">VkImageSubresourceLayers</a> structure</p>
</li>
<li>
<p><a id="VUID-VkImageBlit-dstSubresource-parameter" href="#VUID-VkImageBlit-dstSubresource-parameter"></a> <span class="vuid">VUID-VkImageBlit-dstSubresource-parameter</span><br>
 <code>dstSubresource</code> <strong>must</strong> be a valid <a href="#VkImageSubresourceLayers">VkImageSubresourceLayers</a> structure</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>A more extensible version of the blit image command is defined below.</p>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>To copy regions of a source image into a destination image, potentially
performing format conversion, arbitrary scaling, and filtering, call:</p>
</div>
<div id="vkCmdBlitImage2" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_VERSION_1_3
void vkCmdBlitImage2(
    VkCommandBuffer                             commandBuffer,
    const VkBlitImageInfo2*                     pBlitImageInfo);</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>commandBuffer</code> is the command buffer into which the command will be
recorded.</p>
</li>
<li>
<p><code>pBlitImageInfo</code> is a pointer to a <a href="#VkBlitImageInfo2">VkBlitImageInfo2</a> structure
describing the blit parameters.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>This command is functionally identical to <a href="#vkCmdBlitImage">vkCmdBlitImage</a>, but includes
extensible sub-structures that include <code>sType</code> and <code>pNext</code>
parameters, allowing them to be more easily extended.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCmdBlitImage2-commandBuffer-01834" href="#VUID-vkCmdBlitImage2-commandBuffer-01834"></a> <span class="vuid">VUID-vkCmdBlitImage2-commandBuffer-01834</span><br>

If <code>commandBuffer</code> is an unprotected command buffer and
<a href="devsandqueues.html#limits-protectedNoFault" class="xref page"><code>protectedNoFault</code></a> is not supported,
<code>srcImage</code> <strong>must</strong> not be a protected image</p>
</li>
<li>
<p><a id="VUID-vkCmdBlitImage2-commandBuffer-01835" href="#VUID-vkCmdBlitImage2-commandBuffer-01835"></a> <span class="vuid">VUID-vkCmdBlitImage2-commandBuffer-01835</span><br>

If <code>commandBuffer</code> is an unprotected command buffer and
<a href="devsandqueues.html#limits-protectedNoFault" class="xref page"><code>protectedNoFault</code></a> is not supported,
<code>dstImage</code> <strong>must</strong> not be a protected image</p>
</li>
<li>
<p><a id="VUID-vkCmdBlitImage2-commandBuffer-01836" href="#VUID-vkCmdBlitImage2-commandBuffer-01836"></a> <span class="vuid">VUID-vkCmdBlitImage2-commandBuffer-01836</span><br>

If <code>commandBuffer</code> is a protected command buffer and
<a href="devsandqueues.html#limits-protectedNoFault" class="xref page"><code>protectedNoFault</code></a> is not supported,
<code>dstImage</code> <strong>must</strong> not be an unprotected image</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCmdBlitImage2-commandBuffer-parameter" href="#VUID-vkCmdBlitImage2-commandBuffer-parameter"></a> <span class="vuid">VUID-vkCmdBlitImage2-commandBuffer-parameter</span><br>
 <code>commandBuffer</code> <strong>must</strong> be a valid <a href="cmdbuffers.html#VkCommandBuffer" class="xref page">VkCommandBuffer</a> handle</p>
</li>
<li>
<p><a id="VUID-vkCmdBlitImage2-pBlitImageInfo-parameter" href="#VUID-vkCmdBlitImage2-pBlitImageInfo-parameter"></a> <span class="vuid">VUID-vkCmdBlitImage2-pBlitImageInfo-parameter</span><br>
 <code>pBlitImageInfo</code> <strong>must</strong> be a valid pointer to a valid <a href="#VkBlitImageInfo2">VkBlitImageInfo2</a> structure</p>
</li>
<li>
<p><a id="VUID-vkCmdBlitImage2-commandBuffer-recording" href="#VUID-vkCmdBlitImage2-commandBuffer-recording"></a> <span class="vuid">VUID-vkCmdBlitImage2-commandBuffer-recording</span><br>
 <code>commandBuffer</code> <strong>must</strong> be in the <a href="cmdbuffers.html#commandbuffers-lifecycle" class="xref page">recording state</a></p>
</li>
<li>
<p><a id="VUID-vkCmdBlitImage2-commandBuffer-cmdpool" href="#VUID-vkCmdBlitImage2-commandBuffer-cmdpool"></a> <span class="vuid">VUID-vkCmdBlitImage2-commandBuffer-cmdpool</span><br>
 The <code>VkCommandPool</code> that <code>commandBuffer</code> was allocated from <strong>must</strong> support graphics operations</p>
</li>
<li>
<p><a id="VUID-vkCmdBlitImage2-renderpass" href="#VUID-vkCmdBlitImage2-renderpass"></a> <span class="vuid">VUID-vkCmdBlitImage2-renderpass</span><br>
 This command <strong>must</strong> only be called outside of a render pass instance</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Host Synchronization</div>
<div class="ulist">
<ul>
<li>
<p>Host access to <code>commandBuffer</code> <strong>must</strong> be externally synchronized</p>
</li>
<li>
<p>Host access to the <code>VkCommandPool</code> that <code>commandBuffer</code> was allocated from <strong>must</strong> be externally synchronized</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Command Properties</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><a href="cmdbuffers.html#VkCommandBufferLevel" class="xref page">Command Buffer Levels</a></th>
<th class="tableblock halign-left valign-top"><a href="renderpass.html#vkCmdBeginRenderPass" class="xref page">Render Pass Scope</a></th>
<th class="tableblock halign-left valign-top"><a href="devsandqueues.html#VkQueueFlagBits" class="xref page">Supported Queue Types</a></th>
<th class="tableblock halign-left valign-top"><a href="fundamentals.html#fundamentals-queueoperation-command-types" class="xref page">Command Type</a></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Primary<br>
Secondary</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Outside</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Graphics</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Action</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>VkBlitImageInfo2</code> structure is defined as:</p>
</div>
<div id="VkBlitImageInfo2" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_VERSION_1_3
typedef struct VkBlitImageInfo2 {
    VkStructureType        sType;
    const void*            pNext;
    VkImage                srcImage;
    VkImageLayout          srcImageLayout;
    VkImage                dstImage;
    VkImageLayout          dstImageLayout;
    uint32_t               regionCount;
    const VkImageBlit2*    pRegions;
    VkFilter               filter;
} VkBlitImageInfo2;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is a <a href="fundamentals.html#VkStructureType" class="xref page">VkStructureType</a> value identifying this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>srcImage</code> is the source image.</p>
</li>
<li>
<p><code>srcImageLayout</code> is the layout of the source image subresources for
the blit.</p>
</li>
<li>
<p><code>dstImage</code> is the destination image.</p>
</li>
<li>
<p><code>dstImageLayout</code> is the layout of the destination image subresources
for the blit.</p>
</li>
<li>
<p><code>regionCount</code> is the number of regions to blit.</p>
</li>
<li>
<p><code>pRegions</code> is a pointer to an array of <a href="#VkImageBlit2">VkImageBlit2</a> structures
specifying the regions to blit.</p>
</li>
<li>
<p><code>filter</code> is a <a href="samplers.html#VkFilter" class="xref page">VkFilter</a> specifying the filter to apply if the
blits require scaling.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkBlitImageInfo2-pRegions-00215" href="#VUID-VkBlitImageInfo2-pRegions-00215"></a> <span class="vuid">VUID-VkBlitImageInfo2-pRegions-00215</span><br>

The source region specified by each element of <code>pRegions</code> <strong>must</strong> be a
region that is contained within <code>srcImage</code></p>
</li>
<li>
<p><a id="VUID-VkBlitImageInfo2-pRegions-00216" href="#VUID-VkBlitImageInfo2-pRegions-00216"></a> <span class="vuid">VUID-VkBlitImageInfo2-pRegions-00216</span><br>

The destination region specified by each element of <code>pRegions</code> <strong>must</strong>
be a region that is contained within <code>dstImage</code></p>
</li>
<li>
<p><a id="VUID-VkBlitImageInfo2-pRegions-00217" href="#VUID-VkBlitImageInfo2-pRegions-00217"></a> <span class="vuid">VUID-VkBlitImageInfo2-pRegions-00217</span><br>

The union of all destination regions, specified by the elements of
<code>pRegions</code>, <strong>must</strong> not overlap in memory with any texel that <strong>may</strong> be
sampled during the blit operation</p>
</li>
<li>
<p><a id="VUID-VkBlitImageInfo2-srcImage-01999" href="#VUID-VkBlitImageInfo2-srcImage-01999"></a> <span class="vuid">VUID-VkBlitImageInfo2-srcImage-01999</span><br>

The <a href="resources.html#resources-image-format-features" class="xref page">format features</a> of
<code>srcImage</code> <strong>must</strong> contain <code>VK_FORMAT_FEATURE_BLIT_SRC_BIT</code></p>
</li>
<li>
<p><a id="VUID-VkBlitImageInfo2-srcImage-06421" href="#VUID-VkBlitImageInfo2-srcImage-06421"></a> <span class="vuid">VUID-VkBlitImageInfo2-srcImage-06421</span><br>

<code>srcImage</code> <strong>must</strong> not use a
<a href="formats.html#formats-requiring-sampler-ycbcr-conversion" class="xref page">format that requires a    sampler Y′C<sub>B</sub>C<sub>R</sub> conversion</a></p>
</li>
<li>
<p><a id="VUID-VkBlitImageInfo2-srcImage-00219" href="#VUID-VkBlitImageInfo2-srcImage-00219"></a> <span class="vuid">VUID-VkBlitImageInfo2-srcImage-00219</span><br>

<code>srcImage</code> <strong>must</strong> have been created with
<code>VK_IMAGE_USAGE_TRANSFER_SRC_BIT</code> usage flag</p>
</li>
<li>
<p><a id="VUID-VkBlitImageInfo2-srcImage-00220" href="#VUID-VkBlitImageInfo2-srcImage-00220"></a> <span class="vuid">VUID-VkBlitImageInfo2-srcImage-00220</span><br>

If <code>srcImage</code> is non-sparse then it <strong>must</strong> be bound completely and
contiguously to a single <code>VkDeviceMemory</code> object</p>
</li>
<li>
<p><a id="VUID-VkBlitImageInfo2-srcImageLayout-00221" href="#VUID-VkBlitImageInfo2-srcImageLayout-00221"></a> <span class="vuid">VUID-VkBlitImageInfo2-srcImageLayout-00221</span><br>

<code>srcImageLayout</code> <strong>must</strong> specify the layout of the image subresources
of <code>srcImage</code> specified in <code>pRegions</code> at the time this command
is executed on a <code>VkDevice</code></p>
</li>
<li>
<p><a id="VUID-VkBlitImageInfo2-srcImageLayout-00222" href="#VUID-VkBlitImageInfo2-srcImageLayout-00222"></a> <span class="vuid">VUID-VkBlitImageInfo2-srcImageLayout-00222</span><br>

<code>srcImageLayout</code> <strong>must</strong> be <code>VK_IMAGE_LAYOUT_TRANSFER_SRC_OPTIMAL</code>
or <code>VK_IMAGE_LAYOUT_GENERAL</code></p>
</li>
<li>
<p><a id="VUID-VkBlitImageInfo2-srcImage-09459" href="#VUID-VkBlitImageInfo2-srcImage-09459"></a> <span class="vuid">VUID-VkBlitImageInfo2-srcImage-09459</span><br>

If <code>srcImage</code> and <code>dstImage</code> are the same, and an elements of
<code>pRegions</code> contains the <code>srcSubresource</code> and
<code>dstSubresource</code> with matching <code>mipLevel</code> and overlapping array
layers, then the <code>srcImageLayout</code> and <code>dstImageLayout</code> <strong>must</strong> be
<code>VK_IMAGE_LAYOUT_GENERAL</code></p>
</li>
<li>
<p><a id="VUID-VkBlitImageInfo2-dstImage-02000" href="#VUID-VkBlitImageInfo2-dstImage-02000"></a> <span class="vuid">VUID-VkBlitImageInfo2-dstImage-02000</span><br>

The <a href="resources.html#resources-image-format-features" class="xref page">format features</a> of
<code>dstImage</code> <strong>must</strong> contain <code>VK_FORMAT_FEATURE_BLIT_DST_BIT</code></p>
</li>
<li>
<p><a id="VUID-VkBlitImageInfo2-dstImage-06422" href="#VUID-VkBlitImageInfo2-dstImage-06422"></a> <span class="vuid">VUID-VkBlitImageInfo2-dstImage-06422</span><br>

<code>dstImage</code> <strong>must</strong> not use a
<a href="formats.html#formats-requiring-sampler-ycbcr-conversion" class="xref page">format that requires a    sampler Y′C<sub>B</sub>C<sub>R</sub> conversion</a></p>
</li>
<li>
<p><a id="VUID-VkBlitImageInfo2-dstImage-00224" href="#VUID-VkBlitImageInfo2-dstImage-00224"></a> <span class="vuid">VUID-VkBlitImageInfo2-dstImage-00224</span><br>

<code>dstImage</code> <strong>must</strong> have been created with
<code>VK_IMAGE_USAGE_TRANSFER_DST_BIT</code> usage flag</p>
</li>
<li>
<p><a id="VUID-VkBlitImageInfo2-dstImage-00225" href="#VUID-VkBlitImageInfo2-dstImage-00225"></a> <span class="vuid">VUID-VkBlitImageInfo2-dstImage-00225</span><br>

If <code>dstImage</code> is non-sparse then it <strong>must</strong> be bound completely and
contiguously to a single <code>VkDeviceMemory</code> object</p>
</li>
<li>
<p><a id="VUID-VkBlitImageInfo2-dstImageLayout-00226" href="#VUID-VkBlitImageInfo2-dstImageLayout-00226"></a> <span class="vuid">VUID-VkBlitImageInfo2-dstImageLayout-00226</span><br>

<code>dstImageLayout</code> <strong>must</strong> specify the layout of the image subresources
of <code>dstImage</code> specified in <code>pRegions</code> at the time this command
is executed on a <code>VkDevice</code></p>
</li>
<li>
<p><a id="VUID-VkBlitImageInfo2-dstImageLayout-00227" href="#VUID-VkBlitImageInfo2-dstImageLayout-00227"></a> <span class="vuid">VUID-VkBlitImageInfo2-dstImageLayout-00227</span><br>

<code>dstImageLayout</code> <strong>must</strong> be <code>VK_IMAGE_LAYOUT_TRANSFER_DST_OPTIMAL</code>
or <code>VK_IMAGE_LAYOUT_GENERAL</code></p>
</li>
<li>
<p><a id="VUID-VkBlitImageInfo2-srcImage-00229" href="#VUID-VkBlitImageInfo2-srcImage-00229"></a> <span class="vuid">VUID-VkBlitImageInfo2-srcImage-00229</span><br>

If either of <code>srcImage</code> or <code>dstImage</code> was created with a signed
integer <a href="formats.html#VkFormat" class="xref page">VkFormat</a>, the other <strong>must</strong> also have been created with a
signed integer <a href="formats.html#VkFormat" class="xref page">VkFormat</a></p>
</li>
<li>
<p><a id="VUID-VkBlitImageInfo2-srcImage-00230" href="#VUID-VkBlitImageInfo2-srcImage-00230"></a> <span class="vuid">VUID-VkBlitImageInfo2-srcImage-00230</span><br>

If either of <code>srcImage</code> or <code>dstImage</code> was created with an
unsigned integer <a href="formats.html#VkFormat" class="xref page">VkFormat</a>, the other <strong>must</strong> also have been created
with an unsigned integer <a href="formats.html#VkFormat" class="xref page">VkFormat</a></p>
</li>
<li>
<p><a id="VUID-VkBlitImageInfo2-srcImage-00231" href="#VUID-VkBlitImageInfo2-srcImage-00231"></a> <span class="vuid">VUID-VkBlitImageInfo2-srcImage-00231</span><br>

If either of <code>srcImage</code> or <code>dstImage</code> was created with a
depth/stencil format, the other <strong>must</strong> have exactly the same format</p>
</li>
<li>
<p><a id="VUID-VkBlitImageInfo2-srcImage-00232" href="#VUID-VkBlitImageInfo2-srcImage-00232"></a> <span class="vuid">VUID-VkBlitImageInfo2-srcImage-00232</span><br>

If <code>srcImage</code> was created with a depth/stencil format, <code>filter</code>
<strong>must</strong> be <code>VK_FILTER_NEAREST</code></p>
</li>
<li>
<p><a id="VUID-VkBlitImageInfo2-srcImage-00233" href="#VUID-VkBlitImageInfo2-srcImage-00233"></a> <span class="vuid">VUID-VkBlitImageInfo2-srcImage-00233</span><br>

<code>srcImage</code> <strong>must</strong> have been created with a <code>samples</code> value of
<code>VK_SAMPLE_COUNT_1_BIT</code></p>
</li>
<li>
<p><a id="VUID-VkBlitImageInfo2-dstImage-00234" href="#VUID-VkBlitImageInfo2-dstImage-00234"></a> <span class="vuid">VUID-VkBlitImageInfo2-dstImage-00234</span><br>

<code>dstImage</code> <strong>must</strong> have been created with a <code>samples</code> value of
<code>VK_SAMPLE_COUNT_1_BIT</code></p>
</li>
<li>
<p><a id="VUID-VkBlitImageInfo2-filter-02001" href="#VUID-VkBlitImageInfo2-filter-02001"></a> <span class="vuid">VUID-VkBlitImageInfo2-filter-02001</span><br>

If <code>filter</code> is <code>VK_FILTER_LINEAR</code>, then the
<a href="resources.html#resources-image-format-features" class="xref page">format features</a> of <code>srcImage</code>
<strong>must</strong> contain <code>VK_FORMAT_FEATURE_SAMPLED_IMAGE_FILTER_LINEAR_BIT</code></p>
</li>
<li>
<p><a id="VUID-VkBlitImageInfo2-srcSubresource-01705" href="#VUID-VkBlitImageInfo2-srcSubresource-01705"></a> <span class="vuid">VUID-VkBlitImageInfo2-srcSubresource-01705</span><br>

The <code>srcSubresource.mipLevel</code> member of each element of
<code>pRegions</code> <strong>must</strong> be less than the <code>mipLevels</code> specified in
<a href="resources.html#VkImageCreateInfo" class="xref page">VkImageCreateInfo</a> when <code>srcImage</code> was created</p>
</li>
<li>
<p><a id="VUID-VkBlitImageInfo2-dstSubresource-01706" href="#VUID-VkBlitImageInfo2-dstSubresource-01706"></a> <span class="vuid">VUID-VkBlitImageInfo2-dstSubresource-01706</span><br>

The <code>dstSubresource.mipLevel</code> member of each element of
<code>pRegions</code> <strong>must</strong> be less than the <code>mipLevels</code> specified in
<a href="resources.html#VkImageCreateInfo" class="xref page">VkImageCreateInfo</a> when <code>dstImage</code> was created</p>
</li>
<li>
<p><a id="VUID-VkBlitImageInfo2-srcSubresource-01707" href="#VUID-VkBlitImageInfo2-srcSubresource-01707"></a> <span class="vuid">VUID-VkBlitImageInfo2-srcSubresource-01707</span><br>

<span class="eq"><code>srcSubresource.baseArrayLayer</code> + 
<code>srcSubresource.layerCount</code></span> of each element of <code>pRegions</code> <strong>must</strong>
be less than or equal to the <code>arrayLayers</code> specified in
<a href="resources.html#VkImageCreateInfo" class="xref page">VkImageCreateInfo</a> when <code>srcImage</code> was created</p>
</li>
<li>
<p><a id="VUID-VkBlitImageInfo2-dstSubresource-01708" href="#VUID-VkBlitImageInfo2-dstSubresource-01708"></a> <span class="vuid">VUID-VkBlitImageInfo2-dstSubresource-01708</span><br>

<span class="eq"><code>dstSubresource.baseArrayLayer</code> + 
<code>dstSubresource.layerCount</code></span> of each element of <code>pRegions</code> <strong>must</strong>
be less than or equal to the <code>arrayLayers</code> specified in
<a href="resources.html#VkImageCreateInfo" class="xref page">VkImageCreateInfo</a> when <code>dstImage</code> was created</p>
</li>
<li>
<p><a id="VUID-VkBlitImageInfo2-srcImage-00240" href="#VUID-VkBlitImageInfo2-srcImage-00240"></a> <span class="vuid">VUID-VkBlitImageInfo2-srcImage-00240</span><br>

If either <code>srcImage</code> or <code>dstImage</code> is of type
<code>VK_IMAGE_TYPE_3D</code>, then for each element of <code>pRegions</code>,
<code>srcSubresource.baseArrayLayer</code> and
<code>dstSubresource.baseArrayLayer</code> <strong>must</strong> each be <code>0</code>, and
<code>srcSubresource.layerCount</code> and <code>dstSubresource.layerCount</code>
<strong>must</strong> each be <code>1</code></p>
</li>
<li>
<p><a id="VUID-VkBlitImageInfo2-aspectMask-00241" href="#VUID-VkBlitImageInfo2-aspectMask-00241"></a> <span class="vuid">VUID-VkBlitImageInfo2-aspectMask-00241</span><br>

For each element of <code>pRegions</code>, <code>srcSubresource.aspectMask</code>
<strong>must</strong> specify aspects present in <code>srcImage</code></p>
</li>
<li>
<p><a id="VUID-VkBlitImageInfo2-aspectMask-00242" href="#VUID-VkBlitImageInfo2-aspectMask-00242"></a> <span class="vuid">VUID-VkBlitImageInfo2-aspectMask-00242</span><br>

For each element of <code>pRegions</code>, <code>dstSubresource.aspectMask</code>
<strong>must</strong> specify aspects present in <code>dstImage</code></p>
</li>
<li>
<p><a id="VUID-VkBlitImageInfo2-srcOffset-00243" href="#VUID-VkBlitImageInfo2-srcOffset-00243"></a> <span class="vuid">VUID-VkBlitImageInfo2-srcOffset-00243</span><br>

For each element of <code>pRegions</code>, <code>srcOffsets</code>[0].x and
<code>srcOffsets</code>[1].x <strong>must</strong> both be greater than or equal to <code>0</code> and
less than or equal to the width of the specified <code>srcSubresource</code> of
<code>srcImage</code></p>
</li>
<li>
<p><a id="VUID-VkBlitImageInfo2-srcOffset-00244" href="#VUID-VkBlitImageInfo2-srcOffset-00244"></a> <span class="vuid">VUID-VkBlitImageInfo2-srcOffset-00244</span><br>

For each element of <code>pRegions</code>, <code>srcOffsets</code>[0].y and
<code>srcOffsets</code>[1].y <strong>must</strong> both be greater than or equal to <code>0</code> and
less than or equal to the height of the specified <code>srcSubresource</code>
of <code>srcImage</code></p>
</li>
<li>
<p><a id="VUID-VkBlitImageInfo2-srcImage-00245" href="#VUID-VkBlitImageInfo2-srcImage-00245"></a> <span class="vuid">VUID-VkBlitImageInfo2-srcImage-00245</span><br>

If <code>srcImage</code> is of type <code>VK_IMAGE_TYPE_1D</code>, then for each
element of <code>pRegions</code>, <code>srcOffsets</code>[0].y <strong>must</strong> be <code>0</code> and
<code>srcOffsets</code>[1].y <strong>must</strong> be <code>1</code></p>
</li>
<li>
<p><a id="VUID-VkBlitImageInfo2-srcOffset-00246" href="#VUID-VkBlitImageInfo2-srcOffset-00246"></a> <span class="vuid">VUID-VkBlitImageInfo2-srcOffset-00246</span><br>

For each element of <code>pRegions</code>, <code>srcOffsets</code>[0].z and
<code>srcOffsets</code>[1].z <strong>must</strong> both be greater than or equal to <code>0</code> and
less than or equal to the depth of the specified <code>srcSubresource</code> of
<code>srcImage</code></p>
</li>
<li>
<p><a id="VUID-VkBlitImageInfo2-srcImage-00247" href="#VUID-VkBlitImageInfo2-srcImage-00247"></a> <span class="vuid">VUID-VkBlitImageInfo2-srcImage-00247</span><br>

If <code>srcImage</code> is of type <code>VK_IMAGE_TYPE_1D</code> or
<code>VK_IMAGE_TYPE_2D</code>, then for each element of <code>pRegions</code>,
<code>srcOffsets</code>[0].z <strong>must</strong> be <code>0</code> and <code>srcOffsets</code>[1].z <strong>must</strong> be
<code>1</code></p>
</li>
<li>
<p><a id="VUID-VkBlitImageInfo2-dstOffset-00248" href="#VUID-VkBlitImageInfo2-dstOffset-00248"></a> <span class="vuid">VUID-VkBlitImageInfo2-dstOffset-00248</span><br>

For each element of <code>pRegions</code>, <code>dstOffsets</code>[0].x and
<code>dstOffsets</code>[1].x <strong>must</strong> both be greater than or equal to <code>0</code> and
less than or equal to the width of the specified <code>dstSubresource</code> of
<code>dstImage</code></p>
</li>
<li>
<p><a id="VUID-VkBlitImageInfo2-dstOffset-00249" href="#VUID-VkBlitImageInfo2-dstOffset-00249"></a> <span class="vuid">VUID-VkBlitImageInfo2-dstOffset-00249</span><br>

For each element of <code>pRegions</code>, <code>dstOffsets</code>[0].y and
<code>dstOffsets</code>[1].y <strong>must</strong> both be greater than or equal to <code>0</code> and
less than or equal to the height of the specified <code>dstSubresource</code>
of <code>dstImage</code></p>
</li>
<li>
<p><a id="VUID-VkBlitImageInfo2-dstImage-00250" href="#VUID-VkBlitImageInfo2-dstImage-00250"></a> <span class="vuid">VUID-VkBlitImageInfo2-dstImage-00250</span><br>

If <code>dstImage</code> is of type <code>VK_IMAGE_TYPE_1D</code>, then for each
element of <code>pRegions</code>, <code>dstOffsets</code>[0].y <strong>must</strong> be <code>0</code> and
<code>dstOffsets</code>[1].y <strong>must</strong> be <code>1</code></p>
</li>
<li>
<p><a id="VUID-VkBlitImageInfo2-dstOffset-00251" href="#VUID-VkBlitImageInfo2-dstOffset-00251"></a> <span class="vuid">VUID-VkBlitImageInfo2-dstOffset-00251</span><br>

For each element of <code>pRegions</code>, <code>dstOffsets</code>[0].z and
<code>dstOffsets</code>[1].z <strong>must</strong> both be greater than or equal to <code>0</code> and
less than or equal to the depth of the specified <code>dstSubresource</code> of
<code>dstImage</code></p>
</li>
<li>
<p><a id="VUID-VkBlitImageInfo2-dstImage-00252" href="#VUID-VkBlitImageInfo2-dstImage-00252"></a> <span class="vuid">VUID-VkBlitImageInfo2-dstImage-00252</span><br>

If <code>dstImage</code> is of type <code>VK_IMAGE_TYPE_1D</code> or
<code>VK_IMAGE_TYPE_2D</code>, then for each element of <code>pRegions</code>,
<code>dstOffsets</code>[0].z <strong>must</strong> be <code>0</code> and <code>dstOffsets</code>[1].z <strong>must</strong> be
<code>1</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkBlitImageInfo2-sType-sType" href="#VUID-VkBlitImageInfo2-sType-sType"></a> <span class="vuid">VUID-VkBlitImageInfo2-sType-sType</span><br>
 <code>sType</code> <strong>must</strong> be <code>VK_STRUCTURE_TYPE_BLIT_IMAGE_INFO_2</code></p>
</li>
<li>
<p><a id="VUID-VkBlitImageInfo2-pNext-pNext" href="#VUID-VkBlitImageInfo2-pNext-pNext"></a> <span class="vuid">VUID-VkBlitImageInfo2-pNext-pNext</span><br>
 <code>pNext</code> <strong>must</strong> be <code>NULL</code></p>
</li>
<li>
<p><a id="VUID-VkBlitImageInfo2-srcImage-parameter" href="#VUID-VkBlitImageInfo2-srcImage-parameter"></a> <span class="vuid">VUID-VkBlitImageInfo2-srcImage-parameter</span><br>
 <code>srcImage</code> <strong>must</strong> be a valid <a href="resources.html#VkImage" class="xref page">VkImage</a> handle</p>
</li>
<li>
<p><a id="VUID-VkBlitImageInfo2-srcImageLayout-parameter" href="#VUID-VkBlitImageInfo2-srcImageLayout-parameter"></a> <span class="vuid">VUID-VkBlitImageInfo2-srcImageLayout-parameter</span><br>
 <code>srcImageLayout</code> <strong>must</strong> be a valid <a href="resources.html#VkImageLayout" class="xref page">VkImageLayout</a> value</p>
</li>
<li>
<p><a id="VUID-VkBlitImageInfo2-dstImage-parameter" href="#VUID-VkBlitImageInfo2-dstImage-parameter"></a> <span class="vuid">VUID-VkBlitImageInfo2-dstImage-parameter</span><br>
 <code>dstImage</code> <strong>must</strong> be a valid <a href="resources.html#VkImage" class="xref page">VkImage</a> handle</p>
</li>
<li>
<p><a id="VUID-VkBlitImageInfo2-dstImageLayout-parameter" href="#VUID-VkBlitImageInfo2-dstImageLayout-parameter"></a> <span class="vuid">VUID-VkBlitImageInfo2-dstImageLayout-parameter</span><br>
 <code>dstImageLayout</code> <strong>must</strong> be a valid <a href="resources.html#VkImageLayout" class="xref page">VkImageLayout</a> value</p>
</li>
<li>
<p><a id="VUID-VkBlitImageInfo2-pRegions-parameter" href="#VUID-VkBlitImageInfo2-pRegions-parameter"></a> <span class="vuid">VUID-VkBlitImageInfo2-pRegions-parameter</span><br>
 <code>pRegions</code> <strong>must</strong> be a valid pointer to an array of <code>regionCount</code> valid <a href="#VkImageBlit2">VkImageBlit2</a> structures</p>
</li>
<li>
<p><a id="VUID-VkBlitImageInfo2-filter-parameter" href="#VUID-VkBlitImageInfo2-filter-parameter"></a> <span class="vuid">VUID-VkBlitImageInfo2-filter-parameter</span><br>
 <code>filter</code> <strong>must</strong> be a valid <a href="samplers.html#VkFilter" class="xref page">VkFilter</a> value</p>
</li>
<li>
<p><a id="VUID-VkBlitImageInfo2-regionCount-arraylength" href="#VUID-VkBlitImageInfo2-regionCount-arraylength"></a> <span class="vuid">VUID-VkBlitImageInfo2-regionCount-arraylength</span><br>
 <code>regionCount</code> <strong>must</strong> be greater than <code>0</code></p>
</li>
<li>
<p><a id="VUID-VkBlitImageInfo2-commonparent" href="#VUID-VkBlitImageInfo2-commonparent"></a> <span class="vuid">VUID-VkBlitImageInfo2-commonparent</span><br>
 Both of <code>dstImage</code>, and <code>srcImage</code> <strong>must</strong> have been created, allocated, or retrieved from the same <a href="devsandqueues.html#VkDevice" class="xref page">VkDevice</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>VkImageBlit2</code> structure is defined as:</p>
</div>
<div id="VkImageBlit2" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_VERSION_1_3
typedef struct VkImageBlit2 {
    VkStructureType             sType;
    const void*                 pNext;
    VkImageSubresourceLayers    srcSubresource;
    VkOffset3D                  srcOffsets[2];
    VkImageSubresourceLayers    dstSubresource;
    VkOffset3D                  dstOffsets[2];
} VkImageBlit2;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is a <a href="fundamentals.html#VkStructureType" class="xref page">VkStructureType</a> value identifying this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>srcSubresource</code> is the subresource to blit from.</p>
</li>
<li>
<p><code>srcOffsets</code> is a pointer to an array of two <a href="fundamentals.html#VkOffset3D" class="xref page">VkOffset3D</a>
structures specifying the bounds of the source region within
<code>srcSubresource</code>.</p>
</li>
<li>
<p><code>dstSubresource</code> is the subresource to blit into.</p>
</li>
<li>
<p><code>dstOffsets</code> is a pointer to an array of two <a href="fundamentals.html#VkOffset3D" class="xref page">VkOffset3D</a>
structures specifying the bounds of the destination region within
<code>dstSubresource</code>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>For each element of the <code>pRegions</code> array, a blit operation is performed
for the specified source and destination regions.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkImageBlit2-aspectMask-00238" href="#VUID-VkImageBlit2-aspectMask-00238"></a> <span class="vuid">VUID-VkImageBlit2-aspectMask-00238</span><br>

The <code>aspectMask</code> member of <code>srcSubresource</code> and
<code>dstSubresource</code> <strong>must</strong> match</p>
</li>
<li>
<p><a id="VUID-VkImageBlit2-layerCount-08800" href="#VUID-VkImageBlit2-layerCount-08800"></a> <span class="vuid">VUID-VkImageBlit2-layerCount-08800</span><br>

The
    <code>layerCount</code> members of <code>srcSubresource</code> or <code>dstSubresource</code>
    <strong>must</strong> match</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkImageBlit2-sType-sType" href="#VUID-VkImageBlit2-sType-sType"></a> <span class="vuid">VUID-VkImageBlit2-sType-sType</span><br>
 <code>sType</code> <strong>must</strong> be <code>VK_STRUCTURE_TYPE_IMAGE_BLIT_2</code></p>
</li>
<li>
<p><a id="VUID-VkImageBlit2-pNext-pNext" href="#VUID-VkImageBlit2-pNext-pNext"></a> <span class="vuid">VUID-VkImageBlit2-pNext-pNext</span><br>
 <code>pNext</code> <strong>must</strong> be <code>NULL</code></p>
</li>
<li>
<p><a id="VUID-VkImageBlit2-srcSubresource-parameter" href="#VUID-VkImageBlit2-srcSubresource-parameter"></a> <span class="vuid">VUID-VkImageBlit2-srcSubresource-parameter</span><br>
 <code>srcSubresource</code> <strong>must</strong> be a valid <a href="#VkImageSubresourceLayers">VkImageSubresourceLayers</a> structure</p>
</li>
<li>
<p><a id="VUID-VkImageBlit2-dstSubresource-parameter" href="#VUID-VkImageBlit2-dstSubresource-parameter"></a> <span class="vuid">VUID-VkImageBlit2-dstSubresource-parameter</span><br>
 <code>dstSubresource</code> <strong>must</strong> be a valid <a href="#VkImageSubresourceLayers">VkImageSubresourceLayers</a> structure</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="copies-resolve"><a class="anchor" href="#copies-resolve"></a>Resolving Multisample Images</h2>
<div class="sectionbody">
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>To resolve a multisample color image to a non-multisample color image, call:</p>
</div>
<div id="vkCmdResolveImage" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_VERSION_1_0
void vkCmdResolveImage(
    VkCommandBuffer                             commandBuffer,
    VkImage                                     srcImage,
    VkImageLayout                               srcImageLayout,
    VkImage                                     dstImage,
    VkImageLayout                               dstImageLayout,
    uint32_t                                    regionCount,
    const VkImageResolve*                       pRegions);</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>commandBuffer</code> is the command buffer into which the command will be
recorded.</p>
</li>
<li>
<p><code>srcImage</code> is the source image.</p>
</li>
<li>
<p><code>srcImageLayout</code> is the layout of the source image subresources for
the resolve.</p>
</li>
<li>
<p><code>dstImage</code> is the destination image.</p>
</li>
<li>
<p><code>dstImageLayout</code> is the layout of the destination image subresources
for the resolve.</p>
</li>
<li>
<p><code>regionCount</code> is the number of regions to resolve.</p>
</li>
<li>
<p><code>pRegions</code> is a pointer to an array of <a href="#VkImageResolve">VkImageResolve</a>
structures specifying the regions to resolve.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>During the resolve the samples corresponding to each pixel location in the
source are converted to a single sample before being written to the
destination.
If the source formats are floating-point or normalized types, the sample
values for each pixel are resolved in an implementation-dependent manner.
If the source formats are integer types, a single sample&#8217;s value is selected
for each pixel.</p>
</div>
<div class="paragraph">
<p><code>srcOffset</code> and <code>dstOffset</code> select the initial <code>x</code>, <code>y</code>, and
<code>z</code> offsets in texels of the sub-regions of the source and destination
image data.
<code>extent</code> is the size in texels of the source image to resolve in
<code>width</code>, <code>height</code> and <code>depth</code>.
Each element of <code>pRegions</code> <strong>must</strong> be a region that is contained within
its corresponding image.</p>
</div>
<div class="paragraph">
<p>Resolves are done layer by layer starting with <code>baseArrayLayer</code> member
of <code>srcSubresource</code> for the source and <code>dstSubresource</code> for the
destination.
<code>layerCount</code> layers are resolved to the destination image.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCmdResolveImage-commandBuffer-01837" href="#VUID-vkCmdResolveImage-commandBuffer-01837"></a> <span class="vuid">VUID-vkCmdResolveImage-commandBuffer-01837</span><br>

If <code>commandBuffer</code> is an unprotected command buffer and
<a href="devsandqueues.html#limits-protectedNoFault" class="xref page"><code>protectedNoFault</code></a> is not supported,
<code>srcImage</code> <strong>must</strong> not be a protected image</p>
</li>
<li>
<p><a id="VUID-vkCmdResolveImage-commandBuffer-01838" href="#VUID-vkCmdResolveImage-commandBuffer-01838"></a> <span class="vuid">VUID-vkCmdResolveImage-commandBuffer-01838</span><br>

If <code>commandBuffer</code> is an unprotected command buffer and
<a href="devsandqueues.html#limits-protectedNoFault" class="xref page"><code>protectedNoFault</code></a> is not supported,
<code>dstImage</code> <strong>must</strong> not be a protected image</p>
</li>
<li>
<p><a id="VUID-vkCmdResolveImage-commandBuffer-01839" href="#VUID-vkCmdResolveImage-commandBuffer-01839"></a> <span class="vuid">VUID-vkCmdResolveImage-commandBuffer-01839</span><br>

If <code>commandBuffer</code> is a protected command buffer and
<a href="devsandqueues.html#limits-protectedNoFault" class="xref page"><code>protectedNoFault</code></a> is not supported,
<code>dstImage</code> <strong>must</strong> not be an unprotected image</p>
</li>
</ul>
</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCmdResolveImage-pRegions-00255" href="#VUID-vkCmdResolveImage-pRegions-00255"></a> <span class="vuid">VUID-vkCmdResolveImage-pRegions-00255</span><br>

The union of all source regions, and the union of all destination
regions, specified by the elements of <code>pRegions</code>, <strong>must</strong> not overlap
in memory</p>
</li>
<li>
<p><a id="VUID-vkCmdResolveImage-srcImage-00256" href="#VUID-vkCmdResolveImage-srcImage-00256"></a> <span class="vuid">VUID-vkCmdResolveImage-srcImage-00256</span><br>

If <code>srcImage</code> is non-sparse then it <strong>must</strong> be bound completely and
contiguously to a single <code>VkDeviceMemory</code> object</p>
</li>
<li>
<p><a id="VUID-vkCmdResolveImage-srcImage-00257" href="#VUID-vkCmdResolveImage-srcImage-00257"></a> <span class="vuid">VUID-vkCmdResolveImage-srcImage-00257</span><br>

<code>srcImage</code> <strong>must</strong> have a sample count equal to any valid sample count
value other than <code>VK_SAMPLE_COUNT_1_BIT</code></p>
</li>
<li>
<p><a id="VUID-vkCmdResolveImage-dstImage-00258" href="#VUID-vkCmdResolveImage-dstImage-00258"></a> <span class="vuid">VUID-vkCmdResolveImage-dstImage-00258</span><br>

If <code>dstImage</code> is non-sparse then it <strong>must</strong> be bound completely and
contiguously to a single <code>VkDeviceMemory</code> object</p>
</li>
<li>
<p><a id="VUID-vkCmdResolveImage-dstImage-00259" href="#VUID-vkCmdResolveImage-dstImage-00259"></a> <span class="vuid">VUID-vkCmdResolveImage-dstImage-00259</span><br>

<code>dstImage</code> <strong>must</strong> have a sample count equal to
<code>VK_SAMPLE_COUNT_1_BIT</code></p>
</li>
<li>
<p><a id="VUID-vkCmdResolveImage-srcImageLayout-00260" href="#VUID-vkCmdResolveImage-srcImageLayout-00260"></a> <span class="vuid">VUID-vkCmdResolveImage-srcImageLayout-00260</span><br>

<code>srcImageLayout</code> <strong>must</strong> specify the layout of the image subresources
of <code>srcImage</code> specified in <code>pRegions</code> at the time this command
is executed on a <code>VkDevice</code></p>
</li>
<li>
<p><a id="VUID-vkCmdResolveImage-srcImageLayout-01400" href="#VUID-vkCmdResolveImage-srcImageLayout-01400"></a> <span class="vuid">VUID-vkCmdResolveImage-srcImageLayout-01400</span><br>

<code>srcImageLayout</code> <strong>must</strong> be
<code>VK_IMAGE_LAYOUT_TRANSFER_SRC_OPTIMAL</code> or
<code>VK_IMAGE_LAYOUT_GENERAL</code></p>
</li>
<li>
<p><a id="VUID-vkCmdResolveImage-dstImageLayout-00262" href="#VUID-vkCmdResolveImage-dstImageLayout-00262"></a> <span class="vuid">VUID-vkCmdResolveImage-dstImageLayout-00262</span><br>

<code>dstImageLayout</code> <strong>must</strong> specify the layout of the image subresources
of <code>dstImage</code> specified in <code>pRegions</code> at the time this command
is executed on a <code>VkDevice</code></p>
</li>
<li>
<p><a id="VUID-vkCmdResolveImage-dstImageLayout-01401" href="#VUID-vkCmdResolveImage-dstImageLayout-01401"></a> <span class="vuid">VUID-vkCmdResolveImage-dstImageLayout-01401</span><br>

<code>dstImageLayout</code> <strong>must</strong> be
<code>VK_IMAGE_LAYOUT_TRANSFER_DST_OPTIMAL</code> or
<code>VK_IMAGE_LAYOUT_GENERAL</code></p>
</li>
<li>
<p><a id="VUID-vkCmdResolveImage-dstImage-02003" href="#VUID-vkCmdResolveImage-dstImage-02003"></a> <span class="vuid">VUID-vkCmdResolveImage-dstImage-02003</span><br>

The <a href="resources.html#resources-image-format-features" class="xref page">format features</a> of
<code>dstImage</code> <strong>must</strong> contain
<code>VK_FORMAT_FEATURE_COLOR_ATTACHMENT_BIT</code></p>
</li>
<li>
<p><a id="VUID-vkCmdResolveImage-srcImage-01386" href="#VUID-vkCmdResolveImage-srcImage-01386"></a> <span class="vuid">VUID-vkCmdResolveImage-srcImage-01386</span><br>

<code>srcImage</code> and <code>dstImage</code> <strong>must</strong> have been created with the same
image format</p>
</li>
<li>
<p><a id="VUID-vkCmdResolveImage-srcSubresource-01709" href="#VUID-vkCmdResolveImage-srcSubresource-01709"></a> <span class="vuid">VUID-vkCmdResolveImage-srcSubresource-01709</span><br>

The <code>srcSubresource.mipLevel</code> member of each element of
<code>pRegions</code> <strong>must</strong> be less than the <code>mipLevels</code> specified in
<a href="resources.html#VkImageCreateInfo" class="xref page">VkImageCreateInfo</a> when <code>srcImage</code> was created</p>
</li>
<li>
<p><a id="VUID-vkCmdResolveImage-dstSubresource-01710" href="#VUID-vkCmdResolveImage-dstSubresource-01710"></a> <span class="vuid">VUID-vkCmdResolveImage-dstSubresource-01710</span><br>

The <code>dstSubresource.mipLevel</code> member of each element of
<code>pRegions</code> <strong>must</strong> be less than the <code>mipLevels</code> specified in
<a href="resources.html#VkImageCreateInfo" class="xref page">VkImageCreateInfo</a> when <code>dstImage</code> was created</p>
</li>
<li>
<p><a id="VUID-vkCmdResolveImage-srcSubresource-01711" href="#VUID-vkCmdResolveImage-srcSubresource-01711"></a> <span class="vuid">VUID-vkCmdResolveImage-srcSubresource-01711</span><br>

<span class="eq"><code>srcSubresource.baseArrayLayer</code> + 
<code>srcSubresource.layerCount</code></span> of each element of <code>pRegions</code> <strong>must</strong>
be less than or equal to the <code>arrayLayers</code> specified in
<a href="resources.html#VkImageCreateInfo" class="xref page">VkImageCreateInfo</a> when <code>srcImage</code> was created</p>
</li>
<li>
<p><a id="VUID-vkCmdResolveImage-dstSubresource-01712" href="#VUID-vkCmdResolveImage-dstSubresource-01712"></a> <span class="vuid">VUID-vkCmdResolveImage-dstSubresource-01712</span><br>

<span class="eq"><code>dstSubresource.baseArrayLayer</code> + 
<code>dstSubresource.layerCount</code></span> of each element of <code>pRegions</code> <strong>must</strong>
be less than or equal to the <code>arrayLayers</code> specified in
<a href="resources.html#VkImageCreateInfo" class="xref page">VkImageCreateInfo</a> when <code>dstImage</code> was created</p>
</li>
<li>
<p><a id="VUID-vkCmdResolveImage-srcImage-04446" href="#VUID-vkCmdResolveImage-srcImage-04446"></a> <span class="vuid">VUID-vkCmdResolveImage-srcImage-04446</span><br>

If <code>dstImage</code> is of type <code>VK_IMAGE_TYPE_3D</code>, then for each
element of <code>pRegions</code>, <code>srcSubresource.layerCount</code> <strong>must</strong> be <code>1</code></p>
</li>
<li>
<p><a id="VUID-vkCmdResolveImage-srcImage-04447" href="#VUID-vkCmdResolveImage-srcImage-04447"></a> <span class="vuid">VUID-vkCmdResolveImage-srcImage-04447</span><br>

If <code>dstImage</code> is of type <code>VK_IMAGE_TYPE_3D</code>, then for each
element of <code>pRegions</code>, <code>dstSubresource.baseArrayLayer</code> <strong>must</strong> be
<code>0</code> and <code>dstSubresource.layerCount</code> <strong>must</strong> be <code>1</code></p>
</li>
<li>
<p><a id="VUID-vkCmdResolveImage-srcOffset-00269" href="#VUID-vkCmdResolveImage-srcOffset-00269"></a> <span class="vuid">VUID-vkCmdResolveImage-srcOffset-00269</span><br>

For each element of <code>pRegions</code>, <code>srcOffset.x</code> and
<span class="eq">(<code>extent.width</code> +  <code>srcOffset.x</code>)</span> <strong>must</strong> both be
greater than or equal to <code>0</code> and less than or equal to the width of the
specified <code>srcSubresource</code> of <code>srcImage</code></p>
</li>
<li>
<p><a id="VUID-vkCmdResolveImage-srcOffset-00270" href="#VUID-vkCmdResolveImage-srcOffset-00270"></a> <span class="vuid">VUID-vkCmdResolveImage-srcOffset-00270</span><br>

For each element of <code>pRegions</code>, <code>srcOffset.y</code> and
<span class="eq">(<code>extent.height</code> +  <code>srcOffset.y</code>)</span> <strong>must</strong> both be
greater than or equal to <code>0</code> and less than or equal to the height of the
specified <code>srcSubresource</code> of <code>srcImage</code></p>
</li>
<li>
<p><a id="VUID-vkCmdResolveImage-srcImage-00271" href="#VUID-vkCmdResolveImage-srcImage-00271"></a> <span class="vuid">VUID-vkCmdResolveImage-srcImage-00271</span><br>

If <code>srcImage</code> is of type <code>VK_IMAGE_TYPE_1D</code>, then for each
element of <code>pRegions</code>, <code>srcOffset.y</code> <strong>must</strong> be <code>0</code> and
<code>extent.height</code> <strong>must</strong> be <code>1</code></p>
</li>
<li>
<p><a id="VUID-vkCmdResolveImage-srcOffset-00272" href="#VUID-vkCmdResolveImage-srcOffset-00272"></a> <span class="vuid">VUID-vkCmdResolveImage-srcOffset-00272</span><br>

For each element of <code>pRegions</code>, <code>srcOffset.z</code> and
<span class="eq">(<code>extent.depth</code> +  <code>srcOffset.z</code>)</span> <strong>must</strong> both be
greater than or equal to <code>0</code> and less than or equal to the depth of the
specified <code>srcSubresource</code> of <code>srcImage</code></p>
</li>
<li>
<p><a id="VUID-vkCmdResolveImage-srcImage-00273" href="#VUID-vkCmdResolveImage-srcImage-00273"></a> <span class="vuid">VUID-vkCmdResolveImage-srcImage-00273</span><br>

If <code>srcImage</code> is of type <code>VK_IMAGE_TYPE_1D</code> or
<code>VK_IMAGE_TYPE_2D</code>, then for each element of <code>pRegions</code>,
<code>srcOffset.z</code> <strong>must</strong> be <code>0</code> and <code>extent.depth</code> <strong>must</strong> be <code>1</code></p>
</li>
<li>
<p><a id="VUID-vkCmdResolveImage-dstOffset-00274" href="#VUID-vkCmdResolveImage-dstOffset-00274"></a> <span class="vuid">VUID-vkCmdResolveImage-dstOffset-00274</span><br>

For each element of <code>pRegions</code>, <code>dstOffset.x</code> and
<span class="eq">(<code>extent.width</code> +  <code>dstOffset.x</code>)</span> <strong>must</strong> both be
greater than or equal to <code>0</code> and less than or equal to the width of the
specified <code>dstSubresource</code> of <code>dstImage</code></p>
</li>
<li>
<p><a id="VUID-vkCmdResolveImage-dstOffset-00275" href="#VUID-vkCmdResolveImage-dstOffset-00275"></a> <span class="vuid">VUID-vkCmdResolveImage-dstOffset-00275</span><br>

For each element of <code>pRegions</code>, <code>dstOffset.y</code> and
<span class="eq">(<code>extent.height</code> +  <code>dstOffset.y</code>)</span> <strong>must</strong> both be
greater than or equal to <code>0</code> and less than or equal to the height of the
specified <code>dstSubresource</code> of <code>dstImage</code></p>
</li>
<li>
<p><a id="VUID-vkCmdResolveImage-dstImage-00276" href="#VUID-vkCmdResolveImage-dstImage-00276"></a> <span class="vuid">VUID-vkCmdResolveImage-dstImage-00276</span><br>

If <code>dstImage</code> is of type <code>VK_IMAGE_TYPE_1D</code>, then for each
element of <code>pRegions</code>, <code>dstOffset.y</code> <strong>must</strong> be <code>0</code> and
<code>extent.height</code> <strong>must</strong> be <code>1</code></p>
</li>
<li>
<p><a id="VUID-vkCmdResolveImage-dstOffset-00277" href="#VUID-vkCmdResolveImage-dstOffset-00277"></a> <span class="vuid">VUID-vkCmdResolveImage-dstOffset-00277</span><br>

For each element of <code>pRegions</code>, <code>dstOffset.z</code> and
<span class="eq">(<code>extent.depth</code> +  <code>dstOffset.z</code>)</span> <strong>must</strong> both be
greater than or equal to <code>0</code> and less than or equal to the depth of the
specified <code>dstSubresource</code> of <code>dstImage</code></p>
</li>
<li>
<p><a id="VUID-vkCmdResolveImage-dstImage-00278" href="#VUID-vkCmdResolveImage-dstImage-00278"></a> <span class="vuid">VUID-vkCmdResolveImage-dstImage-00278</span><br>

If <code>dstImage</code> is of type <code>VK_IMAGE_TYPE_1D</code> or
<code>VK_IMAGE_TYPE_2D</code>, then for each element of <code>pRegions</code>,
<code>dstOffset.z</code> <strong>must</strong> be <code>0</code> and <code>extent.depth</code> <strong>must</strong> be <code>1</code></p>
</li>
<li>
<p><a id="VUID-vkCmdResolveImage-srcImage-06762" href="#VUID-vkCmdResolveImage-srcImage-06762"></a> <span class="vuid">VUID-vkCmdResolveImage-srcImage-06762</span><br>

<code>srcImage</code> <strong>must</strong> have been created with
<code>VK_IMAGE_USAGE_TRANSFER_SRC_BIT</code> usage flag</p>
</li>
<li>
<p><a id="VUID-vkCmdResolveImage-srcImage-06763" href="#VUID-vkCmdResolveImage-srcImage-06763"></a> <span class="vuid">VUID-vkCmdResolveImage-srcImage-06763</span><br>

The <a href="resources.html#resources-image-format-features" class="xref page">format features</a> of
<code>srcImage</code> <strong>must</strong> contain <code>VK_FORMAT_FEATURE_TRANSFER_SRC_BIT</code></p>
</li>
<li>
<p><a id="VUID-vkCmdResolveImage-dstImage-06764" href="#VUID-vkCmdResolveImage-dstImage-06764"></a> <span class="vuid">VUID-vkCmdResolveImage-dstImage-06764</span><br>

<code>dstImage</code> <strong>must</strong> have been created with
<code>VK_IMAGE_USAGE_TRANSFER_DST_BIT</code> usage flag</p>
</li>
<li>
<p><a id="VUID-vkCmdResolveImage-dstImage-06765" href="#VUID-vkCmdResolveImage-dstImage-06765"></a> <span class="vuid">VUID-vkCmdResolveImage-dstImage-06765</span><br>

The <a href="resources.html#resources-image-format-features" class="xref page">format features</a> of
<code>dstImage</code> <strong>must</strong> contain <code>VK_FORMAT_FEATURE_TRANSFER_DST_BIT</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCmdResolveImage-commandBuffer-parameter" href="#VUID-vkCmdResolveImage-commandBuffer-parameter"></a> <span class="vuid">VUID-vkCmdResolveImage-commandBuffer-parameter</span><br>
 <code>commandBuffer</code> <strong>must</strong> be a valid <a href="cmdbuffers.html#VkCommandBuffer" class="xref page">VkCommandBuffer</a> handle</p>
</li>
<li>
<p><a id="VUID-vkCmdResolveImage-srcImage-parameter" href="#VUID-vkCmdResolveImage-srcImage-parameter"></a> <span class="vuid">VUID-vkCmdResolveImage-srcImage-parameter</span><br>
 <code>srcImage</code> <strong>must</strong> be a valid <a href="resources.html#VkImage" class="xref page">VkImage</a> handle</p>
</li>
<li>
<p><a id="VUID-vkCmdResolveImage-srcImageLayout-parameter" href="#VUID-vkCmdResolveImage-srcImageLayout-parameter"></a> <span class="vuid">VUID-vkCmdResolveImage-srcImageLayout-parameter</span><br>
 <code>srcImageLayout</code> <strong>must</strong> be a valid <a href="resources.html#VkImageLayout" class="xref page">VkImageLayout</a> value</p>
</li>
<li>
<p><a id="VUID-vkCmdResolveImage-dstImage-parameter" href="#VUID-vkCmdResolveImage-dstImage-parameter"></a> <span class="vuid">VUID-vkCmdResolveImage-dstImage-parameter</span><br>
 <code>dstImage</code> <strong>must</strong> be a valid <a href="resources.html#VkImage" class="xref page">VkImage</a> handle</p>
</li>
<li>
<p><a id="VUID-vkCmdResolveImage-dstImageLayout-parameter" href="#VUID-vkCmdResolveImage-dstImageLayout-parameter"></a> <span class="vuid">VUID-vkCmdResolveImage-dstImageLayout-parameter</span><br>
 <code>dstImageLayout</code> <strong>must</strong> be a valid <a href="resources.html#VkImageLayout" class="xref page">VkImageLayout</a> value</p>
</li>
<li>
<p><a id="VUID-vkCmdResolveImage-pRegions-parameter" href="#VUID-vkCmdResolveImage-pRegions-parameter"></a> <span class="vuid">VUID-vkCmdResolveImage-pRegions-parameter</span><br>
 <code>pRegions</code> <strong>must</strong> be a valid pointer to an array of <code>regionCount</code> valid <a href="#VkImageResolve">VkImageResolve</a> structures</p>
</li>
<li>
<p><a id="VUID-vkCmdResolveImage-commandBuffer-recording" href="#VUID-vkCmdResolveImage-commandBuffer-recording"></a> <span class="vuid">VUID-vkCmdResolveImage-commandBuffer-recording</span><br>
 <code>commandBuffer</code> <strong>must</strong> be in the <a href="cmdbuffers.html#commandbuffers-lifecycle" class="xref page">recording state</a></p>
</li>
<li>
<p><a id="VUID-vkCmdResolveImage-commandBuffer-cmdpool" href="#VUID-vkCmdResolveImage-commandBuffer-cmdpool"></a> <span class="vuid">VUID-vkCmdResolveImage-commandBuffer-cmdpool</span><br>
 The <code>VkCommandPool</code> that <code>commandBuffer</code> was allocated from <strong>must</strong> support graphics operations</p>
</li>
<li>
<p><a id="VUID-vkCmdResolveImage-renderpass" href="#VUID-vkCmdResolveImage-renderpass"></a> <span class="vuid">VUID-vkCmdResolveImage-renderpass</span><br>
 This command <strong>must</strong> only be called outside of a render pass instance</p>
</li>
<li>
<p><a id="VUID-vkCmdResolveImage-regionCount-arraylength" href="#VUID-vkCmdResolveImage-regionCount-arraylength"></a> <span class="vuid">VUID-vkCmdResolveImage-regionCount-arraylength</span><br>
 <code>regionCount</code> <strong>must</strong> be greater than <code>0</code></p>
</li>
<li>
<p><a id="VUID-vkCmdResolveImage-commonparent" href="#VUID-vkCmdResolveImage-commonparent"></a> <span class="vuid">VUID-vkCmdResolveImage-commonparent</span><br>
 Each of <code>commandBuffer</code>, <code>dstImage</code>, and <code>srcImage</code> <strong>must</strong> have been created, allocated, or retrieved from the same <a href="devsandqueues.html#VkDevice" class="xref page">VkDevice</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Host Synchronization</div>
<div class="ulist">
<ul>
<li>
<p>Host access to <code>commandBuffer</code> <strong>must</strong> be externally synchronized</p>
</li>
<li>
<p>Host access to the <code>VkCommandPool</code> that <code>commandBuffer</code> was allocated from <strong>must</strong> be externally synchronized</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Command Properties</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><a href="cmdbuffers.html#VkCommandBufferLevel" class="xref page">Command Buffer Levels</a></th>
<th class="tableblock halign-left valign-top"><a href="renderpass.html#vkCmdBeginRenderPass" class="xref page">Render Pass Scope</a></th>
<th class="tableblock halign-left valign-top"><a href="devsandqueues.html#VkQueueFlagBits" class="xref page">Supported Queue Types</a></th>
<th class="tableblock halign-left valign-top"><a href="fundamentals.html#fundamentals-queueoperation-command-types" class="xref page">Command Type</a></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Primary<br>
Secondary</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Outside</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Graphics</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Action</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>VkImageResolve</code> structure is defined as:</p>
</div>
<div id="VkImageResolve" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_VERSION_1_0
typedef struct VkImageResolve {
    VkImageSubresourceLayers    srcSubresource;
    VkOffset3D                  srcOffset;
    VkImageSubresourceLayers    dstSubresource;
    VkOffset3D                  dstOffset;
    VkExtent3D                  extent;
} VkImageResolve;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>srcSubresource</code> and <code>dstSubresource</code> are
<a href="#VkImageSubresourceLayers">VkImageSubresourceLayers</a> structures specifying the image
subresources of the images used for the source and destination image
data, respectively.
Resolve of depth/stencil images is not supported.</p>
</li>
<li>
<p><code>srcOffset</code> and <code>dstOffset</code> select the initial <code>x</code>, <code>y</code>,
and <code>z</code> offsets in texels of the sub-regions of the source and
destination image data.</p>
</li>
<li>
<p><code>extent</code> is the size in texels of the source image to resolve in
<code>width</code>, <code>height</code> and <code>depth</code>.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkImageResolve-aspectMask-00266" href="#VUID-VkImageResolve-aspectMask-00266"></a> <span class="vuid">VUID-VkImageResolve-aspectMask-00266</span><br>

The <code>aspectMask</code> member of <code>srcSubresource</code> and
<code>dstSubresource</code> <strong>must</strong> only contain <code>VK_IMAGE_ASPECT_COLOR_BIT</code></p>
</li>
<li>
<p><a id="VUID-VkImageResolve-layerCount-08803" href="#VUID-VkImageResolve-layerCount-08803"></a> <span class="vuid">VUID-VkImageResolve-layerCount-08803</span><br>

The
    <code>layerCount</code> member of <code>srcSubresource</code> and <code>dstSubresource</code>
    <strong>must</strong> match</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkImageResolve-srcSubresource-parameter" href="#VUID-VkImageResolve-srcSubresource-parameter"></a> <span class="vuid">VUID-VkImageResolve-srcSubresource-parameter</span><br>
 <code>srcSubresource</code> <strong>must</strong> be a valid <a href="#VkImageSubresourceLayers">VkImageSubresourceLayers</a> structure</p>
</li>
<li>
<p><a id="VUID-VkImageResolve-dstSubresource-parameter" href="#VUID-VkImageResolve-dstSubresource-parameter"></a> <span class="vuid">VUID-VkImageResolve-dstSubresource-parameter</span><br>
 <code>dstSubresource</code> <strong>must</strong> be a valid <a href="#VkImageSubresourceLayers">VkImageSubresourceLayers</a> structure</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>A more extensible version of the resolve image command is defined below.</p>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>To resolve a multisample image to a non-multisample image, call:</p>
</div>
<div id="vkCmdResolveImage2" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_VERSION_1_3
void vkCmdResolveImage2(
    VkCommandBuffer                             commandBuffer,
    const VkResolveImageInfo2*                  pResolveImageInfo);</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>commandBuffer</code> is the command buffer into which the command will be
recorded.</p>
</li>
<li>
<p><code>pResolveImageInfo</code> is a pointer to a <a href="#VkResolveImageInfo2">VkResolveImageInfo2</a>
structure describing the resolve parameters.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>This command is functionally identical to <a href="#vkCmdResolveImage">vkCmdResolveImage</a>, but
includes extensible sub-structures that include <code>sType</code> and <code>pNext</code>
parameters, allowing them to be more easily extended.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCmdResolveImage2-commandBuffer-01837" href="#VUID-vkCmdResolveImage2-commandBuffer-01837"></a> <span class="vuid">VUID-vkCmdResolveImage2-commandBuffer-01837</span><br>

If <code>commandBuffer</code> is an unprotected command buffer and
<a href="devsandqueues.html#limits-protectedNoFault" class="xref page"><code>protectedNoFault</code></a> is not supported,
<code>srcImage</code> <strong>must</strong> not be a protected image</p>
</li>
<li>
<p><a id="VUID-vkCmdResolveImage2-commandBuffer-01838" href="#VUID-vkCmdResolveImage2-commandBuffer-01838"></a> <span class="vuid">VUID-vkCmdResolveImage2-commandBuffer-01838</span><br>

If <code>commandBuffer</code> is an unprotected command buffer and
<a href="devsandqueues.html#limits-protectedNoFault" class="xref page"><code>protectedNoFault</code></a> is not supported,
<code>dstImage</code> <strong>must</strong> not be a protected image</p>
</li>
<li>
<p><a id="VUID-vkCmdResolveImage2-commandBuffer-01839" href="#VUID-vkCmdResolveImage2-commandBuffer-01839"></a> <span class="vuid">VUID-vkCmdResolveImage2-commandBuffer-01839</span><br>

If <code>commandBuffer</code> is a protected command buffer and
<a href="devsandqueues.html#limits-protectedNoFault" class="xref page"><code>protectedNoFault</code></a> is not supported,
<code>dstImage</code> <strong>must</strong> not be an unprotected image</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCmdResolveImage2-commandBuffer-parameter" href="#VUID-vkCmdResolveImage2-commandBuffer-parameter"></a> <span class="vuid">VUID-vkCmdResolveImage2-commandBuffer-parameter</span><br>
 <code>commandBuffer</code> <strong>must</strong> be a valid <a href="cmdbuffers.html#VkCommandBuffer" class="xref page">VkCommandBuffer</a> handle</p>
</li>
<li>
<p><a id="VUID-vkCmdResolveImage2-pResolveImageInfo-parameter" href="#VUID-vkCmdResolveImage2-pResolveImageInfo-parameter"></a> <span class="vuid">VUID-vkCmdResolveImage2-pResolveImageInfo-parameter</span><br>
 <code>pResolveImageInfo</code> <strong>must</strong> be a valid pointer to a valid <a href="#VkResolveImageInfo2">VkResolveImageInfo2</a> structure</p>
</li>
<li>
<p><a id="VUID-vkCmdResolveImage2-commandBuffer-recording" href="#VUID-vkCmdResolveImage2-commandBuffer-recording"></a> <span class="vuid">VUID-vkCmdResolveImage2-commandBuffer-recording</span><br>
 <code>commandBuffer</code> <strong>must</strong> be in the <a href="cmdbuffers.html#commandbuffers-lifecycle" class="xref page">recording state</a></p>
</li>
<li>
<p><a id="VUID-vkCmdResolveImage2-commandBuffer-cmdpool" href="#VUID-vkCmdResolveImage2-commandBuffer-cmdpool"></a> <span class="vuid">VUID-vkCmdResolveImage2-commandBuffer-cmdpool</span><br>
 The <code>VkCommandPool</code> that <code>commandBuffer</code> was allocated from <strong>must</strong> support graphics operations</p>
</li>
<li>
<p><a id="VUID-vkCmdResolveImage2-renderpass" href="#VUID-vkCmdResolveImage2-renderpass"></a> <span class="vuid">VUID-vkCmdResolveImage2-renderpass</span><br>
 This command <strong>must</strong> only be called outside of a render pass instance</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Host Synchronization</div>
<div class="ulist">
<ul>
<li>
<p>Host access to <code>commandBuffer</code> <strong>must</strong> be externally synchronized</p>
</li>
<li>
<p>Host access to the <code>VkCommandPool</code> that <code>commandBuffer</code> was allocated from <strong>must</strong> be externally synchronized</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Command Properties</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><a href="cmdbuffers.html#VkCommandBufferLevel" class="xref page">Command Buffer Levels</a></th>
<th class="tableblock halign-left valign-top"><a href="renderpass.html#vkCmdBeginRenderPass" class="xref page">Render Pass Scope</a></th>
<th class="tableblock halign-left valign-top"><a href="devsandqueues.html#VkQueueFlagBits" class="xref page">Supported Queue Types</a></th>
<th class="tableblock halign-left valign-top"><a href="fundamentals.html#fundamentals-queueoperation-command-types" class="xref page">Command Type</a></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Primary<br>
Secondary</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Outside</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Graphics</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Action</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>VkResolveImageInfo2</code> structure is defined as:</p>
</div>
<div id="VkResolveImageInfo2" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_VERSION_1_3
typedef struct VkResolveImageInfo2 {
    VkStructureType           sType;
    const void*               pNext;
    VkImage                   srcImage;
    VkImageLayout             srcImageLayout;
    VkImage                   dstImage;
    VkImageLayout             dstImageLayout;
    uint32_t                  regionCount;
    const VkImageResolve2*    pRegions;
} VkResolveImageInfo2;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is a <a href="fundamentals.html#VkStructureType" class="xref page">VkStructureType</a> value identifying this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>srcImage</code> is the source image.</p>
</li>
<li>
<p><code>srcImageLayout</code> is the layout of the source image subresources for
the resolve.</p>
</li>
<li>
<p><code>dstImage</code> is the destination image.</p>
</li>
<li>
<p><code>dstImageLayout</code> is the layout of the destination image subresources
for the resolve.</p>
</li>
<li>
<p><code>regionCount</code> is the number of regions to resolve.</p>
</li>
<li>
<p><code>pRegions</code> is a pointer to an array of <a href="#VkImageResolve2">VkImageResolve2</a>
structures specifying the regions to resolve.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkResolveImageInfo2-pRegions-00255" href="#VUID-VkResolveImageInfo2-pRegions-00255"></a> <span class="vuid">VUID-VkResolveImageInfo2-pRegions-00255</span><br>

The union of all source regions, and the union of all destination
regions, specified by the elements of <code>pRegions</code>, <strong>must</strong> not overlap
in memory</p>
</li>
<li>
<p><a id="VUID-VkResolveImageInfo2-srcImage-00256" href="#VUID-VkResolveImageInfo2-srcImage-00256"></a> <span class="vuid">VUID-VkResolveImageInfo2-srcImage-00256</span><br>

If <code>srcImage</code> is non-sparse then it <strong>must</strong> be bound completely and
contiguously to a single <code>VkDeviceMemory</code> object</p>
</li>
<li>
<p><a id="VUID-VkResolveImageInfo2-srcImage-00257" href="#VUID-VkResolveImageInfo2-srcImage-00257"></a> <span class="vuid">VUID-VkResolveImageInfo2-srcImage-00257</span><br>

<code>srcImage</code> <strong>must</strong> have a sample count equal to any valid sample count
value other than <code>VK_SAMPLE_COUNT_1_BIT</code></p>
</li>
<li>
<p><a id="VUID-VkResolveImageInfo2-dstImage-00258" href="#VUID-VkResolveImageInfo2-dstImage-00258"></a> <span class="vuid">VUID-VkResolveImageInfo2-dstImage-00258</span><br>

If <code>dstImage</code> is non-sparse then it <strong>must</strong> be bound completely and
contiguously to a single <code>VkDeviceMemory</code> object</p>
</li>
<li>
<p><a id="VUID-VkResolveImageInfo2-dstImage-00259" href="#VUID-VkResolveImageInfo2-dstImage-00259"></a> <span class="vuid">VUID-VkResolveImageInfo2-dstImage-00259</span><br>

<code>dstImage</code> <strong>must</strong> have a sample count equal to
<code>VK_SAMPLE_COUNT_1_BIT</code></p>
</li>
<li>
<p><a id="VUID-VkResolveImageInfo2-srcImageLayout-00260" href="#VUID-VkResolveImageInfo2-srcImageLayout-00260"></a> <span class="vuid">VUID-VkResolveImageInfo2-srcImageLayout-00260</span><br>

<code>srcImageLayout</code> <strong>must</strong> specify the layout of the image subresources
of <code>srcImage</code> specified in <code>pRegions</code> at the time this command
is executed on a <code>VkDevice</code></p>
</li>
<li>
<p><a id="VUID-VkResolveImageInfo2-srcImageLayout-01400" href="#VUID-VkResolveImageInfo2-srcImageLayout-01400"></a> <span class="vuid">VUID-VkResolveImageInfo2-srcImageLayout-01400</span><br>

<code>srcImageLayout</code> <strong>must</strong> be
<code>VK_IMAGE_LAYOUT_TRANSFER_SRC_OPTIMAL</code> or
<code>VK_IMAGE_LAYOUT_GENERAL</code></p>
</li>
<li>
<p><a id="VUID-VkResolveImageInfo2-dstImageLayout-00262" href="#VUID-VkResolveImageInfo2-dstImageLayout-00262"></a> <span class="vuid">VUID-VkResolveImageInfo2-dstImageLayout-00262</span><br>

<code>dstImageLayout</code> <strong>must</strong> specify the layout of the image subresources
of <code>dstImage</code> specified in <code>pRegions</code> at the time this command
is executed on a <code>VkDevice</code></p>
</li>
<li>
<p><a id="VUID-VkResolveImageInfo2-dstImageLayout-01401" href="#VUID-VkResolveImageInfo2-dstImageLayout-01401"></a> <span class="vuid">VUID-VkResolveImageInfo2-dstImageLayout-01401</span><br>

<code>dstImageLayout</code> <strong>must</strong> be
<code>VK_IMAGE_LAYOUT_TRANSFER_DST_OPTIMAL</code> or
<code>VK_IMAGE_LAYOUT_GENERAL</code></p>
</li>
<li>
<p><a id="VUID-VkResolveImageInfo2-dstImage-02003" href="#VUID-VkResolveImageInfo2-dstImage-02003"></a> <span class="vuid">VUID-VkResolveImageInfo2-dstImage-02003</span><br>

The <a href="resources.html#resources-image-format-features" class="xref page">format features</a> of
<code>dstImage</code> <strong>must</strong> contain
<code>VK_FORMAT_FEATURE_COLOR_ATTACHMENT_BIT</code></p>
</li>
<li>
<p><a id="VUID-VkResolveImageInfo2-srcImage-01386" href="#VUID-VkResolveImageInfo2-srcImage-01386"></a> <span class="vuid">VUID-VkResolveImageInfo2-srcImage-01386</span><br>

<code>srcImage</code> and <code>dstImage</code> <strong>must</strong> have been created with the same
image format</p>
</li>
<li>
<p><a id="VUID-VkResolveImageInfo2-srcSubresource-01709" href="#VUID-VkResolveImageInfo2-srcSubresource-01709"></a> <span class="vuid">VUID-VkResolveImageInfo2-srcSubresource-01709</span><br>

The <code>srcSubresource.mipLevel</code> member of each element of
<code>pRegions</code> <strong>must</strong> be less than the <code>mipLevels</code> specified in
<a href="resources.html#VkImageCreateInfo" class="xref page">VkImageCreateInfo</a> when <code>srcImage</code> was created</p>
</li>
<li>
<p><a id="VUID-VkResolveImageInfo2-dstSubresource-01710" href="#VUID-VkResolveImageInfo2-dstSubresource-01710"></a> <span class="vuid">VUID-VkResolveImageInfo2-dstSubresource-01710</span><br>

The <code>dstSubresource.mipLevel</code> member of each element of
<code>pRegions</code> <strong>must</strong> be less than the <code>mipLevels</code> specified in
<a href="resources.html#VkImageCreateInfo" class="xref page">VkImageCreateInfo</a> when <code>dstImage</code> was created</p>
</li>
<li>
<p><a id="VUID-VkResolveImageInfo2-srcSubresource-01711" href="#VUID-VkResolveImageInfo2-srcSubresource-01711"></a> <span class="vuid">VUID-VkResolveImageInfo2-srcSubresource-01711</span><br>

<span class="eq"><code>srcSubresource.baseArrayLayer</code> + 
<code>srcSubresource.layerCount</code></span> of each element of <code>pRegions</code> <strong>must</strong>
be less than or equal to the <code>arrayLayers</code> specified in
<a href="resources.html#VkImageCreateInfo" class="xref page">VkImageCreateInfo</a> when <code>srcImage</code> was created</p>
</li>
<li>
<p><a id="VUID-VkResolveImageInfo2-dstSubresource-01712" href="#VUID-VkResolveImageInfo2-dstSubresource-01712"></a> <span class="vuid">VUID-VkResolveImageInfo2-dstSubresource-01712</span><br>

<span class="eq"><code>dstSubresource.baseArrayLayer</code> + 
<code>dstSubresource.layerCount</code></span> of each element of <code>pRegions</code> <strong>must</strong>
be less than or equal to the <code>arrayLayers</code> specified in
<a href="resources.html#VkImageCreateInfo" class="xref page">VkImageCreateInfo</a> when <code>dstImage</code> was created</p>
</li>
<li>
<p><a id="VUID-VkResolveImageInfo2-srcImage-04446" href="#VUID-VkResolveImageInfo2-srcImage-04446"></a> <span class="vuid">VUID-VkResolveImageInfo2-srcImage-04446</span><br>

If <code>dstImage</code> is of type <code>VK_IMAGE_TYPE_3D</code>, then for each
element of <code>pRegions</code>, <code>srcSubresource.layerCount</code> <strong>must</strong> be <code>1</code></p>
</li>
<li>
<p><a id="VUID-VkResolveImageInfo2-srcImage-04447" href="#VUID-VkResolveImageInfo2-srcImage-04447"></a> <span class="vuid">VUID-VkResolveImageInfo2-srcImage-04447</span><br>

If <code>dstImage</code> is of type <code>VK_IMAGE_TYPE_3D</code>, then for each
element of <code>pRegions</code>, <code>dstSubresource.baseArrayLayer</code> <strong>must</strong> be
<code>0</code> and <code>dstSubresource.layerCount</code> <strong>must</strong> be <code>1</code></p>
</li>
<li>
<p><a id="VUID-VkResolveImageInfo2-srcOffset-00269" href="#VUID-VkResolveImageInfo2-srcOffset-00269"></a> <span class="vuid">VUID-VkResolveImageInfo2-srcOffset-00269</span><br>

For each element of <code>pRegions</code>, <code>srcOffset.x</code> and
<span class="eq">(<code>extent.width</code> +  <code>srcOffset.x</code>)</span> <strong>must</strong> both be
greater than or equal to <code>0</code> and less than or equal to the width of the
specified <code>srcSubresource</code> of <code>srcImage</code></p>
</li>
<li>
<p><a id="VUID-VkResolveImageInfo2-srcOffset-00270" href="#VUID-VkResolveImageInfo2-srcOffset-00270"></a> <span class="vuid">VUID-VkResolveImageInfo2-srcOffset-00270</span><br>

For each element of <code>pRegions</code>, <code>srcOffset.y</code> and
<span class="eq">(<code>extent.height</code> +  <code>srcOffset.y</code>)</span> <strong>must</strong> both be
greater than or equal to <code>0</code> and less than or equal to the height of the
specified <code>srcSubresource</code> of <code>srcImage</code></p>
</li>
<li>
<p><a id="VUID-VkResolveImageInfo2-srcImage-00271" href="#VUID-VkResolveImageInfo2-srcImage-00271"></a> <span class="vuid">VUID-VkResolveImageInfo2-srcImage-00271</span><br>

If <code>srcImage</code> is of type <code>VK_IMAGE_TYPE_1D</code>, then for each
element of <code>pRegions</code>, <code>srcOffset.y</code> <strong>must</strong> be <code>0</code> and
<code>extent.height</code> <strong>must</strong> be <code>1</code></p>
</li>
<li>
<p><a id="VUID-VkResolveImageInfo2-srcOffset-00272" href="#VUID-VkResolveImageInfo2-srcOffset-00272"></a> <span class="vuid">VUID-VkResolveImageInfo2-srcOffset-00272</span><br>

For each element of <code>pRegions</code>, <code>srcOffset.z</code> and
<span class="eq">(<code>extent.depth</code> +  <code>srcOffset.z</code>)</span> <strong>must</strong> both be
greater than or equal to <code>0</code> and less than or equal to the depth of the
specified <code>srcSubresource</code> of <code>srcImage</code></p>
</li>
<li>
<p><a id="VUID-VkResolveImageInfo2-srcImage-00273" href="#VUID-VkResolveImageInfo2-srcImage-00273"></a> <span class="vuid">VUID-VkResolveImageInfo2-srcImage-00273</span><br>

If <code>srcImage</code> is of type <code>VK_IMAGE_TYPE_1D</code> or
<code>VK_IMAGE_TYPE_2D</code>, then for each element of <code>pRegions</code>,
<code>srcOffset.z</code> <strong>must</strong> be <code>0</code> and <code>extent.depth</code> <strong>must</strong> be <code>1</code></p>
</li>
<li>
<p><a id="VUID-VkResolveImageInfo2-dstOffset-00274" href="#VUID-VkResolveImageInfo2-dstOffset-00274"></a> <span class="vuid">VUID-VkResolveImageInfo2-dstOffset-00274</span><br>

For each element of <code>pRegions</code>, <code>dstOffset.x</code> and
<span class="eq">(<code>extent.width</code> +  <code>dstOffset.x</code>)</span> <strong>must</strong> both be
greater than or equal to <code>0</code> and less than or equal to the width of the
specified <code>dstSubresource</code> of <code>dstImage</code></p>
</li>
<li>
<p><a id="VUID-VkResolveImageInfo2-dstOffset-00275" href="#VUID-VkResolveImageInfo2-dstOffset-00275"></a> <span class="vuid">VUID-VkResolveImageInfo2-dstOffset-00275</span><br>

For each element of <code>pRegions</code>, <code>dstOffset.y</code> and
<span class="eq">(<code>extent.height</code> +  <code>dstOffset.y</code>)</span> <strong>must</strong> both be
greater than or equal to <code>0</code> and less than or equal to the height of the
specified <code>dstSubresource</code> of <code>dstImage</code></p>
</li>
<li>
<p><a id="VUID-VkResolveImageInfo2-dstImage-00276" href="#VUID-VkResolveImageInfo2-dstImage-00276"></a> <span class="vuid">VUID-VkResolveImageInfo2-dstImage-00276</span><br>

If <code>dstImage</code> is of type <code>VK_IMAGE_TYPE_1D</code>, then for each
element of <code>pRegions</code>, <code>dstOffset.y</code> <strong>must</strong> be <code>0</code> and
<code>extent.height</code> <strong>must</strong> be <code>1</code></p>
</li>
<li>
<p><a id="VUID-VkResolveImageInfo2-dstOffset-00277" href="#VUID-VkResolveImageInfo2-dstOffset-00277"></a> <span class="vuid">VUID-VkResolveImageInfo2-dstOffset-00277</span><br>

For each element of <code>pRegions</code>, <code>dstOffset.z</code> and
<span class="eq">(<code>extent.depth</code> +  <code>dstOffset.z</code>)</span> <strong>must</strong> both be
greater than or equal to <code>0</code> and less than or equal to the depth of the
specified <code>dstSubresource</code> of <code>dstImage</code></p>
</li>
<li>
<p><a id="VUID-VkResolveImageInfo2-dstImage-00278" href="#VUID-VkResolveImageInfo2-dstImage-00278"></a> <span class="vuid">VUID-VkResolveImageInfo2-dstImage-00278</span><br>

If <code>dstImage</code> is of type <code>VK_IMAGE_TYPE_1D</code> or
<code>VK_IMAGE_TYPE_2D</code>, then for each element of <code>pRegions</code>,
<code>dstOffset.z</code> <strong>must</strong> be <code>0</code> and <code>extent.depth</code> <strong>must</strong> be <code>1</code></p>
</li>
<li>
<p><a id="VUID-VkResolveImageInfo2-srcImage-06762" href="#VUID-VkResolveImageInfo2-srcImage-06762"></a> <span class="vuid">VUID-VkResolveImageInfo2-srcImage-06762</span><br>

<code>srcImage</code> <strong>must</strong> have been created with
<code>VK_IMAGE_USAGE_TRANSFER_SRC_BIT</code> usage flag</p>
</li>
<li>
<p><a id="VUID-VkResolveImageInfo2-srcImage-06763" href="#VUID-VkResolveImageInfo2-srcImage-06763"></a> <span class="vuid">VUID-VkResolveImageInfo2-srcImage-06763</span><br>

The <a href="resources.html#resources-image-format-features" class="xref page">format features</a> of
<code>srcImage</code> <strong>must</strong> contain <code>VK_FORMAT_FEATURE_TRANSFER_SRC_BIT</code></p>
</li>
<li>
<p><a id="VUID-VkResolveImageInfo2-dstImage-06764" href="#VUID-VkResolveImageInfo2-dstImage-06764"></a> <span class="vuid">VUID-VkResolveImageInfo2-dstImage-06764</span><br>

<code>dstImage</code> <strong>must</strong> have been created with
<code>VK_IMAGE_USAGE_TRANSFER_DST_BIT</code> usage flag</p>
</li>
<li>
<p><a id="VUID-VkResolveImageInfo2-dstImage-06765" href="#VUID-VkResolveImageInfo2-dstImage-06765"></a> <span class="vuid">VUID-VkResolveImageInfo2-dstImage-06765</span><br>

The <a href="resources.html#resources-image-format-features" class="xref page">format features</a> of
<code>dstImage</code> <strong>must</strong> contain <code>VK_FORMAT_FEATURE_TRANSFER_DST_BIT</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkResolveImageInfo2-sType-sType" href="#VUID-VkResolveImageInfo2-sType-sType"></a> <span class="vuid">VUID-VkResolveImageInfo2-sType-sType</span><br>
 <code>sType</code> <strong>must</strong> be <code>VK_STRUCTURE_TYPE_RESOLVE_IMAGE_INFO_2</code></p>
</li>
<li>
<p><a id="VUID-VkResolveImageInfo2-pNext-pNext" href="#VUID-VkResolveImageInfo2-pNext-pNext"></a> <span class="vuid">VUID-VkResolveImageInfo2-pNext-pNext</span><br>
 <code>pNext</code> <strong>must</strong> be <code>NULL</code></p>
</li>
<li>
<p><a id="VUID-VkResolveImageInfo2-srcImage-parameter" href="#VUID-VkResolveImageInfo2-srcImage-parameter"></a> <span class="vuid">VUID-VkResolveImageInfo2-srcImage-parameter</span><br>
 <code>srcImage</code> <strong>must</strong> be a valid <a href="resources.html#VkImage" class="xref page">VkImage</a> handle</p>
</li>
<li>
<p><a id="VUID-VkResolveImageInfo2-srcImageLayout-parameter" href="#VUID-VkResolveImageInfo2-srcImageLayout-parameter"></a> <span class="vuid">VUID-VkResolveImageInfo2-srcImageLayout-parameter</span><br>
 <code>srcImageLayout</code> <strong>must</strong> be a valid <a href="resources.html#VkImageLayout" class="xref page">VkImageLayout</a> value</p>
</li>
<li>
<p><a id="VUID-VkResolveImageInfo2-dstImage-parameter" href="#VUID-VkResolveImageInfo2-dstImage-parameter"></a> <span class="vuid">VUID-VkResolveImageInfo2-dstImage-parameter</span><br>
 <code>dstImage</code> <strong>must</strong> be a valid <a href="resources.html#VkImage" class="xref page">VkImage</a> handle</p>
</li>
<li>
<p><a id="VUID-VkResolveImageInfo2-dstImageLayout-parameter" href="#VUID-VkResolveImageInfo2-dstImageLayout-parameter"></a> <span class="vuid">VUID-VkResolveImageInfo2-dstImageLayout-parameter</span><br>
 <code>dstImageLayout</code> <strong>must</strong> be a valid <a href="resources.html#VkImageLayout" class="xref page">VkImageLayout</a> value</p>
</li>
<li>
<p><a id="VUID-VkResolveImageInfo2-pRegions-parameter" href="#VUID-VkResolveImageInfo2-pRegions-parameter"></a> <span class="vuid">VUID-VkResolveImageInfo2-pRegions-parameter</span><br>
 <code>pRegions</code> <strong>must</strong> be a valid pointer to an array of <code>regionCount</code> valid <a href="#VkImageResolve2">VkImageResolve2</a> structures</p>
</li>
<li>
<p><a id="VUID-VkResolveImageInfo2-regionCount-arraylength" href="#VUID-VkResolveImageInfo2-regionCount-arraylength"></a> <span class="vuid">VUID-VkResolveImageInfo2-regionCount-arraylength</span><br>
 <code>regionCount</code> <strong>must</strong> be greater than <code>0</code></p>
</li>
<li>
<p><a id="VUID-VkResolveImageInfo2-commonparent" href="#VUID-VkResolveImageInfo2-commonparent"></a> <span class="vuid">VUID-VkResolveImageInfo2-commonparent</span><br>
 Both of <code>dstImage</code>, and <code>srcImage</code> <strong>must</strong> have been created, allocated, or retrieved from the same <a href="devsandqueues.html#VkDevice" class="xref page">VkDevice</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>VkImageResolve2</code> structure is defined as:</p>
</div>
<div id="VkImageResolve2" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_VERSION_1_3
typedef struct VkImageResolve2 {
    VkStructureType             sType;
    const void*                 pNext;
    VkImageSubresourceLayers    srcSubresource;
    VkOffset3D                  srcOffset;
    VkImageSubresourceLayers    dstSubresource;
    VkOffset3D                  dstOffset;
    VkExtent3D                  extent;
} VkImageResolve2;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is a <a href="fundamentals.html#VkStructureType" class="xref page">VkStructureType</a> value identifying this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>srcSubresource</code> and <code>dstSubresource</code> are
<a href="#VkImageSubresourceLayers">VkImageSubresourceLayers</a> structures specifying the image
subresources of the images used for the source and destination image
data, respectively.
Resolve of depth/stencil images is not supported.</p>
</li>
<li>
<p><code>srcOffset</code> and <code>dstOffset</code> select the initial <code>x</code>, <code>y</code>,
and <code>z</code> offsets in texels of the sub-regions of the source and
destination image data.</p>
</li>
<li>
<p><code>extent</code> is the size in texels of the source image to resolve in
<code>width</code>, <code>height</code> and <code>depth</code>.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkImageResolve2-aspectMask-00266" href="#VUID-VkImageResolve2-aspectMask-00266"></a> <span class="vuid">VUID-VkImageResolve2-aspectMask-00266</span><br>

The <code>aspectMask</code> member of <code>srcSubresource</code> and
<code>dstSubresource</code> <strong>must</strong> only contain <code>VK_IMAGE_ASPECT_COLOR_BIT</code></p>
</li>
<li>
<p><a id="VUID-VkImageResolve2-layerCount-08803" href="#VUID-VkImageResolve2-layerCount-08803"></a> <span class="vuid">VUID-VkImageResolve2-layerCount-08803</span><br>

The
    <code>layerCount</code> member of <code>srcSubresource</code> and <code>dstSubresource</code>
    <strong>must</strong> match</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkImageResolve2-sType-sType" href="#VUID-VkImageResolve2-sType-sType"></a> <span class="vuid">VUID-VkImageResolve2-sType-sType</span><br>
 <code>sType</code> <strong>must</strong> be <code>VK_STRUCTURE_TYPE_IMAGE_RESOLVE_2</code></p>
</li>
<li>
<p><a id="VUID-VkImageResolve2-pNext-pNext" href="#VUID-VkImageResolve2-pNext-pNext"></a> <span class="vuid">VUID-VkImageResolve2-pNext-pNext</span><br>
 <code>pNext</code> <strong>must</strong> be <code>NULL</code></p>
</li>
<li>
<p><a id="VUID-VkImageResolve2-srcSubresource-parameter" href="#VUID-VkImageResolve2-srcSubresource-parameter"></a> <span class="vuid">VUID-VkImageResolve2-srcSubresource-parameter</span><br>
 <code>srcSubresource</code> <strong>must</strong> be a valid <a href="#VkImageSubresourceLayers">VkImageSubresourceLayers</a> structure</p>
</li>
<li>
<p><a id="VUID-VkImageResolve2-dstSubresource-parameter" href="#VUID-VkImageResolve2-dstSubresource-parameter"></a> <span class="vuid">VUID-VkImageResolve2-dstSubresource-parameter</span><br>
 <code>dstSubresource</code> <strong>must</strong> be a valid <a href="#VkImageSubresourceLayers">VkImageSubresourceLayers</a> structure</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</article>
  </div>
</main>
</div>
<script id="site-script" src="../../../_/js/site.js" data-ui-root-path="../../../_"></script>
<script async src="../../../_/js/vendor/highlight.js"></script>
<script src="../../../_/js/vendor/lunr.js"></script>
<script src="../../../_/js/search-ui.js" id="search-ui-script" data-site-root-path="../../.." data-snippet-length="100" data-stylesheet="../../../_/css/search.css"></script>
<script async src="../../../search-index.js"></script>
  </body>
</html>
