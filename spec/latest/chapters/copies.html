<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Copy Commands :: Vulkan Documentation Project Demo</title>
    <meta name="generator" content="Antora 3.1.4">
    <link rel="stylesheet" href="../../../_/css/site.css">
    <script>var uiRootPath = '../../../_'</script>
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="../../.."><img class="navbar-item" alt="Vulkan White Label" src="../../../_/Vulkan_White_Dec16.svg" /></a>
      <div class="navbar-item search hide-for-print">
        <div id="search-field" class="field">
          <label for="search-input"></label><input id="search-input" type="text" placeholder="Search the docs">
        </div>
      </div>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <!-- <a class="navbar-item" href="#">Home</a> -->
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Specs</a>
          <div class="navbar-dropdown is-right">
            <a class="navbar-item" href="../../../spec/latest/chapters/introduction.html">Vulkan 1.3</a>
            <a class="navbar-item" href="https://registry.khronos.org/OpenGL/specs/gl/GLSLangSpec.4.60.html">GLSL</a>
            <a class="navbar-item" href="/guide/latest/hlsl.html">HLSL</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Education</a>
          <div class="navbar-dropdown is-right">
            <a class="navbar-item" href="../../../guide/latest/index.html">Vulkan Guide</a>
            <a class="navbar-item" href="../../../tutorial/latest/index.html">Vulkan Tutorial</a>
            <a class="navbar-item" href="../../../samples/latest/README.html">Vulkan Samples</a>
            <a class="navbar-item" href="https://www.youtube.com/c/vulkan">YouTube</a>
            <a class="navbar-item" href="https://vulkan.org">More Info at Vulkan.org</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Community</a>
          <div class="navbar-dropdown is-right">
            <a class="navbar-item" href="https://discord.gg/vulkan">Vulkan Discord</a>
            <a class="navbar-item" href="https://reddit.com/r/vulkan">Reddit</a>
            <a class="navbar-item" href="https://stackoverflow.com/questions/tagged/vulkan">Stack Overflow</a>
            <a class="navbar-item" href="https://twitter.com/vulkanapi">X</a>
            <a class="navbar-item" href="https://fosstodon.org/@vulkan">Mastodon</a>
          </div>
        </div>
      </div>
    </div>
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="spec" data-version="latest">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="../index.html">Vulkan Specification and Proposals</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="introduction.html">Introduction</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="fundamentals.html">Fundamentals</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="initialization.html">Initialization</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="devsandqueues.html">Devices and Queues</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="cmdbuffers.html">Command Buffers</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="synchronization.html">Synchronization and Cache Control</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="renderpass.html">Render Pass</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="shaders.html">Shaders</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="pipelines.html">Pipelines</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="memory.html">Memory Allocation</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="resources.html">Resource Creation</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="samplers.html">Samplers</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="descriptorsets.html">Resource Descriptors</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="interfaces.html">Shader Interfaces</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="textures.html">Image Operations</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="fragmentdensitymapops.html">Fragment Density Map Operations</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="queries.html">Queries</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="clears.html">Clear Commands</a>
  </li>
  <li class="nav-item is-current-page" data-depth="1">
    <a class="nav-link" href="copies.html">Copy Commands</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="drawing.html">Drawing Commands</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="fxvertex.html">Fixed-Function Vertex Processing</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="tessellation.html">Tessellation</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="geometry.html">Geometry Shading</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="VK_NV_mesh_shader/mesh.html">Mesh Shading</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="VK_HUAWEI_cluster_culling_shader/clusterculling.html">Cluster Culling Shading</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="vertexpostproc.html">Fixed-Function Vertex Post-Processing</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="primsrast.html">Rasterization</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="fragops.html">Fragment Operations</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="framebuffer.html">The Framebuffer</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="dispatch.html">Dispatching Commands</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="VK_NV_device_generated_commands/generatedcommands.html">Device-Generated Commands</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="sparsemem.html">Sparse Resources</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="VK_KHR_surface/wsi.html">Window System Integration (WSI)</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="VK_KHR_deferred_host_operations/deferred_host_operations.html">Deferred Host Operations</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="VK_EXT_private_data.html">Private Data</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="accelstructures.html">Acceleration Structures</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="VK_EXT_opacity_micromap/micromaps.html">Micromap</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="raytraversal.html">Ray Traversal</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="raytracing.html">Ray Tracing</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="VK_NV_memory_decompression.html">Memory Decompression</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="video_extensions.html">Video Coding</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="VK_NV_optical_flow/optical_flow.html">Optical Flow</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="extensions.html">Extending Vulkan</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="features.html">Features</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="limits.html">Limits</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="formats.html">Formats</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="capabilities.html">Additional Capabilities</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="debugging.html">Debugging</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../appendices/spirvenv.html">Vulkan Environment for SPIR-V</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../appendices/memorymodel.html">Memory Model</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../appendices/compressedtex.html">Compressed Image Formats</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../appendices/versions.html">Core Revisions (Informative)</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../appendices/extensions.html">Layers &amp; Extensions (Informative)</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../appendices/roadmap.html">Vulkan Roadmap Milestones</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../appendices/boilerplate.html">API Boilerplate</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../appendices/invariance.html">Invariance</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../appendices/glossary.html">Lexicon</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../appendices/credits.html">Credits (Informative)</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../proposals/index.html">Vulkan Proposals</a>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Vulkan Roadmap</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../proposals/proposals/Roadmap.html">Vulkan Roadmap</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Extension Proposals</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../proposals/proposals/VK_AMD_shader_early_and_late_fragment_tests.html">VK_AMD_shader_early_and_late_fragment_tests</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../proposals/proposals/VK_EXT_attachment_feedback_loop_layout.html">VK_EXT_attachment_feedback_loop_layout</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../proposals/proposals/VK_EXT_graphics_pipeline_library.html">VK_EXT_graphics_pipeline_library</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../proposals/proposals/VK_EXT_image_2d_array_of_3d.html">VK_EXT_image_2d_array_of_3d</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../proposals/proposals/VK_EXT_image_compression_control.html">VK_EXT_image_compression_control</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../proposals/proposals/VK_EXT_metal_objects.html">VK_EXT_metal_objects</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../proposals/proposals/VK_EXT_multisampled_render_to_single_sampled.html">VK_EXT_multisampled_render_to_single_sampled</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../proposals/proposals/VK_EXT_non_seamless_cube_map.html">VK_EXT_non_seamless_cube_map</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../proposals/proposals/VK_EXT_primitives_generated_query.html">VK_EXT_primitives_generated_query</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../proposals/proposals/VK_EXT_rasterization_order_attachment_access.html">VK_EXT_rasterization_order_attachment_access</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../proposals/proposals/VK_EXT_shader_module_identifier.html">VK_EXT_shader_module_identifier</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../proposals/proposals/VK_EXT_subpass_merge_feedback.html">VK_EXT_subpass_merge_feedback</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../proposals/proposals/VK_GOOGLE_surfaceless_query.html">VK_GOOGLE_surfaceless_query</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../proposals/proposals/VK_HUAWEI_invocation_mask.html">VK_HUAWEI_invocation_mask</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../proposals/proposals/VK_KHR_dynamic_rendering.html">VK_KHR_dynamic_rendering</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../proposals/proposals/VK_KHR_fragment_shader_barycentric.html">VK_KHR_fragment_shader_barycentric</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../proposals/proposals/VK_KHR_fragment_shading_rate.html">VK_KHR_fragment_shading_rate</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../proposals/proposals/VK_KHR_shader_integer_dot_product.html">VK_KHR_shader_integer_dot_product</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../proposals/proposals/VK_QCOM_image_processing.html">VK_QCOM_image_processing</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../proposals/proposals/VK_QCOM_tile_properties.html">VK_QCOM_tile_properties</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Extension Proposal Template</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../proposals/proposals/template.html">Proposal Template</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">Vulkan Specification and Proposals</span>
    <span class="version">latest</span>
  </div>
  <ul class="components">
    <li class="component">
      <a class="title" href="../../../tutorial/latest/00_Introduction.html">Khronos Vulkan Tutorial</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../tutorial/latest/00_Introduction.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../guide/latest/index.html">Vulkan Guide</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../guide/latest/index.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../samples/latest/README.html">Vulkan Samples</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../samples/latest/README.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component is-current">
      <a class="title" href="../index.html">Vulkan Specification and Proposals</a>
      <ul class="versions">
        <li class="version is-current is-latest">
          <a href="../index.html">latest</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="../index.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="../index.html">Vulkan Specification and Proposals</a></li>
    <li><a href="copies.html">Copy Commands</a></li>
  </ul>
</nav>
    <!--
  <div class="edit-this-page"><a href="https://github.com/KhronosGroup/Vulkan-Docs/edit/main/antora/modules/ROOT/pages/chapters/copies.adoc">Edit this Page</a></div>
      -->
</div>
  <div class="content">
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
<article class="doc">
<h1 class="page">Copy Commands</h1>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>An application <strong>can</strong> copy buffer and image data using several methods
described in this chapter, depending on the type of data transfer.</p>
</div>
<div class="paragraph">
<p>All copy commands are treated as &#8220;transfer&#8221; operations for the purposes of
synchronization barriers.</p>
</div>
<div class="paragraph">
<p>All copy commands that have a source format with an X component in its
format description read <strong>undefined</strong> values from those bits.</p>
</div>
<div class="paragraph">
<p>All copy commands that have a destination format with an X component in its
format description write <strong>undefined</strong> values to those bits.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="copies-buffers"><a class="anchor" href="#copies-buffers"></a>Copying Data Between Buffers</h2>
<div class="sectionbody">
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>To copy data between buffer objects, call:</p>
</div>
<div id="vkCmdCopyBuffer" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_VERSION_1_0
void vkCmdCopyBuffer(
    VkCommandBuffer                             commandBuffer,
    VkBuffer                                    srcBuffer,
    VkBuffer                                    dstBuffer,
    uint32_t                                    regionCount,
    const VkBufferCopy*                         pRegions);</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>commandBuffer</code> is the command buffer into which the command will be
recorded.</p>
</li>
<li>
<p><code>srcBuffer</code> is the source buffer.</p>
</li>
<li>
<p><code>dstBuffer</code> is the destination buffer.</p>
</li>
<li>
<p><code>regionCount</code> is the number of regions to copy.</p>
</li>
<li>
<p><code>pRegions</code> is a pointer to an array of <a href="#VkBufferCopy">VkBufferCopy</a> structures
specifying the regions to copy.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Each source region specified by <code>pRegions</code> is copied from the source
buffer to the destination region of the destination buffer.
If any of the specified regions in <code>srcBuffer</code> overlaps in memory with
any of the specified regions in <code>dstBuffer</code>, values read from those
overlapping regions are <strong>undefined</strong>.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCmdCopyBuffer-commandBuffer-01822" href="#VUID-vkCmdCopyBuffer-commandBuffer-01822"></a> <span class="vuid">VUID-vkCmdCopyBuffer-commandBuffer-01822</span><br>

If <code>commandBuffer</code> is an unprotected command buffer and
<a href="devsandqueues.html#limits-protectedNoFault" class="xref page"><code>protectedNoFault</code></a> is not supported,
<code>srcBuffer</code> <strong>must</strong> not be a protected buffer</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyBuffer-commandBuffer-01823" href="#VUID-vkCmdCopyBuffer-commandBuffer-01823"></a> <span class="vuid">VUID-vkCmdCopyBuffer-commandBuffer-01823</span><br>

If <code>commandBuffer</code> is an unprotected command buffer and
<a href="devsandqueues.html#limits-protectedNoFault" class="xref page"><code>protectedNoFault</code></a> is not supported,
<code>dstBuffer</code> <strong>must</strong> not be a protected buffer</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyBuffer-commandBuffer-01824" href="#VUID-vkCmdCopyBuffer-commandBuffer-01824"></a> <span class="vuid">VUID-vkCmdCopyBuffer-commandBuffer-01824</span><br>

If <code>commandBuffer</code> is a protected command buffer and
<a href="devsandqueues.html#limits-protectedNoFault" class="xref page"><code>protectedNoFault</code></a> is not supported,
<code>dstBuffer</code> <strong>must</strong> not be an unprotected buffer</p>
</li>
</ul>
</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCmdCopyBuffer-srcOffset-00113" href="#VUID-vkCmdCopyBuffer-srcOffset-00113"></a> <span class="vuid">VUID-vkCmdCopyBuffer-srcOffset-00113</span><br>

The <code>srcOffset</code> member of each element of <code>pRegions</code> <strong>must</strong> be
less than the size of <code>srcBuffer</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyBuffer-dstOffset-00114" href="#VUID-vkCmdCopyBuffer-dstOffset-00114"></a> <span class="vuid">VUID-vkCmdCopyBuffer-dstOffset-00114</span><br>

The <code>dstOffset</code> member of each element of <code>pRegions</code> <strong>must</strong> be
less than the size of <code>dstBuffer</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyBuffer-size-00115" href="#VUID-vkCmdCopyBuffer-size-00115"></a> <span class="vuid">VUID-vkCmdCopyBuffer-size-00115</span><br>

The <code>size</code> member of each element of <code>pRegions</code> <strong>must</strong> be less
than or equal to the size of <code>srcBuffer</code> minus <code>srcOffset</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyBuffer-size-00116" href="#VUID-vkCmdCopyBuffer-size-00116"></a> <span class="vuid">VUID-vkCmdCopyBuffer-size-00116</span><br>

The <code>size</code> member of each element of <code>pRegions</code> <strong>must</strong> be less
than or equal to the size of <code>dstBuffer</code> minus <code>dstOffset</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyBuffer-pRegions-00117" href="#VUID-vkCmdCopyBuffer-pRegions-00117"></a> <span class="vuid">VUID-vkCmdCopyBuffer-pRegions-00117</span><br>

The union of the source regions, and the union of the destination
regions, specified by the elements of <code>pRegions</code>, <strong>must</strong> not overlap
in memory</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyBuffer-srcBuffer-00118" href="#VUID-vkCmdCopyBuffer-srcBuffer-00118"></a> <span class="vuid">VUID-vkCmdCopyBuffer-srcBuffer-00118</span><br>

<code>srcBuffer</code> <strong>must</strong> have been created with
<code>VK_BUFFER_USAGE_TRANSFER_SRC_BIT</code> usage flag</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyBuffer-srcBuffer-00119" href="#VUID-vkCmdCopyBuffer-srcBuffer-00119"></a> <span class="vuid">VUID-vkCmdCopyBuffer-srcBuffer-00119</span><br>

If <code>srcBuffer</code> is non-sparse then it <strong>must</strong> be bound completely and
contiguously to a single <code>VkDeviceMemory</code> object</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyBuffer-dstBuffer-00120" href="#VUID-vkCmdCopyBuffer-dstBuffer-00120"></a> <span class="vuid">VUID-vkCmdCopyBuffer-dstBuffer-00120</span><br>

<code>dstBuffer</code> <strong>must</strong> have been created with
<code>VK_BUFFER_USAGE_TRANSFER_DST_BIT</code> usage flag</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyBuffer-dstBuffer-00121" href="#VUID-vkCmdCopyBuffer-dstBuffer-00121"></a> <span class="vuid">VUID-vkCmdCopyBuffer-dstBuffer-00121</span><br>

If <code>dstBuffer</code> is non-sparse then it <strong>must</strong> be bound completely and
contiguously to a single <code>VkDeviceMemory</code> object</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCmdCopyBuffer-commandBuffer-parameter" href="#VUID-vkCmdCopyBuffer-commandBuffer-parameter"></a> <span class="vuid">VUID-vkCmdCopyBuffer-commandBuffer-parameter</span><br>
 <code>commandBuffer</code> <strong>must</strong> be a valid <a href="cmdbuffers.html#VkCommandBuffer" class="xref page">VkCommandBuffer</a> handle</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyBuffer-srcBuffer-parameter" href="#VUID-vkCmdCopyBuffer-srcBuffer-parameter"></a> <span class="vuid">VUID-vkCmdCopyBuffer-srcBuffer-parameter</span><br>
 <code>srcBuffer</code> <strong>must</strong> be a valid <a href="resources.html#VkBuffer" class="xref page">VkBuffer</a> handle</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyBuffer-dstBuffer-parameter" href="#VUID-vkCmdCopyBuffer-dstBuffer-parameter"></a> <span class="vuid">VUID-vkCmdCopyBuffer-dstBuffer-parameter</span><br>
 <code>dstBuffer</code> <strong>must</strong> be a valid <a href="resources.html#VkBuffer" class="xref page">VkBuffer</a> handle</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyBuffer-pRegions-parameter" href="#VUID-vkCmdCopyBuffer-pRegions-parameter"></a> <span class="vuid">VUID-vkCmdCopyBuffer-pRegions-parameter</span><br>
 <code>pRegions</code> <strong>must</strong> be a valid pointer to an array of <code>regionCount</code> valid <a href="#VkBufferCopy">VkBufferCopy</a> structures</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyBuffer-commandBuffer-recording" href="#VUID-vkCmdCopyBuffer-commandBuffer-recording"></a> <span class="vuid">VUID-vkCmdCopyBuffer-commandBuffer-recording</span><br>
 <code>commandBuffer</code> <strong>must</strong> be in the <a href="cmdbuffers.html#commandbuffers-lifecycle" class="xref page">recording state</a></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyBuffer-commandBuffer-cmdpool" href="#VUID-vkCmdCopyBuffer-commandBuffer-cmdpool"></a> <span class="vuid">VUID-vkCmdCopyBuffer-commandBuffer-cmdpool</span><br>
 The <code>VkCommandPool</code> that <code>commandBuffer</code> was allocated from <strong>must</strong> support transfer, graphics, or compute operations</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyBuffer-renderpass" href="#VUID-vkCmdCopyBuffer-renderpass"></a> <span class="vuid">VUID-vkCmdCopyBuffer-renderpass</span><br>
 This command <strong>must</strong> only be called outside of a render pass instance</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyBuffer-videocoding" href="#VUID-vkCmdCopyBuffer-videocoding"></a> <span class="vuid">VUID-vkCmdCopyBuffer-videocoding</span><br>
 This command <strong>must</strong> only be called outside of a video coding scope</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyBuffer-regionCount-arraylength" href="#VUID-vkCmdCopyBuffer-regionCount-arraylength"></a> <span class="vuid">VUID-vkCmdCopyBuffer-regionCount-arraylength</span><br>
 <code>regionCount</code> <strong>must</strong> be greater than <code>0</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyBuffer-commonparent" href="#VUID-vkCmdCopyBuffer-commonparent"></a> <span class="vuid">VUID-vkCmdCopyBuffer-commonparent</span><br>
 Each of <code>commandBuffer</code>, <code>dstBuffer</code>, and <code>srcBuffer</code> <strong>must</strong> have been created, allocated, or retrieved from the same <a href="devsandqueues.html#VkDevice" class="xref page">VkDevice</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Host Synchronization</div>
<div class="ulist">
<ul>
<li>
<p>Host access to <code>commandBuffer</code> <strong>must</strong> be externally synchronized</p>
</li>
<li>
<p>Host access to the <code>VkCommandPool</code> that <code>commandBuffer</code> was allocated from <strong>must</strong> be externally synchronized</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Command Properties</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><a href="cmdbuffers.html#VkCommandBufferLevel" class="xref page">Command Buffer Levels</a></th>
<th class="tableblock halign-left valign-top"><a href="renderpass.html#vkCmdBeginRenderPass" class="xref page">Render Pass Scope</a></th>
<th class="tableblock halign-left valign-top"><a href="video_extensions.html#vkCmdBeginVideoCodingKHR" class="xref page">Video Coding Scope</a></th>
<th class="tableblock halign-left valign-top"><a href="devsandqueues.html#VkQueueFlagBits" class="xref page">Supported Queue Types</a></th>
<th class="tableblock halign-left valign-top"><a href="fundamentals.html#fundamentals-queueoperation-command-types" class="xref page">Command Type</a></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Primary<br>
Secondary</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Outside</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Outside</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Transfer<br>
Graphics<br>
Compute</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Action</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>VkBufferCopy</code> structure is defined as:</p>
</div>
<div id="VkBufferCopy" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_VERSION_1_0
typedef struct VkBufferCopy {
    VkDeviceSize    srcOffset;
    VkDeviceSize    dstOffset;
    VkDeviceSize    size;
} VkBufferCopy;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>srcOffset</code> is the starting offset in bytes from the start of
<code>srcBuffer</code>.</p>
</li>
<li>
<p><code>dstOffset</code> is the starting offset in bytes from the start of
<code>dstBuffer</code>.</p>
</li>
<li>
<p><code>size</code> is the number of bytes to copy.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkBufferCopy-size-01988" href="#VUID-VkBufferCopy-size-01988"></a> <span class="vuid">VUID-VkBufferCopy-size-01988</span><br>

The <code>size</code> <strong>must</strong> be greater than <code>0</code></p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>A more extensible version of the copy buffer command is defined below.</p>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>To copy data between buffer objects, call:</p>
</div>
<div id="vkCmdCopyBuffer2" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_VERSION_1_3
void vkCmdCopyBuffer2(
    VkCommandBuffer                             commandBuffer,
    const VkCopyBufferInfo2*                    pCopyBufferInfo);</code></pre>
</div>
</div>
<div class="paragraph">
<p>or the equivalent command</p>
</div>
<div id="vkCmdCopyBuffer2KHR" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_KHR_copy_commands2
void vkCmdCopyBuffer2KHR(
    VkCommandBuffer                             commandBuffer,
    const VkCopyBufferInfo2*                    pCopyBufferInfo);</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>commandBuffer</code> is the command buffer into which the command will be
recorded.</p>
</li>
<li>
<p><code>pCopyBufferInfo</code> is a pointer to a <a href="#VkCopyBufferInfo2">VkCopyBufferInfo2</a>
structure describing the copy parameters.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Each source region specified by <code>pCopyBufferInfo-&gt;pRegions</code> is copied
from the source buffer to the destination region of the destination buffer.
If any of the specified regions in <code>pCopyBufferInfo-&gt;srcBuffer</code> overlaps
in memory with any of the specified regions in
<code>pCopyBufferInfo-&gt;dstBuffer</code>, values read from those overlapping regions
are <strong>undefined</strong>.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCmdCopyBuffer2-commandBuffer-01822" href="#VUID-vkCmdCopyBuffer2-commandBuffer-01822"></a> <span class="vuid">VUID-vkCmdCopyBuffer2-commandBuffer-01822</span><br>

If <code>commandBuffer</code> is an unprotected command buffer and
<a href="devsandqueues.html#limits-protectedNoFault" class="xref page"><code>protectedNoFault</code></a> is not supported,
<code>srcBuffer</code> <strong>must</strong> not be a protected buffer</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyBuffer2-commandBuffer-01823" href="#VUID-vkCmdCopyBuffer2-commandBuffer-01823"></a> <span class="vuid">VUID-vkCmdCopyBuffer2-commandBuffer-01823</span><br>

If <code>commandBuffer</code> is an unprotected command buffer and
<a href="devsandqueues.html#limits-protectedNoFault" class="xref page"><code>protectedNoFault</code></a> is not supported,
<code>dstBuffer</code> <strong>must</strong> not be a protected buffer</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyBuffer2-commandBuffer-01824" href="#VUID-vkCmdCopyBuffer2-commandBuffer-01824"></a> <span class="vuid">VUID-vkCmdCopyBuffer2-commandBuffer-01824</span><br>

If <code>commandBuffer</code> is a protected command buffer and
<a href="devsandqueues.html#limits-protectedNoFault" class="xref page"><code>protectedNoFault</code></a> is not supported,
<code>dstBuffer</code> <strong>must</strong> not be an unprotected buffer</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCmdCopyBuffer2-commandBuffer-parameter" href="#VUID-vkCmdCopyBuffer2-commandBuffer-parameter"></a> <span class="vuid">VUID-vkCmdCopyBuffer2-commandBuffer-parameter</span><br>
 <code>commandBuffer</code> <strong>must</strong> be a valid <a href="cmdbuffers.html#VkCommandBuffer" class="xref page">VkCommandBuffer</a> handle</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyBuffer2-pCopyBufferInfo-parameter" href="#VUID-vkCmdCopyBuffer2-pCopyBufferInfo-parameter"></a> <span class="vuid">VUID-vkCmdCopyBuffer2-pCopyBufferInfo-parameter</span><br>
 <code>pCopyBufferInfo</code> <strong>must</strong> be a valid pointer to a valid <a href="#VkCopyBufferInfo2">VkCopyBufferInfo2</a> structure</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyBuffer2-commandBuffer-recording" href="#VUID-vkCmdCopyBuffer2-commandBuffer-recording"></a> <span class="vuid">VUID-vkCmdCopyBuffer2-commandBuffer-recording</span><br>
 <code>commandBuffer</code> <strong>must</strong> be in the <a href="cmdbuffers.html#commandbuffers-lifecycle" class="xref page">recording state</a></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyBuffer2-commandBuffer-cmdpool" href="#VUID-vkCmdCopyBuffer2-commandBuffer-cmdpool"></a> <span class="vuid">VUID-vkCmdCopyBuffer2-commandBuffer-cmdpool</span><br>
 The <code>VkCommandPool</code> that <code>commandBuffer</code> was allocated from <strong>must</strong> support transfer, graphics, or compute operations</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyBuffer2-renderpass" href="#VUID-vkCmdCopyBuffer2-renderpass"></a> <span class="vuid">VUID-vkCmdCopyBuffer2-renderpass</span><br>
 This command <strong>must</strong> only be called outside of a render pass instance</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyBuffer2-videocoding" href="#VUID-vkCmdCopyBuffer2-videocoding"></a> <span class="vuid">VUID-vkCmdCopyBuffer2-videocoding</span><br>
 This command <strong>must</strong> only be called outside of a video coding scope</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Host Synchronization</div>
<div class="ulist">
<ul>
<li>
<p>Host access to <code>commandBuffer</code> <strong>must</strong> be externally synchronized</p>
</li>
<li>
<p>Host access to the <code>VkCommandPool</code> that <code>commandBuffer</code> was allocated from <strong>must</strong> be externally synchronized</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Command Properties</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><a href="cmdbuffers.html#VkCommandBufferLevel" class="xref page">Command Buffer Levels</a></th>
<th class="tableblock halign-left valign-top"><a href="renderpass.html#vkCmdBeginRenderPass" class="xref page">Render Pass Scope</a></th>
<th class="tableblock halign-left valign-top"><a href="video_extensions.html#vkCmdBeginVideoCodingKHR" class="xref page">Video Coding Scope</a></th>
<th class="tableblock halign-left valign-top"><a href="devsandqueues.html#VkQueueFlagBits" class="xref page">Supported Queue Types</a></th>
<th class="tableblock halign-left valign-top"><a href="fundamentals.html#fundamentals-queueoperation-command-types" class="xref page">Command Type</a></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Primary<br>
Secondary</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Outside</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Outside</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Transfer<br>
Graphics<br>
Compute</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Action</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>VkCopyBufferInfo2</code> structure is defined as:</p>
</div>
<div id="VkCopyBufferInfo2" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_VERSION_1_3
typedef struct VkCopyBufferInfo2 {
    VkStructureType         sType;
    const void*             pNext;
    VkBuffer                srcBuffer;
    VkBuffer                dstBuffer;
    uint32_t                regionCount;
    const VkBufferCopy2*    pRegions;
} VkCopyBufferInfo2;</code></pre>
</div>
</div>
<div class="paragraph">
<p>or the equivalent</p>
</div>
<div id="VkCopyBufferInfo2KHR" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_KHR_copy_commands2
typedef VkCopyBufferInfo2 VkCopyBufferInfo2KHR;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is a <a href="fundamentals.html#VkStructureType" class="xref page">VkStructureType</a> value identifying this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>srcBuffer</code> is the source buffer.</p>
</li>
<li>
<p><code>dstBuffer</code> is the destination buffer.</p>
</li>
<li>
<p><code>regionCount</code> is the number of regions to copy.</p>
</li>
<li>
<p><code>pRegions</code> is a pointer to an array of <a href="#VkBufferCopy2">VkBufferCopy2</a>
structures specifying the regions to copy.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkCopyBufferInfo2-srcOffset-00113" href="#VUID-VkCopyBufferInfo2-srcOffset-00113"></a> <span class="vuid">VUID-VkCopyBufferInfo2-srcOffset-00113</span><br>

The <code>srcOffset</code> member of each element of <code>pRegions</code> <strong>must</strong> be
less than the size of <code>srcBuffer</code></p>
</li>
<li>
<p><a id="VUID-VkCopyBufferInfo2-dstOffset-00114" href="#VUID-VkCopyBufferInfo2-dstOffset-00114"></a> <span class="vuid">VUID-VkCopyBufferInfo2-dstOffset-00114</span><br>

The <code>dstOffset</code> member of each element of <code>pRegions</code> <strong>must</strong> be
less than the size of <code>dstBuffer</code></p>
</li>
<li>
<p><a id="VUID-VkCopyBufferInfo2-size-00115" href="#VUID-VkCopyBufferInfo2-size-00115"></a> <span class="vuid">VUID-VkCopyBufferInfo2-size-00115</span><br>

The <code>size</code> member of each element of <code>pRegions</code> <strong>must</strong> be less
than or equal to the size of <code>srcBuffer</code> minus <code>srcOffset</code></p>
</li>
<li>
<p><a id="VUID-VkCopyBufferInfo2-size-00116" href="#VUID-VkCopyBufferInfo2-size-00116"></a> <span class="vuid">VUID-VkCopyBufferInfo2-size-00116</span><br>

The <code>size</code> member of each element of <code>pRegions</code> <strong>must</strong> be less
than or equal to the size of <code>dstBuffer</code> minus <code>dstOffset</code></p>
</li>
<li>
<p><a id="VUID-VkCopyBufferInfo2-pRegions-00117" href="#VUID-VkCopyBufferInfo2-pRegions-00117"></a> <span class="vuid">VUID-VkCopyBufferInfo2-pRegions-00117</span><br>

The union of the source regions, and the union of the destination
regions, specified by the elements of <code>pRegions</code>, <strong>must</strong> not overlap
in memory</p>
</li>
<li>
<p><a id="VUID-VkCopyBufferInfo2-srcBuffer-00118" href="#VUID-VkCopyBufferInfo2-srcBuffer-00118"></a> <span class="vuid">VUID-VkCopyBufferInfo2-srcBuffer-00118</span><br>

<code>srcBuffer</code> <strong>must</strong> have been created with
<code>VK_BUFFER_USAGE_TRANSFER_SRC_BIT</code> usage flag</p>
</li>
<li>
<p><a id="VUID-VkCopyBufferInfo2-srcBuffer-00119" href="#VUID-VkCopyBufferInfo2-srcBuffer-00119"></a> <span class="vuid">VUID-VkCopyBufferInfo2-srcBuffer-00119</span><br>

If <code>srcBuffer</code> is non-sparse then it <strong>must</strong> be bound completely and
contiguously to a single <code>VkDeviceMemory</code> object</p>
</li>
<li>
<p><a id="VUID-VkCopyBufferInfo2-dstBuffer-00120" href="#VUID-VkCopyBufferInfo2-dstBuffer-00120"></a> <span class="vuid">VUID-VkCopyBufferInfo2-dstBuffer-00120</span><br>

<code>dstBuffer</code> <strong>must</strong> have been created with
<code>VK_BUFFER_USAGE_TRANSFER_DST_BIT</code> usage flag</p>
</li>
<li>
<p><a id="VUID-VkCopyBufferInfo2-dstBuffer-00121" href="#VUID-VkCopyBufferInfo2-dstBuffer-00121"></a> <span class="vuid">VUID-VkCopyBufferInfo2-dstBuffer-00121</span><br>

If <code>dstBuffer</code> is non-sparse then it <strong>must</strong> be bound completely and
contiguously to a single <code>VkDeviceMemory</code> object</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkCopyBufferInfo2-sType-sType" href="#VUID-VkCopyBufferInfo2-sType-sType"></a> <span class="vuid">VUID-VkCopyBufferInfo2-sType-sType</span><br>
 <code>sType</code> <strong>must</strong> be <code>VK_STRUCTURE_TYPE_COPY_BUFFER_INFO_2</code></p>
</li>
<li>
<p><a id="VUID-VkCopyBufferInfo2-pNext-pNext" href="#VUID-VkCopyBufferInfo2-pNext-pNext"></a> <span class="vuid">VUID-VkCopyBufferInfo2-pNext-pNext</span><br>
 <code>pNext</code> <strong>must</strong> be <code>NULL</code></p>
</li>
<li>
<p><a id="VUID-VkCopyBufferInfo2-srcBuffer-parameter" href="#VUID-VkCopyBufferInfo2-srcBuffer-parameter"></a> <span class="vuid">VUID-VkCopyBufferInfo2-srcBuffer-parameter</span><br>
 <code>srcBuffer</code> <strong>must</strong> be a valid <a href="resources.html#VkBuffer" class="xref page">VkBuffer</a> handle</p>
</li>
<li>
<p><a id="VUID-VkCopyBufferInfo2-dstBuffer-parameter" href="#VUID-VkCopyBufferInfo2-dstBuffer-parameter"></a> <span class="vuid">VUID-VkCopyBufferInfo2-dstBuffer-parameter</span><br>
 <code>dstBuffer</code> <strong>must</strong> be a valid <a href="resources.html#VkBuffer" class="xref page">VkBuffer</a> handle</p>
</li>
<li>
<p><a id="VUID-VkCopyBufferInfo2-pRegions-parameter" href="#VUID-VkCopyBufferInfo2-pRegions-parameter"></a> <span class="vuid">VUID-VkCopyBufferInfo2-pRegions-parameter</span><br>
 <code>pRegions</code> <strong>must</strong> be a valid pointer to an array of <code>regionCount</code> valid <a href="#VkBufferCopy2">VkBufferCopy2</a> structures</p>
</li>
<li>
<p><a id="VUID-VkCopyBufferInfo2-regionCount-arraylength" href="#VUID-VkCopyBufferInfo2-regionCount-arraylength"></a> <span class="vuid">VUID-VkCopyBufferInfo2-regionCount-arraylength</span><br>
 <code>regionCount</code> <strong>must</strong> be greater than <code>0</code></p>
</li>
<li>
<p><a id="VUID-VkCopyBufferInfo2-commonparent" href="#VUID-VkCopyBufferInfo2-commonparent"></a> <span class="vuid">VUID-VkCopyBufferInfo2-commonparent</span><br>
 Both of <code>dstBuffer</code>, and <code>srcBuffer</code> <strong>must</strong> have been created, allocated, or retrieved from the same <a href="devsandqueues.html#VkDevice" class="xref page">VkDevice</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>VkBufferCopy2</code> structure is defined as:</p>
</div>
<div id="VkBufferCopy2" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_VERSION_1_3
typedef struct VkBufferCopy2 {
    VkStructureType    sType;
    const void*        pNext;
    VkDeviceSize       srcOffset;
    VkDeviceSize       dstOffset;
    VkDeviceSize       size;
} VkBufferCopy2;</code></pre>
</div>
</div>
<div class="paragraph">
<p>or the equivalent</p>
</div>
<div id="VkBufferCopy2KHR" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_KHR_copy_commands2
typedef VkBufferCopy2 VkBufferCopy2KHR;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is a <a href="fundamentals.html#VkStructureType" class="xref page">VkStructureType</a> value identifying this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>srcOffset</code> is the starting offset in bytes from the start of
<code>srcBuffer</code>.</p>
</li>
<li>
<p><code>dstOffset</code> is the starting offset in bytes from the start of
<code>dstBuffer</code>.</p>
</li>
<li>
<p><code>size</code> is the number of bytes to copy.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkBufferCopy2-size-01988" href="#VUID-VkBufferCopy2-size-01988"></a> <span class="vuid">VUID-VkBufferCopy2-size-01988</span><br>

The <code>size</code> <strong>must</strong> be greater than <code>0</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkBufferCopy2-sType-sType" href="#VUID-VkBufferCopy2-sType-sType"></a> <span class="vuid">VUID-VkBufferCopy2-sType-sType</span><br>
 <code>sType</code> <strong>must</strong> be <code>VK_STRUCTURE_TYPE_BUFFER_COPY_2</code></p>
</li>
<li>
<p><a id="VUID-VkBufferCopy2-pNext-pNext" href="#VUID-VkBufferCopy2-pNext-pNext"></a> <span class="vuid">VUID-VkBufferCopy2-pNext-pNext</span><br>
 <code>pNext</code> <strong>must</strong> be <code>NULL</code></p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="copies-images"><a class="anchor" href="#copies-images"></a>Copying Data Between Images</h2>
<div class="sectionbody">
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>To copy data between image objects, call:</p>
</div>
<div id="vkCmdCopyImage" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_VERSION_1_0
void vkCmdCopyImage(
    VkCommandBuffer                             commandBuffer,
    VkImage                                     srcImage,
    VkImageLayout                               srcImageLayout,
    VkImage                                     dstImage,
    VkImageLayout                               dstImageLayout,
    uint32_t                                    regionCount,
    const VkImageCopy*                          pRegions);</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>commandBuffer</code> is the command buffer into which the command will be
recorded.</p>
</li>
<li>
<p><code>srcImage</code> is the source image.</p>
</li>
<li>
<p><code>srcImageLayout</code> is the current layout of the source image
subresource.</p>
</li>
<li>
<p><code>dstImage</code> is the destination image.</p>
</li>
<li>
<p><code>dstImageLayout</code> is the current layout of the destination image
subresource.</p>
</li>
<li>
<p><code>regionCount</code> is the number of regions to copy.</p>
</li>
<li>
<p><code>pRegions</code> is a pointer to an array of <a href="#VkImageCopy">VkImageCopy</a> structures
specifying the regions to copy.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Each source region specified by <code>pRegions</code> is copied from the source
image to the destination region of the destination image.
If any of the specified regions in <code>srcImage</code> overlaps in memory with
any of the specified regions in <code>dstImage</code>, values read from those
overlapping regions are <strong>undefined</strong>.</p>
</div>
<div class="paragraph">
<p><a href="formats.html#formats-requiring-sampler-ycbcr-conversion" class="xref page">Multi-planar images</a> <strong>can</strong>
only be copied on a per-plane basis, and the subresources used in each
region when copying to or from such images <strong>must</strong> specify only one plane,
though different regions <strong>can</strong> specify different planes.
When copying planes of multi-planar images, the format considered is the
<a href="formats.html#formats-compatible-planes" class="xref page">compatible format for that plane</a>, rather than
the format of the multi-planar image.</p>
</div>
<div class="paragraph">
<p>If the format of the destination image has a different
<a href="formats.html#formats-compatibility-classes" class="xref page">block extent</a> than the source image (e.g.
one is a compressed format), the offset and extent for each of the regions
specified is <a href="formats.html#formats-size-compatibility" class="xref page">scaled according to the blockextents of each format</a> to match in size.
Copy regions for each image <strong>must</strong> be aligned to a multiple of the texel
block extent in each dimension, except at the edges of the image, where
region extents <strong>must</strong> match the edge of the image.</p>
</div>
<div class="paragraph">
<p>Image data <strong>can</strong> be copied between images with different image types.
If one image is <code>VK_IMAGE_TYPE_3D</code> and the other image is
<code>VK_IMAGE_TYPE_2D</code> with multiple layers, then each slice is copied to or
from a different layer; <code>depth</code> slices in the 3D image correspond to
<code>layerCount</code> layers in the 2D image, with an effective <code>depth</code> of
<code>1</code> used for the 2D image.
If <a href="features.html#features-maintenance5" class="xref page"><code>maintenance5</code></a> is enabled, all other
combinations are allowed and function as if 1D images are 2D images with a
height of 1.
Otherwise, other combinations of image types are disallowed.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCmdCopyImage-commandBuffer-01825" href="#VUID-vkCmdCopyImage-commandBuffer-01825"></a> <span class="vuid">VUID-vkCmdCopyImage-commandBuffer-01825</span><br>

If <code>commandBuffer</code> is an unprotected command buffer and
<a href="devsandqueues.html#limits-protectedNoFault" class="xref page"><code>protectedNoFault</code></a> is not supported,
<code>srcImage</code> <strong>must</strong> not be a protected image</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage-commandBuffer-01826" href="#VUID-vkCmdCopyImage-commandBuffer-01826"></a> <span class="vuid">VUID-vkCmdCopyImage-commandBuffer-01826</span><br>

If <code>commandBuffer</code> is an unprotected command buffer and
<a href="devsandqueues.html#limits-protectedNoFault" class="xref page"><code>protectedNoFault</code></a> is not supported,
<code>dstImage</code> <strong>must</strong> not be a protected image</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage-commandBuffer-01827" href="#VUID-vkCmdCopyImage-commandBuffer-01827"></a> <span class="vuid">VUID-vkCmdCopyImage-commandBuffer-01827</span><br>

If <code>commandBuffer</code> is a protected command buffer and
<a href="devsandqueues.html#limits-protectedNoFault" class="xref page"><code>protectedNoFault</code></a> is not supported,
<code>dstImage</code> <strong>must</strong> not be an unprotected image</p>
</li>
</ul>
</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCmdCopyImage-pRegions-00124" href="#VUID-vkCmdCopyImage-pRegions-00124"></a> <span class="vuid">VUID-vkCmdCopyImage-pRegions-00124</span><br>

The union of all source regions, and the union of all destination
regions, specified by the elements of <code>pRegions</code>, <strong>must</strong> not overlap
in memory</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage-srcImage-01995" href="#VUID-vkCmdCopyImage-srcImage-01995"></a> <span class="vuid">VUID-vkCmdCopyImage-srcImage-01995</span><br>

The <a href="resources.html#resources-image-format-features" class="xref page">format features</a> of
<code>srcImage</code> <strong>must</strong> contain <code>VK_FORMAT_FEATURE_TRANSFER_SRC_BIT</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage-srcImageLayout-00128" href="#VUID-vkCmdCopyImage-srcImageLayout-00128"></a> <span class="vuid">VUID-vkCmdCopyImage-srcImageLayout-00128</span><br>

<code>srcImageLayout</code> <strong>must</strong> specify the layout of the image subresources
of <code>srcImage</code> specified in <code>pRegions</code> at the time this command
is executed on a <code>VkDevice</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage-srcImageLayout-01917" href="#VUID-vkCmdCopyImage-srcImageLayout-01917"></a> <span class="vuid">VUID-vkCmdCopyImage-srcImageLayout-01917</span><br>

<code>srcImageLayout</code> <strong>must</strong> be
<code>VK_IMAGE_LAYOUT_TRANSFER_SRC_OPTIMAL</code>,
<code>VK_IMAGE_LAYOUT_GENERAL</code>, or
<code>VK_IMAGE_LAYOUT_SHARED_PRESENT_KHR</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage-dstImage-01996" href="#VUID-vkCmdCopyImage-dstImage-01996"></a> <span class="vuid">VUID-vkCmdCopyImage-dstImage-01996</span><br>

The <a href="resources.html#resources-image-format-features" class="xref page">format features</a> of
<code>dstImage</code> <strong>must</strong> contain <code>VK_FORMAT_FEATURE_TRANSFER_DST_BIT</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage-dstImageLayout-00133" href="#VUID-vkCmdCopyImage-dstImageLayout-00133"></a> <span class="vuid">VUID-vkCmdCopyImage-dstImageLayout-00133</span><br>

<code>dstImageLayout</code> <strong>must</strong> specify the layout of the image subresources
of <code>dstImage</code> specified in <code>pRegions</code> at the time this command
is executed on a <code>VkDevice</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage-dstImageLayout-01395" href="#VUID-vkCmdCopyImage-dstImageLayout-01395"></a> <span class="vuid">VUID-vkCmdCopyImage-dstImageLayout-01395</span><br>

<code>dstImageLayout</code> <strong>must</strong> be
<code>VK_IMAGE_LAYOUT_TRANSFER_DST_OPTIMAL</code>,
<code>VK_IMAGE_LAYOUT_GENERAL</code>, or
<code>VK_IMAGE_LAYOUT_SHARED_PRESENT_KHR</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage-srcImage-01548" href="#VUID-vkCmdCopyImage-srcImage-01548"></a> <span class="vuid">VUID-vkCmdCopyImage-srcImage-01548</span><br>

If the <a href="formats.html#VkFormat" class="xref page">VkFormat</a> of each of <code>srcImage</code> and <code>dstImage</code> is
not a <a href="formats.html#formats-requiring-sampler-ycbcr-conversion" class="xref page"><em>multi-planar    format</em></a>, the <a href="formats.html#VkFormat" class="xref page">VkFormat</a> of each of <code>srcImage</code> and
<code>dstImage</code> <strong>must</strong> be <a href="formats.html#formats-size-compatibility" class="xref page">size-compatible</a></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage-None-01549" href="#VUID-vkCmdCopyImage-None-01549"></a> <span class="vuid">VUID-vkCmdCopyImage-None-01549</span><br>

In a copy to or from a plane of a
<a href="formats.html#formats-requiring-sampler-ycbcr-conversion" class="xref page">multi-planar image</a>, the
<a href="formats.html#VkFormat" class="xref page">VkFormat</a> of the image and plane <strong>must</strong> be compatible according to
<a href="formats.html#formats-compatible-planes" class="xref page">the description of compatible planes</a> for
the plane being copied</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage-srcImage-00136" href="#VUID-vkCmdCopyImage-srcImage-00136"></a> <span class="vuid">VUID-vkCmdCopyImage-srcImage-00136</span><br>

The sample count of <code>srcImage</code> and <code>dstImage</code> <strong>must</strong> match</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage-srcOffset-01783" href="#VUID-vkCmdCopyImage-srcOffset-01783"></a> <span class="vuid">VUID-vkCmdCopyImage-srcOffset-01783</span><br>

The <code>srcOffset</code> and <code>extent</code> members of each element of
<code>pRegions</code> <strong>must</strong> respect the image transfer granularity requirements
of <code>commandBuffer</code>&#8217;s command pool&#8217;s queue family, as described in
<a href="devsandqueues.html#VkQueueFamilyProperties" class="xref page">VkQueueFamilyProperties</a></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage-dstOffset-01784" href="#VUID-vkCmdCopyImage-dstOffset-01784"></a> <span class="vuid">VUID-vkCmdCopyImage-dstOffset-01784</span><br>

The <code>dstOffset</code> and <code>extent</code> members of each element of
<code>pRegions</code> <strong>must</strong> respect the image transfer granularity requirements
of <code>commandBuffer</code>&#8217;s command pool&#8217;s queue family, as described in
<a href="devsandqueues.html#VkQueueFamilyProperties" class="xref page">VkQueueFamilyProperties</a></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage-srcImage-01551" href="#VUID-vkCmdCopyImage-srcImage-01551"></a> <span class="vuid">VUID-vkCmdCopyImage-srcImage-01551</span><br>

If neither <code>srcImage</code> nor <code>dstImage</code> has a
<a href="formats.html#formats-requiring-sampler-ycbcr-conversion" class="xref page">multi-planar image    format</a> then for each element of <code>pRegions</code>,
<code>srcSubresource.aspectMask</code> and <code>dstSubresource.aspectMask</code>
<strong>must</strong> match</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage-srcImage-08713" href="#VUID-vkCmdCopyImage-srcImage-08713"></a> <span class="vuid">VUID-vkCmdCopyImage-srcImage-08713</span><br>

If <code>srcImage</code> has a <a href="formats.html#formats-requiring-sampler-ycbcr-conversion" class="xref page">    multi-planar image format</a>, then for each element of <code>pRegions</code>,
<code>srcSubresource.aspectMask</code> <strong>must</strong> be a single valid
<a href="formats.html#formats-planes-image-aspect" class="xref page">multi-planar aspect mask</a> bit</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage-dstImage-08714" href="#VUID-vkCmdCopyImage-dstImage-08714"></a> <span class="vuid">VUID-vkCmdCopyImage-dstImage-08714</span><br>

If <code>dstImage</code> has a <a href="formats.html#formats-requiring-sampler-ycbcr-conversion" class="xref page">    multi-planar image format</a>, then for each element of <code>pRegions</code>,
<code>dstSubresource.aspectMask</code> <strong>must</strong> be a single valid
<a href="formats.html#formats-planes-image-aspect" class="xref page">multi-planar aspect mask</a> bit</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage-srcImage-01556" href="#VUID-vkCmdCopyImage-srcImage-01556"></a> <span class="vuid">VUID-vkCmdCopyImage-srcImage-01556</span><br>

If <code>srcImage</code> has a
<a href="formats.html#formats-requiring-sampler-ycbcr-conversion" class="xref page">multi-planar image format</a>
and the <code>dstImage</code> does not have a multi-planar image format, then
for each element of <code>pRegions</code>, <code>dstSubresource.aspectMask</code>
<strong>must</strong> be <code>VK_IMAGE_ASPECT_COLOR_BIT</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage-dstImage-01557" href="#VUID-vkCmdCopyImage-dstImage-01557"></a> <span class="vuid">VUID-vkCmdCopyImage-dstImage-01557</span><br>

If <code>dstImage</code> has a
<a href="formats.html#formats-requiring-sampler-ycbcr-conversion" class="xref page">multi-planar image format</a>
and the <code>srcImage</code> does not have a multi-planar image format, then
for each element of <code>pRegions</code>, <code>srcSubresource.aspectMask</code>
<strong>must</strong> be <code>VK_IMAGE_ASPECT_COLOR_BIT</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage-apiVersion-07932" href="#VUID-vkCmdCopyImage-apiVersion-07932"></a> <span class="vuid">VUID-vkCmdCopyImage-apiVersion-07932</span><br>

If the <a href="../appendices/extensions.html#VK_KHR_maintenance1" class="xref page">VK_KHR_maintenance1</a> extension is not enabled,
<a href="devsandqueues.html#VkPhysicalDeviceProperties" class="xref page">VkPhysicalDeviceProperties</a>::<code>apiVersion</code> is less than Vulkan
1.1, and either <code>srcImage</code> or <code>dstImage</code> is of type
<code>VK_IMAGE_TYPE_3D</code>, then for each element of <code>pRegions</code>,
<code>srcSubresource.baseArrayLayer</code> and
<code>dstSubresource.baseArrayLayer</code> <strong>must</strong> each be <code>0</code>, and
<code>srcSubresource.layerCount</code> and <code>dstSubresource.layerCount</code>
<strong>must</strong> each be <code>1</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage-srcImage-04443" href="#VUID-vkCmdCopyImage-srcImage-04443"></a> <span class="vuid">VUID-vkCmdCopyImage-srcImage-04443</span><br>

If <code>srcImage</code> is of type <code>VK_IMAGE_TYPE_3D</code>, then for each
element of <code>pRegions</code>, <code>srcSubresource.baseArrayLayer</code> <strong>must</strong> be
<code>0</code> and <code>srcSubresource.layerCount</code> <strong>must</strong> be <code>1</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage-dstImage-04444" href="#VUID-vkCmdCopyImage-dstImage-04444"></a> <span class="vuid">VUID-vkCmdCopyImage-dstImage-04444</span><br>

If <code>dstImage</code> is of type <code>VK_IMAGE_TYPE_3D</code>, then for each
element of <code>pRegions</code>, <code>dstSubresource.baseArrayLayer</code> <strong>must</strong> be
<code>0</code> and <code>dstSubresource.layerCount</code> <strong>must</strong> be <code>1</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage-aspectMask-00142" href="#VUID-vkCmdCopyImage-aspectMask-00142"></a> <span class="vuid">VUID-vkCmdCopyImage-aspectMask-00142</span><br>

For each element of <code>pRegions</code>, <code>srcSubresource.aspectMask</code>
<strong>must</strong> specify aspects present in <code>srcImage</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage-aspectMask-00143" href="#VUID-vkCmdCopyImage-aspectMask-00143"></a> <span class="vuid">VUID-vkCmdCopyImage-aspectMask-00143</span><br>

For each element of <code>pRegions</code>, <code>dstSubresource.aspectMask</code>
<strong>must</strong> specify aspects present in <code>dstImage</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage-srcOffset-00144" href="#VUID-vkCmdCopyImage-srcOffset-00144"></a> <span class="vuid">VUID-vkCmdCopyImage-srcOffset-00144</span><br>

For each element of <code>pRegions</code>, <code>srcOffset.x</code> and
<span class="eq">(<code>extent.width</code> +  <code>srcOffset.x</code>)</span> <strong>must</strong> both be
greater than or equal to <code>0</code> and less than or equal to the width of the
specified <code>srcSubresource</code> of <code>srcImage</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage-srcOffset-00145" href="#VUID-vkCmdCopyImage-srcOffset-00145"></a> <span class="vuid">VUID-vkCmdCopyImage-srcOffset-00145</span><br>

For each element of <code>pRegions</code>, <code>srcOffset.y</code> and
<span class="eq">(<code>extent.height</code> +  <code>srcOffset.y</code>)</span> <strong>must</strong> both be
greater than or equal to <code>0</code> and less than or equal to the height of the
specified <code>srcSubresource</code> of <code>srcImage</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage-srcImage-00146" href="#VUID-vkCmdCopyImage-srcImage-00146"></a> <span class="vuid">VUID-vkCmdCopyImage-srcImage-00146</span><br>

If <code>srcImage</code> is of type <code>VK_IMAGE_TYPE_1D</code>, then for each
element of <code>pRegions</code>, <code>srcOffset.y</code> <strong>must</strong> be <code>0</code> and
<code>extent.height</code> <strong>must</strong> be <code>1</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage-srcOffset-00147" href="#VUID-vkCmdCopyImage-srcOffset-00147"></a> <span class="vuid">VUID-vkCmdCopyImage-srcOffset-00147</span><br>

If <code>srcImage</code> is of type <code>VK_IMAGE_TYPE_3D</code>, then for each
element of <code>pRegions</code>, <code>srcOffset.z</code> and
<span class="eq">(<code>extent.depth</code> +  <code>srcOffset.z</code>)</span> <strong>must</strong> both be
greater than or equal to <code>0</code> and less than or equal to the depth of the
specified <code>srcSubresource</code> of <code>srcImage</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage-srcImage-01785" href="#VUID-vkCmdCopyImage-srcImage-01785"></a> <span class="vuid">VUID-vkCmdCopyImage-srcImage-01785</span><br>

If <code>srcImage</code> is of type <code>VK_IMAGE_TYPE_1D</code>, then for each
element of <code>pRegions</code>, <code>srcOffset.z</code> <strong>must</strong> be <code>0</code> and
<code>extent.depth</code> <strong>must</strong> be <code>1</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage-dstImage-01786" href="#VUID-vkCmdCopyImage-dstImage-01786"></a> <span class="vuid">VUID-vkCmdCopyImage-dstImage-01786</span><br>

If <code>dstImage</code> is of type <code>VK_IMAGE_TYPE_1D</code>, then for each
element of <code>pRegions</code>, <code>dstOffset.z</code> <strong>must</strong> be <code>0</code> and
<code>extent.depth</code> <strong>must</strong> be <code>1</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage-srcImage-01787" href="#VUID-vkCmdCopyImage-srcImage-01787"></a> <span class="vuid">VUID-vkCmdCopyImage-srcImage-01787</span><br>

If <code>srcImage</code> is of type <code>VK_IMAGE_TYPE_2D</code>, then for each
element of <code>pRegions</code>, <code>srcOffset.z</code> <strong>must</strong> be <code>0</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage-dstImage-01788" href="#VUID-vkCmdCopyImage-dstImage-01788"></a> <span class="vuid">VUID-vkCmdCopyImage-dstImage-01788</span><br>

If <code>dstImage</code> is of type <code>VK_IMAGE_TYPE_2D</code>, then for each
element of <code>pRegions</code>, <code>dstOffset.z</code> <strong>must</strong> be <code>0</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage-apiVersion-07933" href="#VUID-vkCmdCopyImage-apiVersion-07933"></a> <span class="vuid">VUID-vkCmdCopyImage-apiVersion-07933</span><br>

If the <a href="../appendices/extensions.html#VK_KHR_maintenance1" class="xref page">VK_KHR_maintenance1</a> extension is not enabled,
<a href="devsandqueues.html#VkPhysicalDeviceProperties" class="xref page">VkPhysicalDeviceProperties</a>::<code>apiVersion</code> is less than Vulkan
1.1, <code>srcImage</code> and <code>dstImage</code> <strong>must</strong> have the same
<a href="resources.html#VkImageType" class="xref page">VkImageType</a></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage-apiVersion-08969" href="#VUID-vkCmdCopyImage-apiVersion-08969"></a> <span class="vuid">VUID-vkCmdCopyImage-apiVersion-08969</span><br>

If the <a href="../appendices/extensions.html#VK_KHR_maintenance1" class="xref page">VK_KHR_maintenance1</a> extension is not enabled,
<a href="devsandqueues.html#VkPhysicalDeviceProperties" class="xref page">VkPhysicalDeviceProperties</a>::<code>apiVersion</code> is less than Vulkan
1.1, and <code>srcImage</code> or <code>dstImage</code> is of type
<code>VK_IMAGE_TYPE_2D</code>, then for each element of <code>pRegions</code>,
<code>extent.depth</code> <strong>must</strong> be <code>1</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage-srcImage-07743" href="#VUID-vkCmdCopyImage-srcImage-07743"></a> <span class="vuid">VUID-vkCmdCopyImage-srcImage-07743</span><br>

If <code>srcImage</code> and <code>dstImage</code> have a different <a href="resources.html#VkImageType" class="xref page">VkImageType</a>,
and <a href="features.html#features-maintenance5" class="xref page"><code>maintenance5</code></a> is not enabled,
one <strong>must</strong> be <code>VK_IMAGE_TYPE_3D</code> and the other <strong>must</strong> be
<code>VK_IMAGE_TYPE_2D</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage-maintenance5-08792" href="#VUID-vkCmdCopyImage-maintenance5-08792"></a> <span class="vuid">VUID-vkCmdCopyImage-maintenance5-08792</span><br>

If the <a href="features.html#features-maintenance5" class="xref page"><code>maintenance5</code></a> feature is not
enabled, the <code>layerCount</code> member of <code>srcSubresource</code> or
<code>dstSubresource</code> <strong>must</strong> not be <code>VK_REMAINING_ARRAY_LAYERS</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage-srcImage-08793" href="#VUID-vkCmdCopyImage-srcImage-08793"></a> <span class="vuid">VUID-vkCmdCopyImage-srcImage-08793</span><br>

If <code>srcImage</code> and <code>dstImage</code> have the same <a href="resources.html#VkImageType" class="xref page">VkImageType</a>,
and neither of the <code>layerCount</code> members of <code>srcSubresource</code> or
<code>dstSubresource</code> are <code>VK_REMAINING_ARRAY_LAYERS</code>, the
<code>layerCount</code> members <strong>must</strong> match</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage-srcImage-08794" href="#VUID-vkCmdCopyImage-srcImage-08794"></a> <span class="vuid">VUID-vkCmdCopyImage-srcImage-08794</span><br>

If <code>srcImage</code> and <code>dstImage</code> have the same <a href="resources.html#VkImageType" class="xref page">VkImageType</a>,
and one of the <code>layerCount</code> members of <code>srcSubresource</code> or
<code>dstSubresource</code> is <code>VK_REMAINING_ARRAY_LAYERS</code>, the other
member <strong>must</strong> be either <code>VK_REMAINING_ARRAY_LAYERS</code> or equal to the
<code>arrayLayers</code> member of the <a href="resources.html#VkImageCreateInfo" class="xref page">VkImageCreateInfo</a> used to create
the image minus <code>baseArrayLayer</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage-srcImage-01790" href="#VUID-vkCmdCopyImage-srcImage-01790"></a> <span class="vuid">VUID-vkCmdCopyImage-srcImage-01790</span><br>

If <code>srcImage</code> and <code>dstImage</code> are both of type
<code>VK_IMAGE_TYPE_2D</code>, then for each element of <code>pRegions</code>,
<code>extent.depth</code> <strong>must</strong> be <code>1</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage-srcImage-01791" href="#VUID-vkCmdCopyImage-srcImage-01791"></a> <span class="vuid">VUID-vkCmdCopyImage-srcImage-01791</span><br>

If <code>srcImage</code> is of type <code>VK_IMAGE_TYPE_2D</code>, and <code>dstImage</code>
is of type <code>VK_IMAGE_TYPE_3D</code>, then for each element of
<code>pRegions</code>, <code>extent.depth</code> <strong>must</strong> equal
<code>srcSubresource.layerCount</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage-dstImage-01792" href="#VUID-vkCmdCopyImage-dstImage-01792"></a> <span class="vuid">VUID-vkCmdCopyImage-dstImage-01792</span><br>

If <code>dstImage</code> is of type <code>VK_IMAGE_TYPE_2D</code>, and <code>srcImage</code>
is of type <code>VK_IMAGE_TYPE_3D</code>, then for each element of
<code>pRegions</code>, <code>extent.depth</code> <strong>must</strong> equal
<code>dstSubresource.layerCount</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage-dstOffset-00150" href="#VUID-vkCmdCopyImage-dstOffset-00150"></a> <span class="vuid">VUID-vkCmdCopyImage-dstOffset-00150</span><br>

For each element of <code>pRegions</code>, <code>dstOffset.x</code> and
<span class="eq">(<code>extent.width</code> +  <code>dstOffset.x</code>)</span> <strong>must</strong> both be
greater than or equal to <code>0</code> and less than or equal to the width of the
specified <code>dstSubresource</code> of <code>dstImage</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage-dstOffset-00151" href="#VUID-vkCmdCopyImage-dstOffset-00151"></a> <span class="vuid">VUID-vkCmdCopyImage-dstOffset-00151</span><br>

For each element of <code>pRegions</code>, <code>dstOffset.y</code> and
<span class="eq">(<code>extent.height</code> +  <code>dstOffset.y</code>)</span> <strong>must</strong> both be
greater than or equal to <code>0</code> and less than or equal to the height of the
specified <code>dstSubresource</code> of <code>dstImage</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage-dstImage-00152" href="#VUID-vkCmdCopyImage-dstImage-00152"></a> <span class="vuid">VUID-vkCmdCopyImage-dstImage-00152</span><br>

If <code>dstImage</code> is of type <code>VK_IMAGE_TYPE_1D</code>, then for each
element of <code>pRegions</code>, <code>dstOffset.y</code> <strong>must</strong> be <code>0</code> and
<code>extent.height</code> <strong>must</strong> be <code>1</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage-dstOffset-00153" href="#VUID-vkCmdCopyImage-dstOffset-00153"></a> <span class="vuid">VUID-vkCmdCopyImage-dstOffset-00153</span><br>

If <code>dstImage</code> is of type <code>VK_IMAGE_TYPE_3D</code>, then for each
element of <code>pRegions</code>, <code>dstOffset.z</code> and
<span class="eq">(<code>extent.depth</code> +  <code>dstOffset.z</code>)</span> <strong>must</strong> both be
greater than or equal to <code>0</code> and less than or equal to the depth of the
specified <code>dstSubresource</code> of <code>dstImage</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage-pRegions-07278" href="#VUID-vkCmdCopyImage-pRegions-07278"></a> <span class="vuid">VUID-vkCmdCopyImage-pRegions-07278</span><br>

For each element of <code>pRegions</code>, <code>srcOffset.x</code> <strong>must</strong> be a
multiple of the <a href="formats.html#formats-compatibility-classes" class="xref page">texel block extent    width</a> of the <a href="formats.html#VkFormat" class="xref page">VkFormat</a> of <code>srcImage</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage-pRegions-07279" href="#VUID-vkCmdCopyImage-pRegions-07279"></a> <span class="vuid">VUID-vkCmdCopyImage-pRegions-07279</span><br>

For each element of <code>pRegions</code>, <code>srcOffset.y</code> <strong>must</strong> be a
multiple of the <a href="formats.html#formats-compatibility-classes" class="xref page">texel block extent    height</a> of the <a href="formats.html#VkFormat" class="xref page">VkFormat</a> of <code>srcImage</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage-pRegions-07280" href="#VUID-vkCmdCopyImage-pRegions-07280"></a> <span class="vuid">VUID-vkCmdCopyImage-pRegions-07280</span><br>

For each element of <code>pRegions</code>, <code>srcOffset.z</code> <strong>must</strong> be a
multiple of the <a href="formats.html#formats-compatibility-classes" class="xref page">texel block extent    depth</a> of the <a href="formats.html#VkFormat" class="xref page">VkFormat</a> of <code>srcImage</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage-pRegions-07281" href="#VUID-vkCmdCopyImage-pRegions-07281"></a> <span class="vuid">VUID-vkCmdCopyImage-pRegions-07281</span><br>

For each element of <code>pRegions</code>, <code>dstOffset.x</code> <strong>must</strong> be a
multiple of the <a href="formats.html#formats-compatibility-classes" class="xref page">texel block extent    width</a> of the <a href="formats.html#VkFormat" class="xref page">VkFormat</a> of <code>dstImage</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage-pRegions-07282" href="#VUID-vkCmdCopyImage-pRegions-07282"></a> <span class="vuid">VUID-vkCmdCopyImage-pRegions-07282</span><br>

For each element of <code>pRegions</code>, <code>dstOffset.y</code> <strong>must</strong> be a
multiple of the <a href="formats.html#formats-compatibility-classes" class="xref page">texel block extent    height</a> of the <a href="formats.html#VkFormat" class="xref page">VkFormat</a> of <code>dstImage</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage-pRegions-07283" href="#VUID-vkCmdCopyImage-pRegions-07283"></a> <span class="vuid">VUID-vkCmdCopyImage-pRegions-07283</span><br>

For each element of <code>pRegions</code>, <code>dstOffset.z</code> <strong>must</strong> be a
multiple of the <a href="formats.html#formats-compatibility-classes" class="xref page">texel block extent    depth</a> of the <a href="formats.html#VkFormat" class="xref page">VkFormat</a> of <code>dstImage</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage-srcImage-01728" href="#VUID-vkCmdCopyImage-srcImage-01728"></a> <span class="vuid">VUID-vkCmdCopyImage-srcImage-01728</span><br>

For each element of <code>pRegions</code>, if the sum of <code>srcOffset.x</code> and
<code>extent.width</code> does not equal the width of the subresource specified
by <code>srcSubresource</code>, <code>extent.width</code> <strong>must</strong> be a multiple of the
<a href="formats.html#formats-compatibility-classes" class="xref page">texel block extent width</a> of the
<a href="formats.html#VkFormat" class="xref page">VkFormat</a> of <code>srcImage</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage-srcImage-01729" href="#VUID-vkCmdCopyImage-srcImage-01729"></a> <span class="vuid">VUID-vkCmdCopyImage-srcImage-01729</span><br>

For each element of <code>pRegions</code>, if the sum of <code>srcOffset.y</code> and
<code>extent.height</code> does not equal the height of the subresource
specified by <code>srcSubresource</code>, <code>extent.height</code> <strong>must</strong> be a
multiple of the <a href="formats.html#formats-compatibility-classes" class="xref page">texel block extent    height</a> of the <a href="formats.html#VkFormat" class="xref page">VkFormat</a> of <code>srcImage</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage-srcImage-01730" href="#VUID-vkCmdCopyImage-srcImage-01730"></a> <span class="vuid">VUID-vkCmdCopyImage-srcImage-01730</span><br>

For each element of <code>pRegions</code>, if the sum of <code>srcOffset.z</code> and
<code>extent.depth</code> does not equal the depth of the subresource specified
by <code>srcSubresource</code>, <code>extent.depth</code> <strong>must</strong> be a multiple of the
<a href="formats.html#formats-compatibility-classes" class="xref page">texel block extent depth</a> of the
<a href="formats.html#VkFormat" class="xref page">VkFormat</a> of <code>srcImage</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage-dstImage-01732" href="#VUID-vkCmdCopyImage-dstImage-01732"></a> <span class="vuid">VUID-vkCmdCopyImage-dstImage-01732</span><br>

For each element of <code>pRegions</code>, if the sum of <code>dstOffset.x</code> and
<code>extent.width</code> does not equal the width of the subresource specified
by <code>dstSubresource</code>, <code>extent.width</code> <strong>must</strong> be a multiple of the
<a href="formats.html#formats-compatibility-classes" class="xref page">texel block extent width</a> of the
<a href="formats.html#VkFormat" class="xref page">VkFormat</a> of <code>dstImage</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage-dstImage-01733" href="#VUID-vkCmdCopyImage-dstImage-01733"></a> <span class="vuid">VUID-vkCmdCopyImage-dstImage-01733</span><br>

For each element of <code>pRegions</code>, if the sum of <code>dstOffset.y</code> and
<code>extent.height</code> does not equal the height of the subresource
specified by <code>dstSubresource</code>, <code>extent.height</code> <strong>must</strong> be a
multiple of the <a href="formats.html#formats-compatibility-classes" class="xref page">texel block extent    height</a> of the <a href="formats.html#VkFormat" class="xref page">VkFormat</a> of <code>dstImage</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage-dstImage-01734" href="#VUID-vkCmdCopyImage-dstImage-01734"></a> <span class="vuid">VUID-vkCmdCopyImage-dstImage-01734</span><br>

For each element of <code>pRegions</code>, if the sum of <code>dstOffset.z</code> and
<code>extent.depth</code> does not equal the depth of the subresource specified
by <code>dstSubresource</code>, <code>extent.depth</code> <strong>must</strong> be a multiple of the
<a href="formats.html#formats-compatibility-classes" class="xref page">texel block extent depth</a> of the
<a href="formats.html#VkFormat" class="xref page">VkFormat</a> of <code>dstImage</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage-aspect-06662" href="#VUID-vkCmdCopyImage-aspect-06662"></a> <span class="vuid">VUID-vkCmdCopyImage-aspect-06662</span><br>

If the <code>aspect</code> member of any element of <code>pRegions</code> includes any
flag other than <code>VK_IMAGE_ASPECT_STENCIL_BIT</code> or <code>srcImage</code> was
not created with <a href="resources.html#VkImageStencilUsageCreateInfo" class="xref page">separate stencil    usage</a>, <code>VK_IMAGE_USAGE_TRANSFER_SRC_BIT</code> <strong>must</strong> have been included
in the <a href="resources.html#VkImageCreateInfo" class="xref page">VkImageCreateInfo</a>::<code>usage</code> used to create
<code>srcImage</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage-aspect-06663" href="#VUID-vkCmdCopyImage-aspect-06663"></a> <span class="vuid">VUID-vkCmdCopyImage-aspect-06663</span><br>

If the <code>aspect</code> member of any element of <code>pRegions</code> includes any
flag other than <code>VK_IMAGE_ASPECT_STENCIL_BIT</code> or <code>dstImage</code> was
not created with <a href="resources.html#VkImageStencilUsageCreateInfo" class="xref page">separate stencil    usage</a>, <code>VK_IMAGE_USAGE_TRANSFER_DST_BIT</code> <strong>must</strong> have been included
in the <a href="resources.html#VkImageCreateInfo" class="xref page">VkImageCreateInfo</a>::<code>usage</code> used to create
<code>dstImage</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage-aspect-06664" href="#VUID-vkCmdCopyImage-aspect-06664"></a> <span class="vuid">VUID-vkCmdCopyImage-aspect-06664</span><br>

If the <code>aspect</code> member of any element of <code>pRegions</code> includes
<code>VK_IMAGE_ASPECT_STENCIL_BIT</code>, and <code>srcImage</code> was created with
<a href="resources.html#VkImageStencilUsageCreateInfo" class="xref page">separate stencil usage</a>,
<code>VK_IMAGE_USAGE_TRANSFER_SRC_BIT</code> <strong>must</strong> have been included in the
<a href="resources.html#VkImageStencilUsageCreateInfo" class="xref page">VkImageStencilUsageCreateInfo</a>::<code>stencilUsage</code> used to create
<code>srcImage</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage-aspect-06665" href="#VUID-vkCmdCopyImage-aspect-06665"></a> <span class="vuid">VUID-vkCmdCopyImage-aspect-06665</span><br>

If the <code>aspect</code> member of any element of <code>pRegions</code> includes
<code>VK_IMAGE_ASPECT_STENCIL_BIT</code>, and <code>dstImage</code> was created with
<a href="resources.html#VkImageStencilUsageCreateInfo" class="xref page">separate stencil usage</a>,
<code>VK_IMAGE_USAGE_TRANSFER_DST_BIT</code> <strong>must</strong> have been included in the
<a href="resources.html#VkImageStencilUsageCreateInfo" class="xref page">VkImageStencilUsageCreateInfo</a>::<code>stencilUsage</code> used to create
<code>dstImage</code></p>
</li>
</ul>
</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCmdCopyImage-srcImage-07966" href="#VUID-vkCmdCopyImage-srcImage-07966"></a> <span class="vuid">VUID-vkCmdCopyImage-srcImage-07966</span><br>

If <code>srcImage</code> is non-sparse then the image or the specified
<em>disjoint</em> plane <strong>must</strong> be bound completely and contiguously to a single
<code>VkDeviceMemory</code> object</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage-srcSubresource-07967" href="#VUID-vkCmdCopyImage-srcSubresource-07967"></a> <span class="vuid">VUID-vkCmdCopyImage-srcSubresource-07967</span><br>

The <code>srcSubresource.mipLevel</code> member of each element of
<code>pRegions</code> <strong>must</strong> be less than the <code>mipLevels</code> specified in
<a href="resources.html#VkImageCreateInfo" class="xref page">VkImageCreateInfo</a> when <code>srcImage</code> was created</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage-srcSubresource-07968" href="#VUID-vkCmdCopyImage-srcSubresource-07968"></a> <span class="vuid">VUID-vkCmdCopyImage-srcSubresource-07968</span><br>

The <span class="eq"><code>srcSubresource.baseArrayLayer</code> + 
<code>srcSubresource.layerCount</code></span> of each element of <code>pRegions</code>
, if <code>srcSubresource.layerCount</code> is not
<code>VK_REMAINING_ARRAY_LAYERS</code> and <a href="features.html#features-maintenance5" class="xref page">    <code>maintenance5</code></a> is not enabled,
<strong>must</strong> be less than or equal to the <code>arrayLayers</code> specified in
<a href="resources.html#VkImageCreateInfo" class="xref page">VkImageCreateInfo</a> when <code>srcImage</code> was created</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage-srcImage-07969" href="#VUID-vkCmdCopyImage-srcImage-07969"></a> <span class="vuid">VUID-vkCmdCopyImage-srcImage-07969</span><br>

<code>srcImage</code> <strong>must</strong> not have been created with <code>flags</code>
containing <code>VK_IMAGE_CREATE_SUBSAMPLED_BIT_EXT</code></p>
</li>
</ul>
</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCmdCopyImage-dstImage-07966" href="#VUID-vkCmdCopyImage-dstImage-07966"></a> <span class="vuid">VUID-vkCmdCopyImage-dstImage-07966</span><br>

If <code>dstImage</code> is non-sparse then the image or the specified
<em>disjoint</em> plane <strong>must</strong> be bound completely and contiguously to a single
<code>VkDeviceMemory</code> object</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage-dstSubresource-07967" href="#VUID-vkCmdCopyImage-dstSubresource-07967"></a> <span class="vuid">VUID-vkCmdCopyImage-dstSubresource-07967</span><br>

The <code>dstSubresource.mipLevel</code> member of each element of
<code>pRegions</code> <strong>must</strong> be less than the <code>mipLevels</code> specified in
<a href="resources.html#VkImageCreateInfo" class="xref page">VkImageCreateInfo</a> when <code>dstImage</code> was created</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage-dstSubresource-07968" href="#VUID-vkCmdCopyImage-dstSubresource-07968"></a> <span class="vuid">VUID-vkCmdCopyImage-dstSubresource-07968</span><br>

The <span class="eq"><code>dstSubresource.baseArrayLayer</code> + 
<code>dstSubresource.layerCount</code></span> of each element of <code>pRegions</code>
, if <code>dstSubresource.layerCount</code> is not
<code>VK_REMAINING_ARRAY_LAYERS</code> and <a href="features.html#features-maintenance5" class="xref page">    <code>maintenance5</code></a> is not enabled,
<strong>must</strong> be less than or equal to the <code>arrayLayers</code> specified in
<a href="resources.html#VkImageCreateInfo" class="xref page">VkImageCreateInfo</a> when <code>dstImage</code> was created</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage-dstImage-07969" href="#VUID-vkCmdCopyImage-dstImage-07969"></a> <span class="vuid">VUID-vkCmdCopyImage-dstImage-07969</span><br>

<code>dstImage</code> <strong>must</strong> not have been created with <code>flags</code>
containing <code>VK_IMAGE_CREATE_SUBSAMPLED_BIT_EXT</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCmdCopyImage-commandBuffer-parameter" href="#VUID-vkCmdCopyImage-commandBuffer-parameter"></a> <span class="vuid">VUID-vkCmdCopyImage-commandBuffer-parameter</span><br>
 <code>commandBuffer</code> <strong>must</strong> be a valid <a href="cmdbuffers.html#VkCommandBuffer" class="xref page">VkCommandBuffer</a> handle</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage-srcImage-parameter" href="#VUID-vkCmdCopyImage-srcImage-parameter"></a> <span class="vuid">VUID-vkCmdCopyImage-srcImage-parameter</span><br>
 <code>srcImage</code> <strong>must</strong> be a valid <a href="resources.html#VkImage" class="xref page">VkImage</a> handle</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage-srcImageLayout-parameter" href="#VUID-vkCmdCopyImage-srcImageLayout-parameter"></a> <span class="vuid">VUID-vkCmdCopyImage-srcImageLayout-parameter</span><br>
 <code>srcImageLayout</code> <strong>must</strong> be a valid <a href="resources.html#VkImageLayout" class="xref page">VkImageLayout</a> value</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage-dstImage-parameter" href="#VUID-vkCmdCopyImage-dstImage-parameter"></a> <span class="vuid">VUID-vkCmdCopyImage-dstImage-parameter</span><br>
 <code>dstImage</code> <strong>must</strong> be a valid <a href="resources.html#VkImage" class="xref page">VkImage</a> handle</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage-dstImageLayout-parameter" href="#VUID-vkCmdCopyImage-dstImageLayout-parameter"></a> <span class="vuid">VUID-vkCmdCopyImage-dstImageLayout-parameter</span><br>
 <code>dstImageLayout</code> <strong>must</strong> be a valid <a href="resources.html#VkImageLayout" class="xref page">VkImageLayout</a> value</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage-pRegions-parameter" href="#VUID-vkCmdCopyImage-pRegions-parameter"></a> <span class="vuid">VUID-vkCmdCopyImage-pRegions-parameter</span><br>
 <code>pRegions</code> <strong>must</strong> be a valid pointer to an array of <code>regionCount</code> valid <a href="#VkImageCopy">VkImageCopy</a> structures</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage-commandBuffer-recording" href="#VUID-vkCmdCopyImage-commandBuffer-recording"></a> <span class="vuid">VUID-vkCmdCopyImage-commandBuffer-recording</span><br>
 <code>commandBuffer</code> <strong>must</strong> be in the <a href="cmdbuffers.html#commandbuffers-lifecycle" class="xref page">recording state</a></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage-commandBuffer-cmdpool" href="#VUID-vkCmdCopyImage-commandBuffer-cmdpool"></a> <span class="vuid">VUID-vkCmdCopyImage-commandBuffer-cmdpool</span><br>
 The <code>VkCommandPool</code> that <code>commandBuffer</code> was allocated from <strong>must</strong> support transfer, graphics, or compute operations</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage-renderpass" href="#VUID-vkCmdCopyImage-renderpass"></a> <span class="vuid">VUID-vkCmdCopyImage-renderpass</span><br>
 This command <strong>must</strong> only be called outside of a render pass instance</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage-videocoding" href="#VUID-vkCmdCopyImage-videocoding"></a> <span class="vuid">VUID-vkCmdCopyImage-videocoding</span><br>
 This command <strong>must</strong> only be called outside of a video coding scope</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage-regionCount-arraylength" href="#VUID-vkCmdCopyImage-regionCount-arraylength"></a> <span class="vuid">VUID-vkCmdCopyImage-regionCount-arraylength</span><br>
 <code>regionCount</code> <strong>must</strong> be greater than <code>0</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage-commonparent" href="#VUID-vkCmdCopyImage-commonparent"></a> <span class="vuid">VUID-vkCmdCopyImage-commonparent</span><br>
 Each of <code>commandBuffer</code>, <code>dstImage</code>, and <code>srcImage</code> <strong>must</strong> have been created, allocated, or retrieved from the same <a href="devsandqueues.html#VkDevice" class="xref page">VkDevice</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Host Synchronization</div>
<div class="ulist">
<ul>
<li>
<p>Host access to <code>commandBuffer</code> <strong>must</strong> be externally synchronized</p>
</li>
<li>
<p>Host access to the <code>VkCommandPool</code> that <code>commandBuffer</code> was allocated from <strong>must</strong> be externally synchronized</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Command Properties</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><a href="cmdbuffers.html#VkCommandBufferLevel" class="xref page">Command Buffer Levels</a></th>
<th class="tableblock halign-left valign-top"><a href="renderpass.html#vkCmdBeginRenderPass" class="xref page">Render Pass Scope</a></th>
<th class="tableblock halign-left valign-top"><a href="video_extensions.html#vkCmdBeginVideoCodingKHR" class="xref page">Video Coding Scope</a></th>
<th class="tableblock halign-left valign-top"><a href="devsandqueues.html#VkQueueFlagBits" class="xref page">Supported Queue Types</a></th>
<th class="tableblock halign-left valign-top"><a href="fundamentals.html#fundamentals-queueoperation-command-types" class="xref page">Command Type</a></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Primary<br>
Secondary</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Outside</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Outside</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Transfer<br>
Graphics<br>
Compute</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Action</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>VkImageCopy</code> structure is defined as:</p>
</div>
<div id="VkImageCopy" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_VERSION_1_0
typedef struct VkImageCopy {
    VkImageSubresourceLayers    srcSubresource;
    VkOffset3D                  srcOffset;
    VkImageSubresourceLayers    dstSubresource;
    VkOffset3D                  dstOffset;
    VkExtent3D                  extent;
} VkImageCopy;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>srcSubresource</code> and <code>dstSubresource</code> are
<a href="#VkImageSubresourceLayers">VkImageSubresourceLayers</a> structures specifying the image
subresources of the images used for the source and destination image
data, respectively.</p>
</li>
<li>
<p><code>srcOffset</code> and <code>dstOffset</code> select the initial <code>x</code>, <code>y</code>,
and <code>z</code> offsets in texels of the sub-regions of the source and
destination image data.</p>
</li>
<li>
<p><code>extent</code> is the size in texels of the image to copy in <code>width</code>,
<code>height</code> and <code>depth</code>.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkImageCopy-apiVersion-07940" href="#VUID-VkImageCopy-apiVersion-07940"></a> <span class="vuid">VUID-VkImageCopy-apiVersion-07940</span><br>

If the <a href="../appendices/extensions.html#VK_KHR_sampler_ycbcr_conversion" class="xref page">VK_KHR_sampler_ycbcr_conversion</a> extension is not enabled
and <a href="devsandqueues.html#VkPhysicalDeviceProperties" class="xref page">VkPhysicalDeviceProperties</a>::<code>apiVersion</code> is less than
Vulkan 1.1, the <code>aspectMask</code> member of <code>srcSubresource</code> and
<code>dstSubresource</code> <strong>must</strong> match</p>
</li>
<li>
<p><a id="VUID-VkImageCopy-apiVersion-07941" href="#VUID-VkImageCopy-apiVersion-07941"></a> <span class="vuid">VUID-VkImageCopy-apiVersion-07941</span><br>

If the <a href="../appendices/extensions.html#VK_KHR_maintenance1" class="xref page">VK_KHR_maintenance1</a> extension is not enabled and
<a href="devsandqueues.html#VkPhysicalDeviceProperties" class="xref page">VkPhysicalDeviceProperties</a>::<code>apiVersion</code> is less than Vulkan
1.1, the <code>layerCount</code> member of <code>srcSubresource</code> and
<code>dstSubresource</code> <strong>must</strong> match</p>
</li>
<li>
<p><a id="VUID-VkImageCopy-extent-06668" href="#VUID-VkImageCopy-extent-06668"></a> <span class="vuid">VUID-VkImageCopy-extent-06668</span><br>

<code>extent.width</code> <strong>must</strong> not be 0</p>
</li>
<li>
<p><a id="VUID-VkImageCopy-extent-06669" href="#VUID-VkImageCopy-extent-06669"></a> <span class="vuid">VUID-VkImageCopy-extent-06669</span><br>

<code>extent.height</code> <strong>must</strong> not be 0</p>
</li>
<li>
<p><a id="VUID-VkImageCopy-extent-06670" href="#VUID-VkImageCopy-extent-06670"></a> <span class="vuid">VUID-VkImageCopy-extent-06670</span><br>

<code>extent.depth</code> <strong>must</strong> not be 0</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkImageCopy-srcSubresource-parameter" href="#VUID-VkImageCopy-srcSubresource-parameter"></a> <span class="vuid">VUID-VkImageCopy-srcSubresource-parameter</span><br>
 <code>srcSubresource</code> <strong>must</strong> be a valid <a href="#VkImageSubresourceLayers">VkImageSubresourceLayers</a> structure</p>
</li>
<li>
<p><a id="VUID-VkImageCopy-dstSubresource-parameter" href="#VUID-VkImageCopy-dstSubresource-parameter"></a> <span class="vuid">VUID-VkImageCopy-dstSubresource-parameter</span><br>
 <code>dstSubresource</code> <strong>must</strong> be a valid <a href="#VkImageSubresourceLayers">VkImageSubresourceLayers</a> structure</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>VkImageSubresourceLayers</code> structure is defined as:</p>
</div>
<div id="VkImageSubresourceLayers" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_VERSION_1_0
typedef struct VkImageSubresourceLayers {
    VkImageAspectFlags    aspectMask;
    uint32_t              mipLevel;
    uint32_t              baseArrayLayer;
    uint32_t              layerCount;
} VkImageSubresourceLayers;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>aspectMask</code> is a combination of <a href="resources.html#VkImageAspectFlagBits" class="xref page">VkImageAspectFlagBits</a>,
selecting the color, depth and/or stencil aspects to be copied.</p>
</li>
<li>
<p><code>mipLevel</code> is the mipmap level to copy</p>
</li>
<li>
<p><code>baseArrayLayer</code> and <code>layerCount</code> are the starting layer and
number of layers to copy.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkImageSubresourceLayers-aspectMask-00167" href="#VUID-VkImageSubresourceLayers-aspectMask-00167"></a> <span class="vuid">VUID-VkImageSubresourceLayers-aspectMask-00167</span><br>

If <code>aspectMask</code> contains <code>VK_IMAGE_ASPECT_COLOR_BIT</code>, it <strong>must</strong>
not contain either of <code>VK_IMAGE_ASPECT_DEPTH_BIT</code> or
<code>VK_IMAGE_ASPECT_STENCIL_BIT</code></p>
</li>
<li>
<p><a id="VUID-VkImageSubresourceLayers-aspectMask-00168" href="#VUID-VkImageSubresourceLayers-aspectMask-00168"></a> <span class="vuid">VUID-VkImageSubresourceLayers-aspectMask-00168</span><br>

<code>aspectMask</code> <strong>must</strong> not contain <code>VK_IMAGE_ASPECT_METADATA_BIT</code></p>
</li>
<li>
<p><a id="VUID-VkImageSubresourceLayers-aspectMask-02247" href="#VUID-VkImageSubresourceLayers-aspectMask-02247"></a> <span class="vuid">VUID-VkImageSubresourceLayers-aspectMask-02247</span><br>

<code>aspectMask</code> <strong>must</strong> not include
<code>VK_IMAGE_ASPECT_MEMORY_PLANE<em>_i_</em>BIT_EXT</code> for any index <em>i</em></p>
</li>
<li>
<p><a id="VUID-VkImageSubresourceLayers-layerCount-01700" href="#VUID-VkImageSubresourceLayers-layerCount-01700"></a> <span class="vuid">VUID-VkImageSubresourceLayers-layerCount-01700</span><br>

<code>layerCount</code> <strong>must</strong> be greater than 0
or <code>VK_REMAINING_ARRAY_LAYERS</code></p>
</li>
<li>
<p><a id="VUID-VkImageSubresourceLayers-layerCount-08762" href="#VUID-VkImageSubresourceLayers-layerCount-08762"></a> <span class="vuid">VUID-VkImageSubresourceLayers-layerCount-08762</span><br>

If <a href="features.html#features-maintenance5" class="xref page"><code>maintenance5</code></a> is not enabled,
<code>layerCount</code> <strong>must</strong> not be <code>VK_REMAINING_ARRAY_LAYERS</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkImageSubresourceLayers-aspectMask-parameter" href="#VUID-VkImageSubresourceLayers-aspectMask-parameter"></a> <span class="vuid">VUID-VkImageSubresourceLayers-aspectMask-parameter</span><br>
 <code>aspectMask</code> <strong>must</strong> be a valid combination of <a href="resources.html#VkImageAspectFlagBits" class="xref page">VkImageAspectFlagBits</a> values</p>
</li>
<li>
<p><a id="VUID-VkImageSubresourceLayers-aspectMask-requiredbitmask" href="#VUID-VkImageSubresourceLayers-aspectMask-requiredbitmask"></a> <span class="vuid">VUID-VkImageSubresourceLayers-aspectMask-requiredbitmask</span><br>
 <code>aspectMask</code> <strong>must</strong> not be <code>0</code></p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>A more extensible version of the copy image command is defined below.</p>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>To copy data between image objects, call:</p>
</div>
<div id="vkCmdCopyImage2" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_VERSION_1_3
void vkCmdCopyImage2(
    VkCommandBuffer                             commandBuffer,
    const VkCopyImageInfo2*                     pCopyImageInfo);</code></pre>
</div>
</div>
<div class="paragraph">
<p>or the equivalent command</p>
</div>
<div id="vkCmdCopyImage2KHR" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_KHR_copy_commands2
void vkCmdCopyImage2KHR(
    VkCommandBuffer                             commandBuffer,
    const VkCopyImageInfo2*                     pCopyImageInfo);</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>commandBuffer</code> is the command buffer into which the command will be
recorded.</p>
</li>
<li>
<p><code>pCopyImageInfo</code> is a pointer to a <a href="#VkCopyImageInfo2">VkCopyImageInfo2</a> structure
describing the copy parameters.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>This command is functionally identical to <a href="#vkCmdCopyImage">vkCmdCopyImage</a>, but includes
extensible sub-structures that include <code>sType</code> and <code>pNext</code>
parameters, allowing them to be more easily extended.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCmdCopyImage2-commandBuffer-01825" href="#VUID-vkCmdCopyImage2-commandBuffer-01825"></a> <span class="vuid">VUID-vkCmdCopyImage2-commandBuffer-01825</span><br>

If <code>commandBuffer</code> is an unprotected command buffer and
<a href="devsandqueues.html#limits-protectedNoFault" class="xref page"><code>protectedNoFault</code></a> is not supported,
<code>srcImage</code> <strong>must</strong> not be a protected image</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage2-commandBuffer-01826" href="#VUID-vkCmdCopyImage2-commandBuffer-01826"></a> <span class="vuid">VUID-vkCmdCopyImage2-commandBuffer-01826</span><br>

If <code>commandBuffer</code> is an unprotected command buffer and
<a href="devsandqueues.html#limits-protectedNoFault" class="xref page"><code>protectedNoFault</code></a> is not supported,
<code>dstImage</code> <strong>must</strong> not be a protected image</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage2-commandBuffer-01827" href="#VUID-vkCmdCopyImage2-commandBuffer-01827"></a> <span class="vuid">VUID-vkCmdCopyImage2-commandBuffer-01827</span><br>

If <code>commandBuffer</code> is a protected command buffer and
<a href="devsandqueues.html#limits-protectedNoFault" class="xref page"><code>protectedNoFault</code></a> is not supported,
<code>dstImage</code> <strong>must</strong> not be an unprotected image</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCmdCopyImage2-commandBuffer-parameter" href="#VUID-vkCmdCopyImage2-commandBuffer-parameter"></a> <span class="vuid">VUID-vkCmdCopyImage2-commandBuffer-parameter</span><br>
 <code>commandBuffer</code> <strong>must</strong> be a valid <a href="cmdbuffers.html#VkCommandBuffer" class="xref page">VkCommandBuffer</a> handle</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage2-pCopyImageInfo-parameter" href="#VUID-vkCmdCopyImage2-pCopyImageInfo-parameter"></a> <span class="vuid">VUID-vkCmdCopyImage2-pCopyImageInfo-parameter</span><br>
 <code>pCopyImageInfo</code> <strong>must</strong> be a valid pointer to a valid <a href="#VkCopyImageInfo2">VkCopyImageInfo2</a> structure</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage2-commandBuffer-recording" href="#VUID-vkCmdCopyImage2-commandBuffer-recording"></a> <span class="vuid">VUID-vkCmdCopyImage2-commandBuffer-recording</span><br>
 <code>commandBuffer</code> <strong>must</strong> be in the <a href="cmdbuffers.html#commandbuffers-lifecycle" class="xref page">recording state</a></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage2-commandBuffer-cmdpool" href="#VUID-vkCmdCopyImage2-commandBuffer-cmdpool"></a> <span class="vuid">VUID-vkCmdCopyImage2-commandBuffer-cmdpool</span><br>
 The <code>VkCommandPool</code> that <code>commandBuffer</code> was allocated from <strong>must</strong> support transfer, graphics, or compute operations</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage2-renderpass" href="#VUID-vkCmdCopyImage2-renderpass"></a> <span class="vuid">VUID-vkCmdCopyImage2-renderpass</span><br>
 This command <strong>must</strong> only be called outside of a render pass instance</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage2-videocoding" href="#VUID-vkCmdCopyImage2-videocoding"></a> <span class="vuid">VUID-vkCmdCopyImage2-videocoding</span><br>
 This command <strong>must</strong> only be called outside of a video coding scope</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Host Synchronization</div>
<div class="ulist">
<ul>
<li>
<p>Host access to <code>commandBuffer</code> <strong>must</strong> be externally synchronized</p>
</li>
<li>
<p>Host access to the <code>VkCommandPool</code> that <code>commandBuffer</code> was allocated from <strong>must</strong> be externally synchronized</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Command Properties</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><a href="cmdbuffers.html#VkCommandBufferLevel" class="xref page">Command Buffer Levels</a></th>
<th class="tableblock halign-left valign-top"><a href="renderpass.html#vkCmdBeginRenderPass" class="xref page">Render Pass Scope</a></th>
<th class="tableblock halign-left valign-top"><a href="video_extensions.html#vkCmdBeginVideoCodingKHR" class="xref page">Video Coding Scope</a></th>
<th class="tableblock halign-left valign-top"><a href="devsandqueues.html#VkQueueFlagBits" class="xref page">Supported Queue Types</a></th>
<th class="tableblock halign-left valign-top"><a href="fundamentals.html#fundamentals-queueoperation-command-types" class="xref page">Command Type</a></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Primary<br>
Secondary</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Outside</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Outside</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Transfer<br>
Graphics<br>
Compute</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Action</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>VkCopyImageInfo2</code> structure is defined as:</p>
</div>
<div id="VkCopyImageInfo2" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_VERSION_1_3
typedef struct VkCopyImageInfo2 {
    VkStructureType        sType;
    const void*            pNext;
    VkImage                srcImage;
    VkImageLayout          srcImageLayout;
    VkImage                dstImage;
    VkImageLayout          dstImageLayout;
    uint32_t               regionCount;
    const VkImageCopy2*    pRegions;
} VkCopyImageInfo2;</code></pre>
</div>
</div>
<div class="paragraph">
<p>or the equivalent</p>
</div>
<div id="VkCopyImageInfo2KHR" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_KHR_copy_commands2
typedef VkCopyImageInfo2 VkCopyImageInfo2KHR;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is a <a href="fundamentals.html#VkStructureType" class="xref page">VkStructureType</a> value identifying this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>srcImage</code> is the source image.</p>
</li>
<li>
<p><code>srcImageLayout</code> is the current layout of the source image
subresource.</p>
</li>
<li>
<p><code>dstImage</code> is the destination image.</p>
</li>
<li>
<p><code>dstImageLayout</code> is the current layout of the destination image
subresource.</p>
</li>
<li>
<p><code>regionCount</code> is the number of regions to copy.</p>
</li>
<li>
<p><code>pRegions</code> is a pointer to an array of <a href="#VkImageCopy2">VkImageCopy2</a> structures
specifying the regions to copy.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkCopyImageInfo2-pRegions-00124" href="#VUID-VkCopyImageInfo2-pRegions-00124"></a> <span class="vuid">VUID-VkCopyImageInfo2-pRegions-00124</span><br>

The union of all source regions, and the union of all destination
regions, specified by the elements of <code>pRegions</code>, <strong>must</strong> not overlap
in memory</p>
</li>
<li>
<p><a id="VUID-VkCopyImageInfo2-srcImage-01995" href="#VUID-VkCopyImageInfo2-srcImage-01995"></a> <span class="vuid">VUID-VkCopyImageInfo2-srcImage-01995</span><br>

The <a href="resources.html#resources-image-format-features" class="xref page">format features</a> of
<code>srcImage</code> <strong>must</strong> contain <code>VK_FORMAT_FEATURE_TRANSFER_SRC_BIT</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageInfo2-srcImageLayout-00128" href="#VUID-VkCopyImageInfo2-srcImageLayout-00128"></a> <span class="vuid">VUID-VkCopyImageInfo2-srcImageLayout-00128</span><br>

<code>srcImageLayout</code> <strong>must</strong> specify the layout of the image subresources
of <code>srcImage</code> specified in <code>pRegions</code> at the time this command
is executed on a <code>VkDevice</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageInfo2-srcImageLayout-01917" href="#VUID-VkCopyImageInfo2-srcImageLayout-01917"></a> <span class="vuid">VUID-VkCopyImageInfo2-srcImageLayout-01917</span><br>

<code>srcImageLayout</code> <strong>must</strong> be
<code>VK_IMAGE_LAYOUT_TRANSFER_SRC_OPTIMAL</code>,
<code>VK_IMAGE_LAYOUT_GENERAL</code>, or
<code>VK_IMAGE_LAYOUT_SHARED_PRESENT_KHR</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageInfo2-dstImage-01996" href="#VUID-VkCopyImageInfo2-dstImage-01996"></a> <span class="vuid">VUID-VkCopyImageInfo2-dstImage-01996</span><br>

The <a href="resources.html#resources-image-format-features" class="xref page">format features</a> of
<code>dstImage</code> <strong>must</strong> contain <code>VK_FORMAT_FEATURE_TRANSFER_DST_BIT</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageInfo2-dstImageLayout-00133" href="#VUID-VkCopyImageInfo2-dstImageLayout-00133"></a> <span class="vuid">VUID-VkCopyImageInfo2-dstImageLayout-00133</span><br>

<code>dstImageLayout</code> <strong>must</strong> specify the layout of the image subresources
of <code>dstImage</code> specified in <code>pRegions</code> at the time this command
is executed on a <code>VkDevice</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageInfo2-dstImageLayout-01395" href="#VUID-VkCopyImageInfo2-dstImageLayout-01395"></a> <span class="vuid">VUID-VkCopyImageInfo2-dstImageLayout-01395</span><br>

<code>dstImageLayout</code> <strong>must</strong> be
<code>VK_IMAGE_LAYOUT_TRANSFER_DST_OPTIMAL</code>,
<code>VK_IMAGE_LAYOUT_GENERAL</code>, or
<code>VK_IMAGE_LAYOUT_SHARED_PRESENT_KHR</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageInfo2-srcImage-01548" href="#VUID-VkCopyImageInfo2-srcImage-01548"></a> <span class="vuid">VUID-VkCopyImageInfo2-srcImage-01548</span><br>

If the <a href="formats.html#VkFormat" class="xref page">VkFormat</a> of each of <code>srcImage</code> and <code>dstImage</code> is
not a <a href="formats.html#formats-requiring-sampler-ycbcr-conversion" class="xref page"><em>multi-planar    format</em></a>, the <a href="formats.html#VkFormat" class="xref page">VkFormat</a> of each of <code>srcImage</code> and
<code>dstImage</code> <strong>must</strong> be <a href="formats.html#formats-size-compatibility" class="xref page">size-compatible</a></p>
</li>
<li>
<p><a id="VUID-VkCopyImageInfo2-None-01549" href="#VUID-VkCopyImageInfo2-None-01549"></a> <span class="vuid">VUID-VkCopyImageInfo2-None-01549</span><br>

In a copy to or from a plane of a
<a href="formats.html#formats-requiring-sampler-ycbcr-conversion" class="xref page">multi-planar image</a>, the
<a href="formats.html#VkFormat" class="xref page">VkFormat</a> of the image and plane <strong>must</strong> be compatible according to
<a href="formats.html#formats-compatible-planes" class="xref page">the description of compatible planes</a> for
the plane being copied</p>
</li>
<li>
<p><a id="VUID-VkCopyImageInfo2-srcImage-00136" href="#VUID-VkCopyImageInfo2-srcImage-00136"></a> <span class="vuid">VUID-VkCopyImageInfo2-srcImage-00136</span><br>

The sample count of <code>srcImage</code> and <code>dstImage</code> <strong>must</strong> match</p>
</li>
<li>
<p><a id="VUID-VkCopyImageInfo2-srcOffset-01783" href="#VUID-VkCopyImageInfo2-srcOffset-01783"></a> <span class="vuid">VUID-VkCopyImageInfo2-srcOffset-01783</span><br>

The <code>srcOffset</code> and <code>extent</code> members of each element of
<code>pRegions</code> <strong>must</strong> respect the image transfer granularity requirements
of <code>commandBuffer</code>&#8217;s command pool&#8217;s queue family, as described in
<a href="devsandqueues.html#VkQueueFamilyProperties" class="xref page">VkQueueFamilyProperties</a></p>
</li>
<li>
<p><a id="VUID-VkCopyImageInfo2-dstOffset-01784" href="#VUID-VkCopyImageInfo2-dstOffset-01784"></a> <span class="vuid">VUID-VkCopyImageInfo2-dstOffset-01784</span><br>

The <code>dstOffset</code> and <code>extent</code> members of each element of
<code>pRegions</code> <strong>must</strong> respect the image transfer granularity requirements
of <code>commandBuffer</code>&#8217;s command pool&#8217;s queue family, as described in
<a href="devsandqueues.html#VkQueueFamilyProperties" class="xref page">VkQueueFamilyProperties</a></p>
</li>
<li>
<p><a id="VUID-VkCopyImageInfo2-srcImage-01551" href="#VUID-VkCopyImageInfo2-srcImage-01551"></a> <span class="vuid">VUID-VkCopyImageInfo2-srcImage-01551</span><br>

If neither <code>srcImage</code> nor <code>dstImage</code> has a
<a href="formats.html#formats-requiring-sampler-ycbcr-conversion" class="xref page">multi-planar image    format</a> then for each element of <code>pRegions</code>,
<code>srcSubresource.aspectMask</code> and <code>dstSubresource.aspectMask</code>
<strong>must</strong> match</p>
</li>
<li>
<p><a id="VUID-VkCopyImageInfo2-srcImage-08713" href="#VUID-VkCopyImageInfo2-srcImage-08713"></a> <span class="vuid">VUID-VkCopyImageInfo2-srcImage-08713</span><br>

If <code>srcImage</code> has a <a href="formats.html#formats-requiring-sampler-ycbcr-conversion" class="xref page">    multi-planar image format</a>, then for each element of <code>pRegions</code>,
<code>srcSubresource.aspectMask</code> <strong>must</strong> be a single valid
<a href="formats.html#formats-planes-image-aspect" class="xref page">multi-planar aspect mask</a> bit</p>
</li>
<li>
<p><a id="VUID-VkCopyImageInfo2-dstImage-08714" href="#VUID-VkCopyImageInfo2-dstImage-08714"></a> <span class="vuid">VUID-VkCopyImageInfo2-dstImage-08714</span><br>

If <code>dstImage</code> has a <a href="formats.html#formats-requiring-sampler-ycbcr-conversion" class="xref page">    multi-planar image format</a>, then for each element of <code>pRegions</code>,
<code>dstSubresource.aspectMask</code> <strong>must</strong> be a single valid
<a href="formats.html#formats-planes-image-aspect" class="xref page">multi-planar aspect mask</a> bit</p>
</li>
<li>
<p><a id="VUID-VkCopyImageInfo2-srcImage-01556" href="#VUID-VkCopyImageInfo2-srcImage-01556"></a> <span class="vuid">VUID-VkCopyImageInfo2-srcImage-01556</span><br>

If <code>srcImage</code> has a
<a href="formats.html#formats-requiring-sampler-ycbcr-conversion" class="xref page">multi-planar image format</a>
and the <code>dstImage</code> does not have a multi-planar image format, then
for each element of <code>pRegions</code>, <code>dstSubresource.aspectMask</code>
<strong>must</strong> be <code>VK_IMAGE_ASPECT_COLOR_BIT</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageInfo2-dstImage-01557" href="#VUID-VkCopyImageInfo2-dstImage-01557"></a> <span class="vuid">VUID-VkCopyImageInfo2-dstImage-01557</span><br>

If <code>dstImage</code> has a
<a href="formats.html#formats-requiring-sampler-ycbcr-conversion" class="xref page">multi-planar image format</a>
and the <code>srcImage</code> does not have a multi-planar image format, then
for each element of <code>pRegions</code>, <code>srcSubresource.aspectMask</code>
<strong>must</strong> be <code>VK_IMAGE_ASPECT_COLOR_BIT</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageInfo2-apiVersion-07932" href="#VUID-VkCopyImageInfo2-apiVersion-07932"></a> <span class="vuid">VUID-VkCopyImageInfo2-apiVersion-07932</span><br>

If the <a href="../appendices/extensions.html#VK_KHR_maintenance1" class="xref page">VK_KHR_maintenance1</a> extension is not enabled,
<a href="devsandqueues.html#VkPhysicalDeviceProperties" class="xref page">VkPhysicalDeviceProperties</a>::<code>apiVersion</code> is less than Vulkan
1.1, and either <code>srcImage</code> or <code>dstImage</code> is of type
<code>VK_IMAGE_TYPE_3D</code>, then for each element of <code>pRegions</code>,
<code>srcSubresource.baseArrayLayer</code> and
<code>dstSubresource.baseArrayLayer</code> <strong>must</strong> each be <code>0</code>, and
<code>srcSubresource.layerCount</code> and <code>dstSubresource.layerCount</code>
<strong>must</strong> each be <code>1</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageInfo2-srcImage-04443" href="#VUID-VkCopyImageInfo2-srcImage-04443"></a> <span class="vuid">VUID-VkCopyImageInfo2-srcImage-04443</span><br>

If <code>srcImage</code> is of type <code>VK_IMAGE_TYPE_3D</code>, then for each
element of <code>pRegions</code>, <code>srcSubresource.baseArrayLayer</code> <strong>must</strong> be
<code>0</code> and <code>srcSubresource.layerCount</code> <strong>must</strong> be <code>1</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageInfo2-dstImage-04444" href="#VUID-VkCopyImageInfo2-dstImage-04444"></a> <span class="vuid">VUID-VkCopyImageInfo2-dstImage-04444</span><br>

If <code>dstImage</code> is of type <code>VK_IMAGE_TYPE_3D</code>, then for each
element of <code>pRegions</code>, <code>dstSubresource.baseArrayLayer</code> <strong>must</strong> be
<code>0</code> and <code>dstSubresource.layerCount</code> <strong>must</strong> be <code>1</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageInfo2-aspectMask-00142" href="#VUID-VkCopyImageInfo2-aspectMask-00142"></a> <span class="vuid">VUID-VkCopyImageInfo2-aspectMask-00142</span><br>

For each element of <code>pRegions</code>, <code>srcSubresource.aspectMask</code>
<strong>must</strong> specify aspects present in <code>srcImage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageInfo2-aspectMask-00143" href="#VUID-VkCopyImageInfo2-aspectMask-00143"></a> <span class="vuid">VUID-VkCopyImageInfo2-aspectMask-00143</span><br>

For each element of <code>pRegions</code>, <code>dstSubresource.aspectMask</code>
<strong>must</strong> specify aspects present in <code>dstImage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageInfo2-srcOffset-00144" href="#VUID-VkCopyImageInfo2-srcOffset-00144"></a> <span class="vuid">VUID-VkCopyImageInfo2-srcOffset-00144</span><br>

For each element of <code>pRegions</code>, <code>srcOffset.x</code> and
<span class="eq">(<code>extent.width</code> +  <code>srcOffset.x</code>)</span> <strong>must</strong> both be
greater than or equal to <code>0</code> and less than or equal to the width of the
specified <code>srcSubresource</code> of <code>srcImage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageInfo2-srcOffset-00145" href="#VUID-VkCopyImageInfo2-srcOffset-00145"></a> <span class="vuid">VUID-VkCopyImageInfo2-srcOffset-00145</span><br>

For each element of <code>pRegions</code>, <code>srcOffset.y</code> and
<span class="eq">(<code>extent.height</code> +  <code>srcOffset.y</code>)</span> <strong>must</strong> both be
greater than or equal to <code>0</code> and less than or equal to the height of the
specified <code>srcSubresource</code> of <code>srcImage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageInfo2-srcImage-00146" href="#VUID-VkCopyImageInfo2-srcImage-00146"></a> <span class="vuid">VUID-VkCopyImageInfo2-srcImage-00146</span><br>

If <code>srcImage</code> is of type <code>VK_IMAGE_TYPE_1D</code>, then for each
element of <code>pRegions</code>, <code>srcOffset.y</code> <strong>must</strong> be <code>0</code> and
<code>extent.height</code> <strong>must</strong> be <code>1</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageInfo2-srcOffset-00147" href="#VUID-VkCopyImageInfo2-srcOffset-00147"></a> <span class="vuid">VUID-VkCopyImageInfo2-srcOffset-00147</span><br>

If <code>srcImage</code> is of type <code>VK_IMAGE_TYPE_3D</code>, then for each
element of <code>pRegions</code>, <code>srcOffset.z</code> and
<span class="eq">(<code>extent.depth</code> +  <code>srcOffset.z</code>)</span> <strong>must</strong> both be
greater than or equal to <code>0</code> and less than or equal to the depth of the
specified <code>srcSubresource</code> of <code>srcImage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageInfo2-srcImage-01785" href="#VUID-VkCopyImageInfo2-srcImage-01785"></a> <span class="vuid">VUID-VkCopyImageInfo2-srcImage-01785</span><br>

If <code>srcImage</code> is of type <code>VK_IMAGE_TYPE_1D</code>, then for each
element of <code>pRegions</code>, <code>srcOffset.z</code> <strong>must</strong> be <code>0</code> and
<code>extent.depth</code> <strong>must</strong> be <code>1</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageInfo2-dstImage-01786" href="#VUID-VkCopyImageInfo2-dstImage-01786"></a> <span class="vuid">VUID-VkCopyImageInfo2-dstImage-01786</span><br>

If <code>dstImage</code> is of type <code>VK_IMAGE_TYPE_1D</code>, then for each
element of <code>pRegions</code>, <code>dstOffset.z</code> <strong>must</strong> be <code>0</code> and
<code>extent.depth</code> <strong>must</strong> be <code>1</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageInfo2-srcImage-01787" href="#VUID-VkCopyImageInfo2-srcImage-01787"></a> <span class="vuid">VUID-VkCopyImageInfo2-srcImage-01787</span><br>

If <code>srcImage</code> is of type <code>VK_IMAGE_TYPE_2D</code>, then for each
element of <code>pRegions</code>, <code>srcOffset.z</code> <strong>must</strong> be <code>0</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageInfo2-dstImage-01788" href="#VUID-VkCopyImageInfo2-dstImage-01788"></a> <span class="vuid">VUID-VkCopyImageInfo2-dstImage-01788</span><br>

If <code>dstImage</code> is of type <code>VK_IMAGE_TYPE_2D</code>, then for each
element of <code>pRegions</code>, <code>dstOffset.z</code> <strong>must</strong> be <code>0</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageInfo2-apiVersion-07933" href="#VUID-VkCopyImageInfo2-apiVersion-07933"></a> <span class="vuid">VUID-VkCopyImageInfo2-apiVersion-07933</span><br>

If the <a href="../appendices/extensions.html#VK_KHR_maintenance1" class="xref page">VK_KHR_maintenance1</a> extension is not enabled,
<a href="devsandqueues.html#VkPhysicalDeviceProperties" class="xref page">VkPhysicalDeviceProperties</a>::<code>apiVersion</code> is less than Vulkan
1.1, <code>srcImage</code> and <code>dstImage</code> <strong>must</strong> have the same
<a href="resources.html#VkImageType" class="xref page">VkImageType</a></p>
</li>
<li>
<p><a id="VUID-VkCopyImageInfo2-apiVersion-08969" href="#VUID-VkCopyImageInfo2-apiVersion-08969"></a> <span class="vuid">VUID-VkCopyImageInfo2-apiVersion-08969</span><br>

If the <a href="../appendices/extensions.html#VK_KHR_maintenance1" class="xref page">VK_KHR_maintenance1</a> extension is not enabled,
<a href="devsandqueues.html#VkPhysicalDeviceProperties" class="xref page">VkPhysicalDeviceProperties</a>::<code>apiVersion</code> is less than Vulkan
1.1, and <code>srcImage</code> or <code>dstImage</code> is of type
<code>VK_IMAGE_TYPE_2D</code>, then for each element of <code>pRegions</code>,
<code>extent.depth</code> <strong>must</strong> be <code>1</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageInfo2-srcImage-07743" href="#VUID-VkCopyImageInfo2-srcImage-07743"></a> <span class="vuid">VUID-VkCopyImageInfo2-srcImage-07743</span><br>

If <code>srcImage</code> and <code>dstImage</code> have a different <a href="resources.html#VkImageType" class="xref page">VkImageType</a>,
and <a href="features.html#features-maintenance5" class="xref page"><code>maintenance5</code></a> is not enabled,
one <strong>must</strong> be <code>VK_IMAGE_TYPE_3D</code> and the other <strong>must</strong> be
<code>VK_IMAGE_TYPE_2D</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageInfo2-maintenance5-08792" href="#VUID-VkCopyImageInfo2-maintenance5-08792"></a> <span class="vuid">VUID-VkCopyImageInfo2-maintenance5-08792</span><br>

If the <a href="features.html#features-maintenance5" class="xref page"><code>maintenance5</code></a> feature is not
enabled, the <code>layerCount</code> member of <code>srcSubresource</code> or
<code>dstSubresource</code> <strong>must</strong> not be <code>VK_REMAINING_ARRAY_LAYERS</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageInfo2-srcImage-08793" href="#VUID-VkCopyImageInfo2-srcImage-08793"></a> <span class="vuid">VUID-VkCopyImageInfo2-srcImage-08793</span><br>

If <code>srcImage</code> and <code>dstImage</code> have the same <a href="resources.html#VkImageType" class="xref page">VkImageType</a>,
and neither of the <code>layerCount</code> members of <code>srcSubresource</code> or
<code>dstSubresource</code> are <code>VK_REMAINING_ARRAY_LAYERS</code>, the
<code>layerCount</code> members <strong>must</strong> match</p>
</li>
<li>
<p><a id="VUID-VkCopyImageInfo2-srcImage-08794" href="#VUID-VkCopyImageInfo2-srcImage-08794"></a> <span class="vuid">VUID-VkCopyImageInfo2-srcImage-08794</span><br>

If <code>srcImage</code> and <code>dstImage</code> have the same <a href="resources.html#VkImageType" class="xref page">VkImageType</a>,
and one of the <code>layerCount</code> members of <code>srcSubresource</code> or
<code>dstSubresource</code> is <code>VK_REMAINING_ARRAY_LAYERS</code>, the other
member <strong>must</strong> be either <code>VK_REMAINING_ARRAY_LAYERS</code> or equal to the
<code>arrayLayers</code> member of the <a href="resources.html#VkImageCreateInfo" class="xref page">VkImageCreateInfo</a> used to create
the image minus <code>baseArrayLayer</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageInfo2-srcImage-01790" href="#VUID-VkCopyImageInfo2-srcImage-01790"></a> <span class="vuid">VUID-VkCopyImageInfo2-srcImage-01790</span><br>

If <code>srcImage</code> and <code>dstImage</code> are both of type
<code>VK_IMAGE_TYPE_2D</code>, then for each element of <code>pRegions</code>,
<code>extent.depth</code> <strong>must</strong> be <code>1</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageInfo2-srcImage-01791" href="#VUID-VkCopyImageInfo2-srcImage-01791"></a> <span class="vuid">VUID-VkCopyImageInfo2-srcImage-01791</span><br>

If <code>srcImage</code> is of type <code>VK_IMAGE_TYPE_2D</code>, and <code>dstImage</code>
is of type <code>VK_IMAGE_TYPE_3D</code>, then for each element of
<code>pRegions</code>, <code>extent.depth</code> <strong>must</strong> equal
<code>srcSubresource.layerCount</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageInfo2-dstImage-01792" href="#VUID-VkCopyImageInfo2-dstImage-01792"></a> <span class="vuid">VUID-VkCopyImageInfo2-dstImage-01792</span><br>

If <code>dstImage</code> is of type <code>VK_IMAGE_TYPE_2D</code>, and <code>srcImage</code>
is of type <code>VK_IMAGE_TYPE_3D</code>, then for each element of
<code>pRegions</code>, <code>extent.depth</code> <strong>must</strong> equal
<code>dstSubresource.layerCount</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageInfo2-dstOffset-00150" href="#VUID-VkCopyImageInfo2-dstOffset-00150"></a> <span class="vuid">VUID-VkCopyImageInfo2-dstOffset-00150</span><br>

For each element of <code>pRegions</code>, <code>dstOffset.x</code> and
<span class="eq">(<code>extent.width</code> +  <code>dstOffset.x</code>)</span> <strong>must</strong> both be
greater than or equal to <code>0</code> and less than or equal to the width of the
specified <code>dstSubresource</code> of <code>dstImage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageInfo2-dstOffset-00151" href="#VUID-VkCopyImageInfo2-dstOffset-00151"></a> <span class="vuid">VUID-VkCopyImageInfo2-dstOffset-00151</span><br>

For each element of <code>pRegions</code>, <code>dstOffset.y</code> and
<span class="eq">(<code>extent.height</code> +  <code>dstOffset.y</code>)</span> <strong>must</strong> both be
greater than or equal to <code>0</code> and less than or equal to the height of the
specified <code>dstSubresource</code> of <code>dstImage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageInfo2-dstImage-00152" href="#VUID-VkCopyImageInfo2-dstImage-00152"></a> <span class="vuid">VUID-VkCopyImageInfo2-dstImage-00152</span><br>

If <code>dstImage</code> is of type <code>VK_IMAGE_TYPE_1D</code>, then for each
element of <code>pRegions</code>, <code>dstOffset.y</code> <strong>must</strong> be <code>0</code> and
<code>extent.height</code> <strong>must</strong> be <code>1</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageInfo2-dstOffset-00153" href="#VUID-VkCopyImageInfo2-dstOffset-00153"></a> <span class="vuid">VUID-VkCopyImageInfo2-dstOffset-00153</span><br>

If <code>dstImage</code> is of type <code>VK_IMAGE_TYPE_3D</code>, then for each
element of <code>pRegions</code>, <code>dstOffset.z</code> and
<span class="eq">(<code>extent.depth</code> +  <code>dstOffset.z</code>)</span> <strong>must</strong> both be
greater than or equal to <code>0</code> and less than or equal to the depth of the
specified <code>dstSubresource</code> of <code>dstImage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageInfo2-pRegions-07278" href="#VUID-VkCopyImageInfo2-pRegions-07278"></a> <span class="vuid">VUID-VkCopyImageInfo2-pRegions-07278</span><br>

For each element of <code>pRegions</code>, <code>srcOffset.x</code> <strong>must</strong> be a
multiple of the <a href="formats.html#formats-compatibility-classes" class="xref page">texel block extent    width</a> of the <a href="formats.html#VkFormat" class="xref page">VkFormat</a> of <code>srcImage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageInfo2-pRegions-07279" href="#VUID-VkCopyImageInfo2-pRegions-07279"></a> <span class="vuid">VUID-VkCopyImageInfo2-pRegions-07279</span><br>

For each element of <code>pRegions</code>, <code>srcOffset.y</code> <strong>must</strong> be a
multiple of the <a href="formats.html#formats-compatibility-classes" class="xref page">texel block extent    height</a> of the <a href="formats.html#VkFormat" class="xref page">VkFormat</a> of <code>srcImage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageInfo2-pRegions-07280" href="#VUID-VkCopyImageInfo2-pRegions-07280"></a> <span class="vuid">VUID-VkCopyImageInfo2-pRegions-07280</span><br>

For each element of <code>pRegions</code>, <code>srcOffset.z</code> <strong>must</strong> be a
multiple of the <a href="formats.html#formats-compatibility-classes" class="xref page">texel block extent    depth</a> of the <a href="formats.html#VkFormat" class="xref page">VkFormat</a> of <code>srcImage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageInfo2-pRegions-07281" href="#VUID-VkCopyImageInfo2-pRegions-07281"></a> <span class="vuid">VUID-VkCopyImageInfo2-pRegions-07281</span><br>

For each element of <code>pRegions</code>, <code>dstOffset.x</code> <strong>must</strong> be a
multiple of the <a href="formats.html#formats-compatibility-classes" class="xref page">texel block extent    width</a> of the <a href="formats.html#VkFormat" class="xref page">VkFormat</a> of <code>dstImage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageInfo2-pRegions-07282" href="#VUID-VkCopyImageInfo2-pRegions-07282"></a> <span class="vuid">VUID-VkCopyImageInfo2-pRegions-07282</span><br>

For each element of <code>pRegions</code>, <code>dstOffset.y</code> <strong>must</strong> be a
multiple of the <a href="formats.html#formats-compatibility-classes" class="xref page">texel block extent    height</a> of the <a href="formats.html#VkFormat" class="xref page">VkFormat</a> of <code>dstImage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageInfo2-pRegions-07283" href="#VUID-VkCopyImageInfo2-pRegions-07283"></a> <span class="vuid">VUID-VkCopyImageInfo2-pRegions-07283</span><br>

For each element of <code>pRegions</code>, <code>dstOffset.z</code> <strong>must</strong> be a
multiple of the <a href="formats.html#formats-compatibility-classes" class="xref page">texel block extent    depth</a> of the <a href="formats.html#VkFormat" class="xref page">VkFormat</a> of <code>dstImage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageInfo2-srcImage-01728" href="#VUID-VkCopyImageInfo2-srcImage-01728"></a> <span class="vuid">VUID-VkCopyImageInfo2-srcImage-01728</span><br>

For each element of <code>pRegions</code>, if the sum of <code>srcOffset.x</code> and
<code>extent.width</code> does not equal the width of the subresource specified
by <code>srcSubresource</code>, <code>extent.width</code> <strong>must</strong> be a multiple of the
<a href="formats.html#formats-compatibility-classes" class="xref page">texel block extent width</a> of the
<a href="formats.html#VkFormat" class="xref page">VkFormat</a> of <code>srcImage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageInfo2-srcImage-01729" href="#VUID-VkCopyImageInfo2-srcImage-01729"></a> <span class="vuid">VUID-VkCopyImageInfo2-srcImage-01729</span><br>

For each element of <code>pRegions</code>, if the sum of <code>srcOffset.y</code> and
<code>extent.height</code> does not equal the height of the subresource
specified by <code>srcSubresource</code>, <code>extent.height</code> <strong>must</strong> be a
multiple of the <a href="formats.html#formats-compatibility-classes" class="xref page">texel block extent    height</a> of the <a href="formats.html#VkFormat" class="xref page">VkFormat</a> of <code>srcImage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageInfo2-srcImage-01730" href="#VUID-VkCopyImageInfo2-srcImage-01730"></a> <span class="vuid">VUID-VkCopyImageInfo2-srcImage-01730</span><br>

For each element of <code>pRegions</code>, if the sum of <code>srcOffset.z</code> and
<code>extent.depth</code> does not equal the depth of the subresource specified
by <code>srcSubresource</code>, <code>extent.depth</code> <strong>must</strong> be a multiple of the
<a href="formats.html#formats-compatibility-classes" class="xref page">texel block extent depth</a> of the
<a href="formats.html#VkFormat" class="xref page">VkFormat</a> of <code>srcImage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageInfo2-dstImage-01732" href="#VUID-VkCopyImageInfo2-dstImage-01732"></a> <span class="vuid">VUID-VkCopyImageInfo2-dstImage-01732</span><br>

For each element of <code>pRegions</code>, if the sum of <code>dstOffset.x</code> and
<code>extent.width</code> does not equal the width of the subresource specified
by <code>dstSubresource</code>, <code>extent.width</code> <strong>must</strong> be a multiple of the
<a href="formats.html#formats-compatibility-classes" class="xref page">texel block extent width</a> of the
<a href="formats.html#VkFormat" class="xref page">VkFormat</a> of <code>dstImage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageInfo2-dstImage-01733" href="#VUID-VkCopyImageInfo2-dstImage-01733"></a> <span class="vuid">VUID-VkCopyImageInfo2-dstImage-01733</span><br>

For each element of <code>pRegions</code>, if the sum of <code>dstOffset.y</code> and
<code>extent.height</code> does not equal the height of the subresource
specified by <code>dstSubresource</code>, <code>extent.height</code> <strong>must</strong> be a
multiple of the <a href="formats.html#formats-compatibility-classes" class="xref page">texel block extent    height</a> of the <a href="formats.html#VkFormat" class="xref page">VkFormat</a> of <code>dstImage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageInfo2-dstImage-01734" href="#VUID-VkCopyImageInfo2-dstImage-01734"></a> <span class="vuid">VUID-VkCopyImageInfo2-dstImage-01734</span><br>

For each element of <code>pRegions</code>, if the sum of <code>dstOffset.z</code> and
<code>extent.depth</code> does not equal the depth of the subresource specified
by <code>dstSubresource</code>, <code>extent.depth</code> <strong>must</strong> be a multiple of the
<a href="formats.html#formats-compatibility-classes" class="xref page">texel block extent depth</a> of the
<a href="formats.html#VkFormat" class="xref page">VkFormat</a> of <code>dstImage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageInfo2-aspect-06662" href="#VUID-VkCopyImageInfo2-aspect-06662"></a> <span class="vuid">VUID-VkCopyImageInfo2-aspect-06662</span><br>

If the <code>aspect</code> member of any element of <code>pRegions</code> includes any
flag other than <code>VK_IMAGE_ASPECT_STENCIL_BIT</code> or <code>srcImage</code> was
not created with <a href="resources.html#VkImageStencilUsageCreateInfo" class="xref page">separate stencil    usage</a>, <code>VK_IMAGE_USAGE_TRANSFER_SRC_BIT</code> <strong>must</strong> have been included
in the <a href="resources.html#VkImageCreateInfo" class="xref page">VkImageCreateInfo</a>::<code>usage</code> used to create
<code>srcImage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageInfo2-aspect-06663" href="#VUID-VkCopyImageInfo2-aspect-06663"></a> <span class="vuid">VUID-VkCopyImageInfo2-aspect-06663</span><br>

If the <code>aspect</code> member of any element of <code>pRegions</code> includes any
flag other than <code>VK_IMAGE_ASPECT_STENCIL_BIT</code> or <code>dstImage</code> was
not created with <a href="resources.html#VkImageStencilUsageCreateInfo" class="xref page">separate stencil    usage</a>, <code>VK_IMAGE_USAGE_TRANSFER_DST_BIT</code> <strong>must</strong> have been included
in the <a href="resources.html#VkImageCreateInfo" class="xref page">VkImageCreateInfo</a>::<code>usage</code> used to create
<code>dstImage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageInfo2-aspect-06664" href="#VUID-VkCopyImageInfo2-aspect-06664"></a> <span class="vuid">VUID-VkCopyImageInfo2-aspect-06664</span><br>

If the <code>aspect</code> member of any element of <code>pRegions</code> includes
<code>VK_IMAGE_ASPECT_STENCIL_BIT</code>, and <code>srcImage</code> was created with
<a href="resources.html#VkImageStencilUsageCreateInfo" class="xref page">separate stencil usage</a>,
<code>VK_IMAGE_USAGE_TRANSFER_SRC_BIT</code> <strong>must</strong> have been included in the
<a href="resources.html#VkImageStencilUsageCreateInfo" class="xref page">VkImageStencilUsageCreateInfo</a>::<code>stencilUsage</code> used to create
<code>srcImage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageInfo2-aspect-06665" href="#VUID-VkCopyImageInfo2-aspect-06665"></a> <span class="vuid">VUID-VkCopyImageInfo2-aspect-06665</span><br>

If the <code>aspect</code> member of any element of <code>pRegions</code> includes
<code>VK_IMAGE_ASPECT_STENCIL_BIT</code>, and <code>dstImage</code> was created with
<a href="resources.html#VkImageStencilUsageCreateInfo" class="xref page">separate stencil usage</a>,
<code>VK_IMAGE_USAGE_TRANSFER_DST_BIT</code> <strong>must</strong> have been included in the
<a href="resources.html#VkImageStencilUsageCreateInfo" class="xref page">VkImageStencilUsageCreateInfo</a>::<code>stencilUsage</code> used to create
<code>dstImage</code></p>
</li>
</ul>
</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkCopyImageInfo2-srcImage-07966" href="#VUID-VkCopyImageInfo2-srcImage-07966"></a> <span class="vuid">VUID-VkCopyImageInfo2-srcImage-07966</span><br>

If <code>srcImage</code> is non-sparse then the image or the specified
<em>disjoint</em> plane <strong>must</strong> be bound completely and contiguously to a single
<code>VkDeviceMemory</code> object</p>
</li>
<li>
<p><a id="VUID-VkCopyImageInfo2-srcSubresource-07967" href="#VUID-VkCopyImageInfo2-srcSubresource-07967"></a> <span class="vuid">VUID-VkCopyImageInfo2-srcSubresource-07967</span><br>

The <code>srcSubresource.mipLevel</code> member of each element of
<code>pRegions</code> <strong>must</strong> be less than the <code>mipLevels</code> specified in
<a href="resources.html#VkImageCreateInfo" class="xref page">VkImageCreateInfo</a> when <code>srcImage</code> was created</p>
</li>
<li>
<p><a id="VUID-VkCopyImageInfo2-srcSubresource-07968" href="#VUID-VkCopyImageInfo2-srcSubresource-07968"></a> <span class="vuid">VUID-VkCopyImageInfo2-srcSubresource-07968</span><br>

The <span class="eq"><code>srcSubresource.baseArrayLayer</code> + 
<code>srcSubresource.layerCount</code></span> of each element of <code>pRegions</code>
, if <code>srcSubresource.layerCount</code> is not
<code>VK_REMAINING_ARRAY_LAYERS</code> and <a href="features.html#features-maintenance5" class="xref page">    <code>maintenance5</code></a> is not enabled,
<strong>must</strong> be less than or equal to the <code>arrayLayers</code> specified in
<a href="resources.html#VkImageCreateInfo" class="xref page">VkImageCreateInfo</a> when <code>srcImage</code> was created</p>
</li>
<li>
<p><a id="VUID-VkCopyImageInfo2-srcImage-07969" href="#VUID-VkCopyImageInfo2-srcImage-07969"></a> <span class="vuid">VUID-VkCopyImageInfo2-srcImage-07969</span><br>

<code>srcImage</code> <strong>must</strong> not have been created with <code>flags</code>
containing <code>VK_IMAGE_CREATE_SUBSAMPLED_BIT_EXT</code></p>
</li>
</ul>
</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkCopyImageInfo2-dstImage-07966" href="#VUID-VkCopyImageInfo2-dstImage-07966"></a> <span class="vuid">VUID-VkCopyImageInfo2-dstImage-07966</span><br>

If <code>dstImage</code> is non-sparse then the image or the specified
<em>disjoint</em> plane <strong>must</strong> be bound completely and contiguously to a single
<code>VkDeviceMemory</code> object</p>
</li>
<li>
<p><a id="VUID-VkCopyImageInfo2-dstSubresource-07967" href="#VUID-VkCopyImageInfo2-dstSubresource-07967"></a> <span class="vuid">VUID-VkCopyImageInfo2-dstSubresource-07967</span><br>

The <code>dstSubresource.mipLevel</code> member of each element of
<code>pRegions</code> <strong>must</strong> be less than the <code>mipLevels</code> specified in
<a href="resources.html#VkImageCreateInfo" class="xref page">VkImageCreateInfo</a> when <code>dstImage</code> was created</p>
</li>
<li>
<p><a id="VUID-VkCopyImageInfo2-dstSubresource-07968" href="#VUID-VkCopyImageInfo2-dstSubresource-07968"></a> <span class="vuid">VUID-VkCopyImageInfo2-dstSubresource-07968</span><br>

The <span class="eq"><code>dstSubresource.baseArrayLayer</code> + 
<code>dstSubresource.layerCount</code></span> of each element of <code>pRegions</code>
, if <code>dstSubresource.layerCount</code> is not
<code>VK_REMAINING_ARRAY_LAYERS</code> and <a href="features.html#features-maintenance5" class="xref page">    <code>maintenance5</code></a> is not enabled,
<strong>must</strong> be less than or equal to the <code>arrayLayers</code> specified in
<a href="resources.html#VkImageCreateInfo" class="xref page">VkImageCreateInfo</a> when <code>dstImage</code> was created</p>
</li>
<li>
<p><a id="VUID-VkCopyImageInfo2-dstImage-07969" href="#VUID-VkCopyImageInfo2-dstImage-07969"></a> <span class="vuid">VUID-VkCopyImageInfo2-dstImage-07969</span><br>

<code>dstImage</code> <strong>must</strong> not have been created with <code>flags</code>
containing <code>VK_IMAGE_CREATE_SUBSAMPLED_BIT_EXT</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkCopyImageInfo2-sType-sType" href="#VUID-VkCopyImageInfo2-sType-sType"></a> <span class="vuid">VUID-VkCopyImageInfo2-sType-sType</span><br>
 <code>sType</code> <strong>must</strong> be <code>VK_STRUCTURE_TYPE_COPY_IMAGE_INFO_2</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageInfo2-pNext-pNext" href="#VUID-VkCopyImageInfo2-pNext-pNext"></a> <span class="vuid">VUID-VkCopyImageInfo2-pNext-pNext</span><br>
 <code>pNext</code> <strong>must</strong> be <code>NULL</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageInfo2-srcImage-parameter" href="#VUID-VkCopyImageInfo2-srcImage-parameter"></a> <span class="vuid">VUID-VkCopyImageInfo2-srcImage-parameter</span><br>
 <code>srcImage</code> <strong>must</strong> be a valid <a href="resources.html#VkImage" class="xref page">VkImage</a> handle</p>
</li>
<li>
<p><a id="VUID-VkCopyImageInfo2-srcImageLayout-parameter" href="#VUID-VkCopyImageInfo2-srcImageLayout-parameter"></a> <span class="vuid">VUID-VkCopyImageInfo2-srcImageLayout-parameter</span><br>
 <code>srcImageLayout</code> <strong>must</strong> be a valid <a href="resources.html#VkImageLayout" class="xref page">VkImageLayout</a> value</p>
</li>
<li>
<p><a id="VUID-VkCopyImageInfo2-dstImage-parameter" href="#VUID-VkCopyImageInfo2-dstImage-parameter"></a> <span class="vuid">VUID-VkCopyImageInfo2-dstImage-parameter</span><br>
 <code>dstImage</code> <strong>must</strong> be a valid <a href="resources.html#VkImage" class="xref page">VkImage</a> handle</p>
</li>
<li>
<p><a id="VUID-VkCopyImageInfo2-dstImageLayout-parameter" href="#VUID-VkCopyImageInfo2-dstImageLayout-parameter"></a> <span class="vuid">VUID-VkCopyImageInfo2-dstImageLayout-parameter</span><br>
 <code>dstImageLayout</code> <strong>must</strong> be a valid <a href="resources.html#VkImageLayout" class="xref page">VkImageLayout</a> value</p>
</li>
<li>
<p><a id="VUID-VkCopyImageInfo2-pRegions-parameter" href="#VUID-VkCopyImageInfo2-pRegions-parameter"></a> <span class="vuid">VUID-VkCopyImageInfo2-pRegions-parameter</span><br>
 <code>pRegions</code> <strong>must</strong> be a valid pointer to an array of <code>regionCount</code> valid <a href="#VkImageCopy2">VkImageCopy2</a> structures</p>
</li>
<li>
<p><a id="VUID-VkCopyImageInfo2-regionCount-arraylength" href="#VUID-VkCopyImageInfo2-regionCount-arraylength"></a> <span class="vuid">VUID-VkCopyImageInfo2-regionCount-arraylength</span><br>
 <code>regionCount</code> <strong>must</strong> be greater than <code>0</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageInfo2-commonparent" href="#VUID-VkCopyImageInfo2-commonparent"></a> <span class="vuid">VUID-VkCopyImageInfo2-commonparent</span><br>
 Both of <code>dstImage</code>, and <code>srcImage</code> <strong>must</strong> have been created, allocated, or retrieved from the same <a href="devsandqueues.html#VkDevice" class="xref page">VkDevice</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>VkImageCopy2</code> structure is defined as:</p>
</div>
<div id="VkImageCopy2" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_VERSION_1_3
typedef struct VkImageCopy2 {
    VkStructureType             sType;
    const void*                 pNext;
    VkImageSubresourceLayers    srcSubresource;
    VkOffset3D                  srcOffset;
    VkImageSubresourceLayers    dstSubresource;
    VkOffset3D                  dstOffset;
    VkExtent3D                  extent;
} VkImageCopy2;</code></pre>
</div>
</div>
<div class="paragraph">
<p>or the equivalent</p>
</div>
<div id="VkImageCopy2KHR" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_KHR_copy_commands2
typedef VkImageCopy2 VkImageCopy2KHR;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is a <a href="fundamentals.html#VkStructureType" class="xref page">VkStructureType</a> value identifying this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>srcSubresource</code> and <code>dstSubresource</code> are
<a href="#VkImageSubresourceLayers">VkImageSubresourceLayers</a> structures specifying the image
subresources of the images used for the source and destination image
data, respectively.</p>
</li>
<li>
<p><code>srcOffset</code> and <code>dstOffset</code> select the initial <code>x</code>, <code>y</code>,
and <code>z</code> offsets in texels of the sub-regions of the source and
destination image data.</p>
</li>
<li>
<p><code>extent</code> is the size in texels of the image to copy in <code>width</code>,
<code>height</code> and <code>depth</code>.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkImageCopy2-apiVersion-07940" href="#VUID-VkImageCopy2-apiVersion-07940"></a> <span class="vuid">VUID-VkImageCopy2-apiVersion-07940</span><br>

If the <a href="../appendices/extensions.html#VK_KHR_sampler_ycbcr_conversion" class="xref page">VK_KHR_sampler_ycbcr_conversion</a> extension is not enabled
and <a href="devsandqueues.html#VkPhysicalDeviceProperties" class="xref page">VkPhysicalDeviceProperties</a>::<code>apiVersion</code> is less than
Vulkan 1.1, the <code>aspectMask</code> member of <code>srcSubresource</code> and
<code>dstSubresource</code> <strong>must</strong> match</p>
</li>
<li>
<p><a id="VUID-VkImageCopy2-apiVersion-07941" href="#VUID-VkImageCopy2-apiVersion-07941"></a> <span class="vuid">VUID-VkImageCopy2-apiVersion-07941</span><br>

If the <a href="../appendices/extensions.html#VK_KHR_maintenance1" class="xref page">VK_KHR_maintenance1</a> extension is not enabled and
<a href="devsandqueues.html#VkPhysicalDeviceProperties" class="xref page">VkPhysicalDeviceProperties</a>::<code>apiVersion</code> is less than Vulkan
1.1, the <code>layerCount</code> member of <code>srcSubresource</code> and
<code>dstSubresource</code> <strong>must</strong> match</p>
</li>
<li>
<p><a id="VUID-VkImageCopy2-extent-06668" href="#VUID-VkImageCopy2-extent-06668"></a> <span class="vuid">VUID-VkImageCopy2-extent-06668</span><br>

<code>extent.width</code> <strong>must</strong> not be 0</p>
</li>
<li>
<p><a id="VUID-VkImageCopy2-extent-06669" href="#VUID-VkImageCopy2-extent-06669"></a> <span class="vuid">VUID-VkImageCopy2-extent-06669</span><br>

<code>extent.height</code> <strong>must</strong> not be 0</p>
</li>
<li>
<p><a id="VUID-VkImageCopy2-extent-06670" href="#VUID-VkImageCopy2-extent-06670"></a> <span class="vuid">VUID-VkImageCopy2-extent-06670</span><br>

<code>extent.depth</code> <strong>must</strong> not be 0</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkImageCopy2-sType-sType" href="#VUID-VkImageCopy2-sType-sType"></a> <span class="vuid">VUID-VkImageCopy2-sType-sType</span><br>
 <code>sType</code> <strong>must</strong> be <code>VK_STRUCTURE_TYPE_IMAGE_COPY_2</code></p>
</li>
<li>
<p><a id="VUID-VkImageCopy2-pNext-pNext" href="#VUID-VkImageCopy2-pNext-pNext"></a> <span class="vuid">VUID-VkImageCopy2-pNext-pNext</span><br>
 <code>pNext</code> <strong>must</strong> be <code>NULL</code></p>
</li>
<li>
<p><a id="VUID-VkImageCopy2-srcSubresource-parameter" href="#VUID-VkImageCopy2-srcSubresource-parameter"></a> <span class="vuid">VUID-VkImageCopy2-srcSubresource-parameter</span><br>
 <code>srcSubresource</code> <strong>must</strong> be a valid <a href="#VkImageSubresourceLayers">VkImageSubresourceLayers</a> structure</p>
</li>
<li>
<p><a id="VUID-VkImageCopy2-dstSubresource-parameter" href="#VUID-VkImageCopy2-dstSubresource-parameter"></a> <span class="vuid">VUID-VkImageCopy2-dstSubresource-parameter</span><br>
 <code>dstSubresource</code> <strong>must</strong> be a valid <a href="#VkImageSubresourceLayers">VkImageSubresourceLayers</a> structure</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="copies-buffers-images"><a class="anchor" href="#copies-buffers-images"></a>Copying Data Between Buffers and Images</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Data <strong>can</strong> be copied between buffers and images, enabling applications to
load and store data between images and user defined offsets in buffer
memory.</p>
</div>
<div id="copies-buffers-images-addressing" class="paragraph">
<p>When copying between a buffer and an image, whole texel blocks are always
copied; each texel block in the specified extent in the image to be copied
will be written to a region in the buffer, specified according to the
position of the texel block, and the <a href="formats.html#formats-compatibility-classes" class="xref page">texelblock extent</a> and size of the format being copied.</p>
</div>
<div class="paragraph">
<p>For a set of coordinates <span class="eq">(x,y,z,layer)</span>, where:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"></dt>
<dd>
<p><span class="eq">x</span> is in the range <span class="eq">[<code>imageOffset.x</code> / blockWidth,
⌈(<code>imageOffset.x</code> +  <code>imageExtent.width</code>) /
blockWidth⌉)</span>,</p>
</dd>
<dt class="hdlist1"></dt>
<dd>
<p><span class="eq">y</span> is in the range <span class="eq">[<code>imageOffset.y</code> / blockHeight,
⌈(<code>imageOffset.y</code> +  <code>imageExtent.height</code>) /
blockHeight⌉)</span>,</p>
</dd>
<dt class="hdlist1"></dt>
<dd>
<p><span class="eq">z</span> is in the range <span class="eq">[<code>imageOffset.z</code> / blockDepth,
⌈(<code>imageOffset.z</code> +  <code>imageExtent.depth</code>) /
blockDepth⌉)</span>,</p>
</dd>
<dt class="hdlist1"></dt>
<dd>
<p><span class="eq">layer</span> is in the range
[<code>imageSubresource.baseArrayLayer</code>,
<code>imageSubresource.baseArrayLayer</code> + 
<code>imageSubresource.layerCount</code>),</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>and where <span class="eq">blockWidth</span>, <span class="eq">blockHeight</span>, and <span class="eq">blockDepth</span> are the
dimensions of the <a href="formats.html#formats-compatibility-classes" class="xref page">texel block extent</a> of
the image&#8217;s format.</p>
</div>
<div class="paragraph">
<p>For each <span class="eq">(x,y,z,layer)</span> coordinate, texels in the image layer selected
by <span class="eq">layer</span> are accessed in the following ranges:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"></dt>
<dd>
<p><span class="eq">[x × blockWidth, max( (x × blockWidth) + 
blockWidth, imageWidth) )</span></p>
</dd>
<dt class="hdlist1"></dt>
<dd>
<p><span class="eq">[y × blockHeight, max( (y × blockHeight) + 
blockHeight, imageHeight) )</span></p>
</dd>
<dt class="hdlist1"></dt>
<dd>
<p><span class="eq">[z × blockDepth, max( (z × blockDepth) + 
blockDepth, imageDepth) )</span></p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>where <span class="eq">imageWidth</span>, <span class="eq">imageHeight</span>, and <span class="eq">imageDepth</span> are the
dimensions of the image subresource.</p>
</div>
<div class="paragraph">
<p>For each <span class="eq">(x,y,z,layer)</span> coordinate, bytes in the buffer are accessed at
offsets in the range <span class="eq">[texelOffset, texelOffset +  blockSize)</span>,
where:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"></dt>
<dd>
<p><span class="eq">texelOffset = <code>bufferOffset</code> +  (x ×
blockSize) +  (y × rowExtent) +  (z ×
sliceExtent) + (layer × layerExtent)</span></p>
</dd>
<dt class="hdlist1"></dt>
<dd>
<p><span class="eq">blockSize</span> is the size of the block in bytes for the format</p>
</dd>
<dt class="hdlist1"></dt>
<dd>
<p><span class="eq">rowExtent = max(<code>bufferRowLength</code>,
⌈<code>imageExtent.width</code> / blockWidth⌉ ×
blockSize)</span></p>
</dd>
<dt class="hdlist1"></dt>
<dd>
<p><span class="eq">sliceExtent = max(<code>bufferImageHeight</code>,
<code>imageExtent.height</code> × rowExtent)</span></p>
</dd>
<dt class="hdlist1"></dt>
<dd>
<p><span class="eq">layerExtent = <code>imageExtent.depth</code> × sliceExtent</span></p>
</dd>
</dl>
</div>
<div id="copies-buffers-images-rotation-addressing" class="paragraph">
<p>If a rotation is specified by <a href="#VkCopyCommandTransformInfoQCOM">VkCopyCommandTransformInfoQCOM</a>, the 2D
region of the image being addressed is rotated around the offset, modifying
the range of <span class="eq">x</span> and <span class="eq">y</span> coordinates for the image address according
to the specified <a href="VK_KHR_surface/wsi.html#VkSurfaceTransformFlagBitsKHR" class="xref page">VkSurfaceTransformFlagBitsKHR</a>:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>If <code>VK_SURFACE_TRANSFORM_IDENTITY_BIT_KHR</code> is specified, no rotation
is performed:</p>
<div class="dlist">
<dl>
<dt class="hdlist1"></dt>
<dd>
<p><span class="eq">x'</span> is in the same range as <span class="eq">x</span></p>
</dd>
<dt class="hdlist1"></dt>
<dd>
<p><span class="eq">y'</span> is in the same range as <span class="eq">y</span></p>
</dd>
<dt class="hdlist1"></dt>
<dd>
<p><span class="eq">blockWidth' = blockWidth</span></p>
</dd>
<dt class="hdlist1"></dt>
<dd>
<p><span class="eq">blockHeight' = blockHeight</span></p>
</dd>
<dt class="hdlist1"></dt>
<dd>
<p><span class="eq">imageWidth' = imageWidth</span></p>
</dd>
<dt class="hdlist1"></dt>
<dd>
<p><span class="eq">imageHeight' = imageHeight</span></p>
</dd>
</dl>
</div>
</li>
<li>
<p>If <code>VK_SURFACE_TRANSFORM_ROTATE_90_BIT_KHR</code> is specified</p>
<div class="dlist">
<dl>
<dt class="hdlist1"></dt>
<dd>
<p><span class="eq">x'</span> is in the range <span class="eq">[⌈(<code>imageOffset.x</code>
-  <code>imageExtent.height</code>) / blockHeight⌉,
<code>imageOffset.x</code> -  image/ blockHeight)</span></p>
</dd>
<dt class="hdlist1"></dt>
<dd>
<p><span class="eq">y'</span> is in the range <span class="eq">[<code>imageOffset.y</code> /
blockWidth, ⌈(<code>imageOffset.y</code> + 
<code>imageExtent.width</code>) / blockWidth⌉)</span></p>
</dd>
<dt class="hdlist1"></dt>
<dd>
<p><span class="eq">blockWidth' = blockHeight</span></p>
</dd>
<dt class="hdlist1"></dt>
<dd>
<p><span class="eq">blockHeight' = blockWidth</span></p>
</dd>
<dt class="hdlist1"></dt>
<dd>
<p><span class="eq">imageWidth' = imageHeight</span></p>
</dd>
<dt class="hdlist1"></dt>
<dd>
<p><span class="eq">imageHeight' = imageWidth</span></p>
</dd>
</dl>
</div>
</li>
<li>
<p>If <code>VK_SURFACE_TRANSFORM_ROTATE_180_BIT_KHR</code> is specified:</p>
<div class="dlist">
<dl>
<dt class="hdlist1"></dt>
<dd>
<p><span class="eq">x'</span> is in the range <span class="eq">[⌈(<code>imageOffset.x</code>
-  <code>imageExtent.width</code>) / blockWidth⌉,
<code>imageOffset.x</code> / blockWidth)</span>,</p>
</dd>
<dt class="hdlist1"></dt>
<dd>
<p><span class="eq">y'</span> is in the range <span class="eq">[⌈(<code>imageOffset.x</code>
+  <code>imageExtent.height</code>) / blockHeight⌉,
<code>imageOffset.x</code> / blockHeight)</span>,</p>
</dd>
<dt class="hdlist1"></dt>
<dd>
<p><span class="eq">blockWidth' = blockWidth</span></p>
</dd>
<dt class="hdlist1"></dt>
<dd>
<p><span class="eq">blockHeight' = blockHeight</span></p>
</dd>
<dt class="hdlist1"></dt>
<dd>
<p><span class="eq">imageWidth' = imageWidth</span></p>
</dd>
<dt class="hdlist1"></dt>
<dd>
<p><span class="eq">imageHeight' = imageHeight</span></p>
</dd>
</dl>
</div>
</li>
<li>
<p>If <code>VK_SURFACE_TRANSFORM_ROTATE_270_BIT_KHR</code> is specified:</p>
<div class="dlist">
<dl>
<dt class="hdlist1"></dt>
<dd>
<p><span class="eq">x</span> is in the range <span class="eq">[<code>imageOffset.x</code> /
blockHeight, ⌈(<code>imageOffset.x</code> + 
<code>imageExtent.height</code>) / blockHeight⌉)</span></p>
</dd>
<dt class="hdlist1"></dt>
<dd>
<p><span class="eq">y</span> is in the range <span class="eq">[⌈(<code>imageOffset.y</code>
-  <code>imageExtent.width</code>) / blockWidth⌉,
<code>imageOffset.y</code> / blockWidth)</span>.</p>
</dd>
<dt class="hdlist1"></dt>
<dd>
<p><span class="eq">blockWidth' = blockHeight</span></p>
</dd>
<dt class="hdlist1"></dt>
<dd>
<p><span class="eq">blockHeight' = blockWidth</span></p>
</dd>
<dt class="hdlist1"></dt>
<dd>
<p><span class="eq">imageWidth' = imageHeight</span></p>
</dd>
<dt class="hdlist1"></dt>
<dd>
<p><span class="eq">imageHeight' = imageWidth</span></p>
</dd>
</dl>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>When rotation is performed, for each <span class="eq">(x,y,z,layer)</span> coordinate, texels
in the image layer selected by <span class="eq">layer</span> are instead accessed in the
following ranges:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"></dt>
<dd>
<p><span class="eq">[x' × blockWidth', max( (x' × blockWidth')
+  blockWidth', imageWidth') )</span></p>
</dd>
<dt class="hdlist1"></dt>
<dd>
<p><span class="eq">[y' × blockHeight', max( (y' × blockHeight')
+  blockHeight', imageHeight') )</span></p>
</dd>
<dt class="hdlist1"></dt>
<dd>
<p><span class="eq">[z' × blockDepth', max( (z' × blockDepth')
+  blockDepth', imageDepth') )</span></p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>Buffer addressing calculations are unaffected by this rotation.</p>
</div>
<div id="copies-buffers-images-depth-stencil" class="paragraph">
<p>When copying between a buffer and the depth or stencil aspect of an image,
data in the buffer is assumed to be laid out as separate planes rather than
interleaved.
Addressing calculations are thus performed for a different format than the
base image, according to the aspect, as described in the following table:</p>
</div>
<table class="tableblock frame-all grid-all" style="width: 95%;">
<caption class="title">Table 1. Depth/Stencil Aspect Copy Table</caption>
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-center valign-top">Base Format</th>
<th class="tableblock halign-center valign-top">Depth Aspect Format</th>
<th class="tableblock halign-center valign-top">Stencil Aspect Format</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>VK_FORMAT_D16_UNORM</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>VK_FORMAT_D16_UNORM</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">-</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>VK_FORMAT_X8_D24_UNORM_PACK32</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>VK_FORMAT_X8_D24_UNORM_PACK32</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">-</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>VK_FORMAT_D32_SFLOAT</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>VK_FORMAT_D32_SFLOAT</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">-</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>VK_FORMAT_S8_UINT</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>VK_FORMAT_S8_UINT</code></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>VK_FORMAT_D16_UNORM_S8_UINT</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>VK_FORMAT_D16_UNORM</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>VK_FORMAT_S8_UINT</code></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>VK_FORMAT_D24_UNORM_S8_UINT</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>VK_FORMAT_X8_D24_UNORM_PACK32</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>VK_FORMAT_S8_UINT</code></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>VK_FORMAT_D32_SFLOAT_S8_UINT</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>VK_FORMAT_D32_SFLOAT</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>VK_FORMAT_S8_UINT</code></p></td>
</tr>
</tbody>
</table>
<div id="copies-buffers-images-multi-planar" class="paragraph">
<p>When copying between a buffer and any plane of a
<a href="formats.html#formats-requiring-sampler-ycbcr-conversion" class="xref page">multi-planar image</a>,
addressing calculations are performed using the <a href="formats.html#formats-compatible-planes" class="xref page">compatible format for that plane</a>, rather than the format of the
multi-planar image.</p>
</div>
<div class="paragraph">
<p>Each texel block is copied from one resource to the other according to the
above addressing equations.</p>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>To copy data from a buffer object to an image object, call:</p>
</div>
<div id="vkCmdCopyBufferToImage" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_VERSION_1_0
void vkCmdCopyBufferToImage(
    VkCommandBuffer                             commandBuffer,
    VkBuffer                                    srcBuffer,
    VkImage                                     dstImage,
    VkImageLayout                               dstImageLayout,
    uint32_t                                    regionCount,
    const VkBufferImageCopy*                    pRegions);</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>commandBuffer</code> is the command buffer into which the command will be
recorded.</p>
</li>
<li>
<p><code>srcBuffer</code> is the source buffer.</p>
</li>
<li>
<p><code>dstImage</code> is the destination image.</p>
</li>
<li>
<p><code>dstImageLayout</code> is the layout of the destination image subresources
for the copy.</p>
</li>
<li>
<p><code>regionCount</code> is the number of regions to copy.</p>
</li>
<li>
<p><code>pRegions</code> is a pointer to an array of <a href="#VkBufferImageCopy">VkBufferImageCopy</a>
structures specifying the regions to copy.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Each source region specified by <code>pRegions</code> is copied from the source
buffer to the destination region of the destination image according to the
<a href="#copies-buffers-images-addressing">addressing calculations</a> for each
resource.
If any of the specified regions in <code>srcBuffer</code> overlaps in memory with
any of the specified regions in <code>dstImage</code>, values read from those
overlapping regions are <strong>undefined</strong>.
If any region accesses a depth aspect in <code>dstImage</code>
and the <code><a href="../appendices/extensions.html#VK_EXT_depth_range_unrestricted" class="xref page">VK_EXT_depth_range_unrestricted</a></code> extension is not enabled,
values copied from <code>srcBuffer</code> outside of the range <span class="eq">[0,1]</span> will be
be written as <strong>undefined</strong> values to the destination image.</p>
</div>
<div class="paragraph">
<p>Copy regions for the image <strong>must</strong> be aligned to a multiple of the texel block
extent in each dimension, except at the edges of the image, where region
extents <strong>must</strong> match the edge of the image.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCmdCopyBufferToImage-dstImage-07966" href="#VUID-vkCmdCopyBufferToImage-dstImage-07966"></a> <span class="vuid">VUID-vkCmdCopyBufferToImage-dstImage-07966</span><br>

If <code>dstImage</code> is non-sparse then the image or the specified
<em>disjoint</em> plane <strong>must</strong> be bound completely and contiguously to a single
<code>VkDeviceMemory</code> object</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyBufferToImage-imageSubresource-07967" href="#VUID-vkCmdCopyBufferToImage-imageSubresource-07967"></a> <span class="vuid">VUID-vkCmdCopyBufferToImage-imageSubresource-07967</span><br>

The <code>imageSubresource.mipLevel</code> member of each element of
<code>pRegions</code> <strong>must</strong> be less than the <code>mipLevels</code> specified in
<a href="resources.html#VkImageCreateInfo" class="xref page">VkImageCreateInfo</a> when <code>dstImage</code> was created</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyBufferToImage-imageSubresource-07968" href="#VUID-vkCmdCopyBufferToImage-imageSubresource-07968"></a> <span class="vuid">VUID-vkCmdCopyBufferToImage-imageSubresource-07968</span><br>

The <span class="eq"><code>imageSubresource.baseArrayLayer</code> + 
<code>imageSubresource.layerCount</code></span> of each element of <code>pRegions</code>
, if <code>imageSubresource.layerCount</code> is not
<code>VK_REMAINING_ARRAY_LAYERS</code> and <a href="features.html#features-maintenance5" class="xref page">    <code>maintenance5</code></a> is not enabled,
<strong>must</strong> be less than or equal to the <code>arrayLayers</code> specified in
<a href="resources.html#VkImageCreateInfo" class="xref page">VkImageCreateInfo</a> when <code>dstImage</code> was created</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyBufferToImage-dstImage-07969" href="#VUID-vkCmdCopyBufferToImage-dstImage-07969"></a> <span class="vuid">VUID-vkCmdCopyBufferToImage-dstImage-07969</span><br>

<code>dstImage</code> <strong>must</strong> not have been created with <code>flags</code>
containing <code>VK_IMAGE_CREATE_SUBSAMPLED_BIT_EXT</code></p>
</li>
</ul>
</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCmdCopyBufferToImage-imageSubresource-07970" href="#VUID-vkCmdCopyBufferToImage-imageSubresource-07970"></a> <span class="vuid">VUID-vkCmdCopyBufferToImage-imageSubresource-07970</span><br>

The image region specified by each element of <code>pRegions</code> <strong>must</strong> be
contained within the specified <code>imageSubresource</code> of
<code>dstImage</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyBufferToImage-imageSubresource-07971" href="#VUID-vkCmdCopyBufferToImage-imageSubresource-07971"></a> <span class="vuid">VUID-vkCmdCopyBufferToImage-imageSubresource-07971</span><br>

For each element of <code>pRegions</code>, <code>imageOffset.x</code> and
<span class="eq">(<code>imageExtent.width</code> +  <code>imageOffset.x</code>)</span> <strong>must</strong>
both be greater than or equal to <code>0</code> and less than or equal to the width
of the specified <code>imageSubresource</code> of <code>dstImage</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyBufferToImage-imageSubresource-07972" href="#VUID-vkCmdCopyBufferToImage-imageSubresource-07972"></a> <span class="vuid">VUID-vkCmdCopyBufferToImage-imageSubresource-07972</span><br>

For each element of <code>pRegions</code>, <code>imageOffset.y</code> and
<span class="eq">(<code>imageExtent.height</code> +  <code>imageOffset.y</code>)</span> <strong>must</strong>
both be greater than or equal to <code>0</code> and less than or equal to the
height of the specified <code>imageSubresource</code> of <code>dstImage</code></p>
</li>
</ul>
</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCmdCopyBufferToImage-dstImage-07973" href="#VUID-vkCmdCopyBufferToImage-dstImage-07973"></a> <span class="vuid">VUID-vkCmdCopyBufferToImage-dstImage-07973</span><br>

<code>dstImage</code> <strong>must</strong> have a sample count equal to
<code>VK_SAMPLE_COUNT_1_BIT</code></p>
</li>
</ul>
</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCmdCopyBufferToImage-commandBuffer-01828" href="#VUID-vkCmdCopyBufferToImage-commandBuffer-01828"></a> <span class="vuid">VUID-vkCmdCopyBufferToImage-commandBuffer-01828</span><br>

If <code>commandBuffer</code> is an unprotected command buffer and
<a href="devsandqueues.html#limits-protectedNoFault" class="xref page"><code>protectedNoFault</code></a> is not supported,
<code>srcBuffer</code> <strong>must</strong> not be a protected buffer</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyBufferToImage-commandBuffer-01829" href="#VUID-vkCmdCopyBufferToImage-commandBuffer-01829"></a> <span class="vuid">VUID-vkCmdCopyBufferToImage-commandBuffer-01829</span><br>

If <code>commandBuffer</code> is an unprotected command buffer and
<a href="devsandqueues.html#limits-protectedNoFault" class="xref page"><code>protectedNoFault</code></a> is not supported,
<code>dstImage</code> <strong>must</strong> not be a protected image</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyBufferToImage-commandBuffer-01830" href="#VUID-vkCmdCopyBufferToImage-commandBuffer-01830"></a> <span class="vuid">VUID-vkCmdCopyBufferToImage-commandBuffer-01830</span><br>

If <code>commandBuffer</code> is a protected command buffer and
<a href="devsandqueues.html#limits-protectedNoFault" class="xref page"><code>protectedNoFault</code></a> is not supported,
<code>dstImage</code> <strong>must</strong> not be an unprotected image</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyBufferToImage-commandBuffer-07737" href="#VUID-vkCmdCopyBufferToImage-commandBuffer-07737"></a> <span class="vuid">VUID-vkCmdCopyBufferToImage-commandBuffer-07737</span><br>

If the queue family used to create the <a href="cmdbuffers.html#VkCommandPool" class="xref page">VkCommandPool</a> which
<code>commandBuffer</code> was allocated from does not support
<code>VK_QUEUE_GRAPHICS_BIT</code> or <code>VK_QUEUE_COMPUTE_BIT</code>, the
<code>bufferOffset</code> member of any element of <code>pRegions</code> <strong>must</strong> be a
multiple of <code>4</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyBufferToImage-imageOffset-07738" href="#VUID-vkCmdCopyBufferToImage-imageOffset-07738"></a> <span class="vuid">VUID-vkCmdCopyBufferToImage-imageOffset-07738</span><br>

The <code>imageOffset</code> and <code>imageExtent</code> members of each element of
<code>pRegions</code> <strong>must</strong> respect the image transfer granularity requirements
of <code>commandBuffer</code>&#8217;s command pool&#8217;s queue family, as described in
<a href="devsandqueues.html#VkQueueFamilyProperties" class="xref page">VkQueueFamilyProperties</a></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyBufferToImage-commandBuffer-07739" href="#VUID-vkCmdCopyBufferToImage-commandBuffer-07739"></a> <span class="vuid">VUID-vkCmdCopyBufferToImage-commandBuffer-07739</span><br>

If the queue family used to create the <a href="cmdbuffers.html#VkCommandPool" class="xref page">VkCommandPool</a> which
<code>commandBuffer</code> was allocated from does not support
<code>VK_QUEUE_GRAPHICS_BIT</code>, for each element of <code>pRegions</code>, the
<code>aspectMask</code> member of <code>imageSubresource</code> <strong>must</strong> not be
<code>VK_IMAGE_ASPECT_DEPTH_BIT</code> or <code>VK_IMAGE_ASPECT_STENCIL_BIT</code></p>
</li>
</ul>
</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCmdCopyBufferToImage-pRegions-00171" href="#VUID-vkCmdCopyBufferToImage-pRegions-00171"></a> <span class="vuid">VUID-vkCmdCopyBufferToImage-pRegions-00171</span><br>

<code>srcBuffer</code> <strong>must</strong> be large enough to contain all buffer locations
that are accessed according to <a href="#copies-buffers-images-addressing">Buffer    and Image Addressing</a>, for each element of <code>pRegions</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyBufferToImage-pRegions-00173" href="#VUID-vkCmdCopyBufferToImage-pRegions-00173"></a> <span class="vuid">VUID-vkCmdCopyBufferToImage-pRegions-00173</span><br>

The union of all source regions, and the union of all destination
regions, specified by the elements of <code>pRegions</code>, <strong>must</strong> not overlap
in memory</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyBufferToImage-srcBuffer-00174" href="#VUID-vkCmdCopyBufferToImage-srcBuffer-00174"></a> <span class="vuid">VUID-vkCmdCopyBufferToImage-srcBuffer-00174</span><br>

<code>srcBuffer</code> <strong>must</strong> have been created with
<code>VK_BUFFER_USAGE_TRANSFER_SRC_BIT</code> usage flag</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyBufferToImage-dstImage-01997" href="#VUID-vkCmdCopyBufferToImage-dstImage-01997"></a> <span class="vuid">VUID-vkCmdCopyBufferToImage-dstImage-01997</span><br>

The <a href="resources.html#resources-image-format-features" class="xref page">format features</a> of
<code>dstImage</code> <strong>must</strong> contain <code>VK_FORMAT_FEATURE_TRANSFER_DST_BIT</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyBufferToImage-srcBuffer-00176" href="#VUID-vkCmdCopyBufferToImage-srcBuffer-00176"></a> <span class="vuid">VUID-vkCmdCopyBufferToImage-srcBuffer-00176</span><br>

If <code>srcBuffer</code> is non-sparse then it <strong>must</strong> be bound completely and
contiguously to a single <code>VkDeviceMemory</code> object</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyBufferToImage-dstImage-00177" href="#VUID-vkCmdCopyBufferToImage-dstImage-00177"></a> <span class="vuid">VUID-vkCmdCopyBufferToImage-dstImage-00177</span><br>

<code>dstImage</code> <strong>must</strong> have been created with
<code>VK_IMAGE_USAGE_TRANSFER_DST_BIT</code> usage flag</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyBufferToImage-dstImageLayout-00180" href="#VUID-vkCmdCopyBufferToImage-dstImageLayout-00180"></a> <span class="vuid">VUID-vkCmdCopyBufferToImage-dstImageLayout-00180</span><br>

<code>dstImageLayout</code> <strong>must</strong> specify the layout of the image subresources
of <code>dstImage</code> specified in <code>pRegions</code> at the time this command
is executed on a <code>VkDevice</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyBufferToImage-dstImageLayout-01396" href="#VUID-vkCmdCopyBufferToImage-dstImageLayout-01396"></a> <span class="vuid">VUID-vkCmdCopyBufferToImage-dstImageLayout-01396</span><br>

<code>dstImageLayout</code> <strong>must</strong> be
<code>VK_IMAGE_LAYOUT_TRANSFER_DST_OPTIMAL</code>,
<code>VK_IMAGE_LAYOUT_GENERAL</code>, or
<code>VK_IMAGE_LAYOUT_SHARED_PRESENT_KHR</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyBufferToImage-pRegions-07931" href="#VUID-vkCmdCopyBufferToImage-pRegions-07931"></a> <span class="vuid">VUID-vkCmdCopyBufferToImage-pRegions-07931</span><br>

If <a href="../appendices/extensions.html#VK_EXT_depth_range_unrestricted" class="xref page">VK_EXT_depth_range_unrestricted</a> is not enabled, for each
element of <code>pRegions</code> whose <code>imageSubresource</code> contains a depth
aspect, the data in <code>srcBuffer</code> <strong>must</strong> be in the range <span class="eq">[0,1]</span></p>
</li>
</ul>
</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCmdCopyBufferToImage-dstImage-07979" href="#VUID-vkCmdCopyBufferToImage-dstImage-07979"></a> <span class="vuid">VUID-vkCmdCopyBufferToImage-dstImage-07979</span><br>

If <code>dstImage</code> is of type <code>VK_IMAGE_TYPE_1D</code>, then for each
element of <code>pRegions</code>, <code>imageOffset.y</code> <strong>must</strong> be <code>0</code> and
<code>imageExtent.height</code> <strong>must</strong> be <code>1</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyBufferToImage-imageOffset-09104" href="#VUID-vkCmdCopyBufferToImage-imageOffset-09104"></a> <span class="vuid">VUID-vkCmdCopyBufferToImage-imageOffset-09104</span><br>

For each element of <code>pRegions</code>, <code>imageOffset.z</code> and
<span class="eq">(<code>imageExtent.depth</code> +  <code>imageOffset.z</code>)</span> <strong>must</strong>
both be greater than or equal to <code>0</code> and less than or equal to the depth
of the specified <code>imageSubresource</code> of <code>dstImage</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyBufferToImage-dstImage-07980" href="#VUID-vkCmdCopyBufferToImage-dstImage-07980"></a> <span class="vuid">VUID-vkCmdCopyBufferToImage-dstImage-07980</span><br>

If <code>dstImage</code> is of type <code>VK_IMAGE_TYPE_1D</code> or
<code>VK_IMAGE_TYPE_2D</code>, then for each element of <code>pRegions</code>,
<code>imageOffset.z</code> <strong>must</strong> be <code>0</code> and <code>imageExtent.depth</code> <strong>must</strong>
be <code>1</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyBufferToImage-dstImage-07274" href="#VUID-vkCmdCopyBufferToImage-dstImage-07274"></a> <span class="vuid">VUID-vkCmdCopyBufferToImage-dstImage-07274</span><br>

For each element of <code>pRegions</code>, <code>imageOffset.x</code> <strong>must</strong> be a
multiple of the <a href="formats.html#formats-compatibility-classes" class="xref page">texel block extent    width</a> of the <a href="formats.html#VkFormat" class="xref page">VkFormat</a> of <code>dstImage</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyBufferToImage-dstImage-07275" href="#VUID-vkCmdCopyBufferToImage-dstImage-07275"></a> <span class="vuid">VUID-vkCmdCopyBufferToImage-dstImage-07275</span><br>

For each element of <code>pRegions</code>, <code>imageOffset.y</code> <strong>must</strong> be a
multiple of the <a href="formats.html#formats-compatibility-classes" class="xref page">texel block extent    height</a> of the <a href="formats.html#VkFormat" class="xref page">VkFormat</a> of <code>dstImage</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyBufferToImage-dstImage-07276" href="#VUID-vkCmdCopyBufferToImage-dstImage-07276"></a> <span class="vuid">VUID-vkCmdCopyBufferToImage-dstImage-07276</span><br>

For each element of <code>pRegions</code>, <code>imageOffset.z</code> <strong>must</strong> be a
multiple of the <a href="formats.html#formats-compatibility-classes" class="xref page">texel block extent    depth</a> of the <a href="formats.html#VkFormat" class="xref page">VkFormat</a> of <code>dstImage</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyBufferToImage-dstImage-00207" href="#VUID-vkCmdCopyBufferToImage-dstImage-00207"></a> <span class="vuid">VUID-vkCmdCopyBufferToImage-dstImage-00207</span><br>

For each element of <code>pRegions</code>, if the sum of <code>imageOffset.x</code>
and <code>extent.width</code> does not equal the width of the subresource
specified by <code>srcSubresource</code>, <code>extent.width</code> <strong>must</strong> be a
multiple of the <a href="formats.html#formats-compatibility-classes" class="xref page">texel block extent    width</a> of the <a href="formats.html#VkFormat" class="xref page">VkFormat</a> of <code>dstImage</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyBufferToImage-dstImage-00208" href="#VUID-vkCmdCopyBufferToImage-dstImage-00208"></a> <span class="vuid">VUID-vkCmdCopyBufferToImage-dstImage-00208</span><br>

For each element of <code>pRegions</code>, if the sum of <code>imageOffset.y</code>
and <code>extent.height</code> does not equal the height of the subresource
specified by <code>srcSubresource</code>, <code>extent.height</code> <strong>must</strong> be a
multiple of the <a href="formats.html#formats-compatibility-classes" class="xref page">texel block extent    height</a> of the <a href="formats.html#VkFormat" class="xref page">VkFormat</a> of <code>dstImage</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyBufferToImage-dstImage-00209" href="#VUID-vkCmdCopyBufferToImage-dstImage-00209"></a> <span class="vuid">VUID-vkCmdCopyBufferToImage-dstImage-00209</span><br>

For each element of <code>pRegions</code>, if the sum of <code>imageOffset.z</code>
and <code>extent.depth</code> does not equal the depth of the subresource
specified by <code>srcSubresource</code>, <code>extent.depth</code> <strong>must</strong> be a
multiple of the <a href="formats.html#formats-compatibility-classes" class="xref page">texel block extent    depth</a> of the <a href="formats.html#VkFormat" class="xref page">VkFormat</a> of <code>dstImage</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyBufferToImage-imageSubresource-09105" href="#VUID-vkCmdCopyBufferToImage-imageSubresource-09105"></a> <span class="vuid">VUID-vkCmdCopyBufferToImage-imageSubresource-09105</span><br>

For each element of <code>pRegions</code>, <code>imageSubresource.aspectMask</code>
<strong>must</strong> specify aspects present in <code>dstImage</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyBufferToImage-dstImage-07981" href="#VUID-vkCmdCopyBufferToImage-dstImage-07981"></a> <span class="vuid">VUID-vkCmdCopyBufferToImage-dstImage-07981</span><br>

If <code>dstImage</code> has a
<a href="formats.html#formats-requiring-sampler-ycbcr-conversion" class="xref page">multi-planar image    format</a>, then for each element of <code>pRegions</code>,
<code>imageSubresource.aspectMask</code> <strong>must</strong> be a single valid
<a href="formats.html#formats-planes-image-aspect" class="xref page">multi-planar aspect mask</a> bit</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyBufferToImage-dstImage-07983" href="#VUID-vkCmdCopyBufferToImage-dstImage-07983"></a> <span class="vuid">VUID-vkCmdCopyBufferToImage-dstImage-07983</span><br>

If <code>dstImage</code> is of type <code>VK_IMAGE_TYPE_3D</code>, for each
element of <code>pRegions</code>, <code>imageSubresource.baseArrayLayer</code> <strong>must</strong>
be <code>0</code> and <code>imageSubresource.layerCount</code> <strong>must</strong> be <code>1</code></p>
</li>
</ul>
</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCmdCopyBufferToImage-bufferRowLength-09106" href="#VUID-vkCmdCopyBufferToImage-bufferRowLength-09106"></a> <span class="vuid">VUID-vkCmdCopyBufferToImage-bufferRowLength-09106</span><br>

For each element of <code>pRegions</code>, <code>bufferRowLength</code> <strong>must</strong> be a
multiple of the <a href="formats.html#formats-compatibility-classes" class="xref page">texel block extent    width</a> of the <a href="formats.html#VkFormat" class="xref page">VkFormat</a> of <code>dstImage</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyBufferToImage-bufferImageHeight-09107" href="#VUID-vkCmdCopyBufferToImage-bufferImageHeight-09107"></a> <span class="vuid">VUID-vkCmdCopyBufferToImage-bufferImageHeight-09107</span><br>

For each element of <code>pRegions</code>, <code>bufferImageHeight</code> <strong>must</strong> be a
multiple of the <a href="formats.html#formats-compatibility-classes" class="xref page">texel block extent    height</a> of the <a href="formats.html#VkFormat" class="xref page">VkFormat</a> of <code>dstImage</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyBufferToImage-bufferRowLength-09108" href="#VUID-vkCmdCopyBufferToImage-bufferRowLength-09108"></a> <span class="vuid">VUID-vkCmdCopyBufferToImage-bufferRowLength-09108</span><br>

For each element of <code>pRegions</code>, <code>bufferRowLength</code> divided by
the <a href="formats.html#formats-compatibility-classes" class="xref page">texel block extent width</a> and then
multiplied by the texel block size of <code>dstImage</code> <strong>must</strong> be less
than or equal to <span class="eq">2<sup>31</sup>-1</span></p>
</li>
</ul>
</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCmdCopyBufferToImage-dstImage-07975" href="#VUID-vkCmdCopyBufferToImage-dstImage-07975"></a> <span class="vuid">VUID-vkCmdCopyBufferToImage-dstImage-07975</span><br>

If <code>dstImage</code> does not have either a depth/stencil or a
<a href="formats.html#formats-requiring-sampler-ycbcr-conversion" class="xref page">multi-planar format</a>, then
for each element of <code>pRegions</code>, <code>bufferOffset</code> <strong>must</strong> be a
multiple of the <a href="formats.html#formats-compatibility-classes" class="xref page">texel block size</a></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyBufferToImage-dstImage-07976" href="#VUID-vkCmdCopyBufferToImage-dstImage-07976"></a> <span class="vuid">VUID-vkCmdCopyBufferToImage-dstImage-07976</span><br>

If <code>dstImage</code> has a
<a href="formats.html#formats-requiring-sampler-ycbcr-conversion" class="xref page">multi-planar format</a>, then
for each element of <code>pRegions</code>, <code>bufferOffset</code> <strong>must</strong> be a
multiple of the element size of the compatible format for the format and
the <code>aspectMask</code> of the <code>imageSubresource</code> as defined in
<a href="formats.html#formats-compatible-planes" class="xref page">Compatible formats of planes of multi-planar formats</a></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyBufferToImage-dstImage-07978" href="#VUID-vkCmdCopyBufferToImage-dstImage-07978"></a> <span class="vuid">VUID-vkCmdCopyBufferToImage-dstImage-07978</span><br>

If <code>dstImage</code> has a depth/stencil format, the <code>bufferOffset</code>
member of any element of <code>pRegions</code> <strong>must</strong> be a multiple of <code>4</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCmdCopyBufferToImage-commandBuffer-parameter" href="#VUID-vkCmdCopyBufferToImage-commandBuffer-parameter"></a> <span class="vuid">VUID-vkCmdCopyBufferToImage-commandBuffer-parameter</span><br>
 <code>commandBuffer</code> <strong>must</strong> be a valid <a href="cmdbuffers.html#VkCommandBuffer" class="xref page">VkCommandBuffer</a> handle</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyBufferToImage-srcBuffer-parameter" href="#VUID-vkCmdCopyBufferToImage-srcBuffer-parameter"></a> <span class="vuid">VUID-vkCmdCopyBufferToImage-srcBuffer-parameter</span><br>
 <code>srcBuffer</code> <strong>must</strong> be a valid <a href="resources.html#VkBuffer" class="xref page">VkBuffer</a> handle</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyBufferToImage-dstImage-parameter" href="#VUID-vkCmdCopyBufferToImage-dstImage-parameter"></a> <span class="vuid">VUID-vkCmdCopyBufferToImage-dstImage-parameter</span><br>
 <code>dstImage</code> <strong>must</strong> be a valid <a href="resources.html#VkImage" class="xref page">VkImage</a> handle</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyBufferToImage-dstImageLayout-parameter" href="#VUID-vkCmdCopyBufferToImage-dstImageLayout-parameter"></a> <span class="vuid">VUID-vkCmdCopyBufferToImage-dstImageLayout-parameter</span><br>
 <code>dstImageLayout</code> <strong>must</strong> be a valid <a href="resources.html#VkImageLayout" class="xref page">VkImageLayout</a> value</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyBufferToImage-pRegions-parameter" href="#VUID-vkCmdCopyBufferToImage-pRegions-parameter"></a> <span class="vuid">VUID-vkCmdCopyBufferToImage-pRegions-parameter</span><br>
 <code>pRegions</code> <strong>must</strong> be a valid pointer to an array of <code>regionCount</code> valid <a href="#VkBufferImageCopy">VkBufferImageCopy</a> structures</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyBufferToImage-commandBuffer-recording" href="#VUID-vkCmdCopyBufferToImage-commandBuffer-recording"></a> <span class="vuid">VUID-vkCmdCopyBufferToImage-commandBuffer-recording</span><br>
 <code>commandBuffer</code> <strong>must</strong> be in the <a href="cmdbuffers.html#commandbuffers-lifecycle" class="xref page">recording state</a></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyBufferToImage-commandBuffer-cmdpool" href="#VUID-vkCmdCopyBufferToImage-commandBuffer-cmdpool"></a> <span class="vuid">VUID-vkCmdCopyBufferToImage-commandBuffer-cmdpool</span><br>
 The <code>VkCommandPool</code> that <code>commandBuffer</code> was allocated from <strong>must</strong> support transfer, graphics, or compute operations</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyBufferToImage-renderpass" href="#VUID-vkCmdCopyBufferToImage-renderpass"></a> <span class="vuid">VUID-vkCmdCopyBufferToImage-renderpass</span><br>
 This command <strong>must</strong> only be called outside of a render pass instance</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyBufferToImage-videocoding" href="#VUID-vkCmdCopyBufferToImage-videocoding"></a> <span class="vuid">VUID-vkCmdCopyBufferToImage-videocoding</span><br>
 This command <strong>must</strong> only be called outside of a video coding scope</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyBufferToImage-regionCount-arraylength" href="#VUID-vkCmdCopyBufferToImage-regionCount-arraylength"></a> <span class="vuid">VUID-vkCmdCopyBufferToImage-regionCount-arraylength</span><br>
 <code>regionCount</code> <strong>must</strong> be greater than <code>0</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyBufferToImage-commonparent" href="#VUID-vkCmdCopyBufferToImage-commonparent"></a> <span class="vuid">VUID-vkCmdCopyBufferToImage-commonparent</span><br>
 Each of <code>commandBuffer</code>, <code>dstImage</code>, and <code>srcBuffer</code> <strong>must</strong> have been created, allocated, or retrieved from the same <a href="devsandqueues.html#VkDevice" class="xref page">VkDevice</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Host Synchronization</div>
<div class="ulist">
<ul>
<li>
<p>Host access to <code>commandBuffer</code> <strong>must</strong> be externally synchronized</p>
</li>
<li>
<p>Host access to the <code>VkCommandPool</code> that <code>commandBuffer</code> was allocated from <strong>must</strong> be externally synchronized</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Command Properties</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><a href="cmdbuffers.html#VkCommandBufferLevel" class="xref page">Command Buffer Levels</a></th>
<th class="tableblock halign-left valign-top"><a href="renderpass.html#vkCmdBeginRenderPass" class="xref page">Render Pass Scope</a></th>
<th class="tableblock halign-left valign-top"><a href="video_extensions.html#vkCmdBeginVideoCodingKHR" class="xref page">Video Coding Scope</a></th>
<th class="tableblock halign-left valign-top"><a href="devsandqueues.html#VkQueueFlagBits" class="xref page">Supported Queue Types</a></th>
<th class="tableblock halign-left valign-top"><a href="fundamentals.html#fundamentals-queueoperation-command-types" class="xref page">Command Type</a></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Primary<br>
Secondary</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Outside</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Outside</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Transfer<br>
Graphics<br>
Compute</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Action</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>To copy data from an image object to a buffer object, call:</p>
</div>
<div id="vkCmdCopyImageToBuffer" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_VERSION_1_0
void vkCmdCopyImageToBuffer(
    VkCommandBuffer                             commandBuffer,
    VkImage                                     srcImage,
    VkImageLayout                               srcImageLayout,
    VkBuffer                                    dstBuffer,
    uint32_t                                    regionCount,
    const VkBufferImageCopy*                    pRegions);</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>commandBuffer</code> is the command buffer into which the command will be
recorded.</p>
</li>
<li>
<p><code>srcImage</code> is the source image.</p>
</li>
<li>
<p><code>srcImageLayout</code> is the layout of the source image subresources for
the copy.</p>
</li>
<li>
<p><code>dstBuffer</code> is the destination buffer.</p>
</li>
<li>
<p><code>regionCount</code> is the number of regions to copy.</p>
</li>
<li>
<p><code>pRegions</code> is a pointer to an array of <a href="#VkBufferImageCopy">VkBufferImageCopy</a>
structures specifying the regions to copy.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Each source region specified by <code>pRegions</code> is copied from the source
image to the destination region of the destination buffer according to the
<a href="#copies-buffers-images-addressing">addressing calculations</a> for each
resource.
If any of the specified regions in <code>srcImage</code> overlaps in memory with
any of the specified regions in <code>dstBuffer</code>, values read from those
overlapping regions are <strong>undefined</strong>.</p>
</div>
<div class="paragraph">
<p>Copy regions for the image <strong>must</strong> be aligned to a multiple of the texel block
extent in each dimension, except at the edges of the image, where region
extents <strong>must</strong> match the edge of the image.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCmdCopyImageToBuffer-srcImage-07966" href="#VUID-vkCmdCopyImageToBuffer-srcImage-07966"></a> <span class="vuid">VUID-vkCmdCopyImageToBuffer-srcImage-07966</span><br>

If <code>srcImage</code> is non-sparse then the image or the specified
<em>disjoint</em> plane <strong>must</strong> be bound completely and contiguously to a single
<code>VkDeviceMemory</code> object</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImageToBuffer-imageSubresource-07967" href="#VUID-vkCmdCopyImageToBuffer-imageSubresource-07967"></a> <span class="vuid">VUID-vkCmdCopyImageToBuffer-imageSubresource-07967</span><br>

The <code>imageSubresource.mipLevel</code> member of each element of
<code>pRegions</code> <strong>must</strong> be less than the <code>mipLevels</code> specified in
<a href="resources.html#VkImageCreateInfo" class="xref page">VkImageCreateInfo</a> when <code>srcImage</code> was created</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImageToBuffer-imageSubresource-07968" href="#VUID-vkCmdCopyImageToBuffer-imageSubresource-07968"></a> <span class="vuid">VUID-vkCmdCopyImageToBuffer-imageSubresource-07968</span><br>

The <span class="eq"><code>imageSubresource.baseArrayLayer</code> + 
<code>imageSubresource.layerCount</code></span> of each element of <code>pRegions</code>
, if <code>imageSubresource.layerCount</code> is not
<code>VK_REMAINING_ARRAY_LAYERS</code> and <a href="features.html#features-maintenance5" class="xref page">    <code>maintenance5</code></a> is not enabled,
<strong>must</strong> be less than or equal to the <code>arrayLayers</code> specified in
<a href="resources.html#VkImageCreateInfo" class="xref page">VkImageCreateInfo</a> when <code>srcImage</code> was created</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImageToBuffer-srcImage-07969" href="#VUID-vkCmdCopyImageToBuffer-srcImage-07969"></a> <span class="vuid">VUID-vkCmdCopyImageToBuffer-srcImage-07969</span><br>

<code>srcImage</code> <strong>must</strong> not have been created with <code>flags</code>
containing <code>VK_IMAGE_CREATE_SUBSAMPLED_BIT_EXT</code></p>
</li>
</ul>
</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCmdCopyImageToBuffer-imageSubresource-07970" href="#VUID-vkCmdCopyImageToBuffer-imageSubresource-07970"></a> <span class="vuid">VUID-vkCmdCopyImageToBuffer-imageSubresource-07970</span><br>

The image region specified by each element of <code>pRegions</code> <strong>must</strong> be
contained within the specified <code>imageSubresource</code> of
<code>srcImage</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImageToBuffer-imageSubresource-07971" href="#VUID-vkCmdCopyImageToBuffer-imageSubresource-07971"></a> <span class="vuid">VUID-vkCmdCopyImageToBuffer-imageSubresource-07971</span><br>

For each element of <code>pRegions</code>, <code>imageOffset.x</code> and
<span class="eq">(<code>imageExtent.width</code> +  <code>imageOffset.x</code>)</span> <strong>must</strong>
both be greater than or equal to <code>0</code> and less than or equal to the width
of the specified <code>imageSubresource</code> of <code>srcImage</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImageToBuffer-imageSubresource-07972" href="#VUID-vkCmdCopyImageToBuffer-imageSubresource-07972"></a> <span class="vuid">VUID-vkCmdCopyImageToBuffer-imageSubresource-07972</span><br>

For each element of <code>pRegions</code>, <code>imageOffset.y</code> and
<span class="eq">(<code>imageExtent.height</code> +  <code>imageOffset.y</code>)</span> <strong>must</strong>
both be greater than or equal to <code>0</code> and less than or equal to the
height of the specified <code>imageSubresource</code> of <code>srcImage</code></p>
</li>
</ul>
</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCmdCopyImageToBuffer-srcImage-07973" href="#VUID-vkCmdCopyImageToBuffer-srcImage-07973"></a> <span class="vuid">VUID-vkCmdCopyImageToBuffer-srcImage-07973</span><br>

<code>srcImage</code> <strong>must</strong> have a sample count equal to
<code>VK_SAMPLE_COUNT_1_BIT</code></p>
</li>
</ul>
</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCmdCopyImageToBuffer-commandBuffer-01831" href="#VUID-vkCmdCopyImageToBuffer-commandBuffer-01831"></a> <span class="vuid">VUID-vkCmdCopyImageToBuffer-commandBuffer-01831</span><br>

If <code>commandBuffer</code> is an unprotected command buffer and
<a href="devsandqueues.html#limits-protectedNoFault" class="xref page"><code>protectedNoFault</code></a> is not supported,
<code>srcImage</code> <strong>must</strong> not be a protected image</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImageToBuffer-commandBuffer-01832" href="#VUID-vkCmdCopyImageToBuffer-commandBuffer-01832"></a> <span class="vuid">VUID-vkCmdCopyImageToBuffer-commandBuffer-01832</span><br>

If <code>commandBuffer</code> is an unprotected command buffer and
<a href="devsandqueues.html#limits-protectedNoFault" class="xref page"><code>protectedNoFault</code></a> is not supported,
<code>dstBuffer</code> <strong>must</strong> not be a protected buffer</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImageToBuffer-commandBuffer-01833" href="#VUID-vkCmdCopyImageToBuffer-commandBuffer-01833"></a> <span class="vuid">VUID-vkCmdCopyImageToBuffer-commandBuffer-01833</span><br>

If <code>commandBuffer</code> is a protected command buffer and
<a href="devsandqueues.html#limits-protectedNoFault" class="xref page"><code>protectedNoFault</code></a> is not supported,
<code>dstBuffer</code> <strong>must</strong> not be an unprotected buffer</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImageToBuffer-commandBuffer-07746" href="#VUID-vkCmdCopyImageToBuffer-commandBuffer-07746"></a> <span class="vuid">VUID-vkCmdCopyImageToBuffer-commandBuffer-07746</span><br>

If the queue family used to create the <a href="cmdbuffers.html#VkCommandPool" class="xref page">VkCommandPool</a> which
<code>commandBuffer</code> was allocated from does not support
<code>VK_QUEUE_GRAPHICS_BIT</code> or <code>VK_QUEUE_COMPUTE_BIT</code>, the
<code>bufferOffset</code> member of any element of <code>pRegions</code> <strong>must</strong> be a
multiple of <code>4</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImageToBuffer-imageOffset-07747" href="#VUID-vkCmdCopyImageToBuffer-imageOffset-07747"></a> <span class="vuid">VUID-vkCmdCopyImageToBuffer-imageOffset-07747</span><br>

The <code>imageOffset</code> and <code>imageExtent</code> members of each element of
<code>pRegions</code> <strong>must</strong> respect the image transfer granularity requirements
of <code>commandBuffer</code>&#8217;s command pool&#8217;s queue family, as described in
<a href="devsandqueues.html#VkQueueFamilyProperties" class="xref page">VkQueueFamilyProperties</a></p>
</li>
</ul>
</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCmdCopyImageToBuffer-pRegions-00183" href="#VUID-vkCmdCopyImageToBuffer-pRegions-00183"></a> <span class="vuid">VUID-vkCmdCopyImageToBuffer-pRegions-00183</span><br>

<code>dstBuffer</code> <strong>must</strong> be large enough to contain all buffer locations
that are accessed according to <a href="#copies-buffers-images-addressing">Buffer    and Image Addressing</a>, for each element of <code>pRegions</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImageToBuffer-pRegions-00184" href="#VUID-vkCmdCopyImageToBuffer-pRegions-00184"></a> <span class="vuid">VUID-vkCmdCopyImageToBuffer-pRegions-00184</span><br>

The union of all source regions, and the union of all destination
regions, specified by the elements of <code>pRegions</code>, <strong>must</strong> not overlap
in memory</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImageToBuffer-srcImage-00186" href="#VUID-vkCmdCopyImageToBuffer-srcImage-00186"></a> <span class="vuid">VUID-vkCmdCopyImageToBuffer-srcImage-00186</span><br>

<code>srcImage</code> <strong>must</strong> have been created with
<code>VK_IMAGE_USAGE_TRANSFER_SRC_BIT</code> usage flag</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImageToBuffer-srcImage-01998" href="#VUID-vkCmdCopyImageToBuffer-srcImage-01998"></a> <span class="vuid">VUID-vkCmdCopyImageToBuffer-srcImage-01998</span><br>

The <a href="resources.html#resources-image-format-features" class="xref page">format features</a> of
<code>srcImage</code> <strong>must</strong> contain <code>VK_FORMAT_FEATURE_TRANSFER_SRC_BIT</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImageToBuffer-dstBuffer-00191" href="#VUID-vkCmdCopyImageToBuffer-dstBuffer-00191"></a> <span class="vuid">VUID-vkCmdCopyImageToBuffer-dstBuffer-00191</span><br>

<code>dstBuffer</code> <strong>must</strong> have been created with
<code>VK_BUFFER_USAGE_TRANSFER_DST_BIT</code> usage flag</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImageToBuffer-dstBuffer-00192" href="#VUID-vkCmdCopyImageToBuffer-dstBuffer-00192"></a> <span class="vuid">VUID-vkCmdCopyImageToBuffer-dstBuffer-00192</span><br>

If <code>dstBuffer</code> is non-sparse then it <strong>must</strong> be bound completely and
contiguously to a single <code>VkDeviceMemory</code> object</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImageToBuffer-srcImageLayout-00189" href="#VUID-vkCmdCopyImageToBuffer-srcImageLayout-00189"></a> <span class="vuid">VUID-vkCmdCopyImageToBuffer-srcImageLayout-00189</span><br>

<code>srcImageLayout</code> <strong>must</strong> specify the layout of the image subresources
of <code>srcImage</code> specified in <code>pRegions</code> at the time this command
is executed on a <code>VkDevice</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImageToBuffer-srcImageLayout-01397" href="#VUID-vkCmdCopyImageToBuffer-srcImageLayout-01397"></a> <span class="vuid">VUID-vkCmdCopyImageToBuffer-srcImageLayout-01397</span><br>

<code>srcImageLayout</code> <strong>must</strong> be
<code>VK_IMAGE_LAYOUT_TRANSFER_SRC_OPTIMAL</code>,
<code>VK_IMAGE_LAYOUT_GENERAL</code>, or
<code>VK_IMAGE_LAYOUT_SHARED_PRESENT_KHR</code></p>
</li>
</ul>
</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCmdCopyImageToBuffer-srcImage-07979" href="#VUID-vkCmdCopyImageToBuffer-srcImage-07979"></a> <span class="vuid">VUID-vkCmdCopyImageToBuffer-srcImage-07979</span><br>

If <code>srcImage</code> is of type <code>VK_IMAGE_TYPE_1D</code>, then for each
element of <code>pRegions</code>, <code>imageOffset.y</code> <strong>must</strong> be <code>0</code> and
<code>imageExtent.height</code> <strong>must</strong> be <code>1</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImageToBuffer-imageOffset-09104" href="#VUID-vkCmdCopyImageToBuffer-imageOffset-09104"></a> <span class="vuid">VUID-vkCmdCopyImageToBuffer-imageOffset-09104</span><br>

For each element of <code>pRegions</code>, <code>imageOffset.z</code> and
<span class="eq">(<code>imageExtent.depth</code> +  <code>imageOffset.z</code>)</span> <strong>must</strong>
both be greater than or equal to <code>0</code> and less than or equal to the depth
of the specified <code>imageSubresource</code> of <code>srcImage</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImageToBuffer-srcImage-07980" href="#VUID-vkCmdCopyImageToBuffer-srcImage-07980"></a> <span class="vuid">VUID-vkCmdCopyImageToBuffer-srcImage-07980</span><br>

If <code>srcImage</code> is of type <code>VK_IMAGE_TYPE_1D</code> or
<code>VK_IMAGE_TYPE_2D</code>, then for each element of <code>pRegions</code>,
<code>imageOffset.z</code> <strong>must</strong> be <code>0</code> and <code>imageExtent.depth</code> <strong>must</strong>
be <code>1</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImageToBuffer-srcImage-07274" href="#VUID-vkCmdCopyImageToBuffer-srcImage-07274"></a> <span class="vuid">VUID-vkCmdCopyImageToBuffer-srcImage-07274</span><br>

For each element of <code>pRegions</code>, <code>imageOffset.x</code> <strong>must</strong> be a
multiple of the <a href="formats.html#formats-compatibility-classes" class="xref page">texel block extent    width</a> of the <a href="formats.html#VkFormat" class="xref page">VkFormat</a> of <code>srcImage</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImageToBuffer-srcImage-07275" href="#VUID-vkCmdCopyImageToBuffer-srcImage-07275"></a> <span class="vuid">VUID-vkCmdCopyImageToBuffer-srcImage-07275</span><br>

For each element of <code>pRegions</code>, <code>imageOffset.y</code> <strong>must</strong> be a
multiple of the <a href="formats.html#formats-compatibility-classes" class="xref page">texel block extent    height</a> of the <a href="formats.html#VkFormat" class="xref page">VkFormat</a> of <code>srcImage</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImageToBuffer-srcImage-07276" href="#VUID-vkCmdCopyImageToBuffer-srcImage-07276"></a> <span class="vuid">VUID-vkCmdCopyImageToBuffer-srcImage-07276</span><br>

For each element of <code>pRegions</code>, <code>imageOffset.z</code> <strong>must</strong> be a
multiple of the <a href="formats.html#formats-compatibility-classes" class="xref page">texel block extent    depth</a> of the <a href="formats.html#VkFormat" class="xref page">VkFormat</a> of <code>srcImage</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImageToBuffer-srcImage-00207" href="#VUID-vkCmdCopyImageToBuffer-srcImage-00207"></a> <span class="vuid">VUID-vkCmdCopyImageToBuffer-srcImage-00207</span><br>

For each element of <code>pRegions</code>, if the sum of <code>imageOffset.x</code>
and <code>extent.width</code> does not equal the width of the subresource
specified by <code>srcSubresource</code>, <code>extent.width</code> <strong>must</strong> be a
multiple of the <a href="formats.html#formats-compatibility-classes" class="xref page">texel block extent    width</a> of the <a href="formats.html#VkFormat" class="xref page">VkFormat</a> of <code>srcImage</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImageToBuffer-srcImage-00208" href="#VUID-vkCmdCopyImageToBuffer-srcImage-00208"></a> <span class="vuid">VUID-vkCmdCopyImageToBuffer-srcImage-00208</span><br>

For each element of <code>pRegions</code>, if the sum of <code>imageOffset.y</code>
and <code>extent.height</code> does not equal the height of the subresource
specified by <code>srcSubresource</code>, <code>extent.height</code> <strong>must</strong> be a
multiple of the <a href="formats.html#formats-compatibility-classes" class="xref page">texel block extent    height</a> of the <a href="formats.html#VkFormat" class="xref page">VkFormat</a> of <code>srcImage</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImageToBuffer-srcImage-00209" href="#VUID-vkCmdCopyImageToBuffer-srcImage-00209"></a> <span class="vuid">VUID-vkCmdCopyImageToBuffer-srcImage-00209</span><br>

For each element of <code>pRegions</code>, if the sum of <code>imageOffset.z</code>
and <code>extent.depth</code> does not equal the depth of the subresource
specified by <code>srcSubresource</code>, <code>extent.depth</code> <strong>must</strong> be a
multiple of the <a href="formats.html#formats-compatibility-classes" class="xref page">texel block extent    depth</a> of the <a href="formats.html#VkFormat" class="xref page">VkFormat</a> of <code>srcImage</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImageToBuffer-imageSubresource-09105" href="#VUID-vkCmdCopyImageToBuffer-imageSubresource-09105"></a> <span class="vuid">VUID-vkCmdCopyImageToBuffer-imageSubresource-09105</span><br>

For each element of <code>pRegions</code>, <code>imageSubresource.aspectMask</code>
<strong>must</strong> specify aspects present in <code>srcImage</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImageToBuffer-srcImage-07981" href="#VUID-vkCmdCopyImageToBuffer-srcImage-07981"></a> <span class="vuid">VUID-vkCmdCopyImageToBuffer-srcImage-07981</span><br>

If <code>srcImage</code> has a
<a href="formats.html#formats-requiring-sampler-ycbcr-conversion" class="xref page">multi-planar image    format</a>, then for each element of <code>pRegions</code>,
<code>imageSubresource.aspectMask</code> <strong>must</strong> be a single valid
<a href="formats.html#formats-planes-image-aspect" class="xref page">multi-planar aspect mask</a> bit</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImageToBuffer-srcImage-07983" href="#VUID-vkCmdCopyImageToBuffer-srcImage-07983"></a> <span class="vuid">VUID-vkCmdCopyImageToBuffer-srcImage-07983</span><br>

If <code>srcImage</code> is of type <code>VK_IMAGE_TYPE_3D</code>, for each
element of <code>pRegions</code>, <code>imageSubresource.baseArrayLayer</code> <strong>must</strong>
be <code>0</code> and <code>imageSubresource.layerCount</code> <strong>must</strong> be <code>1</code></p>
</li>
</ul>
</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCmdCopyImageToBuffer-bufferRowLength-09106" href="#VUID-vkCmdCopyImageToBuffer-bufferRowLength-09106"></a> <span class="vuid">VUID-vkCmdCopyImageToBuffer-bufferRowLength-09106</span><br>

For each element of <code>pRegions</code>, <code>bufferRowLength</code> <strong>must</strong> be a
multiple of the <a href="formats.html#formats-compatibility-classes" class="xref page">texel block extent    width</a> of the <a href="formats.html#VkFormat" class="xref page">VkFormat</a> of <code>srcImage</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImageToBuffer-bufferImageHeight-09107" href="#VUID-vkCmdCopyImageToBuffer-bufferImageHeight-09107"></a> <span class="vuid">VUID-vkCmdCopyImageToBuffer-bufferImageHeight-09107</span><br>

For each element of <code>pRegions</code>, <code>bufferImageHeight</code> <strong>must</strong> be a
multiple of the <a href="formats.html#formats-compatibility-classes" class="xref page">texel block extent    height</a> of the <a href="formats.html#VkFormat" class="xref page">VkFormat</a> of <code>srcImage</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImageToBuffer-bufferRowLength-09108" href="#VUID-vkCmdCopyImageToBuffer-bufferRowLength-09108"></a> <span class="vuid">VUID-vkCmdCopyImageToBuffer-bufferRowLength-09108</span><br>

For each element of <code>pRegions</code>, <code>bufferRowLength</code> divided by
the <a href="formats.html#formats-compatibility-classes" class="xref page">texel block extent width</a> and then
multiplied by the texel block size of <code>srcImage</code> <strong>must</strong> be less
than or equal to <span class="eq">2<sup>31</sup>-1</span></p>
</li>
</ul>
</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCmdCopyImageToBuffer-srcImage-07975" href="#VUID-vkCmdCopyImageToBuffer-srcImage-07975"></a> <span class="vuid">VUID-vkCmdCopyImageToBuffer-srcImage-07975</span><br>

If <code>srcImage</code> does not have either a depth/stencil or a
<a href="formats.html#formats-requiring-sampler-ycbcr-conversion" class="xref page">multi-planar format</a>, then
for each element of <code>pRegions</code>, <code>bufferOffset</code> <strong>must</strong> be a
multiple of the <a href="formats.html#formats-compatibility-classes" class="xref page">texel block size</a></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImageToBuffer-srcImage-07976" href="#VUID-vkCmdCopyImageToBuffer-srcImage-07976"></a> <span class="vuid">VUID-vkCmdCopyImageToBuffer-srcImage-07976</span><br>

If <code>srcImage</code> has a
<a href="formats.html#formats-requiring-sampler-ycbcr-conversion" class="xref page">multi-planar format</a>, then
for each element of <code>pRegions</code>, <code>bufferOffset</code> <strong>must</strong> be a
multiple of the element size of the compatible format for the format and
the <code>aspectMask</code> of the <code>imageSubresource</code> as defined in
<a href="formats.html#formats-compatible-planes" class="xref page">Compatible formats of planes of multi-planar formats</a></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImageToBuffer-srcImage-07978" href="#VUID-vkCmdCopyImageToBuffer-srcImage-07978"></a> <span class="vuid">VUID-vkCmdCopyImageToBuffer-srcImage-07978</span><br>

If <code>srcImage</code> has a depth/stencil format, the <code>bufferOffset</code>
member of any element of <code>pRegions</code> <strong>must</strong> be a multiple of <code>4</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCmdCopyImageToBuffer-commandBuffer-parameter" href="#VUID-vkCmdCopyImageToBuffer-commandBuffer-parameter"></a> <span class="vuid">VUID-vkCmdCopyImageToBuffer-commandBuffer-parameter</span><br>
 <code>commandBuffer</code> <strong>must</strong> be a valid <a href="cmdbuffers.html#VkCommandBuffer" class="xref page">VkCommandBuffer</a> handle</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImageToBuffer-srcImage-parameter" href="#VUID-vkCmdCopyImageToBuffer-srcImage-parameter"></a> <span class="vuid">VUID-vkCmdCopyImageToBuffer-srcImage-parameter</span><br>
 <code>srcImage</code> <strong>must</strong> be a valid <a href="resources.html#VkImage" class="xref page">VkImage</a> handle</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImageToBuffer-srcImageLayout-parameter" href="#VUID-vkCmdCopyImageToBuffer-srcImageLayout-parameter"></a> <span class="vuid">VUID-vkCmdCopyImageToBuffer-srcImageLayout-parameter</span><br>
 <code>srcImageLayout</code> <strong>must</strong> be a valid <a href="resources.html#VkImageLayout" class="xref page">VkImageLayout</a> value</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImageToBuffer-dstBuffer-parameter" href="#VUID-vkCmdCopyImageToBuffer-dstBuffer-parameter"></a> <span class="vuid">VUID-vkCmdCopyImageToBuffer-dstBuffer-parameter</span><br>
 <code>dstBuffer</code> <strong>must</strong> be a valid <a href="resources.html#VkBuffer" class="xref page">VkBuffer</a> handle</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImageToBuffer-pRegions-parameter" href="#VUID-vkCmdCopyImageToBuffer-pRegions-parameter"></a> <span class="vuid">VUID-vkCmdCopyImageToBuffer-pRegions-parameter</span><br>
 <code>pRegions</code> <strong>must</strong> be a valid pointer to an array of <code>regionCount</code> valid <a href="#VkBufferImageCopy">VkBufferImageCopy</a> structures</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImageToBuffer-commandBuffer-recording" href="#VUID-vkCmdCopyImageToBuffer-commandBuffer-recording"></a> <span class="vuid">VUID-vkCmdCopyImageToBuffer-commandBuffer-recording</span><br>
 <code>commandBuffer</code> <strong>must</strong> be in the <a href="cmdbuffers.html#commandbuffers-lifecycle" class="xref page">recording state</a></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImageToBuffer-commandBuffer-cmdpool" href="#VUID-vkCmdCopyImageToBuffer-commandBuffer-cmdpool"></a> <span class="vuid">VUID-vkCmdCopyImageToBuffer-commandBuffer-cmdpool</span><br>
 The <code>VkCommandPool</code> that <code>commandBuffer</code> was allocated from <strong>must</strong> support transfer, graphics, or compute operations</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImageToBuffer-renderpass" href="#VUID-vkCmdCopyImageToBuffer-renderpass"></a> <span class="vuid">VUID-vkCmdCopyImageToBuffer-renderpass</span><br>
 This command <strong>must</strong> only be called outside of a render pass instance</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImageToBuffer-videocoding" href="#VUID-vkCmdCopyImageToBuffer-videocoding"></a> <span class="vuid">VUID-vkCmdCopyImageToBuffer-videocoding</span><br>
 This command <strong>must</strong> only be called outside of a video coding scope</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImageToBuffer-regionCount-arraylength" href="#VUID-vkCmdCopyImageToBuffer-regionCount-arraylength"></a> <span class="vuid">VUID-vkCmdCopyImageToBuffer-regionCount-arraylength</span><br>
 <code>regionCount</code> <strong>must</strong> be greater than <code>0</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImageToBuffer-commonparent" href="#VUID-vkCmdCopyImageToBuffer-commonparent"></a> <span class="vuid">VUID-vkCmdCopyImageToBuffer-commonparent</span><br>
 Each of <code>commandBuffer</code>, <code>dstBuffer</code>, and <code>srcImage</code> <strong>must</strong> have been created, allocated, or retrieved from the same <a href="devsandqueues.html#VkDevice" class="xref page">VkDevice</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Host Synchronization</div>
<div class="ulist">
<ul>
<li>
<p>Host access to <code>commandBuffer</code> <strong>must</strong> be externally synchronized</p>
</li>
<li>
<p>Host access to the <code>VkCommandPool</code> that <code>commandBuffer</code> was allocated from <strong>must</strong> be externally synchronized</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Command Properties</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><a href="cmdbuffers.html#VkCommandBufferLevel" class="xref page">Command Buffer Levels</a></th>
<th class="tableblock halign-left valign-top"><a href="renderpass.html#vkCmdBeginRenderPass" class="xref page">Render Pass Scope</a></th>
<th class="tableblock halign-left valign-top"><a href="video_extensions.html#vkCmdBeginVideoCodingKHR" class="xref page">Video Coding Scope</a></th>
<th class="tableblock halign-left valign-top"><a href="devsandqueues.html#VkQueueFlagBits" class="xref page">Supported Queue Types</a></th>
<th class="tableblock halign-left valign-top"><a href="fundamentals.html#fundamentals-queueoperation-command-types" class="xref page">Command Type</a></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Primary<br>
Secondary</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Outside</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Outside</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Transfer<br>
Graphics<br>
Compute</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Action</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>For both <a href="#vkCmdCopyBufferToImage">vkCmdCopyBufferToImage</a> and <a href="#vkCmdCopyImageToBuffer">vkCmdCopyImageToBuffer</a>, each
element of <code>pRegions</code> is a structure defined as:</p>
</div>
<div id="VkBufferImageCopy" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_VERSION_1_0
typedef struct VkBufferImageCopy {
    VkDeviceSize                bufferOffset;
    uint32_t                    bufferRowLength;
    uint32_t                    bufferImageHeight;
    VkImageSubresourceLayers    imageSubresource;
    VkOffset3D                  imageOffset;
    VkExtent3D                  imageExtent;
} VkBufferImageCopy;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>bufferOffset</code> is the offset in bytes from the start of the buffer
object where the image data is copied from or to.</p>
</li>
<li>
<p><code>bufferRowLength</code> and <code>bufferImageHeight</code> specify in texels a
subregion of a larger two- or three-dimensional image in buffer memory,
and control the addressing calculations.
If either of these values is zero, that aspect of the buffer memory is
considered to be tightly packed according to the <code>imageExtent</code>.</p>
</li>
<li>
<p><code>imageSubresource</code> is a <a href="#VkImageSubresourceLayers">VkImageSubresourceLayers</a> used to
specify the specific image subresources of the image used for the source
or destination image data.</p>
</li>
<li>
<p><code>imageOffset</code> selects the initial <code>x</code>, <code>y</code>, <code>z</code> offsets
in texels of the sub-region of the source or destination image data.</p>
</li>
<li>
<p><code>imageExtent</code> is the size in texels of the image to copy in
<code>width</code>, <code>height</code> and <code>depth</code>.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkBufferImageCopy-bufferRowLength-09101" href="#VUID-VkBufferImageCopy-bufferRowLength-09101"></a> <span class="vuid">VUID-VkBufferImageCopy-bufferRowLength-09101</span><br>

<code>bufferRowLength</code> <strong>must</strong> be <code>0</code>, or greater than or equal to the
<code>width</code> member of <code>imageExtent</code></p>
</li>
<li>
<p><a id="VUID-VkBufferImageCopy-bufferImageHeight-09102" href="#VUID-VkBufferImageCopy-bufferImageHeight-09102"></a> <span class="vuid">VUID-VkBufferImageCopy-bufferImageHeight-09102</span><br>

<code>bufferImageHeight</code> <strong>must</strong> be <code>0</code>, or greater than or equal to the
<code>height</code> member of <code>imageExtent</code></p>
</li>
<li>
<p><a id="VUID-VkBufferImageCopy-aspectMask-09103" href="#VUID-VkBufferImageCopy-aspectMask-09103"></a> <span class="vuid">VUID-VkBufferImageCopy-aspectMask-09103</span><br>

The <code>aspectMask</code> member of <code>imageSubresource</code> <strong>must</strong> only have a
single bit set</p>
</li>
<li>
<p><a id="VUID-VkBufferImageCopy-imageExtent-06659" href="#VUID-VkBufferImageCopy-imageExtent-06659"></a> <span class="vuid">VUID-VkBufferImageCopy-imageExtent-06659</span><br>

<code>imageExtent.width</code> <strong>must</strong> not be 0</p>
</li>
<li>
<p><a id="VUID-VkBufferImageCopy-imageExtent-06660" href="#VUID-VkBufferImageCopy-imageExtent-06660"></a> <span class="vuid">VUID-VkBufferImageCopy-imageExtent-06660</span><br>

<code>imageExtent.height</code> <strong>must</strong> not be 0</p>
</li>
<li>
<p><a id="VUID-VkBufferImageCopy-imageExtent-06661" href="#VUID-VkBufferImageCopy-imageExtent-06661"></a> <span class="vuid">VUID-VkBufferImageCopy-imageExtent-06661</span><br>

<code>imageExtent.depth</code> <strong>must</strong> not be 0</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkBufferImageCopy-imageSubresource-parameter" href="#VUID-VkBufferImageCopy-imageSubresource-parameter"></a> <span class="vuid">VUID-VkBufferImageCopy-imageSubresource-parameter</span><br>
 <code>imageSubresource</code> <strong>must</strong> be a valid <a href="#VkImageSubresourceLayers">VkImageSubresourceLayers</a> structure</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>More extensible versions of the commands to copy between buffers and images
are defined below.</p>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>To copy data from a buffer object to an image object, call:</p>
</div>
<div id="vkCmdCopyBufferToImage2" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_VERSION_1_3
void vkCmdCopyBufferToImage2(
    VkCommandBuffer                             commandBuffer,
    const VkCopyBufferToImageInfo2*             pCopyBufferToImageInfo);</code></pre>
</div>
</div>
<div class="paragraph">
<p>or the equivalent command</p>
</div>
<div id="vkCmdCopyBufferToImage2KHR" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_KHR_copy_commands2
void vkCmdCopyBufferToImage2KHR(
    VkCommandBuffer                             commandBuffer,
    const VkCopyBufferToImageInfo2*             pCopyBufferToImageInfo);</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>commandBuffer</code> is the command buffer into which the command will be
recorded.</p>
</li>
<li>
<p><code>pCopyBufferToImageInfo</code> is a pointer to a
<a href="#VkCopyBufferToImageInfo2">VkCopyBufferToImageInfo2</a> structure describing the copy parameters.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>This command is functionally identical to <a href="#vkCmdCopyBufferToImage">vkCmdCopyBufferToImage</a>, but
includes extensible sub-structures that include <code>sType</code> and <code>pNext</code>
parameters, allowing them to be more easily extended.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCmdCopyBufferToImage2-commandBuffer-01828" href="#VUID-vkCmdCopyBufferToImage2-commandBuffer-01828"></a> <span class="vuid">VUID-vkCmdCopyBufferToImage2-commandBuffer-01828</span><br>

If <code>commandBuffer</code> is an unprotected command buffer and
<a href="devsandqueues.html#limits-protectedNoFault" class="xref page"><code>protectedNoFault</code></a> is not supported,
<code>srcBuffer</code> <strong>must</strong> not be a protected buffer</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyBufferToImage2-commandBuffer-01829" href="#VUID-vkCmdCopyBufferToImage2-commandBuffer-01829"></a> <span class="vuid">VUID-vkCmdCopyBufferToImage2-commandBuffer-01829</span><br>

If <code>commandBuffer</code> is an unprotected command buffer and
<a href="devsandqueues.html#limits-protectedNoFault" class="xref page"><code>protectedNoFault</code></a> is not supported,
<code>dstImage</code> <strong>must</strong> not be a protected image</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyBufferToImage2-commandBuffer-01830" href="#VUID-vkCmdCopyBufferToImage2-commandBuffer-01830"></a> <span class="vuid">VUID-vkCmdCopyBufferToImage2-commandBuffer-01830</span><br>

If <code>commandBuffer</code> is a protected command buffer and
<a href="devsandqueues.html#limits-protectedNoFault" class="xref page"><code>protectedNoFault</code></a> is not supported,
<code>dstImage</code> <strong>must</strong> not be an unprotected image</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyBufferToImage2-commandBuffer-07737" href="#VUID-vkCmdCopyBufferToImage2-commandBuffer-07737"></a> <span class="vuid">VUID-vkCmdCopyBufferToImage2-commandBuffer-07737</span><br>

If the queue family used to create the <a href="cmdbuffers.html#VkCommandPool" class="xref page">VkCommandPool</a> which
<code>commandBuffer</code> was allocated from does not support
<code>VK_QUEUE_GRAPHICS_BIT</code> or <code>VK_QUEUE_COMPUTE_BIT</code>, the
<code>bufferOffset</code> member of any element of <code>pCopyBufferToImageInfo-&gt;pRegions</code> <strong>must</strong> be a
multiple of <code>4</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyBufferToImage2-imageOffset-07738" href="#VUID-vkCmdCopyBufferToImage2-imageOffset-07738"></a> <span class="vuid">VUID-vkCmdCopyBufferToImage2-imageOffset-07738</span><br>

The <code>imageOffset</code> and <code>imageExtent</code> members of each element of
<code>pCopyBufferToImageInfo-&gt;pRegions</code> <strong>must</strong> respect the image transfer granularity requirements
of <code>commandBuffer</code>&#8217;s command pool&#8217;s queue family, as described in
<a href="devsandqueues.html#VkQueueFamilyProperties" class="xref page">VkQueueFamilyProperties</a></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyBufferToImage2-commandBuffer-07739" href="#VUID-vkCmdCopyBufferToImage2-commandBuffer-07739"></a> <span class="vuid">VUID-vkCmdCopyBufferToImage2-commandBuffer-07739</span><br>

If the queue family used to create the <a href="cmdbuffers.html#VkCommandPool" class="xref page">VkCommandPool</a> which
<code>commandBuffer</code> was allocated from does not support
<code>VK_QUEUE_GRAPHICS_BIT</code>, for each element of <code>pCopyBufferToImageInfo-&gt;pRegions</code>, the
<code>aspectMask</code> member of <code>imageSubresource</code> <strong>must</strong> not be
<code>VK_IMAGE_ASPECT_DEPTH_BIT</code> or <code>VK_IMAGE_ASPECT_STENCIL_BIT</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCmdCopyBufferToImage2-commandBuffer-parameter" href="#VUID-vkCmdCopyBufferToImage2-commandBuffer-parameter"></a> <span class="vuid">VUID-vkCmdCopyBufferToImage2-commandBuffer-parameter</span><br>
 <code>commandBuffer</code> <strong>must</strong> be a valid <a href="cmdbuffers.html#VkCommandBuffer" class="xref page">VkCommandBuffer</a> handle</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyBufferToImage2-pCopyBufferToImageInfo-parameter" href="#VUID-vkCmdCopyBufferToImage2-pCopyBufferToImageInfo-parameter"></a> <span class="vuid">VUID-vkCmdCopyBufferToImage2-pCopyBufferToImageInfo-parameter</span><br>
 <code>pCopyBufferToImageInfo</code> <strong>must</strong> be a valid pointer to a valid <a href="#VkCopyBufferToImageInfo2">VkCopyBufferToImageInfo2</a> structure</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyBufferToImage2-commandBuffer-recording" href="#VUID-vkCmdCopyBufferToImage2-commandBuffer-recording"></a> <span class="vuid">VUID-vkCmdCopyBufferToImage2-commandBuffer-recording</span><br>
 <code>commandBuffer</code> <strong>must</strong> be in the <a href="cmdbuffers.html#commandbuffers-lifecycle" class="xref page">recording state</a></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyBufferToImage2-commandBuffer-cmdpool" href="#VUID-vkCmdCopyBufferToImage2-commandBuffer-cmdpool"></a> <span class="vuid">VUID-vkCmdCopyBufferToImage2-commandBuffer-cmdpool</span><br>
 The <code>VkCommandPool</code> that <code>commandBuffer</code> was allocated from <strong>must</strong> support transfer, graphics, or compute operations</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyBufferToImage2-renderpass" href="#VUID-vkCmdCopyBufferToImage2-renderpass"></a> <span class="vuid">VUID-vkCmdCopyBufferToImage2-renderpass</span><br>
 This command <strong>must</strong> only be called outside of a render pass instance</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyBufferToImage2-videocoding" href="#VUID-vkCmdCopyBufferToImage2-videocoding"></a> <span class="vuid">VUID-vkCmdCopyBufferToImage2-videocoding</span><br>
 This command <strong>must</strong> only be called outside of a video coding scope</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Host Synchronization</div>
<div class="ulist">
<ul>
<li>
<p>Host access to <code>commandBuffer</code> <strong>must</strong> be externally synchronized</p>
</li>
<li>
<p>Host access to the <code>VkCommandPool</code> that <code>commandBuffer</code> was allocated from <strong>must</strong> be externally synchronized</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Command Properties</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><a href="cmdbuffers.html#VkCommandBufferLevel" class="xref page">Command Buffer Levels</a></th>
<th class="tableblock halign-left valign-top"><a href="renderpass.html#vkCmdBeginRenderPass" class="xref page">Render Pass Scope</a></th>
<th class="tableblock halign-left valign-top"><a href="video_extensions.html#vkCmdBeginVideoCodingKHR" class="xref page">Video Coding Scope</a></th>
<th class="tableblock halign-left valign-top"><a href="devsandqueues.html#VkQueueFlagBits" class="xref page">Supported Queue Types</a></th>
<th class="tableblock halign-left valign-top"><a href="fundamentals.html#fundamentals-queueoperation-command-types" class="xref page">Command Type</a></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Primary<br>
Secondary</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Outside</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Outside</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Transfer<br>
Graphics<br>
Compute</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Action</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>VkCopyBufferToImageInfo2</code> structure is defined as:</p>
</div>
<div id="VkCopyBufferToImageInfo2" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_VERSION_1_3
typedef struct VkCopyBufferToImageInfo2 {
    VkStructureType              sType;
    const void*                  pNext;
    VkBuffer                     srcBuffer;
    VkImage                      dstImage;
    VkImageLayout                dstImageLayout;
    uint32_t                     regionCount;
    const VkBufferImageCopy2*    pRegions;
} VkCopyBufferToImageInfo2;</code></pre>
</div>
</div>
<div class="paragraph">
<p>or the equivalent</p>
</div>
<div id="VkCopyBufferToImageInfo2KHR" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_KHR_copy_commands2
typedef VkCopyBufferToImageInfo2 VkCopyBufferToImageInfo2KHR;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is a <a href="fundamentals.html#VkStructureType" class="xref page">VkStructureType</a> value identifying this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>srcBuffer</code> is the source buffer.</p>
</li>
<li>
<p><code>dstImage</code> is the destination image.</p>
</li>
<li>
<p><code>dstImageLayout</code> is the layout of the destination image subresources
for the copy.</p>
</li>
<li>
<p><code>regionCount</code> is the number of regions to copy.</p>
</li>
<li>
<p><code>pRegions</code> is a pointer to an array of <a href="#VkBufferImageCopy2">VkBufferImageCopy2</a>
structures specifying the regions to copy.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkCopyBufferToImageInfo2-pRegions-04565" href="#VUID-VkCopyBufferToImageInfo2-pRegions-04565"></a> <span class="vuid">VUID-VkCopyBufferToImageInfo2-pRegions-04565</span><br>

If the image region specified by each element of <code>pRegions</code> does not
contain <a href="#VkCopyCommandTransformInfoQCOM">VkCopyCommandTransformInfoQCOM</a> in its <code>pNext</code> chain,
it <strong>must</strong> be a region that is contained within the specified
<code>imageSubresource</code> of <code>dstImage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyBufferToImageInfo2KHR-pRegions-04554" href="#VUID-VkCopyBufferToImageInfo2KHR-pRegions-04554"></a> <span class="vuid">VUID-VkCopyBufferToImageInfo2KHR-pRegions-04554</span><br>

If the image region specified by each element of <code>pRegions</code> contains
<a href="#VkCopyCommandTransformInfoQCOM">VkCopyCommandTransformInfoQCOM</a> in its <code>pNext</code> chain, the
rotated destination region as described in
<a href="#copies-buffers-images-rotation-addressing">copies-buffers-images-rotation-addressing</a> <strong>must</strong> be contained within
<code>dstImage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyBufferToImageInfo2KHR-pRegions-04555" href="#VUID-VkCopyBufferToImageInfo2KHR-pRegions-04555"></a> <span class="vuid">VUID-VkCopyBufferToImageInfo2KHR-pRegions-04555</span><br>

If any element of <code>pRegions</code> contains
<a href="#VkCopyCommandTransformInfoQCOM">VkCopyCommandTransformInfoQCOM</a> in its <code>pNext</code> chain, then
<code>dstImage</code> <strong>must</strong> have a 1x1x1 <a href="formats.html#formats-compatibility-classes" class="xref page">texel    block extent</a></p>
</li>
<li>
<p><a id="VUID-VkCopyBufferToImageInfo2KHR-pRegions-06203" href="#VUID-VkCopyBufferToImageInfo2KHR-pRegions-06203"></a> <span class="vuid">VUID-VkCopyBufferToImageInfo2KHR-pRegions-06203</span><br>

If any element of <code>pRegions</code> contains
<a href="#VkCopyCommandTransformInfoQCOM">VkCopyCommandTransformInfoQCOM</a> in its <code>pNext</code> chain, then
<code>dstImage</code> <strong>must</strong> be of type <code>VK_IMAGE_TYPE_2D</code></p>
</li>
<li>
<p><a id="VUID-VkCopyBufferToImageInfo2KHR-pRegions-06204" href="#VUID-VkCopyBufferToImageInfo2KHR-pRegions-06204"></a> <span class="vuid">VUID-VkCopyBufferToImageInfo2KHR-pRegions-06204</span><br>

If any element of <code>pRegions</code> contains
<a href="#VkCopyCommandTransformInfoQCOM">VkCopyCommandTransformInfoQCOM</a> in its <code>pNext</code> chain, then
<code>dstImage</code> <strong>must</strong> not have a
<a href="formats.html#formats-requiring-sampler-ycbcr-conversion" class="xref page">multi-planar format</a></p>
</li>
</ul>
</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkCopyBufferToImageInfo2-pRegions-00171" href="#VUID-VkCopyBufferToImageInfo2-pRegions-00171"></a> <span class="vuid">VUID-VkCopyBufferToImageInfo2-pRegions-00171</span><br>

<code>srcBuffer</code> <strong>must</strong> be large enough to contain all buffer locations
that are accessed according to <a href="#copies-buffers-images-addressing">Buffer    and Image Addressing</a>, for each element of <code>pRegions</code></p>
</li>
<li>
<p><a id="VUID-VkCopyBufferToImageInfo2-pRegions-00173" href="#VUID-VkCopyBufferToImageInfo2-pRegions-00173"></a> <span class="vuid">VUID-VkCopyBufferToImageInfo2-pRegions-00173</span><br>

The union of all source regions, and the union of all destination
regions, specified by the elements of <code>pRegions</code>, <strong>must</strong> not overlap
in memory</p>
</li>
<li>
<p><a id="VUID-VkCopyBufferToImageInfo2-srcBuffer-00174" href="#VUID-VkCopyBufferToImageInfo2-srcBuffer-00174"></a> <span class="vuid">VUID-VkCopyBufferToImageInfo2-srcBuffer-00174</span><br>

<code>srcBuffer</code> <strong>must</strong> have been created with
<code>VK_BUFFER_USAGE_TRANSFER_SRC_BIT</code> usage flag</p>
</li>
<li>
<p><a id="VUID-VkCopyBufferToImageInfo2-dstImage-01997" href="#VUID-VkCopyBufferToImageInfo2-dstImage-01997"></a> <span class="vuid">VUID-VkCopyBufferToImageInfo2-dstImage-01997</span><br>

The <a href="resources.html#resources-image-format-features" class="xref page">format features</a> of
<code>dstImage</code> <strong>must</strong> contain <code>VK_FORMAT_FEATURE_TRANSFER_DST_BIT</code></p>
</li>
<li>
<p><a id="VUID-VkCopyBufferToImageInfo2-srcBuffer-00176" href="#VUID-VkCopyBufferToImageInfo2-srcBuffer-00176"></a> <span class="vuid">VUID-VkCopyBufferToImageInfo2-srcBuffer-00176</span><br>

If <code>srcBuffer</code> is non-sparse then it <strong>must</strong> be bound completely and
contiguously to a single <code>VkDeviceMemory</code> object</p>
</li>
<li>
<p><a id="VUID-VkCopyBufferToImageInfo2-dstImage-00177" href="#VUID-VkCopyBufferToImageInfo2-dstImage-00177"></a> <span class="vuid">VUID-VkCopyBufferToImageInfo2-dstImage-00177</span><br>

<code>dstImage</code> <strong>must</strong> have been created with
<code>VK_IMAGE_USAGE_TRANSFER_DST_BIT</code> usage flag</p>
</li>
<li>
<p><a id="VUID-VkCopyBufferToImageInfo2-dstImageLayout-00180" href="#VUID-VkCopyBufferToImageInfo2-dstImageLayout-00180"></a> <span class="vuid">VUID-VkCopyBufferToImageInfo2-dstImageLayout-00180</span><br>

<code>dstImageLayout</code> <strong>must</strong> specify the layout of the image subresources
of <code>dstImage</code> specified in <code>pRegions</code> at the time this command
is executed on a <code>VkDevice</code></p>
</li>
<li>
<p><a id="VUID-VkCopyBufferToImageInfo2-dstImageLayout-01396" href="#VUID-VkCopyBufferToImageInfo2-dstImageLayout-01396"></a> <span class="vuid">VUID-VkCopyBufferToImageInfo2-dstImageLayout-01396</span><br>

<code>dstImageLayout</code> <strong>must</strong> be
<code>VK_IMAGE_LAYOUT_TRANSFER_DST_OPTIMAL</code>,
<code>VK_IMAGE_LAYOUT_GENERAL</code>, or
<code>VK_IMAGE_LAYOUT_SHARED_PRESENT_KHR</code></p>
</li>
<li>
<p><a id="VUID-VkCopyBufferToImageInfo2-pRegions-07931" href="#VUID-VkCopyBufferToImageInfo2-pRegions-07931"></a> <span class="vuid">VUID-VkCopyBufferToImageInfo2-pRegions-07931</span><br>

If <a href="../appendices/extensions.html#VK_EXT_depth_range_unrestricted" class="xref page">VK_EXT_depth_range_unrestricted</a> is not enabled, for each
element of <code>pRegions</code> whose <code>imageSubresource</code> contains a depth
aspect, the data in <code>srcBuffer</code> <strong>must</strong> be in the range <span class="eq">[0,1]</span></p>
</li>
</ul>
</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkCopyBufferToImageInfo2-dstImage-07966" href="#VUID-VkCopyBufferToImageInfo2-dstImage-07966"></a> <span class="vuid">VUID-VkCopyBufferToImageInfo2-dstImage-07966</span><br>

If <code>dstImage</code> is non-sparse then the image or the specified
<em>disjoint</em> plane <strong>must</strong> be bound completely and contiguously to a single
<code>VkDeviceMemory</code> object</p>
</li>
<li>
<p><a id="VUID-VkCopyBufferToImageInfo2-imageSubresource-07967" href="#VUID-VkCopyBufferToImageInfo2-imageSubresource-07967"></a> <span class="vuid">VUID-VkCopyBufferToImageInfo2-imageSubresource-07967</span><br>

The <code>imageSubresource.mipLevel</code> member of each element of
<code>pRegions</code> <strong>must</strong> be less than the <code>mipLevels</code> specified in
<a href="resources.html#VkImageCreateInfo" class="xref page">VkImageCreateInfo</a> when <code>dstImage</code> was created</p>
</li>
<li>
<p><a id="VUID-VkCopyBufferToImageInfo2-imageSubresource-07968" href="#VUID-VkCopyBufferToImageInfo2-imageSubresource-07968"></a> <span class="vuid">VUID-VkCopyBufferToImageInfo2-imageSubresource-07968</span><br>

The <span class="eq"><code>imageSubresource.baseArrayLayer</code> + 
<code>imageSubresource.layerCount</code></span> of each element of <code>pRegions</code>
, if <code>imageSubresource.layerCount</code> is not
<code>VK_REMAINING_ARRAY_LAYERS</code> and <a href="features.html#features-maintenance5" class="xref page">    <code>maintenance5</code></a> is not enabled,
<strong>must</strong> be less than or equal to the <code>arrayLayers</code> specified in
<a href="resources.html#VkImageCreateInfo" class="xref page">VkImageCreateInfo</a> when <code>dstImage</code> was created</p>
</li>
<li>
<p><a id="VUID-VkCopyBufferToImageInfo2-dstImage-07969" href="#VUID-VkCopyBufferToImageInfo2-dstImage-07969"></a> <span class="vuid">VUID-VkCopyBufferToImageInfo2-dstImage-07969</span><br>

<code>dstImage</code> <strong>must</strong> not have been created with <code>flags</code>
containing <code>VK_IMAGE_CREATE_SUBSAMPLED_BIT_EXT</code></p>
</li>
</ul>
</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkCopyBufferToImageInfo2-dstImage-07973" href="#VUID-VkCopyBufferToImageInfo2-dstImage-07973"></a> <span class="vuid">VUID-VkCopyBufferToImageInfo2-dstImage-07973</span><br>

<code>dstImage</code> <strong>must</strong> have a sample count equal to
<code>VK_SAMPLE_COUNT_1_BIT</code></p>
</li>
</ul>
</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkCopyBufferToImageInfo2-dstImage-07979" href="#VUID-VkCopyBufferToImageInfo2-dstImage-07979"></a> <span class="vuid">VUID-VkCopyBufferToImageInfo2-dstImage-07979</span><br>

If <code>dstImage</code> is of type <code>VK_IMAGE_TYPE_1D</code>, then for each
element of <code>pRegions</code>, <code>imageOffset.y</code> <strong>must</strong> be <code>0</code> and
<code>imageExtent.height</code> <strong>must</strong> be <code>1</code></p>
</li>
<li>
<p><a id="VUID-VkCopyBufferToImageInfo2-imageOffset-09104" href="#VUID-VkCopyBufferToImageInfo2-imageOffset-09104"></a> <span class="vuid">VUID-VkCopyBufferToImageInfo2-imageOffset-09104</span><br>

For each element of <code>pRegions</code>, <code>imageOffset.z</code> and
<span class="eq">(<code>imageExtent.depth</code> +  <code>imageOffset.z</code>)</span> <strong>must</strong>
both be greater than or equal to <code>0</code> and less than or equal to the depth
of the specified <code>imageSubresource</code> of <code>dstImage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyBufferToImageInfo2-dstImage-07980" href="#VUID-VkCopyBufferToImageInfo2-dstImage-07980"></a> <span class="vuid">VUID-VkCopyBufferToImageInfo2-dstImage-07980</span><br>

If <code>dstImage</code> is of type <code>VK_IMAGE_TYPE_1D</code> or
<code>VK_IMAGE_TYPE_2D</code>, then for each element of <code>pRegions</code>,
<code>imageOffset.z</code> <strong>must</strong> be <code>0</code> and <code>imageExtent.depth</code> <strong>must</strong>
be <code>1</code></p>
</li>
<li>
<p><a id="VUID-VkCopyBufferToImageInfo2-dstImage-07274" href="#VUID-VkCopyBufferToImageInfo2-dstImage-07274"></a> <span class="vuid">VUID-VkCopyBufferToImageInfo2-dstImage-07274</span><br>

For each element of <code>pRegions</code>, <code>imageOffset.x</code> <strong>must</strong> be a
multiple of the <a href="formats.html#formats-compatibility-classes" class="xref page">texel block extent    width</a> of the <a href="formats.html#VkFormat" class="xref page">VkFormat</a> of <code>dstImage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyBufferToImageInfo2-dstImage-07275" href="#VUID-VkCopyBufferToImageInfo2-dstImage-07275"></a> <span class="vuid">VUID-VkCopyBufferToImageInfo2-dstImage-07275</span><br>

For each element of <code>pRegions</code>, <code>imageOffset.y</code> <strong>must</strong> be a
multiple of the <a href="formats.html#formats-compatibility-classes" class="xref page">texel block extent    height</a> of the <a href="formats.html#VkFormat" class="xref page">VkFormat</a> of <code>dstImage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyBufferToImageInfo2-dstImage-07276" href="#VUID-VkCopyBufferToImageInfo2-dstImage-07276"></a> <span class="vuid">VUID-VkCopyBufferToImageInfo2-dstImage-07276</span><br>

For each element of <code>pRegions</code>, <code>imageOffset.z</code> <strong>must</strong> be a
multiple of the <a href="formats.html#formats-compatibility-classes" class="xref page">texel block extent    depth</a> of the <a href="formats.html#VkFormat" class="xref page">VkFormat</a> of <code>dstImage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyBufferToImageInfo2-dstImage-00207" href="#VUID-VkCopyBufferToImageInfo2-dstImage-00207"></a> <span class="vuid">VUID-VkCopyBufferToImageInfo2-dstImage-00207</span><br>

For each element of <code>pRegions</code>, if the sum of <code>imageOffset.x</code>
and <code>extent.width</code> does not equal the width of the subresource
specified by <code>srcSubresource</code>, <code>extent.width</code> <strong>must</strong> be a
multiple of the <a href="formats.html#formats-compatibility-classes" class="xref page">texel block extent    width</a> of the <a href="formats.html#VkFormat" class="xref page">VkFormat</a> of <code>dstImage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyBufferToImageInfo2-dstImage-00208" href="#VUID-VkCopyBufferToImageInfo2-dstImage-00208"></a> <span class="vuid">VUID-VkCopyBufferToImageInfo2-dstImage-00208</span><br>

For each element of <code>pRegions</code>, if the sum of <code>imageOffset.y</code>
and <code>extent.height</code> does not equal the height of the subresource
specified by <code>srcSubresource</code>, <code>extent.height</code> <strong>must</strong> be a
multiple of the <a href="formats.html#formats-compatibility-classes" class="xref page">texel block extent    height</a> of the <a href="formats.html#VkFormat" class="xref page">VkFormat</a> of <code>dstImage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyBufferToImageInfo2-dstImage-00209" href="#VUID-VkCopyBufferToImageInfo2-dstImage-00209"></a> <span class="vuid">VUID-VkCopyBufferToImageInfo2-dstImage-00209</span><br>

For each element of <code>pRegions</code>, if the sum of <code>imageOffset.z</code>
and <code>extent.depth</code> does not equal the depth of the subresource
specified by <code>srcSubresource</code>, <code>extent.depth</code> <strong>must</strong> be a
multiple of the <a href="formats.html#formats-compatibility-classes" class="xref page">texel block extent    depth</a> of the <a href="formats.html#VkFormat" class="xref page">VkFormat</a> of <code>dstImage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyBufferToImageInfo2-imageSubresource-09105" href="#VUID-VkCopyBufferToImageInfo2-imageSubresource-09105"></a> <span class="vuid">VUID-VkCopyBufferToImageInfo2-imageSubresource-09105</span><br>

For each element of <code>pRegions</code>, <code>imageSubresource.aspectMask</code>
<strong>must</strong> specify aspects present in <code>dstImage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyBufferToImageInfo2-dstImage-07981" href="#VUID-VkCopyBufferToImageInfo2-dstImage-07981"></a> <span class="vuid">VUID-VkCopyBufferToImageInfo2-dstImage-07981</span><br>

If <code>dstImage</code> has a
<a href="formats.html#formats-requiring-sampler-ycbcr-conversion" class="xref page">multi-planar image    format</a>, then for each element of <code>pRegions</code>,
<code>imageSubresource.aspectMask</code> <strong>must</strong> be a single valid
<a href="formats.html#formats-planes-image-aspect" class="xref page">multi-planar aspect mask</a> bit</p>
</li>
<li>
<p><a id="VUID-VkCopyBufferToImageInfo2-dstImage-07983" href="#VUID-VkCopyBufferToImageInfo2-dstImage-07983"></a> <span class="vuid">VUID-VkCopyBufferToImageInfo2-dstImage-07983</span><br>

If <code>dstImage</code> is of type <code>VK_IMAGE_TYPE_3D</code>, for each
element of <code>pRegions</code>, <code>imageSubresource.baseArrayLayer</code> <strong>must</strong>
be <code>0</code> and <code>imageSubresource.layerCount</code> <strong>must</strong> be <code>1</code></p>
</li>
</ul>
</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkCopyBufferToImageInfo2-bufferRowLength-09106" href="#VUID-VkCopyBufferToImageInfo2-bufferRowLength-09106"></a> <span class="vuid">VUID-VkCopyBufferToImageInfo2-bufferRowLength-09106</span><br>

For each element of <code>pRegions</code>, <code>bufferRowLength</code> <strong>must</strong> be a
multiple of the <a href="formats.html#formats-compatibility-classes" class="xref page">texel block extent    width</a> of the <a href="formats.html#VkFormat" class="xref page">VkFormat</a> of <code>dstImage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyBufferToImageInfo2-bufferImageHeight-09107" href="#VUID-VkCopyBufferToImageInfo2-bufferImageHeight-09107"></a> <span class="vuid">VUID-VkCopyBufferToImageInfo2-bufferImageHeight-09107</span><br>

For each element of <code>pRegions</code>, <code>bufferImageHeight</code> <strong>must</strong> be a
multiple of the <a href="formats.html#formats-compatibility-classes" class="xref page">texel block extent    height</a> of the <a href="formats.html#VkFormat" class="xref page">VkFormat</a> of <code>dstImage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyBufferToImageInfo2-bufferRowLength-09108" href="#VUID-VkCopyBufferToImageInfo2-bufferRowLength-09108"></a> <span class="vuid">VUID-VkCopyBufferToImageInfo2-bufferRowLength-09108</span><br>

For each element of <code>pRegions</code>, <code>bufferRowLength</code> divided by
the <a href="formats.html#formats-compatibility-classes" class="xref page">texel block extent width</a> and then
multiplied by the texel block size of <code>dstImage</code> <strong>must</strong> be less
than or equal to <span class="eq">2<sup>31</sup>-1</span></p>
</li>
</ul>
</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkCopyBufferToImageInfo2-dstImage-07975" href="#VUID-VkCopyBufferToImageInfo2-dstImage-07975"></a> <span class="vuid">VUID-VkCopyBufferToImageInfo2-dstImage-07975</span><br>

If <code>dstImage</code> does not have either a depth/stencil or a
<a href="formats.html#formats-requiring-sampler-ycbcr-conversion" class="xref page">multi-planar format</a>, then
for each element of <code>pRegions</code>, <code>bufferOffset</code> <strong>must</strong> be a
multiple of the <a href="formats.html#formats-compatibility-classes" class="xref page">texel block size</a></p>
</li>
<li>
<p><a id="VUID-VkCopyBufferToImageInfo2-dstImage-07976" href="#VUID-VkCopyBufferToImageInfo2-dstImage-07976"></a> <span class="vuid">VUID-VkCopyBufferToImageInfo2-dstImage-07976</span><br>

If <code>dstImage</code> has a
<a href="formats.html#formats-requiring-sampler-ycbcr-conversion" class="xref page">multi-planar format</a>, then
for each element of <code>pRegions</code>, <code>bufferOffset</code> <strong>must</strong> be a
multiple of the element size of the compatible format for the format and
the <code>aspectMask</code> of the <code>imageSubresource</code> as defined in
<a href="formats.html#formats-compatible-planes" class="xref page">Compatible formats of planes of multi-planar formats</a></p>
</li>
<li>
<p><a id="VUID-VkCopyBufferToImageInfo2-dstImage-07978" href="#VUID-VkCopyBufferToImageInfo2-dstImage-07978"></a> <span class="vuid">VUID-VkCopyBufferToImageInfo2-dstImage-07978</span><br>

If <code>dstImage</code> has a depth/stencil format, the <code>bufferOffset</code>
member of any element of <code>pRegions</code> <strong>must</strong> be a multiple of <code>4</code></p>
</li>
<li>
<p><a id="VUID-VkCopyBufferToImageInfo2-pRegions-06223" href="#VUID-VkCopyBufferToImageInfo2-pRegions-06223"></a> <span class="vuid">VUID-VkCopyBufferToImageInfo2-pRegions-06223</span><br>

For each element of <code>pRegions</code> not containing
<code>VkCopyCommandTransformInfoQCOM</code> in its <code>pNext</code> chain,
<code>imageOffset.x</code> and <span class="eq">(<code>imageExtent.width</code> + 
<code>imageOffset.x</code>)</span> <strong>must</strong> both be greater than or equal to <code>0</code> and
less than or equal to the width of the specified <code>imageSubresource</code>
of <code>dstImage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyBufferToImageInfo2-pRegions-06224" href="#VUID-VkCopyBufferToImageInfo2-pRegions-06224"></a> <span class="vuid">VUID-VkCopyBufferToImageInfo2-pRegions-06224</span><br>

For each element of <code>pRegions</code> not containing
<code>VkCopyCommandTransformInfoQCOM</code> in its <code>pNext</code> chain,
<code>imageOffset.y</code> and <span class="eq">(<code>imageExtent.height</code> + 
<code>imageOffset.y</code>)</span> <strong>must</strong> both be greater than or equal to <code>0</code> and
less than or equal to the height of the specified <code>imageSubresource</code>
of <code>dstImage</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkCopyBufferToImageInfo2-sType-sType" href="#VUID-VkCopyBufferToImageInfo2-sType-sType"></a> <span class="vuid">VUID-VkCopyBufferToImageInfo2-sType-sType</span><br>
 <code>sType</code> <strong>must</strong> be <code>VK_STRUCTURE_TYPE_COPY_BUFFER_TO_IMAGE_INFO_2</code></p>
</li>
<li>
<p><a id="VUID-VkCopyBufferToImageInfo2-pNext-pNext" href="#VUID-VkCopyBufferToImageInfo2-pNext-pNext"></a> <span class="vuid">VUID-VkCopyBufferToImageInfo2-pNext-pNext</span><br>
 <code>pNext</code> <strong>must</strong> be <code>NULL</code></p>
</li>
<li>
<p><a id="VUID-VkCopyBufferToImageInfo2-srcBuffer-parameter" href="#VUID-VkCopyBufferToImageInfo2-srcBuffer-parameter"></a> <span class="vuid">VUID-VkCopyBufferToImageInfo2-srcBuffer-parameter</span><br>
 <code>srcBuffer</code> <strong>must</strong> be a valid <a href="resources.html#VkBuffer" class="xref page">VkBuffer</a> handle</p>
</li>
<li>
<p><a id="VUID-VkCopyBufferToImageInfo2-dstImage-parameter" href="#VUID-VkCopyBufferToImageInfo2-dstImage-parameter"></a> <span class="vuid">VUID-VkCopyBufferToImageInfo2-dstImage-parameter</span><br>
 <code>dstImage</code> <strong>must</strong> be a valid <a href="resources.html#VkImage" class="xref page">VkImage</a> handle</p>
</li>
<li>
<p><a id="VUID-VkCopyBufferToImageInfo2-dstImageLayout-parameter" href="#VUID-VkCopyBufferToImageInfo2-dstImageLayout-parameter"></a> <span class="vuid">VUID-VkCopyBufferToImageInfo2-dstImageLayout-parameter</span><br>
 <code>dstImageLayout</code> <strong>must</strong> be a valid <a href="resources.html#VkImageLayout" class="xref page">VkImageLayout</a> value</p>
</li>
<li>
<p><a id="VUID-VkCopyBufferToImageInfo2-pRegions-parameter" href="#VUID-VkCopyBufferToImageInfo2-pRegions-parameter"></a> <span class="vuid">VUID-VkCopyBufferToImageInfo2-pRegions-parameter</span><br>
 <code>pRegions</code> <strong>must</strong> be a valid pointer to an array of <code>regionCount</code> valid <a href="#VkBufferImageCopy2">VkBufferImageCopy2</a> structures</p>
</li>
<li>
<p><a id="VUID-VkCopyBufferToImageInfo2-regionCount-arraylength" href="#VUID-VkCopyBufferToImageInfo2-regionCount-arraylength"></a> <span class="vuid">VUID-VkCopyBufferToImageInfo2-regionCount-arraylength</span><br>
 <code>regionCount</code> <strong>must</strong> be greater than <code>0</code></p>
</li>
<li>
<p><a id="VUID-VkCopyBufferToImageInfo2-commonparent" href="#VUID-VkCopyBufferToImageInfo2-commonparent"></a> <span class="vuid">VUID-VkCopyBufferToImageInfo2-commonparent</span><br>
 Both of <code>dstImage</code>, and <code>srcBuffer</code> <strong>must</strong> have been created, allocated, or retrieved from the same <a href="devsandqueues.html#VkDevice" class="xref page">VkDevice</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>To copy data from an image object to a buffer object, call:</p>
</div>
<div id="vkCmdCopyImageToBuffer2" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_VERSION_1_3
void vkCmdCopyImageToBuffer2(
    VkCommandBuffer                             commandBuffer,
    const VkCopyImageToBufferInfo2*             pCopyImageToBufferInfo);</code></pre>
</div>
</div>
<div class="paragraph">
<p>or the equivalent command</p>
</div>
<div id="vkCmdCopyImageToBuffer2KHR" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_KHR_copy_commands2
void vkCmdCopyImageToBuffer2KHR(
    VkCommandBuffer                             commandBuffer,
    const VkCopyImageToBufferInfo2*             pCopyImageToBufferInfo);</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>commandBuffer</code> is the command buffer into which the command will be
recorded.</p>
</li>
<li>
<p><code>pCopyImageToBufferInfo</code> is a pointer to a
<a href="#VkCopyImageToBufferInfo2">VkCopyImageToBufferInfo2</a> structure describing the copy parameters.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>This command is functionally identical to <a href="#vkCmdCopyImageToBuffer">vkCmdCopyImageToBuffer</a>, but
includes extensible sub-structures that include <code>sType</code> and <code>pNext</code>
parameters, allowing them to be more easily extended.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCmdCopyImageToBuffer2-commandBuffer-01831" href="#VUID-vkCmdCopyImageToBuffer2-commandBuffer-01831"></a> <span class="vuid">VUID-vkCmdCopyImageToBuffer2-commandBuffer-01831</span><br>

If <code>commandBuffer</code> is an unprotected command buffer and
<a href="devsandqueues.html#limits-protectedNoFault" class="xref page"><code>protectedNoFault</code></a> is not supported,
<code>srcImage</code> <strong>must</strong> not be a protected image</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImageToBuffer2-commandBuffer-01832" href="#VUID-vkCmdCopyImageToBuffer2-commandBuffer-01832"></a> <span class="vuid">VUID-vkCmdCopyImageToBuffer2-commandBuffer-01832</span><br>

If <code>commandBuffer</code> is an unprotected command buffer and
<a href="devsandqueues.html#limits-protectedNoFault" class="xref page"><code>protectedNoFault</code></a> is not supported,
<code>dstBuffer</code> <strong>must</strong> not be a protected buffer</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImageToBuffer2-commandBuffer-01833" href="#VUID-vkCmdCopyImageToBuffer2-commandBuffer-01833"></a> <span class="vuid">VUID-vkCmdCopyImageToBuffer2-commandBuffer-01833</span><br>

If <code>commandBuffer</code> is a protected command buffer and
<a href="devsandqueues.html#limits-protectedNoFault" class="xref page"><code>protectedNoFault</code></a> is not supported,
<code>dstBuffer</code> <strong>must</strong> not be an unprotected buffer</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImageToBuffer2-commandBuffer-07746" href="#VUID-vkCmdCopyImageToBuffer2-commandBuffer-07746"></a> <span class="vuid">VUID-vkCmdCopyImageToBuffer2-commandBuffer-07746</span><br>

If the queue family used to create the <a href="cmdbuffers.html#VkCommandPool" class="xref page">VkCommandPool</a> which
<code>commandBuffer</code> was allocated from does not support
<code>VK_QUEUE_GRAPHICS_BIT</code> or <code>VK_QUEUE_COMPUTE_BIT</code>, the
<code>bufferOffset</code> member of any element of <code>pCopyImageToBufferInfo-&gt;pRegions</code> <strong>must</strong> be a
multiple of <code>4</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImageToBuffer2-imageOffset-07747" href="#VUID-vkCmdCopyImageToBuffer2-imageOffset-07747"></a> <span class="vuid">VUID-vkCmdCopyImageToBuffer2-imageOffset-07747</span><br>

The <code>imageOffset</code> and <code>imageExtent</code> members of each element of
<code>pCopyImageToBufferInfo-&gt;pRegions</code> <strong>must</strong> respect the image transfer granularity requirements
of <code>commandBuffer</code>&#8217;s command pool&#8217;s queue family, as described in
<a href="devsandqueues.html#VkQueueFamilyProperties" class="xref page">VkQueueFamilyProperties</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCmdCopyImageToBuffer2-commandBuffer-parameter" href="#VUID-vkCmdCopyImageToBuffer2-commandBuffer-parameter"></a> <span class="vuid">VUID-vkCmdCopyImageToBuffer2-commandBuffer-parameter</span><br>
 <code>commandBuffer</code> <strong>must</strong> be a valid <a href="cmdbuffers.html#VkCommandBuffer" class="xref page">VkCommandBuffer</a> handle</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImageToBuffer2-pCopyImageToBufferInfo-parameter" href="#VUID-vkCmdCopyImageToBuffer2-pCopyImageToBufferInfo-parameter"></a> <span class="vuid">VUID-vkCmdCopyImageToBuffer2-pCopyImageToBufferInfo-parameter</span><br>
 <code>pCopyImageToBufferInfo</code> <strong>must</strong> be a valid pointer to a valid <a href="#VkCopyImageToBufferInfo2">VkCopyImageToBufferInfo2</a> structure</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImageToBuffer2-commandBuffer-recording" href="#VUID-vkCmdCopyImageToBuffer2-commandBuffer-recording"></a> <span class="vuid">VUID-vkCmdCopyImageToBuffer2-commandBuffer-recording</span><br>
 <code>commandBuffer</code> <strong>must</strong> be in the <a href="cmdbuffers.html#commandbuffers-lifecycle" class="xref page">recording state</a></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImageToBuffer2-commandBuffer-cmdpool" href="#VUID-vkCmdCopyImageToBuffer2-commandBuffer-cmdpool"></a> <span class="vuid">VUID-vkCmdCopyImageToBuffer2-commandBuffer-cmdpool</span><br>
 The <code>VkCommandPool</code> that <code>commandBuffer</code> was allocated from <strong>must</strong> support transfer, graphics, or compute operations</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImageToBuffer2-renderpass" href="#VUID-vkCmdCopyImageToBuffer2-renderpass"></a> <span class="vuid">VUID-vkCmdCopyImageToBuffer2-renderpass</span><br>
 This command <strong>must</strong> only be called outside of a render pass instance</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImageToBuffer2-videocoding" href="#VUID-vkCmdCopyImageToBuffer2-videocoding"></a> <span class="vuid">VUID-vkCmdCopyImageToBuffer2-videocoding</span><br>
 This command <strong>must</strong> only be called outside of a video coding scope</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Host Synchronization</div>
<div class="ulist">
<ul>
<li>
<p>Host access to <code>commandBuffer</code> <strong>must</strong> be externally synchronized</p>
</li>
<li>
<p>Host access to the <code>VkCommandPool</code> that <code>commandBuffer</code> was allocated from <strong>must</strong> be externally synchronized</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Command Properties</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><a href="cmdbuffers.html#VkCommandBufferLevel" class="xref page">Command Buffer Levels</a></th>
<th class="tableblock halign-left valign-top"><a href="renderpass.html#vkCmdBeginRenderPass" class="xref page">Render Pass Scope</a></th>
<th class="tableblock halign-left valign-top"><a href="video_extensions.html#vkCmdBeginVideoCodingKHR" class="xref page">Video Coding Scope</a></th>
<th class="tableblock halign-left valign-top"><a href="devsandqueues.html#VkQueueFlagBits" class="xref page">Supported Queue Types</a></th>
<th class="tableblock halign-left valign-top"><a href="fundamentals.html#fundamentals-queueoperation-command-types" class="xref page">Command Type</a></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Primary<br>
Secondary</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Outside</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Outside</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Transfer<br>
Graphics<br>
Compute</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Action</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>VkCopyImageToBufferInfo2</code> structure is defined as:</p>
</div>
<div id="VkCopyImageToBufferInfo2" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_VERSION_1_3
typedef struct VkCopyImageToBufferInfo2 {
    VkStructureType              sType;
    const void*                  pNext;
    VkImage                      srcImage;
    VkImageLayout                srcImageLayout;
    VkBuffer                     dstBuffer;
    uint32_t                     regionCount;
    const VkBufferImageCopy2*    pRegions;
} VkCopyImageToBufferInfo2;</code></pre>
</div>
</div>
<div class="paragraph">
<p>or the equivalent</p>
</div>
<div id="VkCopyImageToBufferInfo2KHR" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_KHR_copy_commands2
typedef VkCopyImageToBufferInfo2 VkCopyImageToBufferInfo2KHR;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is a <a href="fundamentals.html#VkStructureType" class="xref page">VkStructureType</a> value identifying this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>srcImage</code> is the source image.</p>
</li>
<li>
<p><code>srcImageLayout</code> is the layout of the source image subresources for
the copy.</p>
</li>
<li>
<p><code>dstBuffer</code> is the destination buffer.</p>
</li>
<li>
<p><code>regionCount</code> is the number of regions to copy.</p>
</li>
<li>
<p><code>pRegions</code> is a pointer to an array of <a href="#VkBufferImageCopy2">VkBufferImageCopy2</a>
structures specifying the regions to copy.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkCopyImageToBufferInfo2-pRegions-04566" href="#VUID-VkCopyImageToBufferInfo2-pRegions-04566"></a> <span class="vuid">VUID-VkCopyImageToBufferInfo2-pRegions-04566</span><br>

If the image region specified by each element of <code>pRegions</code> does not
contain <a href="#VkCopyCommandTransformInfoQCOM">VkCopyCommandTransformInfoQCOM</a> in its <code>pNext</code> chain,
it <strong>must</strong> be contained within the specified <code>imageSubresource</code> of
<code>srcImage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageToBufferInfo2KHR-pRegions-04557" href="#VUID-VkCopyImageToBufferInfo2KHR-pRegions-04557"></a> <span class="vuid">VUID-VkCopyImageToBufferInfo2KHR-pRegions-04557</span><br>

If the image region specified by each element of <code>pRegions</code> contains
<a href="#VkCopyCommandTransformInfoQCOM">VkCopyCommandTransformInfoQCOM</a> in its <code>pNext</code> chain, the
rotated source region as described in
<a href="#copies-buffers-images-rotation-addressing">copies-buffers-images-rotation-addressing</a> <strong>must</strong> be contained within
<code>srcImage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageToBufferInfo2KHR-pRegions-04558" href="#VUID-VkCopyImageToBufferInfo2KHR-pRegions-04558"></a> <span class="vuid">VUID-VkCopyImageToBufferInfo2KHR-pRegions-04558</span><br>

If any element of <code>pRegions</code> contains
<a href="#VkCopyCommandTransformInfoQCOM">VkCopyCommandTransformInfoQCOM</a> in its <code>pNext</code> chain, then
<code>srcImage</code> <strong>must</strong> have a 1x1x1 <a href="formats.html#formats-compatibility-classes" class="xref page">texel    block extent</a></p>
</li>
<li>
<p><a id="VUID-VkCopyImageToBufferInfo2KHR-pRegions-06205" href="#VUID-VkCopyImageToBufferInfo2KHR-pRegions-06205"></a> <span class="vuid">VUID-VkCopyImageToBufferInfo2KHR-pRegions-06205</span><br>

If any element of <code>pRegions</code> contains
<a href="#VkCopyCommandTransformInfoQCOM">VkCopyCommandTransformInfoQCOM</a> in its <code>pNext</code> chain, then
<code>srcImage</code> <strong>must</strong> be of type <code>VK_IMAGE_TYPE_2D</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageToBufferInfo2KHR-pRegions-06206" href="#VUID-VkCopyImageToBufferInfo2KHR-pRegions-06206"></a> <span class="vuid">VUID-VkCopyImageToBufferInfo2KHR-pRegions-06206</span><br>

If any element of <code>pRegions</code> contains
<a href="#VkCopyCommandTransformInfoQCOM">VkCopyCommandTransformInfoQCOM</a> in its <code>pNext</code> chain, then
<code>srcImage</code> <strong>must</strong> not have a
<a href="formats.html#formats-requiring-sampler-ycbcr-conversion" class="xref page">multi-planar format</a></p>
</li>
</ul>
</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkCopyImageToBufferInfo2-pRegions-00183" href="#VUID-VkCopyImageToBufferInfo2-pRegions-00183"></a> <span class="vuid">VUID-VkCopyImageToBufferInfo2-pRegions-00183</span><br>

<code>dstBuffer</code> <strong>must</strong> be large enough to contain all buffer locations
that are accessed according to <a href="#copies-buffers-images-addressing">Buffer    and Image Addressing</a>, for each element of <code>pRegions</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageToBufferInfo2-pRegions-00184" href="#VUID-VkCopyImageToBufferInfo2-pRegions-00184"></a> <span class="vuid">VUID-VkCopyImageToBufferInfo2-pRegions-00184</span><br>

The union of all source regions, and the union of all destination
regions, specified by the elements of <code>pRegions</code>, <strong>must</strong> not overlap
in memory</p>
</li>
<li>
<p><a id="VUID-VkCopyImageToBufferInfo2-srcImage-00186" href="#VUID-VkCopyImageToBufferInfo2-srcImage-00186"></a> <span class="vuid">VUID-VkCopyImageToBufferInfo2-srcImage-00186</span><br>

<code>srcImage</code> <strong>must</strong> have been created with
<code>VK_IMAGE_USAGE_TRANSFER_SRC_BIT</code> usage flag</p>
</li>
<li>
<p><a id="VUID-VkCopyImageToBufferInfo2-srcImage-01998" href="#VUID-VkCopyImageToBufferInfo2-srcImage-01998"></a> <span class="vuid">VUID-VkCopyImageToBufferInfo2-srcImage-01998</span><br>

The <a href="resources.html#resources-image-format-features" class="xref page">format features</a> of
<code>srcImage</code> <strong>must</strong> contain <code>VK_FORMAT_FEATURE_TRANSFER_SRC_BIT</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageToBufferInfo2-dstBuffer-00191" href="#VUID-VkCopyImageToBufferInfo2-dstBuffer-00191"></a> <span class="vuid">VUID-VkCopyImageToBufferInfo2-dstBuffer-00191</span><br>

<code>dstBuffer</code> <strong>must</strong> have been created with
<code>VK_BUFFER_USAGE_TRANSFER_DST_BIT</code> usage flag</p>
</li>
<li>
<p><a id="VUID-VkCopyImageToBufferInfo2-dstBuffer-00192" href="#VUID-VkCopyImageToBufferInfo2-dstBuffer-00192"></a> <span class="vuid">VUID-VkCopyImageToBufferInfo2-dstBuffer-00192</span><br>

If <code>dstBuffer</code> is non-sparse then it <strong>must</strong> be bound completely and
contiguously to a single <code>VkDeviceMemory</code> object</p>
</li>
<li>
<p><a id="VUID-VkCopyImageToBufferInfo2-srcImageLayout-00189" href="#VUID-VkCopyImageToBufferInfo2-srcImageLayout-00189"></a> <span class="vuid">VUID-VkCopyImageToBufferInfo2-srcImageLayout-00189</span><br>

<code>srcImageLayout</code> <strong>must</strong> specify the layout of the image subresources
of <code>srcImage</code> specified in <code>pRegions</code> at the time this command
is executed on a <code>VkDevice</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageToBufferInfo2-srcImageLayout-01397" href="#VUID-VkCopyImageToBufferInfo2-srcImageLayout-01397"></a> <span class="vuid">VUID-VkCopyImageToBufferInfo2-srcImageLayout-01397</span><br>

<code>srcImageLayout</code> <strong>must</strong> be
<code>VK_IMAGE_LAYOUT_TRANSFER_SRC_OPTIMAL</code>,
<code>VK_IMAGE_LAYOUT_GENERAL</code>, or
<code>VK_IMAGE_LAYOUT_SHARED_PRESENT_KHR</code></p>
</li>
</ul>
</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkCopyImageToBufferInfo2-srcImage-07966" href="#VUID-VkCopyImageToBufferInfo2-srcImage-07966"></a> <span class="vuid">VUID-VkCopyImageToBufferInfo2-srcImage-07966</span><br>

If <code>srcImage</code> is non-sparse then the image or the specified
<em>disjoint</em> plane <strong>must</strong> be bound completely and contiguously to a single
<code>VkDeviceMemory</code> object</p>
</li>
<li>
<p><a id="VUID-VkCopyImageToBufferInfo2-imageSubresource-07967" href="#VUID-VkCopyImageToBufferInfo2-imageSubresource-07967"></a> <span class="vuid">VUID-VkCopyImageToBufferInfo2-imageSubresource-07967</span><br>

The <code>imageSubresource.mipLevel</code> member of each element of
<code>pRegions</code> <strong>must</strong> be less than the <code>mipLevels</code> specified in
<a href="resources.html#VkImageCreateInfo" class="xref page">VkImageCreateInfo</a> when <code>srcImage</code> was created</p>
</li>
<li>
<p><a id="VUID-VkCopyImageToBufferInfo2-imageSubresource-07968" href="#VUID-VkCopyImageToBufferInfo2-imageSubresource-07968"></a> <span class="vuid">VUID-VkCopyImageToBufferInfo2-imageSubresource-07968</span><br>

The <span class="eq"><code>imageSubresource.baseArrayLayer</code> + 
<code>imageSubresource.layerCount</code></span> of each element of <code>pRegions</code>
, if <code>imageSubresource.layerCount</code> is not
<code>VK_REMAINING_ARRAY_LAYERS</code> and <a href="features.html#features-maintenance5" class="xref page">    <code>maintenance5</code></a> is not enabled,
<strong>must</strong> be less than or equal to the <code>arrayLayers</code> specified in
<a href="resources.html#VkImageCreateInfo" class="xref page">VkImageCreateInfo</a> when <code>srcImage</code> was created</p>
</li>
<li>
<p><a id="VUID-VkCopyImageToBufferInfo2-srcImage-07969" href="#VUID-VkCopyImageToBufferInfo2-srcImage-07969"></a> <span class="vuid">VUID-VkCopyImageToBufferInfo2-srcImage-07969</span><br>

<code>srcImage</code> <strong>must</strong> not have been created with <code>flags</code>
containing <code>VK_IMAGE_CREATE_SUBSAMPLED_BIT_EXT</code></p>
</li>
</ul>
</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkCopyImageToBufferInfo2-srcImage-07973" href="#VUID-VkCopyImageToBufferInfo2-srcImage-07973"></a> <span class="vuid">VUID-VkCopyImageToBufferInfo2-srcImage-07973</span><br>

<code>srcImage</code> <strong>must</strong> have a sample count equal to
<code>VK_SAMPLE_COUNT_1_BIT</code></p>
</li>
</ul>
</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkCopyImageToBufferInfo2-srcImage-07979" href="#VUID-VkCopyImageToBufferInfo2-srcImage-07979"></a> <span class="vuid">VUID-VkCopyImageToBufferInfo2-srcImage-07979</span><br>

If <code>srcImage</code> is of type <code>VK_IMAGE_TYPE_1D</code>, then for each
element of <code>pRegions</code>, <code>imageOffset.y</code> <strong>must</strong> be <code>0</code> and
<code>imageExtent.height</code> <strong>must</strong> be <code>1</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageToBufferInfo2-imageOffset-09104" href="#VUID-VkCopyImageToBufferInfo2-imageOffset-09104"></a> <span class="vuid">VUID-VkCopyImageToBufferInfo2-imageOffset-09104</span><br>

For each element of <code>pRegions</code>, <code>imageOffset.z</code> and
<span class="eq">(<code>imageExtent.depth</code> +  <code>imageOffset.z</code>)</span> <strong>must</strong>
both be greater than or equal to <code>0</code> and less than or equal to the depth
of the specified <code>imageSubresource</code> of <code>srcImage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageToBufferInfo2-srcImage-07980" href="#VUID-VkCopyImageToBufferInfo2-srcImage-07980"></a> <span class="vuid">VUID-VkCopyImageToBufferInfo2-srcImage-07980</span><br>

If <code>srcImage</code> is of type <code>VK_IMAGE_TYPE_1D</code> or
<code>VK_IMAGE_TYPE_2D</code>, then for each element of <code>pRegions</code>,
<code>imageOffset.z</code> <strong>must</strong> be <code>0</code> and <code>imageExtent.depth</code> <strong>must</strong>
be <code>1</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageToBufferInfo2-srcImage-07274" href="#VUID-VkCopyImageToBufferInfo2-srcImage-07274"></a> <span class="vuid">VUID-VkCopyImageToBufferInfo2-srcImage-07274</span><br>

For each element of <code>pRegions</code>, <code>imageOffset.x</code> <strong>must</strong> be a
multiple of the <a href="formats.html#formats-compatibility-classes" class="xref page">texel block extent    width</a> of the <a href="formats.html#VkFormat" class="xref page">VkFormat</a> of <code>srcImage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageToBufferInfo2-srcImage-07275" href="#VUID-VkCopyImageToBufferInfo2-srcImage-07275"></a> <span class="vuid">VUID-VkCopyImageToBufferInfo2-srcImage-07275</span><br>

For each element of <code>pRegions</code>, <code>imageOffset.y</code> <strong>must</strong> be a
multiple of the <a href="formats.html#formats-compatibility-classes" class="xref page">texel block extent    height</a> of the <a href="formats.html#VkFormat" class="xref page">VkFormat</a> of <code>srcImage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageToBufferInfo2-srcImage-07276" href="#VUID-VkCopyImageToBufferInfo2-srcImage-07276"></a> <span class="vuid">VUID-VkCopyImageToBufferInfo2-srcImage-07276</span><br>

For each element of <code>pRegions</code>, <code>imageOffset.z</code> <strong>must</strong> be a
multiple of the <a href="formats.html#formats-compatibility-classes" class="xref page">texel block extent    depth</a> of the <a href="formats.html#VkFormat" class="xref page">VkFormat</a> of <code>srcImage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageToBufferInfo2-srcImage-00207" href="#VUID-VkCopyImageToBufferInfo2-srcImage-00207"></a> <span class="vuid">VUID-VkCopyImageToBufferInfo2-srcImage-00207</span><br>

For each element of <code>pRegions</code>, if the sum of <code>imageOffset.x</code>
and <code>extent.width</code> does not equal the width of the subresource
specified by <code>srcSubresource</code>, <code>extent.width</code> <strong>must</strong> be a
multiple of the <a href="formats.html#formats-compatibility-classes" class="xref page">texel block extent    width</a> of the <a href="formats.html#VkFormat" class="xref page">VkFormat</a> of <code>srcImage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageToBufferInfo2-srcImage-00208" href="#VUID-VkCopyImageToBufferInfo2-srcImage-00208"></a> <span class="vuid">VUID-VkCopyImageToBufferInfo2-srcImage-00208</span><br>

For each element of <code>pRegions</code>, if the sum of <code>imageOffset.y</code>
and <code>extent.height</code> does not equal the height of the subresource
specified by <code>srcSubresource</code>, <code>extent.height</code> <strong>must</strong> be a
multiple of the <a href="formats.html#formats-compatibility-classes" class="xref page">texel block extent    height</a> of the <a href="formats.html#VkFormat" class="xref page">VkFormat</a> of <code>srcImage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageToBufferInfo2-srcImage-00209" href="#VUID-VkCopyImageToBufferInfo2-srcImage-00209"></a> <span class="vuid">VUID-VkCopyImageToBufferInfo2-srcImage-00209</span><br>

For each element of <code>pRegions</code>, if the sum of <code>imageOffset.z</code>
and <code>extent.depth</code> does not equal the depth of the subresource
specified by <code>srcSubresource</code>, <code>extent.depth</code> <strong>must</strong> be a
multiple of the <a href="formats.html#formats-compatibility-classes" class="xref page">texel block extent    depth</a> of the <a href="formats.html#VkFormat" class="xref page">VkFormat</a> of <code>srcImage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageToBufferInfo2-imageSubresource-09105" href="#VUID-VkCopyImageToBufferInfo2-imageSubresource-09105"></a> <span class="vuid">VUID-VkCopyImageToBufferInfo2-imageSubresource-09105</span><br>

For each element of <code>pRegions</code>, <code>imageSubresource.aspectMask</code>
<strong>must</strong> specify aspects present in <code>srcImage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageToBufferInfo2-srcImage-07981" href="#VUID-VkCopyImageToBufferInfo2-srcImage-07981"></a> <span class="vuid">VUID-VkCopyImageToBufferInfo2-srcImage-07981</span><br>

If <code>srcImage</code> has a
<a href="formats.html#formats-requiring-sampler-ycbcr-conversion" class="xref page">multi-planar image    format</a>, then for each element of <code>pRegions</code>,
<code>imageSubresource.aspectMask</code> <strong>must</strong> be a single valid
<a href="formats.html#formats-planes-image-aspect" class="xref page">multi-planar aspect mask</a> bit</p>
</li>
<li>
<p><a id="VUID-VkCopyImageToBufferInfo2-srcImage-07983" href="#VUID-VkCopyImageToBufferInfo2-srcImage-07983"></a> <span class="vuid">VUID-VkCopyImageToBufferInfo2-srcImage-07983</span><br>

If <code>srcImage</code> is of type <code>VK_IMAGE_TYPE_3D</code>, for each
element of <code>pRegions</code>, <code>imageSubresource.baseArrayLayer</code> <strong>must</strong>
be <code>0</code> and <code>imageSubresource.layerCount</code> <strong>must</strong> be <code>1</code></p>
</li>
</ul>
</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkCopyImageToBufferInfo2-bufferRowLength-09106" href="#VUID-VkCopyImageToBufferInfo2-bufferRowLength-09106"></a> <span class="vuid">VUID-VkCopyImageToBufferInfo2-bufferRowLength-09106</span><br>

For each element of <code>pRegions</code>, <code>bufferRowLength</code> <strong>must</strong> be a
multiple of the <a href="formats.html#formats-compatibility-classes" class="xref page">texel block extent    width</a> of the <a href="formats.html#VkFormat" class="xref page">VkFormat</a> of <code>srcImage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageToBufferInfo2-bufferImageHeight-09107" href="#VUID-VkCopyImageToBufferInfo2-bufferImageHeight-09107"></a> <span class="vuid">VUID-VkCopyImageToBufferInfo2-bufferImageHeight-09107</span><br>

For each element of <code>pRegions</code>, <code>bufferImageHeight</code> <strong>must</strong> be a
multiple of the <a href="formats.html#formats-compatibility-classes" class="xref page">texel block extent    height</a> of the <a href="formats.html#VkFormat" class="xref page">VkFormat</a> of <code>srcImage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageToBufferInfo2-bufferRowLength-09108" href="#VUID-VkCopyImageToBufferInfo2-bufferRowLength-09108"></a> <span class="vuid">VUID-VkCopyImageToBufferInfo2-bufferRowLength-09108</span><br>

For each element of <code>pRegions</code>, <code>bufferRowLength</code> divided by
the <a href="formats.html#formats-compatibility-classes" class="xref page">texel block extent width</a> and then
multiplied by the texel block size of <code>srcImage</code> <strong>must</strong> be less
than or equal to <span class="eq">2<sup>31</sup>-1</span></p>
</li>
</ul>
</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkCopyImageToBufferInfo2-srcImage-07975" href="#VUID-VkCopyImageToBufferInfo2-srcImage-07975"></a> <span class="vuid">VUID-VkCopyImageToBufferInfo2-srcImage-07975</span><br>

If <code>srcImage</code> does not have either a depth/stencil or a
<a href="formats.html#formats-requiring-sampler-ycbcr-conversion" class="xref page">multi-planar format</a>, then
for each element of <code>pRegions</code>, <code>bufferOffset</code> <strong>must</strong> be a
multiple of the <a href="formats.html#formats-compatibility-classes" class="xref page">texel block size</a></p>
</li>
<li>
<p><a id="VUID-VkCopyImageToBufferInfo2-srcImage-07976" href="#VUID-VkCopyImageToBufferInfo2-srcImage-07976"></a> <span class="vuid">VUID-VkCopyImageToBufferInfo2-srcImage-07976</span><br>

If <code>srcImage</code> has a
<a href="formats.html#formats-requiring-sampler-ycbcr-conversion" class="xref page">multi-planar format</a>, then
for each element of <code>pRegions</code>, <code>bufferOffset</code> <strong>must</strong> be a
multiple of the element size of the compatible format for the format and
the <code>aspectMask</code> of the <code>imageSubresource</code> as defined in
<a href="formats.html#formats-compatible-planes" class="xref page">Compatible formats of planes of multi-planar formats</a></p>
</li>
<li>
<p><a id="VUID-VkCopyImageToBufferInfo2-srcImage-07978" href="#VUID-VkCopyImageToBufferInfo2-srcImage-07978"></a> <span class="vuid">VUID-VkCopyImageToBufferInfo2-srcImage-07978</span><br>

If <code>srcImage</code> has a depth/stencil format, the <code>bufferOffset</code>
member of any element of <code>pRegions</code> <strong>must</strong> be a multiple of <code>4</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageToBufferInfo2-imageOffset-00197" href="#VUID-VkCopyImageToBufferInfo2-imageOffset-00197"></a> <span class="vuid">VUID-VkCopyImageToBufferInfo2-imageOffset-00197</span><br>

For each element of <code>pRegions</code> not containing
<code>VkCopyCommandTransformInfoQCOM</code> in its <code>pNext</code> chain,
<code>imageOffset.x</code> and <span class="eq">(<code>imageExtent.width</code> + 
<code>imageOffset.x</code>)</span> <strong>must</strong> both be greater than or equal to <code>0</code> and
less than or equal to the width of the specified <code>imageSubresource</code>
of <code>srcImage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageToBufferInfo2-imageOffset-00198" href="#VUID-VkCopyImageToBufferInfo2-imageOffset-00198"></a> <span class="vuid">VUID-VkCopyImageToBufferInfo2-imageOffset-00198</span><br>

For each element of <code>pRegions</code> not containing
<code>VkCopyCommandTransformInfoQCOM</code> in its <code>pNext</code> chain,
<code>imageOffset.y</code> and <span class="eq">(<code>imageExtent.height</code> + 
<code>imageOffset.y</code>)</span> <strong>must</strong> both be greater than or equal to <code>0</code> and
less than or equal to the height of the specified <code>imageSubresource</code>
of <code>srcImage</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkCopyImageToBufferInfo2-sType-sType" href="#VUID-VkCopyImageToBufferInfo2-sType-sType"></a> <span class="vuid">VUID-VkCopyImageToBufferInfo2-sType-sType</span><br>
 <code>sType</code> <strong>must</strong> be <code>VK_STRUCTURE_TYPE_COPY_IMAGE_TO_BUFFER_INFO_2</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageToBufferInfo2-pNext-pNext" href="#VUID-VkCopyImageToBufferInfo2-pNext-pNext"></a> <span class="vuid">VUID-VkCopyImageToBufferInfo2-pNext-pNext</span><br>
 <code>pNext</code> <strong>must</strong> be <code>NULL</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageToBufferInfo2-srcImage-parameter" href="#VUID-VkCopyImageToBufferInfo2-srcImage-parameter"></a> <span class="vuid">VUID-VkCopyImageToBufferInfo2-srcImage-parameter</span><br>
 <code>srcImage</code> <strong>must</strong> be a valid <a href="resources.html#VkImage" class="xref page">VkImage</a> handle</p>
</li>
<li>
<p><a id="VUID-VkCopyImageToBufferInfo2-srcImageLayout-parameter" href="#VUID-VkCopyImageToBufferInfo2-srcImageLayout-parameter"></a> <span class="vuid">VUID-VkCopyImageToBufferInfo2-srcImageLayout-parameter</span><br>
 <code>srcImageLayout</code> <strong>must</strong> be a valid <a href="resources.html#VkImageLayout" class="xref page">VkImageLayout</a> value</p>
</li>
<li>
<p><a id="VUID-VkCopyImageToBufferInfo2-dstBuffer-parameter" href="#VUID-VkCopyImageToBufferInfo2-dstBuffer-parameter"></a> <span class="vuid">VUID-VkCopyImageToBufferInfo2-dstBuffer-parameter</span><br>
 <code>dstBuffer</code> <strong>must</strong> be a valid <a href="resources.html#VkBuffer" class="xref page">VkBuffer</a> handle</p>
</li>
<li>
<p><a id="VUID-VkCopyImageToBufferInfo2-pRegions-parameter" href="#VUID-VkCopyImageToBufferInfo2-pRegions-parameter"></a> <span class="vuid">VUID-VkCopyImageToBufferInfo2-pRegions-parameter</span><br>
 <code>pRegions</code> <strong>must</strong> be a valid pointer to an array of <code>regionCount</code> valid <a href="#VkBufferImageCopy2">VkBufferImageCopy2</a> structures</p>
</li>
<li>
<p><a id="VUID-VkCopyImageToBufferInfo2-regionCount-arraylength" href="#VUID-VkCopyImageToBufferInfo2-regionCount-arraylength"></a> <span class="vuid">VUID-VkCopyImageToBufferInfo2-regionCount-arraylength</span><br>
 <code>regionCount</code> <strong>must</strong> be greater than <code>0</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageToBufferInfo2-commonparent" href="#VUID-VkCopyImageToBufferInfo2-commonparent"></a> <span class="vuid">VUID-VkCopyImageToBufferInfo2-commonparent</span><br>
 Both of <code>dstBuffer</code>, and <code>srcImage</code> <strong>must</strong> have been created, allocated, or retrieved from the same <a href="devsandqueues.html#VkDevice" class="xref page">VkDevice</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>For both <a href="#vkCmdCopyBufferToImage2">vkCmdCopyBufferToImage2</a> and <a href="#vkCmdCopyImageToBuffer2">vkCmdCopyImageToBuffer2</a>,
each element of <code>pRegions</code> is a structure defined as:</p>
</div>
<div id="VkBufferImageCopy2" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_VERSION_1_3
typedef struct VkBufferImageCopy2 {
    VkStructureType             sType;
    const void*                 pNext;
    VkDeviceSize                bufferOffset;
    uint32_t                    bufferRowLength;
    uint32_t                    bufferImageHeight;
    VkImageSubresourceLayers    imageSubresource;
    VkOffset3D                  imageOffset;
    VkExtent3D                  imageExtent;
} VkBufferImageCopy2;</code></pre>
</div>
</div>
<div class="paragraph">
<p>or the equivalent</p>
</div>
<div id="VkBufferImageCopy2KHR" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_KHR_copy_commands2
typedef VkBufferImageCopy2 VkBufferImageCopy2KHR;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is a <a href="fundamentals.html#VkStructureType" class="xref page">VkStructureType</a> value identifying this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>bufferOffset</code> is the offset in bytes from the start of the buffer
object where the image data is copied from or to.</p>
</li>
<li>
<p><code>bufferRowLength</code> and <code>bufferImageHeight</code> specify in texels a
subregion of a larger two- or three-dimensional image in buffer memory,
and control the addressing calculations.
If either of these values is zero, that aspect of the buffer memory is
considered to be tightly packed according to the <code>imageExtent</code>.</p>
</li>
<li>
<p><code>imageSubresource</code> is a <a href="#VkImageSubresourceLayers">VkImageSubresourceLayers</a> used to
specify the specific image subresources of the image used for the source
or destination image data.</p>
</li>
<li>
<p><code>imageOffset</code> selects the initial <code>x</code>, <code>y</code>, <code>z</code> offsets
in texels of the sub-region of the source or destination image data.</p>
</li>
<li>
<p><code>imageExtent</code> is the size in texels of the image to copy in
<code>width</code>, <code>height</code> and <code>depth</code>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>This structure is functionally identical to <a href="#VkBufferImageCopy">VkBufferImageCopy</a>, but
adds <code>sType</code> and <code>pNext</code> parameters, allowing it to be more easily
extended.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkBufferImageCopy2-bufferRowLength-09101" href="#VUID-VkBufferImageCopy2-bufferRowLength-09101"></a> <span class="vuid">VUID-VkBufferImageCopy2-bufferRowLength-09101</span><br>

<code>bufferRowLength</code> <strong>must</strong> be <code>0</code>, or greater than or equal to the
<code>width</code> member of <code>imageExtent</code></p>
</li>
<li>
<p><a id="VUID-VkBufferImageCopy2-bufferImageHeight-09102" href="#VUID-VkBufferImageCopy2-bufferImageHeight-09102"></a> <span class="vuid">VUID-VkBufferImageCopy2-bufferImageHeight-09102</span><br>

<code>bufferImageHeight</code> <strong>must</strong> be <code>0</code>, or greater than or equal to the
<code>height</code> member of <code>imageExtent</code></p>
</li>
<li>
<p><a id="VUID-VkBufferImageCopy2-aspectMask-09103" href="#VUID-VkBufferImageCopy2-aspectMask-09103"></a> <span class="vuid">VUID-VkBufferImageCopy2-aspectMask-09103</span><br>

The <code>aspectMask</code> member of <code>imageSubresource</code> <strong>must</strong> only have a
single bit set</p>
</li>
<li>
<p><a id="VUID-VkBufferImageCopy2-imageExtent-06659" href="#VUID-VkBufferImageCopy2-imageExtent-06659"></a> <span class="vuid">VUID-VkBufferImageCopy2-imageExtent-06659</span><br>

<code>imageExtent.width</code> <strong>must</strong> not be 0</p>
</li>
<li>
<p><a id="VUID-VkBufferImageCopy2-imageExtent-06660" href="#VUID-VkBufferImageCopy2-imageExtent-06660"></a> <span class="vuid">VUID-VkBufferImageCopy2-imageExtent-06660</span><br>

<code>imageExtent.height</code> <strong>must</strong> not be 0</p>
</li>
<li>
<p><a id="VUID-VkBufferImageCopy2-imageExtent-06661" href="#VUID-VkBufferImageCopy2-imageExtent-06661"></a> <span class="vuid">VUID-VkBufferImageCopy2-imageExtent-06661</span><br>

<code>imageExtent.depth</code> <strong>must</strong> not be 0</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkBufferImageCopy2-sType-sType" href="#VUID-VkBufferImageCopy2-sType-sType"></a> <span class="vuid">VUID-VkBufferImageCopy2-sType-sType</span><br>
 <code>sType</code> <strong>must</strong> be <code>VK_STRUCTURE_TYPE_BUFFER_IMAGE_COPY_2</code></p>
</li>
<li>
<p><a id="VUID-VkBufferImageCopy2-pNext-pNext" href="#VUID-VkBufferImageCopy2-pNext-pNext"></a> <span class="vuid">VUID-VkBufferImageCopy2-pNext-pNext</span><br>
 <code>pNext</code> <strong>must</strong> be <code>NULL</code> or a pointer to a valid instance of <a href="#VkCopyCommandTransformInfoQCOM">VkCopyCommandTransformInfoQCOM</a></p>
</li>
<li>
<p><a id="VUID-VkBufferImageCopy2-sType-unique" href="#VUID-VkBufferImageCopy2-sType-unique"></a> <span class="vuid">VUID-VkBufferImageCopy2-sType-unique</span><br>
 The <code>sType</code> value of each struct in the <code>pNext</code> chain <strong>must</strong> be unique</p>
</li>
<li>
<p><a id="VUID-VkBufferImageCopy2-imageSubresource-parameter" href="#VUID-VkBufferImageCopy2-imageSubresource-parameter"></a> <span class="vuid">VUID-VkBufferImageCopy2-imageSubresource-parameter</span><br>
 <code>imageSubresource</code> <strong>must</strong> be a valid <a href="#VkImageSubresourceLayers">VkImageSubresourceLayers</a> structure</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>VkCopyCommandTransformInfoQCOM</code> structure is defined as:</p>
</div>
<div id="VkCopyCommandTransformInfoQCOM" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_QCOM_rotated_copy_commands
typedef struct VkCopyCommandTransformInfoQCOM {
    VkStructureType                  sType;
    const void*                      pNext;
    VkSurfaceTransformFlagBitsKHR    transform;
} VkCopyCommandTransformInfoQCOM;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is a <a href="fundamentals.html#VkStructureType" class="xref page">VkStructureType</a> value identifying this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>transform</code> is a <a href="VK_KHR_surface/wsi.html#VkSurfaceTransformFlagBitsKHR" class="xref page">VkSurfaceTransformFlagBitsKHR</a> value
describing the transform to be applied.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Including this structure in the <code>pNext</code> chain of
<a href="#VkBufferImageCopy2">VkBufferImageCopy2</a> defines a rotation to be performed when copying
between an image and a buffer.
Including this structure in the <code>pNext</code> chain of <a href="#VkBlitImageInfo2">VkBlitImageInfo2</a>
defines a rotation to be performed when blitting between two images.
If this structure is not specified in either case, the implementation
behaves as if it was specified with a <code>transform</code> equal to
<code>VK_SURFACE_TRANSFORM_IDENTITY_BIT_KHR</code>.</p>
</div>
<div class="paragraph">
<p>Specifying a transform for a copy between an image and a buffer
<a href="#copies-buffers-images-rotation-addressing">rotates the region accessed inthe image around the offset</a>.
Specifying a transform for a blit performs a similar transform as described
in <a href="#copies-images-scaling-rotation">Image Blits with Scaling andRotation</a>.</p>
</div>
<div class="paragraph">
<p>Rotations other than <code>VK_SURFACE_TRANSFORM_IDENTITY_BIT_KHR</code> <strong>can</strong> only
be specified for single-plane 2D images with a 1x1x1
<a href="formats.html#formats-compatibility-classes" class="xref page">texel block extent</a>.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkCopyCommandTransformInfoQCOM-transform-04560" href="#VUID-VkCopyCommandTransformInfoQCOM-transform-04560"></a> <span class="vuid">VUID-VkCopyCommandTransformInfoQCOM-transform-04560</span><br>

<code>transform</code> <strong>must</strong> be <code>VK_SURFACE_TRANSFORM_IDENTITY_BIT_KHR</code>,
<code>VK_SURFACE_TRANSFORM_ROTATE_90_BIT_KHR</code>,
<code>VK_SURFACE_TRANSFORM_ROTATE_180_BIT_KHR</code>, or
<code>VK_SURFACE_TRANSFORM_ROTATE_270_BIT_KHR</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkCopyCommandTransformInfoQCOM-sType-sType" href="#VUID-VkCopyCommandTransformInfoQCOM-sType-sType"></a> <span class="vuid">VUID-VkCopyCommandTransformInfoQCOM-sType-sType</span><br>
 <code>sType</code> <strong>must</strong> be <code>VK_STRUCTURE_TYPE_COPY_COMMAND_TRANSFORM_INFO_QCOM</code></p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>The following commands can be used to copy between host memory and images.</p>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>To copy data from host memory to an image object, call:</p>
</div>
<div id="vkCopyMemoryToImageEXT" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_EXT_host_image_copy
VkResult vkCopyMemoryToImageEXT(
    VkDevice                                    device,
    const VkCopyMemoryToImageInfoEXT*           pCopyMemoryToImageInfo);</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>device</code> is the device which owns
<code>pCopyMemoryToImageInfo-&gt;dstImage</code>.</p>
</li>
<li>
<p><code>pCopyMemoryToImageInfo</code> is a pointer to a
<a href="#VkCopyMemoryToImageInfoEXT">VkCopyMemoryToImageInfoEXT</a> structure describing the copy
parameters.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>This command is functionally similar to <a href="#vkCmdCopyBufferToImage2">vkCmdCopyBufferToImage2</a>,
except it is executed on the host and reads from host memory instead of a
buffer.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCopyMemoryToImageEXT-hostImageCopy-09058" href="#VUID-vkCopyMemoryToImageEXT-hostImageCopy-09058"></a> <span class="vuid">VUID-vkCopyMemoryToImageEXT-hostImageCopy-09058</span><br>

The <a href="features.html#features-hostImageCopy" class="xref page"><code>hostImageCopy</code></a> feature <strong>must</strong> be
enabled</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCopyMemoryToImageEXT-device-parameter" href="#VUID-vkCopyMemoryToImageEXT-device-parameter"></a> <span class="vuid">VUID-vkCopyMemoryToImageEXT-device-parameter</span><br>
 <code>device</code> <strong>must</strong> be a valid <a href="devsandqueues.html#VkDevice" class="xref page">VkDevice</a> handle</p>
</li>
<li>
<p><a id="VUID-vkCopyMemoryToImageEXT-pCopyMemoryToImageInfo-parameter" href="#VUID-vkCopyMemoryToImageEXT-pCopyMemoryToImageInfo-parameter"></a> <span class="vuid">VUID-vkCopyMemoryToImageEXT-pCopyMemoryToImageInfo-parameter</span><br>
 <code>pCopyMemoryToImageInfo</code> <strong>must</strong> be a valid pointer to a valid <a href="#VkCopyMemoryToImageInfoEXT">VkCopyMemoryToImageInfoEXT</a> structure</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Return Codes</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><a href="fundamentals.html#fundamentals-successcodes" class="xref page">Success</a></dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><code>VK_SUCCESS</code></p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1"><a href="fundamentals.html#fundamentals-errorcodes" class="xref page">Failure</a></dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><code>VK_ERROR_INITIALIZATION_FAILED</code></p>
</li>
<li>
<p><code>VK_ERROR_OUT_OF_HOST_MEMORY</code></p>
</li>
<li>
<p><code>VK_ERROR_OUT_OF_DEVICE_MEMORY</code></p>
</li>
<li>
<p><code>VK_ERROR_MEMORY_MAP_FAILED</code></p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>VkCopyMemoryToImageInfoEXT</code> structure is defined as:</p>
</div>
<div id="VkCopyMemoryToImageInfoEXT" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_EXT_host_image_copy
typedef struct VkCopyMemoryToImageInfoEXT {
    VkStructureType                  sType;
    const void*                      pNext;
    VkHostImageCopyFlagsEXT          flags;
    VkImage                          dstImage;
    VkImageLayout                    dstImageLayout;
    uint32_t                         regionCount;
    const VkMemoryToImageCopyEXT*    pRegions;
} VkCopyMemoryToImageInfoEXT;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is a <a href="fundamentals.html#VkStructureType" class="xref page">VkStructureType</a> value identifying this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>flags</code> is a bitmask of <a href="#VkHostImageCopyFlagBitsEXT">VkHostImageCopyFlagBitsEXT</a> values
describing additional copy parameters.</p>
</li>
<li>
<p><code>dstImage</code> is the destination image.</p>
</li>
<li>
<p><code>dstImageLayout</code> is the layout of the destination image subresources
for the copy.</p>
</li>
<li>
<p><code>regionCount</code> is the number of regions to copy.</p>
</li>
<li>
<p><code>pRegions</code> is a pointer to an array of <a href="#VkMemoryToImageCopyEXT">VkMemoryToImageCopyEXT</a>
structures specifying the regions to copy.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><code>vkCopyMemoryToImageEXT</code> does not check whether the device memory
associated with <code>dstImage</code> is currently in use before performing the
copy.
The application <strong>must</strong> guarantee that any previously submitted command that
reads from or writes to the copy regions has completed before the host
performs the copy.</p>
</div>
<div class="paragraph">
<p>Copy regions for the image <strong>must</strong> be aligned to a multiple of the texel block
extent in each dimension, except at the edges of the image, where region
extents <strong>must</strong> match the edge of the image.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkCopyMemoryToImageInfoEXT-dstImage-09109" href="#VUID-VkCopyMemoryToImageInfoEXT-dstImage-09109"></a> <span class="vuid">VUID-VkCopyMemoryToImageInfoEXT-dstImage-09109</span><br>

If <code>dstImage</code> is sparse then all memory ranges accessed by the
copy command <strong>must</strong> be bound as described in
<a href="sparsemem.html#sparsememory-resource-binding" class="xref page">Binding Resource Memory</a></p>
</li>
<li>
<p><a id="VUID-VkCopyMemoryToImageInfoEXT-dstImage-09111" href="#VUID-VkCopyMemoryToImageInfoEXT-dstImage-09111"></a> <span class="vuid">VUID-VkCopyMemoryToImageInfoEXT-dstImage-09111</span><br>

If the stencil aspect of <code>dstImage</code> is accessed, and
<code>dstImage</code> was not created with
<a href="resources.html#VkImageStencilUsageCreateInfo" class="xref page">separate stencil usage</a>, the image
<strong>must</strong> have been created with <code>VK_IMAGE_USAGE_HOST_TRANSFER_BIT_EXT</code>
set in <a href="resources.html#VkImageCreateInfo" class="xref page">VkImageCreateInfo</a>::<code>usage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyMemoryToImageInfoEXT-dstImage-09112" href="#VUID-VkCopyMemoryToImageInfoEXT-dstImage-09112"></a> <span class="vuid">VUID-VkCopyMemoryToImageInfoEXT-dstImage-09112</span><br>

If the stencil aspect of <code>dstImage</code> is accessed, and
<code>dstImage</code> was created with
<a href="resources.html#VkImageStencilUsageCreateInfo" class="xref page">separate stencil usage</a>, the image
<strong>must</strong> have been created with <code>VK_IMAGE_USAGE_HOST_TRANSFER_BIT_EXT</code>
set in <a href="resources.html#VkImageStencilUsageCreateInfo" class="xref page">VkImageStencilUsageCreateInfo</a>::<code>stencilUsage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyMemoryToImageInfoEXT-dstImage-09113" href="#VUID-VkCopyMemoryToImageInfoEXT-dstImage-09113"></a> <span class="vuid">VUID-VkCopyMemoryToImageInfoEXT-dstImage-09113</span><br>

If non-stencil aspects of <code>dstImage</code> are accessed, the image
<strong>must</strong> have been created with <code>VK_IMAGE_USAGE_HOST_TRANSFER_BIT_EXT</code>
set in <a href="resources.html#VkImageCreateInfo" class="xref page">VkImageCreateInfo</a>::<code>usage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyMemoryToImageInfoEXT-imageOffset-09114" href="#VUID-VkCopyMemoryToImageInfoEXT-imageOffset-09114"></a> <span class="vuid">VUID-VkCopyMemoryToImageInfoEXT-imageOffset-09114</span><br>

If <code>flags</code> contains <code>VK_HOST_IMAGE_COPY_MEMCPY_EXT</code>, the
<code>x</code>, <code>y</code>, and <code>z</code> members of the <code>imageOffset</code> member
of each element of <code>pRegions</code> <strong>must</strong> be <code>0</code></p>
</li>
<li>
<p><a id="VUID-VkCopyMemoryToImageInfoEXT-dstImage-09115" href="#VUID-VkCopyMemoryToImageInfoEXT-dstImage-09115"></a> <span class="vuid">VUID-VkCopyMemoryToImageInfoEXT-dstImage-09115</span><br>

If <code>flags</code> contains <code>VK_HOST_IMAGE_COPY_MEMCPY_EXT</code>, the
<code>imageExtent</code> member of each element of <code>pRegions</code> <strong>must</strong> equal
the extents of <code>dstImage</code> identified by <code>imageSubresource</code></p>
</li>
</ul>
</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkCopyMemoryToImageInfoEXT-dstImage-07966" href="#VUID-VkCopyMemoryToImageInfoEXT-dstImage-07966"></a> <span class="vuid">VUID-VkCopyMemoryToImageInfoEXT-dstImage-07966</span><br>

If <code>dstImage</code> is non-sparse then the image or the specified
<em>disjoint</em> plane <strong>must</strong> be bound completely and contiguously to a single
<code>VkDeviceMemory</code> object</p>
</li>
<li>
<p><a id="VUID-VkCopyMemoryToImageInfoEXT-imageSubresource-07967" href="#VUID-VkCopyMemoryToImageInfoEXT-imageSubresource-07967"></a> <span class="vuid">VUID-VkCopyMemoryToImageInfoEXT-imageSubresource-07967</span><br>

The <code>imageSubresource.mipLevel</code> member of each element of
<code>pRegions</code> <strong>must</strong> be less than the <code>mipLevels</code> specified in
<a href="resources.html#VkImageCreateInfo" class="xref page">VkImageCreateInfo</a> when <code>dstImage</code> was created</p>
</li>
<li>
<p><a id="VUID-VkCopyMemoryToImageInfoEXT-imageSubresource-07968" href="#VUID-VkCopyMemoryToImageInfoEXT-imageSubresource-07968"></a> <span class="vuid">VUID-VkCopyMemoryToImageInfoEXT-imageSubresource-07968</span><br>

The <span class="eq"><code>imageSubresource.baseArrayLayer</code> + 
<code>imageSubresource.layerCount</code></span> of each element of <code>pRegions</code>
, if <code>imageSubresource.layerCount</code> is not
<code>VK_REMAINING_ARRAY_LAYERS</code> and <a href="features.html#features-maintenance5" class="xref page">    <code>maintenance5</code></a> is not enabled,
<strong>must</strong> be less than or equal to the <code>arrayLayers</code> specified in
<a href="resources.html#VkImageCreateInfo" class="xref page">VkImageCreateInfo</a> when <code>dstImage</code> was created</p>
</li>
<li>
<p><a id="VUID-VkCopyMemoryToImageInfoEXT-dstImage-07969" href="#VUID-VkCopyMemoryToImageInfoEXT-dstImage-07969"></a> <span class="vuid">VUID-VkCopyMemoryToImageInfoEXT-dstImage-07969</span><br>

<code>dstImage</code> <strong>must</strong> not have been created with <code>flags</code>
containing <code>VK_IMAGE_CREATE_SUBSAMPLED_BIT_EXT</code></p>
</li>
</ul>
</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkCopyMemoryToImageInfoEXT-imageSubresource-07970" href="#VUID-VkCopyMemoryToImageInfoEXT-imageSubresource-07970"></a> <span class="vuid">VUID-VkCopyMemoryToImageInfoEXT-imageSubresource-07970</span><br>

The image region specified by each element of <code>pRegions</code> <strong>must</strong> be
contained within the specified <code>imageSubresource</code> of
<code>dstImage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyMemoryToImageInfoEXT-imageSubresource-07971" href="#VUID-VkCopyMemoryToImageInfoEXT-imageSubresource-07971"></a> <span class="vuid">VUID-VkCopyMemoryToImageInfoEXT-imageSubresource-07971</span><br>

For each element of <code>pRegions</code>, <code>imageOffset.x</code> and
<span class="eq">(<code>imageExtent.width</code> +  <code>imageOffset.x</code>)</span> <strong>must</strong>
both be greater than or equal to <code>0</code> and less than or equal to the width
of the specified <code>imageSubresource</code> of <code>dstImage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyMemoryToImageInfoEXT-imageSubresource-07972" href="#VUID-VkCopyMemoryToImageInfoEXT-imageSubresource-07972"></a> <span class="vuid">VUID-VkCopyMemoryToImageInfoEXT-imageSubresource-07972</span><br>

For each element of <code>pRegions</code>, <code>imageOffset.y</code> and
<span class="eq">(<code>imageExtent.height</code> +  <code>imageOffset.y</code>)</span> <strong>must</strong>
both be greater than or equal to <code>0</code> and less than or equal to the
height of the specified <code>imageSubresource</code> of <code>dstImage</code></p>
</li>
</ul>
</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkCopyMemoryToImageInfoEXT-dstImage-07973" href="#VUID-VkCopyMemoryToImageInfoEXT-dstImage-07973"></a> <span class="vuid">VUID-VkCopyMemoryToImageInfoEXT-dstImage-07973</span><br>

<code>dstImage</code> <strong>must</strong> have a sample count equal to
<code>VK_SAMPLE_COUNT_1_BIT</code></p>
</li>
</ul>
</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkCopyMemoryToImageInfoEXT-dstImage-07979" href="#VUID-VkCopyMemoryToImageInfoEXT-dstImage-07979"></a> <span class="vuid">VUID-VkCopyMemoryToImageInfoEXT-dstImage-07979</span><br>

If <code>dstImage</code> is of type <code>VK_IMAGE_TYPE_1D</code>, then for each
element of <code>pRegions</code>, <code>imageOffset.y</code> <strong>must</strong> be <code>0</code> and
<code>imageExtent.height</code> <strong>must</strong> be <code>1</code></p>
</li>
<li>
<p><a id="VUID-VkCopyMemoryToImageInfoEXT-imageOffset-09104" href="#VUID-VkCopyMemoryToImageInfoEXT-imageOffset-09104"></a> <span class="vuid">VUID-VkCopyMemoryToImageInfoEXT-imageOffset-09104</span><br>

For each element of <code>pRegions</code>, <code>imageOffset.z</code> and
<span class="eq">(<code>imageExtent.depth</code> +  <code>imageOffset.z</code>)</span> <strong>must</strong>
both be greater than or equal to <code>0</code> and less than or equal to the depth
of the specified <code>imageSubresource</code> of <code>dstImage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyMemoryToImageInfoEXT-dstImage-07980" href="#VUID-VkCopyMemoryToImageInfoEXT-dstImage-07980"></a> <span class="vuid">VUID-VkCopyMemoryToImageInfoEXT-dstImage-07980</span><br>

If <code>dstImage</code> is of type <code>VK_IMAGE_TYPE_1D</code> or
<code>VK_IMAGE_TYPE_2D</code>, then for each element of <code>pRegions</code>,
<code>imageOffset.z</code> <strong>must</strong> be <code>0</code> and <code>imageExtent.depth</code> <strong>must</strong>
be <code>1</code></p>
</li>
<li>
<p><a id="VUID-VkCopyMemoryToImageInfoEXT-dstImage-07274" href="#VUID-VkCopyMemoryToImageInfoEXT-dstImage-07274"></a> <span class="vuid">VUID-VkCopyMemoryToImageInfoEXT-dstImage-07274</span><br>

For each element of <code>pRegions</code>, <code>imageOffset.x</code> <strong>must</strong> be a
multiple of the <a href="formats.html#formats-compatibility-classes" class="xref page">texel block extent    width</a> of the <a href="formats.html#VkFormat" class="xref page">VkFormat</a> of <code>dstImage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyMemoryToImageInfoEXT-dstImage-07275" href="#VUID-VkCopyMemoryToImageInfoEXT-dstImage-07275"></a> <span class="vuid">VUID-VkCopyMemoryToImageInfoEXT-dstImage-07275</span><br>

For each element of <code>pRegions</code>, <code>imageOffset.y</code> <strong>must</strong> be a
multiple of the <a href="formats.html#formats-compatibility-classes" class="xref page">texel block extent    height</a> of the <a href="formats.html#VkFormat" class="xref page">VkFormat</a> of <code>dstImage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyMemoryToImageInfoEXT-dstImage-07276" href="#VUID-VkCopyMemoryToImageInfoEXT-dstImage-07276"></a> <span class="vuid">VUID-VkCopyMemoryToImageInfoEXT-dstImage-07276</span><br>

For each element of <code>pRegions</code>, <code>imageOffset.z</code> <strong>must</strong> be a
multiple of the <a href="formats.html#formats-compatibility-classes" class="xref page">texel block extent    depth</a> of the <a href="formats.html#VkFormat" class="xref page">VkFormat</a> of <code>dstImage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyMemoryToImageInfoEXT-dstImage-00207" href="#VUID-VkCopyMemoryToImageInfoEXT-dstImage-00207"></a> <span class="vuid">VUID-VkCopyMemoryToImageInfoEXT-dstImage-00207</span><br>

For each element of <code>pRegions</code>, if the sum of <code>imageOffset.x</code>
and <code>extent.width</code> does not equal the width of the subresource
specified by <code>srcSubresource</code>, <code>extent.width</code> <strong>must</strong> be a
multiple of the <a href="formats.html#formats-compatibility-classes" class="xref page">texel block extent    width</a> of the <a href="formats.html#VkFormat" class="xref page">VkFormat</a> of <code>dstImage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyMemoryToImageInfoEXT-dstImage-00208" href="#VUID-VkCopyMemoryToImageInfoEXT-dstImage-00208"></a> <span class="vuid">VUID-VkCopyMemoryToImageInfoEXT-dstImage-00208</span><br>

For each element of <code>pRegions</code>, if the sum of <code>imageOffset.y</code>
and <code>extent.height</code> does not equal the height of the subresource
specified by <code>srcSubresource</code>, <code>extent.height</code> <strong>must</strong> be a
multiple of the <a href="formats.html#formats-compatibility-classes" class="xref page">texel block extent    height</a> of the <a href="formats.html#VkFormat" class="xref page">VkFormat</a> of <code>dstImage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyMemoryToImageInfoEXT-dstImage-00209" href="#VUID-VkCopyMemoryToImageInfoEXT-dstImage-00209"></a> <span class="vuid">VUID-VkCopyMemoryToImageInfoEXT-dstImage-00209</span><br>

For each element of <code>pRegions</code>, if the sum of <code>imageOffset.z</code>
and <code>extent.depth</code> does not equal the depth of the subresource
specified by <code>srcSubresource</code>, <code>extent.depth</code> <strong>must</strong> be a
multiple of the <a href="formats.html#formats-compatibility-classes" class="xref page">texel block extent    depth</a> of the <a href="formats.html#VkFormat" class="xref page">VkFormat</a> of <code>dstImage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyMemoryToImageInfoEXT-imageSubresource-09105" href="#VUID-VkCopyMemoryToImageInfoEXT-imageSubresource-09105"></a> <span class="vuid">VUID-VkCopyMemoryToImageInfoEXT-imageSubresource-09105</span><br>

For each element of <code>pRegions</code>, <code>imageSubresource.aspectMask</code>
<strong>must</strong> specify aspects present in <code>dstImage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyMemoryToImageInfoEXT-dstImage-07981" href="#VUID-VkCopyMemoryToImageInfoEXT-dstImage-07981"></a> <span class="vuid">VUID-VkCopyMemoryToImageInfoEXT-dstImage-07981</span><br>

If <code>dstImage</code> has a
<a href="formats.html#formats-requiring-sampler-ycbcr-conversion" class="xref page">multi-planar image    format</a>, then for each element of <code>pRegions</code>,
<code>imageSubresource.aspectMask</code> <strong>must</strong> be a single valid
<a href="formats.html#formats-planes-image-aspect" class="xref page">multi-planar aspect mask</a> bit</p>
</li>
<li>
<p><a id="VUID-VkCopyMemoryToImageInfoEXT-dstImage-07983" href="#VUID-VkCopyMemoryToImageInfoEXT-dstImage-07983"></a> <span class="vuid">VUID-VkCopyMemoryToImageInfoEXT-dstImage-07983</span><br>

If <code>dstImage</code> is of type <code>VK_IMAGE_TYPE_3D</code>, for each
element of <code>pRegions</code>, <code>imageSubresource.baseArrayLayer</code> <strong>must</strong>
be <code>0</code> and <code>imageSubresource.layerCount</code> <strong>must</strong> be <code>1</code></p>
</li>
</ul>
</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkCopyMemoryToImageInfoEXT-memoryRowLength-09106" href="#VUID-VkCopyMemoryToImageInfoEXT-memoryRowLength-09106"></a> <span class="vuid">VUID-VkCopyMemoryToImageInfoEXT-memoryRowLength-09106</span><br>

For each element of <code>pRegions</code>, <code>memoryRowLength</code> <strong>must</strong> be a
multiple of the <a href="formats.html#formats-compatibility-classes" class="xref page">texel block extent    width</a> of the <a href="formats.html#VkFormat" class="xref page">VkFormat</a> of <code>dstImage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyMemoryToImageInfoEXT-memoryImageHeight-09107" href="#VUID-VkCopyMemoryToImageInfoEXT-memoryImageHeight-09107"></a> <span class="vuid">VUID-VkCopyMemoryToImageInfoEXT-memoryImageHeight-09107</span><br>

For each element of <code>pRegions</code>, <code>memoryImageHeight</code> <strong>must</strong> be a
multiple of the <a href="formats.html#formats-compatibility-classes" class="xref page">texel block extent    height</a> of the <a href="formats.html#VkFormat" class="xref page">VkFormat</a> of <code>dstImage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyMemoryToImageInfoEXT-memoryRowLength-09108" href="#VUID-VkCopyMemoryToImageInfoEXT-memoryRowLength-09108"></a> <span class="vuid">VUID-VkCopyMemoryToImageInfoEXT-memoryRowLength-09108</span><br>

For each element of <code>pRegions</code>, <code>memoryRowLength</code> divided by
the <a href="formats.html#formats-compatibility-classes" class="xref page">texel block extent width</a> and then
multiplied by the texel block size of <code>dstImage</code> <strong>must</strong> be less
than or equal to <span class="eq">2<sup>31</sup>-1</span></p>
</li>
<li>
<p><a id="VUID-VkCopyMemoryToImageInfoEXT-dstImageLayout-09059" href="#VUID-VkCopyMemoryToImageInfoEXT-dstImageLayout-09059"></a> <span class="vuid">VUID-VkCopyMemoryToImageInfoEXT-dstImageLayout-09059</span><br>

<code>dstImageLayout</code> <strong>must</strong> specify the current layout of the image
subresources of <code>dstImage</code> specified in <code>pRegions</code></p>
</li>
<li>
<p><a id="VUID-VkCopyMemoryToImageInfoEXT-dstImageLayout-09060" href="#VUID-VkCopyMemoryToImageInfoEXT-dstImageLayout-09060"></a> <span class="vuid">VUID-VkCopyMemoryToImageInfoEXT-dstImageLayout-09060</span><br>

<code>dstImageLayout</code> <strong>must</strong> be one of the image layouts returned in
<a href="limits.html#VkPhysicalDeviceHostImageCopyPropertiesEXT" class="xref page">VkPhysicalDeviceHostImageCopyPropertiesEXT</a>::<code>pCopyDstLayouts</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkCopyMemoryToImageInfoEXT-sType-sType" href="#VUID-VkCopyMemoryToImageInfoEXT-sType-sType"></a> <span class="vuid">VUID-VkCopyMemoryToImageInfoEXT-sType-sType</span><br>
 <code>sType</code> <strong>must</strong> be <code>VK_STRUCTURE_TYPE_COPY_MEMORY_TO_IMAGE_INFO_EXT</code></p>
</li>
<li>
<p><a id="VUID-VkCopyMemoryToImageInfoEXT-pNext-pNext" href="#VUID-VkCopyMemoryToImageInfoEXT-pNext-pNext"></a> <span class="vuid">VUID-VkCopyMemoryToImageInfoEXT-pNext-pNext</span><br>
 <code>pNext</code> <strong>must</strong> be <code>NULL</code></p>
</li>
<li>
<p><a id="VUID-VkCopyMemoryToImageInfoEXT-flags-parameter" href="#VUID-VkCopyMemoryToImageInfoEXT-flags-parameter"></a> <span class="vuid">VUID-VkCopyMemoryToImageInfoEXT-flags-parameter</span><br>
 <code>flags</code> <strong>must</strong> be a valid combination of <a href="#VkHostImageCopyFlagBitsEXT">VkHostImageCopyFlagBitsEXT</a> values</p>
</li>
<li>
<p><a id="VUID-VkCopyMemoryToImageInfoEXT-dstImage-parameter" href="#VUID-VkCopyMemoryToImageInfoEXT-dstImage-parameter"></a> <span class="vuid">VUID-VkCopyMemoryToImageInfoEXT-dstImage-parameter</span><br>
 <code>dstImage</code> <strong>must</strong> be a valid <a href="resources.html#VkImage" class="xref page">VkImage</a> handle</p>
</li>
<li>
<p><a id="VUID-VkCopyMemoryToImageInfoEXT-dstImageLayout-parameter" href="#VUID-VkCopyMemoryToImageInfoEXT-dstImageLayout-parameter"></a> <span class="vuid">VUID-VkCopyMemoryToImageInfoEXT-dstImageLayout-parameter</span><br>
 <code>dstImageLayout</code> <strong>must</strong> be a valid <a href="resources.html#VkImageLayout" class="xref page">VkImageLayout</a> value</p>
</li>
<li>
<p><a id="VUID-VkCopyMemoryToImageInfoEXT-pRegions-parameter" href="#VUID-VkCopyMemoryToImageInfoEXT-pRegions-parameter"></a> <span class="vuid">VUID-VkCopyMemoryToImageInfoEXT-pRegions-parameter</span><br>
 <code>pRegions</code> <strong>must</strong> be a valid pointer to an array of <code>regionCount</code> valid <a href="#VkMemoryToImageCopyEXT">VkMemoryToImageCopyEXT</a> structures</p>
</li>
<li>
<p><a id="VUID-VkCopyMemoryToImageInfoEXT-regionCount-arraylength" href="#VUID-VkCopyMemoryToImageInfoEXT-regionCount-arraylength"></a> <span class="vuid">VUID-VkCopyMemoryToImageInfoEXT-regionCount-arraylength</span><br>
 <code>regionCount</code> <strong>must</strong> be greater than <code>0</code></p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Each element of <a href="#VkCopyMemoryToImageInfoEXT">VkCopyMemoryToImageInfoEXT</a>::<code>pRegions</code> is a
structure defined as:</p>
</div>
<div id="VkMemoryToImageCopyEXT" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_EXT_host_image_copy
typedef struct VkMemoryToImageCopyEXT {
    VkStructureType             sType;
    const void*                 pNext;
    const void*                 pHostPointer;
    uint32_t                    memoryRowLength;
    uint32_t                    memoryImageHeight;
    VkImageSubresourceLayers    imageSubresource;
    VkOffset3D                  imageOffset;
    VkExtent3D                  imageExtent;
} VkMemoryToImageCopyEXT;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is a <a href="fundamentals.html#VkStructureType" class="xref page">VkStructureType</a> value identifying this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>pHostPointer</code> is the host memory address which is the source of the
copy.</p>
</li>
<li>
<p><code>memoryRowLength</code> and <code>memoryImageHeight</code> specify in texels a
subregion of a larger two- or three-dimensional image in host memory,
and control the addressing calculations.
If either of these values is zero, that aspect of the host memory is
considered to be tightly packed according to the <code>imageExtent</code>.</p>
</li>
<li>
<p><code>imageSubresource</code> is a <a href="#VkImageSubresourceLayers">VkImageSubresourceLayers</a> used to
specify the specific image subresources of the image used for the source
or destination image data.</p>
</li>
<li>
<p><code>imageOffset</code> selects the initial <code>x</code>, <code>y</code>, <code>z</code> offsets
in texels of the sub-region of the destination image data.</p>
</li>
<li>
<p><code>imageExtent</code> is the size in texels of the image to copy in
<code>width</code>, <code>height</code> and <code>depth</code>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>This structure is functionally similar to <a href="#VkBufferImageCopy2">VkBufferImageCopy2</a>, except
it defines host memory as the source of copy instead of a buffer.
In particular, the same data packing rules and restrictions as that
structure apply here as well.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkMemoryToImageCopyEXT-pHostPointer-09061" href="#VUID-VkMemoryToImageCopyEXT-pHostPointer-09061"></a> <span class="vuid">VUID-VkMemoryToImageCopyEXT-pHostPointer-09061</span><br>

<code>pHostPointer</code> <strong>must</strong> point to memory that is large enough to contain
all memory locations that are accessed according to
<a href="#copies-buffers-images-addressing">Buffer and Image Addressing</a>, for
each element of <code>pRegions</code></p>
</li>
<li>
<p><a id="VUID-VkMemoryToImageCopyEXT-pRegions-09062" href="#VUID-VkMemoryToImageCopyEXT-pRegions-09062"></a> <span class="vuid">VUID-VkMemoryToImageCopyEXT-pRegions-09062</span><br>

The union of all source regions, and the union of all destination
regions, specified by the elements of <code>pRegions</code>, <strong>must</strong> not overlap
in memory</p>
</li>
</ul>
</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkMemoryToImageCopyEXT-memoryRowLength-09101" href="#VUID-VkMemoryToImageCopyEXT-memoryRowLength-09101"></a> <span class="vuid">VUID-VkMemoryToImageCopyEXT-memoryRowLength-09101</span><br>

<code>memoryRowLength</code> <strong>must</strong> be <code>0</code>, or greater than or equal to the
<code>width</code> member of <code>imageExtent</code></p>
</li>
<li>
<p><a id="VUID-VkMemoryToImageCopyEXT-memoryImageHeight-09102" href="#VUID-VkMemoryToImageCopyEXT-memoryImageHeight-09102"></a> <span class="vuid">VUID-VkMemoryToImageCopyEXT-memoryImageHeight-09102</span><br>

<code>memoryImageHeight</code> <strong>must</strong> be <code>0</code>, or greater than or equal to the
<code>height</code> member of <code>imageExtent</code></p>
</li>
<li>
<p><a id="VUID-VkMemoryToImageCopyEXT-aspectMask-09103" href="#VUID-VkMemoryToImageCopyEXT-aspectMask-09103"></a> <span class="vuid">VUID-VkMemoryToImageCopyEXT-aspectMask-09103</span><br>

The <code>aspectMask</code> member of <code>imageSubresource</code> <strong>must</strong> only have a
single bit set</p>
</li>
<li>
<p><a id="VUID-VkMemoryToImageCopyEXT-imageExtent-06659" href="#VUID-VkMemoryToImageCopyEXT-imageExtent-06659"></a> <span class="vuid">VUID-VkMemoryToImageCopyEXT-imageExtent-06659</span><br>

<code>imageExtent.width</code> <strong>must</strong> not be 0</p>
</li>
<li>
<p><a id="VUID-VkMemoryToImageCopyEXT-imageExtent-06660" href="#VUID-VkMemoryToImageCopyEXT-imageExtent-06660"></a> <span class="vuid">VUID-VkMemoryToImageCopyEXT-imageExtent-06660</span><br>

<code>imageExtent.height</code> <strong>must</strong> not be 0</p>
</li>
<li>
<p><a id="VUID-VkMemoryToImageCopyEXT-imageExtent-06661" href="#VUID-VkMemoryToImageCopyEXT-imageExtent-06661"></a> <span class="vuid">VUID-VkMemoryToImageCopyEXT-imageExtent-06661</span><br>

<code>imageExtent.depth</code> <strong>must</strong> not be 0</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkMemoryToImageCopyEXT-sType-sType" href="#VUID-VkMemoryToImageCopyEXT-sType-sType"></a> <span class="vuid">VUID-VkMemoryToImageCopyEXT-sType-sType</span><br>
 <code>sType</code> <strong>must</strong> be <code>VK_STRUCTURE_TYPE_MEMORY_TO_IMAGE_COPY_EXT</code></p>
</li>
<li>
<p><a id="VUID-VkMemoryToImageCopyEXT-pNext-pNext" href="#VUID-VkMemoryToImageCopyEXT-pNext-pNext"></a> <span class="vuid">VUID-VkMemoryToImageCopyEXT-pNext-pNext</span><br>
 <code>pNext</code> <strong>must</strong> be <code>NULL</code></p>
</li>
<li>
<p><a id="VUID-VkMemoryToImageCopyEXT-pHostPointer-parameter" href="#VUID-VkMemoryToImageCopyEXT-pHostPointer-parameter"></a> <span class="vuid">VUID-VkMemoryToImageCopyEXT-pHostPointer-parameter</span><br>
 <code>pHostPointer</code> <strong>must</strong> be a pointer value</p>
</li>
<li>
<p><a id="VUID-VkMemoryToImageCopyEXT-imageSubresource-parameter" href="#VUID-VkMemoryToImageCopyEXT-imageSubresource-parameter"></a> <span class="vuid">VUID-VkMemoryToImageCopyEXT-imageSubresource-parameter</span><br>
 <code>imageSubresource</code> <strong>must</strong> be a valid <a href="#VkImageSubresourceLayers">VkImageSubresourceLayers</a> structure</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>To copy data from an image object to host memory, call:</p>
</div>
<div id="vkCopyImageToMemoryEXT" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_EXT_host_image_copy
VkResult vkCopyImageToMemoryEXT(
    VkDevice                                    device,
    const VkCopyImageToMemoryInfoEXT*           pCopyImageToMemoryInfo);</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>device</code> is the device which owns
<code>pCopyImageToMemoryInfo-&gt;srcImage</code>.</p>
</li>
<li>
<p><code>pCopyImageToMemoryInfo</code> is a pointer to a
<a href="#VkCopyImageToMemoryInfoEXT">VkCopyImageToMemoryInfoEXT</a> structure describing the copy
parameters.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>This command is functionally similar to <a href="#vkCmdCopyImageToBuffer2">vkCmdCopyImageToBuffer2</a>,
except it is executed on the host and writes to host memory instead of a
buffer.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCopyImageToMemoryEXT-hostImageCopy-09063" href="#VUID-vkCopyImageToMemoryEXT-hostImageCopy-09063"></a> <span class="vuid">VUID-vkCopyImageToMemoryEXT-hostImageCopy-09063</span><br>

The <a href="features.html#features-hostImageCopy" class="xref page"><code>hostImageCopy</code></a> feature <strong>must</strong> be
enabled</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCopyImageToMemoryEXT-device-parameter" href="#VUID-vkCopyImageToMemoryEXT-device-parameter"></a> <span class="vuid">VUID-vkCopyImageToMemoryEXT-device-parameter</span><br>
 <code>device</code> <strong>must</strong> be a valid <a href="devsandqueues.html#VkDevice" class="xref page">VkDevice</a> handle</p>
</li>
<li>
<p><a id="VUID-vkCopyImageToMemoryEXT-pCopyImageToMemoryInfo-parameter" href="#VUID-vkCopyImageToMemoryEXT-pCopyImageToMemoryInfo-parameter"></a> <span class="vuid">VUID-vkCopyImageToMemoryEXT-pCopyImageToMemoryInfo-parameter</span><br>
 <code>pCopyImageToMemoryInfo</code> <strong>must</strong> be a valid pointer to a valid <a href="#VkCopyImageToMemoryInfoEXT">VkCopyImageToMemoryInfoEXT</a> structure</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Return Codes</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><a href="fundamentals.html#fundamentals-successcodes" class="xref page">Success</a></dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><code>VK_SUCCESS</code></p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1"><a href="fundamentals.html#fundamentals-errorcodes" class="xref page">Failure</a></dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><code>VK_ERROR_INITIALIZATION_FAILED</code></p>
</li>
<li>
<p><code>VK_ERROR_OUT_OF_HOST_MEMORY</code></p>
</li>
<li>
<p><code>VK_ERROR_OUT_OF_DEVICE_MEMORY</code></p>
</li>
<li>
<p><code>VK_ERROR_MEMORY_MAP_FAILED</code></p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>VkCopyImageToMemoryInfoEXT</code> structure is defined as:</p>
</div>
<div id="VkCopyImageToMemoryInfoEXT" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_EXT_host_image_copy
typedef struct VkCopyImageToMemoryInfoEXT {
    VkStructureType                  sType;
    const void*                      pNext;
    VkHostImageCopyFlagsEXT          flags;
    VkImage                          srcImage;
    VkImageLayout                    srcImageLayout;
    uint32_t                         regionCount;
    const VkImageToMemoryCopyEXT*    pRegions;
} VkCopyImageToMemoryInfoEXT;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is a <a href="fundamentals.html#VkStructureType" class="xref page">VkStructureType</a> value identifying this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>flags</code> is a bitmask of <a href="#VkHostImageCopyFlagBitsEXT">VkHostImageCopyFlagBitsEXT</a> values
describing additional copy parameters.</p>
</li>
<li>
<p><code>srcImage</code> is the source image.</p>
</li>
<li>
<p><code>srcImageLayout</code> is the layout of the source image subresources for
the copy.</p>
</li>
<li>
<p><code>regionCount</code> is the number of regions to copy.</p>
</li>
<li>
<p><code>pRegions</code> is a pointer to an array of <a href="#VkImageToMemoryCopyEXT">VkImageToMemoryCopyEXT</a>
structures specifying the regions to copy.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><code>vkCopyImageToMemoryEXT</code> does not check whether the device memory
associated with <code>srcImage</code> is currently in use before performing the
copy.
The application <strong>must</strong> guarantee that any previously submitted command that
writes to the copy regions has completed before the host performs the copy.</p>
</div>
<div class="paragraph">
<p>Copy regions for the image <strong>must</strong> be aligned to a multiple of the texel block
extent in each dimension, except at the edges of the image, where region
extents <strong>must</strong> match the edge of the image.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkCopyImageToMemoryInfoEXT-srcImage-09109" href="#VUID-VkCopyImageToMemoryInfoEXT-srcImage-09109"></a> <span class="vuid">VUID-VkCopyImageToMemoryInfoEXT-srcImage-09109</span><br>

If <code>srcImage</code> is sparse then all memory ranges accessed by the
copy command <strong>must</strong> be bound as described in
<a href="sparsemem.html#sparsememory-resource-binding" class="xref page">Binding Resource Memory</a></p>
</li>
<li>
<p><a id="VUID-VkCopyImageToMemoryInfoEXT-srcImage-09111" href="#VUID-VkCopyImageToMemoryInfoEXT-srcImage-09111"></a> <span class="vuid">VUID-VkCopyImageToMemoryInfoEXT-srcImage-09111</span><br>

If the stencil aspect of <code>srcImage</code> is accessed, and
<code>srcImage</code> was not created with
<a href="resources.html#VkImageStencilUsageCreateInfo" class="xref page">separate stencil usage</a>, the image
<strong>must</strong> have been created with <code>VK_IMAGE_USAGE_HOST_TRANSFER_BIT_EXT</code>
set in <a href="resources.html#VkImageCreateInfo" class="xref page">VkImageCreateInfo</a>::<code>usage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageToMemoryInfoEXT-srcImage-09112" href="#VUID-VkCopyImageToMemoryInfoEXT-srcImage-09112"></a> <span class="vuid">VUID-VkCopyImageToMemoryInfoEXT-srcImage-09112</span><br>

If the stencil aspect of <code>srcImage</code> is accessed, and
<code>srcImage</code> was created with
<a href="resources.html#VkImageStencilUsageCreateInfo" class="xref page">separate stencil usage</a>, the image
<strong>must</strong> have been created with <code>VK_IMAGE_USAGE_HOST_TRANSFER_BIT_EXT</code>
set in <a href="resources.html#VkImageStencilUsageCreateInfo" class="xref page">VkImageStencilUsageCreateInfo</a>::<code>stencilUsage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageToMemoryInfoEXT-srcImage-09113" href="#VUID-VkCopyImageToMemoryInfoEXT-srcImage-09113"></a> <span class="vuid">VUID-VkCopyImageToMemoryInfoEXT-srcImage-09113</span><br>

If non-stencil aspects of <code>srcImage</code> are accessed, the image
<strong>must</strong> have been created with <code>VK_IMAGE_USAGE_HOST_TRANSFER_BIT_EXT</code>
set in <a href="resources.html#VkImageCreateInfo" class="xref page">VkImageCreateInfo</a>::<code>usage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageToMemoryInfoEXT-imageOffset-09114" href="#VUID-VkCopyImageToMemoryInfoEXT-imageOffset-09114"></a> <span class="vuid">VUID-VkCopyImageToMemoryInfoEXT-imageOffset-09114</span><br>

If <code>flags</code> contains <code>VK_HOST_IMAGE_COPY_MEMCPY_EXT</code>, the
<code>x</code>, <code>y</code>, and <code>z</code> members of the <code>imageOffset</code> member
of each element of <code>pRegions</code> <strong>must</strong> be <code>0</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageToMemoryInfoEXT-srcImage-09115" href="#VUID-VkCopyImageToMemoryInfoEXT-srcImage-09115"></a> <span class="vuid">VUID-VkCopyImageToMemoryInfoEXT-srcImage-09115</span><br>

If <code>flags</code> contains <code>VK_HOST_IMAGE_COPY_MEMCPY_EXT</code>, the
<code>imageExtent</code> member of each element of <code>pRegions</code> <strong>must</strong> equal
the extents of <code>srcImage</code> identified by <code>imageSubresource</code></p>
</li>
</ul>
</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkCopyImageToMemoryInfoEXT-srcImage-07966" href="#VUID-VkCopyImageToMemoryInfoEXT-srcImage-07966"></a> <span class="vuid">VUID-VkCopyImageToMemoryInfoEXT-srcImage-07966</span><br>

If <code>srcImage</code> is non-sparse then the image or the specified
<em>disjoint</em> plane <strong>must</strong> be bound completely and contiguously to a single
<code>VkDeviceMemory</code> object</p>
</li>
<li>
<p><a id="VUID-VkCopyImageToMemoryInfoEXT-imageSubresource-07967" href="#VUID-VkCopyImageToMemoryInfoEXT-imageSubresource-07967"></a> <span class="vuid">VUID-VkCopyImageToMemoryInfoEXT-imageSubresource-07967</span><br>

The <code>imageSubresource.mipLevel</code> member of each element of
<code>pRegions</code> <strong>must</strong> be less than the <code>mipLevels</code> specified in
<a href="resources.html#VkImageCreateInfo" class="xref page">VkImageCreateInfo</a> when <code>srcImage</code> was created</p>
</li>
<li>
<p><a id="VUID-VkCopyImageToMemoryInfoEXT-imageSubresource-07968" href="#VUID-VkCopyImageToMemoryInfoEXT-imageSubresource-07968"></a> <span class="vuid">VUID-VkCopyImageToMemoryInfoEXT-imageSubresource-07968</span><br>

The <span class="eq"><code>imageSubresource.baseArrayLayer</code> + 
<code>imageSubresource.layerCount</code></span> of each element of <code>pRegions</code>
, if <code>imageSubresource.layerCount</code> is not
<code>VK_REMAINING_ARRAY_LAYERS</code> and <a href="features.html#features-maintenance5" class="xref page">    <code>maintenance5</code></a> is not enabled,
<strong>must</strong> be less than or equal to the <code>arrayLayers</code> specified in
<a href="resources.html#VkImageCreateInfo" class="xref page">VkImageCreateInfo</a> when <code>srcImage</code> was created</p>
</li>
<li>
<p><a id="VUID-VkCopyImageToMemoryInfoEXT-srcImage-07969" href="#VUID-VkCopyImageToMemoryInfoEXT-srcImage-07969"></a> <span class="vuid">VUID-VkCopyImageToMemoryInfoEXT-srcImage-07969</span><br>

<code>srcImage</code> <strong>must</strong> not have been created with <code>flags</code>
containing <code>VK_IMAGE_CREATE_SUBSAMPLED_BIT_EXT</code></p>
</li>
</ul>
</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkCopyImageToMemoryInfoEXT-imageSubresource-07970" href="#VUID-VkCopyImageToMemoryInfoEXT-imageSubresource-07970"></a> <span class="vuid">VUID-VkCopyImageToMemoryInfoEXT-imageSubresource-07970</span><br>

The image region specified by each element of <code>pRegions</code> <strong>must</strong> be
contained within the specified <code>imageSubresource</code> of
<code>srcImage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageToMemoryInfoEXT-imageSubresource-07971" href="#VUID-VkCopyImageToMemoryInfoEXT-imageSubresource-07971"></a> <span class="vuid">VUID-VkCopyImageToMemoryInfoEXT-imageSubresource-07971</span><br>

For each element of <code>pRegions</code>, <code>imageOffset.x</code> and
<span class="eq">(<code>imageExtent.width</code> +  <code>imageOffset.x</code>)</span> <strong>must</strong>
both be greater than or equal to <code>0</code> and less than or equal to the width
of the specified <code>imageSubresource</code> of <code>srcImage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageToMemoryInfoEXT-imageSubresource-07972" href="#VUID-VkCopyImageToMemoryInfoEXT-imageSubresource-07972"></a> <span class="vuid">VUID-VkCopyImageToMemoryInfoEXT-imageSubresource-07972</span><br>

For each element of <code>pRegions</code>, <code>imageOffset.y</code> and
<span class="eq">(<code>imageExtent.height</code> +  <code>imageOffset.y</code>)</span> <strong>must</strong>
both be greater than or equal to <code>0</code> and less than or equal to the
height of the specified <code>imageSubresource</code> of <code>srcImage</code></p>
</li>
</ul>
</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkCopyImageToMemoryInfoEXT-srcImage-07973" href="#VUID-VkCopyImageToMemoryInfoEXT-srcImage-07973"></a> <span class="vuid">VUID-VkCopyImageToMemoryInfoEXT-srcImage-07973</span><br>

<code>srcImage</code> <strong>must</strong> have a sample count equal to
<code>VK_SAMPLE_COUNT_1_BIT</code></p>
</li>
</ul>
</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkCopyImageToMemoryInfoEXT-srcImage-07979" href="#VUID-VkCopyImageToMemoryInfoEXT-srcImage-07979"></a> <span class="vuid">VUID-VkCopyImageToMemoryInfoEXT-srcImage-07979</span><br>

If <code>srcImage</code> is of type <code>VK_IMAGE_TYPE_1D</code>, then for each
element of <code>pRegions</code>, <code>imageOffset.y</code> <strong>must</strong> be <code>0</code> and
<code>imageExtent.height</code> <strong>must</strong> be <code>1</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageToMemoryInfoEXT-imageOffset-09104" href="#VUID-VkCopyImageToMemoryInfoEXT-imageOffset-09104"></a> <span class="vuid">VUID-VkCopyImageToMemoryInfoEXT-imageOffset-09104</span><br>

For each element of <code>pRegions</code>, <code>imageOffset.z</code> and
<span class="eq">(<code>imageExtent.depth</code> +  <code>imageOffset.z</code>)</span> <strong>must</strong>
both be greater than or equal to <code>0</code> and less than or equal to the depth
of the specified <code>imageSubresource</code> of <code>srcImage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageToMemoryInfoEXT-srcImage-07980" href="#VUID-VkCopyImageToMemoryInfoEXT-srcImage-07980"></a> <span class="vuid">VUID-VkCopyImageToMemoryInfoEXT-srcImage-07980</span><br>

If <code>srcImage</code> is of type <code>VK_IMAGE_TYPE_1D</code> or
<code>VK_IMAGE_TYPE_2D</code>, then for each element of <code>pRegions</code>,
<code>imageOffset.z</code> <strong>must</strong> be <code>0</code> and <code>imageExtent.depth</code> <strong>must</strong>
be <code>1</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageToMemoryInfoEXT-srcImage-07274" href="#VUID-VkCopyImageToMemoryInfoEXT-srcImage-07274"></a> <span class="vuid">VUID-VkCopyImageToMemoryInfoEXT-srcImage-07274</span><br>

For each element of <code>pRegions</code>, <code>imageOffset.x</code> <strong>must</strong> be a
multiple of the <a href="formats.html#formats-compatibility-classes" class="xref page">texel block extent    width</a> of the <a href="formats.html#VkFormat" class="xref page">VkFormat</a> of <code>srcImage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageToMemoryInfoEXT-srcImage-07275" href="#VUID-VkCopyImageToMemoryInfoEXT-srcImage-07275"></a> <span class="vuid">VUID-VkCopyImageToMemoryInfoEXT-srcImage-07275</span><br>

For each element of <code>pRegions</code>, <code>imageOffset.y</code> <strong>must</strong> be a
multiple of the <a href="formats.html#formats-compatibility-classes" class="xref page">texel block extent    height</a> of the <a href="formats.html#VkFormat" class="xref page">VkFormat</a> of <code>srcImage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageToMemoryInfoEXT-srcImage-07276" href="#VUID-VkCopyImageToMemoryInfoEXT-srcImage-07276"></a> <span class="vuid">VUID-VkCopyImageToMemoryInfoEXT-srcImage-07276</span><br>

For each element of <code>pRegions</code>, <code>imageOffset.z</code> <strong>must</strong> be a
multiple of the <a href="formats.html#formats-compatibility-classes" class="xref page">texel block extent    depth</a> of the <a href="formats.html#VkFormat" class="xref page">VkFormat</a> of <code>srcImage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageToMemoryInfoEXT-srcImage-00207" href="#VUID-VkCopyImageToMemoryInfoEXT-srcImage-00207"></a> <span class="vuid">VUID-VkCopyImageToMemoryInfoEXT-srcImage-00207</span><br>

For each element of <code>pRegions</code>, if the sum of <code>imageOffset.x</code>
and <code>extent.width</code> does not equal the width of the subresource
specified by <code>srcSubresource</code>, <code>extent.width</code> <strong>must</strong> be a
multiple of the <a href="formats.html#formats-compatibility-classes" class="xref page">texel block extent    width</a> of the <a href="formats.html#VkFormat" class="xref page">VkFormat</a> of <code>srcImage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageToMemoryInfoEXT-srcImage-00208" href="#VUID-VkCopyImageToMemoryInfoEXT-srcImage-00208"></a> <span class="vuid">VUID-VkCopyImageToMemoryInfoEXT-srcImage-00208</span><br>

For each element of <code>pRegions</code>, if the sum of <code>imageOffset.y</code>
and <code>extent.height</code> does not equal the height of the subresource
specified by <code>srcSubresource</code>, <code>extent.height</code> <strong>must</strong> be a
multiple of the <a href="formats.html#formats-compatibility-classes" class="xref page">texel block extent    height</a> of the <a href="formats.html#VkFormat" class="xref page">VkFormat</a> of <code>srcImage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageToMemoryInfoEXT-srcImage-00209" href="#VUID-VkCopyImageToMemoryInfoEXT-srcImage-00209"></a> <span class="vuid">VUID-VkCopyImageToMemoryInfoEXT-srcImage-00209</span><br>

For each element of <code>pRegions</code>, if the sum of <code>imageOffset.z</code>
and <code>extent.depth</code> does not equal the depth of the subresource
specified by <code>srcSubresource</code>, <code>extent.depth</code> <strong>must</strong> be a
multiple of the <a href="formats.html#formats-compatibility-classes" class="xref page">texel block extent    depth</a> of the <a href="formats.html#VkFormat" class="xref page">VkFormat</a> of <code>srcImage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageToMemoryInfoEXT-imageSubresource-09105" href="#VUID-VkCopyImageToMemoryInfoEXT-imageSubresource-09105"></a> <span class="vuid">VUID-VkCopyImageToMemoryInfoEXT-imageSubresource-09105</span><br>

For each element of <code>pRegions</code>, <code>imageSubresource.aspectMask</code>
<strong>must</strong> specify aspects present in <code>srcImage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageToMemoryInfoEXT-srcImage-07981" href="#VUID-VkCopyImageToMemoryInfoEXT-srcImage-07981"></a> <span class="vuid">VUID-VkCopyImageToMemoryInfoEXT-srcImage-07981</span><br>

If <code>srcImage</code> has a
<a href="formats.html#formats-requiring-sampler-ycbcr-conversion" class="xref page">multi-planar image    format</a>, then for each element of <code>pRegions</code>,
<code>imageSubresource.aspectMask</code> <strong>must</strong> be a single valid
<a href="formats.html#formats-planes-image-aspect" class="xref page">multi-planar aspect mask</a> bit</p>
</li>
<li>
<p><a id="VUID-VkCopyImageToMemoryInfoEXT-srcImage-07983" href="#VUID-VkCopyImageToMemoryInfoEXT-srcImage-07983"></a> <span class="vuid">VUID-VkCopyImageToMemoryInfoEXT-srcImage-07983</span><br>

If <code>srcImage</code> is of type <code>VK_IMAGE_TYPE_3D</code>, for each
element of <code>pRegions</code>, <code>imageSubresource.baseArrayLayer</code> <strong>must</strong>
be <code>0</code> and <code>imageSubresource.layerCount</code> <strong>must</strong> be <code>1</code></p>
</li>
</ul>
</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkCopyImageToMemoryInfoEXT-memoryRowLength-09106" href="#VUID-VkCopyImageToMemoryInfoEXT-memoryRowLength-09106"></a> <span class="vuid">VUID-VkCopyImageToMemoryInfoEXT-memoryRowLength-09106</span><br>

For each element of <code>pRegions</code>, <code>memoryRowLength</code> <strong>must</strong> be a
multiple of the <a href="formats.html#formats-compatibility-classes" class="xref page">texel block extent    width</a> of the <a href="formats.html#VkFormat" class="xref page">VkFormat</a> of <code>srcImage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageToMemoryInfoEXT-memoryImageHeight-09107" href="#VUID-VkCopyImageToMemoryInfoEXT-memoryImageHeight-09107"></a> <span class="vuid">VUID-VkCopyImageToMemoryInfoEXT-memoryImageHeight-09107</span><br>

For each element of <code>pRegions</code>, <code>memoryImageHeight</code> <strong>must</strong> be a
multiple of the <a href="formats.html#formats-compatibility-classes" class="xref page">texel block extent    height</a> of the <a href="formats.html#VkFormat" class="xref page">VkFormat</a> of <code>srcImage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageToMemoryInfoEXT-memoryRowLength-09108" href="#VUID-VkCopyImageToMemoryInfoEXT-memoryRowLength-09108"></a> <span class="vuid">VUID-VkCopyImageToMemoryInfoEXT-memoryRowLength-09108</span><br>

For each element of <code>pRegions</code>, <code>memoryRowLength</code> divided by
the <a href="formats.html#formats-compatibility-classes" class="xref page">texel block extent width</a> and then
multiplied by the texel block size of <code>srcImage</code> <strong>must</strong> be less
than or equal to <span class="eq">2<sup>31</sup>-1</span></p>
</li>
<li>
<p><a id="VUID-VkCopyImageToMemoryInfoEXT-srcImageLayout-09064" href="#VUID-VkCopyImageToMemoryInfoEXT-srcImageLayout-09064"></a> <span class="vuid">VUID-VkCopyImageToMemoryInfoEXT-srcImageLayout-09064</span><br>

<code>srcImageLayout</code> <strong>must</strong> specify the current layout of the image
subresources of <code>srcImage</code> specified in <code>pRegions</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageToMemoryInfoEXT-srcImageLayout-09065" href="#VUID-VkCopyImageToMemoryInfoEXT-srcImageLayout-09065"></a> <span class="vuid">VUID-VkCopyImageToMemoryInfoEXT-srcImageLayout-09065</span><br>

<code>srcImageLayout</code> <strong>must</strong> be one of the image layouts returned in
<a href="limits.html#VkPhysicalDeviceHostImageCopyPropertiesEXT" class="xref page">VkPhysicalDeviceHostImageCopyPropertiesEXT</a>::<code>pCopySrcLayouts</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkCopyImageToMemoryInfoEXT-sType-sType" href="#VUID-VkCopyImageToMemoryInfoEXT-sType-sType"></a> <span class="vuid">VUID-VkCopyImageToMemoryInfoEXT-sType-sType</span><br>
 <code>sType</code> <strong>must</strong> be <code>VK_STRUCTURE_TYPE_COPY_IMAGE_TO_MEMORY_INFO_EXT</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageToMemoryInfoEXT-pNext-pNext" href="#VUID-VkCopyImageToMemoryInfoEXT-pNext-pNext"></a> <span class="vuid">VUID-VkCopyImageToMemoryInfoEXT-pNext-pNext</span><br>
 <code>pNext</code> <strong>must</strong> be <code>NULL</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageToMemoryInfoEXT-flags-parameter" href="#VUID-VkCopyImageToMemoryInfoEXT-flags-parameter"></a> <span class="vuid">VUID-VkCopyImageToMemoryInfoEXT-flags-parameter</span><br>
 <code>flags</code> <strong>must</strong> be a valid combination of <a href="#VkHostImageCopyFlagBitsEXT">VkHostImageCopyFlagBitsEXT</a> values</p>
</li>
<li>
<p><a id="VUID-VkCopyImageToMemoryInfoEXT-srcImage-parameter" href="#VUID-VkCopyImageToMemoryInfoEXT-srcImage-parameter"></a> <span class="vuid">VUID-VkCopyImageToMemoryInfoEXT-srcImage-parameter</span><br>
 <code>srcImage</code> <strong>must</strong> be a valid <a href="resources.html#VkImage" class="xref page">VkImage</a> handle</p>
</li>
<li>
<p><a id="VUID-VkCopyImageToMemoryInfoEXT-srcImageLayout-parameter" href="#VUID-VkCopyImageToMemoryInfoEXT-srcImageLayout-parameter"></a> <span class="vuid">VUID-VkCopyImageToMemoryInfoEXT-srcImageLayout-parameter</span><br>
 <code>srcImageLayout</code> <strong>must</strong> be a valid <a href="resources.html#VkImageLayout" class="xref page">VkImageLayout</a> value</p>
</li>
<li>
<p><a id="VUID-VkCopyImageToMemoryInfoEXT-pRegions-parameter" href="#VUID-VkCopyImageToMemoryInfoEXT-pRegions-parameter"></a> <span class="vuid">VUID-VkCopyImageToMemoryInfoEXT-pRegions-parameter</span><br>
 <code>pRegions</code> <strong>must</strong> be a valid pointer to an array of <code>regionCount</code> valid <a href="#VkImageToMemoryCopyEXT">VkImageToMemoryCopyEXT</a> structures</p>
</li>
<li>
<p><a id="VUID-VkCopyImageToMemoryInfoEXT-regionCount-arraylength" href="#VUID-VkCopyImageToMemoryInfoEXT-regionCount-arraylength"></a> <span class="vuid">VUID-VkCopyImageToMemoryInfoEXT-regionCount-arraylength</span><br>
 <code>regionCount</code> <strong>must</strong> be greater than <code>0</code></p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Each element of <a href="#VkCopyImageToMemoryInfoEXT">VkCopyImageToMemoryInfoEXT</a>::<code>pRegions</code> is a
structure defined as:</p>
</div>
<div id="VkImageToMemoryCopyEXT" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_EXT_host_image_copy
typedef struct VkImageToMemoryCopyEXT {
    VkStructureType             sType;
    const void*                 pNext;
    void*                       pHostPointer;
    uint32_t                    memoryRowLength;
    uint32_t                    memoryImageHeight;
    VkImageSubresourceLayers    imageSubresource;
    VkOffset3D                  imageOffset;
    VkExtent3D                  imageExtent;
} VkImageToMemoryCopyEXT;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is a <a href="fundamentals.html#VkStructureType" class="xref page">VkStructureType</a> value identifying this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>pHostPointer</code> is the host memory address which is the destination
of the copy.</p>
</li>
<li>
<p><code>memoryRowLength</code> and <code>memoryImageHeight</code> specify in texels a
subregion of a larger two- or three-dimensional image in host memory,
and control the addressing calculations.
If either of these values is zero, that aspect of the host memory is
considered to be tightly packed according to the <code>imageExtent</code>.</p>
</li>
<li>
<p><code>imageSubresource</code> is a <a href="#VkImageSubresourceLayers">VkImageSubresourceLayers</a> used to
specify the specific image subresources of the image used for the source
or destination image data.</p>
</li>
<li>
<p><code>imageOffset</code> selects the initial <code>x</code>, <code>y</code>, <code>z</code> offsets
in texels of the sub-region of the source image data.</p>
</li>
<li>
<p><code>imageExtent</code> is the size in texels of the image to copy in
<code>width</code>, <code>height</code> and <code>depth</code>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>This structure is functionally similar to <a href="#VkBufferImageCopy2">VkBufferImageCopy2</a>, except
it defines host memory as the target of copy instead of a buffer.
In particular, the same data packing rules and restrictions as that
structure apply here as well.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkImageToMemoryCopyEXT-pHostPointer-09066" href="#VUID-VkImageToMemoryCopyEXT-pHostPointer-09066"></a> <span class="vuid">VUID-VkImageToMemoryCopyEXT-pHostPointer-09066</span><br>

<code>pHostPointer</code> <strong>must</strong> point to memory that is large enough to contain
all memory locations that are accessed according to
<a href="#copies-buffers-images-addressing">Buffer and Image Addressing</a>, for
each element of <code>pRegions</code></p>
</li>
<li>
<p><a id="VUID-VkImageToMemoryCopyEXT-pRegions-09067" href="#VUID-VkImageToMemoryCopyEXT-pRegions-09067"></a> <span class="vuid">VUID-VkImageToMemoryCopyEXT-pRegions-09067</span><br>

The union of all source regions, and the union of all destination
regions, specified by the elements of <code>pRegions</code>, <strong>must</strong> not overlap
in memory</p>
</li>
</ul>
</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkImageToMemoryCopyEXT-memoryRowLength-09101" href="#VUID-VkImageToMemoryCopyEXT-memoryRowLength-09101"></a> <span class="vuid">VUID-VkImageToMemoryCopyEXT-memoryRowLength-09101</span><br>

<code>memoryRowLength</code> <strong>must</strong> be <code>0</code>, or greater than or equal to the
<code>width</code> member of <code>imageExtent</code></p>
</li>
<li>
<p><a id="VUID-VkImageToMemoryCopyEXT-memoryImageHeight-09102" href="#VUID-VkImageToMemoryCopyEXT-memoryImageHeight-09102"></a> <span class="vuid">VUID-VkImageToMemoryCopyEXT-memoryImageHeight-09102</span><br>

<code>memoryImageHeight</code> <strong>must</strong> be <code>0</code>, or greater than or equal to the
<code>height</code> member of <code>imageExtent</code></p>
</li>
<li>
<p><a id="VUID-VkImageToMemoryCopyEXT-aspectMask-09103" href="#VUID-VkImageToMemoryCopyEXT-aspectMask-09103"></a> <span class="vuid">VUID-VkImageToMemoryCopyEXT-aspectMask-09103</span><br>

The <code>aspectMask</code> member of <code>imageSubresource</code> <strong>must</strong> only have a
single bit set</p>
</li>
<li>
<p><a id="VUID-VkImageToMemoryCopyEXT-imageExtent-06659" href="#VUID-VkImageToMemoryCopyEXT-imageExtent-06659"></a> <span class="vuid">VUID-VkImageToMemoryCopyEXT-imageExtent-06659</span><br>

<code>imageExtent.width</code> <strong>must</strong> not be 0</p>
</li>
<li>
<p><a id="VUID-VkImageToMemoryCopyEXT-imageExtent-06660" href="#VUID-VkImageToMemoryCopyEXT-imageExtent-06660"></a> <span class="vuid">VUID-VkImageToMemoryCopyEXT-imageExtent-06660</span><br>

<code>imageExtent.height</code> <strong>must</strong> not be 0</p>
</li>
<li>
<p><a id="VUID-VkImageToMemoryCopyEXT-imageExtent-06661" href="#VUID-VkImageToMemoryCopyEXT-imageExtent-06661"></a> <span class="vuid">VUID-VkImageToMemoryCopyEXT-imageExtent-06661</span><br>

<code>imageExtent.depth</code> <strong>must</strong> not be 0</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkImageToMemoryCopyEXT-sType-sType" href="#VUID-VkImageToMemoryCopyEXT-sType-sType"></a> <span class="vuid">VUID-VkImageToMemoryCopyEXT-sType-sType</span><br>
 <code>sType</code> <strong>must</strong> be <code>VK_STRUCTURE_TYPE_IMAGE_TO_MEMORY_COPY_EXT</code></p>
</li>
<li>
<p><a id="VUID-VkImageToMemoryCopyEXT-pNext-pNext" href="#VUID-VkImageToMemoryCopyEXT-pNext-pNext"></a> <span class="vuid">VUID-VkImageToMemoryCopyEXT-pNext-pNext</span><br>
 <code>pNext</code> <strong>must</strong> be <code>NULL</code></p>
</li>
<li>
<p><a id="VUID-VkImageToMemoryCopyEXT-pHostPointer-parameter" href="#VUID-VkImageToMemoryCopyEXT-pHostPointer-parameter"></a> <span class="vuid">VUID-VkImageToMemoryCopyEXT-pHostPointer-parameter</span><br>
 <code>pHostPointer</code> <strong>must</strong> be a pointer value</p>
</li>
<li>
<p><a id="VUID-VkImageToMemoryCopyEXT-imageSubresource-parameter" href="#VUID-VkImageToMemoryCopyEXT-imageSubresource-parameter"></a> <span class="vuid">VUID-VkImageToMemoryCopyEXT-imageSubresource-parameter</span><br>
 <code>imageSubresource</code> <strong>must</strong> be a valid <a href="#VkImageSubresourceLayers">VkImageSubresourceLayers</a> structure</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Bits which <strong>can</strong> be set in <a href="#VkCopyMemoryToImageInfoEXT">VkCopyMemoryToImageInfoEXT</a>::<code>flags</code>,
<a href="#VkCopyImageToMemoryInfoEXT">VkCopyImageToMemoryInfoEXT</a>::<code>flags</code>, and
<a href="#VkCopyImageToImageInfoEXT">VkCopyImageToImageInfoEXT</a>::<code>flags</code>, specifying additional copy
parameters are:</p>
</div>
<div id="VkHostImageCopyFlagBitsEXT" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_EXT_host_image_copy
typedef enum VkHostImageCopyFlagBitsEXT {
    VK_HOST_IMAGE_COPY_MEMCPY_EXT = 0x00000001,
} VkHostImageCopyFlagBitsEXT;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>VK_HOST_IMAGE_COPY_MEMCPY_EXT</code> specifies that no memory layout
swizzling is to be applied during data copy.
For copies between memory and images, this flag indicates that image
data in host memory is swizzled in exactly the same way as the image
data on the device.
Using this flag indicates that the implementations <strong>may</strong> use a simple
memory copy to transfer the data between the host memory and the device
memory.
The format of the swizzled data in host memory is platform dependent and
is not defined in this specification.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div id="VkHostImageCopyFlagsEXT" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_EXT_host_image_copy
typedef VkFlags VkHostImageCopyFlagsEXT;</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>VkHostImageCopyFlagsEXT</code> is a bitmask type for setting a mask of zero
or more <a href="#VkHostImageCopyFlagBitsEXT">VkHostImageCopyFlagBitsEXT</a>.</p>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>To copy data from an image object to another image object using the host,
call:</p>
</div>
<div id="vkCopyImageToImageEXT" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_EXT_host_image_copy
VkResult vkCopyImageToImageEXT(
    VkDevice                                    device,
    const VkCopyImageToImageInfoEXT*            pCopyImageToImageInfo);</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>device</code> is the device which owns
<code>pCopyImageToMemoryInfo-&gt;srcImage</code>.</p>
</li>
<li>
<p><code>pCopyImageToImageInfo</code> is a pointer to a
<a href="#VkCopyImageToImageInfoEXT">VkCopyImageToImageInfoEXT</a> structure describing the copy
parameters.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>This command is functionally similar to <a href="#vkCmdCopyImage2">vkCmdCopyImage2</a>, except it is
executed on the host.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCopyImageToImageEXT-hostImageCopy-09068" href="#VUID-vkCopyImageToImageEXT-hostImageCopy-09068"></a> <span class="vuid">VUID-vkCopyImageToImageEXT-hostImageCopy-09068</span><br>

The <a href="features.html#features-hostImageCopy" class="xref page"><code>hostImageCopy</code></a> feature <strong>must</strong> be
enabled</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCopyImageToImageEXT-device-parameter" href="#VUID-vkCopyImageToImageEXT-device-parameter"></a> <span class="vuid">VUID-vkCopyImageToImageEXT-device-parameter</span><br>
 <code>device</code> <strong>must</strong> be a valid <a href="devsandqueues.html#VkDevice" class="xref page">VkDevice</a> handle</p>
</li>
<li>
<p><a id="VUID-vkCopyImageToImageEXT-pCopyImageToImageInfo-parameter" href="#VUID-vkCopyImageToImageEXT-pCopyImageToImageInfo-parameter"></a> <span class="vuid">VUID-vkCopyImageToImageEXT-pCopyImageToImageInfo-parameter</span><br>
 <code>pCopyImageToImageInfo</code> <strong>must</strong> be a valid pointer to a valid <a href="#VkCopyImageToImageInfoEXT">VkCopyImageToImageInfoEXT</a> structure</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Return Codes</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><a href="fundamentals.html#fundamentals-successcodes" class="xref page">Success</a></dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><code>VK_SUCCESS</code></p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1"><a href="fundamentals.html#fundamentals-errorcodes" class="xref page">Failure</a></dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><code>VK_ERROR_INITIALIZATION_FAILED</code></p>
</li>
<li>
<p><code>VK_ERROR_OUT_OF_HOST_MEMORY</code></p>
</li>
<li>
<p><code>VK_ERROR_OUT_OF_DEVICE_MEMORY</code></p>
</li>
<li>
<p><code>VK_ERROR_MEMORY_MAP_FAILED</code></p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>VkCopyImageToImageInfoEXT</code> structure is defined as:</p>
</div>
<div id="VkCopyImageToImageInfoEXT" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_EXT_host_image_copy
typedef struct VkCopyImageToImageInfoEXT {
    VkStructureType            sType;
    const void*                pNext;
    VkHostImageCopyFlagsEXT    flags;
    VkImage                    srcImage;
    VkImageLayout              srcImageLayout;
    VkImage                    dstImage;
    VkImageLayout              dstImageLayout;
    uint32_t                   regionCount;
    const VkImageCopy2*        pRegions;
} VkCopyImageToImageInfoEXT;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is a <a href="fundamentals.html#VkStructureType" class="xref page">VkStructureType</a> value identifying this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>flags</code> is a bitmask of <a href="#VkHostImageCopyFlagBitsEXT">VkHostImageCopyFlagBitsEXT</a> values
describing additional copy parameters.</p>
</li>
<li>
<p><code>srcImage</code> is the source image.</p>
</li>
<li>
<p><code>srcImageLayout</code> is the layout of the source image subresources for
the copy.</p>
</li>
<li>
<p><code>dstImage</code> is the destination image.</p>
</li>
<li>
<p><code>dstImageLayout</code> is the layout of the destination image subresources
for the copy.</p>
</li>
<li>
<p><code>regionCount</code> is the number of regions to copy.</p>
</li>
<li>
<p><code>pRegions</code> is a pointer to an array of <a href="#VkImageCopy2">VkImageCopy2</a> structures
specifying the regions to copy.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><code>vkCopyImageToImageEXT</code> does not check whether the device memory
associated with <code>srcImage</code> or <code>dstImage</code> is currently in use before
performing the copy.
The application <strong>must</strong> guarantee that any previously submitted command that
writes to the copy regions has completed before the host performs the copy.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkCopyImageToImageInfoEXT-srcImage-09069" href="#VUID-VkCopyImageToImageInfoEXT-srcImage-09069"></a> <span class="vuid">VUID-VkCopyImageToImageInfoEXT-srcImage-09069</span><br>

<code>srcImage</code> and <code>dstImage</code> <strong>must</strong> have been created with identical
image creation parameters</p>
</li>
</ul>
</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkCopyImageToImageInfoEXT-srcImage-09109" href="#VUID-VkCopyImageToImageInfoEXT-srcImage-09109"></a> <span class="vuid">VUID-VkCopyImageToImageInfoEXT-srcImage-09109</span><br>

If <code>srcImage</code> is sparse then all memory ranges accessed by the
copy command <strong>must</strong> be bound as described in
<a href="sparsemem.html#sparsememory-resource-binding" class="xref page">Binding Resource Memory</a></p>
</li>
<li>
<p><a id="VUID-VkCopyImageToImageInfoEXT-srcImage-09111" href="#VUID-VkCopyImageToImageInfoEXT-srcImage-09111"></a> <span class="vuid">VUID-VkCopyImageToImageInfoEXT-srcImage-09111</span><br>

If the stencil aspect of <code>srcImage</code> is accessed, and
<code>srcImage</code> was not created with
<a href="resources.html#VkImageStencilUsageCreateInfo" class="xref page">separate stencil usage</a>, the image
<strong>must</strong> have been created with <code>VK_IMAGE_USAGE_HOST_TRANSFER_BIT_EXT</code>
set in <a href="resources.html#VkImageCreateInfo" class="xref page">VkImageCreateInfo</a>::<code>usage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageToImageInfoEXT-srcImage-09112" href="#VUID-VkCopyImageToImageInfoEXT-srcImage-09112"></a> <span class="vuid">VUID-VkCopyImageToImageInfoEXT-srcImage-09112</span><br>

If the stencil aspect of <code>srcImage</code> is accessed, and
<code>srcImage</code> was created with
<a href="resources.html#VkImageStencilUsageCreateInfo" class="xref page">separate stencil usage</a>, the image
<strong>must</strong> have been created with <code>VK_IMAGE_USAGE_HOST_TRANSFER_BIT_EXT</code>
set in <a href="resources.html#VkImageStencilUsageCreateInfo" class="xref page">VkImageStencilUsageCreateInfo</a>::<code>stencilUsage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageToImageInfoEXT-srcImage-09113" href="#VUID-VkCopyImageToImageInfoEXT-srcImage-09113"></a> <span class="vuid">VUID-VkCopyImageToImageInfoEXT-srcImage-09113</span><br>

If non-stencil aspects of <code>srcImage</code> are accessed, the image
<strong>must</strong> have been created with <code>VK_IMAGE_USAGE_HOST_TRANSFER_BIT_EXT</code>
set in <a href="resources.html#VkImageCreateInfo" class="xref page">VkImageCreateInfo</a>::<code>usage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageToImageInfoEXT-srcOffset-09114" href="#VUID-VkCopyImageToImageInfoEXT-srcOffset-09114"></a> <span class="vuid">VUID-VkCopyImageToImageInfoEXT-srcOffset-09114</span><br>

If <code>flags</code> contains <code>VK_HOST_IMAGE_COPY_MEMCPY_EXT</code>, the
<code>x</code>, <code>y</code>, and <code>z</code> members of the <code>srcOffset</code> member
of each element of <code>pRegions</code> <strong>must</strong> be <code>0</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageToImageInfoEXT-srcImage-09115" href="#VUID-VkCopyImageToImageInfoEXT-srcImage-09115"></a> <span class="vuid">VUID-VkCopyImageToImageInfoEXT-srcImage-09115</span><br>

If <code>flags</code> contains <code>VK_HOST_IMAGE_COPY_MEMCPY_EXT</code>, the
<code>extent</code> member of each element of <code>pRegions</code> <strong>must</strong> equal
the extents of <code>srcImage</code> identified by <code>srcSubresource</code></p>
</li>
</ul>
</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkCopyImageToImageInfoEXT-srcImage-07966" href="#VUID-VkCopyImageToImageInfoEXT-srcImage-07966"></a> <span class="vuid">VUID-VkCopyImageToImageInfoEXT-srcImage-07966</span><br>

If <code>srcImage</code> is non-sparse then the image or the specified
<em>disjoint</em> plane <strong>must</strong> be bound completely and contiguously to a single
<code>VkDeviceMemory</code> object</p>
</li>
<li>
<p><a id="VUID-VkCopyImageToImageInfoEXT-srcSubresource-07967" href="#VUID-VkCopyImageToImageInfoEXT-srcSubresource-07967"></a> <span class="vuid">VUID-VkCopyImageToImageInfoEXT-srcSubresource-07967</span><br>

The <code>srcSubresource.mipLevel</code> member of each element of
<code>pRegions</code> <strong>must</strong> be less than the <code>mipLevels</code> specified in
<a href="resources.html#VkImageCreateInfo" class="xref page">VkImageCreateInfo</a> when <code>srcImage</code> was created</p>
</li>
<li>
<p><a id="VUID-VkCopyImageToImageInfoEXT-srcSubresource-07968" href="#VUID-VkCopyImageToImageInfoEXT-srcSubresource-07968"></a> <span class="vuid">VUID-VkCopyImageToImageInfoEXT-srcSubresource-07968</span><br>

The <span class="eq"><code>srcSubresource.baseArrayLayer</code> + 
<code>srcSubresource.layerCount</code></span> of each element of <code>pRegions</code>
, if <code>srcSubresource.layerCount</code> is not
<code>VK_REMAINING_ARRAY_LAYERS</code> and <a href="features.html#features-maintenance5" class="xref page">    <code>maintenance5</code></a> is not enabled,
<strong>must</strong> be less than or equal to the <code>arrayLayers</code> specified in
<a href="resources.html#VkImageCreateInfo" class="xref page">VkImageCreateInfo</a> when <code>srcImage</code> was created</p>
</li>
<li>
<p><a id="VUID-VkCopyImageToImageInfoEXT-srcImage-07969" href="#VUID-VkCopyImageToImageInfoEXT-srcImage-07969"></a> <span class="vuid">VUID-VkCopyImageToImageInfoEXT-srcImage-07969</span><br>

<code>srcImage</code> <strong>must</strong> not have been created with <code>flags</code>
containing <code>VK_IMAGE_CREATE_SUBSAMPLED_BIT_EXT</code></p>
</li>
</ul>
</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkCopyImageToImageInfoEXT-srcSubresource-07970" href="#VUID-VkCopyImageToImageInfoEXT-srcSubresource-07970"></a> <span class="vuid">VUID-VkCopyImageToImageInfoEXT-srcSubresource-07970</span><br>

The image region specified by each element of <code>pRegions</code> <strong>must</strong> be
contained within the specified <code>srcSubresource</code> of
<code>srcImage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageToImageInfoEXT-srcSubresource-07971" href="#VUID-VkCopyImageToImageInfoEXT-srcSubresource-07971"></a> <span class="vuid">VUID-VkCopyImageToImageInfoEXT-srcSubresource-07971</span><br>

For each element of <code>pRegions</code>, <code>srcOffset.x</code> and
<span class="eq">(<code>extent.width</code> +  <code>srcOffset.x</code>)</span> <strong>must</strong>
both be greater than or equal to <code>0</code> and less than or equal to the width
of the specified <code>srcSubresource</code> of <code>srcImage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageToImageInfoEXT-srcSubresource-07972" href="#VUID-VkCopyImageToImageInfoEXT-srcSubresource-07972"></a> <span class="vuid">VUID-VkCopyImageToImageInfoEXT-srcSubresource-07972</span><br>

For each element of <code>pRegions</code>, <code>srcOffset.y</code> and
<span class="eq">(<code>extent.height</code> +  <code>srcOffset.y</code>)</span> <strong>must</strong>
both be greater than or equal to <code>0</code> and less than or equal to the
height of the specified <code>srcSubresource</code> of <code>srcImage</code></p>
</li>
</ul>
</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkCopyImageToImageInfoEXT-srcImage-07979" href="#VUID-VkCopyImageToImageInfoEXT-srcImage-07979"></a> <span class="vuid">VUID-VkCopyImageToImageInfoEXT-srcImage-07979</span><br>

If <code>srcImage</code> is of type <code>VK_IMAGE_TYPE_1D</code>, then for each
element of <code>pRegions</code>, <code>srcOffset.y</code> <strong>must</strong> be <code>0</code> and
<code>extent.height</code> <strong>must</strong> be <code>1</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageToImageInfoEXT-srcOffset-09104" href="#VUID-VkCopyImageToImageInfoEXT-srcOffset-09104"></a> <span class="vuid">VUID-VkCopyImageToImageInfoEXT-srcOffset-09104</span><br>

For each element of <code>pRegions</code>, <code>srcOffset.z</code> and
<span class="eq">(<code>extent.depth</code> +  <code>srcOffset.z</code>)</span> <strong>must</strong>
both be greater than or equal to <code>0</code> and less than or equal to the depth
of the specified <code>srcSubresource</code> of <code>srcImage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageToImageInfoEXT-srcImage-07980" href="#VUID-VkCopyImageToImageInfoEXT-srcImage-07980"></a> <span class="vuid">VUID-VkCopyImageToImageInfoEXT-srcImage-07980</span><br>

If <code>srcImage</code> is of type <code>VK_IMAGE_TYPE_1D</code> or
<code>VK_IMAGE_TYPE_2D</code>, then for each element of <code>pRegions</code>,
<code>srcOffset.z</code> <strong>must</strong> be <code>0</code> and <code>extent.depth</code> <strong>must</strong>
be <code>1</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageToImageInfoEXT-srcImage-07274" href="#VUID-VkCopyImageToImageInfoEXT-srcImage-07274"></a> <span class="vuid">VUID-VkCopyImageToImageInfoEXT-srcImage-07274</span><br>

For each element of <code>pRegions</code>, <code>srcOffset.x</code> <strong>must</strong> be a
multiple of the <a href="formats.html#formats-compatibility-classes" class="xref page">texel block extent    width</a> of the <a href="formats.html#VkFormat" class="xref page">VkFormat</a> of <code>srcImage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageToImageInfoEXT-srcImage-07275" href="#VUID-VkCopyImageToImageInfoEXT-srcImage-07275"></a> <span class="vuid">VUID-VkCopyImageToImageInfoEXT-srcImage-07275</span><br>

For each element of <code>pRegions</code>, <code>srcOffset.y</code> <strong>must</strong> be a
multiple of the <a href="formats.html#formats-compatibility-classes" class="xref page">texel block extent    height</a> of the <a href="formats.html#VkFormat" class="xref page">VkFormat</a> of <code>srcImage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageToImageInfoEXT-srcImage-07276" href="#VUID-VkCopyImageToImageInfoEXT-srcImage-07276"></a> <span class="vuid">VUID-VkCopyImageToImageInfoEXT-srcImage-07276</span><br>

For each element of <code>pRegions</code>, <code>srcOffset.z</code> <strong>must</strong> be a
multiple of the <a href="formats.html#formats-compatibility-classes" class="xref page">texel block extent    depth</a> of the <a href="formats.html#VkFormat" class="xref page">VkFormat</a> of <code>srcImage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageToImageInfoEXT-srcImage-00207" href="#VUID-VkCopyImageToImageInfoEXT-srcImage-00207"></a> <span class="vuid">VUID-VkCopyImageToImageInfoEXT-srcImage-00207</span><br>

For each element of <code>pRegions</code>, if the sum of <code>srcOffset.x</code>
and <code>extent.width</code> does not equal the width of the subresource
specified by <code>srcSubresource</code>, <code>extent.width</code> <strong>must</strong> be a
multiple of the <a href="formats.html#formats-compatibility-classes" class="xref page">texel block extent    width</a> of the <a href="formats.html#VkFormat" class="xref page">VkFormat</a> of <code>srcImage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageToImageInfoEXT-srcImage-00208" href="#VUID-VkCopyImageToImageInfoEXT-srcImage-00208"></a> <span class="vuid">VUID-VkCopyImageToImageInfoEXT-srcImage-00208</span><br>

For each element of <code>pRegions</code>, if the sum of <code>srcOffset.y</code>
and <code>extent.height</code> does not equal the height of the subresource
specified by <code>srcSubresource</code>, <code>extent.height</code> <strong>must</strong> be a
multiple of the <a href="formats.html#formats-compatibility-classes" class="xref page">texel block extent    height</a> of the <a href="formats.html#VkFormat" class="xref page">VkFormat</a> of <code>srcImage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageToImageInfoEXT-srcImage-00209" href="#VUID-VkCopyImageToImageInfoEXT-srcImage-00209"></a> <span class="vuid">VUID-VkCopyImageToImageInfoEXT-srcImage-00209</span><br>

For each element of <code>pRegions</code>, if the sum of <code>srcOffset.z</code>
and <code>extent.depth</code> does not equal the depth of the subresource
specified by <code>srcSubresource</code>, <code>extent.depth</code> <strong>must</strong> be a
multiple of the <a href="formats.html#formats-compatibility-classes" class="xref page">texel block extent    depth</a> of the <a href="formats.html#VkFormat" class="xref page">VkFormat</a> of <code>srcImage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageToImageInfoEXT-srcSubresource-09105" href="#VUID-VkCopyImageToImageInfoEXT-srcSubresource-09105"></a> <span class="vuid">VUID-VkCopyImageToImageInfoEXT-srcSubresource-09105</span><br>

For each element of <code>pRegions</code>, <code>srcSubresource.aspectMask</code>
<strong>must</strong> specify aspects present in <code>srcImage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageToImageInfoEXT-srcImage-07981" href="#VUID-VkCopyImageToImageInfoEXT-srcImage-07981"></a> <span class="vuid">VUID-VkCopyImageToImageInfoEXT-srcImage-07981</span><br>

If <code>srcImage</code> has a
<a href="formats.html#formats-requiring-sampler-ycbcr-conversion" class="xref page">multi-planar image    format</a>, then for each element of <code>pRegions</code>,
<code>srcSubresource.aspectMask</code> <strong>must</strong> be a single valid
<a href="formats.html#formats-planes-image-aspect" class="xref page">multi-planar aspect mask</a> bit</p>
</li>
<li>
<p><a id="VUID-VkCopyImageToImageInfoEXT-srcImage-07983" href="#VUID-VkCopyImageToImageInfoEXT-srcImage-07983"></a> <span class="vuid">VUID-VkCopyImageToImageInfoEXT-srcImage-07983</span><br>

If <code>srcImage</code> is of type <code>VK_IMAGE_TYPE_3D</code>, for each
element of <code>pRegions</code>, <code>srcSubresource.baseArrayLayer</code> <strong>must</strong>
be <code>0</code> and <code>srcSubresource.layerCount</code> <strong>must</strong> be <code>1</code></p>
</li>
</ul>
</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkCopyImageToImageInfoEXT-dstImage-09109" href="#VUID-VkCopyImageToImageInfoEXT-dstImage-09109"></a> <span class="vuid">VUID-VkCopyImageToImageInfoEXT-dstImage-09109</span><br>

If <code>dstImage</code> is sparse then all memory ranges accessed by the
copy command <strong>must</strong> be bound as described in
<a href="sparsemem.html#sparsememory-resource-binding" class="xref page">Binding Resource Memory</a></p>
</li>
<li>
<p><a id="VUID-VkCopyImageToImageInfoEXT-dstImage-09111" href="#VUID-VkCopyImageToImageInfoEXT-dstImage-09111"></a> <span class="vuid">VUID-VkCopyImageToImageInfoEXT-dstImage-09111</span><br>

If the stencil aspect of <code>dstImage</code> is accessed, and
<code>dstImage</code> was not created with
<a href="resources.html#VkImageStencilUsageCreateInfo" class="xref page">separate stencil usage</a>, the image
<strong>must</strong> have been created with <code>VK_IMAGE_USAGE_HOST_TRANSFER_BIT_EXT</code>
set in <a href="resources.html#VkImageCreateInfo" class="xref page">VkImageCreateInfo</a>::<code>usage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageToImageInfoEXT-dstImage-09112" href="#VUID-VkCopyImageToImageInfoEXT-dstImage-09112"></a> <span class="vuid">VUID-VkCopyImageToImageInfoEXT-dstImage-09112</span><br>

If the stencil aspect of <code>dstImage</code> is accessed, and
<code>dstImage</code> was created with
<a href="resources.html#VkImageStencilUsageCreateInfo" class="xref page">separate stencil usage</a>, the image
<strong>must</strong> have been created with <code>VK_IMAGE_USAGE_HOST_TRANSFER_BIT_EXT</code>
set in <a href="resources.html#VkImageStencilUsageCreateInfo" class="xref page">VkImageStencilUsageCreateInfo</a>::<code>stencilUsage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageToImageInfoEXT-dstImage-09113" href="#VUID-VkCopyImageToImageInfoEXT-dstImage-09113"></a> <span class="vuid">VUID-VkCopyImageToImageInfoEXT-dstImage-09113</span><br>

If non-stencil aspects of <code>dstImage</code> are accessed, the image
<strong>must</strong> have been created with <code>VK_IMAGE_USAGE_HOST_TRANSFER_BIT_EXT</code>
set in <a href="resources.html#VkImageCreateInfo" class="xref page">VkImageCreateInfo</a>::<code>usage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageToImageInfoEXT-dstOffset-09114" href="#VUID-VkCopyImageToImageInfoEXT-dstOffset-09114"></a> <span class="vuid">VUID-VkCopyImageToImageInfoEXT-dstOffset-09114</span><br>

If <code>flags</code> contains <code>VK_HOST_IMAGE_COPY_MEMCPY_EXT</code>, the
<code>x</code>, <code>y</code>, and <code>z</code> members of the <code>dstOffset</code> member
of each element of <code>pRegions</code> <strong>must</strong> be <code>0</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageToImageInfoEXT-dstImage-09115" href="#VUID-VkCopyImageToImageInfoEXT-dstImage-09115"></a> <span class="vuid">VUID-VkCopyImageToImageInfoEXT-dstImage-09115</span><br>

If <code>flags</code> contains <code>VK_HOST_IMAGE_COPY_MEMCPY_EXT</code>, the
<code>extent</code> member of each element of <code>pRegions</code> <strong>must</strong> equal
the extents of <code>dstImage</code> identified by <code>dstSubresource</code></p>
</li>
</ul>
</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkCopyImageToImageInfoEXT-dstImage-07966" href="#VUID-VkCopyImageToImageInfoEXT-dstImage-07966"></a> <span class="vuid">VUID-VkCopyImageToImageInfoEXT-dstImage-07966</span><br>

If <code>dstImage</code> is non-sparse then the image or the specified
<em>disjoint</em> plane <strong>must</strong> be bound completely and contiguously to a single
<code>VkDeviceMemory</code> object</p>
</li>
<li>
<p><a id="VUID-VkCopyImageToImageInfoEXT-dstSubresource-07967" href="#VUID-VkCopyImageToImageInfoEXT-dstSubresource-07967"></a> <span class="vuid">VUID-VkCopyImageToImageInfoEXT-dstSubresource-07967</span><br>

The <code>dstSubresource.mipLevel</code> member of each element of
<code>pRegions</code> <strong>must</strong> be less than the <code>mipLevels</code> specified in
<a href="resources.html#VkImageCreateInfo" class="xref page">VkImageCreateInfo</a> when <code>dstImage</code> was created</p>
</li>
<li>
<p><a id="VUID-VkCopyImageToImageInfoEXT-dstSubresource-07968" href="#VUID-VkCopyImageToImageInfoEXT-dstSubresource-07968"></a> <span class="vuid">VUID-VkCopyImageToImageInfoEXT-dstSubresource-07968</span><br>

The <span class="eq"><code>dstSubresource.baseArrayLayer</code> + 
<code>dstSubresource.layerCount</code></span> of each element of <code>pRegions</code>
, if <code>dstSubresource.layerCount</code> is not
<code>VK_REMAINING_ARRAY_LAYERS</code> and <a href="features.html#features-maintenance5" class="xref page">    <code>maintenance5</code></a> is not enabled,
<strong>must</strong> be less than or equal to the <code>arrayLayers</code> specified in
<a href="resources.html#VkImageCreateInfo" class="xref page">VkImageCreateInfo</a> when <code>dstImage</code> was created</p>
</li>
<li>
<p><a id="VUID-VkCopyImageToImageInfoEXT-dstImage-07969" href="#VUID-VkCopyImageToImageInfoEXT-dstImage-07969"></a> <span class="vuid">VUID-VkCopyImageToImageInfoEXT-dstImage-07969</span><br>

<code>dstImage</code> <strong>must</strong> not have been created with <code>flags</code>
containing <code>VK_IMAGE_CREATE_SUBSAMPLED_BIT_EXT</code></p>
</li>
</ul>
</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkCopyImageToImageInfoEXT-dstSubresource-07970" href="#VUID-VkCopyImageToImageInfoEXT-dstSubresource-07970"></a> <span class="vuid">VUID-VkCopyImageToImageInfoEXT-dstSubresource-07970</span><br>

The image region specified by each element of <code>pRegions</code> <strong>must</strong> be
contained within the specified <code>dstSubresource</code> of
<code>dstImage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageToImageInfoEXT-dstSubresource-07971" href="#VUID-VkCopyImageToImageInfoEXT-dstSubresource-07971"></a> <span class="vuid">VUID-VkCopyImageToImageInfoEXT-dstSubresource-07971</span><br>

For each element of <code>pRegions</code>, <code>dstOffset.x</code> and
<span class="eq">(<code>extent.width</code> +  <code>dstOffset.x</code>)</span> <strong>must</strong>
both be greater than or equal to <code>0</code> and less than or equal to the width
of the specified <code>dstSubresource</code> of <code>dstImage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageToImageInfoEXT-dstSubresource-07972" href="#VUID-VkCopyImageToImageInfoEXT-dstSubresource-07972"></a> <span class="vuid">VUID-VkCopyImageToImageInfoEXT-dstSubresource-07972</span><br>

For each element of <code>pRegions</code>, <code>dstOffset.y</code> and
<span class="eq">(<code>extent.height</code> +  <code>dstOffset.y</code>)</span> <strong>must</strong>
both be greater than or equal to <code>0</code> and less than or equal to the
height of the specified <code>dstSubresource</code> of <code>dstImage</code></p>
</li>
</ul>
</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkCopyImageToImageInfoEXT-dstImage-07979" href="#VUID-VkCopyImageToImageInfoEXT-dstImage-07979"></a> <span class="vuid">VUID-VkCopyImageToImageInfoEXT-dstImage-07979</span><br>

If <code>dstImage</code> is of type <code>VK_IMAGE_TYPE_1D</code>, then for each
element of <code>pRegions</code>, <code>dstOffset.y</code> <strong>must</strong> be <code>0</code> and
<code>extent.height</code> <strong>must</strong> be <code>1</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageToImageInfoEXT-dstOffset-09104" href="#VUID-VkCopyImageToImageInfoEXT-dstOffset-09104"></a> <span class="vuid">VUID-VkCopyImageToImageInfoEXT-dstOffset-09104</span><br>

For each element of <code>pRegions</code>, <code>dstOffset.z</code> and
<span class="eq">(<code>extent.depth</code> +  <code>dstOffset.z</code>)</span> <strong>must</strong>
both be greater than or equal to <code>0</code> and less than or equal to the depth
of the specified <code>dstSubresource</code> of <code>dstImage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageToImageInfoEXT-dstImage-07980" href="#VUID-VkCopyImageToImageInfoEXT-dstImage-07980"></a> <span class="vuid">VUID-VkCopyImageToImageInfoEXT-dstImage-07980</span><br>

If <code>dstImage</code> is of type <code>VK_IMAGE_TYPE_1D</code> or
<code>VK_IMAGE_TYPE_2D</code>, then for each element of <code>pRegions</code>,
<code>dstOffset.z</code> <strong>must</strong> be <code>0</code> and <code>extent.depth</code> <strong>must</strong>
be <code>1</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageToImageInfoEXT-dstImage-07274" href="#VUID-VkCopyImageToImageInfoEXT-dstImage-07274"></a> <span class="vuid">VUID-VkCopyImageToImageInfoEXT-dstImage-07274</span><br>

For each element of <code>pRegions</code>, <code>dstOffset.x</code> <strong>must</strong> be a
multiple of the <a href="formats.html#formats-compatibility-classes" class="xref page">texel block extent    width</a> of the <a href="formats.html#VkFormat" class="xref page">VkFormat</a> of <code>dstImage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageToImageInfoEXT-dstImage-07275" href="#VUID-VkCopyImageToImageInfoEXT-dstImage-07275"></a> <span class="vuid">VUID-VkCopyImageToImageInfoEXT-dstImage-07275</span><br>

For each element of <code>pRegions</code>, <code>dstOffset.y</code> <strong>must</strong> be a
multiple of the <a href="formats.html#formats-compatibility-classes" class="xref page">texel block extent    height</a> of the <a href="formats.html#VkFormat" class="xref page">VkFormat</a> of <code>dstImage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageToImageInfoEXT-dstImage-07276" href="#VUID-VkCopyImageToImageInfoEXT-dstImage-07276"></a> <span class="vuid">VUID-VkCopyImageToImageInfoEXT-dstImage-07276</span><br>

For each element of <code>pRegions</code>, <code>dstOffset.z</code> <strong>must</strong> be a
multiple of the <a href="formats.html#formats-compatibility-classes" class="xref page">texel block extent    depth</a> of the <a href="formats.html#VkFormat" class="xref page">VkFormat</a> of <code>dstImage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageToImageInfoEXT-dstImage-00207" href="#VUID-VkCopyImageToImageInfoEXT-dstImage-00207"></a> <span class="vuid">VUID-VkCopyImageToImageInfoEXT-dstImage-00207</span><br>

For each element of <code>pRegions</code>, if the sum of <code>dstOffset.x</code>
and <code>extent.width</code> does not equal the width of the subresource
specified by <code>srcSubresource</code>, <code>extent.width</code> <strong>must</strong> be a
multiple of the <a href="formats.html#formats-compatibility-classes" class="xref page">texel block extent    width</a> of the <a href="formats.html#VkFormat" class="xref page">VkFormat</a> of <code>dstImage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageToImageInfoEXT-dstImage-00208" href="#VUID-VkCopyImageToImageInfoEXT-dstImage-00208"></a> <span class="vuid">VUID-VkCopyImageToImageInfoEXT-dstImage-00208</span><br>

For each element of <code>pRegions</code>, if the sum of <code>dstOffset.y</code>
and <code>extent.height</code> does not equal the height of the subresource
specified by <code>srcSubresource</code>, <code>extent.height</code> <strong>must</strong> be a
multiple of the <a href="formats.html#formats-compatibility-classes" class="xref page">texel block extent    height</a> of the <a href="formats.html#VkFormat" class="xref page">VkFormat</a> of <code>dstImage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageToImageInfoEXT-dstImage-00209" href="#VUID-VkCopyImageToImageInfoEXT-dstImage-00209"></a> <span class="vuid">VUID-VkCopyImageToImageInfoEXT-dstImage-00209</span><br>

For each element of <code>pRegions</code>, if the sum of <code>dstOffset.z</code>
and <code>extent.depth</code> does not equal the depth of the subresource
specified by <code>srcSubresource</code>, <code>extent.depth</code> <strong>must</strong> be a
multiple of the <a href="formats.html#formats-compatibility-classes" class="xref page">texel block extent    depth</a> of the <a href="formats.html#VkFormat" class="xref page">VkFormat</a> of <code>dstImage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageToImageInfoEXT-dstSubresource-09105" href="#VUID-VkCopyImageToImageInfoEXT-dstSubresource-09105"></a> <span class="vuid">VUID-VkCopyImageToImageInfoEXT-dstSubresource-09105</span><br>

For each element of <code>pRegions</code>, <code>dstSubresource.aspectMask</code>
<strong>must</strong> specify aspects present in <code>dstImage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageToImageInfoEXT-dstImage-07981" href="#VUID-VkCopyImageToImageInfoEXT-dstImage-07981"></a> <span class="vuid">VUID-VkCopyImageToImageInfoEXT-dstImage-07981</span><br>

If <code>dstImage</code> has a
<a href="formats.html#formats-requiring-sampler-ycbcr-conversion" class="xref page">multi-planar image    format</a>, then for each element of <code>pRegions</code>,
<code>dstSubresource.aspectMask</code> <strong>must</strong> be a single valid
<a href="formats.html#formats-planes-image-aspect" class="xref page">multi-planar aspect mask</a> bit</p>
</li>
<li>
<p><a id="VUID-VkCopyImageToImageInfoEXT-dstImage-07983" href="#VUID-VkCopyImageToImageInfoEXT-dstImage-07983"></a> <span class="vuid">VUID-VkCopyImageToImageInfoEXT-dstImage-07983</span><br>

If <code>dstImage</code> is of type <code>VK_IMAGE_TYPE_3D</code>, for each
element of <code>pRegions</code>, <code>dstSubresource.baseArrayLayer</code> <strong>must</strong>
be <code>0</code> and <code>dstSubresource.layerCount</code> <strong>must</strong> be <code>1</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageToImageInfoEXT-srcImageLayout-09070" href="#VUID-VkCopyImageToImageInfoEXT-srcImageLayout-09070"></a> <span class="vuid">VUID-VkCopyImageToImageInfoEXT-srcImageLayout-09070</span><br>

<code>srcImageLayout</code> <strong>must</strong> specify the current layout of the image
subresources of <code>srcImage</code> specified in <code>pRegions</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageToImageInfoEXT-dstImageLayout-09071" href="#VUID-VkCopyImageToImageInfoEXT-dstImageLayout-09071"></a> <span class="vuid">VUID-VkCopyImageToImageInfoEXT-dstImageLayout-09071</span><br>

<code>dstImageLayout</code> <strong>must</strong> specify the current layout of the image
subresources of <code>dstImage</code> specified in <code>pRegions</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageToImageInfoEXT-srcImageLayout-09072" href="#VUID-VkCopyImageToImageInfoEXT-srcImageLayout-09072"></a> <span class="vuid">VUID-VkCopyImageToImageInfoEXT-srcImageLayout-09072</span><br>

<code>srcImageLayout</code> <strong>must</strong> be one of the image layouts returned in
<a href="limits.html#VkPhysicalDeviceHostImageCopyPropertiesEXT" class="xref page">VkPhysicalDeviceHostImageCopyPropertiesEXT</a>::<code>pCopySrcLayouts</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageToImageInfoEXT-dstImageLayout-09073" href="#VUID-VkCopyImageToImageInfoEXT-dstImageLayout-09073"></a> <span class="vuid">VUID-VkCopyImageToImageInfoEXT-dstImageLayout-09073</span><br>

<code>dstImageLayout</code> <strong>must</strong> be one of the image layouts returned in
<a href="limits.html#VkPhysicalDeviceHostImageCopyPropertiesEXT" class="xref page">VkPhysicalDeviceHostImageCopyPropertiesEXT</a>::<code>pCopyDstLayouts</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkCopyImageToImageInfoEXT-sType-sType" href="#VUID-VkCopyImageToImageInfoEXT-sType-sType"></a> <span class="vuid">VUID-VkCopyImageToImageInfoEXT-sType-sType</span><br>
 <code>sType</code> <strong>must</strong> be <code>VK_STRUCTURE_TYPE_COPY_IMAGE_TO_IMAGE_INFO_EXT</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageToImageInfoEXT-pNext-pNext" href="#VUID-VkCopyImageToImageInfoEXT-pNext-pNext"></a> <span class="vuid">VUID-VkCopyImageToImageInfoEXT-pNext-pNext</span><br>
 <code>pNext</code> <strong>must</strong> be <code>NULL</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageToImageInfoEXT-flags-parameter" href="#VUID-VkCopyImageToImageInfoEXT-flags-parameter"></a> <span class="vuid">VUID-VkCopyImageToImageInfoEXT-flags-parameter</span><br>
 <code>flags</code> <strong>must</strong> be a valid combination of <a href="#VkHostImageCopyFlagBitsEXT">VkHostImageCopyFlagBitsEXT</a> values</p>
</li>
<li>
<p><a id="VUID-VkCopyImageToImageInfoEXT-srcImage-parameter" href="#VUID-VkCopyImageToImageInfoEXT-srcImage-parameter"></a> <span class="vuid">VUID-VkCopyImageToImageInfoEXT-srcImage-parameter</span><br>
 <code>srcImage</code> <strong>must</strong> be a valid <a href="resources.html#VkImage" class="xref page">VkImage</a> handle</p>
</li>
<li>
<p><a id="VUID-VkCopyImageToImageInfoEXT-srcImageLayout-parameter" href="#VUID-VkCopyImageToImageInfoEXT-srcImageLayout-parameter"></a> <span class="vuid">VUID-VkCopyImageToImageInfoEXT-srcImageLayout-parameter</span><br>
 <code>srcImageLayout</code> <strong>must</strong> be a valid <a href="resources.html#VkImageLayout" class="xref page">VkImageLayout</a> value</p>
</li>
<li>
<p><a id="VUID-VkCopyImageToImageInfoEXT-dstImage-parameter" href="#VUID-VkCopyImageToImageInfoEXT-dstImage-parameter"></a> <span class="vuid">VUID-VkCopyImageToImageInfoEXT-dstImage-parameter</span><br>
 <code>dstImage</code> <strong>must</strong> be a valid <a href="resources.html#VkImage" class="xref page">VkImage</a> handle</p>
</li>
<li>
<p><a id="VUID-VkCopyImageToImageInfoEXT-dstImageLayout-parameter" href="#VUID-VkCopyImageToImageInfoEXT-dstImageLayout-parameter"></a> <span class="vuid">VUID-VkCopyImageToImageInfoEXT-dstImageLayout-parameter</span><br>
 <code>dstImageLayout</code> <strong>must</strong> be a valid <a href="resources.html#VkImageLayout" class="xref page">VkImageLayout</a> value</p>
</li>
<li>
<p><a id="VUID-VkCopyImageToImageInfoEXT-pRegions-parameter" href="#VUID-VkCopyImageToImageInfoEXT-pRegions-parameter"></a> <span class="vuid">VUID-VkCopyImageToImageInfoEXT-pRegions-parameter</span><br>
 <code>pRegions</code> <strong>must</strong> be a valid pointer to an array of <code>regionCount</code> valid <a href="#VkImageCopy2">VkImageCopy2</a> structures</p>
</li>
<li>
<p><a id="VUID-VkCopyImageToImageInfoEXT-regionCount-arraylength" href="#VUID-VkCopyImageToImageInfoEXT-regionCount-arraylength"></a> <span class="vuid">VUID-VkCopyImageToImageInfoEXT-regionCount-arraylength</span><br>
 <code>regionCount</code> <strong>must</strong> be greater than <code>0</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageToImageInfoEXT-commonparent" href="#VUID-VkCopyImageToImageInfoEXT-commonparent"></a> <span class="vuid">VUID-VkCopyImageToImageInfoEXT-commonparent</span><br>
 Both of <code>dstImage</code>, and <code>srcImage</code> <strong>must</strong> have been created, allocated, or retrieved from the same <a href="devsandqueues.html#VkDevice" class="xref page">VkDevice</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="indirect-copies"><a class="anchor" href="#indirect-copies"></a>Indirect Copies</h2>
<div class="sectionbody">
<div class="paragraph">
<p>An application can use indirect copies when the copy parameters are not
known during the command buffer creation time.</p>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>To copy data between two memory regions by specifying copy parameters
indirectly in a buffer, call:</p>
</div>
<div id="vkCmdCopyMemoryIndirectNV" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_NV_copy_memory_indirect
void vkCmdCopyMemoryIndirectNV(
    VkCommandBuffer                             commandBuffer,
    VkDeviceAddress                             copyBufferAddress,
    uint32_t                                    copyCount,
    uint32_t                                    stride);</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>commandBuffer</code> is the command buffer into which the command will be
recorded.</p>
</li>
<li>
<p><code>copyBufferAddress</code> is the buffer address specifying the copy
parameters.
This buffer is laid out in memory as an array of
<a href="#VkCopyMemoryIndirectCommandNV">VkCopyMemoryIndirectCommandNV</a> structures.</p>
</li>
<li>
<p><code>copyCount</code> is the number of copies to execute, and can be zero.</p>
</li>
<li>
<p><code>stride</code> is the stride in bytes between successive sets of copy
parameters.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Each region read from <code>copyBufferAddress</code> is copied from the source
region to the specified destination region.
The results are <strong>undefined</strong> if any of the source and destination regions
overlap in memory.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCmdCopyMemoryIndirectNV-None-07653" href="#VUID-vkCmdCopyMemoryIndirectNV-None-07653"></a> <span class="vuid">VUID-vkCmdCopyMemoryIndirectNV-None-07653</span><br>

The <a href="features.html#features-indirectCopy" class="xref page"><code>indirectCopy</code></a> feature <strong>must</strong> be
enabled</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyMemoryIndirectNV-copyBufferAddress-07654" href="#VUID-vkCmdCopyMemoryIndirectNV-copyBufferAddress-07654"></a> <span class="vuid">VUID-vkCmdCopyMemoryIndirectNV-copyBufferAddress-07654</span><br>

<code>copyBufferAddress</code> <strong>must</strong> be 4 byte aligned</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyMemoryIndirectNV-stride-07655" href="#VUID-vkCmdCopyMemoryIndirectNV-stride-07655"></a> <span class="vuid">VUID-vkCmdCopyMemoryIndirectNV-stride-07655</span><br>

<code>stride</code> <strong>must</strong> be a multiple of <code>4</code> and <strong>must</strong> be greater than or
equal to sizeof(<code>VkCopyMemoryIndirectCommandNV</code>)</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyMemoryIndirectNV-commandBuffer-07656" href="#VUID-vkCmdCopyMemoryIndirectNV-commandBuffer-07656"></a> <span class="vuid">VUID-vkCmdCopyMemoryIndirectNV-commandBuffer-07656</span><br>

The <a href="cmdbuffers.html#VkCommandPool" class="xref page">VkCommandPool</a> that <code>commandBuffer</code> was allocated from
<strong>must</strong> support at least one of the
<a href="limits.html#VkPhysicalDeviceCopyMemoryIndirectPropertiesNV" class="xref page">VkPhysicalDeviceCopyMemoryIndirectPropertiesNV</a>::<code>supportedQueues</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCmdCopyMemoryIndirectNV-commandBuffer-parameter" href="#VUID-vkCmdCopyMemoryIndirectNV-commandBuffer-parameter"></a> <span class="vuid">VUID-vkCmdCopyMemoryIndirectNV-commandBuffer-parameter</span><br>
 <code>commandBuffer</code> <strong>must</strong> be a valid <a href="cmdbuffers.html#VkCommandBuffer" class="xref page">VkCommandBuffer</a> handle</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyMemoryIndirectNV-commandBuffer-recording" href="#VUID-vkCmdCopyMemoryIndirectNV-commandBuffer-recording"></a> <span class="vuid">VUID-vkCmdCopyMemoryIndirectNV-commandBuffer-recording</span><br>
 <code>commandBuffer</code> <strong>must</strong> be in the <a href="cmdbuffers.html#commandbuffers-lifecycle" class="xref page">recording state</a></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyMemoryIndirectNV-commandBuffer-cmdpool" href="#VUID-vkCmdCopyMemoryIndirectNV-commandBuffer-cmdpool"></a> <span class="vuid">VUID-vkCmdCopyMemoryIndirectNV-commandBuffer-cmdpool</span><br>
 The <code>VkCommandPool</code> that <code>commandBuffer</code> was allocated from <strong>must</strong> support transfer, graphics, or compute operations</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyMemoryIndirectNV-renderpass" href="#VUID-vkCmdCopyMemoryIndirectNV-renderpass"></a> <span class="vuid">VUID-vkCmdCopyMemoryIndirectNV-renderpass</span><br>
 This command <strong>must</strong> only be called outside of a render pass instance</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyMemoryIndirectNV-videocoding" href="#VUID-vkCmdCopyMemoryIndirectNV-videocoding"></a> <span class="vuid">VUID-vkCmdCopyMemoryIndirectNV-videocoding</span><br>
 This command <strong>must</strong> only be called outside of a video coding scope</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Host Synchronization</div>
<div class="ulist">
<ul>
<li>
<p>Host access to <code>commandBuffer</code> <strong>must</strong> be externally synchronized</p>
</li>
<li>
<p>Host access to the <code>VkCommandPool</code> that <code>commandBuffer</code> was allocated from <strong>must</strong> be externally synchronized</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Command Properties</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><a href="cmdbuffers.html#VkCommandBufferLevel" class="xref page">Command Buffer Levels</a></th>
<th class="tableblock halign-left valign-top"><a href="renderpass.html#vkCmdBeginRenderPass" class="xref page">Render Pass Scope</a></th>
<th class="tableblock halign-left valign-top"><a href="video_extensions.html#vkCmdBeginVideoCodingKHR" class="xref page">Video Coding Scope</a></th>
<th class="tableblock halign-left valign-top"><a href="devsandqueues.html#VkQueueFlagBits" class="xref page">Supported Queue Types</a></th>
<th class="tableblock halign-left valign-top"><a href="fundamentals.html#fundamentals-queueoperation-command-types" class="xref page">Command Type</a></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Primary<br>
Secondary</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Outside</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Outside</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Transfer<br>
Graphics<br>
Compute</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Action</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The structure describing source and destination memory regions,
<code>VkCopyMemoryIndirectCommandNV</code> is defined as:</p>
</div>
<div id="VkCopyMemoryIndirectCommandNV" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_NV_copy_memory_indirect
typedef struct VkCopyMemoryIndirectCommandNV {
    VkDeviceAddress    srcAddress;
    VkDeviceAddress    dstAddress;
    VkDeviceSize       size;
} VkCopyMemoryIndirectCommandNV;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>srcAddress</code> is the starting address of the source host or device
memory to copy from.</p>
</li>
<li>
<p><code>dstAddress</code> is the starting address of the destination host or
device memory to copy to.</p>
</li>
<li>
<p><code>size</code> is the size of the copy in bytes.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkCopyMemoryIndirectCommandNV-srcAddress-07657" href="#VUID-VkCopyMemoryIndirectCommandNV-srcAddress-07657"></a> <span class="vuid">VUID-VkCopyMemoryIndirectCommandNV-srcAddress-07657</span><br>

The <code>srcAddress</code> <strong>must</strong> be 4 byte aligned</p>
</li>
<li>
<p><a id="VUID-VkCopyMemoryIndirectCommandNV-dstAddress-07658" href="#VUID-VkCopyMemoryIndirectCommandNV-dstAddress-07658"></a> <span class="vuid">VUID-VkCopyMemoryIndirectCommandNV-dstAddress-07658</span><br>

The <code>dstAddress</code> <strong>must</strong> be 4 byte aligned</p>
</li>
<li>
<p><a id="VUID-VkCopyMemoryIndirectCommandNV-size-07659" href="#VUID-VkCopyMemoryIndirectCommandNV-size-07659"></a> <span class="vuid">VUID-VkCopyMemoryIndirectCommandNV-size-07659</span><br>

The <code>size</code> <strong>must</strong> be 4 byte aligned</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>To copy data from a memory region to an image object by specifying copy
parameters in a buffer, call:</p>
</div>
<div id="vkCmdCopyMemoryToImageIndirectNV" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_NV_copy_memory_indirect
void vkCmdCopyMemoryToImageIndirectNV(
    VkCommandBuffer                             commandBuffer,
    VkDeviceAddress                             copyBufferAddress,
    uint32_t                                    copyCount,
    uint32_t                                    stride,
    VkImage                                     dstImage,
    VkImageLayout                               dstImageLayout,
    const VkImageSubresourceLayers*             pImageSubresources);</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>commandBuffer</code> is the command buffer into which the command will be
recorded.</p>
</li>
<li>
<p><code>copyBufferAddress</code> is the buffer address specifying the copy
parameters.
This buffer is laid out in memory as an array of
<a href="#VkCopyMemoryToImageIndirectCommandNV">VkCopyMemoryToImageIndirectCommandNV</a> structures.</p>
</li>
<li>
<p><code>copyCount</code> is the number of copies to execute, and can be zero.</p>
</li>
<li>
<p><code>stride</code> is the byte stride between successive sets of copy
parameters.</p>
</li>
<li>
<p><code>dstImage</code> is the destination image.</p>
</li>
<li>
<p><code>dstImageLayout</code> is the layout of the destination image subresources
for the copy.</p>
</li>
<li>
<p><code>pImageSubresources</code> is a pointer to an array of size
<code>copyCount</code> of <a href="#VkImageSubresourceLayers">VkImageSubresourceLayers</a> used to specify the
specific image subresource of the destination image data for that copy.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Each region in <code>copyBufferAddress</code> is copied from the source memory
region to an image region in the destination image.
If the destination image is of type <code>VK_IMAGE_TYPE_3D</code>, the starting
slice and number of slices to copy are specified in
<code>pImageSubresources</code>::<code>baseArrayLayer</code> and
<code>pImageSubresources</code>::<code>layerCount</code> respectively.
The copy <strong>must</strong> be performed on a queue that supports indirect copy
operations, see <a href="limits.html#VkPhysicalDeviceCopyMemoryIndirectPropertiesNV" class="xref page">VkPhysicalDeviceCopyMemoryIndirectPropertiesNV</a>.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCmdCopyMemoryToImageIndirectNV-None-07660" href="#VUID-vkCmdCopyMemoryToImageIndirectNV-None-07660"></a> <span class="vuid">VUID-vkCmdCopyMemoryToImageIndirectNV-None-07660</span><br>

The <a href="features.html#features-indirectCopy" class="xref page"><code>indirectCopy</code></a> feature <strong>must</strong> be
enabled</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyMemoryToImageIndirectNV-dstImage-07661" href="#VUID-vkCmdCopyMemoryToImageIndirectNV-dstImage-07661"></a> <span class="vuid">VUID-vkCmdCopyMemoryToImageIndirectNV-dstImage-07661</span><br>

<code>dstImage</code> <strong>must</strong> not be a protected image</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyMemoryToImageIndirectNV-aspectMask-07662" href="#VUID-vkCmdCopyMemoryToImageIndirectNV-aspectMask-07662"></a> <span class="vuid">VUID-vkCmdCopyMemoryToImageIndirectNV-aspectMask-07662</span><br>

The <code>aspectMask</code> member for every subresource in
<code>pImageSubresources</code> <strong>must</strong> only have a single bit set</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyMemoryToImageIndirectNV-dstImage-07663" href="#VUID-vkCmdCopyMemoryToImageIndirectNV-dstImage-07663"></a> <span class="vuid">VUID-vkCmdCopyMemoryToImageIndirectNV-dstImage-07663</span><br>

The image region specified by each element in <code>copyBufferAddress</code>
<strong>must</strong> be a region that is contained within <code>dstImage</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyMemoryToImageIndirectNV-dstImage-07664" href="#VUID-vkCmdCopyMemoryToImageIndirectNV-dstImage-07664"></a> <span class="vuid">VUID-vkCmdCopyMemoryToImageIndirectNV-dstImage-07664</span><br>

<code>dstImage</code> <strong>must</strong> have been created with
<code>VK_IMAGE_USAGE_TRANSFER_DST_BIT</code> usage flag</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyMemoryToImageIndirectNV-dstImage-07665" href="#VUID-vkCmdCopyMemoryToImageIndirectNV-dstImage-07665"></a> <span class="vuid">VUID-vkCmdCopyMemoryToImageIndirectNV-dstImage-07665</span><br>

If <code>dstImage</code> is non-sparse then it <strong>must</strong> be bound completely and
contiguously to a single <code>VkDeviceMemory</code> object</p>
</li>
</ul>
</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCmdCopyMemoryToImageIndirectNV-dstImage-07973" href="#VUID-vkCmdCopyMemoryToImageIndirectNV-dstImage-07973"></a> <span class="vuid">VUID-vkCmdCopyMemoryToImageIndirectNV-dstImage-07973</span><br>

<code>dstImage</code> <strong>must</strong> have a sample count equal to
<code>VK_SAMPLE_COUNT_1_BIT</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyMemoryToImageIndirectNV-dstImageLayout-07667" href="#VUID-vkCmdCopyMemoryToImageIndirectNV-dstImageLayout-07667"></a> <span class="vuid">VUID-vkCmdCopyMemoryToImageIndirectNV-dstImageLayout-07667</span><br>

<code>dstImageLayout</code> <strong>must</strong> specify the layout of the image subresources
of <code>dstImage</code> at the time this command is executed on a
<code>VkDevice</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyMemoryToImageIndirectNV-dstImageLayout-07669" href="#VUID-vkCmdCopyMemoryToImageIndirectNV-dstImageLayout-07669"></a> <span class="vuid">VUID-vkCmdCopyMemoryToImageIndirectNV-dstImageLayout-07669</span><br>

<code>dstImageLayout</code> <strong>must</strong> be
<code>VK_IMAGE_LAYOUT_TRANSFER_DST_OPTIMAL</code>,
<code>VK_IMAGE_LAYOUT_GENERAL</code>, or
<code>VK_IMAGE_LAYOUT_SHARED_PRESENT_KHR</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyMemoryToImageIndirectNV-mipLevel-07670" href="#VUID-vkCmdCopyMemoryToImageIndirectNV-mipLevel-07670"></a> <span class="vuid">VUID-vkCmdCopyMemoryToImageIndirectNV-mipLevel-07670</span><br>

The specified <code>mipLevel</code> of each region <strong>must</strong> be less than the
<code>mipLevels</code> specified in <a href="resources.html#VkImageCreateInfo" class="xref page">VkImageCreateInfo</a> when <code>dstImage</code>
was created</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyMemoryToImageIndirectNV-layerCount-08764" href="#VUID-vkCmdCopyMemoryToImageIndirectNV-layerCount-08764"></a> <span class="vuid">VUID-vkCmdCopyMemoryToImageIndirectNV-layerCount-08764</span><br>

If <code>layerCount</code> is not <code>VK_REMAINING_ARRAY_LAYERS</code>, the
specified <code>baseArrayLayer</code> +  <code>layerCount</code> of each region
<strong>must</strong> be less than or equal to the <code>arrayLayers</code> specified in
<a href="resources.html#VkImageCreateInfo" class="xref page">VkImageCreateInfo</a> when <code>dstImage</code> was created</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyMemoryToImageIndirectNV-imageOffset-07672" href="#VUID-vkCmdCopyMemoryToImageIndirectNV-imageOffset-07672"></a> <span class="vuid">VUID-vkCmdCopyMemoryToImageIndirectNV-imageOffset-07672</span><br>

The <code>imageOffset</code> and <code>imageExtent</code> members of each region <strong>must</strong>
respect the image transfer granularity requirements of
<code>commandBuffer</code>&#8217;s command pool&#8217;s queue family, as described in
<a href="devsandqueues.html#VkQueueFamilyProperties" class="xref page">VkQueueFamilyProperties</a></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyMemoryToImageIndirectNV-dstImage-07673" href="#VUID-vkCmdCopyMemoryToImageIndirectNV-dstImage-07673"></a> <span class="vuid">VUID-vkCmdCopyMemoryToImageIndirectNV-dstImage-07673</span><br>

<code>dstImage</code> <strong>must</strong> not have been created with <code>flags</code> containing
<code>VK_IMAGE_CREATE_SUBSAMPLED_BIT_EXT</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyMemoryToImageIndirectNV-commandBuffer-07674" href="#VUID-vkCmdCopyMemoryToImageIndirectNV-commandBuffer-07674"></a> <span class="vuid">VUID-vkCmdCopyMemoryToImageIndirectNV-commandBuffer-07674</span><br>

If the queue family used to create the <a href="cmdbuffers.html#VkCommandPool" class="xref page">VkCommandPool</a> which
<code>commandBuffer</code> was allocated from does not support
<code>VK_QUEUE_GRAPHICS_BIT</code>, for each region, the <code>aspectMask</code>
member of <code>pImageSubresources</code> <strong>must</strong> not be
<code>VK_IMAGE_ASPECT_DEPTH_BIT</code> or <code>VK_IMAGE_ASPECT_STENCIL_BIT</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyMemoryToImageIndirectNV-imageOffset-07675" href="#VUID-vkCmdCopyMemoryToImageIndirectNV-imageOffset-07675"></a> <span class="vuid">VUID-vkCmdCopyMemoryToImageIndirectNV-imageOffset-07675</span><br>

For each region in <code>copyBufferAddress</code>, <code>imageOffset.y</code> and
<span class="eq">(<code>imageExtent.height</code> +  <code>imageOffset.y</code>)</span> <strong>must</strong> both
be greater than or equal to <code>0</code> and less than or equal to the height of
the specified subresource</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyMemoryToImageIndirectNV-offset-07676" href="#VUID-vkCmdCopyMemoryToImageIndirectNV-offset-07676"></a> <span class="vuid">VUID-vkCmdCopyMemoryToImageIndirectNV-offset-07676</span><br>

<code>offset</code> <strong>must</strong> be 4 byte aligned</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyMemoryToImageIndirectNV-stride-07677" href="#VUID-vkCmdCopyMemoryToImageIndirectNV-stride-07677"></a> <span class="vuid">VUID-vkCmdCopyMemoryToImageIndirectNV-stride-07677</span><br>

<code>stride</code> <strong>must</strong> be a multiple of <code>4</code> and <strong>must</strong> be greater than or
equal to sizeof(<code>VkCopyMemoryToImageIndirectCommandNV</code>)</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCmdCopyMemoryToImageIndirectNV-commandBuffer-parameter" href="#VUID-vkCmdCopyMemoryToImageIndirectNV-commandBuffer-parameter"></a> <span class="vuid">VUID-vkCmdCopyMemoryToImageIndirectNV-commandBuffer-parameter</span><br>
 <code>commandBuffer</code> <strong>must</strong> be a valid <a href="cmdbuffers.html#VkCommandBuffer" class="xref page">VkCommandBuffer</a> handle</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyMemoryToImageIndirectNV-dstImage-parameter" href="#VUID-vkCmdCopyMemoryToImageIndirectNV-dstImage-parameter"></a> <span class="vuid">VUID-vkCmdCopyMemoryToImageIndirectNV-dstImage-parameter</span><br>
 <code>dstImage</code> <strong>must</strong> be a valid <a href="resources.html#VkImage" class="xref page">VkImage</a> handle</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyMemoryToImageIndirectNV-dstImageLayout-parameter" href="#VUID-vkCmdCopyMemoryToImageIndirectNV-dstImageLayout-parameter"></a> <span class="vuid">VUID-vkCmdCopyMemoryToImageIndirectNV-dstImageLayout-parameter</span><br>
 <code>dstImageLayout</code> <strong>must</strong> be a valid <a href="resources.html#VkImageLayout" class="xref page">VkImageLayout</a> value</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyMemoryToImageIndirectNV-pImageSubresources-parameter" href="#VUID-vkCmdCopyMemoryToImageIndirectNV-pImageSubresources-parameter"></a> <span class="vuid">VUID-vkCmdCopyMemoryToImageIndirectNV-pImageSubresources-parameter</span><br>
 <code>pImageSubresources</code> <strong>must</strong> be a valid pointer to an array of <code>copyCount</code> valid <a href="#VkImageSubresourceLayers">VkImageSubresourceLayers</a> structures</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyMemoryToImageIndirectNV-commandBuffer-recording" href="#VUID-vkCmdCopyMemoryToImageIndirectNV-commandBuffer-recording"></a> <span class="vuid">VUID-vkCmdCopyMemoryToImageIndirectNV-commandBuffer-recording</span><br>
 <code>commandBuffer</code> <strong>must</strong> be in the <a href="cmdbuffers.html#commandbuffers-lifecycle" class="xref page">recording state</a></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyMemoryToImageIndirectNV-commandBuffer-cmdpool" href="#VUID-vkCmdCopyMemoryToImageIndirectNV-commandBuffer-cmdpool"></a> <span class="vuid">VUID-vkCmdCopyMemoryToImageIndirectNV-commandBuffer-cmdpool</span><br>
 The <code>VkCommandPool</code> that <code>commandBuffer</code> was allocated from <strong>must</strong> support transfer, graphics, or compute operations</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyMemoryToImageIndirectNV-renderpass" href="#VUID-vkCmdCopyMemoryToImageIndirectNV-renderpass"></a> <span class="vuid">VUID-vkCmdCopyMemoryToImageIndirectNV-renderpass</span><br>
 This command <strong>must</strong> only be called outside of a render pass instance</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyMemoryToImageIndirectNV-videocoding" href="#VUID-vkCmdCopyMemoryToImageIndirectNV-videocoding"></a> <span class="vuid">VUID-vkCmdCopyMemoryToImageIndirectNV-videocoding</span><br>
 This command <strong>must</strong> only be called outside of a video coding scope</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyMemoryToImageIndirectNV-copyCount-arraylength" href="#VUID-vkCmdCopyMemoryToImageIndirectNV-copyCount-arraylength"></a> <span class="vuid">VUID-vkCmdCopyMemoryToImageIndirectNV-copyCount-arraylength</span><br>
 <code>copyCount</code> <strong>must</strong> be greater than <code>0</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyMemoryToImageIndirectNV-commonparent" href="#VUID-vkCmdCopyMemoryToImageIndirectNV-commonparent"></a> <span class="vuid">VUID-vkCmdCopyMemoryToImageIndirectNV-commonparent</span><br>
 Both of <code>commandBuffer</code>, and <code>dstImage</code> <strong>must</strong> have been created, allocated, or retrieved from the same <a href="devsandqueues.html#VkDevice" class="xref page">VkDevice</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Host Synchronization</div>
<div class="ulist">
<ul>
<li>
<p>Host access to <code>commandBuffer</code> <strong>must</strong> be externally synchronized</p>
</li>
<li>
<p>Host access to the <code>VkCommandPool</code> that <code>commandBuffer</code> was allocated from <strong>must</strong> be externally synchronized</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Command Properties</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><a href="cmdbuffers.html#VkCommandBufferLevel" class="xref page">Command Buffer Levels</a></th>
<th class="tableblock halign-left valign-top"><a href="renderpass.html#vkCmdBeginRenderPass" class="xref page">Render Pass Scope</a></th>
<th class="tableblock halign-left valign-top"><a href="video_extensions.html#vkCmdBeginVideoCodingKHR" class="xref page">Video Coding Scope</a></th>
<th class="tableblock halign-left valign-top"><a href="devsandqueues.html#VkQueueFlagBits" class="xref page">Supported Queue Types</a></th>
<th class="tableblock halign-left valign-top"><a href="fundamentals.html#fundamentals-queueoperation-command-types" class="xref page">Command Type</a></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Primary<br>
Secondary</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Outside</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Outside</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Transfer<br>
Graphics<br>
Compute</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Action</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>VkCopyMemoryToImageIndirectCommandNV</code> is defined as:</p>
</div>
<div id="VkCopyMemoryToImageIndirectCommandNV" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_NV_copy_memory_indirect
typedef struct VkCopyMemoryToImageIndirectCommandNV {
    VkDeviceAddress             srcAddress;
    uint32_t                    bufferRowLength;
    uint32_t                    bufferImageHeight;
    VkImageSubresourceLayers    imageSubresource;
    VkOffset3D                  imageOffset;
    VkExtent3D                  imageExtent;
} VkCopyMemoryToImageIndirectCommandNV;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>srcAddress</code> is the starting address of the source host or device
memory to copy from.</p>
</li>
<li>
<p><code>bufferRowLength</code> and <code>bufferImageHeight</code> specify in texels a
subregion of a larger two- or three-dimensional image in buffer memory,
and control the addressing calculations.
If either of these values is zero, that aspect of the buffer memory is
considered to be tightly packed according to the <code>imageExtent</code>.</p>
</li>
<li>
<p><code>imageSubresource</code> is a <a href="#VkImageSubresourceLayers">VkImageSubresourceLayers</a> used to
specify the specific image subresources of the image used for the
destination image data, which <strong>must</strong> match the values specified in
<code>pImageSubresources</code> parameter of
<a href="#vkCmdCopyMemoryToImageIndirectNV">vkCmdCopyMemoryToImageIndirectNV</a> during command recording.</p>
</li>
<li>
<p><code>imageOffset</code> selects the initial <code>x</code>, <code>y</code>, <code>z</code> offsets
in texels of the sub-region of the destination image data.</p>
</li>
<li>
<p><code>imageExtent</code> is the size in texels of the destination image in
<code>width</code>, <code>height</code> and <code>depth</code>.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkCopyMemoryToImageIndirectCommandNV-srcAddress-07678" href="#VUID-VkCopyMemoryToImageIndirectCommandNV-srcAddress-07678"></a> <span class="vuid">VUID-VkCopyMemoryToImageIndirectCommandNV-srcAddress-07678</span><br>

The <code>srcAddress</code> <strong>must</strong> be 4 byte aligned</p>
</li>
<li>
<p><a id="VUID-VkCopyMemoryToImageIndirectCommandNV-bufferRowLength-07679" href="#VUID-VkCopyMemoryToImageIndirectCommandNV-bufferRowLength-07679"></a> <span class="vuid">VUID-VkCopyMemoryToImageIndirectCommandNV-bufferRowLength-07679</span><br>

<code>bufferRowLength</code> <strong>must</strong> be <code>0</code>, or greater than or equal to the
<code>width</code> member of <code>imageExtent</code></p>
</li>
<li>
<p><a id="VUID-VkCopyMemoryToImageIndirectCommandNV-bufferImageHeight-07680" href="#VUID-VkCopyMemoryToImageIndirectCommandNV-bufferImageHeight-07680"></a> <span class="vuid">VUID-VkCopyMemoryToImageIndirectCommandNV-bufferImageHeight-07680</span><br>

<code>bufferImageHeight</code> <strong>must</strong> be <code>0</code>, or greater than or equal to the
<code>height</code> member of <code>imageExtent</code></p>
</li>
<li>
<p><a id="VUID-VkCopyMemoryToImageIndirectCommandNV-imageOffset-07681" href="#VUID-VkCopyMemoryToImageIndirectCommandNV-imageOffset-07681"></a> <span class="vuid">VUID-VkCopyMemoryToImageIndirectCommandNV-imageOffset-07681</span><br>

<code>imageOffset</code> <strong>must</strong> specify a valid offset in the destination image</p>
</li>
<li>
<p><a id="VUID-VkCopyMemoryToImageIndirectCommandNV-imageExtent-07682" href="#VUID-VkCopyMemoryToImageIndirectCommandNV-imageExtent-07682"></a> <span class="vuid">VUID-VkCopyMemoryToImageIndirectCommandNV-imageExtent-07682</span><br>

<code>imageExtent</code> <strong>must</strong> specify a valid region in the destination image
and can be <code>0</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkCopyMemoryToImageIndirectCommandNV-imageSubresource-parameter" href="#VUID-VkCopyMemoryToImageIndirectCommandNV-imageSubresource-parameter"></a> <span class="vuid">VUID-VkCopyMemoryToImageIndirectCommandNV-imageSubresource-parameter</span><br>
 <code>imageSubresource</code> <strong>must</strong> be a valid <a href="#VkImageSubresourceLayers">VkImageSubresourceLayers</a> structure</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="copies-imagescaling"><a class="anchor" href="#copies-imagescaling"></a>Image Copies with Scaling</h2>
<div class="sectionbody">
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>To copy regions of a source image into a destination image, potentially
performing format conversion, arbitrary scaling, and filtering, call:</p>
</div>
<div id="vkCmdBlitImage" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_VERSION_1_0
void vkCmdBlitImage(
    VkCommandBuffer                             commandBuffer,
    VkImage                                     srcImage,
    VkImageLayout                               srcImageLayout,
    VkImage                                     dstImage,
    VkImageLayout                               dstImageLayout,
    uint32_t                                    regionCount,
    const VkImageBlit*                          pRegions,
    VkFilter                                    filter);</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>commandBuffer</code> is the command buffer into which the command will be
recorded.</p>
</li>
<li>
<p><code>srcImage</code> is the source image.</p>
</li>
<li>
<p><code>srcImageLayout</code> is the layout of the source image subresources for
the blit.</p>
</li>
<li>
<p><code>dstImage</code> is the destination image.</p>
</li>
<li>
<p><code>dstImageLayout</code> is the layout of the destination image subresources
for the blit.</p>
</li>
<li>
<p><code>regionCount</code> is the number of regions to blit.</p>
</li>
<li>
<p><code>pRegions</code> is a pointer to an array of <a href="#VkImageBlit">VkImageBlit</a> structures
specifying the regions to blit.</p>
</li>
<li>
<p><code>filter</code> is a <a href="samplers.html#VkFilter" class="xref page">VkFilter</a> specifying the filter to apply if the
blits require scaling.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><code>vkCmdBlitImage</code> <strong>must</strong> not be used for multisampled source or
destination images.
Use <a href="#vkCmdResolveImage">vkCmdResolveImage</a> for this purpose.</p>
</div>
<div class="paragraph">
<p>As the sizes of the source and destination extents <strong>can</strong> differ in any
dimension, texels in the source extent are scaled and filtered to the
destination extent.
Scaling occurs via the following operations:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>For each destination texel, the integer coordinate of that texel is
converted to an unnormalized texture coordinate, using the effective
inverse of the equations described in
<a href="textures.html#textures-unnormalized-to-integer" class="xref page">unnormalized to integer    conversion</a>:</p>
<div class="dlist">
<dl>
<dt class="hdlist1"></dt>
<dd>
<p><span class="eq">u<sub>base</sub> = i +  ½</span></p>
</dd>
<dt class="hdlist1"></dt>
<dd>
<p><span class="eq">v<sub>base</sub> = j +  ½</span></p>
</dd>
<dt class="hdlist1"></dt>
<dd>
<p><span class="eq">w<sub>base</sub> = k +  ½</span></p>
</dd>
</dl>
</div>
</li>
<li>
<p>These base coordinates are then offset by the first destination offset:</p>
<div class="dlist">
<dl>
<dt class="hdlist1"></dt>
<dd>
<p><span class="eq">u<sub>offset</sub> = u<sub>base</sub> - x<sub>dst0</sub></span></p>
</dd>
<dt class="hdlist1"></dt>
<dd>
<p><span class="eq">v<sub>offset</sub> = v<sub>base</sub> - y<sub>dst0</sub></span></p>
</dd>
<dt class="hdlist1"></dt>
<dd>
<p><span class="eq">w<sub>offset</sub> = w<sub>base</sub> - z<sub>dst0</sub></span></p>
</dd>
<dt class="hdlist1"></dt>
<dd>
<p><span class="eq">a<sub>offset</sub> = a - <code>baseArrayCount</code><sub>dst</sub></span></p>
</dd>
</dl>
</div>
</li>
<li>
<p>The scale is determined from the source and destination regions, and
applied to the offset coordinates:</p>
<div class="dlist">
<dl>
<dt class="hdlist1"></dt>
<dd>
<p><span class="eq">scale<sub>u</sub> = (x<sub>src1</sub> - x<sub>src0</sub>) / (x<sub>dst1</sub> - x<sub>dst0</sub>)</span></p>
</dd>
<dt class="hdlist1"></dt>
<dd>
<p><span class="eq">scale<sub>v</sub> = (y<sub>src1</sub> - y<sub>src0</sub>) / (y<sub>dst1</sub> - y<sub>dst0</sub>)</span></p>
</dd>
<dt class="hdlist1"></dt>
<dd>
<p><span class="eq">scale<sub>w</sub> = (z<sub>src1</sub> - z<sub>src0</sub>) / (z<sub>dst1</sub> - z<sub>dst0</sub>)</span></p>
</dd>
<dt class="hdlist1"></dt>
<dd>
<p><span class="eq">u<sub>scaled</sub> = u<sub>offset</sub> × scale<sub>u</sub></span></p>
</dd>
<dt class="hdlist1"></dt>
<dd>
<p><span class="eq">v<sub>scaled</sub> = v<sub>offset</sub> × scale<sub>v</sub></span></p>
</dd>
<dt class="hdlist1"></dt>
<dd>
<p><span class="eq">w<sub>scaled</sub> = w<sub>offset</sub> × scale<sub>w</sub></span></p>
</dd>
</dl>
</div>
</li>
<li>
<p>Finally the source offset is added to the scaled coordinates, to
determine the final unnormalized coordinates used to sample from
<code>srcImage</code>:</p>
<div class="dlist">
<dl>
<dt class="hdlist1"></dt>
<dd>
<p><span class="eq">u = u<sub>scaled</sub> +  x<sub>src0</sub></span></p>
</dd>
<dt class="hdlist1"></dt>
<dd>
<p><span class="eq">v = v<sub>scaled</sub> +  y<sub>src0</sub></span></p>
</dd>
<dt class="hdlist1"></dt>
<dd>
<p><span class="eq">w = w<sub>scaled</sub> +  z<sub>src0</sub></span></p>
</dd>
<dt class="hdlist1"></dt>
<dd>
<p><span class="eq">q = <code>mipLevel</code></span></p>
</dd>
<dt class="hdlist1"></dt>
<dd>
<p><span class="eq">a = a<sub>offset</sub> +  <code>baseArrayCount</code><sub>src</sub></span></p>
</dd>
</dl>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>These coordinates are used to sample from the source image, as described in
<a href="textures.html#textures" class="xref page">Image Operations chapter</a>, with the filter mode equal to that
of <code>filter</code>, a mipmap mode of <code>VK_SAMPLER_MIPMAP_MODE_NEAREST</code> and
an address mode of <code>VK_SAMPLER_ADDRESS_MODE_CLAMP_TO_EDGE</code>.
Implementations <strong>must</strong> clamp at the edge of the source image, and <strong>may</strong>
additionally clamp to the edge of the source region.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="title">Note</div>
<div class="paragraph">
<p>Due to allowable rounding errors in the generation of the source texture
coordinates, it is not always possible to guarantee exactly which source
texels will be sampled for a given blit.
As rounding errors are implementation-dependent, the exact results of a
blitting operation are also implementation-dependent.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Blits are done layer by layer starting with the <code>baseArrayLayer</code> member
of <code>srcSubresource</code> for the source and <code>dstSubresource</code> for the
destination.
<code>layerCount</code> layers are blitted to the destination image.</p>
</div>
<div class="paragraph">
<p>When blitting 3D textures, slices in the destination region bounded by
<code>dstOffsets</code>[0].z and <code>dstOffsets</code>[1].z are sampled from slices in
the source region bounded by <code>srcOffsets</code>[0].z and
<code>srcOffsets</code>[1].z.
If the <code>filter</code> parameter is <code>VK_FILTER_LINEAR</code> then the value
sampled from the source image is taken by doing linear filtering using the
interpolated <strong>z</strong> coordinate represented by <strong>w</strong> in the previous equations.
If the <code>filter</code> parameter is <code>VK_FILTER_NEAREST</code> then the value
sampled from the source image is taken from the single nearest slice, with
an implementation-dependent arithmetic rounding mode.</p>
</div>
<div class="paragraph">
<p>The following filtering and conversion rules apply:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Integer formats <strong>can</strong> only be converted to other integer formats with the
same signedness.</p>
</li>
<li>
<p>No format conversion is supported between depth/stencil images.
The formats <strong>must</strong> match.</p>
</li>
<li>
<p>Format conversions on unorm, snorm, scaled and packed float formats of
the copied aspect of the image are performed by first converting the
pixels to float values.</p>
</li>
<li>
<p>For sRGB source formats, nonlinear RGB values are converted to linear
representation prior to filtering.</p>
</li>
<li>
<p>After filtering, the float values are first clamped and then cast to the
destination image format.
In case of sRGB destination format, linear RGB values are converted to
nonlinear representation before writing the pixel to the image.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Signed and unsigned integers are converted by first clamping to the
representable range of the destination format, then casting the value.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCmdBlitImage-commandBuffer-01834" href="#VUID-vkCmdBlitImage-commandBuffer-01834"></a> <span class="vuid">VUID-vkCmdBlitImage-commandBuffer-01834</span><br>

If <code>commandBuffer</code> is an unprotected command buffer and
<a href="devsandqueues.html#limits-protectedNoFault" class="xref page"><code>protectedNoFault</code></a> is not supported,
<code>srcImage</code> <strong>must</strong> not be a protected image</p>
</li>
<li>
<p><a id="VUID-vkCmdBlitImage-commandBuffer-01835" href="#VUID-vkCmdBlitImage-commandBuffer-01835"></a> <span class="vuid">VUID-vkCmdBlitImage-commandBuffer-01835</span><br>

If <code>commandBuffer</code> is an unprotected command buffer and
<a href="devsandqueues.html#limits-protectedNoFault" class="xref page"><code>protectedNoFault</code></a> is not supported,
<code>dstImage</code> <strong>must</strong> not be a protected image</p>
</li>
<li>
<p><a id="VUID-vkCmdBlitImage-commandBuffer-01836" href="#VUID-vkCmdBlitImage-commandBuffer-01836"></a> <span class="vuid">VUID-vkCmdBlitImage-commandBuffer-01836</span><br>

If <code>commandBuffer</code> is a protected command buffer and
<a href="devsandqueues.html#limits-protectedNoFault" class="xref page"><code>protectedNoFault</code></a> is not supported,
<code>dstImage</code> <strong>must</strong> not be an unprotected image</p>
</li>
</ul>
</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCmdBlitImage-pRegions-00215" href="#VUID-vkCmdBlitImage-pRegions-00215"></a> <span class="vuid">VUID-vkCmdBlitImage-pRegions-00215</span><br>

The source region specified by each element of <code>pRegions</code> <strong>must</strong> be a
region that is contained within <code>srcImage</code></p>
</li>
<li>
<p><a id="VUID-vkCmdBlitImage-pRegions-00216" href="#VUID-vkCmdBlitImage-pRegions-00216"></a> <span class="vuid">VUID-vkCmdBlitImage-pRegions-00216</span><br>

The destination region specified by each element of <code>pRegions</code> <strong>must</strong>
be a region that is contained within <code>dstImage</code></p>
</li>
<li>
<p><a id="VUID-vkCmdBlitImage-pRegions-00217" href="#VUID-vkCmdBlitImage-pRegions-00217"></a> <span class="vuid">VUID-vkCmdBlitImage-pRegions-00217</span><br>

The union of all destination regions, specified by the elements of
<code>pRegions</code>, <strong>must</strong> not overlap in memory with any texel that <strong>may</strong> be
sampled during the blit operation</p>
</li>
<li>
<p><a id="VUID-vkCmdBlitImage-srcImage-01999" href="#VUID-vkCmdBlitImage-srcImage-01999"></a> <span class="vuid">VUID-vkCmdBlitImage-srcImage-01999</span><br>

The <a href="resources.html#resources-image-format-features" class="xref page">format features</a> of
<code>srcImage</code> <strong>must</strong> contain <code>VK_FORMAT_FEATURE_BLIT_SRC_BIT</code></p>
</li>
<li>
<p><a id="VUID-vkCmdBlitImage-srcImage-06421" href="#VUID-vkCmdBlitImage-srcImage-06421"></a> <span class="vuid">VUID-vkCmdBlitImage-srcImage-06421</span><br>

<code>srcImage</code> <strong>must</strong> not use a
<a href="formats.html#formats-requiring-sampler-ycbcr-conversion" class="xref page">format that requires a    sampler Y′C<sub>B</sub>C<sub>R</sub> conversion</a></p>
</li>
<li>
<p><a id="VUID-vkCmdBlitImage-srcImage-00219" href="#VUID-vkCmdBlitImage-srcImage-00219"></a> <span class="vuid">VUID-vkCmdBlitImage-srcImage-00219</span><br>

<code>srcImage</code> <strong>must</strong> have been created with
<code>VK_IMAGE_USAGE_TRANSFER_SRC_BIT</code> usage flag</p>
</li>
<li>
<p><a id="VUID-vkCmdBlitImage-srcImage-00220" href="#VUID-vkCmdBlitImage-srcImage-00220"></a> <span class="vuid">VUID-vkCmdBlitImage-srcImage-00220</span><br>

If <code>srcImage</code> is non-sparse then it <strong>must</strong> be bound completely and
contiguously to a single <code>VkDeviceMemory</code> object</p>
</li>
<li>
<p><a id="VUID-vkCmdBlitImage-srcImageLayout-00221" href="#VUID-vkCmdBlitImage-srcImageLayout-00221"></a> <span class="vuid">VUID-vkCmdBlitImage-srcImageLayout-00221</span><br>

<code>srcImageLayout</code> <strong>must</strong> specify the layout of the image subresources
of <code>srcImage</code> specified in <code>pRegions</code> at the time this command
is executed on a <code>VkDevice</code></p>
</li>
<li>
<p><a id="VUID-vkCmdBlitImage-srcImageLayout-01398" href="#VUID-vkCmdBlitImage-srcImageLayout-01398"></a> <span class="vuid">VUID-vkCmdBlitImage-srcImageLayout-01398</span><br>

<code>srcImageLayout</code> <strong>must</strong> be <code>VK_IMAGE_LAYOUT_SHARED_PRESENT_KHR</code>,
<code>VK_IMAGE_LAYOUT_TRANSFER_SRC_OPTIMAL</code> or
<code>VK_IMAGE_LAYOUT_GENERAL</code></p>
</li>
<li>
<p><a id="VUID-vkCmdBlitImage-dstImage-02000" href="#VUID-vkCmdBlitImage-dstImage-02000"></a> <span class="vuid">VUID-vkCmdBlitImage-dstImage-02000</span><br>

The <a href="resources.html#resources-image-format-features" class="xref page">format features</a> of
<code>dstImage</code> <strong>must</strong> contain <code>VK_FORMAT_FEATURE_BLIT_DST_BIT</code></p>
</li>
<li>
<p><a id="VUID-vkCmdBlitImage-dstImage-06422" href="#VUID-vkCmdBlitImage-dstImage-06422"></a> <span class="vuid">VUID-vkCmdBlitImage-dstImage-06422</span><br>

<code>dstImage</code> <strong>must</strong> not use a
<a href="formats.html#formats-requiring-sampler-ycbcr-conversion" class="xref page">format that requires a    sampler Y′C<sub>B</sub>C<sub>R</sub> conversion</a></p>
</li>
<li>
<p><a id="VUID-vkCmdBlitImage-dstImage-00224" href="#VUID-vkCmdBlitImage-dstImage-00224"></a> <span class="vuid">VUID-vkCmdBlitImage-dstImage-00224</span><br>

<code>dstImage</code> <strong>must</strong> have been created with
<code>VK_IMAGE_USAGE_TRANSFER_DST_BIT</code> usage flag</p>
</li>
<li>
<p><a id="VUID-vkCmdBlitImage-dstImage-00225" href="#VUID-vkCmdBlitImage-dstImage-00225"></a> <span class="vuid">VUID-vkCmdBlitImage-dstImage-00225</span><br>

If <code>dstImage</code> is non-sparse then it <strong>must</strong> be bound completely and
contiguously to a single <code>VkDeviceMemory</code> object</p>
</li>
<li>
<p><a id="VUID-vkCmdBlitImage-dstImageLayout-00226" href="#VUID-vkCmdBlitImage-dstImageLayout-00226"></a> <span class="vuid">VUID-vkCmdBlitImage-dstImageLayout-00226</span><br>

<code>dstImageLayout</code> <strong>must</strong> specify the layout of the image subresources
of <code>dstImage</code> specified in <code>pRegions</code> at the time this command
is executed on a <code>VkDevice</code></p>
</li>
<li>
<p><a id="VUID-vkCmdBlitImage-dstImageLayout-01399" href="#VUID-vkCmdBlitImage-dstImageLayout-01399"></a> <span class="vuid">VUID-vkCmdBlitImage-dstImageLayout-01399</span><br>

<code>dstImageLayout</code> <strong>must</strong> be <code>VK_IMAGE_LAYOUT_SHARED_PRESENT_KHR</code>,
<code>VK_IMAGE_LAYOUT_TRANSFER_DST_OPTIMAL</code> or
<code>VK_IMAGE_LAYOUT_GENERAL</code></p>
</li>
<li>
<p><a id="VUID-vkCmdBlitImage-srcImage-00229" href="#VUID-vkCmdBlitImage-srcImage-00229"></a> <span class="vuid">VUID-vkCmdBlitImage-srcImage-00229</span><br>

If either of <code>srcImage</code> or <code>dstImage</code> was created with a signed
integer <a href="formats.html#VkFormat" class="xref page">VkFormat</a>, the other <strong>must</strong> also have been created with a
signed integer <a href="formats.html#VkFormat" class="xref page">VkFormat</a></p>
</li>
<li>
<p><a id="VUID-vkCmdBlitImage-srcImage-00230" href="#VUID-vkCmdBlitImage-srcImage-00230"></a> <span class="vuid">VUID-vkCmdBlitImage-srcImage-00230</span><br>

If either of <code>srcImage</code> or <code>dstImage</code> was created with an
unsigned integer <a href="formats.html#VkFormat" class="xref page">VkFormat</a>, the other <strong>must</strong> also have been created
with an unsigned integer <a href="formats.html#VkFormat" class="xref page">VkFormat</a></p>
</li>
<li>
<p><a id="VUID-vkCmdBlitImage-srcImage-00231" href="#VUID-vkCmdBlitImage-srcImage-00231"></a> <span class="vuid">VUID-vkCmdBlitImage-srcImage-00231</span><br>

If either of <code>srcImage</code> or <code>dstImage</code> was created with a
depth/stencil format, the other <strong>must</strong> have exactly the same format</p>
</li>
<li>
<p><a id="VUID-vkCmdBlitImage-srcImage-00232" href="#VUID-vkCmdBlitImage-srcImage-00232"></a> <span class="vuid">VUID-vkCmdBlitImage-srcImage-00232</span><br>

If <code>srcImage</code> was created with a depth/stencil format, <code>filter</code>
<strong>must</strong> be <code>VK_FILTER_NEAREST</code></p>
</li>
<li>
<p><a id="VUID-vkCmdBlitImage-srcImage-00233" href="#VUID-vkCmdBlitImage-srcImage-00233"></a> <span class="vuid">VUID-vkCmdBlitImage-srcImage-00233</span><br>

<code>srcImage</code> <strong>must</strong> have been created with a <code>samples</code> value of
<code>VK_SAMPLE_COUNT_1_BIT</code></p>
</li>
<li>
<p><a id="VUID-vkCmdBlitImage-dstImage-00234" href="#VUID-vkCmdBlitImage-dstImage-00234"></a> <span class="vuid">VUID-vkCmdBlitImage-dstImage-00234</span><br>

<code>dstImage</code> <strong>must</strong> have been created with a <code>samples</code> value of
<code>VK_SAMPLE_COUNT_1_BIT</code></p>
</li>
<li>
<p><a id="VUID-vkCmdBlitImage-filter-02001" href="#VUID-vkCmdBlitImage-filter-02001"></a> <span class="vuid">VUID-vkCmdBlitImage-filter-02001</span><br>

If <code>filter</code> is <code>VK_FILTER_LINEAR</code>, then the
<a href="resources.html#resources-image-format-features" class="xref page">format features</a> of <code>srcImage</code>
<strong>must</strong> contain <code>VK_FORMAT_FEATURE_SAMPLED_IMAGE_FILTER_LINEAR_BIT</code></p>
</li>
<li>
<p><a id="VUID-vkCmdBlitImage-filter-02002" href="#VUID-vkCmdBlitImage-filter-02002"></a> <span class="vuid">VUID-vkCmdBlitImage-filter-02002</span><br>

If <code>filter</code> is <code>VK_FILTER_CUBIC_EXT</code>, then the
<a href="resources.html#resources-image-format-features" class="xref page">format features</a> of <code>srcImage</code>
<strong>must</strong> contain <code>VK_FORMAT_FEATURE_SAMPLED_IMAGE_FILTER_CUBIC_BIT_EXT</code></p>
</li>
<li>
<p><a id="VUID-vkCmdBlitImage-filter-00237" href="#VUID-vkCmdBlitImage-filter-00237"></a> <span class="vuid">VUID-vkCmdBlitImage-filter-00237</span><br>

If <code>filter</code> is <code>VK_FILTER_CUBIC_EXT</code>, <code>srcImage</code> <strong>must</strong> be of
type <code>VK_IMAGE_TYPE_2D</code></p>
</li>
<li>
<p><a id="VUID-vkCmdBlitImage-srcSubresource-01705" href="#VUID-vkCmdBlitImage-srcSubresource-01705"></a> <span class="vuid">VUID-vkCmdBlitImage-srcSubresource-01705</span><br>

The <code>srcSubresource.mipLevel</code> member of each element of
<code>pRegions</code> <strong>must</strong> be less than the <code>mipLevels</code> specified in
<a href="resources.html#VkImageCreateInfo" class="xref page">VkImageCreateInfo</a> when <code>srcImage</code> was created</p>
</li>
<li>
<p><a id="VUID-vkCmdBlitImage-dstSubresource-01706" href="#VUID-vkCmdBlitImage-dstSubresource-01706"></a> <span class="vuid">VUID-vkCmdBlitImage-dstSubresource-01706</span><br>

The <code>dstSubresource.mipLevel</code> member of each element of
<code>pRegions</code> <strong>must</strong> be less than the <code>mipLevels</code> specified in
<a href="resources.html#VkImageCreateInfo" class="xref page">VkImageCreateInfo</a> when <code>dstImage</code> was created</p>
</li>
<li>
<p><a id="VUID-vkCmdBlitImage-srcSubresource-01707" href="#VUID-vkCmdBlitImage-srcSubresource-01707"></a> <span class="vuid">VUID-vkCmdBlitImage-srcSubresource-01707</span><br>

The <span class="eq"><code>srcSubresource.baseArrayLayer</code> + 
<code>srcSubresource.layerCount</code></span> of each element of <code>pRegions</code>
, if <code>srcSubresource.layerCount</code> is not
<code>VK_REMAINING_ARRAY_LAYERS</code> and <a href="features.html#features-maintenance5" class="xref page">    <code>maintenance5</code></a> is not enabled,
<strong>must</strong> be less than or equal to the <code>arrayLayers</code> specified in
<a href="resources.html#VkImageCreateInfo" class="xref page">VkImageCreateInfo</a> when <code>srcImage</code> was created</p>
</li>
<li>
<p><a id="VUID-vkCmdBlitImage-dstSubresource-01708" href="#VUID-vkCmdBlitImage-dstSubresource-01708"></a> <span class="vuid">VUID-vkCmdBlitImage-dstSubresource-01708</span><br>

The <span class="eq"><code>dstSubresource.baseArrayLayer</code> + 
<code>dstSubresource.layerCount</code></span> of each element of <code>pRegions</code>
, if <code>srcSubresource.layerCount</code> is not
<code>VK_REMAINING_ARRAY_LAYERS</code> and <a href="features.html#features-maintenance5" class="xref page">    <code>maintenance5</code></a> is not enabled,
<strong>must</strong> be less than or equal to the <code>arrayLayers</code> specified in
<a href="resources.html#VkImageCreateInfo" class="xref page">VkImageCreateInfo</a> when <code>dstImage</code> was created</p>
</li>
<li>
<p><a id="VUID-vkCmdBlitImage-dstImage-02545" href="#VUID-vkCmdBlitImage-dstImage-02545"></a> <span class="vuid">VUID-vkCmdBlitImage-dstImage-02545</span><br>

<code>dstImage</code> and <code>srcImage</code> <strong>must</strong> not have been created with
<code>flags</code> containing <code>VK_IMAGE_CREATE_SUBSAMPLED_BIT_EXT</code></p>
</li>
<li>
<p><a id="VUID-vkCmdBlitImage-srcImage-00240" href="#VUID-vkCmdBlitImage-srcImage-00240"></a> <span class="vuid">VUID-vkCmdBlitImage-srcImage-00240</span><br>

If either <code>srcImage</code> or <code>dstImage</code> is of type
<code>VK_IMAGE_TYPE_3D</code>, then for each element of <code>pRegions</code>,
<code>srcSubresource.baseArrayLayer</code> and
<code>dstSubresource.baseArrayLayer</code> <strong>must</strong> each be <code>0</code>, and
<code>srcSubresource.layerCount</code> and <code>dstSubresource.layerCount</code>
<strong>must</strong> each be <code>1</code></p>
</li>
<li>
<p><a id="VUID-vkCmdBlitImage-aspectMask-00241" href="#VUID-vkCmdBlitImage-aspectMask-00241"></a> <span class="vuid">VUID-vkCmdBlitImage-aspectMask-00241</span><br>

For each element of <code>pRegions</code>, <code>srcSubresource.aspectMask</code>
<strong>must</strong> specify aspects present in <code>srcImage</code></p>
</li>
<li>
<p><a id="VUID-vkCmdBlitImage-aspectMask-00242" href="#VUID-vkCmdBlitImage-aspectMask-00242"></a> <span class="vuid">VUID-vkCmdBlitImage-aspectMask-00242</span><br>

For each element of <code>pRegions</code>, <code>dstSubresource.aspectMask</code>
<strong>must</strong> specify aspects present in <code>dstImage</code></p>
</li>
<li>
<p><a id="VUID-vkCmdBlitImage-srcOffset-00243" href="#VUID-vkCmdBlitImage-srcOffset-00243"></a> <span class="vuid">VUID-vkCmdBlitImage-srcOffset-00243</span><br>

For each element of <code>pRegions</code>, <code>srcOffsets</code>[0].x and
<code>srcOffsets</code>[1].x <strong>must</strong> both be greater than or equal to <code>0</code> and
less than or equal to the width of the specified <code>srcSubresource</code> of
<code>srcImage</code></p>
</li>
<li>
<p><a id="VUID-vkCmdBlitImage-srcOffset-00244" href="#VUID-vkCmdBlitImage-srcOffset-00244"></a> <span class="vuid">VUID-vkCmdBlitImage-srcOffset-00244</span><br>

For each element of <code>pRegions</code>, <code>srcOffsets</code>[0].y and
<code>srcOffsets</code>[1].y <strong>must</strong> both be greater than or equal to <code>0</code> and
less than or equal to the height of the specified <code>srcSubresource</code>
of <code>srcImage</code></p>
</li>
<li>
<p><a id="VUID-vkCmdBlitImage-srcImage-00245" href="#VUID-vkCmdBlitImage-srcImage-00245"></a> <span class="vuid">VUID-vkCmdBlitImage-srcImage-00245</span><br>

If <code>srcImage</code> is of type <code>VK_IMAGE_TYPE_1D</code>, then for each
element of <code>pRegions</code>, <code>srcOffsets</code>[0].y <strong>must</strong> be <code>0</code> and
<code>srcOffsets</code>[1].y <strong>must</strong> be <code>1</code></p>
</li>
<li>
<p><a id="VUID-vkCmdBlitImage-srcOffset-00246" href="#VUID-vkCmdBlitImage-srcOffset-00246"></a> <span class="vuid">VUID-vkCmdBlitImage-srcOffset-00246</span><br>

For each element of <code>pRegions</code>, <code>srcOffsets</code>[0].z and
<code>srcOffsets</code>[1].z <strong>must</strong> both be greater than or equal to <code>0</code> and
less than or equal to the depth of the specified <code>srcSubresource</code> of
<code>srcImage</code></p>
</li>
<li>
<p><a id="VUID-vkCmdBlitImage-srcImage-00247" href="#VUID-vkCmdBlitImage-srcImage-00247"></a> <span class="vuid">VUID-vkCmdBlitImage-srcImage-00247</span><br>

If <code>srcImage</code> is of type <code>VK_IMAGE_TYPE_1D</code> or
<code>VK_IMAGE_TYPE_2D</code>, then for each element of <code>pRegions</code>,
<code>srcOffsets</code>[0].z <strong>must</strong> be <code>0</code> and <code>srcOffsets</code>[1].z <strong>must</strong> be
<code>1</code></p>
</li>
<li>
<p><a id="VUID-vkCmdBlitImage-dstOffset-00248" href="#VUID-vkCmdBlitImage-dstOffset-00248"></a> <span class="vuid">VUID-vkCmdBlitImage-dstOffset-00248</span><br>

For each element of <code>pRegions</code>, <code>dstOffsets</code>[0].x and
<code>dstOffsets</code>[1].x <strong>must</strong> both be greater than or equal to <code>0</code> and
less than or equal to the width of the specified <code>dstSubresource</code> of
<code>dstImage</code></p>
</li>
<li>
<p><a id="VUID-vkCmdBlitImage-dstOffset-00249" href="#VUID-vkCmdBlitImage-dstOffset-00249"></a> <span class="vuid">VUID-vkCmdBlitImage-dstOffset-00249</span><br>

For each element of <code>pRegions</code>, <code>dstOffsets</code>[0].y and
<code>dstOffsets</code>[1].y <strong>must</strong> both be greater than or equal to <code>0</code> and
less than or equal to the height of the specified <code>dstSubresource</code>
of <code>dstImage</code></p>
</li>
<li>
<p><a id="VUID-vkCmdBlitImage-dstImage-00250" href="#VUID-vkCmdBlitImage-dstImage-00250"></a> <span class="vuid">VUID-vkCmdBlitImage-dstImage-00250</span><br>

If <code>dstImage</code> is of type <code>VK_IMAGE_TYPE_1D</code>, then for each
element of <code>pRegions</code>, <code>dstOffsets</code>[0].y <strong>must</strong> be <code>0</code> and
<code>dstOffsets</code>[1].y <strong>must</strong> be <code>1</code></p>
</li>
<li>
<p><a id="VUID-vkCmdBlitImage-dstOffset-00251" href="#VUID-vkCmdBlitImage-dstOffset-00251"></a> <span class="vuid">VUID-vkCmdBlitImage-dstOffset-00251</span><br>

For each element of <code>pRegions</code>, <code>dstOffsets</code>[0].z and
<code>dstOffsets</code>[1].z <strong>must</strong> both be greater than or equal to <code>0</code> and
less than or equal to the depth of the specified <code>dstSubresource</code> of
<code>dstImage</code></p>
</li>
<li>
<p><a id="VUID-vkCmdBlitImage-dstImage-00252" href="#VUID-vkCmdBlitImage-dstImage-00252"></a> <span class="vuid">VUID-vkCmdBlitImage-dstImage-00252</span><br>

If <code>dstImage</code> is of type <code>VK_IMAGE_TYPE_1D</code> or
<code>VK_IMAGE_TYPE_2D</code>, then for each element of <code>pRegions</code>,
<code>dstOffsets</code>[0].z <strong>must</strong> be <code>0</code> and <code>dstOffsets</code>[1].z <strong>must</strong> be
<code>1</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCmdBlitImage-commandBuffer-parameter" href="#VUID-vkCmdBlitImage-commandBuffer-parameter"></a> <span class="vuid">VUID-vkCmdBlitImage-commandBuffer-parameter</span><br>
 <code>commandBuffer</code> <strong>must</strong> be a valid <a href="cmdbuffers.html#VkCommandBuffer" class="xref page">VkCommandBuffer</a> handle</p>
</li>
<li>
<p><a id="VUID-vkCmdBlitImage-srcImage-parameter" href="#VUID-vkCmdBlitImage-srcImage-parameter"></a> <span class="vuid">VUID-vkCmdBlitImage-srcImage-parameter</span><br>
 <code>srcImage</code> <strong>must</strong> be a valid <a href="resources.html#VkImage" class="xref page">VkImage</a> handle</p>
</li>
<li>
<p><a id="VUID-vkCmdBlitImage-srcImageLayout-parameter" href="#VUID-vkCmdBlitImage-srcImageLayout-parameter"></a> <span class="vuid">VUID-vkCmdBlitImage-srcImageLayout-parameter</span><br>
 <code>srcImageLayout</code> <strong>must</strong> be a valid <a href="resources.html#VkImageLayout" class="xref page">VkImageLayout</a> value</p>
</li>
<li>
<p><a id="VUID-vkCmdBlitImage-dstImage-parameter" href="#VUID-vkCmdBlitImage-dstImage-parameter"></a> <span class="vuid">VUID-vkCmdBlitImage-dstImage-parameter</span><br>
 <code>dstImage</code> <strong>must</strong> be a valid <a href="resources.html#VkImage" class="xref page">VkImage</a> handle</p>
</li>
<li>
<p><a id="VUID-vkCmdBlitImage-dstImageLayout-parameter" href="#VUID-vkCmdBlitImage-dstImageLayout-parameter"></a> <span class="vuid">VUID-vkCmdBlitImage-dstImageLayout-parameter</span><br>
 <code>dstImageLayout</code> <strong>must</strong> be a valid <a href="resources.html#VkImageLayout" class="xref page">VkImageLayout</a> value</p>
</li>
<li>
<p><a id="VUID-vkCmdBlitImage-pRegions-parameter" href="#VUID-vkCmdBlitImage-pRegions-parameter"></a> <span class="vuid">VUID-vkCmdBlitImage-pRegions-parameter</span><br>
 <code>pRegions</code> <strong>must</strong> be a valid pointer to an array of <code>regionCount</code> valid <a href="#VkImageBlit">VkImageBlit</a> structures</p>
</li>
<li>
<p><a id="VUID-vkCmdBlitImage-filter-parameter" href="#VUID-vkCmdBlitImage-filter-parameter"></a> <span class="vuid">VUID-vkCmdBlitImage-filter-parameter</span><br>
 <code>filter</code> <strong>must</strong> be a valid <a href="samplers.html#VkFilter" class="xref page">VkFilter</a> value</p>
</li>
<li>
<p><a id="VUID-vkCmdBlitImage-commandBuffer-recording" href="#VUID-vkCmdBlitImage-commandBuffer-recording"></a> <span class="vuid">VUID-vkCmdBlitImage-commandBuffer-recording</span><br>
 <code>commandBuffer</code> <strong>must</strong> be in the <a href="cmdbuffers.html#commandbuffers-lifecycle" class="xref page">recording state</a></p>
</li>
<li>
<p><a id="VUID-vkCmdBlitImage-commandBuffer-cmdpool" href="#VUID-vkCmdBlitImage-commandBuffer-cmdpool"></a> <span class="vuid">VUID-vkCmdBlitImage-commandBuffer-cmdpool</span><br>
 The <code>VkCommandPool</code> that <code>commandBuffer</code> was allocated from <strong>must</strong> support graphics operations</p>
</li>
<li>
<p><a id="VUID-vkCmdBlitImage-renderpass" href="#VUID-vkCmdBlitImage-renderpass"></a> <span class="vuid">VUID-vkCmdBlitImage-renderpass</span><br>
 This command <strong>must</strong> only be called outside of a render pass instance</p>
</li>
<li>
<p><a id="VUID-vkCmdBlitImage-videocoding" href="#VUID-vkCmdBlitImage-videocoding"></a> <span class="vuid">VUID-vkCmdBlitImage-videocoding</span><br>
 This command <strong>must</strong> only be called outside of a video coding scope</p>
</li>
<li>
<p><a id="VUID-vkCmdBlitImage-regionCount-arraylength" href="#VUID-vkCmdBlitImage-regionCount-arraylength"></a> <span class="vuid">VUID-vkCmdBlitImage-regionCount-arraylength</span><br>
 <code>regionCount</code> <strong>must</strong> be greater than <code>0</code></p>
</li>
<li>
<p><a id="VUID-vkCmdBlitImage-commonparent" href="#VUID-vkCmdBlitImage-commonparent"></a> <span class="vuid">VUID-vkCmdBlitImage-commonparent</span><br>
 Each of <code>commandBuffer</code>, <code>dstImage</code>, and <code>srcImage</code> <strong>must</strong> have been created, allocated, or retrieved from the same <a href="devsandqueues.html#VkDevice" class="xref page">VkDevice</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Host Synchronization</div>
<div class="ulist">
<ul>
<li>
<p>Host access to <code>commandBuffer</code> <strong>must</strong> be externally synchronized</p>
</li>
<li>
<p>Host access to the <code>VkCommandPool</code> that <code>commandBuffer</code> was allocated from <strong>must</strong> be externally synchronized</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Command Properties</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><a href="cmdbuffers.html#VkCommandBufferLevel" class="xref page">Command Buffer Levels</a></th>
<th class="tableblock halign-left valign-top"><a href="renderpass.html#vkCmdBeginRenderPass" class="xref page">Render Pass Scope</a></th>
<th class="tableblock halign-left valign-top"><a href="video_extensions.html#vkCmdBeginVideoCodingKHR" class="xref page">Video Coding Scope</a></th>
<th class="tableblock halign-left valign-top"><a href="devsandqueues.html#VkQueueFlagBits" class="xref page">Supported Queue Types</a></th>
<th class="tableblock halign-left valign-top"><a href="fundamentals.html#fundamentals-queueoperation-command-types" class="xref page">Command Type</a></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Primary<br>
Secondary</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Outside</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Outside</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Graphics</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Action</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>VkImageBlit</code> structure is defined as:</p>
</div>
<div id="VkImageBlit" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_VERSION_1_0
typedef struct VkImageBlit {
    VkImageSubresourceLayers    srcSubresource;
    VkOffset3D                  srcOffsets[2];
    VkImageSubresourceLayers    dstSubresource;
    VkOffset3D                  dstOffsets[2];
} VkImageBlit;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>srcSubresource</code> is the subresource to blit from.</p>
</li>
<li>
<p><code>srcOffsets</code> is a pointer to an array of two <a href="fundamentals.html#VkOffset3D" class="xref page">VkOffset3D</a>
structures specifying the bounds of the source region within
<code>srcSubresource</code>.</p>
</li>
<li>
<p><code>dstSubresource</code> is the subresource to blit into.</p>
</li>
<li>
<p><code>dstOffsets</code> is a pointer to an array of two <a href="fundamentals.html#VkOffset3D" class="xref page">VkOffset3D</a>
structures specifying the bounds of the destination region within
<code>dstSubresource</code>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>For each element of the <code>pRegions</code> array, a blit operation is performed
for the specified source and destination regions.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkImageBlit-aspectMask-00238" href="#VUID-VkImageBlit-aspectMask-00238"></a> <span class="vuid">VUID-VkImageBlit-aspectMask-00238</span><br>

The <code>aspectMask</code> member of <code>srcSubresource</code> and
<code>dstSubresource</code> <strong>must</strong> match</p>
</li>
<li>
<p><a id="VUID-VkImageBlit-maintenance5-08799" href="#VUID-VkImageBlit-maintenance5-08799"></a> <span class="vuid">VUID-VkImageBlit-maintenance5-08799</span><br>

If the <a href="features.html#features-maintenance5" class="xref page"><code>maintenance5</code></a> feature is not
enabled, the <code>layerCount</code> member of <code>srcSubresource</code> or
<code>dstSubresource</code> <strong>must</strong> not be <code>VK_REMAINING_ARRAY_LAYERS</code></p>
</li>
<li>
<p><a id="VUID-VkImageBlit-layerCount-08800" href="#VUID-VkImageBlit-layerCount-08800"></a> <span class="vuid">VUID-VkImageBlit-layerCount-08800</span><br>

If neither of the <code>layerCount</code> members of <code>srcSubresource</code> or
<code>dstSubresource</code> are <code>VK_REMAINING_ARRAY_LAYERS</code>, the
<code>layerCount</code> members <strong>must</strong> match</p>
</li>
<li>
<p><a id="VUID-VkImageBlit-layerCount-08801" href="#VUID-VkImageBlit-layerCount-08801"></a> <span class="vuid">VUID-VkImageBlit-layerCount-08801</span><br>

If one of the <code>layerCount</code> members of <code>srcSubresource</code> or
<code>dstSubresource</code> is <code>VK_REMAINING_ARRAY_LAYERS</code>, the other
member <strong>must</strong> be either <code>VK_REMAINING_ARRAY_LAYERS</code> or equal to the
<code>arrayLayers</code> member of the <a href="resources.html#VkImageCreateInfo" class="xref page">VkImageCreateInfo</a> used to create
the image minus <code>baseArrayLayer</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkImageBlit-srcSubresource-parameter" href="#VUID-VkImageBlit-srcSubresource-parameter"></a> <span class="vuid">VUID-VkImageBlit-srcSubresource-parameter</span><br>
 <code>srcSubresource</code> <strong>must</strong> be a valid <a href="#VkImageSubresourceLayers">VkImageSubresourceLayers</a> structure</p>
</li>
<li>
<p><a id="VUID-VkImageBlit-dstSubresource-parameter" href="#VUID-VkImageBlit-dstSubresource-parameter"></a> <span class="vuid">VUID-VkImageBlit-dstSubresource-parameter</span><br>
 <code>dstSubresource</code> <strong>must</strong> be a valid <a href="#VkImageSubresourceLayers">VkImageSubresourceLayers</a> structure</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>A more extensible version of the blit image command is defined below.</p>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>To copy regions of a source image into a destination image, potentially
performing format conversion, arbitrary scaling, and filtering, call:</p>
</div>
<div id="vkCmdBlitImage2" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_VERSION_1_3
void vkCmdBlitImage2(
    VkCommandBuffer                             commandBuffer,
    const VkBlitImageInfo2*                     pBlitImageInfo);</code></pre>
</div>
</div>
<div class="paragraph">
<p>or the equivalent command</p>
</div>
<div id="vkCmdBlitImage2KHR" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_KHR_copy_commands2
void vkCmdBlitImage2KHR(
    VkCommandBuffer                             commandBuffer,
    const VkBlitImageInfo2*                     pBlitImageInfo);</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>commandBuffer</code> is the command buffer into which the command will be
recorded.</p>
</li>
<li>
<p><code>pBlitImageInfo</code> is a pointer to a <a href="#VkBlitImageInfo2">VkBlitImageInfo2</a> structure
describing the blit parameters.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>This command is functionally identical to <a href="#vkCmdBlitImage">vkCmdBlitImage</a>, but includes
extensible sub-structures that include <code>sType</code> and <code>pNext</code>
parameters, allowing them to be more easily extended.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCmdBlitImage2-commandBuffer-01834" href="#VUID-vkCmdBlitImage2-commandBuffer-01834"></a> <span class="vuid">VUID-vkCmdBlitImage2-commandBuffer-01834</span><br>

If <code>commandBuffer</code> is an unprotected command buffer and
<a href="devsandqueues.html#limits-protectedNoFault" class="xref page"><code>protectedNoFault</code></a> is not supported,
<code>srcImage</code> <strong>must</strong> not be a protected image</p>
</li>
<li>
<p><a id="VUID-vkCmdBlitImage2-commandBuffer-01835" href="#VUID-vkCmdBlitImage2-commandBuffer-01835"></a> <span class="vuid">VUID-vkCmdBlitImage2-commandBuffer-01835</span><br>

If <code>commandBuffer</code> is an unprotected command buffer and
<a href="devsandqueues.html#limits-protectedNoFault" class="xref page"><code>protectedNoFault</code></a> is not supported,
<code>dstImage</code> <strong>must</strong> not be a protected image</p>
</li>
<li>
<p><a id="VUID-vkCmdBlitImage2-commandBuffer-01836" href="#VUID-vkCmdBlitImage2-commandBuffer-01836"></a> <span class="vuid">VUID-vkCmdBlitImage2-commandBuffer-01836</span><br>

If <code>commandBuffer</code> is a protected command buffer and
<a href="devsandqueues.html#limits-protectedNoFault" class="xref page"><code>protectedNoFault</code></a> is not supported,
<code>dstImage</code> <strong>must</strong> not be an unprotected image</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCmdBlitImage2-commandBuffer-parameter" href="#VUID-vkCmdBlitImage2-commandBuffer-parameter"></a> <span class="vuid">VUID-vkCmdBlitImage2-commandBuffer-parameter</span><br>
 <code>commandBuffer</code> <strong>must</strong> be a valid <a href="cmdbuffers.html#VkCommandBuffer" class="xref page">VkCommandBuffer</a> handle</p>
</li>
<li>
<p><a id="VUID-vkCmdBlitImage2-pBlitImageInfo-parameter" href="#VUID-vkCmdBlitImage2-pBlitImageInfo-parameter"></a> <span class="vuid">VUID-vkCmdBlitImage2-pBlitImageInfo-parameter</span><br>
 <code>pBlitImageInfo</code> <strong>must</strong> be a valid pointer to a valid <a href="#VkBlitImageInfo2">VkBlitImageInfo2</a> structure</p>
</li>
<li>
<p><a id="VUID-vkCmdBlitImage2-commandBuffer-recording" href="#VUID-vkCmdBlitImage2-commandBuffer-recording"></a> <span class="vuid">VUID-vkCmdBlitImage2-commandBuffer-recording</span><br>
 <code>commandBuffer</code> <strong>must</strong> be in the <a href="cmdbuffers.html#commandbuffers-lifecycle" class="xref page">recording state</a></p>
</li>
<li>
<p><a id="VUID-vkCmdBlitImage2-commandBuffer-cmdpool" href="#VUID-vkCmdBlitImage2-commandBuffer-cmdpool"></a> <span class="vuid">VUID-vkCmdBlitImage2-commandBuffer-cmdpool</span><br>
 The <code>VkCommandPool</code> that <code>commandBuffer</code> was allocated from <strong>must</strong> support graphics operations</p>
</li>
<li>
<p><a id="VUID-vkCmdBlitImage2-renderpass" href="#VUID-vkCmdBlitImage2-renderpass"></a> <span class="vuid">VUID-vkCmdBlitImage2-renderpass</span><br>
 This command <strong>must</strong> only be called outside of a render pass instance</p>
</li>
<li>
<p><a id="VUID-vkCmdBlitImage2-videocoding" href="#VUID-vkCmdBlitImage2-videocoding"></a> <span class="vuid">VUID-vkCmdBlitImage2-videocoding</span><br>
 This command <strong>must</strong> only be called outside of a video coding scope</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Host Synchronization</div>
<div class="ulist">
<ul>
<li>
<p>Host access to <code>commandBuffer</code> <strong>must</strong> be externally synchronized</p>
</li>
<li>
<p>Host access to the <code>VkCommandPool</code> that <code>commandBuffer</code> was allocated from <strong>must</strong> be externally synchronized</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Command Properties</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><a href="cmdbuffers.html#VkCommandBufferLevel" class="xref page">Command Buffer Levels</a></th>
<th class="tableblock halign-left valign-top"><a href="renderpass.html#vkCmdBeginRenderPass" class="xref page">Render Pass Scope</a></th>
<th class="tableblock halign-left valign-top"><a href="video_extensions.html#vkCmdBeginVideoCodingKHR" class="xref page">Video Coding Scope</a></th>
<th class="tableblock halign-left valign-top"><a href="devsandqueues.html#VkQueueFlagBits" class="xref page">Supported Queue Types</a></th>
<th class="tableblock halign-left valign-top"><a href="fundamentals.html#fundamentals-queueoperation-command-types" class="xref page">Command Type</a></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Primary<br>
Secondary</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Outside</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Outside</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Graphics</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Action</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>VkBlitImageInfo2</code> structure is defined as:</p>
</div>
<div id="VkBlitImageInfo2" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_VERSION_1_3
typedef struct VkBlitImageInfo2 {
    VkStructureType        sType;
    const void*            pNext;
    VkImage                srcImage;
    VkImageLayout          srcImageLayout;
    VkImage                dstImage;
    VkImageLayout          dstImageLayout;
    uint32_t               regionCount;
    const VkImageBlit2*    pRegions;
    VkFilter               filter;
} VkBlitImageInfo2;</code></pre>
</div>
</div>
<div class="paragraph">
<p>or the equivalent</p>
</div>
<div id="VkBlitImageInfo2KHR" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_KHR_copy_commands2
typedef VkBlitImageInfo2 VkBlitImageInfo2KHR;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is a <a href="fundamentals.html#VkStructureType" class="xref page">VkStructureType</a> value identifying this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>srcImage</code> is the source image.</p>
</li>
<li>
<p><code>srcImageLayout</code> is the layout of the source image subresources for
the blit.</p>
</li>
<li>
<p><code>dstImage</code> is the destination image.</p>
</li>
<li>
<p><code>dstImageLayout</code> is the layout of the destination image subresources
for the blit.</p>
</li>
<li>
<p><code>regionCount</code> is the number of regions to blit.</p>
</li>
<li>
<p><code>pRegions</code> is a pointer to an array of <a href="#VkImageBlit2">VkImageBlit2</a> structures
specifying the regions to blit.</p>
</li>
<li>
<p><code>filter</code> is a <a href="samplers.html#VkFilter" class="xref page">VkFilter</a> specifying the filter to apply if the
blits require scaling.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkBlitImageInfo2-pRegions-00215" href="#VUID-VkBlitImageInfo2-pRegions-00215"></a> <span class="vuid">VUID-VkBlitImageInfo2-pRegions-00215</span><br>

The source region specified by each element of <code>pRegions</code> <strong>must</strong> be a
region that is contained within <code>srcImage</code></p>
</li>
<li>
<p><a id="VUID-VkBlitImageInfo2-pRegions-00216" href="#VUID-VkBlitImageInfo2-pRegions-00216"></a> <span class="vuid">VUID-VkBlitImageInfo2-pRegions-00216</span><br>

The destination region specified by each element of <code>pRegions</code> <strong>must</strong>
be a region that is contained within <code>dstImage</code></p>
</li>
<li>
<p><a id="VUID-VkBlitImageInfo2-pRegions-00217" href="#VUID-VkBlitImageInfo2-pRegions-00217"></a> <span class="vuid">VUID-VkBlitImageInfo2-pRegions-00217</span><br>

The union of all destination regions, specified by the elements of
<code>pRegions</code>, <strong>must</strong> not overlap in memory with any texel that <strong>may</strong> be
sampled during the blit operation</p>
</li>
<li>
<p><a id="VUID-VkBlitImageInfo2-srcImage-01999" href="#VUID-VkBlitImageInfo2-srcImage-01999"></a> <span class="vuid">VUID-VkBlitImageInfo2-srcImage-01999</span><br>

The <a href="resources.html#resources-image-format-features" class="xref page">format features</a> of
<code>srcImage</code> <strong>must</strong> contain <code>VK_FORMAT_FEATURE_BLIT_SRC_BIT</code></p>
</li>
<li>
<p><a id="VUID-VkBlitImageInfo2-srcImage-06421" href="#VUID-VkBlitImageInfo2-srcImage-06421"></a> <span class="vuid">VUID-VkBlitImageInfo2-srcImage-06421</span><br>

<code>srcImage</code> <strong>must</strong> not use a
<a href="formats.html#formats-requiring-sampler-ycbcr-conversion" class="xref page">format that requires a    sampler Y′C<sub>B</sub>C<sub>R</sub> conversion</a></p>
</li>
<li>
<p><a id="VUID-VkBlitImageInfo2-srcImage-00219" href="#VUID-VkBlitImageInfo2-srcImage-00219"></a> <span class="vuid">VUID-VkBlitImageInfo2-srcImage-00219</span><br>

<code>srcImage</code> <strong>must</strong> have been created with
<code>VK_IMAGE_USAGE_TRANSFER_SRC_BIT</code> usage flag</p>
</li>
<li>
<p><a id="VUID-VkBlitImageInfo2-srcImage-00220" href="#VUID-VkBlitImageInfo2-srcImage-00220"></a> <span class="vuid">VUID-VkBlitImageInfo2-srcImage-00220</span><br>

If <code>srcImage</code> is non-sparse then it <strong>must</strong> be bound completely and
contiguously to a single <code>VkDeviceMemory</code> object</p>
</li>
<li>
<p><a id="VUID-VkBlitImageInfo2-srcImageLayout-00221" href="#VUID-VkBlitImageInfo2-srcImageLayout-00221"></a> <span class="vuid">VUID-VkBlitImageInfo2-srcImageLayout-00221</span><br>

<code>srcImageLayout</code> <strong>must</strong> specify the layout of the image subresources
of <code>srcImage</code> specified in <code>pRegions</code> at the time this command
is executed on a <code>VkDevice</code></p>
</li>
<li>
<p><a id="VUID-VkBlitImageInfo2-srcImageLayout-01398" href="#VUID-VkBlitImageInfo2-srcImageLayout-01398"></a> <span class="vuid">VUID-VkBlitImageInfo2-srcImageLayout-01398</span><br>

<code>srcImageLayout</code> <strong>must</strong> be <code>VK_IMAGE_LAYOUT_SHARED_PRESENT_KHR</code>,
<code>VK_IMAGE_LAYOUT_TRANSFER_SRC_OPTIMAL</code> or
<code>VK_IMAGE_LAYOUT_GENERAL</code></p>
</li>
<li>
<p><a id="VUID-VkBlitImageInfo2-dstImage-02000" href="#VUID-VkBlitImageInfo2-dstImage-02000"></a> <span class="vuid">VUID-VkBlitImageInfo2-dstImage-02000</span><br>

The <a href="resources.html#resources-image-format-features" class="xref page">format features</a> of
<code>dstImage</code> <strong>must</strong> contain <code>VK_FORMAT_FEATURE_BLIT_DST_BIT</code></p>
</li>
<li>
<p><a id="VUID-VkBlitImageInfo2-dstImage-06422" href="#VUID-VkBlitImageInfo2-dstImage-06422"></a> <span class="vuid">VUID-VkBlitImageInfo2-dstImage-06422</span><br>

<code>dstImage</code> <strong>must</strong> not use a
<a href="formats.html#formats-requiring-sampler-ycbcr-conversion" class="xref page">format that requires a    sampler Y′C<sub>B</sub>C<sub>R</sub> conversion</a></p>
</li>
<li>
<p><a id="VUID-VkBlitImageInfo2-dstImage-00224" href="#VUID-VkBlitImageInfo2-dstImage-00224"></a> <span class="vuid">VUID-VkBlitImageInfo2-dstImage-00224</span><br>

<code>dstImage</code> <strong>must</strong> have been created with
<code>VK_IMAGE_USAGE_TRANSFER_DST_BIT</code> usage flag</p>
</li>
<li>
<p><a id="VUID-VkBlitImageInfo2-dstImage-00225" href="#VUID-VkBlitImageInfo2-dstImage-00225"></a> <span class="vuid">VUID-VkBlitImageInfo2-dstImage-00225</span><br>

If <code>dstImage</code> is non-sparse then it <strong>must</strong> be bound completely and
contiguously to a single <code>VkDeviceMemory</code> object</p>
</li>
<li>
<p><a id="VUID-VkBlitImageInfo2-dstImageLayout-00226" href="#VUID-VkBlitImageInfo2-dstImageLayout-00226"></a> <span class="vuid">VUID-VkBlitImageInfo2-dstImageLayout-00226</span><br>

<code>dstImageLayout</code> <strong>must</strong> specify the layout of the image subresources
of <code>dstImage</code> specified in <code>pRegions</code> at the time this command
is executed on a <code>VkDevice</code></p>
</li>
<li>
<p><a id="VUID-VkBlitImageInfo2-dstImageLayout-01399" href="#VUID-VkBlitImageInfo2-dstImageLayout-01399"></a> <span class="vuid">VUID-VkBlitImageInfo2-dstImageLayout-01399</span><br>

<code>dstImageLayout</code> <strong>must</strong> be <code>VK_IMAGE_LAYOUT_SHARED_PRESENT_KHR</code>,
<code>VK_IMAGE_LAYOUT_TRANSFER_DST_OPTIMAL</code> or
<code>VK_IMAGE_LAYOUT_GENERAL</code></p>
</li>
<li>
<p><a id="VUID-VkBlitImageInfo2-srcImage-00229" href="#VUID-VkBlitImageInfo2-srcImage-00229"></a> <span class="vuid">VUID-VkBlitImageInfo2-srcImage-00229</span><br>

If either of <code>srcImage</code> or <code>dstImage</code> was created with a signed
integer <a href="formats.html#VkFormat" class="xref page">VkFormat</a>, the other <strong>must</strong> also have been created with a
signed integer <a href="formats.html#VkFormat" class="xref page">VkFormat</a></p>
</li>
<li>
<p><a id="VUID-VkBlitImageInfo2-srcImage-00230" href="#VUID-VkBlitImageInfo2-srcImage-00230"></a> <span class="vuid">VUID-VkBlitImageInfo2-srcImage-00230</span><br>

If either of <code>srcImage</code> or <code>dstImage</code> was created with an
unsigned integer <a href="formats.html#VkFormat" class="xref page">VkFormat</a>, the other <strong>must</strong> also have been created
with an unsigned integer <a href="formats.html#VkFormat" class="xref page">VkFormat</a></p>
</li>
<li>
<p><a id="VUID-VkBlitImageInfo2-srcImage-00231" href="#VUID-VkBlitImageInfo2-srcImage-00231"></a> <span class="vuid">VUID-VkBlitImageInfo2-srcImage-00231</span><br>

If either of <code>srcImage</code> or <code>dstImage</code> was created with a
depth/stencil format, the other <strong>must</strong> have exactly the same format</p>
</li>
<li>
<p><a id="VUID-VkBlitImageInfo2-srcImage-00232" href="#VUID-VkBlitImageInfo2-srcImage-00232"></a> <span class="vuid">VUID-VkBlitImageInfo2-srcImage-00232</span><br>

If <code>srcImage</code> was created with a depth/stencil format, <code>filter</code>
<strong>must</strong> be <code>VK_FILTER_NEAREST</code></p>
</li>
<li>
<p><a id="VUID-VkBlitImageInfo2-srcImage-00233" href="#VUID-VkBlitImageInfo2-srcImage-00233"></a> <span class="vuid">VUID-VkBlitImageInfo2-srcImage-00233</span><br>

<code>srcImage</code> <strong>must</strong> have been created with a <code>samples</code> value of
<code>VK_SAMPLE_COUNT_1_BIT</code></p>
</li>
<li>
<p><a id="VUID-VkBlitImageInfo2-dstImage-00234" href="#VUID-VkBlitImageInfo2-dstImage-00234"></a> <span class="vuid">VUID-VkBlitImageInfo2-dstImage-00234</span><br>

<code>dstImage</code> <strong>must</strong> have been created with a <code>samples</code> value of
<code>VK_SAMPLE_COUNT_1_BIT</code></p>
</li>
<li>
<p><a id="VUID-VkBlitImageInfo2-filter-02001" href="#VUID-VkBlitImageInfo2-filter-02001"></a> <span class="vuid">VUID-VkBlitImageInfo2-filter-02001</span><br>

If <code>filter</code> is <code>VK_FILTER_LINEAR</code>, then the
<a href="resources.html#resources-image-format-features" class="xref page">format features</a> of <code>srcImage</code>
<strong>must</strong> contain <code>VK_FORMAT_FEATURE_SAMPLED_IMAGE_FILTER_LINEAR_BIT</code></p>
</li>
<li>
<p><a id="VUID-VkBlitImageInfo2-filter-02002" href="#VUID-VkBlitImageInfo2-filter-02002"></a> <span class="vuid">VUID-VkBlitImageInfo2-filter-02002</span><br>

If <code>filter</code> is <code>VK_FILTER_CUBIC_EXT</code>, then the
<a href="resources.html#resources-image-format-features" class="xref page">format features</a> of <code>srcImage</code>
<strong>must</strong> contain <code>VK_FORMAT_FEATURE_SAMPLED_IMAGE_FILTER_CUBIC_BIT_EXT</code></p>
</li>
<li>
<p><a id="VUID-VkBlitImageInfo2-filter-00237" href="#VUID-VkBlitImageInfo2-filter-00237"></a> <span class="vuid">VUID-VkBlitImageInfo2-filter-00237</span><br>

If <code>filter</code> is <code>VK_FILTER_CUBIC_EXT</code>, <code>srcImage</code> <strong>must</strong> be of
type <code>VK_IMAGE_TYPE_2D</code></p>
</li>
<li>
<p><a id="VUID-VkBlitImageInfo2-srcSubresource-01705" href="#VUID-VkBlitImageInfo2-srcSubresource-01705"></a> <span class="vuid">VUID-VkBlitImageInfo2-srcSubresource-01705</span><br>

The <code>srcSubresource.mipLevel</code> member of each element of
<code>pRegions</code> <strong>must</strong> be less than the <code>mipLevels</code> specified in
<a href="resources.html#VkImageCreateInfo" class="xref page">VkImageCreateInfo</a> when <code>srcImage</code> was created</p>
</li>
<li>
<p><a id="VUID-VkBlitImageInfo2-dstSubresource-01706" href="#VUID-VkBlitImageInfo2-dstSubresource-01706"></a> <span class="vuid">VUID-VkBlitImageInfo2-dstSubresource-01706</span><br>

The <code>dstSubresource.mipLevel</code> member of each element of
<code>pRegions</code> <strong>must</strong> be less than the <code>mipLevels</code> specified in
<a href="resources.html#VkImageCreateInfo" class="xref page">VkImageCreateInfo</a> when <code>dstImage</code> was created</p>
</li>
<li>
<p><a id="VUID-VkBlitImageInfo2-srcSubresource-01707" href="#VUID-VkBlitImageInfo2-srcSubresource-01707"></a> <span class="vuid">VUID-VkBlitImageInfo2-srcSubresource-01707</span><br>

The <span class="eq"><code>srcSubresource.baseArrayLayer</code> + 
<code>srcSubresource.layerCount</code></span> of each element of <code>pRegions</code>
, if <code>srcSubresource.layerCount</code> is not
<code>VK_REMAINING_ARRAY_LAYERS</code> and <a href="features.html#features-maintenance5" class="xref page">    <code>maintenance5</code></a> is not enabled,
<strong>must</strong> be less than or equal to the <code>arrayLayers</code> specified in
<a href="resources.html#VkImageCreateInfo" class="xref page">VkImageCreateInfo</a> when <code>srcImage</code> was created</p>
</li>
<li>
<p><a id="VUID-VkBlitImageInfo2-dstSubresource-01708" href="#VUID-VkBlitImageInfo2-dstSubresource-01708"></a> <span class="vuid">VUID-VkBlitImageInfo2-dstSubresource-01708</span><br>

The <span class="eq"><code>dstSubresource.baseArrayLayer</code> + 
<code>dstSubresource.layerCount</code></span> of each element of <code>pRegions</code>
, if <code>srcSubresource.layerCount</code> is not
<code>VK_REMAINING_ARRAY_LAYERS</code> and <a href="features.html#features-maintenance5" class="xref page">    <code>maintenance5</code></a> is not enabled,
<strong>must</strong> be less than or equal to the <code>arrayLayers</code> specified in
<a href="resources.html#VkImageCreateInfo" class="xref page">VkImageCreateInfo</a> when <code>dstImage</code> was created</p>
</li>
<li>
<p><a id="VUID-VkBlitImageInfo2-dstImage-02545" href="#VUID-VkBlitImageInfo2-dstImage-02545"></a> <span class="vuid">VUID-VkBlitImageInfo2-dstImage-02545</span><br>

<code>dstImage</code> and <code>srcImage</code> <strong>must</strong> not have been created with
<code>flags</code> containing <code>VK_IMAGE_CREATE_SUBSAMPLED_BIT_EXT</code></p>
</li>
<li>
<p><a id="VUID-VkBlitImageInfo2-srcImage-00240" href="#VUID-VkBlitImageInfo2-srcImage-00240"></a> <span class="vuid">VUID-VkBlitImageInfo2-srcImage-00240</span><br>

If either <code>srcImage</code> or <code>dstImage</code> is of type
<code>VK_IMAGE_TYPE_3D</code>, then for each element of <code>pRegions</code>,
<code>srcSubresource.baseArrayLayer</code> and
<code>dstSubresource.baseArrayLayer</code> <strong>must</strong> each be <code>0</code>, and
<code>srcSubresource.layerCount</code> and <code>dstSubresource.layerCount</code>
<strong>must</strong> each be <code>1</code></p>
</li>
<li>
<p><a id="VUID-VkBlitImageInfo2-aspectMask-00241" href="#VUID-VkBlitImageInfo2-aspectMask-00241"></a> <span class="vuid">VUID-VkBlitImageInfo2-aspectMask-00241</span><br>

For each element of <code>pRegions</code>, <code>srcSubresource.aspectMask</code>
<strong>must</strong> specify aspects present in <code>srcImage</code></p>
</li>
<li>
<p><a id="VUID-VkBlitImageInfo2-aspectMask-00242" href="#VUID-VkBlitImageInfo2-aspectMask-00242"></a> <span class="vuid">VUID-VkBlitImageInfo2-aspectMask-00242</span><br>

For each element of <code>pRegions</code>, <code>dstSubresource.aspectMask</code>
<strong>must</strong> specify aspects present in <code>dstImage</code></p>
</li>
<li>
<p><a id="VUID-VkBlitImageInfo2-srcOffset-00243" href="#VUID-VkBlitImageInfo2-srcOffset-00243"></a> <span class="vuid">VUID-VkBlitImageInfo2-srcOffset-00243</span><br>

For each element of <code>pRegions</code>, <code>srcOffsets</code>[0].x and
<code>srcOffsets</code>[1].x <strong>must</strong> both be greater than or equal to <code>0</code> and
less than or equal to the width of the specified <code>srcSubresource</code> of
<code>srcImage</code></p>
</li>
<li>
<p><a id="VUID-VkBlitImageInfo2-srcOffset-00244" href="#VUID-VkBlitImageInfo2-srcOffset-00244"></a> <span class="vuid">VUID-VkBlitImageInfo2-srcOffset-00244</span><br>

For each element of <code>pRegions</code>, <code>srcOffsets</code>[0].y and
<code>srcOffsets</code>[1].y <strong>must</strong> both be greater than or equal to <code>0</code> and
less than or equal to the height of the specified <code>srcSubresource</code>
of <code>srcImage</code></p>
</li>
<li>
<p><a id="VUID-VkBlitImageInfo2-srcImage-00245" href="#VUID-VkBlitImageInfo2-srcImage-00245"></a> <span class="vuid">VUID-VkBlitImageInfo2-srcImage-00245</span><br>

If <code>srcImage</code> is of type <code>VK_IMAGE_TYPE_1D</code>, then for each
element of <code>pRegions</code>, <code>srcOffsets</code>[0].y <strong>must</strong> be <code>0</code> and
<code>srcOffsets</code>[1].y <strong>must</strong> be <code>1</code></p>
</li>
<li>
<p><a id="VUID-VkBlitImageInfo2-srcOffset-00246" href="#VUID-VkBlitImageInfo2-srcOffset-00246"></a> <span class="vuid">VUID-VkBlitImageInfo2-srcOffset-00246</span><br>

For each element of <code>pRegions</code>, <code>srcOffsets</code>[0].z and
<code>srcOffsets</code>[1].z <strong>must</strong> both be greater than or equal to <code>0</code> and
less than or equal to the depth of the specified <code>srcSubresource</code> of
<code>srcImage</code></p>
</li>
<li>
<p><a id="VUID-VkBlitImageInfo2-srcImage-00247" href="#VUID-VkBlitImageInfo2-srcImage-00247"></a> <span class="vuid">VUID-VkBlitImageInfo2-srcImage-00247</span><br>

If <code>srcImage</code> is of type <code>VK_IMAGE_TYPE_1D</code> or
<code>VK_IMAGE_TYPE_2D</code>, then for each element of <code>pRegions</code>,
<code>srcOffsets</code>[0].z <strong>must</strong> be <code>0</code> and <code>srcOffsets</code>[1].z <strong>must</strong> be
<code>1</code></p>
</li>
<li>
<p><a id="VUID-VkBlitImageInfo2-dstOffset-00248" href="#VUID-VkBlitImageInfo2-dstOffset-00248"></a> <span class="vuid">VUID-VkBlitImageInfo2-dstOffset-00248</span><br>

For each element of <code>pRegions</code>, <code>dstOffsets</code>[0].x and
<code>dstOffsets</code>[1].x <strong>must</strong> both be greater than or equal to <code>0</code> and
less than or equal to the width of the specified <code>dstSubresource</code> of
<code>dstImage</code></p>
</li>
<li>
<p><a id="VUID-VkBlitImageInfo2-dstOffset-00249" href="#VUID-VkBlitImageInfo2-dstOffset-00249"></a> <span class="vuid">VUID-VkBlitImageInfo2-dstOffset-00249</span><br>

For each element of <code>pRegions</code>, <code>dstOffsets</code>[0].y and
<code>dstOffsets</code>[1].y <strong>must</strong> both be greater than or equal to <code>0</code> and
less than or equal to the height of the specified <code>dstSubresource</code>
of <code>dstImage</code></p>
</li>
<li>
<p><a id="VUID-VkBlitImageInfo2-dstImage-00250" href="#VUID-VkBlitImageInfo2-dstImage-00250"></a> <span class="vuid">VUID-VkBlitImageInfo2-dstImage-00250</span><br>

If <code>dstImage</code> is of type <code>VK_IMAGE_TYPE_1D</code>, then for each
element of <code>pRegions</code>, <code>dstOffsets</code>[0].y <strong>must</strong> be <code>0</code> and
<code>dstOffsets</code>[1].y <strong>must</strong> be <code>1</code></p>
</li>
<li>
<p><a id="VUID-VkBlitImageInfo2-dstOffset-00251" href="#VUID-VkBlitImageInfo2-dstOffset-00251"></a> <span class="vuid">VUID-VkBlitImageInfo2-dstOffset-00251</span><br>

For each element of <code>pRegions</code>, <code>dstOffsets</code>[0].z and
<code>dstOffsets</code>[1].z <strong>must</strong> both be greater than or equal to <code>0</code> and
less than or equal to the depth of the specified <code>dstSubresource</code> of
<code>dstImage</code></p>
</li>
<li>
<p><a id="VUID-VkBlitImageInfo2-dstImage-00252" href="#VUID-VkBlitImageInfo2-dstImage-00252"></a> <span class="vuid">VUID-VkBlitImageInfo2-dstImage-00252</span><br>

If <code>dstImage</code> is of type <code>VK_IMAGE_TYPE_1D</code> or
<code>VK_IMAGE_TYPE_2D</code>, then for each element of <code>pRegions</code>,
<code>dstOffsets</code>[0].z <strong>must</strong> be <code>0</code> and <code>dstOffsets</code>[1].z <strong>must</strong> be
<code>1</code></p>
</li>
<li>
<p><a id="VUID-VkBlitImageInfo2-pRegions-04561" href="#VUID-VkBlitImageInfo2-pRegions-04561"></a> <span class="vuid">VUID-VkBlitImageInfo2-pRegions-04561</span><br>

If any element of <code>pRegions</code> contains
<a href="#VkCopyCommandTransformInfoQCOM">VkCopyCommandTransformInfoQCOM</a> in its <code>pNext</code> chain, then
<code>srcImage</code> and <code>dstImage</code> <strong>must</strong> not be block-compressed images</p>
</li>
<li>
<p><a id="VUID-VkBlitImageInfo2KHR-pRegions-06207" href="#VUID-VkBlitImageInfo2KHR-pRegions-06207"></a> <span class="vuid">VUID-VkBlitImageInfo2KHR-pRegions-06207</span><br>

If any element of <code>pRegions</code> contains
<a href="#VkCopyCommandTransformInfoQCOM">VkCopyCommandTransformInfoQCOM</a> in its <code>pNext</code> chain, then
<code>srcImage</code> <strong>must</strong> be of type <code>VK_IMAGE_TYPE_2D</code></p>
</li>
<li>
<p><a id="VUID-VkBlitImageInfo2KHR-pRegions-06208" href="#VUID-VkBlitImageInfo2KHR-pRegions-06208"></a> <span class="vuid">VUID-VkBlitImageInfo2KHR-pRegions-06208</span><br>

If any element of <code>pRegions</code> contains
<a href="#VkCopyCommandTransformInfoQCOM">VkCopyCommandTransformInfoQCOM</a> in its <code>pNext</code> chain, then
<code>srcImage</code> <strong>must</strong> not have a
<a href="formats.html#formats-requiring-sampler-ycbcr-conversion" class="xref page">multi-planar format</a></p>
</li>
<li>
<p><a id="VUID-VkBlitImageInfo2-filter-09204" href="#VUID-VkBlitImageInfo2-filter-09204"></a> <span class="vuid">VUID-VkBlitImageInfo2-filter-09204</span><br>

If <code>filter</code> is <code>VK_FILTER_CUBIC_EXT</code> and if the
<a href="features.html#features-filter-cubic-weight-selection" class="xref page">selectableCubicWeights</a>
feature is not enabled then the cubic weights <strong>must</strong> be
<code>VK_CUBIC_FILTER_WEIGHTS_CATMULL_ROM_QCOM</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkBlitImageInfo2-sType-sType" href="#VUID-VkBlitImageInfo2-sType-sType"></a> <span class="vuid">VUID-VkBlitImageInfo2-sType-sType</span><br>
 <code>sType</code> <strong>must</strong> be <code>VK_STRUCTURE_TYPE_BLIT_IMAGE_INFO_2</code></p>
</li>
<li>
<p><a id="VUID-VkBlitImageInfo2-pNext-pNext" href="#VUID-VkBlitImageInfo2-pNext-pNext"></a> <span class="vuid">VUID-VkBlitImageInfo2-pNext-pNext</span><br>
 <code>pNext</code> <strong>must</strong> be <code>NULL</code> or a pointer to a valid instance of <a href="#VkBlitImageCubicWeightsInfoQCOM">VkBlitImageCubicWeightsInfoQCOM</a></p>
</li>
<li>
<p><a id="VUID-VkBlitImageInfo2-sType-unique" href="#VUID-VkBlitImageInfo2-sType-unique"></a> <span class="vuid">VUID-VkBlitImageInfo2-sType-unique</span><br>
 The <code>sType</code> value of each struct in the <code>pNext</code> chain <strong>must</strong> be unique</p>
</li>
<li>
<p><a id="VUID-VkBlitImageInfo2-srcImage-parameter" href="#VUID-VkBlitImageInfo2-srcImage-parameter"></a> <span class="vuid">VUID-VkBlitImageInfo2-srcImage-parameter</span><br>
 <code>srcImage</code> <strong>must</strong> be a valid <a href="resources.html#VkImage" class="xref page">VkImage</a> handle</p>
</li>
<li>
<p><a id="VUID-VkBlitImageInfo2-srcImageLayout-parameter" href="#VUID-VkBlitImageInfo2-srcImageLayout-parameter"></a> <span class="vuid">VUID-VkBlitImageInfo2-srcImageLayout-parameter</span><br>
 <code>srcImageLayout</code> <strong>must</strong> be a valid <a href="resources.html#VkImageLayout" class="xref page">VkImageLayout</a> value</p>
</li>
<li>
<p><a id="VUID-VkBlitImageInfo2-dstImage-parameter" href="#VUID-VkBlitImageInfo2-dstImage-parameter"></a> <span class="vuid">VUID-VkBlitImageInfo2-dstImage-parameter</span><br>
 <code>dstImage</code> <strong>must</strong> be a valid <a href="resources.html#VkImage" class="xref page">VkImage</a> handle</p>
</li>
<li>
<p><a id="VUID-VkBlitImageInfo2-dstImageLayout-parameter" href="#VUID-VkBlitImageInfo2-dstImageLayout-parameter"></a> <span class="vuid">VUID-VkBlitImageInfo2-dstImageLayout-parameter</span><br>
 <code>dstImageLayout</code> <strong>must</strong> be a valid <a href="resources.html#VkImageLayout" class="xref page">VkImageLayout</a> value</p>
</li>
<li>
<p><a id="VUID-VkBlitImageInfo2-pRegions-parameter" href="#VUID-VkBlitImageInfo2-pRegions-parameter"></a> <span class="vuid">VUID-VkBlitImageInfo2-pRegions-parameter</span><br>
 <code>pRegions</code> <strong>must</strong> be a valid pointer to an array of <code>regionCount</code> valid <a href="#VkImageBlit2">VkImageBlit2</a> structures</p>
</li>
<li>
<p><a id="VUID-VkBlitImageInfo2-filter-parameter" href="#VUID-VkBlitImageInfo2-filter-parameter"></a> <span class="vuid">VUID-VkBlitImageInfo2-filter-parameter</span><br>
 <code>filter</code> <strong>must</strong> be a valid <a href="samplers.html#VkFilter" class="xref page">VkFilter</a> value</p>
</li>
<li>
<p><a id="VUID-VkBlitImageInfo2-regionCount-arraylength" href="#VUID-VkBlitImageInfo2-regionCount-arraylength"></a> <span class="vuid">VUID-VkBlitImageInfo2-regionCount-arraylength</span><br>
 <code>regionCount</code> <strong>must</strong> be greater than <code>0</code></p>
</li>
<li>
<p><a id="VUID-VkBlitImageInfo2-commonparent" href="#VUID-VkBlitImageInfo2-commonparent"></a> <span class="vuid">VUID-VkBlitImageInfo2-commonparent</span><br>
 Both of <code>dstImage</code>, and <code>srcImage</code> <strong>must</strong> have been created, allocated, or retrieved from the same <a href="devsandqueues.html#VkDevice" class="xref page">VkDevice</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>If <code>filter</code> is <code>VK_FILTER_CUBIC_EXT</code> and if the <code>pNext</code> chain of
<a href="#VkBlitImageInfo2">VkBlitImageInfo2</a> includes a <code>VkBlitImageCubicWeightsInfoQCOM</code>
structure, then that structure specifies cubic weights are used in the blit.
If that structure is not present, then cubic weights are considered to be
<code>VK_CUBIC_FILTER_WEIGHTS_CATMULL_ROM_QCOM</code>.</p>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>VkBlitImageCubicWeightsInfoQCOM</code> structure is defined as:</p>
</div>
<div id="VkBlitImageCubicWeightsInfoQCOM" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_QCOM_filter_cubic_weights
typedef struct VkBlitImageCubicWeightsInfoQCOM {
    VkStructureType             sType;
    const void*                 pNext;
    VkCubicFilterWeightsQCOM    cubicWeights;
} VkBlitImageCubicWeightsInfoQCOM;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is a <a href="fundamentals.html#VkStructureType" class="xref page">VkStructureType</a> value identifying this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>cubicWeights</code> is a <a href="samplers.html#VkCubicFilterWeightsQCOM" class="xref page">VkCubicFilterWeightsQCOM</a> value controlling
cubic filter weights for the blit.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkBlitImageCubicWeightsInfoQCOM-sType-sType" href="#VUID-VkBlitImageCubicWeightsInfoQCOM-sType-sType"></a> <span class="vuid">VUID-VkBlitImageCubicWeightsInfoQCOM-sType-sType</span><br>
 <code>sType</code> <strong>must</strong> be <code>VK_STRUCTURE_TYPE_BLIT_IMAGE_CUBIC_WEIGHTS_INFO_QCOM</code></p>
</li>
<li>
<p><a id="VUID-VkBlitImageCubicWeightsInfoQCOM-cubicWeights-parameter" href="#VUID-VkBlitImageCubicWeightsInfoQCOM-cubicWeights-parameter"></a> <span class="vuid">VUID-VkBlitImageCubicWeightsInfoQCOM-cubicWeights-parameter</span><br>
 <code>cubicWeights</code> <strong>must</strong> be a valid <a href="samplers.html#VkCubicFilterWeightsQCOM" class="xref page">VkCubicFilterWeightsQCOM</a> value</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>VkImageBlit2</code> structure is defined as:</p>
</div>
<div id="VkImageBlit2" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_VERSION_1_3
typedef struct VkImageBlit2 {
    VkStructureType             sType;
    const void*                 pNext;
    VkImageSubresourceLayers    srcSubresource;
    VkOffset3D                  srcOffsets[2];
    VkImageSubresourceLayers    dstSubresource;
    VkOffset3D                  dstOffsets[2];
} VkImageBlit2;</code></pre>
</div>
</div>
<div class="paragraph">
<p>or the equivalent</p>
</div>
<div id="VkImageBlit2KHR" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_KHR_copy_commands2
typedef VkImageBlit2 VkImageBlit2KHR;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is a <a href="fundamentals.html#VkStructureType" class="xref page">VkStructureType</a> value identifying this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>srcSubresource</code> is the subresource to blit from.</p>
</li>
<li>
<p><code>srcOffsets</code> is a pointer to an array of two <a href="fundamentals.html#VkOffset3D" class="xref page">VkOffset3D</a>
structures specifying the bounds of the source region within
<code>srcSubresource</code>.</p>
</li>
<li>
<p><code>dstSubresource</code> is the subresource to blit into.</p>
</li>
<li>
<p><code>dstOffsets</code> is a pointer to an array of two <a href="fundamentals.html#VkOffset3D" class="xref page">VkOffset3D</a>
structures specifying the bounds of the destination region within
<code>dstSubresource</code>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>For each element of the <code>pRegions</code> array, a blit operation is performed
for the specified source and destination regions.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkImageBlit2-aspectMask-00238" href="#VUID-VkImageBlit2-aspectMask-00238"></a> <span class="vuid">VUID-VkImageBlit2-aspectMask-00238</span><br>

The <code>aspectMask</code> member of <code>srcSubresource</code> and
<code>dstSubresource</code> <strong>must</strong> match</p>
</li>
<li>
<p><a id="VUID-VkImageBlit2-maintenance5-08799" href="#VUID-VkImageBlit2-maintenance5-08799"></a> <span class="vuid">VUID-VkImageBlit2-maintenance5-08799</span><br>

If the <a href="features.html#features-maintenance5" class="xref page"><code>maintenance5</code></a> feature is not
enabled, the <code>layerCount</code> member of <code>srcSubresource</code> or
<code>dstSubresource</code> <strong>must</strong> not be <code>VK_REMAINING_ARRAY_LAYERS</code></p>
</li>
<li>
<p><a id="VUID-VkImageBlit2-layerCount-08800" href="#VUID-VkImageBlit2-layerCount-08800"></a> <span class="vuid">VUID-VkImageBlit2-layerCount-08800</span><br>

If neither of the <code>layerCount</code> members of <code>srcSubresource</code> or
<code>dstSubresource</code> are <code>VK_REMAINING_ARRAY_LAYERS</code>, the
<code>layerCount</code> members <strong>must</strong> match</p>
</li>
<li>
<p><a id="VUID-VkImageBlit2-layerCount-08801" href="#VUID-VkImageBlit2-layerCount-08801"></a> <span class="vuid">VUID-VkImageBlit2-layerCount-08801</span><br>

If one of the <code>layerCount</code> members of <code>srcSubresource</code> or
<code>dstSubresource</code> is <code>VK_REMAINING_ARRAY_LAYERS</code>, the other
member <strong>must</strong> be either <code>VK_REMAINING_ARRAY_LAYERS</code> or equal to the
<code>arrayLayers</code> member of the <a href="resources.html#VkImageCreateInfo" class="xref page">VkImageCreateInfo</a> used to create
the image minus <code>baseArrayLayer</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkImageBlit2-sType-sType" href="#VUID-VkImageBlit2-sType-sType"></a> <span class="vuid">VUID-VkImageBlit2-sType-sType</span><br>
 <code>sType</code> <strong>must</strong> be <code>VK_STRUCTURE_TYPE_IMAGE_BLIT_2</code></p>
</li>
<li>
<p><a id="VUID-VkImageBlit2-pNext-pNext" href="#VUID-VkImageBlit2-pNext-pNext"></a> <span class="vuid">VUID-VkImageBlit2-pNext-pNext</span><br>
 <code>pNext</code> <strong>must</strong> be <code>NULL</code> or a pointer to a valid instance of <a href="#VkCopyCommandTransformInfoQCOM">VkCopyCommandTransformInfoQCOM</a></p>
</li>
<li>
<p><a id="VUID-VkImageBlit2-sType-unique" href="#VUID-VkImageBlit2-sType-unique"></a> <span class="vuid">VUID-VkImageBlit2-sType-unique</span><br>
 The <code>sType</code> value of each struct in the <code>pNext</code> chain <strong>must</strong> be unique</p>
</li>
<li>
<p><a id="VUID-VkImageBlit2-srcSubresource-parameter" href="#VUID-VkImageBlit2-srcSubresource-parameter"></a> <span class="vuid">VUID-VkImageBlit2-srcSubresource-parameter</span><br>
 <code>srcSubresource</code> <strong>must</strong> be a valid <a href="#VkImageSubresourceLayers">VkImageSubresourceLayers</a> structure</p>
</li>
<li>
<p><a id="VUID-VkImageBlit2-dstSubresource-parameter" href="#VUID-VkImageBlit2-dstSubresource-parameter"></a> <span class="vuid">VUID-VkImageBlit2-dstSubresource-parameter</span><br>
 <code>dstSubresource</code> <strong>must</strong> be a valid <a href="#VkImageSubresourceLayers">VkImageSubresourceLayers</a> structure</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>For <a href="#vkCmdBlitImage2">vkCmdBlitImage2</a>, each region copied can include a rotation.
To specify a rotated region, add <a href="#VkCopyCommandTransformInfoQCOM">VkCopyCommandTransformInfoQCOM</a> to the
<code>pNext</code> chain of <a href="#VkImageBlit2">VkImageBlit2</a>.
For each region with a rotation specified,
<a href="#copies-images-scaling-rotation">Image Blits with Scaling and Rotation</a>
specifies how coordinates are rotated prior to sampling from the source
image.
When rotation is specified, the source and destination images <strong>must</strong> each be
2D images, have a 1x1x1 <a href="formats.html#formats-compatibility-classes" class="xref page">texel blockextent</a>, and only one plane.</p>
</div>
<div class="sect2">
<h3 id="copies-images-scaling-rotation"><a class="anchor" href="#copies-images-scaling-rotation"></a>Image Blits with Scaling and Rotation</h3>
<div class="paragraph">
<p>When <a href="#VkCopyCommandTransformInfoQCOM">VkCopyCommandTransformInfoQCOM</a> is in the <code>pNext</code> chain of
<a href="#VkImageBlit2">VkImageBlit2</a>, the specified region is rotated during the blit.
The following description of rotated addressing replaces the description in
<a href="#vkCmdBlitImage">vkCmdBlitImage</a>.</p>
</div>
<div class="paragraph">
<p>The following code computes rotation of normalized coordinates.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c hljs" data-lang="c">// rotation of normalized coordinates
VkOffset2D RotateNormUV(VkOffset2D in, VkSurfaceTransformFlagBitsKHR flags)
{
    VkOffset2D output;
    switch (flags)
    {
        case VK_SURFACE_TRANSFORM_IDENTITY_BIT_KHR:
            out.x = in.x;
            out.y = in.y;
            break;
        case VK_SURFACE_TRANSFORM_ROTATE_90_BIT_KHR:
            out.x = in.y;
            out.y = 1.0 - in.x;
            break;
        case VK_SURFACE_TRANSFORM_ROTATE_180_BIT_KHR:
            out.x = 1.0 - in.x;
            out.y = 1.0 - in.y;
            break;
        case VK_SURFACE_TRANSFORM_ROTATE_270_BIT_KHR:
            out.x = 1.0 - in.y;
            out.y = in.x;
            break;
    }
    return out;
}</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>For each destination texel, the integer coordinate of that texel is
converted to an unnormalized texture coordinate, using the effective
inverse of the equations described in
<a href="textures.html#textures-unnormalized-to-integer" class="xref page">unnormalized to integer    conversion</a>:</p>
<div class="dlist">
<dl>
<dt class="hdlist1"></dt>
<dd>
<p><span class="eq">u<sub>base</sub> = i +  ½</span></p>
</dd>
<dt class="hdlist1"></dt>
<dd>
<p><span class="eq">v<sub>base</sub> = j +  ½</span></p>
</dd>
<dt class="hdlist1"></dt>
<dd>
<p><span class="eq">w<sub>base</sub> = k +  ½</span></p>
</dd>
</dl>
</div>
</li>
<li>
<p>These base coordinates are then offset by the first destination offset:</p>
<div class="dlist">
<dl>
<dt class="hdlist1"></dt>
<dd>
<p><span class="eq">u<sub>offset</sub> = u<sub>base</sub> - x<sub>dst0</sub></span></p>
</dd>
<dt class="hdlist1"></dt>
<dd>
<p><span class="eq">v<sub>offset</sub> = v<sub>base</sub> - y<sub>dst0</sub></span></p>
</dd>
<dt class="hdlist1"></dt>
<dd>
<p><span class="eq">w<sub>offset</sub> = w<sub>base</sub> - z<sub>dst0</sub></span></p>
</dd>
<dt class="hdlist1"></dt>
<dd>
<p><span class="eq">a<sub>offset</sub> = a - <code>baseArrayCount</code><sub>dst</sub></span></p>
</dd>
</dl>
</div>
</li>
<li>
<p>The UV destination coordinates are scaled by the destination region,
rotated, and scaled by the source region.</p>
<div class="dlist">
<dl>
<dt class="hdlist1"></dt>
<dd>
<p><span class="eq">u<sub>dest_scaled</sub> = u<sub>offset</sub> / (x<sub>dst1</sub> - x<sub>dst0</sub>)</span></p>
</dd>
<dt class="hdlist1"></dt>
<dd>
<p><span class="eq">v<sub>dest_scaled</sub> = v<sub>offset</sub> / (y<sub>dst1</sub> - y<sub>dst0</sub>)</span></p>
</dd>
<dt class="hdlist1"></dt>
<dd>
<p><span class="eq">(u<sub>src_scaled</sub>, v<sub>src_scaled</sub>) =
<code>RotateNormUV</code>(u<sub>dest_scaled</sub>, v<sub>dest_scaled</sub>,
<code>transform</code>)</span></p>
</dd>
<dt class="hdlist1"></dt>
<dd>
<p><span class="eq">u<sub>scaled</sub> = u<sub>src_scaled</sub> × (x<sub>Src1</sub> - x<sub>Src0</sub>)</span></p>
</dd>
<dt class="hdlist1"></dt>
<dd>
<p><span class="eq">v<sub>scaled</sub> = v<sub>src_scaled</sub> × (y<sub>Src1</sub> - y<sub>Src0</sub>)</span></p>
</dd>
</dl>
</div>
</li>
<li>
<p>The W coordinate is unaffected by rotation.
The scale is determined from the ratio of source and destination
regions, and applied to the offset coordinate:</p>
<div class="dlist">
<dl>
<dt class="hdlist1"></dt>
<dd>
<p><span class="eq">scale<sub>w</sub> = (z<sub>Src1</sub> - z<sub>Src0</sub>) / (z<sub>dst1</sub> - z<sub>dst0</sub>)</span></p>
</dd>
<dt class="hdlist1"></dt>
<dd>
<p><span class="eq">w<sub>scaled</sub> = w<sub>offset</sub> × scale<sub>w</sub></span></p>
</dd>
</dl>
</div>
</li>
<li>
<p>Finally the source offset is added to the scaled source coordinates, to
determine the final unnormalized coordinates used to sample from
<code>srcImage</code>:</p>
<div class="dlist">
<dl>
<dt class="hdlist1"></dt>
<dd>
<p><span class="eq">u = u<sub>scaled</sub> +  x<sub>Src0</sub></span></p>
</dd>
<dt class="hdlist1"></dt>
<dd>
<p><span class="eq">v = v<sub>scaled</sub> +  y<sub>Src0</sub></span></p>
</dd>
<dt class="hdlist1"></dt>
<dd>
<p><span class="eq">w = w<sub>scaled</sub> +  z<sub>Src0</sub></span></p>
</dd>
<dt class="hdlist1"></dt>
<dd>
<p><span class="eq">q = <code>mipLevel</code></span></p>
</dd>
<dt class="hdlist1"></dt>
<dd>
<p><span class="eq">a = a<sub>offset</sub> +  <code>baseArrayCount</code><sub>src</sub></span></p>
</dd>
</dl>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>These coordinates are used to sample from the source image as described for
<a href="textures.html#textures" class="xref page">Image Operations</a>, with the filter mode equal to that of
<code>filter</code>; a mipmap mode of <code>VK_SAMPLER_MIPMAP_MODE_NEAREST</code>; and an
address mode of <code>VK_SAMPLER_ADDRESS_MODE_CLAMP_TO_EDGE</code>.
Implementations <strong>must</strong> clamp at the edge of the source image, and <strong>may</strong>
additionally clamp to the edge of the source region.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="copies-resolve"><a class="anchor" href="#copies-resolve"></a>Resolving Multisample Images</h2>
<div class="sectionbody">
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>To resolve a multisample color image to a non-multisample color image, call:</p>
</div>
<div id="vkCmdResolveImage" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_VERSION_1_0
void vkCmdResolveImage(
    VkCommandBuffer                             commandBuffer,
    VkImage                                     srcImage,
    VkImageLayout                               srcImageLayout,
    VkImage                                     dstImage,
    VkImageLayout                               dstImageLayout,
    uint32_t                                    regionCount,
    const VkImageResolve*                       pRegions);</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>commandBuffer</code> is the command buffer into which the command will be
recorded.</p>
</li>
<li>
<p><code>srcImage</code> is the source image.</p>
</li>
<li>
<p><code>srcImageLayout</code> is the layout of the source image subresources for
the resolve.</p>
</li>
<li>
<p><code>dstImage</code> is the destination image.</p>
</li>
<li>
<p><code>dstImageLayout</code> is the layout of the destination image subresources
for the resolve.</p>
</li>
<li>
<p><code>regionCount</code> is the number of regions to resolve.</p>
</li>
<li>
<p><code>pRegions</code> is a pointer to an array of <a href="#VkImageResolve">VkImageResolve</a>
structures specifying the regions to resolve.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>During the resolve the samples corresponding to each pixel location in the
source are converted to a single sample before being written to the
destination.
If the source formats are floating-point or normalized types, the sample
values for each pixel are resolved in an implementation-dependent manner.
If the source formats are integer types, a single sample&#8217;s value is selected
for each pixel.</p>
</div>
<div class="paragraph">
<p><code>srcOffset</code> and <code>dstOffset</code> select the initial <code>x</code>, <code>y</code>, and
<code>z</code> offsets in texels of the sub-regions of the source and destination
image data.
<code>extent</code> is the size in texels of the source image to resolve in
<code>width</code>, <code>height</code> and <code>depth</code>.
Each element of <code>pRegions</code> <strong>must</strong> be a region that is contained within
its corresponding image.</p>
</div>
<div class="paragraph">
<p>Resolves are done layer by layer starting with <code>baseArrayLayer</code> member
of <code>srcSubresource</code> for the source and <code>dstSubresource</code> for the
destination.
<code>layerCount</code> layers are resolved to the destination image.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCmdResolveImage-commandBuffer-01837" href="#VUID-vkCmdResolveImage-commandBuffer-01837"></a> <span class="vuid">VUID-vkCmdResolveImage-commandBuffer-01837</span><br>

If <code>commandBuffer</code> is an unprotected command buffer and
<a href="devsandqueues.html#limits-protectedNoFault" class="xref page"><code>protectedNoFault</code></a> is not supported,
<code>srcImage</code> <strong>must</strong> not be a protected image</p>
</li>
<li>
<p><a id="VUID-vkCmdResolveImage-commandBuffer-01838" href="#VUID-vkCmdResolveImage-commandBuffer-01838"></a> <span class="vuid">VUID-vkCmdResolveImage-commandBuffer-01838</span><br>

If <code>commandBuffer</code> is an unprotected command buffer and
<a href="devsandqueues.html#limits-protectedNoFault" class="xref page"><code>protectedNoFault</code></a> is not supported,
<code>dstImage</code> <strong>must</strong> not be a protected image</p>
</li>
<li>
<p><a id="VUID-vkCmdResolveImage-commandBuffer-01839" href="#VUID-vkCmdResolveImage-commandBuffer-01839"></a> <span class="vuid">VUID-vkCmdResolveImage-commandBuffer-01839</span><br>

If <code>commandBuffer</code> is a protected command buffer and
<a href="devsandqueues.html#limits-protectedNoFault" class="xref page"><code>protectedNoFault</code></a> is not supported,
<code>dstImage</code> <strong>must</strong> not be an unprotected image</p>
</li>
</ul>
</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCmdResolveImage-pRegions-00255" href="#VUID-vkCmdResolveImage-pRegions-00255"></a> <span class="vuid">VUID-vkCmdResolveImage-pRegions-00255</span><br>

The union of all source regions, and the union of all destination
regions, specified by the elements of <code>pRegions</code>, <strong>must</strong> not overlap
in memory</p>
</li>
<li>
<p><a id="VUID-vkCmdResolveImage-srcImage-00256" href="#VUID-vkCmdResolveImage-srcImage-00256"></a> <span class="vuid">VUID-vkCmdResolveImage-srcImage-00256</span><br>

If <code>srcImage</code> is non-sparse then it <strong>must</strong> be bound completely and
contiguously to a single <code>VkDeviceMemory</code> object</p>
</li>
<li>
<p><a id="VUID-vkCmdResolveImage-srcImage-00257" href="#VUID-vkCmdResolveImage-srcImage-00257"></a> <span class="vuid">VUID-vkCmdResolveImage-srcImage-00257</span><br>

<code>srcImage</code> <strong>must</strong> have a sample count equal to any valid sample count
value other than <code>VK_SAMPLE_COUNT_1_BIT</code></p>
</li>
<li>
<p><a id="VUID-vkCmdResolveImage-dstImage-00258" href="#VUID-vkCmdResolveImage-dstImage-00258"></a> <span class="vuid">VUID-vkCmdResolveImage-dstImage-00258</span><br>

If <code>dstImage</code> is non-sparse then it <strong>must</strong> be bound completely and
contiguously to a single <code>VkDeviceMemory</code> object</p>
</li>
<li>
<p><a id="VUID-vkCmdResolveImage-dstImage-00259" href="#VUID-vkCmdResolveImage-dstImage-00259"></a> <span class="vuid">VUID-vkCmdResolveImage-dstImage-00259</span><br>

<code>dstImage</code> <strong>must</strong> have a sample count equal to
<code>VK_SAMPLE_COUNT_1_BIT</code></p>
</li>
<li>
<p><a id="VUID-vkCmdResolveImage-srcImageLayout-00260" href="#VUID-vkCmdResolveImage-srcImageLayout-00260"></a> <span class="vuid">VUID-vkCmdResolveImage-srcImageLayout-00260</span><br>

<code>srcImageLayout</code> <strong>must</strong> specify the layout of the image subresources
of <code>srcImage</code> specified in <code>pRegions</code> at the time this command
is executed on a <code>VkDevice</code></p>
</li>
<li>
<p><a id="VUID-vkCmdResolveImage-srcImageLayout-01400" href="#VUID-vkCmdResolveImage-srcImageLayout-01400"></a> <span class="vuid">VUID-vkCmdResolveImage-srcImageLayout-01400</span><br>

<code>srcImageLayout</code> <strong>must</strong> be <code>VK_IMAGE_LAYOUT_SHARED_PRESENT_KHR</code>,
<code>VK_IMAGE_LAYOUT_TRANSFER_SRC_OPTIMAL</code> or
<code>VK_IMAGE_LAYOUT_GENERAL</code></p>
</li>
<li>
<p><a id="VUID-vkCmdResolveImage-dstImageLayout-00262" href="#VUID-vkCmdResolveImage-dstImageLayout-00262"></a> <span class="vuid">VUID-vkCmdResolveImage-dstImageLayout-00262</span><br>

<code>dstImageLayout</code> <strong>must</strong> specify the layout of the image subresources
of <code>dstImage</code> specified in <code>pRegions</code> at the time this command
is executed on a <code>VkDevice</code></p>
</li>
<li>
<p><a id="VUID-vkCmdResolveImage-dstImageLayout-01401" href="#VUID-vkCmdResolveImage-dstImageLayout-01401"></a> <span class="vuid">VUID-vkCmdResolveImage-dstImageLayout-01401</span><br>

<code>dstImageLayout</code> <strong>must</strong> be <code>VK_IMAGE_LAYOUT_SHARED_PRESENT_KHR</code>,
<code>VK_IMAGE_LAYOUT_TRANSFER_DST_OPTIMAL</code> or
<code>VK_IMAGE_LAYOUT_GENERAL</code></p>
</li>
<li>
<p><a id="VUID-vkCmdResolveImage-dstImage-02003" href="#VUID-vkCmdResolveImage-dstImage-02003"></a> <span class="vuid">VUID-vkCmdResolveImage-dstImage-02003</span><br>

The <a href="resources.html#resources-image-format-features" class="xref page">format features</a> of
<code>dstImage</code> <strong>must</strong> contain
<code>VK_FORMAT_FEATURE_COLOR_ATTACHMENT_BIT</code></p>
</li>
<li>
<p><a id="VUID-vkCmdResolveImage-linearColorAttachment-06519" href="#VUID-vkCmdResolveImage-linearColorAttachment-06519"></a> <span class="vuid">VUID-vkCmdResolveImage-linearColorAttachment-06519</span><br>

If the <a href="features.html#features-linearColorAttachment" class="xref page"><code>linearColorAttachment</code></a>
feature is enabled and the image is created with
<code>VK_IMAGE_TILING_LINEAR</code>, the
<a href="resources.html#resources-image-format-features" class="xref page">format features</a> of <code>dstImage</code>
<strong>must</strong> contain <code>VK_FORMAT_FEATURE_2_LINEAR_COLOR_ATTACHMENT_BIT_NV</code></p>
</li>
<li>
<p><a id="VUID-vkCmdResolveImage-srcImage-01386" href="#VUID-vkCmdResolveImage-srcImage-01386"></a> <span class="vuid">VUID-vkCmdResolveImage-srcImage-01386</span><br>

<code>srcImage</code> and <code>dstImage</code> <strong>must</strong> have been created with the same
image format</p>
</li>
<li>
<p><a id="VUID-vkCmdResolveImage-srcSubresource-01709" href="#VUID-vkCmdResolveImage-srcSubresource-01709"></a> <span class="vuid">VUID-vkCmdResolveImage-srcSubresource-01709</span><br>

The <code>srcSubresource.mipLevel</code> member of each element of
<code>pRegions</code> <strong>must</strong> be less than the <code>mipLevels</code> specified in
<a href="resources.html#VkImageCreateInfo" class="xref page">VkImageCreateInfo</a> when <code>srcImage</code> was created</p>
</li>
<li>
<p><a id="VUID-vkCmdResolveImage-dstSubresource-01710" href="#VUID-vkCmdResolveImage-dstSubresource-01710"></a> <span class="vuid">VUID-vkCmdResolveImage-dstSubresource-01710</span><br>

The <code>dstSubresource.mipLevel</code> member of each element of
<code>pRegions</code> <strong>must</strong> be less than the <code>mipLevels</code> specified in
<a href="resources.html#VkImageCreateInfo" class="xref page">VkImageCreateInfo</a> when <code>dstImage</code> was created</p>
</li>
<li>
<p><a id="VUID-vkCmdResolveImage-srcSubresource-01711" href="#VUID-vkCmdResolveImage-srcSubresource-01711"></a> <span class="vuid">VUID-vkCmdResolveImage-srcSubresource-01711</span><br>

The <span class="eq"><code>srcSubresource.baseArrayLayer</code> + 
<code>srcSubresource.layerCount</code></span> of each element of <code>pRegions</code>
, if <code>srcSubresource.layerCount</code> is not
<code>VK_REMAINING_ARRAY_LAYERS</code> and <a href="features.html#features-maintenance5" class="xref page">    <code>maintenance5</code></a> is not enabled,
<strong>must</strong> be less than or equal to the <code>arrayLayers</code> specified in
<a href="resources.html#VkImageCreateInfo" class="xref page">VkImageCreateInfo</a> when <code>srcImage</code> was created</p>
</li>
<li>
<p><a id="VUID-vkCmdResolveImage-dstSubresource-01712" href="#VUID-vkCmdResolveImage-dstSubresource-01712"></a> <span class="vuid">VUID-vkCmdResolveImage-dstSubresource-01712</span><br>

The <span class="eq"><code>dstSubresource.baseArrayLayer</code> + 
<code>dstSubresource.layerCount</code></span> of each element of <code>pRegions</code>
, if <code>dstSubresource.layerCount</code> is not
<code>VK_REMAINING_ARRAY_LAYERS</code> and <a href="features.html#features-maintenance5" class="xref page">    <code>maintenance5</code></a> is not enabled,
<strong>must</strong> be less than or equal to the <code>arrayLayers</code> specified in
<a href="resources.html#VkImageCreateInfo" class="xref page">VkImageCreateInfo</a> when <code>dstImage</code> was created</p>
</li>
<li>
<p><a id="VUID-vkCmdResolveImage-dstImage-02546" href="#VUID-vkCmdResolveImage-dstImage-02546"></a> <span class="vuid">VUID-vkCmdResolveImage-dstImage-02546</span><br>

<code>dstImage</code> and <code>srcImage</code> <strong>must</strong> not have been created with
<code>flags</code> containing <code>VK_IMAGE_CREATE_SUBSAMPLED_BIT_EXT</code></p>
</li>
<li>
<p><a id="VUID-vkCmdResolveImage-srcImage-04446" href="#VUID-vkCmdResolveImage-srcImage-04446"></a> <span class="vuid">VUID-vkCmdResolveImage-srcImage-04446</span><br>

If <code>dstImage</code> is of type <code>VK_IMAGE_TYPE_3D</code>, then for each
element of <code>pRegions</code>, <code>srcSubresource.layerCount</code> <strong>must</strong> be <code>1</code></p>
</li>
<li>
<p><a id="VUID-vkCmdResolveImage-srcImage-04447" href="#VUID-vkCmdResolveImage-srcImage-04447"></a> <span class="vuid">VUID-vkCmdResolveImage-srcImage-04447</span><br>

If <code>dstImage</code> is of type <code>VK_IMAGE_TYPE_3D</code>, then for each
element of <code>pRegions</code>, <code>dstSubresource.baseArrayLayer</code> <strong>must</strong> be
<code>0</code> and <code>dstSubresource.layerCount</code> <strong>must</strong> be <code>1</code></p>
</li>
<li>
<p><a id="VUID-vkCmdResolveImage-srcOffset-00269" href="#VUID-vkCmdResolveImage-srcOffset-00269"></a> <span class="vuid">VUID-vkCmdResolveImage-srcOffset-00269</span><br>

For each element of <code>pRegions</code>, <code>srcOffset.x</code> and
<span class="eq">(<code>extent.width</code> +  <code>srcOffset.x</code>)</span> <strong>must</strong> both be
greater than or equal to <code>0</code> and less than or equal to the width of the
specified <code>srcSubresource</code> of <code>srcImage</code></p>
</li>
<li>
<p><a id="VUID-vkCmdResolveImage-srcOffset-00270" href="#VUID-vkCmdResolveImage-srcOffset-00270"></a> <span class="vuid">VUID-vkCmdResolveImage-srcOffset-00270</span><br>

For each element of <code>pRegions</code>, <code>srcOffset.y</code> and
<span class="eq">(<code>extent.height</code> +  <code>srcOffset.y</code>)</span> <strong>must</strong> both be
greater than or equal to <code>0</code> and less than or equal to the height of the
specified <code>srcSubresource</code> of <code>srcImage</code></p>
</li>
<li>
<p><a id="VUID-vkCmdResolveImage-srcImage-00271" href="#VUID-vkCmdResolveImage-srcImage-00271"></a> <span class="vuid">VUID-vkCmdResolveImage-srcImage-00271</span><br>

If <code>srcImage</code> is of type <code>VK_IMAGE_TYPE_1D</code>, then for each
element of <code>pRegions</code>, <code>srcOffset.y</code> <strong>must</strong> be <code>0</code> and
<code>extent.height</code> <strong>must</strong> be <code>1</code></p>
</li>
<li>
<p><a id="VUID-vkCmdResolveImage-srcOffset-00272" href="#VUID-vkCmdResolveImage-srcOffset-00272"></a> <span class="vuid">VUID-vkCmdResolveImage-srcOffset-00272</span><br>

For each element of <code>pRegions</code>, <code>srcOffset.z</code> and
<span class="eq">(<code>extent.depth</code> +  <code>srcOffset.z</code>)</span> <strong>must</strong> both be
greater than or equal to <code>0</code> and less than or equal to the depth of the
specified <code>srcSubresource</code> of <code>srcImage</code></p>
</li>
<li>
<p><a id="VUID-vkCmdResolveImage-srcImage-00273" href="#VUID-vkCmdResolveImage-srcImage-00273"></a> <span class="vuid">VUID-vkCmdResolveImage-srcImage-00273</span><br>

If <code>srcImage</code> is of type <code>VK_IMAGE_TYPE_1D</code> or
<code>VK_IMAGE_TYPE_2D</code>, then for each element of <code>pRegions</code>,
<code>srcOffset.z</code> <strong>must</strong> be <code>0</code> and <code>extent.depth</code> <strong>must</strong> be <code>1</code></p>
</li>
<li>
<p><a id="VUID-vkCmdResolveImage-dstOffset-00274" href="#VUID-vkCmdResolveImage-dstOffset-00274"></a> <span class="vuid">VUID-vkCmdResolveImage-dstOffset-00274</span><br>

For each element of <code>pRegions</code>, <code>dstOffset.x</code> and
<span class="eq">(<code>extent.width</code> +  <code>dstOffset.x</code>)</span> <strong>must</strong> both be
greater than or equal to <code>0</code> and less than or equal to the width of the
specified <code>dstSubresource</code> of <code>dstImage</code></p>
</li>
<li>
<p><a id="VUID-vkCmdResolveImage-dstOffset-00275" href="#VUID-vkCmdResolveImage-dstOffset-00275"></a> <span class="vuid">VUID-vkCmdResolveImage-dstOffset-00275</span><br>

For each element of <code>pRegions</code>, <code>dstOffset.y</code> and
<span class="eq">(<code>extent.height</code> +  <code>dstOffset.y</code>)</span> <strong>must</strong> both be
greater than or equal to <code>0</code> and less than or equal to the height of the
specified <code>dstSubresource</code> of <code>dstImage</code></p>
</li>
<li>
<p><a id="VUID-vkCmdResolveImage-dstImage-00276" href="#VUID-vkCmdResolveImage-dstImage-00276"></a> <span class="vuid">VUID-vkCmdResolveImage-dstImage-00276</span><br>

If <code>dstImage</code> is of type <code>VK_IMAGE_TYPE_1D</code>, then for each
element of <code>pRegions</code>, <code>dstOffset.y</code> <strong>must</strong> be <code>0</code> and
<code>extent.height</code> <strong>must</strong> be <code>1</code></p>
</li>
<li>
<p><a id="VUID-vkCmdResolveImage-dstOffset-00277" href="#VUID-vkCmdResolveImage-dstOffset-00277"></a> <span class="vuid">VUID-vkCmdResolveImage-dstOffset-00277</span><br>

For each element of <code>pRegions</code>, <code>dstOffset.z</code> and
<span class="eq">(<code>extent.depth</code> +  <code>dstOffset.z</code>)</span> <strong>must</strong> both be
greater than or equal to <code>0</code> and less than or equal to the depth of the
specified <code>dstSubresource</code> of <code>dstImage</code></p>
</li>
<li>
<p><a id="VUID-vkCmdResolveImage-dstImage-00278" href="#VUID-vkCmdResolveImage-dstImage-00278"></a> <span class="vuid">VUID-vkCmdResolveImage-dstImage-00278</span><br>

If <code>dstImage</code> is of type <code>VK_IMAGE_TYPE_1D</code> or
<code>VK_IMAGE_TYPE_2D</code>, then for each element of <code>pRegions</code>,
<code>dstOffset.z</code> <strong>must</strong> be <code>0</code> and <code>extent.depth</code> <strong>must</strong> be <code>1</code></p>
</li>
<li>
<p><a id="VUID-vkCmdResolveImage-srcImage-06762" href="#VUID-vkCmdResolveImage-srcImage-06762"></a> <span class="vuid">VUID-vkCmdResolveImage-srcImage-06762</span><br>

<code>srcImage</code> <strong>must</strong> have been created with
<code>VK_IMAGE_USAGE_TRANSFER_SRC_BIT</code> usage flag</p>
</li>
<li>
<p><a id="VUID-vkCmdResolveImage-srcImage-06763" href="#VUID-vkCmdResolveImage-srcImage-06763"></a> <span class="vuid">VUID-vkCmdResolveImage-srcImage-06763</span><br>

The <a href="resources.html#resources-image-format-features" class="xref page">format features</a> of
<code>srcImage</code> <strong>must</strong> contain <code>VK_FORMAT_FEATURE_TRANSFER_SRC_BIT</code></p>
</li>
<li>
<p><a id="VUID-vkCmdResolveImage-dstImage-06764" href="#VUID-vkCmdResolveImage-dstImage-06764"></a> <span class="vuid">VUID-vkCmdResolveImage-dstImage-06764</span><br>

<code>dstImage</code> <strong>must</strong> have been created with
<code>VK_IMAGE_USAGE_TRANSFER_DST_BIT</code> usage flag</p>
</li>
<li>
<p><a id="VUID-vkCmdResolveImage-dstImage-06765" href="#VUID-vkCmdResolveImage-dstImage-06765"></a> <span class="vuid">VUID-vkCmdResolveImage-dstImage-06765</span><br>

The <a href="resources.html#resources-image-format-features" class="xref page">format features</a> of
<code>dstImage</code> <strong>must</strong> contain <code>VK_FORMAT_FEATURE_TRANSFER_DST_BIT</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCmdResolveImage-commandBuffer-parameter" href="#VUID-vkCmdResolveImage-commandBuffer-parameter"></a> <span class="vuid">VUID-vkCmdResolveImage-commandBuffer-parameter</span><br>
 <code>commandBuffer</code> <strong>must</strong> be a valid <a href="cmdbuffers.html#VkCommandBuffer" class="xref page">VkCommandBuffer</a> handle</p>
</li>
<li>
<p><a id="VUID-vkCmdResolveImage-srcImage-parameter" href="#VUID-vkCmdResolveImage-srcImage-parameter"></a> <span class="vuid">VUID-vkCmdResolveImage-srcImage-parameter</span><br>
 <code>srcImage</code> <strong>must</strong> be a valid <a href="resources.html#VkImage" class="xref page">VkImage</a> handle</p>
</li>
<li>
<p><a id="VUID-vkCmdResolveImage-srcImageLayout-parameter" href="#VUID-vkCmdResolveImage-srcImageLayout-parameter"></a> <span class="vuid">VUID-vkCmdResolveImage-srcImageLayout-parameter</span><br>
 <code>srcImageLayout</code> <strong>must</strong> be a valid <a href="resources.html#VkImageLayout" class="xref page">VkImageLayout</a> value</p>
</li>
<li>
<p><a id="VUID-vkCmdResolveImage-dstImage-parameter" href="#VUID-vkCmdResolveImage-dstImage-parameter"></a> <span class="vuid">VUID-vkCmdResolveImage-dstImage-parameter</span><br>
 <code>dstImage</code> <strong>must</strong> be a valid <a href="resources.html#VkImage" class="xref page">VkImage</a> handle</p>
</li>
<li>
<p><a id="VUID-vkCmdResolveImage-dstImageLayout-parameter" href="#VUID-vkCmdResolveImage-dstImageLayout-parameter"></a> <span class="vuid">VUID-vkCmdResolveImage-dstImageLayout-parameter</span><br>
 <code>dstImageLayout</code> <strong>must</strong> be a valid <a href="resources.html#VkImageLayout" class="xref page">VkImageLayout</a> value</p>
</li>
<li>
<p><a id="VUID-vkCmdResolveImage-pRegions-parameter" href="#VUID-vkCmdResolveImage-pRegions-parameter"></a> <span class="vuid">VUID-vkCmdResolveImage-pRegions-parameter</span><br>
 <code>pRegions</code> <strong>must</strong> be a valid pointer to an array of <code>regionCount</code> valid <a href="#VkImageResolve">VkImageResolve</a> structures</p>
</li>
<li>
<p><a id="VUID-vkCmdResolveImage-commandBuffer-recording" href="#VUID-vkCmdResolveImage-commandBuffer-recording"></a> <span class="vuid">VUID-vkCmdResolveImage-commandBuffer-recording</span><br>
 <code>commandBuffer</code> <strong>must</strong> be in the <a href="cmdbuffers.html#commandbuffers-lifecycle" class="xref page">recording state</a></p>
</li>
<li>
<p><a id="VUID-vkCmdResolveImage-commandBuffer-cmdpool" href="#VUID-vkCmdResolveImage-commandBuffer-cmdpool"></a> <span class="vuid">VUID-vkCmdResolveImage-commandBuffer-cmdpool</span><br>
 The <code>VkCommandPool</code> that <code>commandBuffer</code> was allocated from <strong>must</strong> support graphics operations</p>
</li>
<li>
<p><a id="VUID-vkCmdResolveImage-renderpass" href="#VUID-vkCmdResolveImage-renderpass"></a> <span class="vuid">VUID-vkCmdResolveImage-renderpass</span><br>
 This command <strong>must</strong> only be called outside of a render pass instance</p>
</li>
<li>
<p><a id="VUID-vkCmdResolveImage-videocoding" href="#VUID-vkCmdResolveImage-videocoding"></a> <span class="vuid">VUID-vkCmdResolveImage-videocoding</span><br>
 This command <strong>must</strong> only be called outside of a video coding scope</p>
</li>
<li>
<p><a id="VUID-vkCmdResolveImage-regionCount-arraylength" href="#VUID-vkCmdResolveImage-regionCount-arraylength"></a> <span class="vuid">VUID-vkCmdResolveImage-regionCount-arraylength</span><br>
 <code>regionCount</code> <strong>must</strong> be greater than <code>0</code></p>
</li>
<li>
<p><a id="VUID-vkCmdResolveImage-commonparent" href="#VUID-vkCmdResolveImage-commonparent"></a> <span class="vuid">VUID-vkCmdResolveImage-commonparent</span><br>
 Each of <code>commandBuffer</code>, <code>dstImage</code>, and <code>srcImage</code> <strong>must</strong> have been created, allocated, or retrieved from the same <a href="devsandqueues.html#VkDevice" class="xref page">VkDevice</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Host Synchronization</div>
<div class="ulist">
<ul>
<li>
<p>Host access to <code>commandBuffer</code> <strong>must</strong> be externally synchronized</p>
</li>
<li>
<p>Host access to the <code>VkCommandPool</code> that <code>commandBuffer</code> was allocated from <strong>must</strong> be externally synchronized</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Command Properties</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><a href="cmdbuffers.html#VkCommandBufferLevel" class="xref page">Command Buffer Levels</a></th>
<th class="tableblock halign-left valign-top"><a href="renderpass.html#vkCmdBeginRenderPass" class="xref page">Render Pass Scope</a></th>
<th class="tableblock halign-left valign-top"><a href="video_extensions.html#vkCmdBeginVideoCodingKHR" class="xref page">Video Coding Scope</a></th>
<th class="tableblock halign-left valign-top"><a href="devsandqueues.html#VkQueueFlagBits" class="xref page">Supported Queue Types</a></th>
<th class="tableblock halign-left valign-top"><a href="fundamentals.html#fundamentals-queueoperation-command-types" class="xref page">Command Type</a></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Primary<br>
Secondary</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Outside</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Outside</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Graphics</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Action</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>VkImageResolve</code> structure is defined as:</p>
</div>
<div id="VkImageResolve" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_VERSION_1_0
typedef struct VkImageResolve {
    VkImageSubresourceLayers    srcSubresource;
    VkOffset3D                  srcOffset;
    VkImageSubresourceLayers    dstSubresource;
    VkOffset3D                  dstOffset;
    VkExtent3D                  extent;
} VkImageResolve;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>srcSubresource</code> and <code>dstSubresource</code> are
<a href="#VkImageSubresourceLayers">VkImageSubresourceLayers</a> structures specifying the image
subresources of the images used for the source and destination image
data, respectively.
Resolve of depth/stencil images is not supported.</p>
</li>
<li>
<p><code>srcOffset</code> and <code>dstOffset</code> select the initial <code>x</code>, <code>y</code>,
and <code>z</code> offsets in texels of the sub-regions of the source and
destination image data.</p>
</li>
<li>
<p><code>extent</code> is the size in texels of the source image to resolve in
<code>width</code>, <code>height</code> and <code>depth</code>.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkImageResolve-aspectMask-00266" href="#VUID-VkImageResolve-aspectMask-00266"></a> <span class="vuid">VUID-VkImageResolve-aspectMask-00266</span><br>

The <code>aspectMask</code> member of <code>srcSubresource</code> and
<code>dstSubresource</code> <strong>must</strong> only contain <code>VK_IMAGE_ASPECT_COLOR_BIT</code></p>
</li>
<li>
<p><a id="VUID-VkImageResolve-maintenance5-08802" href="#VUID-VkImageResolve-maintenance5-08802"></a> <span class="vuid">VUID-VkImageResolve-maintenance5-08802</span><br>

If the <a href="features.html#features-maintenance5" class="xref page"><code>maintenance5</code></a> feature is not
enabled, the <code>layerCount</code> member of <code>srcSubresource</code> or
<code>dstSubresource</code> <strong>must</strong> not be <code>VK_REMAINING_ARRAY_LAYERS</code></p>
</li>
<li>
<p><a id="VUID-VkImageResolve-layerCount-08803" href="#VUID-VkImageResolve-layerCount-08803"></a> <span class="vuid">VUID-VkImageResolve-layerCount-08803</span><br>

If neither of the <code>layerCount</code> members of <code>srcSubresource</code> or
<code>dstSubresource</code> are <code>VK_REMAINING_ARRAY_LAYERS</code>, the
<code>layerCount</code> members <strong>must</strong> match</p>
</li>
<li>
<p><a id="VUID-VkImageResolve-layerCount-08804" href="#VUID-VkImageResolve-layerCount-08804"></a> <span class="vuid">VUID-VkImageResolve-layerCount-08804</span><br>

If one of the <code>layerCount</code> members of <code>srcSubresource</code> or
<code>dstSubresource</code> is <code>VK_REMAINING_ARRAY_LAYERS</code>, the other
member <strong>must</strong> be either <code>VK_REMAINING_ARRAY_LAYERS</code> or equal to the
<code>arrayLayers</code> member of the <a href="resources.html#VkImageCreateInfo" class="xref page">VkImageCreateInfo</a> used to create
the image minus <code>baseArrayLayer</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkImageResolve-srcSubresource-parameter" href="#VUID-VkImageResolve-srcSubresource-parameter"></a> <span class="vuid">VUID-VkImageResolve-srcSubresource-parameter</span><br>
 <code>srcSubresource</code> <strong>must</strong> be a valid <a href="#VkImageSubresourceLayers">VkImageSubresourceLayers</a> structure</p>
</li>
<li>
<p><a id="VUID-VkImageResolve-dstSubresource-parameter" href="#VUID-VkImageResolve-dstSubresource-parameter"></a> <span class="vuid">VUID-VkImageResolve-dstSubresource-parameter</span><br>
 <code>dstSubresource</code> <strong>must</strong> be a valid <a href="#VkImageSubresourceLayers">VkImageSubresourceLayers</a> structure</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>A more extensible version of the resolve image command is defined below.</p>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>To resolve a multisample image to a non-multisample image, call:</p>
</div>
<div id="vkCmdResolveImage2" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_VERSION_1_3
void vkCmdResolveImage2(
    VkCommandBuffer                             commandBuffer,
    const VkResolveImageInfo2*                  pResolveImageInfo);</code></pre>
</div>
</div>
<div class="paragraph">
<p>or the equivalent command</p>
</div>
<div id="vkCmdResolveImage2KHR" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_KHR_copy_commands2
void vkCmdResolveImage2KHR(
    VkCommandBuffer                             commandBuffer,
    const VkResolveImageInfo2*                  pResolveImageInfo);</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>commandBuffer</code> is the command buffer into which the command will be
recorded.</p>
</li>
<li>
<p><code>pResolveImageInfo</code> is a pointer to a <a href="#VkResolveImageInfo2">VkResolveImageInfo2</a>
structure describing the resolve parameters.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>This command is functionally identical to <a href="#vkCmdResolveImage">vkCmdResolveImage</a>, but
includes extensible sub-structures that include <code>sType</code> and <code>pNext</code>
parameters, allowing them to be more easily extended.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCmdResolveImage2-commandBuffer-01837" href="#VUID-vkCmdResolveImage2-commandBuffer-01837"></a> <span class="vuid">VUID-vkCmdResolveImage2-commandBuffer-01837</span><br>

If <code>commandBuffer</code> is an unprotected command buffer and
<a href="devsandqueues.html#limits-protectedNoFault" class="xref page"><code>protectedNoFault</code></a> is not supported,
<code>srcImage</code> <strong>must</strong> not be a protected image</p>
</li>
<li>
<p><a id="VUID-vkCmdResolveImage2-commandBuffer-01838" href="#VUID-vkCmdResolveImage2-commandBuffer-01838"></a> <span class="vuid">VUID-vkCmdResolveImage2-commandBuffer-01838</span><br>

If <code>commandBuffer</code> is an unprotected command buffer and
<a href="devsandqueues.html#limits-protectedNoFault" class="xref page"><code>protectedNoFault</code></a> is not supported,
<code>dstImage</code> <strong>must</strong> not be a protected image</p>
</li>
<li>
<p><a id="VUID-vkCmdResolveImage2-commandBuffer-01839" href="#VUID-vkCmdResolveImage2-commandBuffer-01839"></a> <span class="vuid">VUID-vkCmdResolveImage2-commandBuffer-01839</span><br>

If <code>commandBuffer</code> is a protected command buffer and
<a href="devsandqueues.html#limits-protectedNoFault" class="xref page"><code>protectedNoFault</code></a> is not supported,
<code>dstImage</code> <strong>must</strong> not be an unprotected image</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCmdResolveImage2-commandBuffer-parameter" href="#VUID-vkCmdResolveImage2-commandBuffer-parameter"></a> <span class="vuid">VUID-vkCmdResolveImage2-commandBuffer-parameter</span><br>
 <code>commandBuffer</code> <strong>must</strong> be a valid <a href="cmdbuffers.html#VkCommandBuffer" class="xref page">VkCommandBuffer</a> handle</p>
</li>
<li>
<p><a id="VUID-vkCmdResolveImage2-pResolveImageInfo-parameter" href="#VUID-vkCmdResolveImage2-pResolveImageInfo-parameter"></a> <span class="vuid">VUID-vkCmdResolveImage2-pResolveImageInfo-parameter</span><br>
 <code>pResolveImageInfo</code> <strong>must</strong> be a valid pointer to a valid <a href="#VkResolveImageInfo2">VkResolveImageInfo2</a> structure</p>
</li>
<li>
<p><a id="VUID-vkCmdResolveImage2-commandBuffer-recording" href="#VUID-vkCmdResolveImage2-commandBuffer-recording"></a> <span class="vuid">VUID-vkCmdResolveImage2-commandBuffer-recording</span><br>
 <code>commandBuffer</code> <strong>must</strong> be in the <a href="cmdbuffers.html#commandbuffers-lifecycle" class="xref page">recording state</a></p>
</li>
<li>
<p><a id="VUID-vkCmdResolveImage2-commandBuffer-cmdpool" href="#VUID-vkCmdResolveImage2-commandBuffer-cmdpool"></a> <span class="vuid">VUID-vkCmdResolveImage2-commandBuffer-cmdpool</span><br>
 The <code>VkCommandPool</code> that <code>commandBuffer</code> was allocated from <strong>must</strong> support graphics operations</p>
</li>
<li>
<p><a id="VUID-vkCmdResolveImage2-renderpass" href="#VUID-vkCmdResolveImage2-renderpass"></a> <span class="vuid">VUID-vkCmdResolveImage2-renderpass</span><br>
 This command <strong>must</strong> only be called outside of a render pass instance</p>
</li>
<li>
<p><a id="VUID-vkCmdResolveImage2-videocoding" href="#VUID-vkCmdResolveImage2-videocoding"></a> <span class="vuid">VUID-vkCmdResolveImage2-videocoding</span><br>
 This command <strong>must</strong> only be called outside of a video coding scope</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Host Synchronization</div>
<div class="ulist">
<ul>
<li>
<p>Host access to <code>commandBuffer</code> <strong>must</strong> be externally synchronized</p>
</li>
<li>
<p>Host access to the <code>VkCommandPool</code> that <code>commandBuffer</code> was allocated from <strong>must</strong> be externally synchronized</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Command Properties</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><a href="cmdbuffers.html#VkCommandBufferLevel" class="xref page">Command Buffer Levels</a></th>
<th class="tableblock halign-left valign-top"><a href="renderpass.html#vkCmdBeginRenderPass" class="xref page">Render Pass Scope</a></th>
<th class="tableblock halign-left valign-top"><a href="video_extensions.html#vkCmdBeginVideoCodingKHR" class="xref page">Video Coding Scope</a></th>
<th class="tableblock halign-left valign-top"><a href="devsandqueues.html#VkQueueFlagBits" class="xref page">Supported Queue Types</a></th>
<th class="tableblock halign-left valign-top"><a href="fundamentals.html#fundamentals-queueoperation-command-types" class="xref page">Command Type</a></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Primary<br>
Secondary</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Outside</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Outside</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Graphics</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Action</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>VkResolveImageInfo2</code> structure is defined as:</p>
</div>
<div id="VkResolveImageInfo2" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_VERSION_1_3
typedef struct VkResolveImageInfo2 {
    VkStructureType           sType;
    const void*               pNext;
    VkImage                   srcImage;
    VkImageLayout             srcImageLayout;
    VkImage                   dstImage;
    VkImageLayout             dstImageLayout;
    uint32_t                  regionCount;
    const VkImageResolve2*    pRegions;
} VkResolveImageInfo2;</code></pre>
</div>
</div>
<div class="paragraph">
<p>or the equivalent</p>
</div>
<div id="VkResolveImageInfo2KHR" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_KHR_copy_commands2
typedef VkResolveImageInfo2 VkResolveImageInfo2KHR;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is a <a href="fundamentals.html#VkStructureType" class="xref page">VkStructureType</a> value identifying this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>srcImage</code> is the source image.</p>
</li>
<li>
<p><code>srcImageLayout</code> is the layout of the source image subresources for
the resolve.</p>
</li>
<li>
<p><code>dstImage</code> is the destination image.</p>
</li>
<li>
<p><code>dstImageLayout</code> is the layout of the destination image subresources
for the resolve.</p>
</li>
<li>
<p><code>regionCount</code> is the number of regions to resolve.</p>
</li>
<li>
<p><code>pRegions</code> is a pointer to an array of <a href="#VkImageResolve2">VkImageResolve2</a>
structures specifying the regions to resolve.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkResolveImageInfo2-pRegions-00255" href="#VUID-VkResolveImageInfo2-pRegions-00255"></a> <span class="vuid">VUID-VkResolveImageInfo2-pRegions-00255</span><br>

The union of all source regions, and the union of all destination
regions, specified by the elements of <code>pRegions</code>, <strong>must</strong> not overlap
in memory</p>
</li>
<li>
<p><a id="VUID-VkResolveImageInfo2-srcImage-00256" href="#VUID-VkResolveImageInfo2-srcImage-00256"></a> <span class="vuid">VUID-VkResolveImageInfo2-srcImage-00256</span><br>

If <code>srcImage</code> is non-sparse then it <strong>must</strong> be bound completely and
contiguously to a single <code>VkDeviceMemory</code> object</p>
</li>
<li>
<p><a id="VUID-VkResolveImageInfo2-srcImage-00257" href="#VUID-VkResolveImageInfo2-srcImage-00257"></a> <span class="vuid">VUID-VkResolveImageInfo2-srcImage-00257</span><br>

<code>srcImage</code> <strong>must</strong> have a sample count equal to any valid sample count
value other than <code>VK_SAMPLE_COUNT_1_BIT</code></p>
</li>
<li>
<p><a id="VUID-VkResolveImageInfo2-dstImage-00258" href="#VUID-VkResolveImageInfo2-dstImage-00258"></a> <span class="vuid">VUID-VkResolveImageInfo2-dstImage-00258</span><br>

If <code>dstImage</code> is non-sparse then it <strong>must</strong> be bound completely and
contiguously to a single <code>VkDeviceMemory</code> object</p>
</li>
<li>
<p><a id="VUID-VkResolveImageInfo2-dstImage-00259" href="#VUID-VkResolveImageInfo2-dstImage-00259"></a> <span class="vuid">VUID-VkResolveImageInfo2-dstImage-00259</span><br>

<code>dstImage</code> <strong>must</strong> have a sample count equal to
<code>VK_SAMPLE_COUNT_1_BIT</code></p>
</li>
<li>
<p><a id="VUID-VkResolveImageInfo2-srcImageLayout-00260" href="#VUID-VkResolveImageInfo2-srcImageLayout-00260"></a> <span class="vuid">VUID-VkResolveImageInfo2-srcImageLayout-00260</span><br>

<code>srcImageLayout</code> <strong>must</strong> specify the layout of the image subresources
of <code>srcImage</code> specified in <code>pRegions</code> at the time this command
is executed on a <code>VkDevice</code></p>
</li>
<li>
<p><a id="VUID-VkResolveImageInfo2-srcImageLayout-01400" href="#VUID-VkResolveImageInfo2-srcImageLayout-01400"></a> <span class="vuid">VUID-VkResolveImageInfo2-srcImageLayout-01400</span><br>

<code>srcImageLayout</code> <strong>must</strong> be <code>VK_IMAGE_LAYOUT_SHARED_PRESENT_KHR</code>,
<code>VK_IMAGE_LAYOUT_TRANSFER_SRC_OPTIMAL</code> or
<code>VK_IMAGE_LAYOUT_GENERAL</code></p>
</li>
<li>
<p><a id="VUID-VkResolveImageInfo2-dstImageLayout-00262" href="#VUID-VkResolveImageInfo2-dstImageLayout-00262"></a> <span class="vuid">VUID-VkResolveImageInfo2-dstImageLayout-00262</span><br>

<code>dstImageLayout</code> <strong>must</strong> specify the layout of the image subresources
of <code>dstImage</code> specified in <code>pRegions</code> at the time this command
is executed on a <code>VkDevice</code></p>
</li>
<li>
<p><a id="VUID-VkResolveImageInfo2-dstImageLayout-01401" href="#VUID-VkResolveImageInfo2-dstImageLayout-01401"></a> <span class="vuid">VUID-VkResolveImageInfo2-dstImageLayout-01401</span><br>

<code>dstImageLayout</code> <strong>must</strong> be <code>VK_IMAGE_LAYOUT_SHARED_PRESENT_KHR</code>,
<code>VK_IMAGE_LAYOUT_TRANSFER_DST_OPTIMAL</code> or
<code>VK_IMAGE_LAYOUT_GENERAL</code></p>
</li>
<li>
<p><a id="VUID-VkResolveImageInfo2-dstImage-02003" href="#VUID-VkResolveImageInfo2-dstImage-02003"></a> <span class="vuid">VUID-VkResolveImageInfo2-dstImage-02003</span><br>

The <a href="resources.html#resources-image-format-features" class="xref page">format features</a> of
<code>dstImage</code> <strong>must</strong> contain
<code>VK_FORMAT_FEATURE_COLOR_ATTACHMENT_BIT</code></p>
</li>
<li>
<p><a id="VUID-VkResolveImageInfo2-linearColorAttachment-06519" href="#VUID-VkResolveImageInfo2-linearColorAttachment-06519"></a> <span class="vuid">VUID-VkResolveImageInfo2-linearColorAttachment-06519</span><br>

If the <a href="features.html#features-linearColorAttachment" class="xref page"><code>linearColorAttachment</code></a>
feature is enabled and the image is created with
<code>VK_IMAGE_TILING_LINEAR</code>, the
<a href="resources.html#resources-image-format-features" class="xref page">format features</a> of <code>dstImage</code>
<strong>must</strong> contain <code>VK_FORMAT_FEATURE_2_LINEAR_COLOR_ATTACHMENT_BIT_NV</code></p>
</li>
<li>
<p><a id="VUID-VkResolveImageInfo2-srcImage-01386" href="#VUID-VkResolveImageInfo2-srcImage-01386"></a> <span class="vuid">VUID-VkResolveImageInfo2-srcImage-01386</span><br>

<code>srcImage</code> and <code>dstImage</code> <strong>must</strong> have been created with the same
image format</p>
</li>
<li>
<p><a id="VUID-VkResolveImageInfo2-srcSubresource-01709" href="#VUID-VkResolveImageInfo2-srcSubresource-01709"></a> <span class="vuid">VUID-VkResolveImageInfo2-srcSubresource-01709</span><br>

The <code>srcSubresource.mipLevel</code> member of each element of
<code>pRegions</code> <strong>must</strong> be less than the <code>mipLevels</code> specified in
<a href="resources.html#VkImageCreateInfo" class="xref page">VkImageCreateInfo</a> when <code>srcImage</code> was created</p>
</li>
<li>
<p><a id="VUID-VkResolveImageInfo2-dstSubresource-01710" href="#VUID-VkResolveImageInfo2-dstSubresource-01710"></a> <span class="vuid">VUID-VkResolveImageInfo2-dstSubresource-01710</span><br>

The <code>dstSubresource.mipLevel</code> member of each element of
<code>pRegions</code> <strong>must</strong> be less than the <code>mipLevels</code> specified in
<a href="resources.html#VkImageCreateInfo" class="xref page">VkImageCreateInfo</a> when <code>dstImage</code> was created</p>
</li>
<li>
<p><a id="VUID-VkResolveImageInfo2-srcSubresource-01711" href="#VUID-VkResolveImageInfo2-srcSubresource-01711"></a> <span class="vuid">VUID-VkResolveImageInfo2-srcSubresource-01711</span><br>

The <span class="eq"><code>srcSubresource.baseArrayLayer</code> + 
<code>srcSubresource.layerCount</code></span> of each element of <code>pRegions</code>
, if <code>srcSubresource.layerCount</code> is not
<code>VK_REMAINING_ARRAY_LAYERS</code> and <a href="features.html#features-maintenance5" class="xref page">    <code>maintenance5</code></a> is not enabled,
<strong>must</strong> be less than or equal to the <code>arrayLayers</code> specified in
<a href="resources.html#VkImageCreateInfo" class="xref page">VkImageCreateInfo</a> when <code>srcImage</code> was created</p>
</li>
<li>
<p><a id="VUID-VkResolveImageInfo2-dstSubresource-01712" href="#VUID-VkResolveImageInfo2-dstSubresource-01712"></a> <span class="vuid">VUID-VkResolveImageInfo2-dstSubresource-01712</span><br>

The <span class="eq"><code>dstSubresource.baseArrayLayer</code> + 
<code>dstSubresource.layerCount</code></span> of each element of <code>pRegions</code>
, if <code>dstSubresource.layerCount</code> is not
<code>VK_REMAINING_ARRAY_LAYERS</code> and <a href="features.html#features-maintenance5" class="xref page">    <code>maintenance5</code></a> is not enabled,
<strong>must</strong> be less than or equal to the <code>arrayLayers</code> specified in
<a href="resources.html#VkImageCreateInfo" class="xref page">VkImageCreateInfo</a> when <code>dstImage</code> was created</p>
</li>
<li>
<p><a id="VUID-VkResolveImageInfo2-dstImage-02546" href="#VUID-VkResolveImageInfo2-dstImage-02546"></a> <span class="vuid">VUID-VkResolveImageInfo2-dstImage-02546</span><br>

<code>dstImage</code> and <code>srcImage</code> <strong>must</strong> not have been created with
<code>flags</code> containing <code>VK_IMAGE_CREATE_SUBSAMPLED_BIT_EXT</code></p>
</li>
<li>
<p><a id="VUID-VkResolveImageInfo2-srcImage-04446" href="#VUID-VkResolveImageInfo2-srcImage-04446"></a> <span class="vuid">VUID-VkResolveImageInfo2-srcImage-04446</span><br>

If <code>dstImage</code> is of type <code>VK_IMAGE_TYPE_3D</code>, then for each
element of <code>pRegions</code>, <code>srcSubresource.layerCount</code> <strong>must</strong> be <code>1</code></p>
</li>
<li>
<p><a id="VUID-VkResolveImageInfo2-srcImage-04447" href="#VUID-VkResolveImageInfo2-srcImage-04447"></a> <span class="vuid">VUID-VkResolveImageInfo2-srcImage-04447</span><br>

If <code>dstImage</code> is of type <code>VK_IMAGE_TYPE_3D</code>, then for each
element of <code>pRegions</code>, <code>dstSubresource.baseArrayLayer</code> <strong>must</strong> be
<code>0</code> and <code>dstSubresource.layerCount</code> <strong>must</strong> be <code>1</code></p>
</li>
<li>
<p><a id="VUID-VkResolveImageInfo2-srcOffset-00269" href="#VUID-VkResolveImageInfo2-srcOffset-00269"></a> <span class="vuid">VUID-VkResolveImageInfo2-srcOffset-00269</span><br>

For each element of <code>pRegions</code>, <code>srcOffset.x</code> and
<span class="eq">(<code>extent.width</code> +  <code>srcOffset.x</code>)</span> <strong>must</strong> both be
greater than or equal to <code>0</code> and less than or equal to the width of the
specified <code>srcSubresource</code> of <code>srcImage</code></p>
</li>
<li>
<p><a id="VUID-VkResolveImageInfo2-srcOffset-00270" href="#VUID-VkResolveImageInfo2-srcOffset-00270"></a> <span class="vuid">VUID-VkResolveImageInfo2-srcOffset-00270</span><br>

For each element of <code>pRegions</code>, <code>srcOffset.y</code> and
<span class="eq">(<code>extent.height</code> +  <code>srcOffset.y</code>)</span> <strong>must</strong> both be
greater than or equal to <code>0</code> and less than or equal to the height of the
specified <code>srcSubresource</code> of <code>srcImage</code></p>
</li>
<li>
<p><a id="VUID-VkResolveImageInfo2-srcImage-00271" href="#VUID-VkResolveImageInfo2-srcImage-00271"></a> <span class="vuid">VUID-VkResolveImageInfo2-srcImage-00271</span><br>

If <code>srcImage</code> is of type <code>VK_IMAGE_TYPE_1D</code>, then for each
element of <code>pRegions</code>, <code>srcOffset.y</code> <strong>must</strong> be <code>0</code> and
<code>extent.height</code> <strong>must</strong> be <code>1</code></p>
</li>
<li>
<p><a id="VUID-VkResolveImageInfo2-srcOffset-00272" href="#VUID-VkResolveImageInfo2-srcOffset-00272"></a> <span class="vuid">VUID-VkResolveImageInfo2-srcOffset-00272</span><br>

For each element of <code>pRegions</code>, <code>srcOffset.z</code> and
<span class="eq">(<code>extent.depth</code> +  <code>srcOffset.z</code>)</span> <strong>must</strong> both be
greater than or equal to <code>0</code> and less than or equal to the depth of the
specified <code>srcSubresource</code> of <code>srcImage</code></p>
</li>
<li>
<p><a id="VUID-VkResolveImageInfo2-srcImage-00273" href="#VUID-VkResolveImageInfo2-srcImage-00273"></a> <span class="vuid">VUID-VkResolveImageInfo2-srcImage-00273</span><br>

If <code>srcImage</code> is of type <code>VK_IMAGE_TYPE_1D</code> or
<code>VK_IMAGE_TYPE_2D</code>, then for each element of <code>pRegions</code>,
<code>srcOffset.z</code> <strong>must</strong> be <code>0</code> and <code>extent.depth</code> <strong>must</strong> be <code>1</code></p>
</li>
<li>
<p><a id="VUID-VkResolveImageInfo2-dstOffset-00274" href="#VUID-VkResolveImageInfo2-dstOffset-00274"></a> <span class="vuid">VUID-VkResolveImageInfo2-dstOffset-00274</span><br>

For each element of <code>pRegions</code>, <code>dstOffset.x</code> and
<span class="eq">(<code>extent.width</code> +  <code>dstOffset.x</code>)</span> <strong>must</strong> both be
greater than or equal to <code>0</code> and less than or equal to the width of the
specified <code>dstSubresource</code> of <code>dstImage</code></p>
</li>
<li>
<p><a id="VUID-VkResolveImageInfo2-dstOffset-00275" href="#VUID-VkResolveImageInfo2-dstOffset-00275"></a> <span class="vuid">VUID-VkResolveImageInfo2-dstOffset-00275</span><br>

For each element of <code>pRegions</code>, <code>dstOffset.y</code> and
<span class="eq">(<code>extent.height</code> +  <code>dstOffset.y</code>)</span> <strong>must</strong> both be
greater than or equal to <code>0</code> and less than or equal to the height of the
specified <code>dstSubresource</code> of <code>dstImage</code></p>
</li>
<li>
<p><a id="VUID-VkResolveImageInfo2-dstImage-00276" href="#VUID-VkResolveImageInfo2-dstImage-00276"></a> <span class="vuid">VUID-VkResolveImageInfo2-dstImage-00276</span><br>

If <code>dstImage</code> is of type <code>VK_IMAGE_TYPE_1D</code>, then for each
element of <code>pRegions</code>, <code>dstOffset.y</code> <strong>must</strong> be <code>0</code> and
<code>extent.height</code> <strong>must</strong> be <code>1</code></p>
</li>
<li>
<p><a id="VUID-VkResolveImageInfo2-dstOffset-00277" href="#VUID-VkResolveImageInfo2-dstOffset-00277"></a> <span class="vuid">VUID-VkResolveImageInfo2-dstOffset-00277</span><br>

For each element of <code>pRegions</code>, <code>dstOffset.z</code> and
<span class="eq">(<code>extent.depth</code> +  <code>dstOffset.z</code>)</span> <strong>must</strong> both be
greater than or equal to <code>0</code> and less than or equal to the depth of the
specified <code>dstSubresource</code> of <code>dstImage</code></p>
</li>
<li>
<p><a id="VUID-VkResolveImageInfo2-dstImage-00278" href="#VUID-VkResolveImageInfo2-dstImage-00278"></a> <span class="vuid">VUID-VkResolveImageInfo2-dstImage-00278</span><br>

If <code>dstImage</code> is of type <code>VK_IMAGE_TYPE_1D</code> or
<code>VK_IMAGE_TYPE_2D</code>, then for each element of <code>pRegions</code>,
<code>dstOffset.z</code> <strong>must</strong> be <code>0</code> and <code>extent.depth</code> <strong>must</strong> be <code>1</code></p>
</li>
<li>
<p><a id="VUID-VkResolveImageInfo2-srcImage-06762" href="#VUID-VkResolveImageInfo2-srcImage-06762"></a> <span class="vuid">VUID-VkResolveImageInfo2-srcImage-06762</span><br>

<code>srcImage</code> <strong>must</strong> have been created with
<code>VK_IMAGE_USAGE_TRANSFER_SRC_BIT</code> usage flag</p>
</li>
<li>
<p><a id="VUID-VkResolveImageInfo2-srcImage-06763" href="#VUID-VkResolveImageInfo2-srcImage-06763"></a> <span class="vuid">VUID-VkResolveImageInfo2-srcImage-06763</span><br>

The <a href="resources.html#resources-image-format-features" class="xref page">format features</a> of
<code>srcImage</code> <strong>must</strong> contain <code>VK_FORMAT_FEATURE_TRANSFER_SRC_BIT</code></p>
</li>
<li>
<p><a id="VUID-VkResolveImageInfo2-dstImage-06764" href="#VUID-VkResolveImageInfo2-dstImage-06764"></a> <span class="vuid">VUID-VkResolveImageInfo2-dstImage-06764</span><br>

<code>dstImage</code> <strong>must</strong> have been created with
<code>VK_IMAGE_USAGE_TRANSFER_DST_BIT</code> usage flag</p>
</li>
<li>
<p><a id="VUID-VkResolveImageInfo2-dstImage-06765" href="#VUID-VkResolveImageInfo2-dstImage-06765"></a> <span class="vuid">VUID-VkResolveImageInfo2-dstImage-06765</span><br>

The <a href="resources.html#resources-image-format-features" class="xref page">format features</a> of
<code>dstImage</code> <strong>must</strong> contain <code>VK_FORMAT_FEATURE_TRANSFER_DST_BIT</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkResolveImageInfo2-sType-sType" href="#VUID-VkResolveImageInfo2-sType-sType"></a> <span class="vuid">VUID-VkResolveImageInfo2-sType-sType</span><br>
 <code>sType</code> <strong>must</strong> be <code>VK_STRUCTURE_TYPE_RESOLVE_IMAGE_INFO_2</code></p>
</li>
<li>
<p><a id="VUID-VkResolveImageInfo2-pNext-pNext" href="#VUID-VkResolveImageInfo2-pNext-pNext"></a> <span class="vuid">VUID-VkResolveImageInfo2-pNext-pNext</span><br>
 <code>pNext</code> <strong>must</strong> be <code>NULL</code></p>
</li>
<li>
<p><a id="VUID-VkResolveImageInfo2-srcImage-parameter" href="#VUID-VkResolveImageInfo2-srcImage-parameter"></a> <span class="vuid">VUID-VkResolveImageInfo2-srcImage-parameter</span><br>
 <code>srcImage</code> <strong>must</strong> be a valid <a href="resources.html#VkImage" class="xref page">VkImage</a> handle</p>
</li>
<li>
<p><a id="VUID-VkResolveImageInfo2-srcImageLayout-parameter" href="#VUID-VkResolveImageInfo2-srcImageLayout-parameter"></a> <span class="vuid">VUID-VkResolveImageInfo2-srcImageLayout-parameter</span><br>
 <code>srcImageLayout</code> <strong>must</strong> be a valid <a href="resources.html#VkImageLayout" class="xref page">VkImageLayout</a> value</p>
</li>
<li>
<p><a id="VUID-VkResolveImageInfo2-dstImage-parameter" href="#VUID-VkResolveImageInfo2-dstImage-parameter"></a> <span class="vuid">VUID-VkResolveImageInfo2-dstImage-parameter</span><br>
 <code>dstImage</code> <strong>must</strong> be a valid <a href="resources.html#VkImage" class="xref page">VkImage</a> handle</p>
</li>
<li>
<p><a id="VUID-VkResolveImageInfo2-dstImageLayout-parameter" href="#VUID-VkResolveImageInfo2-dstImageLayout-parameter"></a> <span class="vuid">VUID-VkResolveImageInfo2-dstImageLayout-parameter</span><br>
 <code>dstImageLayout</code> <strong>must</strong> be a valid <a href="resources.html#VkImageLayout" class="xref page">VkImageLayout</a> value</p>
</li>
<li>
<p><a id="VUID-VkResolveImageInfo2-pRegions-parameter" href="#VUID-VkResolveImageInfo2-pRegions-parameter"></a> <span class="vuid">VUID-VkResolveImageInfo2-pRegions-parameter</span><br>
 <code>pRegions</code> <strong>must</strong> be a valid pointer to an array of <code>regionCount</code> valid <a href="#VkImageResolve2">VkImageResolve2</a> structures</p>
</li>
<li>
<p><a id="VUID-VkResolveImageInfo2-regionCount-arraylength" href="#VUID-VkResolveImageInfo2-regionCount-arraylength"></a> <span class="vuid">VUID-VkResolveImageInfo2-regionCount-arraylength</span><br>
 <code>regionCount</code> <strong>must</strong> be greater than <code>0</code></p>
</li>
<li>
<p><a id="VUID-VkResolveImageInfo2-commonparent" href="#VUID-VkResolveImageInfo2-commonparent"></a> <span class="vuid">VUID-VkResolveImageInfo2-commonparent</span><br>
 Both of <code>dstImage</code>, and <code>srcImage</code> <strong>must</strong> have been created, allocated, or retrieved from the same <a href="devsandqueues.html#VkDevice" class="xref page">VkDevice</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>VkImageResolve2</code> structure is defined as:</p>
</div>
<div id="VkImageResolve2" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_VERSION_1_3
typedef struct VkImageResolve2 {
    VkStructureType             sType;
    const void*                 pNext;
    VkImageSubresourceLayers    srcSubresource;
    VkOffset3D                  srcOffset;
    VkImageSubresourceLayers    dstSubresource;
    VkOffset3D                  dstOffset;
    VkExtent3D                  extent;
} VkImageResolve2;</code></pre>
</div>
</div>
<div class="paragraph">
<p>or the equivalent</p>
</div>
<div id="VkImageResolve2KHR" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_KHR_copy_commands2
typedef VkImageResolve2 VkImageResolve2KHR;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is a <a href="fundamentals.html#VkStructureType" class="xref page">VkStructureType</a> value identifying this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>srcSubresource</code> and <code>dstSubresource</code> are
<a href="#VkImageSubresourceLayers">VkImageSubresourceLayers</a> structures specifying the image
subresources of the images used for the source and destination image
data, respectively.
Resolve of depth/stencil images is not supported.</p>
</li>
<li>
<p><code>srcOffset</code> and <code>dstOffset</code> select the initial <code>x</code>, <code>y</code>,
and <code>z</code> offsets in texels of the sub-regions of the source and
destination image data.</p>
</li>
<li>
<p><code>extent</code> is the size in texels of the source image to resolve in
<code>width</code>, <code>height</code> and <code>depth</code>.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkImageResolve2-aspectMask-00266" href="#VUID-VkImageResolve2-aspectMask-00266"></a> <span class="vuid">VUID-VkImageResolve2-aspectMask-00266</span><br>

The <code>aspectMask</code> member of <code>srcSubresource</code> and
<code>dstSubresource</code> <strong>must</strong> only contain <code>VK_IMAGE_ASPECT_COLOR_BIT</code></p>
</li>
<li>
<p><a id="VUID-VkImageResolve2-maintenance5-08802" href="#VUID-VkImageResolve2-maintenance5-08802"></a> <span class="vuid">VUID-VkImageResolve2-maintenance5-08802</span><br>

If the <a href="features.html#features-maintenance5" class="xref page"><code>maintenance5</code></a> feature is not
enabled, the <code>layerCount</code> member of <code>srcSubresource</code> or
<code>dstSubresource</code> <strong>must</strong> not be <code>VK_REMAINING_ARRAY_LAYERS</code></p>
</li>
<li>
<p><a id="VUID-VkImageResolve2-layerCount-08803" href="#VUID-VkImageResolve2-layerCount-08803"></a> <span class="vuid">VUID-VkImageResolve2-layerCount-08803</span><br>

If neither of the <code>layerCount</code> members of <code>srcSubresource</code> or
<code>dstSubresource</code> are <code>VK_REMAINING_ARRAY_LAYERS</code>, the
<code>layerCount</code> members <strong>must</strong> match</p>
</li>
<li>
<p><a id="VUID-VkImageResolve2-layerCount-08804" href="#VUID-VkImageResolve2-layerCount-08804"></a> <span class="vuid">VUID-VkImageResolve2-layerCount-08804</span><br>

If one of the <code>layerCount</code> members of <code>srcSubresource</code> or
<code>dstSubresource</code> is <code>VK_REMAINING_ARRAY_LAYERS</code>, the other
member <strong>must</strong> be either <code>VK_REMAINING_ARRAY_LAYERS</code> or equal to the
<code>arrayLayers</code> member of the <a href="resources.html#VkImageCreateInfo" class="xref page">VkImageCreateInfo</a> used to create
the image minus <code>baseArrayLayer</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkImageResolve2-sType-sType" href="#VUID-VkImageResolve2-sType-sType"></a> <span class="vuid">VUID-VkImageResolve2-sType-sType</span><br>
 <code>sType</code> <strong>must</strong> be <code>VK_STRUCTURE_TYPE_IMAGE_RESOLVE_2</code></p>
</li>
<li>
<p><a id="VUID-VkImageResolve2-pNext-pNext" href="#VUID-VkImageResolve2-pNext-pNext"></a> <span class="vuid">VUID-VkImageResolve2-pNext-pNext</span><br>
 <code>pNext</code> <strong>must</strong> be <code>NULL</code></p>
</li>
<li>
<p><a id="VUID-VkImageResolve2-srcSubresource-parameter" href="#VUID-VkImageResolve2-srcSubresource-parameter"></a> <span class="vuid">VUID-VkImageResolve2-srcSubresource-parameter</span><br>
 <code>srcSubresource</code> <strong>must</strong> be a valid <a href="#VkImageSubresourceLayers">VkImageSubresourceLayers</a> structure</p>
</li>
<li>
<p><a id="VUID-VkImageResolve2-dstSubresource-parameter" href="#VUID-VkImageResolve2-dstSubresource-parameter"></a> <span class="vuid">VUID-VkImageResolve2-dstSubresource-parameter</span><br>
 <code>dstSubresource</code> <strong>must</strong> be a valid <a href="#VkImageSubresourceLayers">VkImageSubresourceLayers</a> structure</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="copies-buffer-markers"><a class="anchor" href="#copies-buffer-markers"></a>Buffer Markers</h2>
<div class="sectionbody">
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>To write a 32-bit marker value into a buffer as a pipelined operation, call:</p>
</div>
<div id="vkCmdWriteBufferMarker2AMD" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_KHR_synchronization2 with VK_AMD_buffer_marker
void vkCmdWriteBufferMarker2AMD(
    VkCommandBuffer                             commandBuffer,
    VkPipelineStageFlags2                       stage,
    VkBuffer                                    dstBuffer,
    VkDeviceSize                                dstOffset,
    uint32_t                                    marker);</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>commandBuffer</code> is the command buffer into which the command will be
recorded.</p>
</li>
<li>
<p><code>stage</code> specifies the pipeline stage whose completion triggers the
marker write.</p>
</li>
<li>
<p><code>dstBuffer</code> is the buffer where the marker will be written.</p>
</li>
<li>
<p><code>dstOffset</code> is the byte offset into the buffer where the marker will
be written.</p>
</li>
<li>
<p><code>marker</code> is the 32-bit value of the marker.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The command will write the 32-bit marker value into the buffer only after
all preceding commands have finished executing up to at least the specified
pipeline stage.
This includes the completion of other preceding
<code>vkCmdWriteBufferMarker2AMD</code> commands so long as their specified
pipeline stages occur either at the same time or earlier than this command&#8217;s
specified <code>stage</code>.</p>
</div>
<div class="paragraph">
<p>While consecutive buffer marker writes with the same <code>stage</code> parameter
implicitly complete in submission order, memory and execution dependencies
between buffer marker writes and other operations <strong>must</strong> still be explicitly
ordered using synchronization commands.
The access scope for buffer marker writes falls under the
<code>VK_ACCESS_TRANSFER_WRITE_BIT</code>, and the pipeline stages for identifying
the synchronization scope <strong>must</strong> include both <code>stage</code> and
<code>VK_PIPELINE_STAGE_TRANSFER_BIT</code>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="title">Note</div>
<div class="paragraph">
<p>Similar to <code>vkCmdWriteTimestamp2</code>, if an implementation is unable to
write a marker at any specific pipeline stage, it <strong>may</strong> instead do so at any
logically later stage.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="title">Note</div>
<div class="paragraph">
<p>Implementations <strong>may</strong> only support a limited number of pipelined marker write
operations in flight at a given time.
Thus an excessive number of marker write operations <strong>may</strong> degrade command
execution performance.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCmdWriteBufferMarker2AMD-stage-03929" href="#VUID-vkCmdWriteBufferMarker2AMD-stage-03929"></a> <span class="vuid">VUID-vkCmdWriteBufferMarker2AMD-stage-03929</span><br>

If the <a href="features.html#features-geometryShader" class="xref page"><code>geometryShader</code></a> feature is not
enabled, <code>stage</code> <strong>must</strong> not contain
<code>VK_PIPELINE_STAGE_2_GEOMETRY_SHADER_BIT</code></p>
</li>
<li>
<p><a id="VUID-vkCmdWriteBufferMarker2AMD-stage-03930" href="#VUID-vkCmdWriteBufferMarker2AMD-stage-03930"></a> <span class="vuid">VUID-vkCmdWriteBufferMarker2AMD-stage-03930</span><br>

If the <a href="features.html#features-tessellationShader" class="xref page"><code>tessellationShader</code></a> feature
is not enabled, <code>stage</code> <strong>must</strong> not contain
<code>VK_PIPELINE_STAGE_2_TESSELLATION_CONTROL_SHADER_BIT</code> or
<code>VK_PIPELINE_STAGE_2_TESSELLATION_EVALUATION_SHADER_BIT</code></p>
</li>
<li>
<p><a id="VUID-vkCmdWriteBufferMarker2AMD-stage-03931" href="#VUID-vkCmdWriteBufferMarker2AMD-stage-03931"></a> <span class="vuid">VUID-vkCmdWriteBufferMarker2AMD-stage-03931</span><br>

If the <a href="features.html#features-conditionalRendering" class="xref page"><code>conditionalRendering</code></a>
feature is not enabled, <code>stage</code> <strong>must</strong> not contain
<code>VK_PIPELINE_STAGE_2_CONDITIONAL_RENDERING_BIT_EXT</code></p>
</li>
<li>
<p><a id="VUID-vkCmdWriteBufferMarker2AMD-stage-03932" href="#VUID-vkCmdWriteBufferMarker2AMD-stage-03932"></a> <span class="vuid">VUID-vkCmdWriteBufferMarker2AMD-stage-03932</span><br>

If the <a href="features.html#features-fragmentDensityMap" class="xref page"><code>fragmentDensityMap</code></a> feature
is not enabled, <code>stage</code> <strong>must</strong> not contain
<code>VK_PIPELINE_STAGE_2_FRAGMENT_DENSITY_PROCESS_BIT_EXT</code></p>
</li>
<li>
<p><a id="VUID-vkCmdWriteBufferMarker2AMD-stage-03933" href="#VUID-vkCmdWriteBufferMarker2AMD-stage-03933"></a> <span class="vuid">VUID-vkCmdWriteBufferMarker2AMD-stage-03933</span><br>

If the <a href="features.html#features-transformFeedback" class="xref page"><code>transformFeedback</code></a> feature
is not enabled, <code>stage</code> <strong>must</strong> not contain
<code>VK_PIPELINE_STAGE_2_TRANSFORM_FEEDBACK_BIT_EXT</code></p>
</li>
<li>
<p><a id="VUID-vkCmdWriteBufferMarker2AMD-stage-03934" href="#VUID-vkCmdWriteBufferMarker2AMD-stage-03934"></a> <span class="vuid">VUID-vkCmdWriteBufferMarker2AMD-stage-03934</span><br>

If the <a href="features.html#features-meshShader" class="xref page"><code>meshShader</code></a> feature is not enabled,
<code>stage</code> <strong>must</strong> not contain
<code>VK_PIPELINE_STAGE_2_MESH_SHADER_BIT_EXT</code></p>
</li>
<li>
<p><a id="VUID-vkCmdWriteBufferMarker2AMD-stage-03935" href="#VUID-vkCmdWriteBufferMarker2AMD-stage-03935"></a> <span class="vuid">VUID-vkCmdWriteBufferMarker2AMD-stage-03935</span><br>

If the <a href="features.html#features-taskShader" class="xref page"><code>taskShader</code></a> feature is not enabled,
<code>stage</code> <strong>must</strong> not contain
<code>VK_PIPELINE_STAGE_2_TASK_SHADER_BIT_EXT</code></p>
</li>
<li>
<p><a id="VUID-vkCmdWriteBufferMarker2AMD-stage-07316" href="#VUID-vkCmdWriteBufferMarker2AMD-stage-07316"></a> <span class="vuid">VUID-vkCmdWriteBufferMarker2AMD-stage-07316</span><br>

If neither the <a href="features.html#features-shadingRateImage" class="xref page"><code>shadingRateImage</code></a> or
<a href="features.html#features-attachmentFragmentShadingRate" class="xref page">    <code>attachmentFragmentShadingRate</code></a> are enabled, <code>stage</code>
<strong>must</strong> not contain
<code>VK_PIPELINE_STAGE_2_FRAGMENT_SHADING_RATE_ATTACHMENT_BIT_KHR</code></p>
</li>
<li>
<p><a id="VUID-vkCmdWriteBufferMarker2AMD-stage-04957" href="#VUID-vkCmdWriteBufferMarker2AMD-stage-04957"></a> <span class="vuid">VUID-vkCmdWriteBufferMarker2AMD-stage-04957</span><br>

If the <a href="features.html#features-subpassShading" class="xref page"><code>subpassShading</code></a> feature is not
enabled, <code>stage</code> <strong>must</strong> not contain
<code>VK_PIPELINE_STAGE_2_SUBPASS_SHADER_BIT_HUAWEI</code></p>
</li>
<li>
<p><a id="VUID-vkCmdWriteBufferMarker2AMD-stage-04995" href="#VUID-vkCmdWriteBufferMarker2AMD-stage-04995"></a> <span class="vuid">VUID-vkCmdWriteBufferMarker2AMD-stage-04995</span><br>

If the <a href="features.html#features-invocationMask" class="xref page"><code>invocationMask</code></a> feature is not
enabled, <code>stage</code> <strong>must</strong> not contain
<code>VK_PIPELINE_STAGE_2_INVOCATION_MASK_BIT_HUAWEI</code></p>
</li>
<li>
<p><a id="VUID-vkCmdWriteBufferMarker2AMD-stage-07946" href="#VUID-vkCmdWriteBufferMarker2AMD-stage-07946"></a> <span class="vuid">VUID-vkCmdWriteBufferMarker2AMD-stage-07946</span><br>

If neither the <a href="../appendices/extensions.html#VK_NV_ray_tracing" class="xref page">VK_NV_ray_tracing</a> extension or
<a href="features.html#features-rayTracingPipeline" class="xref page"><code>rayTracingPipeline</code> feature</a> are
enabled, <code>stage</code> <strong>must</strong> not contain
<code>VK_PIPELINE_STAGE_2_RAY_TRACING_SHADER_BIT_KHR</code></p>
</li>
<li>
<p><a id="VUID-vkCmdWriteBufferMarker2AMD-synchronization2-03893" href="#VUID-vkCmdWriteBufferMarker2AMD-synchronization2-03893"></a> <span class="vuid">VUID-vkCmdWriteBufferMarker2AMD-synchronization2-03893</span><br>

The <a href="features.html#features-synchronization2" class="xref page"><code>synchronization2</code></a> feature <strong>must</strong>
be enabled</p>
</li>
<li>
<p><a id="VUID-vkCmdWriteBufferMarker2AMD-stage-03894" href="#VUID-vkCmdWriteBufferMarker2AMD-stage-03894"></a> <span class="vuid">VUID-vkCmdWriteBufferMarker2AMD-stage-03894</span><br>

<code>stage</code> <strong>must</strong> include only a single pipeline stage</p>
</li>
<li>
<p><a id="VUID-vkCmdWriteBufferMarker2AMD-stage-03895" href="#VUID-vkCmdWriteBufferMarker2AMD-stage-03895"></a> <span class="vuid">VUID-vkCmdWriteBufferMarker2AMD-stage-03895</span><br>

<code>stage</code> <strong>must</strong> include only stages that are valid for the queue
family that was used to create the command pool that <code>commandBuffer</code>
was allocated from</p>
</li>
<li>
<p><a id="VUID-vkCmdWriteBufferMarker2AMD-dstOffset-03896" href="#VUID-vkCmdWriteBufferMarker2AMD-dstOffset-03896"></a> <span class="vuid">VUID-vkCmdWriteBufferMarker2AMD-dstOffset-03896</span><br>

<code>dstOffset</code> <strong>must</strong> be less than or equal to the size of
<code>dstBuffer</code> minus <code>4</code></p>
</li>
<li>
<p><a id="VUID-vkCmdWriteBufferMarker2AMD-dstBuffer-03897" href="#VUID-vkCmdWriteBufferMarker2AMD-dstBuffer-03897"></a> <span class="vuid">VUID-vkCmdWriteBufferMarker2AMD-dstBuffer-03897</span><br>

<code>dstBuffer</code> <strong>must</strong> have been created with the
<code>VK_BUFFER_USAGE_TRANSFER_DST_BIT</code> usage flag</p>
</li>
<li>
<p><a id="VUID-vkCmdWriteBufferMarker2AMD-dstBuffer-03898" href="#VUID-vkCmdWriteBufferMarker2AMD-dstBuffer-03898"></a> <span class="vuid">VUID-vkCmdWriteBufferMarker2AMD-dstBuffer-03898</span><br>

If <code>dstBuffer</code> is non-sparse then it <strong>must</strong> be bound completely and
contiguously to a single <code>VkDeviceMemory</code> object</p>
</li>
<li>
<p><a id="VUID-vkCmdWriteBufferMarker2AMD-dstOffset-03899" href="#VUID-vkCmdWriteBufferMarker2AMD-dstOffset-03899"></a> <span class="vuid">VUID-vkCmdWriteBufferMarker2AMD-dstOffset-03899</span><br>

<code>dstOffset</code> <strong>must</strong> be a multiple of <code>4</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCmdWriteBufferMarker2AMD-commandBuffer-parameter" href="#VUID-vkCmdWriteBufferMarker2AMD-commandBuffer-parameter"></a> <span class="vuid">VUID-vkCmdWriteBufferMarker2AMD-commandBuffer-parameter</span><br>
 <code>commandBuffer</code> <strong>must</strong> be a valid <a href="cmdbuffers.html#VkCommandBuffer" class="xref page">VkCommandBuffer</a> handle</p>
</li>
<li>
<p><a id="VUID-vkCmdWriteBufferMarker2AMD-stage-parameter" href="#VUID-vkCmdWriteBufferMarker2AMD-stage-parameter"></a> <span class="vuid">VUID-vkCmdWriteBufferMarker2AMD-stage-parameter</span><br>
 <code>stage</code> <strong>must</strong> be a valid combination of <a href="synchronization.html#VkPipelineStageFlagBits2" class="xref page">VkPipelineStageFlagBits2</a> values</p>
</li>
<li>
<p><a id="VUID-vkCmdWriteBufferMarker2AMD-dstBuffer-parameter" href="#VUID-vkCmdWriteBufferMarker2AMD-dstBuffer-parameter"></a> <span class="vuid">VUID-vkCmdWriteBufferMarker2AMD-dstBuffer-parameter</span><br>
 <code>dstBuffer</code> <strong>must</strong> be a valid <a href="resources.html#VkBuffer" class="xref page">VkBuffer</a> handle</p>
</li>
<li>
<p><a id="VUID-vkCmdWriteBufferMarker2AMD-commandBuffer-recording" href="#VUID-vkCmdWriteBufferMarker2AMD-commandBuffer-recording"></a> <span class="vuid">VUID-vkCmdWriteBufferMarker2AMD-commandBuffer-recording</span><br>
 <code>commandBuffer</code> <strong>must</strong> be in the <a href="cmdbuffers.html#commandbuffers-lifecycle" class="xref page">recording state</a></p>
</li>
<li>
<p><a id="VUID-vkCmdWriteBufferMarker2AMD-commandBuffer-cmdpool" href="#VUID-vkCmdWriteBufferMarker2AMD-commandBuffer-cmdpool"></a> <span class="vuid">VUID-vkCmdWriteBufferMarker2AMD-commandBuffer-cmdpool</span><br>
 The <code>VkCommandPool</code> that <code>commandBuffer</code> was allocated from <strong>must</strong> support transfer, graphics, or compute operations</p>
</li>
<li>
<p><a id="VUID-vkCmdWriteBufferMarker2AMD-videocoding" href="#VUID-vkCmdWriteBufferMarker2AMD-videocoding"></a> <span class="vuid">VUID-vkCmdWriteBufferMarker2AMD-videocoding</span><br>
 This command <strong>must</strong> only be called outside of a video coding scope</p>
</li>
<li>
<p><a id="VUID-vkCmdWriteBufferMarker2AMD-commonparent" href="#VUID-vkCmdWriteBufferMarker2AMD-commonparent"></a> <span class="vuid">VUID-vkCmdWriteBufferMarker2AMD-commonparent</span><br>
 Both of <code>commandBuffer</code>, and <code>dstBuffer</code> <strong>must</strong> have been created, allocated, or retrieved from the same <a href="devsandqueues.html#VkDevice" class="xref page">VkDevice</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Host Synchronization</div>
<div class="ulist">
<ul>
<li>
<p>Host access to <code>commandBuffer</code> <strong>must</strong> be externally synchronized</p>
</li>
<li>
<p>Host access to the <code>VkCommandPool</code> that <code>commandBuffer</code> was allocated from <strong>must</strong> be externally synchronized</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Command Properties</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><a href="cmdbuffers.html#VkCommandBufferLevel" class="xref page">Command Buffer Levels</a></th>
<th class="tableblock halign-left valign-top"><a href="renderpass.html#vkCmdBeginRenderPass" class="xref page">Render Pass Scope</a></th>
<th class="tableblock halign-left valign-top"><a href="video_extensions.html#vkCmdBeginVideoCodingKHR" class="xref page">Video Coding Scope</a></th>
<th class="tableblock halign-left valign-top"><a href="devsandqueues.html#VkQueueFlagBits" class="xref page">Supported Queue Types</a></th>
<th class="tableblock halign-left valign-top"><a href="fundamentals.html#fundamentals-queueoperation-command-types" class="xref page">Command Type</a></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Primary<br>
Secondary</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Both</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Outside</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Transfer<br>
Graphics<br>
Compute</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Action</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>To write a 32-bit marker value into a buffer as a pipelined operation, call:</p>
</div>
<div id="vkCmdWriteBufferMarkerAMD" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_AMD_buffer_marker
void vkCmdWriteBufferMarkerAMD(
    VkCommandBuffer                             commandBuffer,
    VkPipelineStageFlagBits                     pipelineStage,
    VkBuffer                                    dstBuffer,
    VkDeviceSize                                dstOffset,
    uint32_t                                    marker);</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>commandBuffer</code> is the command buffer into which the command will be
recorded.</p>
</li>
<li>
<p><code>pipelineStage</code> is a <a href="synchronization.html#VkPipelineStageFlagBits" class="xref page">VkPipelineStageFlagBits</a> value specifying
the pipeline stage whose completion triggers the marker write.</p>
</li>
<li>
<p><code>dstBuffer</code> is the buffer where the marker will be written to.</p>
</li>
<li>
<p><code>dstOffset</code> is the byte offset into the buffer where the marker will
be written to.</p>
</li>
<li>
<p><code>marker</code> is the 32-bit value of the marker.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The command will write the 32-bit marker value into the buffer only after
all preceding commands have finished executing up to at least the specified
pipeline stage.
This includes the completion of other preceding
<code>vkCmdWriteBufferMarkerAMD</code> commands so long as their specified pipeline
stages occur either at the same time or earlier than this command&#8217;s
specified <code>pipelineStage</code>.</p>
</div>
<div class="paragraph">
<p>While consecutive buffer marker writes with the same <code>pipelineStage</code>
parameter are implicitly complete in submission order, memory and execution
dependencies between buffer marker writes and other operations must still be
explicitly ordered using synchronization commands.
The access scope for buffer marker writes falls under the
<code>VK_ACCESS_TRANSFER_WRITE_BIT</code>, and the pipeline stages for identifying
the synchronization scope <strong>must</strong> include both <code>pipelineStage</code> and
<code>VK_PIPELINE_STAGE_TRANSFER_BIT</code>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="title">Note</div>
<div class="paragraph">
<p>Similar to <code>vkCmdWriteTimestamp</code>, if an implementation is unable to
write a marker at any specific pipeline stage, it <strong>may</strong> instead do so at any
logically later stage.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="title">Note</div>
<div class="paragraph">
<p>Implementations <strong>may</strong> only support a limited number of pipelined marker write
operations in flight at a given time, thus excessive number of marker write
operations <strong>may</strong> degrade command execution performance.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCmdWriteBufferMarkerAMD-pipelineStage-04074" href="#VUID-vkCmdWriteBufferMarkerAMD-pipelineStage-04074"></a> <span class="vuid">VUID-vkCmdWriteBufferMarkerAMD-pipelineStage-04074</span><br>

<code>pipelineStage</code> <strong>must</strong> be a
<a href="synchronization.html#synchronization-pipeline-stages-supported" class="xref page">valid stage</a> for the queue
family that was used to create the command pool that <code>commandBuffer</code>
was allocated from</p>
</li>
<li>
<p><a id="VUID-vkCmdWriteBufferMarkerAMD-pipelineStage-04075" href="#VUID-vkCmdWriteBufferMarkerAMD-pipelineStage-04075"></a> <span class="vuid">VUID-vkCmdWriteBufferMarkerAMD-pipelineStage-04075</span><br>

If the <a href="features.html#features-geometryShader" class="xref page"><code>geometryShader</code></a> feature is not
enabled, <code>pipelineStage</code> <strong>must</strong> not be
<code>VK_PIPELINE_STAGE_GEOMETRY_SHADER_BIT</code></p>
</li>
<li>
<p><a id="VUID-vkCmdWriteBufferMarkerAMD-pipelineStage-04076" href="#VUID-vkCmdWriteBufferMarkerAMD-pipelineStage-04076"></a> <span class="vuid">VUID-vkCmdWriteBufferMarkerAMD-pipelineStage-04076</span><br>

If the <a href="features.html#features-tessellationShader" class="xref page"><code>tessellationShader</code></a> feature
is not enabled, <code>pipelineStage</code> <strong>must</strong> not be
<code>VK_PIPELINE_STAGE_TESSELLATION_CONTROL_SHADER_BIT</code> or
<code>VK_PIPELINE_STAGE_TESSELLATION_EVALUATION_SHADER_BIT</code></p>
</li>
<li>
<p><a id="VUID-vkCmdWriteBufferMarkerAMD-pipelineStage-04077" href="#VUID-vkCmdWriteBufferMarkerAMD-pipelineStage-04077"></a> <span class="vuid">VUID-vkCmdWriteBufferMarkerAMD-pipelineStage-04077</span><br>

If the <a href="features.html#features-conditionalRendering" class="xref page"><code>conditionalRendering</code></a>
feature is not enabled, <code>pipelineStage</code> <strong>must</strong> not be
<code>VK_PIPELINE_STAGE_CONDITIONAL_RENDERING_BIT_EXT</code></p>
</li>
<li>
<p><a id="VUID-vkCmdWriteBufferMarkerAMD-pipelineStage-04078" href="#VUID-vkCmdWriteBufferMarkerAMD-pipelineStage-04078"></a> <span class="vuid">VUID-vkCmdWriteBufferMarkerAMD-pipelineStage-04078</span><br>

If the <a href="features.html#features-fragmentDensityMap" class="xref page"><code>fragmentDensityMap</code></a> feature
is not enabled, <code>pipelineStage</code> <strong>must</strong> not be
<code>VK_PIPELINE_STAGE_FRAGMENT_DENSITY_PROCESS_BIT_EXT</code></p>
</li>
<li>
<p><a id="VUID-vkCmdWriteBufferMarkerAMD-pipelineStage-04079" href="#VUID-vkCmdWriteBufferMarkerAMD-pipelineStage-04079"></a> <span class="vuid">VUID-vkCmdWriteBufferMarkerAMD-pipelineStage-04079</span><br>

If the <a href="features.html#features-transformFeedback" class="xref page"><code>transformFeedback</code></a> feature
is not enabled, <code>pipelineStage</code> <strong>must</strong> not be
<code>VK_PIPELINE_STAGE_TRANSFORM_FEEDBACK_BIT_EXT</code></p>
</li>
<li>
<p><a id="VUID-vkCmdWriteBufferMarkerAMD-pipelineStage-04080" href="#VUID-vkCmdWriteBufferMarkerAMD-pipelineStage-04080"></a> <span class="vuid">VUID-vkCmdWriteBufferMarkerAMD-pipelineStage-04080</span><br>

If the <a href="features.html#features-meshShader" class="xref page"><code>meshShader</code></a> feature is not enabled,
<code>pipelineStage</code> <strong>must</strong> not be
<code>VK_PIPELINE_STAGE_MESH_SHADER_BIT_EXT</code></p>
</li>
<li>
<p><a id="VUID-vkCmdWriteBufferMarkerAMD-pipelineStage-07077" href="#VUID-vkCmdWriteBufferMarkerAMD-pipelineStage-07077"></a> <span class="vuid">VUID-vkCmdWriteBufferMarkerAMD-pipelineStage-07077</span><br>

If the <a href="features.html#features-taskShader" class="xref page"><code>taskShader</code></a> feature is not enabled,
<code>pipelineStage</code> <strong>must</strong> not be
<code>VK_PIPELINE_STAGE_TASK_SHADER_BIT_EXT</code></p>
</li>
<li>
<p><a id="VUID-vkCmdWriteBufferMarkerAMD-shadingRateImage-07314" href="#VUID-vkCmdWriteBufferMarkerAMD-shadingRateImage-07314"></a> <span class="vuid">VUID-vkCmdWriteBufferMarkerAMD-shadingRateImage-07314</span><br>

If neither the <a href="features.html#features-shadingRateImage" class="xref page"><code>shadingRateImage</code></a> or
<a href="features.html#features-attachmentFragmentShadingRate" class="xref page">    <code>attachmentFragmentShadingRate</code></a> are enabled, <code>pipelineStage</code>
<strong>must</strong> not be
<code>VK_PIPELINE_STAGE_FRAGMENT_SHADING_RATE_ATTACHMENT_BIT_KHR</code></p>
</li>
<li>
<p><a id="VUID-vkCmdWriteBufferMarkerAMD-synchronization2-06489" href="#VUID-vkCmdWriteBufferMarkerAMD-synchronization2-06489"></a> <span class="vuid">VUID-vkCmdWriteBufferMarkerAMD-synchronization2-06489</span><br>

If the <a href="features.html#features-synchronization2" class="xref page"><code>synchronization2</code></a> feature is
not enabled, <code>pipelineStage</code> <strong>must</strong> not be
<code>VK_PIPELINE_STAGE_NONE</code></p>
</li>
<li>
<p><a id="VUID-vkCmdWriteBufferMarkerAMD-rayTracingPipeline-07943" href="#VUID-vkCmdWriteBufferMarkerAMD-rayTracingPipeline-07943"></a> <span class="vuid">VUID-vkCmdWriteBufferMarkerAMD-rayTracingPipeline-07943</span><br>

If neither the <a href="../appendices/extensions.html#VK_NV_ray_tracing" class="xref page">VK_NV_ray_tracing</a> extension or
<a href="features.html#features-rayTracingPipeline" class="xref page"><code>rayTracingPipeline</code> feature</a> are
enabled, <code>pipelineStage</code> <strong>must</strong> not be
<code>VK_PIPELINE_STAGE_RAY_TRACING_SHADER_BIT_KHR</code></p>
</li>
<li>
<p><a id="VUID-vkCmdWriteBufferMarkerAMD-dstOffset-01798" href="#VUID-vkCmdWriteBufferMarkerAMD-dstOffset-01798"></a> <span class="vuid">VUID-vkCmdWriteBufferMarkerAMD-dstOffset-01798</span><br>

<code>dstOffset</code> <strong>must</strong> be less than or equal to the size of
<code>dstBuffer</code> minus <code>4</code></p>
</li>
<li>
<p><a id="VUID-vkCmdWriteBufferMarkerAMD-dstBuffer-01799" href="#VUID-vkCmdWriteBufferMarkerAMD-dstBuffer-01799"></a> <span class="vuid">VUID-vkCmdWriteBufferMarkerAMD-dstBuffer-01799</span><br>

<code>dstBuffer</code> <strong>must</strong> have been created with
<code>VK_BUFFER_USAGE_TRANSFER_DST_BIT</code> usage flag</p>
</li>
<li>
<p><a id="VUID-vkCmdWriteBufferMarkerAMD-dstBuffer-01800" href="#VUID-vkCmdWriteBufferMarkerAMD-dstBuffer-01800"></a> <span class="vuid">VUID-vkCmdWriteBufferMarkerAMD-dstBuffer-01800</span><br>

If <code>dstBuffer</code> is non-sparse then it <strong>must</strong> be bound completely and
contiguously to a single <code>VkDeviceMemory</code> object</p>
</li>
<li>
<p><a id="VUID-vkCmdWriteBufferMarkerAMD-dstOffset-01801" href="#VUID-vkCmdWriteBufferMarkerAMD-dstOffset-01801"></a> <span class="vuid">VUID-vkCmdWriteBufferMarkerAMD-dstOffset-01801</span><br>

<code>dstOffset</code> <strong>must</strong> be a multiple of <code>4</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCmdWriteBufferMarkerAMD-commandBuffer-parameter" href="#VUID-vkCmdWriteBufferMarkerAMD-commandBuffer-parameter"></a> <span class="vuid">VUID-vkCmdWriteBufferMarkerAMD-commandBuffer-parameter</span><br>
 <code>commandBuffer</code> <strong>must</strong> be a valid <a href="cmdbuffers.html#VkCommandBuffer" class="xref page">VkCommandBuffer</a> handle</p>
</li>
<li>
<p><a id="VUID-vkCmdWriteBufferMarkerAMD-pipelineStage-parameter" href="#VUID-vkCmdWriteBufferMarkerAMD-pipelineStage-parameter"></a> <span class="vuid">VUID-vkCmdWriteBufferMarkerAMD-pipelineStage-parameter</span><br>
 If <code>pipelineStage</code> is not <code>0</code>, <code>pipelineStage</code> <strong>must</strong> be a valid <a href="synchronization.html#VkPipelineStageFlagBits" class="xref page">VkPipelineStageFlagBits</a> value</p>
</li>
<li>
<p><a id="VUID-vkCmdWriteBufferMarkerAMD-dstBuffer-parameter" href="#VUID-vkCmdWriteBufferMarkerAMD-dstBuffer-parameter"></a> <span class="vuid">VUID-vkCmdWriteBufferMarkerAMD-dstBuffer-parameter</span><br>
 <code>dstBuffer</code> <strong>must</strong> be a valid <a href="resources.html#VkBuffer" class="xref page">VkBuffer</a> handle</p>
</li>
<li>
<p><a id="VUID-vkCmdWriteBufferMarkerAMD-commandBuffer-recording" href="#VUID-vkCmdWriteBufferMarkerAMD-commandBuffer-recording"></a> <span class="vuid">VUID-vkCmdWriteBufferMarkerAMD-commandBuffer-recording</span><br>
 <code>commandBuffer</code> <strong>must</strong> be in the <a href="cmdbuffers.html#commandbuffers-lifecycle" class="xref page">recording state</a></p>
</li>
<li>
<p><a id="VUID-vkCmdWriteBufferMarkerAMD-commandBuffer-cmdpool" href="#VUID-vkCmdWriteBufferMarkerAMD-commandBuffer-cmdpool"></a> <span class="vuid">VUID-vkCmdWriteBufferMarkerAMD-commandBuffer-cmdpool</span><br>
 The <code>VkCommandPool</code> that <code>commandBuffer</code> was allocated from <strong>must</strong> support transfer, graphics, or compute operations</p>
</li>
<li>
<p><a id="VUID-vkCmdWriteBufferMarkerAMD-videocoding" href="#VUID-vkCmdWriteBufferMarkerAMD-videocoding"></a> <span class="vuid">VUID-vkCmdWriteBufferMarkerAMD-videocoding</span><br>
 This command <strong>must</strong> only be called outside of a video coding scope</p>
</li>
<li>
<p><a id="VUID-vkCmdWriteBufferMarkerAMD-commonparent" href="#VUID-vkCmdWriteBufferMarkerAMD-commonparent"></a> <span class="vuid">VUID-vkCmdWriteBufferMarkerAMD-commonparent</span><br>
 Both of <code>commandBuffer</code>, and <code>dstBuffer</code> <strong>must</strong> have been created, allocated, or retrieved from the same <a href="devsandqueues.html#VkDevice" class="xref page">VkDevice</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Host Synchronization</div>
<div class="ulist">
<ul>
<li>
<p>Host access to <code>commandBuffer</code> <strong>must</strong> be externally synchronized</p>
</li>
<li>
<p>Host access to the <code>VkCommandPool</code> that <code>commandBuffer</code> was allocated from <strong>must</strong> be externally synchronized</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Command Properties</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><a href="cmdbuffers.html#VkCommandBufferLevel" class="xref page">Command Buffer Levels</a></th>
<th class="tableblock halign-left valign-top"><a href="renderpass.html#vkCmdBeginRenderPass" class="xref page">Render Pass Scope</a></th>
<th class="tableblock halign-left valign-top"><a href="video_extensions.html#vkCmdBeginVideoCodingKHR" class="xref page">Video Coding Scope</a></th>
<th class="tableblock halign-left valign-top"><a href="devsandqueues.html#VkQueueFlagBits" class="xref page">Supported Queue Types</a></th>
<th class="tableblock halign-left valign-top"><a href="fundamentals.html#fundamentals-queueoperation-command-types" class="xref page">Command Type</a></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Primary<br>
Secondary</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Both</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Outside</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Transfer<br>
Graphics<br>
Compute</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Action</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
</div>
</div>
</article>
  </div>
</main>
</div>
<footer class="footer">
    <!--
  <p>This page was built using the Antora default UI.</p>
  <p>The source code for this UI is licensed under the terms of the MPL-2.0 license.</p>
    -->
</footer>
<script id="site-script" src="../../../_/js/site.js" data-ui-root-path="../../../_"></script>
<script async src="../../../_/js/vendor/highlight.js"></script>
<script src="../../../_/js/vendor/lunr.js"></script>
<script src="../../../_/js/search-ui.js" id="search-ui-script" data-site-root-path="../../.." data-snippet-length="100" data-stylesheet="../../../_/css/search.css"></script>
<script async src="../../../search-index.js"></script>
  </body>
</html>
