<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Dispatching Commands :: Vulkan Documentation Project</title>
    <meta name="generator" content="Antora 3.1.4">
    <link rel="stylesheet" href="../../../_/css/site.css">
    <link rel="apple-touch-icon" sizes="180x180" href="../../../_/img/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="../../../_/img/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="../../../_/img/favicon-16x16.png">
    <link rel="manifest" href="../../../_/static/site.webmanifest">
    <link rel="mask-icon" href="../../../_/img/safari-pinned-tab.svg" color="#a41e22">
    <meta name="msapplication-TileColor" content="#ffc40d">
    <meta name="theme-color" content="#ffffff">
    <script>var uiRootPath = '../../../_'</script>
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="../../.."><img class="navbar-item" alt="Vulkan White Label" src="../../../_/Vulkan_Docs.svg" /></a>
      <div class="navbar-item search hide-for-print">
        <div id="search-field" class="field">
          <label for="search-input"></label><input id="search-input" type="text" placeholder="Search the docs">
        </div>
      </div>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <!-- <a class="navbar-item" href="#">Home</a> -->
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Specs</a>
          <div class="navbar-dropdown is-right">
            <a class="navbar-item" href="../../../spec/latest/chapters/introduction.html">Vulkan 1.3</a>
            <a class="navbar-item" href="https://registry.khronos.org/OpenGL/specs/gl/GLSLangSpec.4.60.html">GLSL</a>
            <a class="navbar-item" href="../../../guide/latest/hlsl.html">HLSL</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Education</a>
          <div class="navbar-dropdown is-right">
            <a class="navbar-item" href="../../../guide/latest/index.html">Vulkan Guide</a>
            <a class="navbar-item" href="../../../tutorial/latest/index.html">Vulkan Tutorial</a>
            <a class="navbar-item" href="../../../samples/latest/README.html">Vulkan Samples</a>
            <a class="navbar-item" href="https://www.youtube.com/c/vulkan">YouTube</a>
            <a class="navbar-item" href="https://vulkan.org">More Info at Vulkan.org</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Community</a>
          <div class="navbar-dropdown is-right">
            <a class="navbar-item" href="https://discord.gg/vulkan">Vulkan Discord</a>
            <a class="navbar-item" href="https://reddit.com/r/vulkan">Reddit</a>
            <a class="navbar-item" href="https://stackoverflow.com/questions/tagged/vulkan">Stack Overflow</a>
            <a class="navbar-item" href="https://fosstodon.org/@vulkan">Mastodon</a>
          </div>
        </div>
      </div>
    </div>
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="spec" data-version="latest">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="../index.html">Vulkan Specification and Proposals</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="introduction.html">Introduction</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="fundamentals.html">Fundamentals</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="initialization.html">Initialization</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="devsandqueues.html">Devices and Queues</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="cmdbuffers.html">Command Buffers</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="synchronization.html">Synchronization and Cache Control</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="renderpass.html">Render Pass</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="shaders.html">Shaders</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="pipelines.html">Pipelines</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="memory.html">Memory Allocation</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="resources.html">Resource Creation</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="samplers.html">Samplers</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="descriptorsets.html">Resource Descriptors</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="interfaces.html">Shader Interfaces</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="textures.html">Image Operations</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="fragmentdensitymapops.html">Fragment Density Map Operations</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="queries.html">Queries</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="clears.html">Clear Commands</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="copies.html">Copy Commands</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="drawing.html">Drawing Commands</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="fxvertex.html">Fixed-Function Vertex Processing</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="tessellation.html">Tessellation</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="geometry.html">Geometry Shading</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="VK_NV_mesh_shader/mesh.html">Mesh Shading</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="VK_HUAWEI_cluster_culling_shader/clusterculling.html">Cluster Culling Shading</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="vertexpostproc.html">Fixed-Function Vertex Post-Processing</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="primsrast.html">Rasterization</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="fragops.html">Fragment Operations</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="framebuffer.html">The Framebuffer</a>
  </li>
  <li class="nav-item is-current-page" data-depth="1">
    <a class="nav-link" href="dispatch.html">Dispatching Commands</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="VK_NV_device_generated_commands/generatedcommands.html">Device-Generated Commands</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="sparsemem.html">Sparse Resources</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="VK_KHR_surface/wsi.html">Window System Integration (WSI)</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="VK_KHR_deferred_host_operations/deferred_host_operations.html">Deferred Host Operations</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="VK_EXT_private_data.html">Private Data</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="accelstructures.html">Acceleration Structures</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="VK_EXT_opacity_micromap/micromaps.html">Micromap</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="raytraversal.html">Ray Traversal</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="raytracing.html">Ray Tracing</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="VK_NV_memory_decompression.html">Memory Decompression</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="video_extensions.html">Video Coding</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="VK_NV_optical_flow/optical_flow.html">Optical Flow</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="executiongraphs.html">Execution Graphs</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="VK_NV_low_latency2/low_latency2.html">Low Latency 2</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="extensions.html">Extending Vulkan</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="features.html">Features</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="limits.html">Limits</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="formats.html">Formats</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="capabilities.html">Additional Capabilities</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="debugging.html">Debugging</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../appendices/spirvenv.html">Vulkan Environment for SPIR-V</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../appendices/memorymodel.html">Memory Model</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../appendices/compressedtex.html">Compressed Image Formats</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../appendices/versions.html">Core Revisions (Informative)</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../appendices/extensions.html">Layers &amp; Extensions (Informative)</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../appendices/roadmap.html">Vulkan Roadmap Milestones</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../appendices/boilerplate.html">API Boilerplate</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../appendices/invariance.html">Invariance</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../appendices/glossary.html">Lexicon</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../appendices/credits.html">Credits (Informative)</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../proposals/index.html">Vulkan Proposals</a>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Vulkan Roadmap</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../proposals/proposals/Roadmap.html">Vulkan Roadmap</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Extension Proposals</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../proposals/proposals/VK_AMD_shader_early_and_late_fragment_tests.html">VK_AMD_shader_early_and_late_fragment_tests</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../proposals/proposals/VK_EXT_attachment_feedback_loop_layout.html">VK_EXT_attachment_feedback_loop_layout</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../proposals/proposals/VK_EXT_graphics_pipeline_library.html">VK_EXT_graphics_pipeline_library</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../proposals/proposals/VK_EXT_image_2d_array_of_3d.html">VK_EXT_image_2d_array_of_3d</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../proposals/proposals/VK_EXT_image_compression_control.html">VK_EXT_image_compression_control</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../proposals/proposals/VK_EXT_metal_objects.html">VK_EXT_metal_objects</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../proposals/proposals/VK_EXT_multisampled_render_to_single_sampled.html">VK_EXT_multisampled_render_to_single_sampled</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../proposals/proposals/VK_EXT_non_seamless_cube_map.html">VK_EXT_non_seamless_cube_map</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../proposals/proposals/VK_EXT_primitives_generated_query.html">VK_EXT_primitives_generated_query</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../proposals/proposals/VK_EXT_rasterization_order_attachment_access.html">VK_EXT_rasterization_order_attachment_access</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../proposals/proposals/VK_EXT_shader_module_identifier.html">VK_EXT_shader_module_identifier</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../proposals/proposals/VK_EXT_subpass_merge_feedback.html">VK_EXT_subpass_merge_feedback</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../proposals/proposals/VK_GOOGLE_surfaceless_query.html">VK_GOOGLE_surfaceless_query</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../proposals/proposals/VK_HUAWEI_invocation_mask.html">VK_HUAWEI_invocation_mask</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../proposals/proposals/VK_KHR_dynamic_rendering.html">VK_KHR_dynamic_rendering</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../proposals/proposals/VK_KHR_fragment_shader_barycentric.html">VK_KHR_fragment_shader_barycentric</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../proposals/proposals/VK_KHR_fragment_shading_rate.html">VK_KHR_fragment_shading_rate</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../proposals/proposals/VK_KHR_shader_integer_dot_product.html">VK_KHR_shader_integer_dot_product</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../proposals/proposals/VK_QCOM_image_processing.html">VK_QCOM_image_processing</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../proposals/proposals/VK_QCOM_tile_properties.html">VK_QCOM_tile_properties</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Extension Proposal Template</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../proposals/proposals/template.html">Proposal Template</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">Vulkan Specification and Proposals</span>
    <span class="version">latest</span>
  </div>
  <ul class="components">
    <li class="component">
      <a class="title" href="../../../tutorial/latest/00_Introduction.html">Khronos Vulkan Tutorial</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../tutorial/latest/00_Introduction.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../guide/latest/index.html">Vulkan Guide</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../guide/latest/index.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../samples/latest/README.html">Vulkan Samples</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../samples/latest/README.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component is-current">
      <a class="title" href="../index.html">Vulkan Specification and Proposals</a>
      <ul class="versions">
        <li class="version is-current is-latest">
          <a href="../index.html">latest</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="../index.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="../index.html">Vulkan Specification and Proposals</a></li>
    <li><a href="dispatch.html">Dispatching Commands</a></li>
  </ul>
</nav>
    <!--
  <div class="edit-this-page"><a href="https://github.com/KhronosGroup/Vulkan-Docs/edit/main/antora/modules/ROOT/pages/chapters/dispatch.adoc">Edit this Page</a></div>
      -->
</div>
  <div class="content">
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
<article class="doc">
<h1 class="page">Dispatching Commands</h1>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p><em>Dispatching commands</em> (commands with <code>Dispatch</code> in the name) provoke
work in a compute pipeline.
Dispatching commands are recorded into a command buffer and when executed by
a queue, will produce work which executes according to the bound compute
pipeline.
A compute pipeline <strong>must</strong> be bound to a command buffer before any dispatching
commands are recorded in that command buffer.</p>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>To record a dispatch, call:</p>
</div>
<div id="vkCmdDispatch" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_VERSION_1_0
void vkCmdDispatch(
    VkCommandBuffer                             commandBuffer,
    uint32_t                                    groupCountX,
    uint32_t                                    groupCountY,
    uint32_t                                    groupCountZ);</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>commandBuffer</code> is the command buffer into which the command will be
recorded.</p>
</li>
<li>
<p><code>groupCountX</code> is the number of local workgroups to dispatch in the X
dimension.</p>
</li>
<li>
<p><code>groupCountY</code> is the number of local workgroups to dispatch in the Y
dimension.</p>
</li>
<li>
<p><code>groupCountZ</code> is the number of local workgroups to dispatch in the Z
dimension.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>When the command is executed, a global workgroup consisting of
<span class="eq"><code>groupCountX</code> × <code>groupCountY</code> × <code>groupCountZ</code></span>
local workgroups is assembled.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCmdDispatch-magFilter-04553" href="#VUID-vkCmdDispatch-magFilter-04553"></a> <span class="vuid">VUID-vkCmdDispatch-magFilter-04553</span><br>

If a <a href="samplers.html#VkSampler" class="xref page">VkSampler</a> created with <code>magFilter</code> or <code>minFilter</code>
equal to <code>VK_FILTER_LINEAR</code> and <code>compareEnable</code> equal to
<code>VK_FALSE</code> is used to sample a <a href="resources.html#VkImageView" class="xref page">VkImageView</a> as a result of this
command, then the image view&#8217;s
<a href="resources.html#resources-image-view-format-features" class="xref page">format features</a> <strong>must</strong> contain
<code>VK_FORMAT_FEATURE_SAMPLED_IMAGE_FILTER_LINEAR_BIT</code></p>
</li>
<li>
<p><a id="VUID-vkCmdDispatch-mipmapMode-04770" href="#VUID-vkCmdDispatch-mipmapMode-04770"></a> <span class="vuid">VUID-vkCmdDispatch-mipmapMode-04770</span><br>

If a <a href="samplers.html#VkSampler" class="xref page">VkSampler</a> created with <code>mipmapMode</code> equal to
<code>VK_SAMPLER_MIPMAP_MODE_LINEAR</code> and <code>compareEnable</code> equal to
<code>VK_FALSE</code> is used to sample a <a href="resources.html#VkImageView" class="xref page">VkImageView</a> as a result of this
command, then the image view&#8217;s
<a href="resources.html#resources-image-view-format-features" class="xref page">format features</a> <strong>must</strong> contain
<code>VK_FORMAT_FEATURE_SAMPLED_IMAGE_FILTER_LINEAR_BIT</code></p>
</li>
<li>
<p><a id="VUID-vkCmdDispatch-None-06479" href="#VUID-vkCmdDispatch-None-06479"></a> <span class="vuid">VUID-vkCmdDispatch-None-06479</span><br>

If a <a href="resources.html#VkImageView" class="xref page">VkImageView</a> is sampled with
<a href="textures.html#textures-depth-compare-operation" class="xref page">depth comparison</a>, the image view&#8217;s
<a href="resources.html#resources-image-view-format-features" class="xref page">format features</a> <strong>must</strong> contain
<code>VK_FORMAT_FEATURE_2_SAMPLED_IMAGE_DEPTH_COMPARISON_BIT</code></p>
</li>
<li>
<p><a id="VUID-vkCmdDispatch-None-02691" href="#VUID-vkCmdDispatch-None-02691"></a> <span class="vuid">VUID-vkCmdDispatch-None-02691</span><br>

If a <a href="resources.html#VkImageView" class="xref page">VkImageView</a> is accessed using atomic operations as a result
of this command, then the image view&#8217;s
<a href="resources.html#resources-image-view-format-features" class="xref page">format features</a> <strong>must</strong> contain
<code>VK_FORMAT_FEATURE_STORAGE_IMAGE_ATOMIC_BIT</code></p>
</li>
<li>
<p><a id="VUID-vkCmdDispatch-None-07888" href="#VUID-vkCmdDispatch-None-07888"></a> <span class="vuid">VUID-vkCmdDispatch-None-07888</span><br>

If a <code>VK_DESCRIPTOR_TYPE_STORAGE_TEXEL_BUFFER</code> descriptor is
accessed using atomic operations as a result of this command, then the
storage texel buffer&#8217;s <a href="resources.html#resources-buffer-view-format-features" class="xref page">format    features</a> <strong>must</strong> contain
<code>VK_FORMAT_FEATURE_STORAGE_TEXEL_BUFFER_ATOMIC_BIT</code></p>
</li>
<li>
<p><a id="VUID-vkCmdDispatch-None-02692" href="#VUID-vkCmdDispatch-None-02692"></a> <span class="vuid">VUID-vkCmdDispatch-None-02692</span><br>

If a <a href="resources.html#VkImageView" class="xref page">VkImageView</a> is sampled with <code>VK_FILTER_CUBIC_EXT</code> as a
result of this command, then the image view&#8217;s
<a href="resources.html#resources-image-view-format-features" class="xref page">format features</a> <strong>must</strong> contain
<code>VK_FORMAT_FEATURE_SAMPLED_IMAGE_FILTER_CUBIC_BIT_EXT</code></p>
</li>
<li>
<p><a id="VUID-vkCmdDispatch-None-02693" href="#VUID-vkCmdDispatch-None-02693"></a> <span class="vuid">VUID-vkCmdDispatch-None-02693</span><br>

If
the <a href="../appendices/extensions.html#VK_EXT_filter_cubic" class="xref page">VK_EXT_filter_cubic</a> extension is not enabled and
any <a href="resources.html#VkImageView" class="xref page">VkImageView</a> is sampled with <code>VK_FILTER_CUBIC_EXT</code> as a
result of this command, it <strong>must</strong> not have a <a href="resources.html#VkImageViewType" class="xref page">VkImageViewType</a> of
<code>VK_IMAGE_VIEW_TYPE_3D</code>, <code>VK_IMAGE_VIEW_TYPE_CUBE</code>, or
<code>VK_IMAGE_VIEW_TYPE_CUBE_ARRAY</code></p>
</li>
<li>
<p><a id="VUID-vkCmdDispatch-filterCubic-02694" href="#VUID-vkCmdDispatch-filterCubic-02694"></a> <span class="vuid">VUID-vkCmdDispatch-filterCubic-02694</span><br>

Any <a href="resources.html#VkImageView" class="xref page">VkImageView</a> being sampled with <code>VK_FILTER_CUBIC_EXT</code> as a
result of this command <strong>must</strong> have a <a href="resources.html#VkImageViewType" class="xref page">VkImageViewType</a> and format
that supports cubic filtering, as specified by
<a href="capabilities.html#VkFilterCubicImageViewImageFormatPropertiesEXT" class="xref page">VkFilterCubicImageViewImageFormatPropertiesEXT</a>::<code>filterCubic</code>
returned by <a href="capabilities.html#vkGetPhysicalDeviceImageFormatProperties2" class="xref page">vkGetPhysicalDeviceImageFormatProperties2</a></p>
</li>
<li>
<p><a id="VUID-vkCmdDispatch-filterCubicMinmax-02695" href="#VUID-vkCmdDispatch-filterCubicMinmax-02695"></a> <span class="vuid">VUID-vkCmdDispatch-filterCubicMinmax-02695</span><br>

Any <a href="resources.html#VkImageView" class="xref page">VkImageView</a> being sampled with <code>VK_FILTER_CUBIC_EXT</code> with
a reduction mode of either <code>VK_SAMPLER_REDUCTION_MODE_MIN</code> or
<code>VK_SAMPLER_REDUCTION_MODE_MAX</code> as a result of this command <strong>must</strong>
have a <a href="resources.html#VkImageViewType" class="xref page">VkImageViewType</a> and format that supports cubic filtering
together with minmax filtering, as specified by
<a href="capabilities.html#VkFilterCubicImageViewImageFormatPropertiesEXT" class="xref page">VkFilterCubicImageViewImageFormatPropertiesEXT</a>::<code>filterCubicMinmax</code>
returned by <a href="capabilities.html#vkGetPhysicalDeviceImageFormatProperties2" class="xref page">vkGetPhysicalDeviceImageFormatProperties2</a></p>
</li>
<li>
<p><a id="VUID-vkCmdDispatch-cubicRangeClamp-09212" href="#VUID-vkCmdDispatch-cubicRangeClamp-09212"></a> <span class="vuid">VUID-vkCmdDispatch-cubicRangeClamp-09212</span><br>

If the <a href="features.html#features-filter-cubic-range-clamp" class="xref page"><code>cubicRangeClamp</code></a>
feature is not enabled, then any <a href="resources.html#VkImageView" class="xref page">VkImageView</a> being sampled with
<code>VK_FILTER_CUBIC_EXT</code> as a result of this command
<strong>must</strong> not have a
<a href="samplers.html#VkSamplerReductionModeCreateInfo" class="xref page">VkSamplerReductionModeCreateInfo</a>::<code>reductionMode</code> equal to
<code>VK_SAMPLER_REDUCTION_MODE_WEIGHTED_AVERAGE_RANGECLAMP_QCOM</code></p>
</li>
<li>
<p><a id="VUID-vkCmdDispatch-reductionMode-09213" href="#VUID-vkCmdDispatch-reductionMode-09213"></a> <span class="vuid">VUID-vkCmdDispatch-reductionMode-09213</span><br>

Any <a href="resources.html#VkImageView" class="xref page">VkImageView</a> being sampled with a
<a href="samplers.html#VkSamplerReductionModeCreateInfo" class="xref page">VkSamplerReductionModeCreateInfo</a>::<code>reductionMode</code> equal to
<code>VK_SAMPLER_REDUCTION_MODE_WEIGHTED_AVERAGE_RANGECLAMP_QCOM</code> as a
result of this command <strong>must</strong> sample with <code>VK_FILTER_CUBIC_EXT</code></p>
</li>
<li>
<p><a id="VUID-vkCmdDispatch-selectableCubicWeights-09214" href="#VUID-vkCmdDispatch-selectableCubicWeights-09214"></a> <span class="vuid">VUID-vkCmdDispatch-selectableCubicWeights-09214</span><br>

If the <a href="features.html#features-filter-cubic-weight-selection" class="xref page">    <code>selectableCubicWeights</code></a> feature is not enabled, then any
<a href="resources.html#VkImageView" class="xref page">VkImageView</a> being sampled with <code>VK_FILTER_CUBIC_EXT</code> as a
result of this command <strong>must</strong> have
<a href="samplers.html#VkSamplerCubicWeightsCreateInfoQCOM" class="xref page">VkSamplerCubicWeightsCreateInfoQCOM</a>::<code>cubicWeights</code> equal to
<code>VK_CUBIC_FILTER_WEIGHTS_CATMULL_ROM_QCOM</code></p>
</li>
<li>
<p><a id="VUID-vkCmdDispatch-flags-02696" href="#VUID-vkCmdDispatch-flags-02696"></a> <span class="vuid">VUID-vkCmdDispatch-flags-02696</span><br>

Any <a href="resources.html#VkImage" class="xref page">VkImage</a> created with a <a href="resources.html#VkImageCreateInfo" class="xref page">VkImageCreateInfo</a>::<code>flags</code>
containing <code>VK_IMAGE_CREATE_CORNER_SAMPLED_BIT_NV</code> sampled as a
result of this command <strong>must</strong> only be sampled using a
<a href="samplers.html#VkSamplerAddressMode" class="xref page">VkSamplerAddressMode</a> of
<code>VK_SAMPLER_ADDRESS_MODE_CLAMP_TO_EDGE</code></p>
</li>
<li>
<p><a id="VUID-vkCmdDispatch-OpTypeImage-07027" href="#VUID-vkCmdDispatch-OpTypeImage-07027"></a> <span class="vuid">VUID-vkCmdDispatch-OpTypeImage-07027</span><br>

For any <a href="resources.html#VkImageView" class="xref page">VkImageView</a> being written as a storage image where the
image format field of the <code>OpTypeImage</code> is <code>Unknown</code>, the view&#8217;s
<a href="resources.html#resources-image-view-format-features" class="xref page">format features</a> <strong>must</strong> contain
<code>VK_FORMAT_FEATURE_2_STORAGE_WRITE_WITHOUT_FORMAT_BIT</code></p>
</li>
<li>
<p><a id="VUID-vkCmdDispatch-OpTypeImage-07028" href="#VUID-vkCmdDispatch-OpTypeImage-07028"></a> <span class="vuid">VUID-vkCmdDispatch-OpTypeImage-07028</span><br>

For any <a href="resources.html#VkImageView" class="xref page">VkImageView</a> being read as a storage image where the image
format field of the <code>OpTypeImage</code> is <code>Unknown</code>, the view&#8217;s
<a href="resources.html#resources-image-view-format-features" class="xref page">format features</a> <strong>must</strong> contain
<code>VK_FORMAT_FEATURE_2_STORAGE_READ_WITHOUT_FORMAT_BIT</code></p>
</li>
<li>
<p><a id="VUID-vkCmdDispatch-OpTypeImage-07029" href="#VUID-vkCmdDispatch-OpTypeImage-07029"></a> <span class="vuid">VUID-vkCmdDispatch-OpTypeImage-07029</span><br>

For any <a href="resources.html#VkBufferView" class="xref page">VkBufferView</a> being written as a storage texel buffer where
the image format field of the <code>OpTypeImage</code> is <code>Unknown</code>, the
view&#8217;s <a href="formats.html#VkFormatProperties3" class="xref page">buffer features</a> <strong>must</strong> contain
<code>VK_FORMAT_FEATURE_2_STORAGE_WRITE_WITHOUT_FORMAT_BIT</code></p>
</li>
<li>
<p><a id="VUID-vkCmdDispatch-OpTypeImage-07030" href="#VUID-vkCmdDispatch-OpTypeImage-07030"></a> <span class="vuid">VUID-vkCmdDispatch-OpTypeImage-07030</span><br>

Any <a href="resources.html#VkBufferView" class="xref page">VkBufferView</a> being read as a storage texel buffer where the
image format field of the <code>OpTypeImage</code> is <code>Unknown</code> then the
view&#8217;s <a href="formats.html#VkFormatProperties3" class="xref page">buffer features</a> <strong>must</strong> contain
<code>VK_FORMAT_FEATURE_2_STORAGE_READ_WITHOUT_FORMAT_BIT</code></p>
</li>
<li>
<p><a id="VUID-vkCmdDispatch-None-08600" href="#VUID-vkCmdDispatch-None-08600"></a> <span class="vuid">VUID-vkCmdDispatch-None-08600</span><br>

For each set <em>n</em> that is statically used by <a href="shaders.html#shaders-binding" class="xref page">a bound    shader</a>, a descriptor set <strong>must</strong> have been bound to <em>n</em> at the same
pipeline bind point, with a <a href="descriptorsets.html#VkPipelineLayout" class="xref page">VkPipelineLayout</a> that is compatible
for set <em>n</em>, with the <a href="descriptorsets.html#VkPipelineLayout" class="xref page">VkPipelineLayout</a> or
<a href="descriptorsets.html#VkDescriptorSetLayout" class="xref page">VkDescriptorSetLayout</a> array that was used to create the current
<a href="pipelines.html#VkPipeline" class="xref page">VkPipeline</a> or <a href="shaders.html#VkShaderEXT" class="xref page">VkShaderEXT</a>, as described in
<a href="descriptorsets.html#descriptorsets-compatibility" class="xref page">Pipeline Layout Compatibility</a></p>
</li>
<li>
<p><a id="VUID-vkCmdDispatch-None-08601" href="#VUID-vkCmdDispatch-None-08601"></a> <span class="vuid">VUID-vkCmdDispatch-None-08601</span><br>

For each push constant that is statically used by <a href="shaders.html#shaders-binding" class="xref page">a    bound shader</a>, a push constant value <strong>must</strong> have been set for the same
pipeline bind point, with a <a href="descriptorsets.html#VkPipelineLayout" class="xref page">VkPipelineLayout</a> that is compatible
for push constants, with the <a href="descriptorsets.html#VkPipelineLayout" class="xref page">VkPipelineLayout</a> or
<a href="descriptorsets.html#VkDescriptorSetLayout" class="xref page">VkDescriptorSetLayout</a> and <a href="descriptorsets.html#VkPushConstantRange" class="xref page">VkPushConstantRange</a> arrays used to
create the current <a href="pipelines.html#VkPipeline" class="xref page">VkPipeline</a> or <a href="shaders.html#VkShaderEXT" class="xref page">VkShaderEXT</a>, as described
in <a href="descriptorsets.html#descriptorsets-compatibility" class="xref page">Pipeline Layout Compatibility</a></p>
</li>
<li>
<p><a id="VUID-vkCmdDispatch-maintenance4-08602" href="#VUID-vkCmdDispatch-maintenance4-08602"></a> <span class="vuid">VUID-vkCmdDispatch-maintenance4-08602</span><br>

If the <a href="features.html#features-maintenance4" class="xref page"><code>maintenance4</code></a> feature is not
enabled, then for each push constant that is statically used by
<a href="shaders.html#shaders-binding" class="xref page">a bound shader</a>, a push constant value <strong>must</strong> have
been set for the same pipeline bind point, with a <a href="descriptorsets.html#VkPipelineLayout" class="xref page">VkPipelineLayout</a>
that is compatible for push constants, with the <a href="descriptorsets.html#VkPipelineLayout" class="xref page">VkPipelineLayout</a>
or <a href="descriptorsets.html#VkDescriptorSetLayout" class="xref page">VkDescriptorSetLayout</a> and <a href="descriptorsets.html#VkPushConstantRange" class="xref page">VkPushConstantRange</a> arrays used
to create the current <a href="pipelines.html#VkPipeline" class="xref page">VkPipeline</a> or <a href="shaders.html#VkShaderEXT" class="xref page">VkShaderEXT</a>, as
described in <a href="descriptorsets.html#descriptorsets-compatibility" class="xref page">Pipeline Layout Compatibility</a></p>
</li>
<li>
<p><a id="VUID-vkCmdDispatch-None-08114" href="#VUID-vkCmdDispatch-None-08114"></a> <span class="vuid">VUID-vkCmdDispatch-None-08114</span><br>

Descriptors in each bound descriptor set, specified via
<a href="descriptorsets.html#vkCmdBindDescriptorSets" class="xref page">vkCmdBindDescriptorSets</a>, <strong>must</strong> be valid if they are statically
used by the <a href="pipelines.html#VkPipeline" class="xref page">VkPipeline</a> bound to the pipeline bind point used by
this command and the bound <a href="pipelines.html#VkPipeline" class="xref page">VkPipeline</a> was not created with
<code>VK_PIPELINE_CREATE_DESCRIPTOR_BUFFER_BIT_EXT</code></p>
</li>
<li>
<p><a id="VUID-vkCmdDispatch-None-08115" href="#VUID-vkCmdDispatch-None-08115"></a> <span class="vuid">VUID-vkCmdDispatch-None-08115</span><br>

If the descriptors used by the <a href="pipelines.html#VkPipeline" class="xref page">VkPipeline</a> bound to the pipeline
bind point were specified via <a href="descriptorsets.html#vkCmdBindDescriptorSets" class="xref page">vkCmdBindDescriptorSets</a>, the bound
<a href="pipelines.html#VkPipeline" class="xref page">VkPipeline</a> <strong>must</strong> have been created without
<code>VK_PIPELINE_CREATE_DESCRIPTOR_BUFFER_BIT_EXT</code></p>
</li>
<li>
<p><a id="VUID-vkCmdDispatch-None-08116" href="#VUID-vkCmdDispatch-None-08116"></a> <span class="vuid">VUID-vkCmdDispatch-None-08116</span><br>

Descriptors in bound descriptor buffers, specified via
<a href="descriptorsets.html#vkCmdSetDescriptorBufferOffsetsEXT" class="xref page">vkCmdSetDescriptorBufferOffsetsEXT</a>, <strong>must</strong> be valid if they are
dynamically used by the <a href="pipelines.html#VkPipeline" class="xref page">VkPipeline</a> bound to the pipeline bind
point used by this command and the bound <a href="pipelines.html#VkPipeline" class="xref page">VkPipeline</a> was created
with <code>VK_PIPELINE_CREATE_DESCRIPTOR_BUFFER_BIT_EXT</code></p>
</li>
<li>
<p><a id="VUID-vkCmdDispatch-None-08604" href="#VUID-vkCmdDispatch-None-08604"></a> <span class="vuid">VUID-vkCmdDispatch-None-08604</span><br>

Descriptors in bound descriptor buffers, specified via
<a href="descriptorsets.html#vkCmdSetDescriptorBufferOffsetsEXT" class="xref page">vkCmdSetDescriptorBufferOffsetsEXT</a>, <strong>must</strong> be valid if they are
dynamically used by any <a href="shaders.html#VkShaderEXT" class="xref page">VkShaderEXT</a> bound to a stage corresponding
to the pipeline bind point used by this command</p>
</li>
<li>
<p><a id="VUID-vkCmdDispatch-None-08117" href="#VUID-vkCmdDispatch-None-08117"></a> <span class="vuid">VUID-vkCmdDispatch-None-08117</span><br>

If the descriptors used by the <a href="pipelines.html#VkPipeline" class="xref page">VkPipeline</a> bound to the pipeline
bind point were specified via <a href="descriptorsets.html#vkCmdSetDescriptorBufferOffsetsEXT" class="xref page">vkCmdSetDescriptorBufferOffsetsEXT</a>,
the bound <a href="pipelines.html#VkPipeline" class="xref page">VkPipeline</a> <strong>must</strong> have been created with
<code>VK_PIPELINE_CREATE_DESCRIPTOR_BUFFER_BIT_EXT</code></p>
</li>
<li>
<p><a id="VUID-vkCmdDispatch-None-08119" href="#VUID-vkCmdDispatch-None-08119"></a> <span class="vuid">VUID-vkCmdDispatch-None-08119</span><br>

If a descriptor is dynamically used with a <a href="pipelines.html#VkPipeline" class="xref page">VkPipeline</a> created with
<code>VK_PIPELINE_CREATE_DESCRIPTOR_BUFFER_BIT_EXT</code>, the descriptor
memory <strong>must</strong> be resident</p>
</li>
<li>
<p><a id="VUID-vkCmdDispatch-None-08605" href="#VUID-vkCmdDispatch-None-08605"></a> <span class="vuid">VUID-vkCmdDispatch-None-08605</span><br>

If a descriptor is dynamically used with a <a href="shaders.html#VkShaderEXT" class="xref page">VkShaderEXT</a> created
with a <code>VkDescriptorSetLayout</code> that was created with
<code>VK_DESCRIPTOR_SET_LAYOUT_CREATE_DESCRIPTOR_BUFFER_BIT_EXT</code>, the
descriptor memory <strong>must</strong> be resident</p>
</li>
<li>
<p><a id="VUID-vkCmdDispatch-None-08606" href="#VUID-vkCmdDispatch-None-08606"></a> <span class="vuid">VUID-vkCmdDispatch-None-08606</span><br>

If the <a href="features.html#features-shaderObject" class="xref page"><code>shaderObject</code></a> feature is not
enabled, a valid pipeline <strong>must</strong> be bound to the pipeline bind point used
by this command</p>
</li>
<li>
<p><a id="VUID-vkCmdDispatch-None-08607" href="#VUID-vkCmdDispatch-None-08607"></a> <span class="vuid">VUID-vkCmdDispatch-None-08607</span><br>

If the <a href="features.html#features-shaderObject" class="xref page"><code>shaderObject</code></a> is enabled, either
a valid pipeline <strong>must</strong> be bound to the pipeline bind point used by this
command, or a valid combination of valid and <a href="../appendices/boilerplate.html#VK_NULL_HANDLE" class="xref page">VK_NULL_HANDLE</a> shader
objects <strong>must</strong> be bound to every supported shader stage corresponding to
the pipeline bind point used by this command</p>
</li>
<li>
<p><a id="VUID-vkCmdDispatch-None-08608" href="#VUID-vkCmdDispatch-None-08608"></a> <span class="vuid">VUID-vkCmdDispatch-None-08608</span><br>

If a pipeline is bound to the pipeline bind point used by this command,
there <strong>must</strong> not have been any calls to dynamic state setting commands
for any state not specified as dynamic in the <a href="pipelines.html#VkPipeline" class="xref page">VkPipeline</a> object
bound to the pipeline bind point used by this command, since that
pipeline was bound</p>
</li>
<li>
<p><a id="VUID-vkCmdDispatch-None-08609" href="#VUID-vkCmdDispatch-None-08609"></a> <span class="vuid">VUID-vkCmdDispatch-None-08609</span><br>

If the <a href="pipelines.html#VkPipeline" class="xref page">VkPipeline</a> object bound to the pipeline bind point used by
this command or any <a href="shaders.html#VkShaderEXT" class="xref page">VkShaderEXT</a> bound to a stage corresponding to
the pipeline bind point used by this command accesses a <a href="samplers.html#VkSampler" class="xref page">VkSampler</a>
object that uses unnormalized coordinates, that sampler <strong>must</strong> not be
used to sample from any <a href="resources.html#VkImage" class="xref page">VkImage</a> with a <a href="resources.html#VkImageView" class="xref page">VkImageView</a> of the
type <code>VK_IMAGE_VIEW_TYPE_3D</code>, <code>VK_IMAGE_VIEW_TYPE_CUBE</code>,
<code>VK_IMAGE_VIEW_TYPE_1D_ARRAY</code>, <code>VK_IMAGE_VIEW_TYPE_2D_ARRAY</code> or
<code>VK_IMAGE_VIEW_TYPE_CUBE_ARRAY</code>, in any shader stage</p>
</li>
<li>
<p><a id="VUID-vkCmdDispatch-None-08610" href="#VUID-vkCmdDispatch-None-08610"></a> <span class="vuid">VUID-vkCmdDispatch-None-08610</span><br>

If the <a href="pipelines.html#VkPipeline" class="xref page">VkPipeline</a> object bound to the pipeline bind point used by
this command or any <a href="shaders.html#VkShaderEXT" class="xref page">VkShaderEXT</a> bound to a stage corresponding to
the pipeline bind point used by this command accesses a <a href="samplers.html#VkSampler" class="xref page">VkSampler</a>
object that uses unnormalized coordinates, that sampler <strong>must</strong> not be
used with any of the SPIR-V <code>OpImageSample*</code> or <code>OpImageSparseSample*</code>
instructions with <code>ImplicitLod</code>, <code>Dref</code> or <code>Proj</code> in their
name, in any shader stage</p>
</li>
<li>
<p><a id="VUID-vkCmdDispatch-None-08611" href="#VUID-vkCmdDispatch-None-08611"></a> <span class="vuid">VUID-vkCmdDispatch-None-08611</span><br>

If the <a href="pipelines.html#VkPipeline" class="xref page">VkPipeline</a> object bound to the pipeline bind point used by
this command or any <a href="shaders.html#VkShaderEXT" class="xref page">VkShaderEXT</a> bound to a stage corresponding to
the pipeline bind point used by this command accesses a <a href="samplers.html#VkSampler" class="xref page">VkSampler</a>
object that uses unnormalized coordinates, that sampler <strong>must</strong> not be
used with any of the SPIR-V <code>OpImageSample*</code> or <code>OpImageSparseSample*</code>
instructions that includes a LOD bias or any offset values, in any
shader stage</p>
</li>
<li>
<p><a id="VUID-vkCmdDispatch-uniformBuffers-06935" href="#VUID-vkCmdDispatch-uniformBuffers-06935"></a> <span class="vuid">VUID-vkCmdDispatch-uniformBuffers-06935</span><br>

If any stage of the <a href="pipelines.html#VkPipeline" class="xref page">VkPipeline</a> object bound to the pipeline bind
point used by this command accesses a uniform buffer, and that stage was
created without enabling either
<code>VK_PIPELINE_ROBUSTNESS_BUFFER_BEHAVIOR_ROBUST_BUFFER_ACCESS_EXT</code> or
<code>VK_PIPELINE_ROBUSTNESS_BUFFER_BEHAVIOR_ROBUST_BUFFER_ACCESS_2_EXT</code>
for <code>uniformBuffers</code>, and the <a href="features.html#features-robustBufferAccess" class="xref page">    <code>robustBufferAccess</code></a> feature is not enabled, that stage <strong>must</strong> not
access values outside of the range of the buffer as specified in the
descriptor set bound to the same pipeline bind point</p>
</li>
<li>
<p><a id="VUID-vkCmdDispatch-None-08612" href="#VUID-vkCmdDispatch-None-08612"></a> <span class="vuid">VUID-vkCmdDispatch-None-08612</span><br>

If the <a href="features.html#features-robustBufferAccess" class="xref page"><code>robustBufferAccess</code></a> feature
is not enabled, and any <a href="shaders.html#VkShaderEXT" class="xref page">VkShaderEXT</a> bound to a stage corresponding
to the pipeline bind point used by this command accesses a uniform
buffer, it <strong>must</strong> not access values outside of the range of the buffer as
specified in the descriptor set bound to the same pipeline bind point</p>
</li>
<li>
<p><a id="VUID-vkCmdDispatch-storageBuffers-06936" href="#VUID-vkCmdDispatch-storageBuffers-06936"></a> <span class="vuid">VUID-vkCmdDispatch-storageBuffers-06936</span><br>

If any stage of the <a href="pipelines.html#VkPipeline" class="xref page">VkPipeline</a> object bound to the pipeline bind
point used by this command accesses a storage buffer, and that stage was
created without enabling either
<code>VK_PIPELINE_ROBUSTNESS_BUFFER_BEHAVIOR_ROBUST_BUFFER_ACCESS_EXT</code> or
<code>VK_PIPELINE_ROBUSTNESS_BUFFER_BEHAVIOR_ROBUST_BUFFER_ACCESS_2_EXT</code>
for <code>storageBuffers</code>, and the <a href="features.html#features-robustBufferAccess" class="xref page">    <code>robustBufferAccess</code></a> feature is not enabled, that stage <strong>must</strong> not
access values outside of the range of the buffer as specified in the
descriptor set bound to the same pipeline bind point</p>
</li>
<li>
<p><a id="VUID-vkCmdDispatch-None-08613" href="#VUID-vkCmdDispatch-None-08613"></a> <span class="vuid">VUID-vkCmdDispatch-None-08613</span><br>

If the <a href="features.html#features-robustBufferAccess" class="xref page"><code>robustBufferAccess</code></a> feature
is not enabled, and any <a href="shaders.html#VkShaderEXT" class="xref page">VkShaderEXT</a> bound to a stage corresponding
to the pipeline bind point used by this command accesses a storage
buffer, it <strong>must</strong> not access values outside of the range of the buffer as
specified in the descriptor set bound to the same pipeline bind point</p>
</li>
<li>
<p><a id="VUID-vkCmdDispatch-commandBuffer-02707" href="#VUID-vkCmdDispatch-commandBuffer-02707"></a> <span class="vuid">VUID-vkCmdDispatch-commandBuffer-02707</span><br>

If <code>commandBuffer</code> is an unprotected command buffer and
<a href="devsandqueues.html#limits-protectedNoFault" class="xref page"><code>protectedNoFault</code></a> is not supported,
any resource accessed by <a href="shaders.html#shaders-binding" class="xref page">bound shaders</a> <strong>must</strong> not be
a protected resource</p>
</li>
<li>
<p><a id="VUID-vkCmdDispatch-None-06550" href="#VUID-vkCmdDispatch-None-06550"></a> <span class="vuid">VUID-vkCmdDispatch-None-06550</span><br>

If <a href="shaders.html#shaders-binding" class="xref page">a bound shader</a> accesses a <a href="samplers.html#VkSampler" class="xref page">VkSampler</a> or
<a href="resources.html#VkImageView" class="xref page">VkImageView</a> object that enables
<a href="samplers.html#samplers-YCbCr-conversion" class="xref page">sampler Y′C<sub>B</sub>C<sub>R</sub> conversion</a>, that object
<strong>must</strong> only be used with <code>OpImageSample*</code> or <code>OpImageSparseSample*</code>
instructions</p>
</li>
<li>
<p><a id="VUID-vkCmdDispatch-ConstOffset-06551" href="#VUID-vkCmdDispatch-ConstOffset-06551"></a> <span class="vuid">VUID-vkCmdDispatch-ConstOffset-06551</span><br>

If <a href="shaders.html#shaders-binding" class="xref page">a bound shader</a> accesses a <a href="samplers.html#VkSampler" class="xref page">VkSampler</a> or
<a href="resources.html#VkImageView" class="xref page">VkImageView</a> object that enables
<a href="samplers.html#samplers-YCbCr-conversion" class="xref page">sampler Y′C<sub>B</sub>C<sub>R</sub> conversion</a>, that object
<strong>must</strong> not use the <code>ConstOffset</code> and <code>Offset</code> operands</p>
</li>
<li>
<p><a id="VUID-vkCmdDispatch-viewType-07752" href="#VUID-vkCmdDispatch-viewType-07752"></a> <span class="vuid">VUID-vkCmdDispatch-viewType-07752</span><br>

If a <a href="resources.html#VkImageView" class="xref page">VkImageView</a> is accessed as a result of this command, then the
image view&#8217;s <code>viewType</code> <strong>must</strong> match the <code>Dim</code> operand of the
<code>OpTypeImage</code> as described in <a href="textures.html#textures-operation-validation" class="xref page">Instruction/Sampler/Image View Validation</a></p>
</li>
<li>
<p><a id="VUID-vkCmdDispatch-format-07753" href="#VUID-vkCmdDispatch-format-07753"></a> <span class="vuid">VUID-vkCmdDispatch-format-07753</span><br>

If a <a href="resources.html#VkImageView" class="xref page">VkImageView</a> is accessed as a result of this command, then the
<a href="formats.html#formats-numericformat" class="xref page">numeric type</a> of the image view&#8217;s <code>format</code>
and the <code>Sampled</code> <code>Type</code> operand of the <code>OpTypeImage</code> <strong>must</strong>
match</p>
</li>
<li>
<p><a id="VUID-vkCmdDispatch-OpImageWrite-08795" href="#VUID-vkCmdDispatch-OpImageWrite-08795"></a> <span class="vuid">VUID-vkCmdDispatch-OpImageWrite-08795</span><br>

If a <a href="resources.html#VkImageView" class="xref page">VkImageView</a>
created with a format other than <code>VK_FORMAT_A8_UNORM_KHR</code>
is accessed using <code>OpImageWrite</code> as a result of this command, then
the <code>Type</code> of the <code>Texel</code> operand of that instruction <strong>must</strong> have
at least as many components as the image view&#8217;s format</p>
</li>
<li>
<p><a id="VUID-vkCmdDispatch-OpImageWrite-08796" href="#VUID-vkCmdDispatch-OpImageWrite-08796"></a> <span class="vuid">VUID-vkCmdDispatch-OpImageWrite-08796</span><br>

If a <a href="resources.html#VkImageView" class="xref page">VkImageView</a> created with the format
<code>VK_FORMAT_A8_UNORM_KHR</code> is accessed using <code>OpImageWrite</code> as a
result of this command, then the <code>Type</code> of the <code>Texel</code> operand of
that instruction <strong>must</strong> have four components</p>
</li>
<li>
<p><a id="VUID-vkCmdDispatch-OpImageWrite-04469" href="#VUID-vkCmdDispatch-OpImageWrite-04469"></a> <span class="vuid">VUID-vkCmdDispatch-OpImageWrite-04469</span><br>

If a <a href="resources.html#VkBufferView" class="xref page">VkBufferView</a> is accessed using <code>OpImageWrite</code> as a result
of this command, then the <code>Type</code> of the <code>Texel</code> operand of that
instruction <strong>must</strong> have at least as many components as the buffer view&#8217;s
format</p>
</li>
<li>
<p><a id="VUID-vkCmdDispatch-SampledType-04470" href="#VUID-vkCmdDispatch-SampledType-04470"></a> <span class="vuid">VUID-vkCmdDispatch-SampledType-04470</span><br>

If a <a href="resources.html#VkImageView" class="xref page">VkImageView</a> with a <a href="formats.html#VkFormat" class="xref page">VkFormat</a> that has a 64-bit component
width is accessed as a result of this command, the <code>SampledType</code> of
the <code>OpTypeImage</code> operand of that instruction <strong>must</strong> have a <code>Width</code>
of 64</p>
</li>
<li>
<p><a id="VUID-vkCmdDispatch-SampledType-04471" href="#VUID-vkCmdDispatch-SampledType-04471"></a> <span class="vuid">VUID-vkCmdDispatch-SampledType-04471</span><br>

If a <a href="resources.html#VkImageView" class="xref page">VkImageView</a> with a <a href="formats.html#VkFormat" class="xref page">VkFormat</a> that has a component width
less than 64-bit is accessed as a result of this command, the
<code>SampledType</code> of the <code>OpTypeImage</code> operand of that instruction
<strong>must</strong> have a <code>Width</code> of 32</p>
</li>
<li>
<p><a id="VUID-vkCmdDispatch-SampledType-04472" href="#VUID-vkCmdDispatch-SampledType-04472"></a> <span class="vuid">VUID-vkCmdDispatch-SampledType-04472</span><br>

If a <a href="resources.html#VkBufferView" class="xref page">VkBufferView</a> with a <a href="formats.html#VkFormat" class="xref page">VkFormat</a> that has a 64-bit
component width is accessed as a result of this command, the
<code>SampledType</code> of the <code>OpTypeImage</code> operand of that instruction
<strong>must</strong> have a <code>Width</code> of 64</p>
</li>
<li>
<p><a id="VUID-vkCmdDispatch-SampledType-04473" href="#VUID-vkCmdDispatch-SampledType-04473"></a> <span class="vuid">VUID-vkCmdDispatch-SampledType-04473</span><br>

If a <a href="resources.html#VkBufferView" class="xref page">VkBufferView</a> with a <a href="formats.html#VkFormat" class="xref page">VkFormat</a> that has a component width
less than 64-bit is accessed as a result of this command, the
<code>SampledType</code> of the <code>OpTypeImage</code> operand of that instruction
<strong>must</strong> have a <code>Width</code> of 32</p>
</li>
<li>
<p><a id="VUID-vkCmdDispatch-sparseImageInt64Atomics-04474" href="#VUID-vkCmdDispatch-sparseImageInt64Atomics-04474"></a> <span class="vuid">VUID-vkCmdDispatch-sparseImageInt64Atomics-04474</span><br>

If the <a href="features.html#features-sparseImageInt64Atomics" class="xref page">    <code>sparseImageInt64Atomics</code></a> feature is not enabled, <a href="resources.html#VkImage" class="xref page">VkImage</a>
objects created with the <code>VK_IMAGE_CREATE_SPARSE_RESIDENCY_BIT</code> flag
<strong>must</strong> not be accessed by atomic instructions through an <code>OpTypeImage</code>
with a <code>SampledType</code> with a <code>Width</code> of 64 by this command</p>
</li>
<li>
<p><a id="VUID-vkCmdDispatch-sparseImageInt64Atomics-04475" href="#VUID-vkCmdDispatch-sparseImageInt64Atomics-04475"></a> <span class="vuid">VUID-vkCmdDispatch-sparseImageInt64Atomics-04475</span><br>

If the <a href="features.html#features-sparseImageInt64Atomics" class="xref page">    <code>sparseImageInt64Atomics</code></a> feature is not enabled, <a href="resources.html#VkBuffer" class="xref page">VkBuffer</a>
objects created with the <code>VK_BUFFER_CREATE_SPARSE_RESIDENCY_BIT</code>
flag <strong>must</strong> not be accessed by atomic instructions through an
<code>OpTypeImage</code> with a <code>SampledType</code> with a <code>Width</code> of 64 by this
command</p>
</li>
<li>
<p><a id="VUID-vkCmdDispatch-OpImageWeightedSampleQCOM-06971" href="#VUID-vkCmdDispatch-OpImageWeightedSampleQCOM-06971"></a> <span class="vuid">VUID-vkCmdDispatch-OpImageWeightedSampleQCOM-06971</span><br>

If <code>OpImageWeightedSampleQCOM</code> is used to sample a <a href="resources.html#VkImageView" class="xref page">VkImageView</a>
as a result of this command, then the image view&#8217;s
<a href="resources.html#resources-image-view-format-features" class="xref page">format features</a> <strong>must</strong> contain
<code>VK_FORMAT_FEATURE_2_WEIGHT_SAMPLED_IMAGE_BIT_QCOM</code></p>
</li>
<li>
<p><a id="VUID-vkCmdDispatch-OpImageWeightedSampleQCOM-06972" href="#VUID-vkCmdDispatch-OpImageWeightedSampleQCOM-06972"></a> <span class="vuid">VUID-vkCmdDispatch-OpImageWeightedSampleQCOM-06972</span><br>

If <code>OpImageWeightedSampleQCOM</code> uses a <a href="resources.html#VkImageView" class="xref page">VkImageView</a> as a sample
weight image as a result of this command, then the image view&#8217;s
<a href="resources.html#resources-image-view-format-features" class="xref page">format features</a> <strong>must</strong> contain
<code>VK_FORMAT_FEATURE_2_WEIGHT_IMAGE_BIT_QCOM</code></p>
</li>
<li>
<p><a id="VUID-vkCmdDispatch-OpImageBoxFilterQCOM-06973" href="#VUID-vkCmdDispatch-OpImageBoxFilterQCOM-06973"></a> <span class="vuid">VUID-vkCmdDispatch-OpImageBoxFilterQCOM-06973</span><br>

If <code>OpImageBoxFilterQCOM</code> is used to sample a <a href="resources.html#VkImageView" class="xref page">VkImageView</a> as a
result of this command, then the image view&#8217;s
<a href="resources.html#resources-image-view-format-features" class="xref page">format features</a> <strong>must</strong> contain
<code>VK_FORMAT_FEATURE_2_BOX_FILTER_SAMPLED_BIT_QCOM</code></p>
</li>
<li>
<p><a id="VUID-vkCmdDispatch-OpImageBlockMatchSSDQCOM-06974" href="#VUID-vkCmdDispatch-OpImageBlockMatchSSDQCOM-06974"></a> <span class="vuid">VUID-vkCmdDispatch-OpImageBlockMatchSSDQCOM-06974</span><br>

If <code>OpImageBlockMatchSSDQCOM</code> is used to read from an
<a href="resources.html#VkImageView" class="xref page">VkImageView</a> as a result of this command, then the image view&#8217;s
<a href="resources.html#resources-image-view-format-features" class="xref page">format features</a> <strong>must</strong> contain
<code>VK_FORMAT_FEATURE_2_BLOCK_MATCHING_BIT_QCOM</code></p>
</li>
<li>
<p><a id="VUID-vkCmdDispatch-OpImageBlockMatchSADQCOM-06975" href="#VUID-vkCmdDispatch-OpImageBlockMatchSADQCOM-06975"></a> <span class="vuid">VUID-vkCmdDispatch-OpImageBlockMatchSADQCOM-06975</span><br>

If <code>OpImageBlockMatchSADQCOM</code> is used to read from an
<a href="resources.html#VkImageView" class="xref page">VkImageView</a> as a result of this command, then the image view&#8217;s
<a href="resources.html#resources-image-view-format-features" class="xref page">format features</a> <strong>must</strong> contain
<code>VK_FORMAT_FEATURE_2_BLOCK_MATCHING_BIT_QCOM</code></p>
</li>
<li>
<p><a id="VUID-vkCmdDispatch-OpImageBlockMatchSADQCOM-06976" href="#VUID-vkCmdDispatch-OpImageBlockMatchSADQCOM-06976"></a> <span class="vuid">VUID-vkCmdDispatch-OpImageBlockMatchSADQCOM-06976</span><br>

If <code>OpImageBlockMatchSADQCOM</code> or OpImageBlockMatchSSDQCOM is used to
read from a reference image as result of this command, then the
specified reference coordinates <strong>must</strong> not fail
<a href="textures.html#textures-integer-coordinate-validation" class="xref page">integer texel coordinate    validation</a></p>
</li>
<li>
<p><a id="VUID-vkCmdDispatch-OpImageWeightedSampleQCOM-06977" href="#VUID-vkCmdDispatch-OpImageWeightedSampleQCOM-06977"></a> <span class="vuid">VUID-vkCmdDispatch-OpImageWeightedSampleQCOM-06977</span><br>

If <code>OpImageWeightedSampleQCOM</code>, <code>OpImageBoxFilterQCOM</code>,
<code>OpImageBlockMatchWindowSSDQCOM</code>,
<code>OpImageBlockMatchWindowSADQCOM</code>,
<code>OpImageBlockMatchGatherSSDQCOM</code>,
<code>OpImageBlockMatchGatherSADQCOM</code>,
<code>OpImageBlockMatchSSDQCOM</code>, or <code>OpImageBlockMatchSADQCOM</code> uses a
<a href="samplers.html#VkSampler" class="xref page">VkSampler</a> as a result of this command, then the sampler <strong>must</strong> have
been created with <code>VK_SAMPLER_CREATE_IMAGE_PROCESSING_BIT_QCOM</code></p>
</li>
<li>
<p><a id="VUID-vkCmdDispatch-OpImageWeightedSampleQCOM-06978" href="#VUID-vkCmdDispatch-OpImageWeightedSampleQCOM-06978"></a> <span class="vuid">VUID-vkCmdDispatch-OpImageWeightedSampleQCOM-06978</span><br>

If any command other than <code>OpImageWeightedSampleQCOM</code>,
<code>OpImageBoxFilterQCOM</code>,
<code>OpImageBlockMatchWindowSSDQCOM</code>,
<code>OpImageBlockMatchWindowSADQCOM</code>,
<code>OpImageBlockMatchGatherSSDQCOM</code>,
<code>OpImageBlockMatchGatherSADQCOM</code>,
<code>OpImageBlockMatchSSDQCOM</code>, or <code>OpImageBlockMatchSADQCOM</code> uses a
<a href="samplers.html#VkSampler" class="xref page">VkSampler</a> as a result of this command, then the sampler <strong>must</strong> not
have been created with <code>VK_SAMPLER_CREATE_IMAGE_PROCESSING_BIT_QCOM</code></p>
</li>
<li>
<p><a id="VUID-vkCmdDispatch-OpImageBlockMatchWindow-09215" href="#VUID-vkCmdDispatch-OpImageBlockMatchWindow-09215"></a> <span class="vuid">VUID-vkCmdDispatch-OpImageBlockMatchWindow-09215</span><br>

If a <code>OpImageBlockMatchWindow*QCOM</code> or
<code>OpImageBlockMatchGather*QCOM</code> instruction is used to read from an
<a href="resources.html#VkImageView" class="xref page">VkImageView</a> as a result of this command, then the image view&#8217;s
<a href="resources.html#resources-image-view-format-features" class="xref page">format features</a> <strong>must</strong> contain
<code>VK_FORMAT_FEATURE_2_BLOCK_MATCHING_BIT_QCOM</code></p>
</li>
<li>
<p><a id="VUID-vkCmdDispatch-OpImageBlockMatchWindow-09216" href="#VUID-vkCmdDispatch-OpImageBlockMatchWindow-09216"></a> <span class="vuid">VUID-vkCmdDispatch-OpImageBlockMatchWindow-09216</span><br>

If a <code>OpImageBlockMatchWindow*QCOM</code> or
<code>OpImageBlockMatchGather*QCOM</code> instruction is used to read from an
<a href="resources.html#VkImageView" class="xref page">VkImageView</a> as a result of this command, then the image view&#8217;s
format <strong>must</strong> be a single-component format.</p>
</li>
<li>
<p><a id="VUID-vkCmdDispatch-OpImageBlockMatchWindow-09217" href="#VUID-vkCmdDispatch-OpImageBlockMatchWindow-09217"></a> <span class="vuid">VUID-vkCmdDispatch-OpImageBlockMatchWindow-09217</span><br>

If a <code>OpImageBlockMatchWindow*QCOM</code> or
<code>OpImageBlockMatchGather*QCOM</code> read from a reference image as result
of this command, then the specified reference coordinates <strong>must</strong> not fail
<a href="textures.html#textures-integer-coordinate-validation" class="xref page">integer texel coordinate    validation</a></p>
</li>
<li>
<p><a id="VUID-vkCmdDispatch-None-07288" href="#VUID-vkCmdDispatch-None-07288"></a> <span class="vuid">VUID-vkCmdDispatch-None-07288</span><br>

Any shader invocation executed by this command <strong>must</strong>
<a href="shaders.html#shaders-termination" class="xref page">terminate</a></p>
</li>
</ul>
</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCmdDispatch-commandBuffer-02712" href="#VUID-vkCmdDispatch-commandBuffer-02712"></a> <span class="vuid">VUID-vkCmdDispatch-commandBuffer-02712</span><br>

If <code>commandBuffer</code> is a protected command buffer and
<a href="devsandqueues.html#limits-protectedNoFault" class="xref page"><code>protectedNoFault</code></a> is not supported,
any resource written to by the <code>VkPipeline</code> object bound to the
pipeline bind point used by this command <strong>must</strong> not be an unprotected
resource</p>
</li>
<li>
<p><a id="VUID-vkCmdDispatch-commandBuffer-02713" href="#VUID-vkCmdDispatch-commandBuffer-02713"></a> <span class="vuid">VUID-vkCmdDispatch-commandBuffer-02713</span><br>

If <code>commandBuffer</code> is a protected command buffer and
<a href="devsandqueues.html#limits-protectedNoFault" class="xref page"><code>protectedNoFault</code></a> is not supported,
pipeline stages other than the framebuffer-space and compute stages in
the <code>VkPipeline</code> object bound to the pipeline bind point used by
this command <strong>must</strong> not write to any resource</p>
</li>
<li>
<p><a id="VUID-vkCmdDispatch-commandBuffer-04617" href="#VUID-vkCmdDispatch-commandBuffer-04617"></a> <span class="vuid">VUID-vkCmdDispatch-commandBuffer-04617</span><br>

If any of the shader stages of the <code>VkPipeline</code> bound to the
pipeline bind point used by this command uses the
<a href="../appendices/spirvenv.html#spirvenv-capabilities-table-RayQueryKHR" class="xref page"><code>RayQueryKHR</code></a>
capability, then <code>commandBuffer</code> <strong>must</strong> not be a protected command
buffer</p>
</li>
<li>
<p><a id="VUID-vkCmdDispatch-groupCountX-00386" href="#VUID-vkCmdDispatch-groupCountX-00386"></a> <span class="vuid">VUID-vkCmdDispatch-groupCountX-00386</span><br>

<code>groupCountX</code> <strong>must</strong> be less than or equal to
<code>VkPhysicalDeviceLimits</code>::<code>maxComputeWorkGroupCount</code>[0]</p>
</li>
<li>
<p><a id="VUID-vkCmdDispatch-groupCountY-00387" href="#VUID-vkCmdDispatch-groupCountY-00387"></a> <span class="vuid">VUID-vkCmdDispatch-groupCountY-00387</span><br>

<code>groupCountY</code> <strong>must</strong> be less than or equal to
<code>VkPhysicalDeviceLimits</code>::<code>maxComputeWorkGroupCount</code>[1]</p>
</li>
<li>
<p><a id="VUID-vkCmdDispatch-groupCountZ-00388" href="#VUID-vkCmdDispatch-groupCountZ-00388"></a> <span class="vuid">VUID-vkCmdDispatch-groupCountZ-00388</span><br>

<code>groupCountZ</code> <strong>must</strong> be less than or equal to
<code>VkPhysicalDeviceLimits</code>::<code>maxComputeWorkGroupCount</code>[2]</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCmdDispatch-commandBuffer-parameter" href="#VUID-vkCmdDispatch-commandBuffer-parameter"></a> <span class="vuid">VUID-vkCmdDispatch-commandBuffer-parameter</span><br>
 <code>commandBuffer</code> <strong>must</strong> be a valid <a href="cmdbuffers.html#VkCommandBuffer" class="xref page">VkCommandBuffer</a> handle</p>
</li>
<li>
<p><a id="VUID-vkCmdDispatch-commandBuffer-recording" href="#VUID-vkCmdDispatch-commandBuffer-recording"></a> <span class="vuid">VUID-vkCmdDispatch-commandBuffer-recording</span><br>
 <code>commandBuffer</code> <strong>must</strong> be in the <a href="cmdbuffers.html#commandbuffers-lifecycle" class="xref page">recording state</a></p>
</li>
<li>
<p><a id="VUID-vkCmdDispatch-commandBuffer-cmdpool" href="#VUID-vkCmdDispatch-commandBuffer-cmdpool"></a> <span class="vuid">VUID-vkCmdDispatch-commandBuffer-cmdpool</span><br>
 The <code>VkCommandPool</code> that <code>commandBuffer</code> was allocated from <strong>must</strong> support compute operations</p>
</li>
<li>
<p><a id="VUID-vkCmdDispatch-renderpass" href="#VUID-vkCmdDispatch-renderpass"></a> <span class="vuid">VUID-vkCmdDispatch-renderpass</span><br>
 This command <strong>must</strong> only be called outside of a render pass instance</p>
</li>
<li>
<p><a id="VUID-vkCmdDispatch-videocoding" href="#VUID-vkCmdDispatch-videocoding"></a> <span class="vuid">VUID-vkCmdDispatch-videocoding</span><br>
 This command <strong>must</strong> only be called outside of a video coding scope</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Host Synchronization</div>
<div class="ulist">
<ul>
<li>
<p>Host access to <code>commandBuffer</code> <strong>must</strong> be externally synchronized</p>
</li>
<li>
<p>Host access to the <code>VkCommandPool</code> that <code>commandBuffer</code> was allocated from <strong>must</strong> be externally synchronized</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Command Properties</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><a href="cmdbuffers.html#VkCommandBufferLevel" class="xref page">Command Buffer Levels</a></th>
<th class="tableblock halign-left valign-top"><a href="renderpass.html#vkCmdBeginRenderPass" class="xref page">Render Pass Scope</a></th>
<th class="tableblock halign-left valign-top"><a href="video_extensions.html#vkCmdBeginVideoCodingKHR" class="xref page">Video Coding Scope</a></th>
<th class="tableblock halign-left valign-top"><a href="devsandqueues.html#VkQueueFlagBits" class="xref page">Supported Queue Types</a></th>
<th class="tableblock halign-left valign-top"><a href="fundamentals.html#fundamentals-queueoperation-command-types" class="xref page">Command Type</a></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Primary<br>
Secondary</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Outside</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Outside</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Compute</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Action</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>To record an indirect dispatching command, call:</p>
</div>
<div id="vkCmdDispatchIndirect" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_VERSION_1_0
void vkCmdDispatchIndirect(
    VkCommandBuffer                             commandBuffer,
    VkBuffer                                    buffer,
    VkDeviceSize                                offset);</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>commandBuffer</code> is the command buffer into which the command will be
recorded.</p>
</li>
<li>
<p><code>buffer</code> is the buffer containing dispatch parameters.</p>
</li>
<li>
<p><code>offset</code> is the byte offset into <code>buffer</code> where parameters
begin.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><code>vkCmdDispatchIndirect</code> behaves similarly to <a href="#vkCmdDispatch">vkCmdDispatch</a> except
that the parameters are read by the device from a buffer during execution.
The parameters of the dispatch are encoded in a
<a href="#VkDispatchIndirectCommand">VkDispatchIndirectCommand</a> structure taken from <code>buffer</code> starting
at <code>offset</code>.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCmdDispatchIndirect-magFilter-04553" href="#VUID-vkCmdDispatchIndirect-magFilter-04553"></a> <span class="vuid">VUID-vkCmdDispatchIndirect-magFilter-04553</span><br>

If a <a href="samplers.html#VkSampler" class="xref page">VkSampler</a> created with <code>magFilter</code> or <code>minFilter</code>
equal to <code>VK_FILTER_LINEAR</code> and <code>compareEnable</code> equal to
<code>VK_FALSE</code> is used to sample a <a href="resources.html#VkImageView" class="xref page">VkImageView</a> as a result of this
command, then the image view&#8217;s
<a href="resources.html#resources-image-view-format-features" class="xref page">format features</a> <strong>must</strong> contain
<code>VK_FORMAT_FEATURE_SAMPLED_IMAGE_FILTER_LINEAR_BIT</code></p>
</li>
<li>
<p><a id="VUID-vkCmdDispatchIndirect-mipmapMode-04770" href="#VUID-vkCmdDispatchIndirect-mipmapMode-04770"></a> <span class="vuid">VUID-vkCmdDispatchIndirect-mipmapMode-04770</span><br>

If a <a href="samplers.html#VkSampler" class="xref page">VkSampler</a> created with <code>mipmapMode</code> equal to
<code>VK_SAMPLER_MIPMAP_MODE_LINEAR</code> and <code>compareEnable</code> equal to
<code>VK_FALSE</code> is used to sample a <a href="resources.html#VkImageView" class="xref page">VkImageView</a> as a result of this
command, then the image view&#8217;s
<a href="resources.html#resources-image-view-format-features" class="xref page">format features</a> <strong>must</strong> contain
<code>VK_FORMAT_FEATURE_SAMPLED_IMAGE_FILTER_LINEAR_BIT</code></p>
</li>
<li>
<p><a id="VUID-vkCmdDispatchIndirect-None-06479" href="#VUID-vkCmdDispatchIndirect-None-06479"></a> <span class="vuid">VUID-vkCmdDispatchIndirect-None-06479</span><br>

If a <a href="resources.html#VkImageView" class="xref page">VkImageView</a> is sampled with
<a href="textures.html#textures-depth-compare-operation" class="xref page">depth comparison</a>, the image view&#8217;s
<a href="resources.html#resources-image-view-format-features" class="xref page">format features</a> <strong>must</strong> contain
<code>VK_FORMAT_FEATURE_2_SAMPLED_IMAGE_DEPTH_COMPARISON_BIT</code></p>
</li>
<li>
<p><a id="VUID-vkCmdDispatchIndirect-None-02691" href="#VUID-vkCmdDispatchIndirect-None-02691"></a> <span class="vuid">VUID-vkCmdDispatchIndirect-None-02691</span><br>

If a <a href="resources.html#VkImageView" class="xref page">VkImageView</a> is accessed using atomic operations as a result
of this command, then the image view&#8217;s
<a href="resources.html#resources-image-view-format-features" class="xref page">format features</a> <strong>must</strong> contain
<code>VK_FORMAT_FEATURE_STORAGE_IMAGE_ATOMIC_BIT</code></p>
</li>
<li>
<p><a id="VUID-vkCmdDispatchIndirect-None-07888" href="#VUID-vkCmdDispatchIndirect-None-07888"></a> <span class="vuid">VUID-vkCmdDispatchIndirect-None-07888</span><br>

If a <code>VK_DESCRIPTOR_TYPE_STORAGE_TEXEL_BUFFER</code> descriptor is
accessed using atomic operations as a result of this command, then the
storage texel buffer&#8217;s <a href="resources.html#resources-buffer-view-format-features" class="xref page">format    features</a> <strong>must</strong> contain
<code>VK_FORMAT_FEATURE_STORAGE_TEXEL_BUFFER_ATOMIC_BIT</code></p>
</li>
<li>
<p><a id="VUID-vkCmdDispatchIndirect-None-02692" href="#VUID-vkCmdDispatchIndirect-None-02692"></a> <span class="vuid">VUID-vkCmdDispatchIndirect-None-02692</span><br>

If a <a href="resources.html#VkImageView" class="xref page">VkImageView</a> is sampled with <code>VK_FILTER_CUBIC_EXT</code> as a
result of this command, then the image view&#8217;s
<a href="resources.html#resources-image-view-format-features" class="xref page">format features</a> <strong>must</strong> contain
<code>VK_FORMAT_FEATURE_SAMPLED_IMAGE_FILTER_CUBIC_BIT_EXT</code></p>
</li>
<li>
<p><a id="VUID-vkCmdDispatchIndirect-None-02693" href="#VUID-vkCmdDispatchIndirect-None-02693"></a> <span class="vuid">VUID-vkCmdDispatchIndirect-None-02693</span><br>

If
the <a href="../appendices/extensions.html#VK_EXT_filter_cubic" class="xref page">VK_EXT_filter_cubic</a> extension is not enabled and
any <a href="resources.html#VkImageView" class="xref page">VkImageView</a> is sampled with <code>VK_FILTER_CUBIC_EXT</code> as a
result of this command, it <strong>must</strong> not have a <a href="resources.html#VkImageViewType" class="xref page">VkImageViewType</a> of
<code>VK_IMAGE_VIEW_TYPE_3D</code>, <code>VK_IMAGE_VIEW_TYPE_CUBE</code>, or
<code>VK_IMAGE_VIEW_TYPE_CUBE_ARRAY</code></p>
</li>
<li>
<p><a id="VUID-vkCmdDispatchIndirect-filterCubic-02694" href="#VUID-vkCmdDispatchIndirect-filterCubic-02694"></a> <span class="vuid">VUID-vkCmdDispatchIndirect-filterCubic-02694</span><br>

Any <a href="resources.html#VkImageView" class="xref page">VkImageView</a> being sampled with <code>VK_FILTER_CUBIC_EXT</code> as a
result of this command <strong>must</strong> have a <a href="resources.html#VkImageViewType" class="xref page">VkImageViewType</a> and format
that supports cubic filtering, as specified by
<a href="capabilities.html#VkFilterCubicImageViewImageFormatPropertiesEXT" class="xref page">VkFilterCubicImageViewImageFormatPropertiesEXT</a>::<code>filterCubic</code>
returned by <a href="capabilities.html#vkGetPhysicalDeviceImageFormatProperties2" class="xref page">vkGetPhysicalDeviceImageFormatProperties2</a></p>
</li>
<li>
<p><a id="VUID-vkCmdDispatchIndirect-filterCubicMinmax-02695" href="#VUID-vkCmdDispatchIndirect-filterCubicMinmax-02695"></a> <span class="vuid">VUID-vkCmdDispatchIndirect-filterCubicMinmax-02695</span><br>

Any <a href="resources.html#VkImageView" class="xref page">VkImageView</a> being sampled with <code>VK_FILTER_CUBIC_EXT</code> with
a reduction mode of either <code>VK_SAMPLER_REDUCTION_MODE_MIN</code> or
<code>VK_SAMPLER_REDUCTION_MODE_MAX</code> as a result of this command <strong>must</strong>
have a <a href="resources.html#VkImageViewType" class="xref page">VkImageViewType</a> and format that supports cubic filtering
together with minmax filtering, as specified by
<a href="capabilities.html#VkFilterCubicImageViewImageFormatPropertiesEXT" class="xref page">VkFilterCubicImageViewImageFormatPropertiesEXT</a>::<code>filterCubicMinmax</code>
returned by <a href="capabilities.html#vkGetPhysicalDeviceImageFormatProperties2" class="xref page">vkGetPhysicalDeviceImageFormatProperties2</a></p>
</li>
<li>
<p><a id="VUID-vkCmdDispatchIndirect-cubicRangeClamp-09212" href="#VUID-vkCmdDispatchIndirect-cubicRangeClamp-09212"></a> <span class="vuid">VUID-vkCmdDispatchIndirect-cubicRangeClamp-09212</span><br>

If the <a href="features.html#features-filter-cubic-range-clamp" class="xref page"><code>cubicRangeClamp</code></a>
feature is not enabled, then any <a href="resources.html#VkImageView" class="xref page">VkImageView</a> being sampled with
<code>VK_FILTER_CUBIC_EXT</code> as a result of this command
<strong>must</strong> not have a
<a href="samplers.html#VkSamplerReductionModeCreateInfo" class="xref page">VkSamplerReductionModeCreateInfo</a>::<code>reductionMode</code> equal to
<code>VK_SAMPLER_REDUCTION_MODE_WEIGHTED_AVERAGE_RANGECLAMP_QCOM</code></p>
</li>
<li>
<p><a id="VUID-vkCmdDispatchIndirect-reductionMode-09213" href="#VUID-vkCmdDispatchIndirect-reductionMode-09213"></a> <span class="vuid">VUID-vkCmdDispatchIndirect-reductionMode-09213</span><br>

Any <a href="resources.html#VkImageView" class="xref page">VkImageView</a> being sampled with a
<a href="samplers.html#VkSamplerReductionModeCreateInfo" class="xref page">VkSamplerReductionModeCreateInfo</a>::<code>reductionMode</code> equal to
<code>VK_SAMPLER_REDUCTION_MODE_WEIGHTED_AVERAGE_RANGECLAMP_QCOM</code> as a
result of this command <strong>must</strong> sample with <code>VK_FILTER_CUBIC_EXT</code></p>
</li>
<li>
<p><a id="VUID-vkCmdDispatchIndirect-selectableCubicWeights-09214" href="#VUID-vkCmdDispatchIndirect-selectableCubicWeights-09214"></a> <span class="vuid">VUID-vkCmdDispatchIndirect-selectableCubicWeights-09214</span><br>

If the <a href="features.html#features-filter-cubic-weight-selection" class="xref page">    <code>selectableCubicWeights</code></a> feature is not enabled, then any
<a href="resources.html#VkImageView" class="xref page">VkImageView</a> being sampled with <code>VK_FILTER_CUBIC_EXT</code> as a
result of this command <strong>must</strong> have
<a href="samplers.html#VkSamplerCubicWeightsCreateInfoQCOM" class="xref page">VkSamplerCubicWeightsCreateInfoQCOM</a>::<code>cubicWeights</code> equal to
<code>VK_CUBIC_FILTER_WEIGHTS_CATMULL_ROM_QCOM</code></p>
</li>
<li>
<p><a id="VUID-vkCmdDispatchIndirect-flags-02696" href="#VUID-vkCmdDispatchIndirect-flags-02696"></a> <span class="vuid">VUID-vkCmdDispatchIndirect-flags-02696</span><br>

Any <a href="resources.html#VkImage" class="xref page">VkImage</a> created with a <a href="resources.html#VkImageCreateInfo" class="xref page">VkImageCreateInfo</a>::<code>flags</code>
containing <code>VK_IMAGE_CREATE_CORNER_SAMPLED_BIT_NV</code> sampled as a
result of this command <strong>must</strong> only be sampled using a
<a href="samplers.html#VkSamplerAddressMode" class="xref page">VkSamplerAddressMode</a> of
<code>VK_SAMPLER_ADDRESS_MODE_CLAMP_TO_EDGE</code></p>
</li>
<li>
<p><a id="VUID-vkCmdDispatchIndirect-OpTypeImage-07027" href="#VUID-vkCmdDispatchIndirect-OpTypeImage-07027"></a> <span class="vuid">VUID-vkCmdDispatchIndirect-OpTypeImage-07027</span><br>

For any <a href="resources.html#VkImageView" class="xref page">VkImageView</a> being written as a storage image where the
image format field of the <code>OpTypeImage</code> is <code>Unknown</code>, the view&#8217;s
<a href="resources.html#resources-image-view-format-features" class="xref page">format features</a> <strong>must</strong> contain
<code>VK_FORMAT_FEATURE_2_STORAGE_WRITE_WITHOUT_FORMAT_BIT</code></p>
</li>
<li>
<p><a id="VUID-vkCmdDispatchIndirect-OpTypeImage-07028" href="#VUID-vkCmdDispatchIndirect-OpTypeImage-07028"></a> <span class="vuid">VUID-vkCmdDispatchIndirect-OpTypeImage-07028</span><br>

For any <a href="resources.html#VkImageView" class="xref page">VkImageView</a> being read as a storage image where the image
format field of the <code>OpTypeImage</code> is <code>Unknown</code>, the view&#8217;s
<a href="resources.html#resources-image-view-format-features" class="xref page">format features</a> <strong>must</strong> contain
<code>VK_FORMAT_FEATURE_2_STORAGE_READ_WITHOUT_FORMAT_BIT</code></p>
</li>
<li>
<p><a id="VUID-vkCmdDispatchIndirect-OpTypeImage-07029" href="#VUID-vkCmdDispatchIndirect-OpTypeImage-07029"></a> <span class="vuid">VUID-vkCmdDispatchIndirect-OpTypeImage-07029</span><br>

For any <a href="resources.html#VkBufferView" class="xref page">VkBufferView</a> being written as a storage texel buffer where
the image format field of the <code>OpTypeImage</code> is <code>Unknown</code>, the
view&#8217;s <a href="formats.html#VkFormatProperties3" class="xref page">buffer features</a> <strong>must</strong> contain
<code>VK_FORMAT_FEATURE_2_STORAGE_WRITE_WITHOUT_FORMAT_BIT</code></p>
</li>
<li>
<p><a id="VUID-vkCmdDispatchIndirect-OpTypeImage-07030" href="#VUID-vkCmdDispatchIndirect-OpTypeImage-07030"></a> <span class="vuid">VUID-vkCmdDispatchIndirect-OpTypeImage-07030</span><br>

Any <a href="resources.html#VkBufferView" class="xref page">VkBufferView</a> being read as a storage texel buffer where the
image format field of the <code>OpTypeImage</code> is <code>Unknown</code> then the
view&#8217;s <a href="formats.html#VkFormatProperties3" class="xref page">buffer features</a> <strong>must</strong> contain
<code>VK_FORMAT_FEATURE_2_STORAGE_READ_WITHOUT_FORMAT_BIT</code></p>
</li>
<li>
<p><a id="VUID-vkCmdDispatchIndirect-None-08600" href="#VUID-vkCmdDispatchIndirect-None-08600"></a> <span class="vuid">VUID-vkCmdDispatchIndirect-None-08600</span><br>

For each set <em>n</em> that is statically used by <a href="shaders.html#shaders-binding" class="xref page">a bound    shader</a>, a descriptor set <strong>must</strong> have been bound to <em>n</em> at the same
pipeline bind point, with a <a href="descriptorsets.html#VkPipelineLayout" class="xref page">VkPipelineLayout</a> that is compatible
for set <em>n</em>, with the <a href="descriptorsets.html#VkPipelineLayout" class="xref page">VkPipelineLayout</a> or
<a href="descriptorsets.html#VkDescriptorSetLayout" class="xref page">VkDescriptorSetLayout</a> array that was used to create the current
<a href="pipelines.html#VkPipeline" class="xref page">VkPipeline</a> or <a href="shaders.html#VkShaderEXT" class="xref page">VkShaderEXT</a>, as described in
<a href="descriptorsets.html#descriptorsets-compatibility" class="xref page">Pipeline Layout Compatibility</a></p>
</li>
<li>
<p><a id="VUID-vkCmdDispatchIndirect-None-08601" href="#VUID-vkCmdDispatchIndirect-None-08601"></a> <span class="vuid">VUID-vkCmdDispatchIndirect-None-08601</span><br>

For each push constant that is statically used by <a href="shaders.html#shaders-binding" class="xref page">a    bound shader</a>, a push constant value <strong>must</strong> have been set for the same
pipeline bind point, with a <a href="descriptorsets.html#VkPipelineLayout" class="xref page">VkPipelineLayout</a> that is compatible
for push constants, with the <a href="descriptorsets.html#VkPipelineLayout" class="xref page">VkPipelineLayout</a> or
<a href="descriptorsets.html#VkDescriptorSetLayout" class="xref page">VkDescriptorSetLayout</a> and <a href="descriptorsets.html#VkPushConstantRange" class="xref page">VkPushConstantRange</a> arrays used to
create the current <a href="pipelines.html#VkPipeline" class="xref page">VkPipeline</a> or <a href="shaders.html#VkShaderEXT" class="xref page">VkShaderEXT</a>, as described
in <a href="descriptorsets.html#descriptorsets-compatibility" class="xref page">Pipeline Layout Compatibility</a></p>
</li>
<li>
<p><a id="VUID-vkCmdDispatchIndirect-maintenance4-08602" href="#VUID-vkCmdDispatchIndirect-maintenance4-08602"></a> <span class="vuid">VUID-vkCmdDispatchIndirect-maintenance4-08602</span><br>

If the <a href="features.html#features-maintenance4" class="xref page"><code>maintenance4</code></a> feature is not
enabled, then for each push constant that is statically used by
<a href="shaders.html#shaders-binding" class="xref page">a bound shader</a>, a push constant value <strong>must</strong> have
been set for the same pipeline bind point, with a <a href="descriptorsets.html#VkPipelineLayout" class="xref page">VkPipelineLayout</a>
that is compatible for push constants, with the <a href="descriptorsets.html#VkPipelineLayout" class="xref page">VkPipelineLayout</a>
or <a href="descriptorsets.html#VkDescriptorSetLayout" class="xref page">VkDescriptorSetLayout</a> and <a href="descriptorsets.html#VkPushConstantRange" class="xref page">VkPushConstantRange</a> arrays used
to create the current <a href="pipelines.html#VkPipeline" class="xref page">VkPipeline</a> or <a href="shaders.html#VkShaderEXT" class="xref page">VkShaderEXT</a>, as
described in <a href="descriptorsets.html#descriptorsets-compatibility" class="xref page">Pipeline Layout Compatibility</a></p>
</li>
<li>
<p><a id="VUID-vkCmdDispatchIndirect-None-08114" href="#VUID-vkCmdDispatchIndirect-None-08114"></a> <span class="vuid">VUID-vkCmdDispatchIndirect-None-08114</span><br>

Descriptors in each bound descriptor set, specified via
<a href="descriptorsets.html#vkCmdBindDescriptorSets" class="xref page">vkCmdBindDescriptorSets</a>, <strong>must</strong> be valid if they are statically
used by the <a href="pipelines.html#VkPipeline" class="xref page">VkPipeline</a> bound to the pipeline bind point used by
this command and the bound <a href="pipelines.html#VkPipeline" class="xref page">VkPipeline</a> was not created with
<code>VK_PIPELINE_CREATE_DESCRIPTOR_BUFFER_BIT_EXT</code></p>
</li>
<li>
<p><a id="VUID-vkCmdDispatchIndirect-None-08115" href="#VUID-vkCmdDispatchIndirect-None-08115"></a> <span class="vuid">VUID-vkCmdDispatchIndirect-None-08115</span><br>

If the descriptors used by the <a href="pipelines.html#VkPipeline" class="xref page">VkPipeline</a> bound to the pipeline
bind point were specified via <a href="descriptorsets.html#vkCmdBindDescriptorSets" class="xref page">vkCmdBindDescriptorSets</a>, the bound
<a href="pipelines.html#VkPipeline" class="xref page">VkPipeline</a> <strong>must</strong> have been created without
<code>VK_PIPELINE_CREATE_DESCRIPTOR_BUFFER_BIT_EXT</code></p>
</li>
<li>
<p><a id="VUID-vkCmdDispatchIndirect-None-08116" href="#VUID-vkCmdDispatchIndirect-None-08116"></a> <span class="vuid">VUID-vkCmdDispatchIndirect-None-08116</span><br>

Descriptors in bound descriptor buffers, specified via
<a href="descriptorsets.html#vkCmdSetDescriptorBufferOffsetsEXT" class="xref page">vkCmdSetDescriptorBufferOffsetsEXT</a>, <strong>must</strong> be valid if they are
dynamically used by the <a href="pipelines.html#VkPipeline" class="xref page">VkPipeline</a> bound to the pipeline bind
point used by this command and the bound <a href="pipelines.html#VkPipeline" class="xref page">VkPipeline</a> was created
with <code>VK_PIPELINE_CREATE_DESCRIPTOR_BUFFER_BIT_EXT</code></p>
</li>
<li>
<p><a id="VUID-vkCmdDispatchIndirect-None-08604" href="#VUID-vkCmdDispatchIndirect-None-08604"></a> <span class="vuid">VUID-vkCmdDispatchIndirect-None-08604</span><br>

Descriptors in bound descriptor buffers, specified via
<a href="descriptorsets.html#vkCmdSetDescriptorBufferOffsetsEXT" class="xref page">vkCmdSetDescriptorBufferOffsetsEXT</a>, <strong>must</strong> be valid if they are
dynamically used by any <a href="shaders.html#VkShaderEXT" class="xref page">VkShaderEXT</a> bound to a stage corresponding
to the pipeline bind point used by this command</p>
</li>
<li>
<p><a id="VUID-vkCmdDispatchIndirect-None-08117" href="#VUID-vkCmdDispatchIndirect-None-08117"></a> <span class="vuid">VUID-vkCmdDispatchIndirect-None-08117</span><br>

If the descriptors used by the <a href="pipelines.html#VkPipeline" class="xref page">VkPipeline</a> bound to the pipeline
bind point were specified via <a href="descriptorsets.html#vkCmdSetDescriptorBufferOffsetsEXT" class="xref page">vkCmdSetDescriptorBufferOffsetsEXT</a>,
the bound <a href="pipelines.html#VkPipeline" class="xref page">VkPipeline</a> <strong>must</strong> have been created with
<code>VK_PIPELINE_CREATE_DESCRIPTOR_BUFFER_BIT_EXT</code></p>
</li>
<li>
<p><a id="VUID-vkCmdDispatchIndirect-None-08119" href="#VUID-vkCmdDispatchIndirect-None-08119"></a> <span class="vuid">VUID-vkCmdDispatchIndirect-None-08119</span><br>

If a descriptor is dynamically used with a <a href="pipelines.html#VkPipeline" class="xref page">VkPipeline</a> created with
<code>VK_PIPELINE_CREATE_DESCRIPTOR_BUFFER_BIT_EXT</code>, the descriptor
memory <strong>must</strong> be resident</p>
</li>
<li>
<p><a id="VUID-vkCmdDispatchIndirect-None-08605" href="#VUID-vkCmdDispatchIndirect-None-08605"></a> <span class="vuid">VUID-vkCmdDispatchIndirect-None-08605</span><br>

If a descriptor is dynamically used with a <a href="shaders.html#VkShaderEXT" class="xref page">VkShaderEXT</a> created
with a <code>VkDescriptorSetLayout</code> that was created with
<code>VK_DESCRIPTOR_SET_LAYOUT_CREATE_DESCRIPTOR_BUFFER_BIT_EXT</code>, the
descriptor memory <strong>must</strong> be resident</p>
</li>
<li>
<p><a id="VUID-vkCmdDispatchIndirect-None-08606" href="#VUID-vkCmdDispatchIndirect-None-08606"></a> <span class="vuid">VUID-vkCmdDispatchIndirect-None-08606</span><br>

If the <a href="features.html#features-shaderObject" class="xref page"><code>shaderObject</code></a> feature is not
enabled, a valid pipeline <strong>must</strong> be bound to the pipeline bind point used
by this command</p>
</li>
<li>
<p><a id="VUID-vkCmdDispatchIndirect-None-08607" href="#VUID-vkCmdDispatchIndirect-None-08607"></a> <span class="vuid">VUID-vkCmdDispatchIndirect-None-08607</span><br>

If the <a href="features.html#features-shaderObject" class="xref page"><code>shaderObject</code></a> is enabled, either
a valid pipeline <strong>must</strong> be bound to the pipeline bind point used by this
command, or a valid combination of valid and <a href="../appendices/boilerplate.html#VK_NULL_HANDLE" class="xref page">VK_NULL_HANDLE</a> shader
objects <strong>must</strong> be bound to every supported shader stage corresponding to
the pipeline bind point used by this command</p>
</li>
<li>
<p><a id="VUID-vkCmdDispatchIndirect-None-08608" href="#VUID-vkCmdDispatchIndirect-None-08608"></a> <span class="vuid">VUID-vkCmdDispatchIndirect-None-08608</span><br>

If a pipeline is bound to the pipeline bind point used by this command,
there <strong>must</strong> not have been any calls to dynamic state setting commands
for any state not specified as dynamic in the <a href="pipelines.html#VkPipeline" class="xref page">VkPipeline</a> object
bound to the pipeline bind point used by this command, since that
pipeline was bound</p>
</li>
<li>
<p><a id="VUID-vkCmdDispatchIndirect-None-08609" href="#VUID-vkCmdDispatchIndirect-None-08609"></a> <span class="vuid">VUID-vkCmdDispatchIndirect-None-08609</span><br>

If the <a href="pipelines.html#VkPipeline" class="xref page">VkPipeline</a> object bound to the pipeline bind point used by
this command or any <a href="shaders.html#VkShaderEXT" class="xref page">VkShaderEXT</a> bound to a stage corresponding to
the pipeline bind point used by this command accesses a <a href="samplers.html#VkSampler" class="xref page">VkSampler</a>
object that uses unnormalized coordinates, that sampler <strong>must</strong> not be
used to sample from any <a href="resources.html#VkImage" class="xref page">VkImage</a> with a <a href="resources.html#VkImageView" class="xref page">VkImageView</a> of the
type <code>VK_IMAGE_VIEW_TYPE_3D</code>, <code>VK_IMAGE_VIEW_TYPE_CUBE</code>,
<code>VK_IMAGE_VIEW_TYPE_1D_ARRAY</code>, <code>VK_IMAGE_VIEW_TYPE_2D_ARRAY</code> or
<code>VK_IMAGE_VIEW_TYPE_CUBE_ARRAY</code>, in any shader stage</p>
</li>
<li>
<p><a id="VUID-vkCmdDispatchIndirect-None-08610" href="#VUID-vkCmdDispatchIndirect-None-08610"></a> <span class="vuid">VUID-vkCmdDispatchIndirect-None-08610</span><br>

If the <a href="pipelines.html#VkPipeline" class="xref page">VkPipeline</a> object bound to the pipeline bind point used by
this command or any <a href="shaders.html#VkShaderEXT" class="xref page">VkShaderEXT</a> bound to a stage corresponding to
the pipeline bind point used by this command accesses a <a href="samplers.html#VkSampler" class="xref page">VkSampler</a>
object that uses unnormalized coordinates, that sampler <strong>must</strong> not be
used with any of the SPIR-V <code>OpImageSample*</code> or <code>OpImageSparseSample*</code>
instructions with <code>ImplicitLod</code>, <code>Dref</code> or <code>Proj</code> in their
name, in any shader stage</p>
</li>
<li>
<p><a id="VUID-vkCmdDispatchIndirect-None-08611" href="#VUID-vkCmdDispatchIndirect-None-08611"></a> <span class="vuid">VUID-vkCmdDispatchIndirect-None-08611</span><br>

If the <a href="pipelines.html#VkPipeline" class="xref page">VkPipeline</a> object bound to the pipeline bind point used by
this command or any <a href="shaders.html#VkShaderEXT" class="xref page">VkShaderEXT</a> bound to a stage corresponding to
the pipeline bind point used by this command accesses a <a href="samplers.html#VkSampler" class="xref page">VkSampler</a>
object that uses unnormalized coordinates, that sampler <strong>must</strong> not be
used with any of the SPIR-V <code>OpImageSample*</code> or <code>OpImageSparseSample*</code>
instructions that includes a LOD bias or any offset values, in any
shader stage</p>
</li>
<li>
<p><a id="VUID-vkCmdDispatchIndirect-uniformBuffers-06935" href="#VUID-vkCmdDispatchIndirect-uniformBuffers-06935"></a> <span class="vuid">VUID-vkCmdDispatchIndirect-uniformBuffers-06935</span><br>

If any stage of the <a href="pipelines.html#VkPipeline" class="xref page">VkPipeline</a> object bound to the pipeline bind
point used by this command accesses a uniform buffer, and that stage was
created without enabling either
<code>VK_PIPELINE_ROBUSTNESS_BUFFER_BEHAVIOR_ROBUST_BUFFER_ACCESS_EXT</code> or
<code>VK_PIPELINE_ROBUSTNESS_BUFFER_BEHAVIOR_ROBUST_BUFFER_ACCESS_2_EXT</code>
for <code>uniformBuffers</code>, and the <a href="features.html#features-robustBufferAccess" class="xref page">    <code>robustBufferAccess</code></a> feature is not enabled, that stage <strong>must</strong> not
access values outside of the range of the buffer as specified in the
descriptor set bound to the same pipeline bind point</p>
</li>
<li>
<p><a id="VUID-vkCmdDispatchIndirect-None-08612" href="#VUID-vkCmdDispatchIndirect-None-08612"></a> <span class="vuid">VUID-vkCmdDispatchIndirect-None-08612</span><br>

If the <a href="features.html#features-robustBufferAccess" class="xref page"><code>robustBufferAccess</code></a> feature
is not enabled, and any <a href="shaders.html#VkShaderEXT" class="xref page">VkShaderEXT</a> bound to a stage corresponding
to the pipeline bind point used by this command accesses a uniform
buffer, it <strong>must</strong> not access values outside of the range of the buffer as
specified in the descriptor set bound to the same pipeline bind point</p>
</li>
<li>
<p><a id="VUID-vkCmdDispatchIndirect-storageBuffers-06936" href="#VUID-vkCmdDispatchIndirect-storageBuffers-06936"></a> <span class="vuid">VUID-vkCmdDispatchIndirect-storageBuffers-06936</span><br>

If any stage of the <a href="pipelines.html#VkPipeline" class="xref page">VkPipeline</a> object bound to the pipeline bind
point used by this command accesses a storage buffer, and that stage was
created without enabling either
<code>VK_PIPELINE_ROBUSTNESS_BUFFER_BEHAVIOR_ROBUST_BUFFER_ACCESS_EXT</code> or
<code>VK_PIPELINE_ROBUSTNESS_BUFFER_BEHAVIOR_ROBUST_BUFFER_ACCESS_2_EXT</code>
for <code>storageBuffers</code>, and the <a href="features.html#features-robustBufferAccess" class="xref page">    <code>robustBufferAccess</code></a> feature is not enabled, that stage <strong>must</strong> not
access values outside of the range of the buffer as specified in the
descriptor set bound to the same pipeline bind point</p>
</li>
<li>
<p><a id="VUID-vkCmdDispatchIndirect-None-08613" href="#VUID-vkCmdDispatchIndirect-None-08613"></a> <span class="vuid">VUID-vkCmdDispatchIndirect-None-08613</span><br>

If the <a href="features.html#features-robustBufferAccess" class="xref page"><code>robustBufferAccess</code></a> feature
is not enabled, and any <a href="shaders.html#VkShaderEXT" class="xref page">VkShaderEXT</a> bound to a stage corresponding
to the pipeline bind point used by this command accesses a storage
buffer, it <strong>must</strong> not access values outside of the range of the buffer as
specified in the descriptor set bound to the same pipeline bind point</p>
</li>
<li>
<p><a id="VUID-vkCmdDispatchIndirect-commandBuffer-02707" href="#VUID-vkCmdDispatchIndirect-commandBuffer-02707"></a> <span class="vuid">VUID-vkCmdDispatchIndirect-commandBuffer-02707</span><br>

If <code>commandBuffer</code> is an unprotected command buffer and
<a href="devsandqueues.html#limits-protectedNoFault" class="xref page"><code>protectedNoFault</code></a> is not supported,
any resource accessed by <a href="shaders.html#shaders-binding" class="xref page">bound shaders</a> <strong>must</strong> not be
a protected resource</p>
</li>
<li>
<p><a id="VUID-vkCmdDispatchIndirect-None-06550" href="#VUID-vkCmdDispatchIndirect-None-06550"></a> <span class="vuid">VUID-vkCmdDispatchIndirect-None-06550</span><br>

If <a href="shaders.html#shaders-binding" class="xref page">a bound shader</a> accesses a <a href="samplers.html#VkSampler" class="xref page">VkSampler</a> or
<a href="resources.html#VkImageView" class="xref page">VkImageView</a> object that enables
<a href="samplers.html#samplers-YCbCr-conversion" class="xref page">sampler Y′C<sub>B</sub>C<sub>R</sub> conversion</a>, that object
<strong>must</strong> only be used with <code>OpImageSample*</code> or <code>OpImageSparseSample*</code>
instructions</p>
</li>
<li>
<p><a id="VUID-vkCmdDispatchIndirect-ConstOffset-06551" href="#VUID-vkCmdDispatchIndirect-ConstOffset-06551"></a> <span class="vuid">VUID-vkCmdDispatchIndirect-ConstOffset-06551</span><br>

If <a href="shaders.html#shaders-binding" class="xref page">a bound shader</a> accesses a <a href="samplers.html#VkSampler" class="xref page">VkSampler</a> or
<a href="resources.html#VkImageView" class="xref page">VkImageView</a> object that enables
<a href="samplers.html#samplers-YCbCr-conversion" class="xref page">sampler Y′C<sub>B</sub>C<sub>R</sub> conversion</a>, that object
<strong>must</strong> not use the <code>ConstOffset</code> and <code>Offset</code> operands</p>
</li>
<li>
<p><a id="VUID-vkCmdDispatchIndirect-viewType-07752" href="#VUID-vkCmdDispatchIndirect-viewType-07752"></a> <span class="vuid">VUID-vkCmdDispatchIndirect-viewType-07752</span><br>

If a <a href="resources.html#VkImageView" class="xref page">VkImageView</a> is accessed as a result of this command, then the
image view&#8217;s <code>viewType</code> <strong>must</strong> match the <code>Dim</code> operand of the
<code>OpTypeImage</code> as described in <a href="textures.html#textures-operation-validation" class="xref page">Instruction/Sampler/Image View Validation</a></p>
</li>
<li>
<p><a id="VUID-vkCmdDispatchIndirect-format-07753" href="#VUID-vkCmdDispatchIndirect-format-07753"></a> <span class="vuid">VUID-vkCmdDispatchIndirect-format-07753</span><br>

If a <a href="resources.html#VkImageView" class="xref page">VkImageView</a> is accessed as a result of this command, then the
<a href="formats.html#formats-numericformat" class="xref page">numeric type</a> of the image view&#8217;s <code>format</code>
and the <code>Sampled</code> <code>Type</code> operand of the <code>OpTypeImage</code> <strong>must</strong>
match</p>
</li>
<li>
<p><a id="VUID-vkCmdDispatchIndirect-OpImageWrite-08795" href="#VUID-vkCmdDispatchIndirect-OpImageWrite-08795"></a> <span class="vuid">VUID-vkCmdDispatchIndirect-OpImageWrite-08795</span><br>

If a <a href="resources.html#VkImageView" class="xref page">VkImageView</a>
created with a format other than <code>VK_FORMAT_A8_UNORM_KHR</code>
is accessed using <code>OpImageWrite</code> as a result of this command, then
the <code>Type</code> of the <code>Texel</code> operand of that instruction <strong>must</strong> have
at least as many components as the image view&#8217;s format</p>
</li>
<li>
<p><a id="VUID-vkCmdDispatchIndirect-OpImageWrite-08796" href="#VUID-vkCmdDispatchIndirect-OpImageWrite-08796"></a> <span class="vuid">VUID-vkCmdDispatchIndirect-OpImageWrite-08796</span><br>

If a <a href="resources.html#VkImageView" class="xref page">VkImageView</a> created with the format
<code>VK_FORMAT_A8_UNORM_KHR</code> is accessed using <code>OpImageWrite</code> as a
result of this command, then the <code>Type</code> of the <code>Texel</code> operand of
that instruction <strong>must</strong> have four components</p>
</li>
<li>
<p><a id="VUID-vkCmdDispatchIndirect-OpImageWrite-04469" href="#VUID-vkCmdDispatchIndirect-OpImageWrite-04469"></a> <span class="vuid">VUID-vkCmdDispatchIndirect-OpImageWrite-04469</span><br>

If a <a href="resources.html#VkBufferView" class="xref page">VkBufferView</a> is accessed using <code>OpImageWrite</code> as a result
of this command, then the <code>Type</code> of the <code>Texel</code> operand of that
instruction <strong>must</strong> have at least as many components as the buffer view&#8217;s
format</p>
</li>
<li>
<p><a id="VUID-vkCmdDispatchIndirect-SampledType-04470" href="#VUID-vkCmdDispatchIndirect-SampledType-04470"></a> <span class="vuid">VUID-vkCmdDispatchIndirect-SampledType-04470</span><br>

If a <a href="resources.html#VkImageView" class="xref page">VkImageView</a> with a <a href="formats.html#VkFormat" class="xref page">VkFormat</a> that has a 64-bit component
width is accessed as a result of this command, the <code>SampledType</code> of
the <code>OpTypeImage</code> operand of that instruction <strong>must</strong> have a <code>Width</code>
of 64</p>
</li>
<li>
<p><a id="VUID-vkCmdDispatchIndirect-SampledType-04471" href="#VUID-vkCmdDispatchIndirect-SampledType-04471"></a> <span class="vuid">VUID-vkCmdDispatchIndirect-SampledType-04471</span><br>

If a <a href="resources.html#VkImageView" class="xref page">VkImageView</a> with a <a href="formats.html#VkFormat" class="xref page">VkFormat</a> that has a component width
less than 64-bit is accessed as a result of this command, the
<code>SampledType</code> of the <code>OpTypeImage</code> operand of that instruction
<strong>must</strong> have a <code>Width</code> of 32</p>
</li>
<li>
<p><a id="VUID-vkCmdDispatchIndirect-SampledType-04472" href="#VUID-vkCmdDispatchIndirect-SampledType-04472"></a> <span class="vuid">VUID-vkCmdDispatchIndirect-SampledType-04472</span><br>

If a <a href="resources.html#VkBufferView" class="xref page">VkBufferView</a> with a <a href="formats.html#VkFormat" class="xref page">VkFormat</a> that has a 64-bit
component width is accessed as a result of this command, the
<code>SampledType</code> of the <code>OpTypeImage</code> operand of that instruction
<strong>must</strong> have a <code>Width</code> of 64</p>
</li>
<li>
<p><a id="VUID-vkCmdDispatchIndirect-SampledType-04473" href="#VUID-vkCmdDispatchIndirect-SampledType-04473"></a> <span class="vuid">VUID-vkCmdDispatchIndirect-SampledType-04473</span><br>

If a <a href="resources.html#VkBufferView" class="xref page">VkBufferView</a> with a <a href="formats.html#VkFormat" class="xref page">VkFormat</a> that has a component width
less than 64-bit is accessed as a result of this command, the
<code>SampledType</code> of the <code>OpTypeImage</code> operand of that instruction
<strong>must</strong> have a <code>Width</code> of 32</p>
</li>
<li>
<p><a id="VUID-vkCmdDispatchIndirect-sparseImageInt64Atomics-04474" href="#VUID-vkCmdDispatchIndirect-sparseImageInt64Atomics-04474"></a> <span class="vuid">VUID-vkCmdDispatchIndirect-sparseImageInt64Atomics-04474</span><br>

If the <a href="features.html#features-sparseImageInt64Atomics" class="xref page">    <code>sparseImageInt64Atomics</code></a> feature is not enabled, <a href="resources.html#VkImage" class="xref page">VkImage</a>
objects created with the <code>VK_IMAGE_CREATE_SPARSE_RESIDENCY_BIT</code> flag
<strong>must</strong> not be accessed by atomic instructions through an <code>OpTypeImage</code>
with a <code>SampledType</code> with a <code>Width</code> of 64 by this command</p>
</li>
<li>
<p><a id="VUID-vkCmdDispatchIndirect-sparseImageInt64Atomics-04475" href="#VUID-vkCmdDispatchIndirect-sparseImageInt64Atomics-04475"></a> <span class="vuid">VUID-vkCmdDispatchIndirect-sparseImageInt64Atomics-04475</span><br>

If the <a href="features.html#features-sparseImageInt64Atomics" class="xref page">    <code>sparseImageInt64Atomics</code></a> feature is not enabled, <a href="resources.html#VkBuffer" class="xref page">VkBuffer</a>
objects created with the <code>VK_BUFFER_CREATE_SPARSE_RESIDENCY_BIT</code>
flag <strong>must</strong> not be accessed by atomic instructions through an
<code>OpTypeImage</code> with a <code>SampledType</code> with a <code>Width</code> of 64 by this
command</p>
</li>
<li>
<p><a id="VUID-vkCmdDispatchIndirect-OpImageWeightedSampleQCOM-06971" href="#VUID-vkCmdDispatchIndirect-OpImageWeightedSampleQCOM-06971"></a> <span class="vuid">VUID-vkCmdDispatchIndirect-OpImageWeightedSampleQCOM-06971</span><br>

If <code>OpImageWeightedSampleQCOM</code> is used to sample a <a href="resources.html#VkImageView" class="xref page">VkImageView</a>
as a result of this command, then the image view&#8217;s
<a href="resources.html#resources-image-view-format-features" class="xref page">format features</a> <strong>must</strong> contain
<code>VK_FORMAT_FEATURE_2_WEIGHT_SAMPLED_IMAGE_BIT_QCOM</code></p>
</li>
<li>
<p><a id="VUID-vkCmdDispatchIndirect-OpImageWeightedSampleQCOM-06972" href="#VUID-vkCmdDispatchIndirect-OpImageWeightedSampleQCOM-06972"></a> <span class="vuid">VUID-vkCmdDispatchIndirect-OpImageWeightedSampleQCOM-06972</span><br>

If <code>OpImageWeightedSampleQCOM</code> uses a <a href="resources.html#VkImageView" class="xref page">VkImageView</a> as a sample
weight image as a result of this command, then the image view&#8217;s
<a href="resources.html#resources-image-view-format-features" class="xref page">format features</a> <strong>must</strong> contain
<code>VK_FORMAT_FEATURE_2_WEIGHT_IMAGE_BIT_QCOM</code></p>
</li>
<li>
<p><a id="VUID-vkCmdDispatchIndirect-OpImageBoxFilterQCOM-06973" href="#VUID-vkCmdDispatchIndirect-OpImageBoxFilterQCOM-06973"></a> <span class="vuid">VUID-vkCmdDispatchIndirect-OpImageBoxFilterQCOM-06973</span><br>

If <code>OpImageBoxFilterQCOM</code> is used to sample a <a href="resources.html#VkImageView" class="xref page">VkImageView</a> as a
result of this command, then the image view&#8217;s
<a href="resources.html#resources-image-view-format-features" class="xref page">format features</a> <strong>must</strong> contain
<code>VK_FORMAT_FEATURE_2_BOX_FILTER_SAMPLED_BIT_QCOM</code></p>
</li>
<li>
<p><a id="VUID-vkCmdDispatchIndirect-OpImageBlockMatchSSDQCOM-06974" href="#VUID-vkCmdDispatchIndirect-OpImageBlockMatchSSDQCOM-06974"></a> <span class="vuid">VUID-vkCmdDispatchIndirect-OpImageBlockMatchSSDQCOM-06974</span><br>

If <code>OpImageBlockMatchSSDQCOM</code> is used to read from an
<a href="resources.html#VkImageView" class="xref page">VkImageView</a> as a result of this command, then the image view&#8217;s
<a href="resources.html#resources-image-view-format-features" class="xref page">format features</a> <strong>must</strong> contain
<code>VK_FORMAT_FEATURE_2_BLOCK_MATCHING_BIT_QCOM</code></p>
</li>
<li>
<p><a id="VUID-vkCmdDispatchIndirect-OpImageBlockMatchSADQCOM-06975" href="#VUID-vkCmdDispatchIndirect-OpImageBlockMatchSADQCOM-06975"></a> <span class="vuid">VUID-vkCmdDispatchIndirect-OpImageBlockMatchSADQCOM-06975</span><br>

If <code>OpImageBlockMatchSADQCOM</code> is used to read from an
<a href="resources.html#VkImageView" class="xref page">VkImageView</a> as a result of this command, then the image view&#8217;s
<a href="resources.html#resources-image-view-format-features" class="xref page">format features</a> <strong>must</strong> contain
<code>VK_FORMAT_FEATURE_2_BLOCK_MATCHING_BIT_QCOM</code></p>
</li>
<li>
<p><a id="VUID-vkCmdDispatchIndirect-OpImageBlockMatchSADQCOM-06976" href="#VUID-vkCmdDispatchIndirect-OpImageBlockMatchSADQCOM-06976"></a> <span class="vuid">VUID-vkCmdDispatchIndirect-OpImageBlockMatchSADQCOM-06976</span><br>

If <code>OpImageBlockMatchSADQCOM</code> or OpImageBlockMatchSSDQCOM is used to
read from a reference image as result of this command, then the
specified reference coordinates <strong>must</strong> not fail
<a href="textures.html#textures-integer-coordinate-validation" class="xref page">integer texel coordinate    validation</a></p>
</li>
<li>
<p><a id="VUID-vkCmdDispatchIndirect-OpImageWeightedSampleQCOM-06977" href="#VUID-vkCmdDispatchIndirect-OpImageWeightedSampleQCOM-06977"></a> <span class="vuid">VUID-vkCmdDispatchIndirect-OpImageWeightedSampleQCOM-06977</span><br>

If <code>OpImageWeightedSampleQCOM</code>, <code>OpImageBoxFilterQCOM</code>,
<code>OpImageBlockMatchWindowSSDQCOM</code>,
<code>OpImageBlockMatchWindowSADQCOM</code>,
<code>OpImageBlockMatchGatherSSDQCOM</code>,
<code>OpImageBlockMatchGatherSADQCOM</code>,
<code>OpImageBlockMatchSSDQCOM</code>, or <code>OpImageBlockMatchSADQCOM</code> uses a
<a href="samplers.html#VkSampler" class="xref page">VkSampler</a> as a result of this command, then the sampler <strong>must</strong> have
been created with <code>VK_SAMPLER_CREATE_IMAGE_PROCESSING_BIT_QCOM</code></p>
</li>
<li>
<p><a id="VUID-vkCmdDispatchIndirect-OpImageWeightedSampleQCOM-06978" href="#VUID-vkCmdDispatchIndirect-OpImageWeightedSampleQCOM-06978"></a> <span class="vuid">VUID-vkCmdDispatchIndirect-OpImageWeightedSampleQCOM-06978</span><br>

If any command other than <code>OpImageWeightedSampleQCOM</code>,
<code>OpImageBoxFilterQCOM</code>,
<code>OpImageBlockMatchWindowSSDQCOM</code>,
<code>OpImageBlockMatchWindowSADQCOM</code>,
<code>OpImageBlockMatchGatherSSDQCOM</code>,
<code>OpImageBlockMatchGatherSADQCOM</code>,
<code>OpImageBlockMatchSSDQCOM</code>, or <code>OpImageBlockMatchSADQCOM</code> uses a
<a href="samplers.html#VkSampler" class="xref page">VkSampler</a> as a result of this command, then the sampler <strong>must</strong> not
have been created with <code>VK_SAMPLER_CREATE_IMAGE_PROCESSING_BIT_QCOM</code></p>
</li>
<li>
<p><a id="VUID-vkCmdDispatchIndirect-OpImageBlockMatchWindow-09215" href="#VUID-vkCmdDispatchIndirect-OpImageBlockMatchWindow-09215"></a> <span class="vuid">VUID-vkCmdDispatchIndirect-OpImageBlockMatchWindow-09215</span><br>

If a <code>OpImageBlockMatchWindow*QCOM</code> or
<code>OpImageBlockMatchGather*QCOM</code> instruction is used to read from an
<a href="resources.html#VkImageView" class="xref page">VkImageView</a> as a result of this command, then the image view&#8217;s
<a href="resources.html#resources-image-view-format-features" class="xref page">format features</a> <strong>must</strong> contain
<code>VK_FORMAT_FEATURE_2_BLOCK_MATCHING_BIT_QCOM</code></p>
</li>
<li>
<p><a id="VUID-vkCmdDispatchIndirect-OpImageBlockMatchWindow-09216" href="#VUID-vkCmdDispatchIndirect-OpImageBlockMatchWindow-09216"></a> <span class="vuid">VUID-vkCmdDispatchIndirect-OpImageBlockMatchWindow-09216</span><br>

If a <code>OpImageBlockMatchWindow*QCOM</code> or
<code>OpImageBlockMatchGather*QCOM</code> instruction is used to read from an
<a href="resources.html#VkImageView" class="xref page">VkImageView</a> as a result of this command, then the image view&#8217;s
format <strong>must</strong> be a single-component format.</p>
</li>
<li>
<p><a id="VUID-vkCmdDispatchIndirect-OpImageBlockMatchWindow-09217" href="#VUID-vkCmdDispatchIndirect-OpImageBlockMatchWindow-09217"></a> <span class="vuid">VUID-vkCmdDispatchIndirect-OpImageBlockMatchWindow-09217</span><br>

If a <code>OpImageBlockMatchWindow*QCOM</code> or
<code>OpImageBlockMatchGather*QCOM</code> read from a reference image as result
of this command, then the specified reference coordinates <strong>must</strong> not fail
<a href="textures.html#textures-integer-coordinate-validation" class="xref page">integer texel coordinate    validation</a></p>
</li>
<li>
<p><a id="VUID-vkCmdDispatchIndirect-None-07288" href="#VUID-vkCmdDispatchIndirect-None-07288"></a> <span class="vuid">VUID-vkCmdDispatchIndirect-None-07288</span><br>

Any shader invocation executed by this command <strong>must</strong>
<a href="shaders.html#shaders-termination" class="xref page">terminate</a></p>
</li>
</ul>
</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCmdDispatchIndirect-buffer-02708" href="#VUID-vkCmdDispatchIndirect-buffer-02708"></a> <span class="vuid">VUID-vkCmdDispatchIndirect-buffer-02708</span><br>

If <code>buffer</code> is non-sparse then it <strong>must</strong> be bound completely and
contiguously to a single <code>VkDeviceMemory</code> object</p>
</li>
<li>
<p><a id="VUID-vkCmdDispatchIndirect-buffer-02709" href="#VUID-vkCmdDispatchIndirect-buffer-02709"></a> <span class="vuid">VUID-vkCmdDispatchIndirect-buffer-02709</span><br>

<code>buffer</code> <strong>must</strong> have been created with the
<code>VK_BUFFER_USAGE_INDIRECT_BUFFER_BIT</code> bit set</p>
</li>
<li>
<p><a id="VUID-vkCmdDispatchIndirect-offset-02710" href="#VUID-vkCmdDispatchIndirect-offset-02710"></a> <span class="vuid">VUID-vkCmdDispatchIndirect-offset-02710</span><br>

<code>offset</code> <strong>must</strong> be a multiple of <code>4</code></p>
</li>
<li>
<p><a id="VUID-vkCmdDispatchIndirect-commandBuffer-02711" href="#VUID-vkCmdDispatchIndirect-commandBuffer-02711"></a> <span class="vuid">VUID-vkCmdDispatchIndirect-commandBuffer-02711</span><br>

<code>commandBuffer</code> <strong>must</strong> not be a protected command buffer</p>
</li>
<li>
<p><a id="VUID-vkCmdDispatchIndirect-offset-00407" href="#VUID-vkCmdDispatchIndirect-offset-00407"></a> <span class="vuid">VUID-vkCmdDispatchIndirect-offset-00407</span><br>

The sum of <code>offset</code> and the size of <code>VkDispatchIndirectCommand</code>
<strong>must</strong> be less than or equal to the size of <code>buffer</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCmdDispatchIndirect-commandBuffer-parameter" href="#VUID-vkCmdDispatchIndirect-commandBuffer-parameter"></a> <span class="vuid">VUID-vkCmdDispatchIndirect-commandBuffer-parameter</span><br>
 <code>commandBuffer</code> <strong>must</strong> be a valid <a href="cmdbuffers.html#VkCommandBuffer" class="xref page">VkCommandBuffer</a> handle</p>
</li>
<li>
<p><a id="VUID-vkCmdDispatchIndirect-buffer-parameter" href="#VUID-vkCmdDispatchIndirect-buffer-parameter"></a> <span class="vuid">VUID-vkCmdDispatchIndirect-buffer-parameter</span><br>
 <code>buffer</code> <strong>must</strong> be a valid <a href="resources.html#VkBuffer" class="xref page">VkBuffer</a> handle</p>
</li>
<li>
<p><a id="VUID-vkCmdDispatchIndirect-commandBuffer-recording" href="#VUID-vkCmdDispatchIndirect-commandBuffer-recording"></a> <span class="vuid">VUID-vkCmdDispatchIndirect-commandBuffer-recording</span><br>
 <code>commandBuffer</code> <strong>must</strong> be in the <a href="cmdbuffers.html#commandbuffers-lifecycle" class="xref page">recording state</a></p>
</li>
<li>
<p><a id="VUID-vkCmdDispatchIndirect-commandBuffer-cmdpool" href="#VUID-vkCmdDispatchIndirect-commandBuffer-cmdpool"></a> <span class="vuid">VUID-vkCmdDispatchIndirect-commandBuffer-cmdpool</span><br>
 The <code>VkCommandPool</code> that <code>commandBuffer</code> was allocated from <strong>must</strong> support compute operations</p>
</li>
<li>
<p><a id="VUID-vkCmdDispatchIndirect-renderpass" href="#VUID-vkCmdDispatchIndirect-renderpass"></a> <span class="vuid">VUID-vkCmdDispatchIndirect-renderpass</span><br>
 This command <strong>must</strong> only be called outside of a render pass instance</p>
</li>
<li>
<p><a id="VUID-vkCmdDispatchIndirect-videocoding" href="#VUID-vkCmdDispatchIndirect-videocoding"></a> <span class="vuid">VUID-vkCmdDispatchIndirect-videocoding</span><br>
 This command <strong>must</strong> only be called outside of a video coding scope</p>
</li>
<li>
<p><a id="VUID-vkCmdDispatchIndirect-commonparent" href="#VUID-vkCmdDispatchIndirect-commonparent"></a> <span class="vuid">VUID-vkCmdDispatchIndirect-commonparent</span><br>
 Both of <code>buffer</code>, and <code>commandBuffer</code> <strong>must</strong> have been created, allocated, or retrieved from the same <a href="devsandqueues.html#VkDevice" class="xref page">VkDevice</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Host Synchronization</div>
<div class="ulist">
<ul>
<li>
<p>Host access to <code>commandBuffer</code> <strong>must</strong> be externally synchronized</p>
</li>
<li>
<p>Host access to the <code>VkCommandPool</code> that <code>commandBuffer</code> was allocated from <strong>must</strong> be externally synchronized</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Command Properties</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><a href="cmdbuffers.html#VkCommandBufferLevel" class="xref page">Command Buffer Levels</a></th>
<th class="tableblock halign-left valign-top"><a href="renderpass.html#vkCmdBeginRenderPass" class="xref page">Render Pass Scope</a></th>
<th class="tableblock halign-left valign-top"><a href="video_extensions.html#vkCmdBeginVideoCodingKHR" class="xref page">Video Coding Scope</a></th>
<th class="tableblock halign-left valign-top"><a href="devsandqueues.html#VkQueueFlagBits" class="xref page">Supported Queue Types</a></th>
<th class="tableblock halign-left valign-top"><a href="fundamentals.html#fundamentals-queueoperation-command-types" class="xref page">Command Type</a></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Primary<br>
Secondary</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Outside</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Outside</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Compute</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Action</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>VkDispatchIndirectCommand</code> structure is defined as:</p>
</div>
<div id="VkDispatchIndirectCommand" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_VERSION_1_0
typedef struct VkDispatchIndirectCommand {
    uint32_t    x;
    uint32_t    y;
    uint32_t    z;
} VkDispatchIndirectCommand;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>x</code> is the number of local workgroups to dispatch in the X
dimension.</p>
</li>
<li>
<p><code>y</code> is the number of local workgroups to dispatch in the Y
dimension.</p>
</li>
<li>
<p><code>z</code> is the number of local workgroups to dispatch in the Z
dimension.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The members of <code>VkDispatchIndirectCommand</code> have the same meaning as the
corresponding parameters of <a href="#vkCmdDispatch">vkCmdDispatch</a>.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkDispatchIndirectCommand-x-00417" href="#VUID-VkDispatchIndirectCommand-x-00417"></a> <span class="vuid">VUID-VkDispatchIndirectCommand-x-00417</span><br>

<code>x</code> <strong>must</strong> be less than or equal to
<code>VkPhysicalDeviceLimits</code>::<code>maxComputeWorkGroupCount</code>[0]</p>
</li>
<li>
<p><a id="VUID-VkDispatchIndirectCommand-y-00418" href="#VUID-VkDispatchIndirectCommand-y-00418"></a> <span class="vuid">VUID-VkDispatchIndirectCommand-y-00418</span><br>

<code>y</code> <strong>must</strong> be less than or equal to
<code>VkPhysicalDeviceLimits</code>::<code>maxComputeWorkGroupCount</code>[1]</p>
</li>
<li>
<p><a id="VUID-VkDispatchIndirectCommand-z-00419" href="#VUID-VkDispatchIndirectCommand-z-00419"></a> <span class="vuid">VUID-VkDispatchIndirectCommand-z-00419</span><br>

<code>z</code> <strong>must</strong> be less than or equal to
<code>VkPhysicalDeviceLimits</code>::<code>maxComputeWorkGroupCount</code>[2]</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>To record a dispatch using non-zero base values for the components of
<code>WorkgroupId</code>, call:</p>
</div>
<div id="vkCmdDispatchBase" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_VERSION_1_1
void vkCmdDispatchBase(
    VkCommandBuffer                             commandBuffer,
    uint32_t                                    baseGroupX,
    uint32_t                                    baseGroupY,
    uint32_t                                    baseGroupZ,
    uint32_t                                    groupCountX,
    uint32_t                                    groupCountY,
    uint32_t                                    groupCountZ);</code></pre>
</div>
</div>
<div class="paragraph">
<p>or the equivalent command</p>
</div>
<div id="vkCmdDispatchBaseKHR" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_KHR_device_group
void vkCmdDispatchBaseKHR(
    VkCommandBuffer                             commandBuffer,
    uint32_t                                    baseGroupX,
    uint32_t                                    baseGroupY,
    uint32_t                                    baseGroupZ,
    uint32_t                                    groupCountX,
    uint32_t                                    groupCountY,
    uint32_t                                    groupCountZ);</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>commandBuffer</code> is the command buffer into which the command will be
recorded.</p>
</li>
<li>
<p><code>baseGroupX</code> is the start value for the X component of
<code>WorkgroupId</code>.</p>
</li>
<li>
<p><code>baseGroupY</code> is the start value for the Y component of
<code>WorkgroupId</code>.</p>
</li>
<li>
<p><code>baseGroupZ</code> is the start value for the Z component of
<code>WorkgroupId</code>.</p>
</li>
<li>
<p><code>groupCountX</code> is the number of local workgroups to dispatch in the X
dimension.</p>
</li>
<li>
<p><code>groupCountY</code> is the number of local workgroups to dispatch in the Y
dimension.</p>
</li>
<li>
<p><code>groupCountZ</code> is the number of local workgroups to dispatch in the Z
dimension.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>When the command is executed, a global workgroup consisting of
<span class="eq"><code>groupCountX</code> × <code>groupCountY</code> × <code>groupCountZ</code></span>
local workgroups is assembled, with <code>WorkgroupId</code> values ranging from
<span class="eq">[<code>baseGroup*</code>, <code>baseGroup*</code> +  <code>groupCount*</code>)</span> in each
component.
<a href="#vkCmdDispatch">vkCmdDispatch</a> is equivalent to
<code>vkCmdDispatchBase(0,0,0,groupCountX,groupCountY,groupCountZ)</code>.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCmdDispatchBase-magFilter-04553" href="#VUID-vkCmdDispatchBase-magFilter-04553"></a> <span class="vuid">VUID-vkCmdDispatchBase-magFilter-04553</span><br>

If a <a href="samplers.html#VkSampler" class="xref page">VkSampler</a> created with <code>magFilter</code> or <code>minFilter</code>
equal to <code>VK_FILTER_LINEAR</code> and <code>compareEnable</code> equal to
<code>VK_FALSE</code> is used to sample a <a href="resources.html#VkImageView" class="xref page">VkImageView</a> as a result of this
command, then the image view&#8217;s
<a href="resources.html#resources-image-view-format-features" class="xref page">format features</a> <strong>must</strong> contain
<code>VK_FORMAT_FEATURE_SAMPLED_IMAGE_FILTER_LINEAR_BIT</code></p>
</li>
<li>
<p><a id="VUID-vkCmdDispatchBase-mipmapMode-04770" href="#VUID-vkCmdDispatchBase-mipmapMode-04770"></a> <span class="vuid">VUID-vkCmdDispatchBase-mipmapMode-04770</span><br>

If a <a href="samplers.html#VkSampler" class="xref page">VkSampler</a> created with <code>mipmapMode</code> equal to
<code>VK_SAMPLER_MIPMAP_MODE_LINEAR</code> and <code>compareEnable</code> equal to
<code>VK_FALSE</code> is used to sample a <a href="resources.html#VkImageView" class="xref page">VkImageView</a> as a result of this
command, then the image view&#8217;s
<a href="resources.html#resources-image-view-format-features" class="xref page">format features</a> <strong>must</strong> contain
<code>VK_FORMAT_FEATURE_SAMPLED_IMAGE_FILTER_LINEAR_BIT</code></p>
</li>
<li>
<p><a id="VUID-vkCmdDispatchBase-None-06479" href="#VUID-vkCmdDispatchBase-None-06479"></a> <span class="vuid">VUID-vkCmdDispatchBase-None-06479</span><br>

If a <a href="resources.html#VkImageView" class="xref page">VkImageView</a> is sampled with
<a href="textures.html#textures-depth-compare-operation" class="xref page">depth comparison</a>, the image view&#8217;s
<a href="resources.html#resources-image-view-format-features" class="xref page">format features</a> <strong>must</strong> contain
<code>VK_FORMAT_FEATURE_2_SAMPLED_IMAGE_DEPTH_COMPARISON_BIT</code></p>
</li>
<li>
<p><a id="VUID-vkCmdDispatchBase-None-02691" href="#VUID-vkCmdDispatchBase-None-02691"></a> <span class="vuid">VUID-vkCmdDispatchBase-None-02691</span><br>

If a <a href="resources.html#VkImageView" class="xref page">VkImageView</a> is accessed using atomic operations as a result
of this command, then the image view&#8217;s
<a href="resources.html#resources-image-view-format-features" class="xref page">format features</a> <strong>must</strong> contain
<code>VK_FORMAT_FEATURE_STORAGE_IMAGE_ATOMIC_BIT</code></p>
</li>
<li>
<p><a id="VUID-vkCmdDispatchBase-None-07888" href="#VUID-vkCmdDispatchBase-None-07888"></a> <span class="vuid">VUID-vkCmdDispatchBase-None-07888</span><br>

If a <code>VK_DESCRIPTOR_TYPE_STORAGE_TEXEL_BUFFER</code> descriptor is
accessed using atomic operations as a result of this command, then the
storage texel buffer&#8217;s <a href="resources.html#resources-buffer-view-format-features" class="xref page">format    features</a> <strong>must</strong> contain
<code>VK_FORMAT_FEATURE_STORAGE_TEXEL_BUFFER_ATOMIC_BIT</code></p>
</li>
<li>
<p><a id="VUID-vkCmdDispatchBase-None-02692" href="#VUID-vkCmdDispatchBase-None-02692"></a> <span class="vuid">VUID-vkCmdDispatchBase-None-02692</span><br>

If a <a href="resources.html#VkImageView" class="xref page">VkImageView</a> is sampled with <code>VK_FILTER_CUBIC_EXT</code> as a
result of this command, then the image view&#8217;s
<a href="resources.html#resources-image-view-format-features" class="xref page">format features</a> <strong>must</strong> contain
<code>VK_FORMAT_FEATURE_SAMPLED_IMAGE_FILTER_CUBIC_BIT_EXT</code></p>
</li>
<li>
<p><a id="VUID-vkCmdDispatchBase-None-02693" href="#VUID-vkCmdDispatchBase-None-02693"></a> <span class="vuid">VUID-vkCmdDispatchBase-None-02693</span><br>

If
the <a href="../appendices/extensions.html#VK_EXT_filter_cubic" class="xref page">VK_EXT_filter_cubic</a> extension is not enabled and
any <a href="resources.html#VkImageView" class="xref page">VkImageView</a> is sampled with <code>VK_FILTER_CUBIC_EXT</code> as a
result of this command, it <strong>must</strong> not have a <a href="resources.html#VkImageViewType" class="xref page">VkImageViewType</a> of
<code>VK_IMAGE_VIEW_TYPE_3D</code>, <code>VK_IMAGE_VIEW_TYPE_CUBE</code>, or
<code>VK_IMAGE_VIEW_TYPE_CUBE_ARRAY</code></p>
</li>
<li>
<p><a id="VUID-vkCmdDispatchBase-filterCubic-02694" href="#VUID-vkCmdDispatchBase-filterCubic-02694"></a> <span class="vuid">VUID-vkCmdDispatchBase-filterCubic-02694</span><br>

Any <a href="resources.html#VkImageView" class="xref page">VkImageView</a> being sampled with <code>VK_FILTER_CUBIC_EXT</code> as a
result of this command <strong>must</strong> have a <a href="resources.html#VkImageViewType" class="xref page">VkImageViewType</a> and format
that supports cubic filtering, as specified by
<a href="capabilities.html#VkFilterCubicImageViewImageFormatPropertiesEXT" class="xref page">VkFilterCubicImageViewImageFormatPropertiesEXT</a>::<code>filterCubic</code>
returned by <a href="capabilities.html#vkGetPhysicalDeviceImageFormatProperties2" class="xref page">vkGetPhysicalDeviceImageFormatProperties2</a></p>
</li>
<li>
<p><a id="VUID-vkCmdDispatchBase-filterCubicMinmax-02695" href="#VUID-vkCmdDispatchBase-filterCubicMinmax-02695"></a> <span class="vuid">VUID-vkCmdDispatchBase-filterCubicMinmax-02695</span><br>

Any <a href="resources.html#VkImageView" class="xref page">VkImageView</a> being sampled with <code>VK_FILTER_CUBIC_EXT</code> with
a reduction mode of either <code>VK_SAMPLER_REDUCTION_MODE_MIN</code> or
<code>VK_SAMPLER_REDUCTION_MODE_MAX</code> as a result of this command <strong>must</strong>
have a <a href="resources.html#VkImageViewType" class="xref page">VkImageViewType</a> and format that supports cubic filtering
together with minmax filtering, as specified by
<a href="capabilities.html#VkFilterCubicImageViewImageFormatPropertiesEXT" class="xref page">VkFilterCubicImageViewImageFormatPropertiesEXT</a>::<code>filterCubicMinmax</code>
returned by <a href="capabilities.html#vkGetPhysicalDeviceImageFormatProperties2" class="xref page">vkGetPhysicalDeviceImageFormatProperties2</a></p>
</li>
<li>
<p><a id="VUID-vkCmdDispatchBase-cubicRangeClamp-09212" href="#VUID-vkCmdDispatchBase-cubicRangeClamp-09212"></a> <span class="vuid">VUID-vkCmdDispatchBase-cubicRangeClamp-09212</span><br>

If the <a href="features.html#features-filter-cubic-range-clamp" class="xref page"><code>cubicRangeClamp</code></a>
feature is not enabled, then any <a href="resources.html#VkImageView" class="xref page">VkImageView</a> being sampled with
<code>VK_FILTER_CUBIC_EXT</code> as a result of this command
<strong>must</strong> not have a
<a href="samplers.html#VkSamplerReductionModeCreateInfo" class="xref page">VkSamplerReductionModeCreateInfo</a>::<code>reductionMode</code> equal to
<code>VK_SAMPLER_REDUCTION_MODE_WEIGHTED_AVERAGE_RANGECLAMP_QCOM</code></p>
</li>
<li>
<p><a id="VUID-vkCmdDispatchBase-reductionMode-09213" href="#VUID-vkCmdDispatchBase-reductionMode-09213"></a> <span class="vuid">VUID-vkCmdDispatchBase-reductionMode-09213</span><br>

Any <a href="resources.html#VkImageView" class="xref page">VkImageView</a> being sampled with a
<a href="samplers.html#VkSamplerReductionModeCreateInfo" class="xref page">VkSamplerReductionModeCreateInfo</a>::<code>reductionMode</code> equal to
<code>VK_SAMPLER_REDUCTION_MODE_WEIGHTED_AVERAGE_RANGECLAMP_QCOM</code> as a
result of this command <strong>must</strong> sample with <code>VK_FILTER_CUBIC_EXT</code></p>
</li>
<li>
<p><a id="VUID-vkCmdDispatchBase-selectableCubicWeights-09214" href="#VUID-vkCmdDispatchBase-selectableCubicWeights-09214"></a> <span class="vuid">VUID-vkCmdDispatchBase-selectableCubicWeights-09214</span><br>

If the <a href="features.html#features-filter-cubic-weight-selection" class="xref page">    <code>selectableCubicWeights</code></a> feature is not enabled, then any
<a href="resources.html#VkImageView" class="xref page">VkImageView</a> being sampled with <code>VK_FILTER_CUBIC_EXT</code> as a
result of this command <strong>must</strong> have
<a href="samplers.html#VkSamplerCubicWeightsCreateInfoQCOM" class="xref page">VkSamplerCubicWeightsCreateInfoQCOM</a>::<code>cubicWeights</code> equal to
<code>VK_CUBIC_FILTER_WEIGHTS_CATMULL_ROM_QCOM</code></p>
</li>
<li>
<p><a id="VUID-vkCmdDispatchBase-flags-02696" href="#VUID-vkCmdDispatchBase-flags-02696"></a> <span class="vuid">VUID-vkCmdDispatchBase-flags-02696</span><br>

Any <a href="resources.html#VkImage" class="xref page">VkImage</a> created with a <a href="resources.html#VkImageCreateInfo" class="xref page">VkImageCreateInfo</a>::<code>flags</code>
containing <code>VK_IMAGE_CREATE_CORNER_SAMPLED_BIT_NV</code> sampled as a
result of this command <strong>must</strong> only be sampled using a
<a href="samplers.html#VkSamplerAddressMode" class="xref page">VkSamplerAddressMode</a> of
<code>VK_SAMPLER_ADDRESS_MODE_CLAMP_TO_EDGE</code></p>
</li>
<li>
<p><a id="VUID-vkCmdDispatchBase-OpTypeImage-07027" href="#VUID-vkCmdDispatchBase-OpTypeImage-07027"></a> <span class="vuid">VUID-vkCmdDispatchBase-OpTypeImage-07027</span><br>

For any <a href="resources.html#VkImageView" class="xref page">VkImageView</a> being written as a storage image where the
image format field of the <code>OpTypeImage</code> is <code>Unknown</code>, the view&#8217;s
<a href="resources.html#resources-image-view-format-features" class="xref page">format features</a> <strong>must</strong> contain
<code>VK_FORMAT_FEATURE_2_STORAGE_WRITE_WITHOUT_FORMAT_BIT</code></p>
</li>
<li>
<p><a id="VUID-vkCmdDispatchBase-OpTypeImage-07028" href="#VUID-vkCmdDispatchBase-OpTypeImage-07028"></a> <span class="vuid">VUID-vkCmdDispatchBase-OpTypeImage-07028</span><br>

For any <a href="resources.html#VkImageView" class="xref page">VkImageView</a> being read as a storage image where the image
format field of the <code>OpTypeImage</code> is <code>Unknown</code>, the view&#8217;s
<a href="resources.html#resources-image-view-format-features" class="xref page">format features</a> <strong>must</strong> contain
<code>VK_FORMAT_FEATURE_2_STORAGE_READ_WITHOUT_FORMAT_BIT</code></p>
</li>
<li>
<p><a id="VUID-vkCmdDispatchBase-OpTypeImage-07029" href="#VUID-vkCmdDispatchBase-OpTypeImage-07029"></a> <span class="vuid">VUID-vkCmdDispatchBase-OpTypeImage-07029</span><br>

For any <a href="resources.html#VkBufferView" class="xref page">VkBufferView</a> being written as a storage texel buffer where
the image format field of the <code>OpTypeImage</code> is <code>Unknown</code>, the
view&#8217;s <a href="formats.html#VkFormatProperties3" class="xref page">buffer features</a> <strong>must</strong> contain
<code>VK_FORMAT_FEATURE_2_STORAGE_WRITE_WITHOUT_FORMAT_BIT</code></p>
</li>
<li>
<p><a id="VUID-vkCmdDispatchBase-OpTypeImage-07030" href="#VUID-vkCmdDispatchBase-OpTypeImage-07030"></a> <span class="vuid">VUID-vkCmdDispatchBase-OpTypeImage-07030</span><br>

Any <a href="resources.html#VkBufferView" class="xref page">VkBufferView</a> being read as a storage texel buffer where the
image format field of the <code>OpTypeImage</code> is <code>Unknown</code> then the
view&#8217;s <a href="formats.html#VkFormatProperties3" class="xref page">buffer features</a> <strong>must</strong> contain
<code>VK_FORMAT_FEATURE_2_STORAGE_READ_WITHOUT_FORMAT_BIT</code></p>
</li>
<li>
<p><a id="VUID-vkCmdDispatchBase-None-08600" href="#VUID-vkCmdDispatchBase-None-08600"></a> <span class="vuid">VUID-vkCmdDispatchBase-None-08600</span><br>

For each set <em>n</em> that is statically used by <a href="shaders.html#shaders-binding" class="xref page">a bound    shader</a>, a descriptor set <strong>must</strong> have been bound to <em>n</em> at the same
pipeline bind point, with a <a href="descriptorsets.html#VkPipelineLayout" class="xref page">VkPipelineLayout</a> that is compatible
for set <em>n</em>, with the <a href="descriptorsets.html#VkPipelineLayout" class="xref page">VkPipelineLayout</a> or
<a href="descriptorsets.html#VkDescriptorSetLayout" class="xref page">VkDescriptorSetLayout</a> array that was used to create the current
<a href="pipelines.html#VkPipeline" class="xref page">VkPipeline</a> or <a href="shaders.html#VkShaderEXT" class="xref page">VkShaderEXT</a>, as described in
<a href="descriptorsets.html#descriptorsets-compatibility" class="xref page">Pipeline Layout Compatibility</a></p>
</li>
<li>
<p><a id="VUID-vkCmdDispatchBase-None-08601" href="#VUID-vkCmdDispatchBase-None-08601"></a> <span class="vuid">VUID-vkCmdDispatchBase-None-08601</span><br>

For each push constant that is statically used by <a href="shaders.html#shaders-binding" class="xref page">a    bound shader</a>, a push constant value <strong>must</strong> have been set for the same
pipeline bind point, with a <a href="descriptorsets.html#VkPipelineLayout" class="xref page">VkPipelineLayout</a> that is compatible
for push constants, with the <a href="descriptorsets.html#VkPipelineLayout" class="xref page">VkPipelineLayout</a> or
<a href="descriptorsets.html#VkDescriptorSetLayout" class="xref page">VkDescriptorSetLayout</a> and <a href="descriptorsets.html#VkPushConstantRange" class="xref page">VkPushConstantRange</a> arrays used to
create the current <a href="pipelines.html#VkPipeline" class="xref page">VkPipeline</a> or <a href="shaders.html#VkShaderEXT" class="xref page">VkShaderEXT</a>, as described
in <a href="descriptorsets.html#descriptorsets-compatibility" class="xref page">Pipeline Layout Compatibility</a></p>
</li>
<li>
<p><a id="VUID-vkCmdDispatchBase-maintenance4-08602" href="#VUID-vkCmdDispatchBase-maintenance4-08602"></a> <span class="vuid">VUID-vkCmdDispatchBase-maintenance4-08602</span><br>

If the <a href="features.html#features-maintenance4" class="xref page"><code>maintenance4</code></a> feature is not
enabled, then for each push constant that is statically used by
<a href="shaders.html#shaders-binding" class="xref page">a bound shader</a>, a push constant value <strong>must</strong> have
been set for the same pipeline bind point, with a <a href="descriptorsets.html#VkPipelineLayout" class="xref page">VkPipelineLayout</a>
that is compatible for push constants, with the <a href="descriptorsets.html#VkPipelineLayout" class="xref page">VkPipelineLayout</a>
or <a href="descriptorsets.html#VkDescriptorSetLayout" class="xref page">VkDescriptorSetLayout</a> and <a href="descriptorsets.html#VkPushConstantRange" class="xref page">VkPushConstantRange</a> arrays used
to create the current <a href="pipelines.html#VkPipeline" class="xref page">VkPipeline</a> or <a href="shaders.html#VkShaderEXT" class="xref page">VkShaderEXT</a>, as
described in <a href="descriptorsets.html#descriptorsets-compatibility" class="xref page">Pipeline Layout Compatibility</a></p>
</li>
<li>
<p><a id="VUID-vkCmdDispatchBase-None-08114" href="#VUID-vkCmdDispatchBase-None-08114"></a> <span class="vuid">VUID-vkCmdDispatchBase-None-08114</span><br>

Descriptors in each bound descriptor set, specified via
<a href="descriptorsets.html#vkCmdBindDescriptorSets" class="xref page">vkCmdBindDescriptorSets</a>, <strong>must</strong> be valid if they are statically
used by the <a href="pipelines.html#VkPipeline" class="xref page">VkPipeline</a> bound to the pipeline bind point used by
this command and the bound <a href="pipelines.html#VkPipeline" class="xref page">VkPipeline</a> was not created with
<code>VK_PIPELINE_CREATE_DESCRIPTOR_BUFFER_BIT_EXT</code></p>
</li>
<li>
<p><a id="VUID-vkCmdDispatchBase-None-08115" href="#VUID-vkCmdDispatchBase-None-08115"></a> <span class="vuid">VUID-vkCmdDispatchBase-None-08115</span><br>

If the descriptors used by the <a href="pipelines.html#VkPipeline" class="xref page">VkPipeline</a> bound to the pipeline
bind point were specified via <a href="descriptorsets.html#vkCmdBindDescriptorSets" class="xref page">vkCmdBindDescriptorSets</a>, the bound
<a href="pipelines.html#VkPipeline" class="xref page">VkPipeline</a> <strong>must</strong> have been created without
<code>VK_PIPELINE_CREATE_DESCRIPTOR_BUFFER_BIT_EXT</code></p>
</li>
<li>
<p><a id="VUID-vkCmdDispatchBase-None-08116" href="#VUID-vkCmdDispatchBase-None-08116"></a> <span class="vuid">VUID-vkCmdDispatchBase-None-08116</span><br>

Descriptors in bound descriptor buffers, specified via
<a href="descriptorsets.html#vkCmdSetDescriptorBufferOffsetsEXT" class="xref page">vkCmdSetDescriptorBufferOffsetsEXT</a>, <strong>must</strong> be valid if they are
dynamically used by the <a href="pipelines.html#VkPipeline" class="xref page">VkPipeline</a> bound to the pipeline bind
point used by this command and the bound <a href="pipelines.html#VkPipeline" class="xref page">VkPipeline</a> was created
with <code>VK_PIPELINE_CREATE_DESCRIPTOR_BUFFER_BIT_EXT</code></p>
</li>
<li>
<p><a id="VUID-vkCmdDispatchBase-None-08604" href="#VUID-vkCmdDispatchBase-None-08604"></a> <span class="vuid">VUID-vkCmdDispatchBase-None-08604</span><br>

Descriptors in bound descriptor buffers, specified via
<a href="descriptorsets.html#vkCmdSetDescriptorBufferOffsetsEXT" class="xref page">vkCmdSetDescriptorBufferOffsetsEXT</a>, <strong>must</strong> be valid if they are
dynamically used by any <a href="shaders.html#VkShaderEXT" class="xref page">VkShaderEXT</a> bound to a stage corresponding
to the pipeline bind point used by this command</p>
</li>
<li>
<p><a id="VUID-vkCmdDispatchBase-None-08117" href="#VUID-vkCmdDispatchBase-None-08117"></a> <span class="vuid">VUID-vkCmdDispatchBase-None-08117</span><br>

If the descriptors used by the <a href="pipelines.html#VkPipeline" class="xref page">VkPipeline</a> bound to the pipeline
bind point were specified via <a href="descriptorsets.html#vkCmdSetDescriptorBufferOffsetsEXT" class="xref page">vkCmdSetDescriptorBufferOffsetsEXT</a>,
the bound <a href="pipelines.html#VkPipeline" class="xref page">VkPipeline</a> <strong>must</strong> have been created with
<code>VK_PIPELINE_CREATE_DESCRIPTOR_BUFFER_BIT_EXT</code></p>
</li>
<li>
<p><a id="VUID-vkCmdDispatchBase-None-08119" href="#VUID-vkCmdDispatchBase-None-08119"></a> <span class="vuid">VUID-vkCmdDispatchBase-None-08119</span><br>

If a descriptor is dynamically used with a <a href="pipelines.html#VkPipeline" class="xref page">VkPipeline</a> created with
<code>VK_PIPELINE_CREATE_DESCRIPTOR_BUFFER_BIT_EXT</code>, the descriptor
memory <strong>must</strong> be resident</p>
</li>
<li>
<p><a id="VUID-vkCmdDispatchBase-None-08605" href="#VUID-vkCmdDispatchBase-None-08605"></a> <span class="vuid">VUID-vkCmdDispatchBase-None-08605</span><br>

If a descriptor is dynamically used with a <a href="shaders.html#VkShaderEXT" class="xref page">VkShaderEXT</a> created
with a <code>VkDescriptorSetLayout</code> that was created with
<code>VK_DESCRIPTOR_SET_LAYOUT_CREATE_DESCRIPTOR_BUFFER_BIT_EXT</code>, the
descriptor memory <strong>must</strong> be resident</p>
</li>
<li>
<p><a id="VUID-vkCmdDispatchBase-None-08606" href="#VUID-vkCmdDispatchBase-None-08606"></a> <span class="vuid">VUID-vkCmdDispatchBase-None-08606</span><br>

If the <a href="features.html#features-shaderObject" class="xref page"><code>shaderObject</code></a> feature is not
enabled, a valid pipeline <strong>must</strong> be bound to the pipeline bind point used
by this command</p>
</li>
<li>
<p><a id="VUID-vkCmdDispatchBase-None-08607" href="#VUID-vkCmdDispatchBase-None-08607"></a> <span class="vuid">VUID-vkCmdDispatchBase-None-08607</span><br>

If the <a href="features.html#features-shaderObject" class="xref page"><code>shaderObject</code></a> is enabled, either
a valid pipeline <strong>must</strong> be bound to the pipeline bind point used by this
command, or a valid combination of valid and <a href="../appendices/boilerplate.html#VK_NULL_HANDLE" class="xref page">VK_NULL_HANDLE</a> shader
objects <strong>must</strong> be bound to every supported shader stage corresponding to
the pipeline bind point used by this command</p>
</li>
<li>
<p><a id="VUID-vkCmdDispatchBase-None-08608" href="#VUID-vkCmdDispatchBase-None-08608"></a> <span class="vuid">VUID-vkCmdDispatchBase-None-08608</span><br>

If a pipeline is bound to the pipeline bind point used by this command,
there <strong>must</strong> not have been any calls to dynamic state setting commands
for any state not specified as dynamic in the <a href="pipelines.html#VkPipeline" class="xref page">VkPipeline</a> object
bound to the pipeline bind point used by this command, since that
pipeline was bound</p>
</li>
<li>
<p><a id="VUID-vkCmdDispatchBase-None-08609" href="#VUID-vkCmdDispatchBase-None-08609"></a> <span class="vuid">VUID-vkCmdDispatchBase-None-08609</span><br>

If the <a href="pipelines.html#VkPipeline" class="xref page">VkPipeline</a> object bound to the pipeline bind point used by
this command or any <a href="shaders.html#VkShaderEXT" class="xref page">VkShaderEXT</a> bound to a stage corresponding to
the pipeline bind point used by this command accesses a <a href="samplers.html#VkSampler" class="xref page">VkSampler</a>
object that uses unnormalized coordinates, that sampler <strong>must</strong> not be
used to sample from any <a href="resources.html#VkImage" class="xref page">VkImage</a> with a <a href="resources.html#VkImageView" class="xref page">VkImageView</a> of the
type <code>VK_IMAGE_VIEW_TYPE_3D</code>, <code>VK_IMAGE_VIEW_TYPE_CUBE</code>,
<code>VK_IMAGE_VIEW_TYPE_1D_ARRAY</code>, <code>VK_IMAGE_VIEW_TYPE_2D_ARRAY</code> or
<code>VK_IMAGE_VIEW_TYPE_CUBE_ARRAY</code>, in any shader stage</p>
</li>
<li>
<p><a id="VUID-vkCmdDispatchBase-None-08610" href="#VUID-vkCmdDispatchBase-None-08610"></a> <span class="vuid">VUID-vkCmdDispatchBase-None-08610</span><br>

If the <a href="pipelines.html#VkPipeline" class="xref page">VkPipeline</a> object bound to the pipeline bind point used by
this command or any <a href="shaders.html#VkShaderEXT" class="xref page">VkShaderEXT</a> bound to a stage corresponding to
the pipeline bind point used by this command accesses a <a href="samplers.html#VkSampler" class="xref page">VkSampler</a>
object that uses unnormalized coordinates, that sampler <strong>must</strong> not be
used with any of the SPIR-V <code>OpImageSample*</code> or <code>OpImageSparseSample*</code>
instructions with <code>ImplicitLod</code>, <code>Dref</code> or <code>Proj</code> in their
name, in any shader stage</p>
</li>
<li>
<p><a id="VUID-vkCmdDispatchBase-None-08611" href="#VUID-vkCmdDispatchBase-None-08611"></a> <span class="vuid">VUID-vkCmdDispatchBase-None-08611</span><br>

If the <a href="pipelines.html#VkPipeline" class="xref page">VkPipeline</a> object bound to the pipeline bind point used by
this command or any <a href="shaders.html#VkShaderEXT" class="xref page">VkShaderEXT</a> bound to a stage corresponding to
the pipeline bind point used by this command accesses a <a href="samplers.html#VkSampler" class="xref page">VkSampler</a>
object that uses unnormalized coordinates, that sampler <strong>must</strong> not be
used with any of the SPIR-V <code>OpImageSample*</code> or <code>OpImageSparseSample*</code>
instructions that includes a LOD bias or any offset values, in any
shader stage</p>
</li>
<li>
<p><a id="VUID-vkCmdDispatchBase-uniformBuffers-06935" href="#VUID-vkCmdDispatchBase-uniformBuffers-06935"></a> <span class="vuid">VUID-vkCmdDispatchBase-uniformBuffers-06935</span><br>

If any stage of the <a href="pipelines.html#VkPipeline" class="xref page">VkPipeline</a> object bound to the pipeline bind
point used by this command accesses a uniform buffer, and that stage was
created without enabling either
<code>VK_PIPELINE_ROBUSTNESS_BUFFER_BEHAVIOR_ROBUST_BUFFER_ACCESS_EXT</code> or
<code>VK_PIPELINE_ROBUSTNESS_BUFFER_BEHAVIOR_ROBUST_BUFFER_ACCESS_2_EXT</code>
for <code>uniformBuffers</code>, and the <a href="features.html#features-robustBufferAccess" class="xref page">    <code>robustBufferAccess</code></a> feature is not enabled, that stage <strong>must</strong> not
access values outside of the range of the buffer as specified in the
descriptor set bound to the same pipeline bind point</p>
</li>
<li>
<p><a id="VUID-vkCmdDispatchBase-None-08612" href="#VUID-vkCmdDispatchBase-None-08612"></a> <span class="vuid">VUID-vkCmdDispatchBase-None-08612</span><br>

If the <a href="features.html#features-robustBufferAccess" class="xref page"><code>robustBufferAccess</code></a> feature
is not enabled, and any <a href="shaders.html#VkShaderEXT" class="xref page">VkShaderEXT</a> bound to a stage corresponding
to the pipeline bind point used by this command accesses a uniform
buffer, it <strong>must</strong> not access values outside of the range of the buffer as
specified in the descriptor set bound to the same pipeline bind point</p>
</li>
<li>
<p><a id="VUID-vkCmdDispatchBase-storageBuffers-06936" href="#VUID-vkCmdDispatchBase-storageBuffers-06936"></a> <span class="vuid">VUID-vkCmdDispatchBase-storageBuffers-06936</span><br>

If any stage of the <a href="pipelines.html#VkPipeline" class="xref page">VkPipeline</a> object bound to the pipeline bind
point used by this command accesses a storage buffer, and that stage was
created without enabling either
<code>VK_PIPELINE_ROBUSTNESS_BUFFER_BEHAVIOR_ROBUST_BUFFER_ACCESS_EXT</code> or
<code>VK_PIPELINE_ROBUSTNESS_BUFFER_BEHAVIOR_ROBUST_BUFFER_ACCESS_2_EXT</code>
for <code>storageBuffers</code>, and the <a href="features.html#features-robustBufferAccess" class="xref page">    <code>robustBufferAccess</code></a> feature is not enabled, that stage <strong>must</strong> not
access values outside of the range of the buffer as specified in the
descriptor set bound to the same pipeline bind point</p>
</li>
<li>
<p><a id="VUID-vkCmdDispatchBase-None-08613" href="#VUID-vkCmdDispatchBase-None-08613"></a> <span class="vuid">VUID-vkCmdDispatchBase-None-08613</span><br>

If the <a href="features.html#features-robustBufferAccess" class="xref page"><code>robustBufferAccess</code></a> feature
is not enabled, and any <a href="shaders.html#VkShaderEXT" class="xref page">VkShaderEXT</a> bound to a stage corresponding
to the pipeline bind point used by this command accesses a storage
buffer, it <strong>must</strong> not access values outside of the range of the buffer as
specified in the descriptor set bound to the same pipeline bind point</p>
</li>
<li>
<p><a id="VUID-vkCmdDispatchBase-commandBuffer-02707" href="#VUID-vkCmdDispatchBase-commandBuffer-02707"></a> <span class="vuid">VUID-vkCmdDispatchBase-commandBuffer-02707</span><br>

If <code>commandBuffer</code> is an unprotected command buffer and
<a href="devsandqueues.html#limits-protectedNoFault" class="xref page"><code>protectedNoFault</code></a> is not supported,
any resource accessed by <a href="shaders.html#shaders-binding" class="xref page">bound shaders</a> <strong>must</strong> not be
a protected resource</p>
</li>
<li>
<p><a id="VUID-vkCmdDispatchBase-None-06550" href="#VUID-vkCmdDispatchBase-None-06550"></a> <span class="vuid">VUID-vkCmdDispatchBase-None-06550</span><br>

If <a href="shaders.html#shaders-binding" class="xref page">a bound shader</a> accesses a <a href="samplers.html#VkSampler" class="xref page">VkSampler</a> or
<a href="resources.html#VkImageView" class="xref page">VkImageView</a> object that enables
<a href="samplers.html#samplers-YCbCr-conversion" class="xref page">sampler Y′C<sub>B</sub>C<sub>R</sub> conversion</a>, that object
<strong>must</strong> only be used with <code>OpImageSample*</code> or <code>OpImageSparseSample*</code>
instructions</p>
</li>
<li>
<p><a id="VUID-vkCmdDispatchBase-ConstOffset-06551" href="#VUID-vkCmdDispatchBase-ConstOffset-06551"></a> <span class="vuid">VUID-vkCmdDispatchBase-ConstOffset-06551</span><br>

If <a href="shaders.html#shaders-binding" class="xref page">a bound shader</a> accesses a <a href="samplers.html#VkSampler" class="xref page">VkSampler</a> or
<a href="resources.html#VkImageView" class="xref page">VkImageView</a> object that enables
<a href="samplers.html#samplers-YCbCr-conversion" class="xref page">sampler Y′C<sub>B</sub>C<sub>R</sub> conversion</a>, that object
<strong>must</strong> not use the <code>ConstOffset</code> and <code>Offset</code> operands</p>
</li>
<li>
<p><a id="VUID-vkCmdDispatchBase-viewType-07752" href="#VUID-vkCmdDispatchBase-viewType-07752"></a> <span class="vuid">VUID-vkCmdDispatchBase-viewType-07752</span><br>

If a <a href="resources.html#VkImageView" class="xref page">VkImageView</a> is accessed as a result of this command, then the
image view&#8217;s <code>viewType</code> <strong>must</strong> match the <code>Dim</code> operand of the
<code>OpTypeImage</code> as described in <a href="textures.html#textures-operation-validation" class="xref page">Instruction/Sampler/Image View Validation</a></p>
</li>
<li>
<p><a id="VUID-vkCmdDispatchBase-format-07753" href="#VUID-vkCmdDispatchBase-format-07753"></a> <span class="vuid">VUID-vkCmdDispatchBase-format-07753</span><br>

If a <a href="resources.html#VkImageView" class="xref page">VkImageView</a> is accessed as a result of this command, then the
<a href="formats.html#formats-numericformat" class="xref page">numeric type</a> of the image view&#8217;s <code>format</code>
and the <code>Sampled</code> <code>Type</code> operand of the <code>OpTypeImage</code> <strong>must</strong>
match</p>
</li>
<li>
<p><a id="VUID-vkCmdDispatchBase-OpImageWrite-08795" href="#VUID-vkCmdDispatchBase-OpImageWrite-08795"></a> <span class="vuid">VUID-vkCmdDispatchBase-OpImageWrite-08795</span><br>

If a <a href="resources.html#VkImageView" class="xref page">VkImageView</a>
created with a format other than <code>VK_FORMAT_A8_UNORM_KHR</code>
is accessed using <code>OpImageWrite</code> as a result of this command, then
the <code>Type</code> of the <code>Texel</code> operand of that instruction <strong>must</strong> have
at least as many components as the image view&#8217;s format</p>
</li>
<li>
<p><a id="VUID-vkCmdDispatchBase-OpImageWrite-08796" href="#VUID-vkCmdDispatchBase-OpImageWrite-08796"></a> <span class="vuid">VUID-vkCmdDispatchBase-OpImageWrite-08796</span><br>

If a <a href="resources.html#VkImageView" class="xref page">VkImageView</a> created with the format
<code>VK_FORMAT_A8_UNORM_KHR</code> is accessed using <code>OpImageWrite</code> as a
result of this command, then the <code>Type</code> of the <code>Texel</code> operand of
that instruction <strong>must</strong> have four components</p>
</li>
<li>
<p><a id="VUID-vkCmdDispatchBase-OpImageWrite-04469" href="#VUID-vkCmdDispatchBase-OpImageWrite-04469"></a> <span class="vuid">VUID-vkCmdDispatchBase-OpImageWrite-04469</span><br>

If a <a href="resources.html#VkBufferView" class="xref page">VkBufferView</a> is accessed using <code>OpImageWrite</code> as a result
of this command, then the <code>Type</code> of the <code>Texel</code> operand of that
instruction <strong>must</strong> have at least as many components as the buffer view&#8217;s
format</p>
</li>
<li>
<p><a id="VUID-vkCmdDispatchBase-SampledType-04470" href="#VUID-vkCmdDispatchBase-SampledType-04470"></a> <span class="vuid">VUID-vkCmdDispatchBase-SampledType-04470</span><br>

If a <a href="resources.html#VkImageView" class="xref page">VkImageView</a> with a <a href="formats.html#VkFormat" class="xref page">VkFormat</a> that has a 64-bit component
width is accessed as a result of this command, the <code>SampledType</code> of
the <code>OpTypeImage</code> operand of that instruction <strong>must</strong> have a <code>Width</code>
of 64</p>
</li>
<li>
<p><a id="VUID-vkCmdDispatchBase-SampledType-04471" href="#VUID-vkCmdDispatchBase-SampledType-04471"></a> <span class="vuid">VUID-vkCmdDispatchBase-SampledType-04471</span><br>

If a <a href="resources.html#VkImageView" class="xref page">VkImageView</a> with a <a href="formats.html#VkFormat" class="xref page">VkFormat</a> that has a component width
less than 64-bit is accessed as a result of this command, the
<code>SampledType</code> of the <code>OpTypeImage</code> operand of that instruction
<strong>must</strong> have a <code>Width</code> of 32</p>
</li>
<li>
<p><a id="VUID-vkCmdDispatchBase-SampledType-04472" href="#VUID-vkCmdDispatchBase-SampledType-04472"></a> <span class="vuid">VUID-vkCmdDispatchBase-SampledType-04472</span><br>

If a <a href="resources.html#VkBufferView" class="xref page">VkBufferView</a> with a <a href="formats.html#VkFormat" class="xref page">VkFormat</a> that has a 64-bit
component width is accessed as a result of this command, the
<code>SampledType</code> of the <code>OpTypeImage</code> operand of that instruction
<strong>must</strong> have a <code>Width</code> of 64</p>
</li>
<li>
<p><a id="VUID-vkCmdDispatchBase-SampledType-04473" href="#VUID-vkCmdDispatchBase-SampledType-04473"></a> <span class="vuid">VUID-vkCmdDispatchBase-SampledType-04473</span><br>

If a <a href="resources.html#VkBufferView" class="xref page">VkBufferView</a> with a <a href="formats.html#VkFormat" class="xref page">VkFormat</a> that has a component width
less than 64-bit is accessed as a result of this command, the
<code>SampledType</code> of the <code>OpTypeImage</code> operand of that instruction
<strong>must</strong> have a <code>Width</code> of 32</p>
</li>
<li>
<p><a id="VUID-vkCmdDispatchBase-sparseImageInt64Atomics-04474" href="#VUID-vkCmdDispatchBase-sparseImageInt64Atomics-04474"></a> <span class="vuid">VUID-vkCmdDispatchBase-sparseImageInt64Atomics-04474</span><br>

If the <a href="features.html#features-sparseImageInt64Atomics" class="xref page">    <code>sparseImageInt64Atomics</code></a> feature is not enabled, <a href="resources.html#VkImage" class="xref page">VkImage</a>
objects created with the <code>VK_IMAGE_CREATE_SPARSE_RESIDENCY_BIT</code> flag
<strong>must</strong> not be accessed by atomic instructions through an <code>OpTypeImage</code>
with a <code>SampledType</code> with a <code>Width</code> of 64 by this command</p>
</li>
<li>
<p><a id="VUID-vkCmdDispatchBase-sparseImageInt64Atomics-04475" href="#VUID-vkCmdDispatchBase-sparseImageInt64Atomics-04475"></a> <span class="vuid">VUID-vkCmdDispatchBase-sparseImageInt64Atomics-04475</span><br>

If the <a href="features.html#features-sparseImageInt64Atomics" class="xref page">    <code>sparseImageInt64Atomics</code></a> feature is not enabled, <a href="resources.html#VkBuffer" class="xref page">VkBuffer</a>
objects created with the <code>VK_BUFFER_CREATE_SPARSE_RESIDENCY_BIT</code>
flag <strong>must</strong> not be accessed by atomic instructions through an
<code>OpTypeImage</code> with a <code>SampledType</code> with a <code>Width</code> of 64 by this
command</p>
</li>
<li>
<p><a id="VUID-vkCmdDispatchBase-OpImageWeightedSampleQCOM-06971" href="#VUID-vkCmdDispatchBase-OpImageWeightedSampleQCOM-06971"></a> <span class="vuid">VUID-vkCmdDispatchBase-OpImageWeightedSampleQCOM-06971</span><br>

If <code>OpImageWeightedSampleQCOM</code> is used to sample a <a href="resources.html#VkImageView" class="xref page">VkImageView</a>
as a result of this command, then the image view&#8217;s
<a href="resources.html#resources-image-view-format-features" class="xref page">format features</a> <strong>must</strong> contain
<code>VK_FORMAT_FEATURE_2_WEIGHT_SAMPLED_IMAGE_BIT_QCOM</code></p>
</li>
<li>
<p><a id="VUID-vkCmdDispatchBase-OpImageWeightedSampleQCOM-06972" href="#VUID-vkCmdDispatchBase-OpImageWeightedSampleQCOM-06972"></a> <span class="vuid">VUID-vkCmdDispatchBase-OpImageWeightedSampleQCOM-06972</span><br>

If <code>OpImageWeightedSampleQCOM</code> uses a <a href="resources.html#VkImageView" class="xref page">VkImageView</a> as a sample
weight image as a result of this command, then the image view&#8217;s
<a href="resources.html#resources-image-view-format-features" class="xref page">format features</a> <strong>must</strong> contain
<code>VK_FORMAT_FEATURE_2_WEIGHT_IMAGE_BIT_QCOM</code></p>
</li>
<li>
<p><a id="VUID-vkCmdDispatchBase-OpImageBoxFilterQCOM-06973" href="#VUID-vkCmdDispatchBase-OpImageBoxFilterQCOM-06973"></a> <span class="vuid">VUID-vkCmdDispatchBase-OpImageBoxFilterQCOM-06973</span><br>

If <code>OpImageBoxFilterQCOM</code> is used to sample a <a href="resources.html#VkImageView" class="xref page">VkImageView</a> as a
result of this command, then the image view&#8217;s
<a href="resources.html#resources-image-view-format-features" class="xref page">format features</a> <strong>must</strong> contain
<code>VK_FORMAT_FEATURE_2_BOX_FILTER_SAMPLED_BIT_QCOM</code></p>
</li>
<li>
<p><a id="VUID-vkCmdDispatchBase-OpImageBlockMatchSSDQCOM-06974" href="#VUID-vkCmdDispatchBase-OpImageBlockMatchSSDQCOM-06974"></a> <span class="vuid">VUID-vkCmdDispatchBase-OpImageBlockMatchSSDQCOM-06974</span><br>

If <code>OpImageBlockMatchSSDQCOM</code> is used to read from an
<a href="resources.html#VkImageView" class="xref page">VkImageView</a> as a result of this command, then the image view&#8217;s
<a href="resources.html#resources-image-view-format-features" class="xref page">format features</a> <strong>must</strong> contain
<code>VK_FORMAT_FEATURE_2_BLOCK_MATCHING_BIT_QCOM</code></p>
</li>
<li>
<p><a id="VUID-vkCmdDispatchBase-OpImageBlockMatchSADQCOM-06975" href="#VUID-vkCmdDispatchBase-OpImageBlockMatchSADQCOM-06975"></a> <span class="vuid">VUID-vkCmdDispatchBase-OpImageBlockMatchSADQCOM-06975</span><br>

If <code>OpImageBlockMatchSADQCOM</code> is used to read from an
<a href="resources.html#VkImageView" class="xref page">VkImageView</a> as a result of this command, then the image view&#8217;s
<a href="resources.html#resources-image-view-format-features" class="xref page">format features</a> <strong>must</strong> contain
<code>VK_FORMAT_FEATURE_2_BLOCK_MATCHING_BIT_QCOM</code></p>
</li>
<li>
<p><a id="VUID-vkCmdDispatchBase-OpImageBlockMatchSADQCOM-06976" href="#VUID-vkCmdDispatchBase-OpImageBlockMatchSADQCOM-06976"></a> <span class="vuid">VUID-vkCmdDispatchBase-OpImageBlockMatchSADQCOM-06976</span><br>

If <code>OpImageBlockMatchSADQCOM</code> or OpImageBlockMatchSSDQCOM is used to
read from a reference image as result of this command, then the
specified reference coordinates <strong>must</strong> not fail
<a href="textures.html#textures-integer-coordinate-validation" class="xref page">integer texel coordinate    validation</a></p>
</li>
<li>
<p><a id="VUID-vkCmdDispatchBase-OpImageWeightedSampleQCOM-06977" href="#VUID-vkCmdDispatchBase-OpImageWeightedSampleQCOM-06977"></a> <span class="vuid">VUID-vkCmdDispatchBase-OpImageWeightedSampleQCOM-06977</span><br>

If <code>OpImageWeightedSampleQCOM</code>, <code>OpImageBoxFilterQCOM</code>,
<code>OpImageBlockMatchWindowSSDQCOM</code>,
<code>OpImageBlockMatchWindowSADQCOM</code>,
<code>OpImageBlockMatchGatherSSDQCOM</code>,
<code>OpImageBlockMatchGatherSADQCOM</code>,
<code>OpImageBlockMatchSSDQCOM</code>, or <code>OpImageBlockMatchSADQCOM</code> uses a
<a href="samplers.html#VkSampler" class="xref page">VkSampler</a> as a result of this command, then the sampler <strong>must</strong> have
been created with <code>VK_SAMPLER_CREATE_IMAGE_PROCESSING_BIT_QCOM</code></p>
</li>
<li>
<p><a id="VUID-vkCmdDispatchBase-OpImageWeightedSampleQCOM-06978" href="#VUID-vkCmdDispatchBase-OpImageWeightedSampleQCOM-06978"></a> <span class="vuid">VUID-vkCmdDispatchBase-OpImageWeightedSampleQCOM-06978</span><br>

If any command other than <code>OpImageWeightedSampleQCOM</code>,
<code>OpImageBoxFilterQCOM</code>,
<code>OpImageBlockMatchWindowSSDQCOM</code>,
<code>OpImageBlockMatchWindowSADQCOM</code>,
<code>OpImageBlockMatchGatherSSDQCOM</code>,
<code>OpImageBlockMatchGatherSADQCOM</code>,
<code>OpImageBlockMatchSSDQCOM</code>, or <code>OpImageBlockMatchSADQCOM</code> uses a
<a href="samplers.html#VkSampler" class="xref page">VkSampler</a> as a result of this command, then the sampler <strong>must</strong> not
have been created with <code>VK_SAMPLER_CREATE_IMAGE_PROCESSING_BIT_QCOM</code></p>
</li>
<li>
<p><a id="VUID-vkCmdDispatchBase-OpImageBlockMatchWindow-09215" href="#VUID-vkCmdDispatchBase-OpImageBlockMatchWindow-09215"></a> <span class="vuid">VUID-vkCmdDispatchBase-OpImageBlockMatchWindow-09215</span><br>

If a <code>OpImageBlockMatchWindow*QCOM</code> or
<code>OpImageBlockMatchGather*QCOM</code> instruction is used to read from an
<a href="resources.html#VkImageView" class="xref page">VkImageView</a> as a result of this command, then the image view&#8217;s
<a href="resources.html#resources-image-view-format-features" class="xref page">format features</a> <strong>must</strong> contain
<code>VK_FORMAT_FEATURE_2_BLOCK_MATCHING_BIT_QCOM</code></p>
</li>
<li>
<p><a id="VUID-vkCmdDispatchBase-OpImageBlockMatchWindow-09216" href="#VUID-vkCmdDispatchBase-OpImageBlockMatchWindow-09216"></a> <span class="vuid">VUID-vkCmdDispatchBase-OpImageBlockMatchWindow-09216</span><br>

If a <code>OpImageBlockMatchWindow*QCOM</code> or
<code>OpImageBlockMatchGather*QCOM</code> instruction is used to read from an
<a href="resources.html#VkImageView" class="xref page">VkImageView</a> as a result of this command, then the image view&#8217;s
format <strong>must</strong> be a single-component format.</p>
</li>
<li>
<p><a id="VUID-vkCmdDispatchBase-OpImageBlockMatchWindow-09217" href="#VUID-vkCmdDispatchBase-OpImageBlockMatchWindow-09217"></a> <span class="vuid">VUID-vkCmdDispatchBase-OpImageBlockMatchWindow-09217</span><br>

If a <code>OpImageBlockMatchWindow*QCOM</code> or
<code>OpImageBlockMatchGather*QCOM</code> read from a reference image as result
of this command, then the specified reference coordinates <strong>must</strong> not fail
<a href="textures.html#textures-integer-coordinate-validation" class="xref page">integer texel coordinate    validation</a></p>
</li>
<li>
<p><a id="VUID-vkCmdDispatchBase-None-07288" href="#VUID-vkCmdDispatchBase-None-07288"></a> <span class="vuid">VUID-vkCmdDispatchBase-None-07288</span><br>

Any shader invocation executed by this command <strong>must</strong>
<a href="shaders.html#shaders-termination" class="xref page">terminate</a></p>
</li>
</ul>
</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCmdDispatchBase-commandBuffer-02712" href="#VUID-vkCmdDispatchBase-commandBuffer-02712"></a> <span class="vuid">VUID-vkCmdDispatchBase-commandBuffer-02712</span><br>

If <code>commandBuffer</code> is a protected command buffer and
<a href="devsandqueues.html#limits-protectedNoFault" class="xref page"><code>protectedNoFault</code></a> is not supported,
any resource written to by the <code>VkPipeline</code> object bound to the
pipeline bind point used by this command <strong>must</strong> not be an unprotected
resource</p>
</li>
<li>
<p><a id="VUID-vkCmdDispatchBase-commandBuffer-02713" href="#VUID-vkCmdDispatchBase-commandBuffer-02713"></a> <span class="vuid">VUID-vkCmdDispatchBase-commandBuffer-02713</span><br>

If <code>commandBuffer</code> is a protected command buffer and
<a href="devsandqueues.html#limits-protectedNoFault" class="xref page"><code>protectedNoFault</code></a> is not supported,
pipeline stages other than the framebuffer-space and compute stages in
the <code>VkPipeline</code> object bound to the pipeline bind point used by
this command <strong>must</strong> not write to any resource</p>
</li>
<li>
<p><a id="VUID-vkCmdDispatchBase-commandBuffer-04617" href="#VUID-vkCmdDispatchBase-commandBuffer-04617"></a> <span class="vuid">VUID-vkCmdDispatchBase-commandBuffer-04617</span><br>

If any of the shader stages of the <code>VkPipeline</code> bound to the
pipeline bind point used by this command uses the
<a href="../appendices/spirvenv.html#spirvenv-capabilities-table-RayQueryKHR" class="xref page"><code>RayQueryKHR</code></a>
capability, then <code>commandBuffer</code> <strong>must</strong> not be a protected command
buffer</p>
</li>
<li>
<p><a id="VUID-vkCmdDispatchBase-baseGroupX-00421" href="#VUID-vkCmdDispatchBase-baseGroupX-00421"></a> <span class="vuid">VUID-vkCmdDispatchBase-baseGroupX-00421</span><br>

<code>baseGroupX</code> <strong>must</strong> be less than
<code>VkPhysicalDeviceLimits</code>::<code>maxComputeWorkGroupCount</code>[0]</p>
</li>
<li>
<p><a id="VUID-vkCmdDispatchBase-baseGroupX-00422" href="#VUID-vkCmdDispatchBase-baseGroupX-00422"></a> <span class="vuid">VUID-vkCmdDispatchBase-baseGroupX-00422</span><br>

<code>baseGroupY</code> <strong>must</strong> be less than
<code>VkPhysicalDeviceLimits</code>::<code>maxComputeWorkGroupCount</code>[1]</p>
</li>
<li>
<p><a id="VUID-vkCmdDispatchBase-baseGroupZ-00423" href="#VUID-vkCmdDispatchBase-baseGroupZ-00423"></a> <span class="vuid">VUID-vkCmdDispatchBase-baseGroupZ-00423</span><br>

<code>baseGroupZ</code> <strong>must</strong> be less than
<code>VkPhysicalDeviceLimits</code>::<code>maxComputeWorkGroupCount</code>[2]</p>
</li>
<li>
<p><a id="VUID-vkCmdDispatchBase-groupCountX-00424" href="#VUID-vkCmdDispatchBase-groupCountX-00424"></a> <span class="vuid">VUID-vkCmdDispatchBase-groupCountX-00424</span><br>

<code>groupCountX</code> <strong>must</strong> be less than or equal to
<code>VkPhysicalDeviceLimits</code>::<code>maxComputeWorkGroupCount</code>[0] minus
<code>baseGroupX</code></p>
</li>
<li>
<p><a id="VUID-vkCmdDispatchBase-groupCountY-00425" href="#VUID-vkCmdDispatchBase-groupCountY-00425"></a> <span class="vuid">VUID-vkCmdDispatchBase-groupCountY-00425</span><br>

<code>groupCountY</code> <strong>must</strong> be less than or equal to
<code>VkPhysicalDeviceLimits</code>::<code>maxComputeWorkGroupCount</code>[1] minus
<code>baseGroupY</code></p>
</li>
<li>
<p><a id="VUID-vkCmdDispatchBase-groupCountZ-00426" href="#VUID-vkCmdDispatchBase-groupCountZ-00426"></a> <span class="vuid">VUID-vkCmdDispatchBase-groupCountZ-00426</span><br>

<code>groupCountZ</code> <strong>must</strong> be less than or equal to
<code>VkPhysicalDeviceLimits</code>::<code>maxComputeWorkGroupCount</code>[2] minus
<code>baseGroupZ</code></p>
</li>
<li>
<p><a id="VUID-vkCmdDispatchBase-baseGroupX-00427" href="#VUID-vkCmdDispatchBase-baseGroupX-00427"></a> <span class="vuid">VUID-vkCmdDispatchBase-baseGroupX-00427</span><br>

If any of <code>baseGroupX</code>, <code>baseGroupY</code>, or <code>baseGroupZ</code> are
not zero, then the bound compute pipeline <strong>must</strong> have been created with
the <code>VK_PIPELINE_CREATE_DISPATCH_BASE</code> flag</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCmdDispatchBase-commandBuffer-parameter" href="#VUID-vkCmdDispatchBase-commandBuffer-parameter"></a> <span class="vuid">VUID-vkCmdDispatchBase-commandBuffer-parameter</span><br>
 <code>commandBuffer</code> <strong>must</strong> be a valid <a href="cmdbuffers.html#VkCommandBuffer" class="xref page">VkCommandBuffer</a> handle</p>
</li>
<li>
<p><a id="VUID-vkCmdDispatchBase-commandBuffer-recording" href="#VUID-vkCmdDispatchBase-commandBuffer-recording"></a> <span class="vuid">VUID-vkCmdDispatchBase-commandBuffer-recording</span><br>
 <code>commandBuffer</code> <strong>must</strong> be in the <a href="cmdbuffers.html#commandbuffers-lifecycle" class="xref page">recording state</a></p>
</li>
<li>
<p><a id="VUID-vkCmdDispatchBase-commandBuffer-cmdpool" href="#VUID-vkCmdDispatchBase-commandBuffer-cmdpool"></a> <span class="vuid">VUID-vkCmdDispatchBase-commandBuffer-cmdpool</span><br>
 The <code>VkCommandPool</code> that <code>commandBuffer</code> was allocated from <strong>must</strong> support compute operations</p>
</li>
<li>
<p><a id="VUID-vkCmdDispatchBase-renderpass" href="#VUID-vkCmdDispatchBase-renderpass"></a> <span class="vuid">VUID-vkCmdDispatchBase-renderpass</span><br>
 This command <strong>must</strong> only be called outside of a render pass instance</p>
</li>
<li>
<p><a id="VUID-vkCmdDispatchBase-videocoding" href="#VUID-vkCmdDispatchBase-videocoding"></a> <span class="vuid">VUID-vkCmdDispatchBase-videocoding</span><br>
 This command <strong>must</strong> only be called outside of a video coding scope</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Host Synchronization</div>
<div class="ulist">
<ul>
<li>
<p>Host access to <code>commandBuffer</code> <strong>must</strong> be externally synchronized</p>
</li>
<li>
<p>Host access to the <code>VkCommandPool</code> that <code>commandBuffer</code> was allocated from <strong>must</strong> be externally synchronized</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Command Properties</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><a href="cmdbuffers.html#VkCommandBufferLevel" class="xref page">Command Buffer Levels</a></th>
<th class="tableblock halign-left valign-top"><a href="renderpass.html#vkCmdBeginRenderPass" class="xref page">Render Pass Scope</a></th>
<th class="tableblock halign-left valign-top"><a href="video_extensions.html#vkCmdBeginVideoCodingKHR" class="xref page">Video Coding Scope</a></th>
<th class="tableblock halign-left valign-top"><a href="devsandqueues.html#VkQueueFlagBits" class="xref page">Supported Queue Types</a></th>
<th class="tableblock halign-left valign-top"><a href="fundamentals.html#fundamentals-queueoperation-command-types" class="xref page">Command Type</a></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Primary<br>
Secondary</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Outside</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Outside</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Compute</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Action</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>A subpass shading dispatches a compute pipeline work with the work dimension
of render area of the calling subpass and work groups are partitioned by
specified work group size.
Subpass operations like subpassLoad and subpassLoadMS are allowed to be
used.</p>
</div>
<div class="paragraph">
<p>To record a subpass shading, call:</p>
</div>
<div id="vkCmdSubpassShadingHUAWEI" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_HUAWEI_subpass_shading
void vkCmdSubpassShadingHUAWEI(
    VkCommandBuffer                             commandBuffer);</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>commandBuffer</code> is the command buffer into which the command will be
recorded.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>When the command is executed, a global workgroup consisting of ceil (render
area size / local workgroup size) local workgroups is assembled.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCmdSubpassShadingHUAWEI-magFilter-04553" href="#VUID-vkCmdSubpassShadingHUAWEI-magFilter-04553"></a> <span class="vuid">VUID-vkCmdSubpassShadingHUAWEI-magFilter-04553</span><br>

If a <a href="samplers.html#VkSampler" class="xref page">VkSampler</a> created with <code>magFilter</code> or <code>minFilter</code>
equal to <code>VK_FILTER_LINEAR</code> and <code>compareEnable</code> equal to
<code>VK_FALSE</code> is used to sample a <a href="resources.html#VkImageView" class="xref page">VkImageView</a> as a result of this
command, then the image view&#8217;s
<a href="resources.html#resources-image-view-format-features" class="xref page">format features</a> <strong>must</strong> contain
<code>VK_FORMAT_FEATURE_SAMPLED_IMAGE_FILTER_LINEAR_BIT</code></p>
</li>
<li>
<p><a id="VUID-vkCmdSubpassShadingHUAWEI-mipmapMode-04770" href="#VUID-vkCmdSubpassShadingHUAWEI-mipmapMode-04770"></a> <span class="vuid">VUID-vkCmdSubpassShadingHUAWEI-mipmapMode-04770</span><br>

If a <a href="samplers.html#VkSampler" class="xref page">VkSampler</a> created with <code>mipmapMode</code> equal to
<code>VK_SAMPLER_MIPMAP_MODE_LINEAR</code> and <code>compareEnable</code> equal to
<code>VK_FALSE</code> is used to sample a <a href="resources.html#VkImageView" class="xref page">VkImageView</a> as a result of this
command, then the image view&#8217;s
<a href="resources.html#resources-image-view-format-features" class="xref page">format features</a> <strong>must</strong> contain
<code>VK_FORMAT_FEATURE_SAMPLED_IMAGE_FILTER_LINEAR_BIT</code></p>
</li>
<li>
<p><a id="VUID-vkCmdSubpassShadingHUAWEI-None-06479" href="#VUID-vkCmdSubpassShadingHUAWEI-None-06479"></a> <span class="vuid">VUID-vkCmdSubpassShadingHUAWEI-None-06479</span><br>

If a <a href="resources.html#VkImageView" class="xref page">VkImageView</a> is sampled with
<a href="textures.html#textures-depth-compare-operation" class="xref page">depth comparison</a>, the image view&#8217;s
<a href="resources.html#resources-image-view-format-features" class="xref page">format features</a> <strong>must</strong> contain
<code>VK_FORMAT_FEATURE_2_SAMPLED_IMAGE_DEPTH_COMPARISON_BIT</code></p>
</li>
<li>
<p><a id="VUID-vkCmdSubpassShadingHUAWEI-None-02691" href="#VUID-vkCmdSubpassShadingHUAWEI-None-02691"></a> <span class="vuid">VUID-vkCmdSubpassShadingHUAWEI-None-02691</span><br>

If a <a href="resources.html#VkImageView" class="xref page">VkImageView</a> is accessed using atomic operations as a result
of this command, then the image view&#8217;s
<a href="resources.html#resources-image-view-format-features" class="xref page">format features</a> <strong>must</strong> contain
<code>VK_FORMAT_FEATURE_STORAGE_IMAGE_ATOMIC_BIT</code></p>
</li>
<li>
<p><a id="VUID-vkCmdSubpassShadingHUAWEI-None-07888" href="#VUID-vkCmdSubpassShadingHUAWEI-None-07888"></a> <span class="vuid">VUID-vkCmdSubpassShadingHUAWEI-None-07888</span><br>

If a <code>VK_DESCRIPTOR_TYPE_STORAGE_TEXEL_BUFFER</code> descriptor is
accessed using atomic operations as a result of this command, then the
storage texel buffer&#8217;s <a href="resources.html#resources-buffer-view-format-features" class="xref page">format    features</a> <strong>must</strong> contain
<code>VK_FORMAT_FEATURE_STORAGE_TEXEL_BUFFER_ATOMIC_BIT</code></p>
</li>
<li>
<p><a id="VUID-vkCmdSubpassShadingHUAWEI-None-02692" href="#VUID-vkCmdSubpassShadingHUAWEI-None-02692"></a> <span class="vuid">VUID-vkCmdSubpassShadingHUAWEI-None-02692</span><br>

If a <a href="resources.html#VkImageView" class="xref page">VkImageView</a> is sampled with <code>VK_FILTER_CUBIC_EXT</code> as a
result of this command, then the image view&#8217;s
<a href="resources.html#resources-image-view-format-features" class="xref page">format features</a> <strong>must</strong> contain
<code>VK_FORMAT_FEATURE_SAMPLED_IMAGE_FILTER_CUBIC_BIT_EXT</code></p>
</li>
<li>
<p><a id="VUID-vkCmdSubpassShadingHUAWEI-None-02693" href="#VUID-vkCmdSubpassShadingHUAWEI-None-02693"></a> <span class="vuid">VUID-vkCmdSubpassShadingHUAWEI-None-02693</span><br>

If
the <a href="../appendices/extensions.html#VK_EXT_filter_cubic" class="xref page">VK_EXT_filter_cubic</a> extension is not enabled and
any <a href="resources.html#VkImageView" class="xref page">VkImageView</a> is sampled with <code>VK_FILTER_CUBIC_EXT</code> as a
result of this command, it <strong>must</strong> not have a <a href="resources.html#VkImageViewType" class="xref page">VkImageViewType</a> of
<code>VK_IMAGE_VIEW_TYPE_3D</code>, <code>VK_IMAGE_VIEW_TYPE_CUBE</code>, or
<code>VK_IMAGE_VIEW_TYPE_CUBE_ARRAY</code></p>
</li>
<li>
<p><a id="VUID-vkCmdSubpassShadingHUAWEI-filterCubic-02694" href="#VUID-vkCmdSubpassShadingHUAWEI-filterCubic-02694"></a> <span class="vuid">VUID-vkCmdSubpassShadingHUAWEI-filterCubic-02694</span><br>

Any <a href="resources.html#VkImageView" class="xref page">VkImageView</a> being sampled with <code>VK_FILTER_CUBIC_EXT</code> as a
result of this command <strong>must</strong> have a <a href="resources.html#VkImageViewType" class="xref page">VkImageViewType</a> and format
that supports cubic filtering, as specified by
<a href="capabilities.html#VkFilterCubicImageViewImageFormatPropertiesEXT" class="xref page">VkFilterCubicImageViewImageFormatPropertiesEXT</a>::<code>filterCubic</code>
returned by <a href="capabilities.html#vkGetPhysicalDeviceImageFormatProperties2" class="xref page">vkGetPhysicalDeviceImageFormatProperties2</a></p>
</li>
<li>
<p><a id="VUID-vkCmdSubpassShadingHUAWEI-filterCubicMinmax-02695" href="#VUID-vkCmdSubpassShadingHUAWEI-filterCubicMinmax-02695"></a> <span class="vuid">VUID-vkCmdSubpassShadingHUAWEI-filterCubicMinmax-02695</span><br>

Any <a href="resources.html#VkImageView" class="xref page">VkImageView</a> being sampled with <code>VK_FILTER_CUBIC_EXT</code> with
a reduction mode of either <code>VK_SAMPLER_REDUCTION_MODE_MIN</code> or
<code>VK_SAMPLER_REDUCTION_MODE_MAX</code> as a result of this command <strong>must</strong>
have a <a href="resources.html#VkImageViewType" class="xref page">VkImageViewType</a> and format that supports cubic filtering
together with minmax filtering, as specified by
<a href="capabilities.html#VkFilterCubicImageViewImageFormatPropertiesEXT" class="xref page">VkFilterCubicImageViewImageFormatPropertiesEXT</a>::<code>filterCubicMinmax</code>
returned by <a href="capabilities.html#vkGetPhysicalDeviceImageFormatProperties2" class="xref page">vkGetPhysicalDeviceImageFormatProperties2</a></p>
</li>
<li>
<p><a id="VUID-vkCmdSubpassShadingHUAWEI-cubicRangeClamp-09212" href="#VUID-vkCmdSubpassShadingHUAWEI-cubicRangeClamp-09212"></a> <span class="vuid">VUID-vkCmdSubpassShadingHUAWEI-cubicRangeClamp-09212</span><br>

If the <a href="features.html#features-filter-cubic-range-clamp" class="xref page"><code>cubicRangeClamp</code></a>
feature is not enabled, then any <a href="resources.html#VkImageView" class="xref page">VkImageView</a> being sampled with
<code>VK_FILTER_CUBIC_EXT</code> as a result of this command
<strong>must</strong> not have a
<a href="samplers.html#VkSamplerReductionModeCreateInfo" class="xref page">VkSamplerReductionModeCreateInfo</a>::<code>reductionMode</code> equal to
<code>VK_SAMPLER_REDUCTION_MODE_WEIGHTED_AVERAGE_RANGECLAMP_QCOM</code></p>
</li>
<li>
<p><a id="VUID-vkCmdSubpassShadingHUAWEI-reductionMode-09213" href="#VUID-vkCmdSubpassShadingHUAWEI-reductionMode-09213"></a> <span class="vuid">VUID-vkCmdSubpassShadingHUAWEI-reductionMode-09213</span><br>

Any <a href="resources.html#VkImageView" class="xref page">VkImageView</a> being sampled with a
<a href="samplers.html#VkSamplerReductionModeCreateInfo" class="xref page">VkSamplerReductionModeCreateInfo</a>::<code>reductionMode</code> equal to
<code>VK_SAMPLER_REDUCTION_MODE_WEIGHTED_AVERAGE_RANGECLAMP_QCOM</code> as a
result of this command <strong>must</strong> sample with <code>VK_FILTER_CUBIC_EXT</code></p>
</li>
<li>
<p><a id="VUID-vkCmdSubpassShadingHUAWEI-selectableCubicWeights-09214" href="#VUID-vkCmdSubpassShadingHUAWEI-selectableCubicWeights-09214"></a> <span class="vuid">VUID-vkCmdSubpassShadingHUAWEI-selectableCubicWeights-09214</span><br>

If the <a href="features.html#features-filter-cubic-weight-selection" class="xref page">    <code>selectableCubicWeights</code></a> feature is not enabled, then any
<a href="resources.html#VkImageView" class="xref page">VkImageView</a> being sampled with <code>VK_FILTER_CUBIC_EXT</code> as a
result of this command <strong>must</strong> have
<a href="samplers.html#VkSamplerCubicWeightsCreateInfoQCOM" class="xref page">VkSamplerCubicWeightsCreateInfoQCOM</a>::<code>cubicWeights</code> equal to
<code>VK_CUBIC_FILTER_WEIGHTS_CATMULL_ROM_QCOM</code></p>
</li>
<li>
<p><a id="VUID-vkCmdSubpassShadingHUAWEI-flags-02696" href="#VUID-vkCmdSubpassShadingHUAWEI-flags-02696"></a> <span class="vuid">VUID-vkCmdSubpassShadingHUAWEI-flags-02696</span><br>

Any <a href="resources.html#VkImage" class="xref page">VkImage</a> created with a <a href="resources.html#VkImageCreateInfo" class="xref page">VkImageCreateInfo</a>::<code>flags</code>
containing <code>VK_IMAGE_CREATE_CORNER_SAMPLED_BIT_NV</code> sampled as a
result of this command <strong>must</strong> only be sampled using a
<a href="samplers.html#VkSamplerAddressMode" class="xref page">VkSamplerAddressMode</a> of
<code>VK_SAMPLER_ADDRESS_MODE_CLAMP_TO_EDGE</code></p>
</li>
<li>
<p><a id="VUID-vkCmdSubpassShadingHUAWEI-OpTypeImage-07027" href="#VUID-vkCmdSubpassShadingHUAWEI-OpTypeImage-07027"></a> <span class="vuid">VUID-vkCmdSubpassShadingHUAWEI-OpTypeImage-07027</span><br>

For any <a href="resources.html#VkImageView" class="xref page">VkImageView</a> being written as a storage image where the
image format field of the <code>OpTypeImage</code> is <code>Unknown</code>, the view&#8217;s
<a href="resources.html#resources-image-view-format-features" class="xref page">format features</a> <strong>must</strong> contain
<code>VK_FORMAT_FEATURE_2_STORAGE_WRITE_WITHOUT_FORMAT_BIT</code></p>
</li>
<li>
<p><a id="VUID-vkCmdSubpassShadingHUAWEI-OpTypeImage-07028" href="#VUID-vkCmdSubpassShadingHUAWEI-OpTypeImage-07028"></a> <span class="vuid">VUID-vkCmdSubpassShadingHUAWEI-OpTypeImage-07028</span><br>

For any <a href="resources.html#VkImageView" class="xref page">VkImageView</a> being read as a storage image where the image
format field of the <code>OpTypeImage</code> is <code>Unknown</code>, the view&#8217;s
<a href="resources.html#resources-image-view-format-features" class="xref page">format features</a> <strong>must</strong> contain
<code>VK_FORMAT_FEATURE_2_STORAGE_READ_WITHOUT_FORMAT_BIT</code></p>
</li>
<li>
<p><a id="VUID-vkCmdSubpassShadingHUAWEI-OpTypeImage-07029" href="#VUID-vkCmdSubpassShadingHUAWEI-OpTypeImage-07029"></a> <span class="vuid">VUID-vkCmdSubpassShadingHUAWEI-OpTypeImage-07029</span><br>

For any <a href="resources.html#VkBufferView" class="xref page">VkBufferView</a> being written as a storage texel buffer where
the image format field of the <code>OpTypeImage</code> is <code>Unknown</code>, the
view&#8217;s <a href="formats.html#VkFormatProperties3" class="xref page">buffer features</a> <strong>must</strong> contain
<code>VK_FORMAT_FEATURE_2_STORAGE_WRITE_WITHOUT_FORMAT_BIT</code></p>
</li>
<li>
<p><a id="VUID-vkCmdSubpassShadingHUAWEI-OpTypeImage-07030" href="#VUID-vkCmdSubpassShadingHUAWEI-OpTypeImage-07030"></a> <span class="vuid">VUID-vkCmdSubpassShadingHUAWEI-OpTypeImage-07030</span><br>

Any <a href="resources.html#VkBufferView" class="xref page">VkBufferView</a> being read as a storage texel buffer where the
image format field of the <code>OpTypeImage</code> is <code>Unknown</code> then the
view&#8217;s <a href="formats.html#VkFormatProperties3" class="xref page">buffer features</a> <strong>must</strong> contain
<code>VK_FORMAT_FEATURE_2_STORAGE_READ_WITHOUT_FORMAT_BIT</code></p>
</li>
<li>
<p><a id="VUID-vkCmdSubpassShadingHUAWEI-None-08600" href="#VUID-vkCmdSubpassShadingHUAWEI-None-08600"></a> <span class="vuid">VUID-vkCmdSubpassShadingHUAWEI-None-08600</span><br>

For each set <em>n</em> that is statically used by <a href="shaders.html#shaders-binding" class="xref page">a bound    shader</a>, a descriptor set <strong>must</strong> have been bound to <em>n</em> at the same
pipeline bind point, with a <a href="descriptorsets.html#VkPipelineLayout" class="xref page">VkPipelineLayout</a> that is compatible
for set <em>n</em>, with the <a href="descriptorsets.html#VkPipelineLayout" class="xref page">VkPipelineLayout</a> or
<a href="descriptorsets.html#VkDescriptorSetLayout" class="xref page">VkDescriptorSetLayout</a> array that was used to create the current
<a href="pipelines.html#VkPipeline" class="xref page">VkPipeline</a> or <a href="shaders.html#VkShaderEXT" class="xref page">VkShaderEXT</a>, as described in
<a href="descriptorsets.html#descriptorsets-compatibility" class="xref page">Pipeline Layout Compatibility</a></p>
</li>
<li>
<p><a id="VUID-vkCmdSubpassShadingHUAWEI-None-08601" href="#VUID-vkCmdSubpassShadingHUAWEI-None-08601"></a> <span class="vuid">VUID-vkCmdSubpassShadingHUAWEI-None-08601</span><br>

For each push constant that is statically used by <a href="shaders.html#shaders-binding" class="xref page">a    bound shader</a>, a push constant value <strong>must</strong> have been set for the same
pipeline bind point, with a <a href="descriptorsets.html#VkPipelineLayout" class="xref page">VkPipelineLayout</a> that is compatible
for push constants, with the <a href="descriptorsets.html#VkPipelineLayout" class="xref page">VkPipelineLayout</a> or
<a href="descriptorsets.html#VkDescriptorSetLayout" class="xref page">VkDescriptorSetLayout</a> and <a href="descriptorsets.html#VkPushConstantRange" class="xref page">VkPushConstantRange</a> arrays used to
create the current <a href="pipelines.html#VkPipeline" class="xref page">VkPipeline</a> or <a href="shaders.html#VkShaderEXT" class="xref page">VkShaderEXT</a>, as described
in <a href="descriptorsets.html#descriptorsets-compatibility" class="xref page">Pipeline Layout Compatibility</a></p>
</li>
<li>
<p><a id="VUID-vkCmdSubpassShadingHUAWEI-maintenance4-08602" href="#VUID-vkCmdSubpassShadingHUAWEI-maintenance4-08602"></a> <span class="vuid">VUID-vkCmdSubpassShadingHUAWEI-maintenance4-08602</span><br>

If the <a href="features.html#features-maintenance4" class="xref page"><code>maintenance4</code></a> feature is not
enabled, then for each push constant that is statically used by
<a href="shaders.html#shaders-binding" class="xref page">a bound shader</a>, a push constant value <strong>must</strong> have
been set for the same pipeline bind point, with a <a href="descriptorsets.html#VkPipelineLayout" class="xref page">VkPipelineLayout</a>
that is compatible for push constants, with the <a href="descriptorsets.html#VkPipelineLayout" class="xref page">VkPipelineLayout</a>
or <a href="descriptorsets.html#VkDescriptorSetLayout" class="xref page">VkDescriptorSetLayout</a> and <a href="descriptorsets.html#VkPushConstantRange" class="xref page">VkPushConstantRange</a> arrays used
to create the current <a href="pipelines.html#VkPipeline" class="xref page">VkPipeline</a> or <a href="shaders.html#VkShaderEXT" class="xref page">VkShaderEXT</a>, as
described in <a href="descriptorsets.html#descriptorsets-compatibility" class="xref page">Pipeline Layout Compatibility</a></p>
</li>
<li>
<p><a id="VUID-vkCmdSubpassShadingHUAWEI-None-08114" href="#VUID-vkCmdSubpassShadingHUAWEI-None-08114"></a> <span class="vuid">VUID-vkCmdSubpassShadingHUAWEI-None-08114</span><br>

Descriptors in each bound descriptor set, specified via
<a href="descriptorsets.html#vkCmdBindDescriptorSets" class="xref page">vkCmdBindDescriptorSets</a>, <strong>must</strong> be valid if they are statically
used by the <a href="pipelines.html#VkPipeline" class="xref page">VkPipeline</a> bound to the pipeline bind point used by
this command and the bound <a href="pipelines.html#VkPipeline" class="xref page">VkPipeline</a> was not created with
<code>VK_PIPELINE_CREATE_DESCRIPTOR_BUFFER_BIT_EXT</code></p>
</li>
<li>
<p><a id="VUID-vkCmdSubpassShadingHUAWEI-None-08115" href="#VUID-vkCmdSubpassShadingHUAWEI-None-08115"></a> <span class="vuid">VUID-vkCmdSubpassShadingHUAWEI-None-08115</span><br>

If the descriptors used by the <a href="pipelines.html#VkPipeline" class="xref page">VkPipeline</a> bound to the pipeline
bind point were specified via <a href="descriptorsets.html#vkCmdBindDescriptorSets" class="xref page">vkCmdBindDescriptorSets</a>, the bound
<a href="pipelines.html#VkPipeline" class="xref page">VkPipeline</a> <strong>must</strong> have been created without
<code>VK_PIPELINE_CREATE_DESCRIPTOR_BUFFER_BIT_EXT</code></p>
</li>
<li>
<p><a id="VUID-vkCmdSubpassShadingHUAWEI-None-08116" href="#VUID-vkCmdSubpassShadingHUAWEI-None-08116"></a> <span class="vuid">VUID-vkCmdSubpassShadingHUAWEI-None-08116</span><br>

Descriptors in bound descriptor buffers, specified via
<a href="descriptorsets.html#vkCmdSetDescriptorBufferOffsetsEXT" class="xref page">vkCmdSetDescriptorBufferOffsetsEXT</a>, <strong>must</strong> be valid if they are
dynamically used by the <a href="pipelines.html#VkPipeline" class="xref page">VkPipeline</a> bound to the pipeline bind
point used by this command and the bound <a href="pipelines.html#VkPipeline" class="xref page">VkPipeline</a> was created
with <code>VK_PIPELINE_CREATE_DESCRIPTOR_BUFFER_BIT_EXT</code></p>
</li>
<li>
<p><a id="VUID-vkCmdSubpassShadingHUAWEI-None-08604" href="#VUID-vkCmdSubpassShadingHUAWEI-None-08604"></a> <span class="vuid">VUID-vkCmdSubpassShadingHUAWEI-None-08604</span><br>

Descriptors in bound descriptor buffers, specified via
<a href="descriptorsets.html#vkCmdSetDescriptorBufferOffsetsEXT" class="xref page">vkCmdSetDescriptorBufferOffsetsEXT</a>, <strong>must</strong> be valid if they are
dynamically used by any <a href="shaders.html#VkShaderEXT" class="xref page">VkShaderEXT</a> bound to a stage corresponding
to the pipeline bind point used by this command</p>
</li>
<li>
<p><a id="VUID-vkCmdSubpassShadingHUAWEI-None-08117" href="#VUID-vkCmdSubpassShadingHUAWEI-None-08117"></a> <span class="vuid">VUID-vkCmdSubpassShadingHUAWEI-None-08117</span><br>

If the descriptors used by the <a href="pipelines.html#VkPipeline" class="xref page">VkPipeline</a> bound to the pipeline
bind point were specified via <a href="descriptorsets.html#vkCmdSetDescriptorBufferOffsetsEXT" class="xref page">vkCmdSetDescriptorBufferOffsetsEXT</a>,
the bound <a href="pipelines.html#VkPipeline" class="xref page">VkPipeline</a> <strong>must</strong> have been created with
<code>VK_PIPELINE_CREATE_DESCRIPTOR_BUFFER_BIT_EXT</code></p>
</li>
<li>
<p><a id="VUID-vkCmdSubpassShadingHUAWEI-None-08119" href="#VUID-vkCmdSubpassShadingHUAWEI-None-08119"></a> <span class="vuid">VUID-vkCmdSubpassShadingHUAWEI-None-08119</span><br>

If a descriptor is dynamically used with a <a href="pipelines.html#VkPipeline" class="xref page">VkPipeline</a> created with
<code>VK_PIPELINE_CREATE_DESCRIPTOR_BUFFER_BIT_EXT</code>, the descriptor
memory <strong>must</strong> be resident</p>
</li>
<li>
<p><a id="VUID-vkCmdSubpassShadingHUAWEI-None-08605" href="#VUID-vkCmdSubpassShadingHUAWEI-None-08605"></a> <span class="vuid">VUID-vkCmdSubpassShadingHUAWEI-None-08605</span><br>

If a descriptor is dynamically used with a <a href="shaders.html#VkShaderEXT" class="xref page">VkShaderEXT</a> created
with a <code>VkDescriptorSetLayout</code> that was created with
<code>VK_DESCRIPTOR_SET_LAYOUT_CREATE_DESCRIPTOR_BUFFER_BIT_EXT</code>, the
descriptor memory <strong>must</strong> be resident</p>
</li>
<li>
<p><a id="VUID-vkCmdSubpassShadingHUAWEI-None-08606" href="#VUID-vkCmdSubpassShadingHUAWEI-None-08606"></a> <span class="vuid">VUID-vkCmdSubpassShadingHUAWEI-None-08606</span><br>

If the <a href="features.html#features-shaderObject" class="xref page"><code>shaderObject</code></a> feature is not
enabled, a valid pipeline <strong>must</strong> be bound to the pipeline bind point used
by this command</p>
</li>
<li>
<p><a id="VUID-vkCmdSubpassShadingHUAWEI-None-08607" href="#VUID-vkCmdSubpassShadingHUAWEI-None-08607"></a> <span class="vuid">VUID-vkCmdSubpassShadingHUAWEI-None-08607</span><br>

If the <a href="features.html#features-shaderObject" class="xref page"><code>shaderObject</code></a> is enabled, either
a valid pipeline <strong>must</strong> be bound to the pipeline bind point used by this
command, or a valid combination of valid and <a href="../appendices/boilerplate.html#VK_NULL_HANDLE" class="xref page">VK_NULL_HANDLE</a> shader
objects <strong>must</strong> be bound to every supported shader stage corresponding to
the pipeline bind point used by this command</p>
</li>
<li>
<p><a id="VUID-vkCmdSubpassShadingHUAWEI-None-08608" href="#VUID-vkCmdSubpassShadingHUAWEI-None-08608"></a> <span class="vuid">VUID-vkCmdSubpassShadingHUAWEI-None-08608</span><br>

If a pipeline is bound to the pipeline bind point used by this command,
there <strong>must</strong> not have been any calls to dynamic state setting commands
for any state not specified as dynamic in the <a href="pipelines.html#VkPipeline" class="xref page">VkPipeline</a> object
bound to the pipeline bind point used by this command, since that
pipeline was bound</p>
</li>
<li>
<p><a id="VUID-vkCmdSubpassShadingHUAWEI-None-08609" href="#VUID-vkCmdSubpassShadingHUAWEI-None-08609"></a> <span class="vuid">VUID-vkCmdSubpassShadingHUAWEI-None-08609</span><br>

If the <a href="pipelines.html#VkPipeline" class="xref page">VkPipeline</a> object bound to the pipeline bind point used by
this command or any <a href="shaders.html#VkShaderEXT" class="xref page">VkShaderEXT</a> bound to a stage corresponding to
the pipeline bind point used by this command accesses a <a href="samplers.html#VkSampler" class="xref page">VkSampler</a>
object that uses unnormalized coordinates, that sampler <strong>must</strong> not be
used to sample from any <a href="resources.html#VkImage" class="xref page">VkImage</a> with a <a href="resources.html#VkImageView" class="xref page">VkImageView</a> of the
type <code>VK_IMAGE_VIEW_TYPE_3D</code>, <code>VK_IMAGE_VIEW_TYPE_CUBE</code>,
<code>VK_IMAGE_VIEW_TYPE_1D_ARRAY</code>, <code>VK_IMAGE_VIEW_TYPE_2D_ARRAY</code> or
<code>VK_IMAGE_VIEW_TYPE_CUBE_ARRAY</code>, in any shader stage</p>
</li>
<li>
<p><a id="VUID-vkCmdSubpassShadingHUAWEI-None-08610" href="#VUID-vkCmdSubpassShadingHUAWEI-None-08610"></a> <span class="vuid">VUID-vkCmdSubpassShadingHUAWEI-None-08610</span><br>

If the <a href="pipelines.html#VkPipeline" class="xref page">VkPipeline</a> object bound to the pipeline bind point used by
this command or any <a href="shaders.html#VkShaderEXT" class="xref page">VkShaderEXT</a> bound to a stage corresponding to
the pipeline bind point used by this command accesses a <a href="samplers.html#VkSampler" class="xref page">VkSampler</a>
object that uses unnormalized coordinates, that sampler <strong>must</strong> not be
used with any of the SPIR-V <code>OpImageSample*</code> or <code>OpImageSparseSample*</code>
instructions with <code>ImplicitLod</code>, <code>Dref</code> or <code>Proj</code> in their
name, in any shader stage</p>
</li>
<li>
<p><a id="VUID-vkCmdSubpassShadingHUAWEI-None-08611" href="#VUID-vkCmdSubpassShadingHUAWEI-None-08611"></a> <span class="vuid">VUID-vkCmdSubpassShadingHUAWEI-None-08611</span><br>

If the <a href="pipelines.html#VkPipeline" class="xref page">VkPipeline</a> object bound to the pipeline bind point used by
this command or any <a href="shaders.html#VkShaderEXT" class="xref page">VkShaderEXT</a> bound to a stage corresponding to
the pipeline bind point used by this command accesses a <a href="samplers.html#VkSampler" class="xref page">VkSampler</a>
object that uses unnormalized coordinates, that sampler <strong>must</strong> not be
used with any of the SPIR-V <code>OpImageSample*</code> or <code>OpImageSparseSample*</code>
instructions that includes a LOD bias or any offset values, in any
shader stage</p>
</li>
<li>
<p><a id="VUID-vkCmdSubpassShadingHUAWEI-uniformBuffers-06935" href="#VUID-vkCmdSubpassShadingHUAWEI-uniformBuffers-06935"></a> <span class="vuid">VUID-vkCmdSubpassShadingHUAWEI-uniformBuffers-06935</span><br>

If any stage of the <a href="pipelines.html#VkPipeline" class="xref page">VkPipeline</a> object bound to the pipeline bind
point used by this command accesses a uniform buffer, and that stage was
created without enabling either
<code>VK_PIPELINE_ROBUSTNESS_BUFFER_BEHAVIOR_ROBUST_BUFFER_ACCESS_EXT</code> or
<code>VK_PIPELINE_ROBUSTNESS_BUFFER_BEHAVIOR_ROBUST_BUFFER_ACCESS_2_EXT</code>
for <code>uniformBuffers</code>, and the <a href="features.html#features-robustBufferAccess" class="xref page">    <code>robustBufferAccess</code></a> feature is not enabled, that stage <strong>must</strong> not
access values outside of the range of the buffer as specified in the
descriptor set bound to the same pipeline bind point</p>
</li>
<li>
<p><a id="VUID-vkCmdSubpassShadingHUAWEI-None-08612" href="#VUID-vkCmdSubpassShadingHUAWEI-None-08612"></a> <span class="vuid">VUID-vkCmdSubpassShadingHUAWEI-None-08612</span><br>

If the <a href="features.html#features-robustBufferAccess" class="xref page"><code>robustBufferAccess</code></a> feature
is not enabled, and any <a href="shaders.html#VkShaderEXT" class="xref page">VkShaderEXT</a> bound to a stage corresponding
to the pipeline bind point used by this command accesses a uniform
buffer, it <strong>must</strong> not access values outside of the range of the buffer as
specified in the descriptor set bound to the same pipeline bind point</p>
</li>
<li>
<p><a id="VUID-vkCmdSubpassShadingHUAWEI-storageBuffers-06936" href="#VUID-vkCmdSubpassShadingHUAWEI-storageBuffers-06936"></a> <span class="vuid">VUID-vkCmdSubpassShadingHUAWEI-storageBuffers-06936</span><br>

If any stage of the <a href="pipelines.html#VkPipeline" class="xref page">VkPipeline</a> object bound to the pipeline bind
point used by this command accesses a storage buffer, and that stage was
created without enabling either
<code>VK_PIPELINE_ROBUSTNESS_BUFFER_BEHAVIOR_ROBUST_BUFFER_ACCESS_EXT</code> or
<code>VK_PIPELINE_ROBUSTNESS_BUFFER_BEHAVIOR_ROBUST_BUFFER_ACCESS_2_EXT</code>
for <code>storageBuffers</code>, and the <a href="features.html#features-robustBufferAccess" class="xref page">    <code>robustBufferAccess</code></a> feature is not enabled, that stage <strong>must</strong> not
access values outside of the range of the buffer as specified in the
descriptor set bound to the same pipeline bind point</p>
</li>
<li>
<p><a id="VUID-vkCmdSubpassShadingHUAWEI-None-08613" href="#VUID-vkCmdSubpassShadingHUAWEI-None-08613"></a> <span class="vuid">VUID-vkCmdSubpassShadingHUAWEI-None-08613</span><br>

If the <a href="features.html#features-robustBufferAccess" class="xref page"><code>robustBufferAccess</code></a> feature
is not enabled, and any <a href="shaders.html#VkShaderEXT" class="xref page">VkShaderEXT</a> bound to a stage corresponding
to the pipeline bind point used by this command accesses a storage
buffer, it <strong>must</strong> not access values outside of the range of the buffer as
specified in the descriptor set bound to the same pipeline bind point</p>
</li>
<li>
<p><a id="VUID-vkCmdSubpassShadingHUAWEI-commandBuffer-02707" href="#VUID-vkCmdSubpassShadingHUAWEI-commandBuffer-02707"></a> <span class="vuid">VUID-vkCmdSubpassShadingHUAWEI-commandBuffer-02707</span><br>

If <code>commandBuffer</code> is an unprotected command buffer and
<a href="devsandqueues.html#limits-protectedNoFault" class="xref page"><code>protectedNoFault</code></a> is not supported,
any resource accessed by <a href="shaders.html#shaders-binding" class="xref page">bound shaders</a> <strong>must</strong> not be
a protected resource</p>
</li>
<li>
<p><a id="VUID-vkCmdSubpassShadingHUAWEI-None-06550" href="#VUID-vkCmdSubpassShadingHUAWEI-None-06550"></a> <span class="vuid">VUID-vkCmdSubpassShadingHUAWEI-None-06550</span><br>

If <a href="shaders.html#shaders-binding" class="xref page">a bound shader</a> accesses a <a href="samplers.html#VkSampler" class="xref page">VkSampler</a> or
<a href="resources.html#VkImageView" class="xref page">VkImageView</a> object that enables
<a href="samplers.html#samplers-YCbCr-conversion" class="xref page">sampler Y′C<sub>B</sub>C<sub>R</sub> conversion</a>, that object
<strong>must</strong> only be used with <code>OpImageSample*</code> or <code>OpImageSparseSample*</code>
instructions</p>
</li>
<li>
<p><a id="VUID-vkCmdSubpassShadingHUAWEI-ConstOffset-06551" href="#VUID-vkCmdSubpassShadingHUAWEI-ConstOffset-06551"></a> <span class="vuid">VUID-vkCmdSubpassShadingHUAWEI-ConstOffset-06551</span><br>

If <a href="shaders.html#shaders-binding" class="xref page">a bound shader</a> accesses a <a href="samplers.html#VkSampler" class="xref page">VkSampler</a> or
<a href="resources.html#VkImageView" class="xref page">VkImageView</a> object that enables
<a href="samplers.html#samplers-YCbCr-conversion" class="xref page">sampler Y′C<sub>B</sub>C<sub>R</sub> conversion</a>, that object
<strong>must</strong> not use the <code>ConstOffset</code> and <code>Offset</code> operands</p>
</li>
<li>
<p><a id="VUID-vkCmdSubpassShadingHUAWEI-viewType-07752" href="#VUID-vkCmdSubpassShadingHUAWEI-viewType-07752"></a> <span class="vuid">VUID-vkCmdSubpassShadingHUAWEI-viewType-07752</span><br>

If a <a href="resources.html#VkImageView" class="xref page">VkImageView</a> is accessed as a result of this command, then the
image view&#8217;s <code>viewType</code> <strong>must</strong> match the <code>Dim</code> operand of the
<code>OpTypeImage</code> as described in <a href="textures.html#textures-operation-validation" class="xref page">Instruction/Sampler/Image View Validation</a></p>
</li>
<li>
<p><a id="VUID-vkCmdSubpassShadingHUAWEI-format-07753" href="#VUID-vkCmdSubpassShadingHUAWEI-format-07753"></a> <span class="vuid">VUID-vkCmdSubpassShadingHUAWEI-format-07753</span><br>

If a <a href="resources.html#VkImageView" class="xref page">VkImageView</a> is accessed as a result of this command, then the
<a href="formats.html#formats-numericformat" class="xref page">numeric type</a> of the image view&#8217;s <code>format</code>
and the <code>Sampled</code> <code>Type</code> operand of the <code>OpTypeImage</code> <strong>must</strong>
match</p>
</li>
<li>
<p><a id="VUID-vkCmdSubpassShadingHUAWEI-OpImageWrite-08795" href="#VUID-vkCmdSubpassShadingHUAWEI-OpImageWrite-08795"></a> <span class="vuid">VUID-vkCmdSubpassShadingHUAWEI-OpImageWrite-08795</span><br>

If a <a href="resources.html#VkImageView" class="xref page">VkImageView</a>
created with a format other than <code>VK_FORMAT_A8_UNORM_KHR</code>
is accessed using <code>OpImageWrite</code> as a result of this command, then
the <code>Type</code> of the <code>Texel</code> operand of that instruction <strong>must</strong> have
at least as many components as the image view&#8217;s format</p>
</li>
<li>
<p><a id="VUID-vkCmdSubpassShadingHUAWEI-OpImageWrite-08796" href="#VUID-vkCmdSubpassShadingHUAWEI-OpImageWrite-08796"></a> <span class="vuid">VUID-vkCmdSubpassShadingHUAWEI-OpImageWrite-08796</span><br>

If a <a href="resources.html#VkImageView" class="xref page">VkImageView</a> created with the format
<code>VK_FORMAT_A8_UNORM_KHR</code> is accessed using <code>OpImageWrite</code> as a
result of this command, then the <code>Type</code> of the <code>Texel</code> operand of
that instruction <strong>must</strong> have four components</p>
</li>
<li>
<p><a id="VUID-vkCmdSubpassShadingHUAWEI-OpImageWrite-04469" href="#VUID-vkCmdSubpassShadingHUAWEI-OpImageWrite-04469"></a> <span class="vuid">VUID-vkCmdSubpassShadingHUAWEI-OpImageWrite-04469</span><br>

If a <a href="resources.html#VkBufferView" class="xref page">VkBufferView</a> is accessed using <code>OpImageWrite</code> as a result
of this command, then the <code>Type</code> of the <code>Texel</code> operand of that
instruction <strong>must</strong> have at least as many components as the buffer view&#8217;s
format</p>
</li>
<li>
<p><a id="VUID-vkCmdSubpassShadingHUAWEI-SampledType-04470" href="#VUID-vkCmdSubpassShadingHUAWEI-SampledType-04470"></a> <span class="vuid">VUID-vkCmdSubpassShadingHUAWEI-SampledType-04470</span><br>

If a <a href="resources.html#VkImageView" class="xref page">VkImageView</a> with a <a href="formats.html#VkFormat" class="xref page">VkFormat</a> that has a 64-bit component
width is accessed as a result of this command, the <code>SampledType</code> of
the <code>OpTypeImage</code> operand of that instruction <strong>must</strong> have a <code>Width</code>
of 64</p>
</li>
<li>
<p><a id="VUID-vkCmdSubpassShadingHUAWEI-SampledType-04471" href="#VUID-vkCmdSubpassShadingHUAWEI-SampledType-04471"></a> <span class="vuid">VUID-vkCmdSubpassShadingHUAWEI-SampledType-04471</span><br>

If a <a href="resources.html#VkImageView" class="xref page">VkImageView</a> with a <a href="formats.html#VkFormat" class="xref page">VkFormat</a> that has a component width
less than 64-bit is accessed as a result of this command, the
<code>SampledType</code> of the <code>OpTypeImage</code> operand of that instruction
<strong>must</strong> have a <code>Width</code> of 32</p>
</li>
<li>
<p><a id="VUID-vkCmdSubpassShadingHUAWEI-SampledType-04472" href="#VUID-vkCmdSubpassShadingHUAWEI-SampledType-04472"></a> <span class="vuid">VUID-vkCmdSubpassShadingHUAWEI-SampledType-04472</span><br>

If a <a href="resources.html#VkBufferView" class="xref page">VkBufferView</a> with a <a href="formats.html#VkFormat" class="xref page">VkFormat</a> that has a 64-bit
component width is accessed as a result of this command, the
<code>SampledType</code> of the <code>OpTypeImage</code> operand of that instruction
<strong>must</strong> have a <code>Width</code> of 64</p>
</li>
<li>
<p><a id="VUID-vkCmdSubpassShadingHUAWEI-SampledType-04473" href="#VUID-vkCmdSubpassShadingHUAWEI-SampledType-04473"></a> <span class="vuid">VUID-vkCmdSubpassShadingHUAWEI-SampledType-04473</span><br>

If a <a href="resources.html#VkBufferView" class="xref page">VkBufferView</a> with a <a href="formats.html#VkFormat" class="xref page">VkFormat</a> that has a component width
less than 64-bit is accessed as a result of this command, the
<code>SampledType</code> of the <code>OpTypeImage</code> operand of that instruction
<strong>must</strong> have a <code>Width</code> of 32</p>
</li>
<li>
<p><a id="VUID-vkCmdSubpassShadingHUAWEI-sparseImageInt64Atomics-04474" href="#VUID-vkCmdSubpassShadingHUAWEI-sparseImageInt64Atomics-04474"></a> <span class="vuid">VUID-vkCmdSubpassShadingHUAWEI-sparseImageInt64Atomics-04474</span><br>

If the <a href="features.html#features-sparseImageInt64Atomics" class="xref page">    <code>sparseImageInt64Atomics</code></a> feature is not enabled, <a href="resources.html#VkImage" class="xref page">VkImage</a>
objects created with the <code>VK_IMAGE_CREATE_SPARSE_RESIDENCY_BIT</code> flag
<strong>must</strong> not be accessed by atomic instructions through an <code>OpTypeImage</code>
with a <code>SampledType</code> with a <code>Width</code> of 64 by this command</p>
</li>
<li>
<p><a id="VUID-vkCmdSubpassShadingHUAWEI-sparseImageInt64Atomics-04475" href="#VUID-vkCmdSubpassShadingHUAWEI-sparseImageInt64Atomics-04475"></a> <span class="vuid">VUID-vkCmdSubpassShadingHUAWEI-sparseImageInt64Atomics-04475</span><br>

If the <a href="features.html#features-sparseImageInt64Atomics" class="xref page">    <code>sparseImageInt64Atomics</code></a> feature is not enabled, <a href="resources.html#VkBuffer" class="xref page">VkBuffer</a>
objects created with the <code>VK_BUFFER_CREATE_SPARSE_RESIDENCY_BIT</code>
flag <strong>must</strong> not be accessed by atomic instructions through an
<code>OpTypeImage</code> with a <code>SampledType</code> with a <code>Width</code> of 64 by this
command</p>
</li>
<li>
<p><a id="VUID-vkCmdSubpassShadingHUAWEI-OpImageWeightedSampleQCOM-06971" href="#VUID-vkCmdSubpassShadingHUAWEI-OpImageWeightedSampleQCOM-06971"></a> <span class="vuid">VUID-vkCmdSubpassShadingHUAWEI-OpImageWeightedSampleQCOM-06971</span><br>

If <code>OpImageWeightedSampleQCOM</code> is used to sample a <a href="resources.html#VkImageView" class="xref page">VkImageView</a>
as a result of this command, then the image view&#8217;s
<a href="resources.html#resources-image-view-format-features" class="xref page">format features</a> <strong>must</strong> contain
<code>VK_FORMAT_FEATURE_2_WEIGHT_SAMPLED_IMAGE_BIT_QCOM</code></p>
</li>
<li>
<p><a id="VUID-vkCmdSubpassShadingHUAWEI-OpImageWeightedSampleQCOM-06972" href="#VUID-vkCmdSubpassShadingHUAWEI-OpImageWeightedSampleQCOM-06972"></a> <span class="vuid">VUID-vkCmdSubpassShadingHUAWEI-OpImageWeightedSampleQCOM-06972</span><br>

If <code>OpImageWeightedSampleQCOM</code> uses a <a href="resources.html#VkImageView" class="xref page">VkImageView</a> as a sample
weight image as a result of this command, then the image view&#8217;s
<a href="resources.html#resources-image-view-format-features" class="xref page">format features</a> <strong>must</strong> contain
<code>VK_FORMAT_FEATURE_2_WEIGHT_IMAGE_BIT_QCOM</code></p>
</li>
<li>
<p><a id="VUID-vkCmdSubpassShadingHUAWEI-OpImageBoxFilterQCOM-06973" href="#VUID-vkCmdSubpassShadingHUAWEI-OpImageBoxFilterQCOM-06973"></a> <span class="vuid">VUID-vkCmdSubpassShadingHUAWEI-OpImageBoxFilterQCOM-06973</span><br>

If <code>OpImageBoxFilterQCOM</code> is used to sample a <a href="resources.html#VkImageView" class="xref page">VkImageView</a> as a
result of this command, then the image view&#8217;s
<a href="resources.html#resources-image-view-format-features" class="xref page">format features</a> <strong>must</strong> contain
<code>VK_FORMAT_FEATURE_2_BOX_FILTER_SAMPLED_BIT_QCOM</code></p>
</li>
<li>
<p><a id="VUID-vkCmdSubpassShadingHUAWEI-OpImageBlockMatchSSDQCOM-06974" href="#VUID-vkCmdSubpassShadingHUAWEI-OpImageBlockMatchSSDQCOM-06974"></a> <span class="vuid">VUID-vkCmdSubpassShadingHUAWEI-OpImageBlockMatchSSDQCOM-06974</span><br>

If <code>OpImageBlockMatchSSDQCOM</code> is used to read from an
<a href="resources.html#VkImageView" class="xref page">VkImageView</a> as a result of this command, then the image view&#8217;s
<a href="resources.html#resources-image-view-format-features" class="xref page">format features</a> <strong>must</strong> contain
<code>VK_FORMAT_FEATURE_2_BLOCK_MATCHING_BIT_QCOM</code></p>
</li>
<li>
<p><a id="VUID-vkCmdSubpassShadingHUAWEI-OpImageBlockMatchSADQCOM-06975" href="#VUID-vkCmdSubpassShadingHUAWEI-OpImageBlockMatchSADQCOM-06975"></a> <span class="vuid">VUID-vkCmdSubpassShadingHUAWEI-OpImageBlockMatchSADQCOM-06975</span><br>

If <code>OpImageBlockMatchSADQCOM</code> is used to read from an
<a href="resources.html#VkImageView" class="xref page">VkImageView</a> as a result of this command, then the image view&#8217;s
<a href="resources.html#resources-image-view-format-features" class="xref page">format features</a> <strong>must</strong> contain
<code>VK_FORMAT_FEATURE_2_BLOCK_MATCHING_BIT_QCOM</code></p>
</li>
<li>
<p><a id="VUID-vkCmdSubpassShadingHUAWEI-OpImageBlockMatchSADQCOM-06976" href="#VUID-vkCmdSubpassShadingHUAWEI-OpImageBlockMatchSADQCOM-06976"></a> <span class="vuid">VUID-vkCmdSubpassShadingHUAWEI-OpImageBlockMatchSADQCOM-06976</span><br>

If <code>OpImageBlockMatchSADQCOM</code> or OpImageBlockMatchSSDQCOM is used to
read from a reference image as result of this command, then the
specified reference coordinates <strong>must</strong> not fail
<a href="textures.html#textures-integer-coordinate-validation" class="xref page">integer texel coordinate    validation</a></p>
</li>
<li>
<p><a id="VUID-vkCmdSubpassShadingHUAWEI-OpImageWeightedSampleQCOM-06977" href="#VUID-vkCmdSubpassShadingHUAWEI-OpImageWeightedSampleQCOM-06977"></a> <span class="vuid">VUID-vkCmdSubpassShadingHUAWEI-OpImageWeightedSampleQCOM-06977</span><br>

If <code>OpImageWeightedSampleQCOM</code>, <code>OpImageBoxFilterQCOM</code>,
<code>OpImageBlockMatchWindowSSDQCOM</code>,
<code>OpImageBlockMatchWindowSADQCOM</code>,
<code>OpImageBlockMatchGatherSSDQCOM</code>,
<code>OpImageBlockMatchGatherSADQCOM</code>,
<code>OpImageBlockMatchSSDQCOM</code>, or <code>OpImageBlockMatchSADQCOM</code> uses a
<a href="samplers.html#VkSampler" class="xref page">VkSampler</a> as a result of this command, then the sampler <strong>must</strong> have
been created with <code>VK_SAMPLER_CREATE_IMAGE_PROCESSING_BIT_QCOM</code></p>
</li>
<li>
<p><a id="VUID-vkCmdSubpassShadingHUAWEI-OpImageWeightedSampleQCOM-06978" href="#VUID-vkCmdSubpassShadingHUAWEI-OpImageWeightedSampleQCOM-06978"></a> <span class="vuid">VUID-vkCmdSubpassShadingHUAWEI-OpImageWeightedSampleQCOM-06978</span><br>

If any command other than <code>OpImageWeightedSampleQCOM</code>,
<code>OpImageBoxFilterQCOM</code>,
<code>OpImageBlockMatchWindowSSDQCOM</code>,
<code>OpImageBlockMatchWindowSADQCOM</code>,
<code>OpImageBlockMatchGatherSSDQCOM</code>,
<code>OpImageBlockMatchGatherSADQCOM</code>,
<code>OpImageBlockMatchSSDQCOM</code>, or <code>OpImageBlockMatchSADQCOM</code> uses a
<a href="samplers.html#VkSampler" class="xref page">VkSampler</a> as a result of this command, then the sampler <strong>must</strong> not
have been created with <code>VK_SAMPLER_CREATE_IMAGE_PROCESSING_BIT_QCOM</code></p>
</li>
<li>
<p><a id="VUID-vkCmdSubpassShadingHUAWEI-OpImageBlockMatchWindow-09215" href="#VUID-vkCmdSubpassShadingHUAWEI-OpImageBlockMatchWindow-09215"></a> <span class="vuid">VUID-vkCmdSubpassShadingHUAWEI-OpImageBlockMatchWindow-09215</span><br>

If a <code>OpImageBlockMatchWindow*QCOM</code> or
<code>OpImageBlockMatchGather*QCOM</code> instruction is used to read from an
<a href="resources.html#VkImageView" class="xref page">VkImageView</a> as a result of this command, then the image view&#8217;s
<a href="resources.html#resources-image-view-format-features" class="xref page">format features</a> <strong>must</strong> contain
<code>VK_FORMAT_FEATURE_2_BLOCK_MATCHING_BIT_QCOM</code></p>
</li>
<li>
<p><a id="VUID-vkCmdSubpassShadingHUAWEI-OpImageBlockMatchWindow-09216" href="#VUID-vkCmdSubpassShadingHUAWEI-OpImageBlockMatchWindow-09216"></a> <span class="vuid">VUID-vkCmdSubpassShadingHUAWEI-OpImageBlockMatchWindow-09216</span><br>

If a <code>OpImageBlockMatchWindow*QCOM</code> or
<code>OpImageBlockMatchGather*QCOM</code> instruction is used to read from an
<a href="resources.html#VkImageView" class="xref page">VkImageView</a> as a result of this command, then the image view&#8217;s
format <strong>must</strong> be a single-component format.</p>
</li>
<li>
<p><a id="VUID-vkCmdSubpassShadingHUAWEI-OpImageBlockMatchWindow-09217" href="#VUID-vkCmdSubpassShadingHUAWEI-OpImageBlockMatchWindow-09217"></a> <span class="vuid">VUID-vkCmdSubpassShadingHUAWEI-OpImageBlockMatchWindow-09217</span><br>

If a <code>OpImageBlockMatchWindow*QCOM</code> or
<code>OpImageBlockMatchGather*QCOM</code> read from a reference image as result
of this command, then the specified reference coordinates <strong>must</strong> not fail
<a href="textures.html#textures-integer-coordinate-validation" class="xref page">integer texel coordinate    validation</a></p>
</li>
<li>
<p><a id="VUID-vkCmdSubpassShadingHUAWEI-None-07288" href="#VUID-vkCmdSubpassShadingHUAWEI-None-07288"></a> <span class="vuid">VUID-vkCmdSubpassShadingHUAWEI-None-07288</span><br>

Any shader invocation executed by this command <strong>must</strong>
<a href="shaders.html#shaders-termination" class="xref page">terminate</a></p>
</li>
<li>
<p><a id="VUID-vkCmdSubpassShadingHUAWEI-None-04931" href="#VUID-vkCmdSubpassShadingHUAWEI-None-04931"></a> <span class="vuid">VUID-vkCmdSubpassShadingHUAWEI-None-04931</span><br>

This command must be called in a subpass with bind point
<code>VK_PIPELINE_BIND_POINT_SUBPASS_SHADING_HUAWEI</code>.
No draw commands can be called in the same subpass.
Only one <a href="#vkCmdSubpassShadingHUAWEI">vkCmdSubpassShadingHUAWEI</a> command can be called in a
subpass</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCmdSubpassShadingHUAWEI-commandBuffer-parameter" href="#VUID-vkCmdSubpassShadingHUAWEI-commandBuffer-parameter"></a> <span class="vuid">VUID-vkCmdSubpassShadingHUAWEI-commandBuffer-parameter</span><br>
 <code>commandBuffer</code> <strong>must</strong> be a valid <a href="cmdbuffers.html#VkCommandBuffer" class="xref page">VkCommandBuffer</a> handle</p>
</li>
<li>
<p><a id="VUID-vkCmdSubpassShadingHUAWEI-commandBuffer-recording" href="#VUID-vkCmdSubpassShadingHUAWEI-commandBuffer-recording"></a> <span class="vuid">VUID-vkCmdSubpassShadingHUAWEI-commandBuffer-recording</span><br>
 <code>commandBuffer</code> <strong>must</strong> be in the <a href="cmdbuffers.html#commandbuffers-lifecycle" class="xref page">recording state</a></p>
</li>
<li>
<p><a id="VUID-vkCmdSubpassShadingHUAWEI-commandBuffer-cmdpool" href="#VUID-vkCmdSubpassShadingHUAWEI-commandBuffer-cmdpool"></a> <span class="vuid">VUID-vkCmdSubpassShadingHUAWEI-commandBuffer-cmdpool</span><br>
 The <code>VkCommandPool</code> that <code>commandBuffer</code> was allocated from <strong>must</strong> support graphics operations</p>
</li>
<li>
<p><a id="VUID-vkCmdSubpassShadingHUAWEI-renderpass" href="#VUID-vkCmdSubpassShadingHUAWEI-renderpass"></a> <span class="vuid">VUID-vkCmdSubpassShadingHUAWEI-renderpass</span><br>
 This command <strong>must</strong> only be called inside of a render pass instance</p>
</li>
<li>
<p><a id="VUID-vkCmdSubpassShadingHUAWEI-videocoding" href="#VUID-vkCmdSubpassShadingHUAWEI-videocoding"></a> <span class="vuid">VUID-vkCmdSubpassShadingHUAWEI-videocoding</span><br>
 This command <strong>must</strong> only be called outside of a video coding scope</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Host Synchronization</div>
<div class="ulist">
<ul>
<li>
<p>Host access to <code>commandBuffer</code> <strong>must</strong> be externally synchronized</p>
</li>
<li>
<p>Host access to the <code>VkCommandPool</code> that <code>commandBuffer</code> was allocated from <strong>must</strong> be externally synchronized</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Command Properties</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><a href="cmdbuffers.html#VkCommandBufferLevel" class="xref page">Command Buffer Levels</a></th>
<th class="tableblock halign-left valign-top"><a href="renderpass.html#vkCmdBeginRenderPass" class="xref page">Render Pass Scope</a></th>
<th class="tableblock halign-left valign-top"><a href="video_extensions.html#vkCmdBeginVideoCodingKHR" class="xref page">Video Coding Scope</a></th>
<th class="tableblock halign-left valign-top"><a href="devsandqueues.html#VkQueueFlagBits" class="xref page">Supported Queue Types</a></th>
<th class="tableblock halign-left valign-top"><a href="fundamentals.html#fundamentals-queueoperation-command-types" class="xref page">Command Type</a></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Primary<br>
Secondary</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Inside</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Outside</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Graphics</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Action</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="cudadispatch"><a class="anchor" href="#cudadispatch"></a>Dispatch Command for CUDA PTX Kernels</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Compute kernels <strong>can</strong> be provided in SPIR-V or PTX code.
When using PTX kernels the dispatch mechanism is different than with regular
compute pipelines.</p>
</div>
<div class="paragraph">
<p>The way to create a PTX assembly file is beyond the scope of this
documentation.
For mode information, please refer to the CUDA toolkit documentation at
<a href="https://docs.nvidia.com/cuda/" class="bare">https://docs.nvidia.com/cuda/</a>.</p>
</div>
<div class="paragraph">
<p>Prior to using this command, you <strong>must</strong> initialize a CUDA module, and create
a function handle that will serve as the entry point of the kernel to
dispatch.
See <a href="shaders.html#cuda-modules" class="xref page">CUDA Modules</a>.</p>
</div>
<div class="paragraph">
<p>The dispatching of a CUDA kernel is recorded into a command buffer, and when
executed by a queue submit, will produce work which executes according to
the bound compute pipeline.</p>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>To record a CUDA kernel launch, call:</p>
</div>
<div id="vkCmdCudaLaunchKernelNV" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_NV_cuda_kernel_launch
void vkCmdCudaLaunchKernelNV(
    VkCommandBuffer                             commandBuffer,
    const VkCudaLaunchInfoNV*                   pLaunchInfo);</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>commandBuffer</code> is the command buffer into which the command will be
recorded.</p>
</li>
<li>
<p><code>pLaunchInfo</code> is a pointer to a <a href="#VkCudaLaunchInfoNV">VkCudaLaunchInfoNV</a> structure
in which the grid (similar to workgroup) dimension, function handle and
related arguments are defined.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>When the command is executed, a global workgroup consisting of
<span class="eq"><code>gridDimX</code> × <code>gridDimY</code> × <code>gridDimZ</code></span> local
workgroups is assembled.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCmdCudaLaunchKernelNV-commandBuffer-parameter" href="#VUID-vkCmdCudaLaunchKernelNV-commandBuffer-parameter"></a> <span class="vuid">VUID-vkCmdCudaLaunchKernelNV-commandBuffer-parameter</span><br>
 <code>commandBuffer</code> <strong>must</strong> be a valid <a href="cmdbuffers.html#VkCommandBuffer" class="xref page">VkCommandBuffer</a> handle</p>
</li>
<li>
<p><a id="VUID-vkCmdCudaLaunchKernelNV-pLaunchInfo-parameter" href="#VUID-vkCmdCudaLaunchKernelNV-pLaunchInfo-parameter"></a> <span class="vuid">VUID-vkCmdCudaLaunchKernelNV-pLaunchInfo-parameter</span><br>
 <code>pLaunchInfo</code> <strong>must</strong> be a valid pointer to a valid <a href="#VkCudaLaunchInfoNV">VkCudaLaunchInfoNV</a> structure</p>
</li>
<li>
<p><a id="VUID-vkCmdCudaLaunchKernelNV-commandBuffer-recording" href="#VUID-vkCmdCudaLaunchKernelNV-commandBuffer-recording"></a> <span class="vuid">VUID-vkCmdCudaLaunchKernelNV-commandBuffer-recording</span><br>
 <code>commandBuffer</code> <strong>must</strong> be in the <a href="cmdbuffers.html#commandbuffers-lifecycle" class="xref page">recording state</a></p>
</li>
<li>
<p><a id="VUID-vkCmdCudaLaunchKernelNV-commandBuffer-cmdpool" href="#VUID-vkCmdCudaLaunchKernelNV-commandBuffer-cmdpool"></a> <span class="vuid">VUID-vkCmdCudaLaunchKernelNV-commandBuffer-cmdpool</span><br>
 The <code>VkCommandPool</code> that <code>commandBuffer</code> was allocated from <strong>must</strong> support graphics, or compute operations</p>
</li>
<li>
<p><a id="VUID-vkCmdCudaLaunchKernelNV-videocoding" href="#VUID-vkCmdCudaLaunchKernelNV-videocoding"></a> <span class="vuid">VUID-vkCmdCudaLaunchKernelNV-videocoding</span><br>
 This command <strong>must</strong> only be called outside of a video coding scope</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Host Synchronization</div>
<div class="ulist">
<ul>
<li>
<p>Host access to the <code>VkCommandPool</code> that <code>commandBuffer</code> was allocated from <strong>must</strong> be externally synchronized</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Command Properties</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><a href="cmdbuffers.html#VkCommandBufferLevel" class="xref page">Command Buffer Levels</a></th>
<th class="tableblock halign-left valign-top"><a href="renderpass.html#vkCmdBeginRenderPass" class="xref page">Render Pass Scope</a></th>
<th class="tableblock halign-left valign-top"><a href="video_extensions.html#vkCmdBeginVideoCodingKHR" class="xref page">Video Coding Scope</a></th>
<th class="tableblock halign-left valign-top"><a href="devsandqueues.html#VkQueueFlagBits" class="xref page">Supported Queue Types</a></th>
<th class="tableblock halign-left valign-top"><a href="fundamentals.html#fundamentals-queueoperation-command-types" class="xref page">Command Type</a></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Primary<br>
Secondary</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Both</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Outside</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Graphics<br>
Compute</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Action</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="cudadispatch_info"><a class="anchor" href="#cudadispatch_info"></a>Passing Dispatch Parameters and Arguments</h3>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>VkCudaLaunchInfoNV</code> structure is very close to the parameters of
the CUDA-Driver function
<a href="https://docs.nvidia.com/cuda/cuda-driver-api/group__CUDA__EXEC.html#group__CUDA__EXEC_1gb8f3dc3031b40da29d5f9a7139e52e15">cuLaunchKernel</a>
documented in section
<a href="https://docs.nvidia.com/cuda/cuda-driver-api/group__CUDA__EXEC.html#group__CUDA__EXEC">6.19
Execution Control</a> of CUDA Driver API.</p>
</div>
<div class="paragraph">
<p>The structure is defined as:</p>
</div>
<div id="VkCudaLaunchInfoNV" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// Provided by VK_NV_cuda_kernel_launch
typedef struct VkCudaLaunchInfoNV {
    VkStructureType        sType;
    const void*            pNext;
    VkCudaFunctionNV       function;
    uint32_t               gridDimX;
    uint32_t               gridDimY;
    uint32_t               gridDimZ;
    uint32_t               blockDimX;
    uint32_t               blockDimY;
    uint32_t               blockDimZ;
    uint32_t               sharedMemBytes;
    size_t                 paramCount;
    const void* const *    pParams;
    size_t                 extraCount;
    const void* const *    pExtras;
} VkCudaLaunchInfoNV;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is a <a href="fundamentals.html#VkStructureType" class="xref page">VkStructureType</a> value identifying this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>function</code> is the CUDA-Driver handle to the function being launched.</p>
</li>
<li>
<p><code>gridDimX</code> is the number of local workgroups to dispatch in the X
dimension.
It must be less than or equal to
<code>VkPhysicalDeviceLimits</code>::<code>maxComputeWorkGroupCount</code>[0]</p>
</li>
<li>
<p><code>gridDimY</code> is the number of local workgroups to dispatch in the Y
dimension.
It must be less than or equal to
<code>VkPhysicalDeviceLimits</code>::<code>maxComputeWorkGroupCount</code>[1]</p>
</li>
<li>
<p><code>gridDimZ</code> is the number of local workgroups to dispatch in the Z
dimension.
It must be less than or equal to
<code>VkPhysicalDeviceLimits</code>::<code>maxComputeWorkGroupCount</code>[2]</p>
</li>
<li>
<p><code>blockDimX</code> is block size in the X dimension.</p>
</li>
<li>
<p><code>blockDimY</code> is block size in the Y dimension.</p>
</li>
<li>
<p><code>blockDimZ</code> is block size in the Z dimension.</p>
</li>
<li>
<p><code>sharedMemBytes</code> is the dynamic shared-memory size per thread block
in bytes.</p>
</li>
<li>
<p><code>paramCount</code> is the length of the <code>pParams</code> table.</p>
</li>
<li>
<p><code>pParams</code> is a pointer to an array of <code>paramCount</code> pointers,
corresponding to the arguments of <code>function</code>.</p>
</li>
<li>
<p><code>extraCount</code> is reserved for future use.</p>
</li>
<li>
<p><code>pExtras</code> is reserved for future use.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkCudaLaunchInfoNV-gridDimX-09406" href="#VUID-VkCudaLaunchInfoNV-gridDimX-09406"></a> <span class="vuid">VUID-VkCudaLaunchInfoNV-gridDimX-09406</span><br>

<code>gridDimX</code> <strong>must</strong> be less than or equal to
<code>VkPhysicalDeviceLimits</code>::<code>maxComputeWorkGroupCount</code>[0]</p>
</li>
<li>
<p><a id="VUID-VkCudaLaunchInfoNV-gridDimY-09407" href="#VUID-VkCudaLaunchInfoNV-gridDimY-09407"></a> <span class="vuid">VUID-VkCudaLaunchInfoNV-gridDimY-09407</span><br>

<code>gridDimY</code> <strong>must</strong> be less than or equal to
<code>VkPhysicalDeviceLimits</code>::<code>maxComputeWorkGroupCount</code>[1]</p>
</li>
<li>
<p><a id="VUID-VkCudaLaunchInfoNV-gridDimZ-09408" href="#VUID-VkCudaLaunchInfoNV-gridDimZ-09408"></a> <span class="vuid">VUID-VkCudaLaunchInfoNV-gridDimZ-09408</span><br>

<code>gridDimZ</code> <strong>must</strong> be less than or equal to
<code>VkPhysicalDeviceLimits</code>::<code>maxComputeWorkGroupCount</code>[2]</p>
</li>
<li>
<p><a id="VUID-VkCudaLaunchInfoNV-paramCount-09409" href="#VUID-VkCudaLaunchInfoNV-paramCount-09409"></a> <span class="vuid">VUID-VkCudaLaunchInfoNV-paramCount-09409</span><br>

<code>paramCount</code> <strong>must</strong> be the total amount of parameters listed in the
<code>pParams</code> table.</p>
</li>
<li>
<p><a id="VUID-VkCudaLaunchInfoNV-pParams-09410" href="#VUID-VkCudaLaunchInfoNV-pParams-09410"></a> <span class="vuid">VUID-VkCudaLaunchInfoNV-pParams-09410</span><br>

<code>pParams</code> <strong>must</strong> be a pointer to a table of <code>paramCount</code>
parameters, corresponding to the arguments of <code>function</code>.</p>
</li>
<li>
<p><a id="VUID-VkCudaLaunchInfoNV-extraCount-09411" href="#VUID-VkCudaLaunchInfoNV-extraCount-09411"></a> <span class="vuid">VUID-VkCudaLaunchInfoNV-extraCount-09411</span><br>

<code>extraCount</code> must be 0</p>
</li>
<li>
<p><a id="VUID-VkCudaLaunchInfoNV-pExtras-09412" href="#VUID-VkCudaLaunchInfoNV-pExtras-09412"></a> <span class="vuid">VUID-VkCudaLaunchInfoNV-pExtras-09412</span><br>

<code>pExtras</code> must be NULL</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkCudaLaunchInfoNV-sType-sType" href="#VUID-VkCudaLaunchInfoNV-sType-sType"></a> <span class="vuid">VUID-VkCudaLaunchInfoNV-sType-sType</span><br>
 <code>sType</code> <strong>must</strong> be <code>VK_STRUCTURE_TYPE_CUDA_LAUNCH_INFO_NV</code></p>
</li>
<li>
<p><a id="VUID-VkCudaLaunchInfoNV-pNext-pNext" href="#VUID-VkCudaLaunchInfoNV-pNext-pNext"></a> <span class="vuid">VUID-VkCudaLaunchInfoNV-pNext-pNext</span><br>
 <code>pNext</code> <strong>must</strong> be <code>NULL</code></p>
</li>
<li>
<p><a id="VUID-VkCudaLaunchInfoNV-function-parameter" href="#VUID-VkCudaLaunchInfoNV-function-parameter"></a> <span class="vuid">VUID-VkCudaLaunchInfoNV-function-parameter</span><br>
 <code>function</code> <strong>must</strong> be a valid <a href="shaders.html#VkCudaFunctionNV" class="xref page">VkCudaFunctionNV</a> handle</p>
</li>
<li>
<p><a id="VUID-VkCudaLaunchInfoNV-pParams-parameter" href="#VUID-VkCudaLaunchInfoNV-pParams-parameter"></a> <span class="vuid">VUID-VkCudaLaunchInfoNV-pParams-parameter</span><br>
 If <code>paramCount</code> is not <code>0</code>, and <code>pParams</code> is not <code>NULL</code>, <code>pParams</code> <strong>must</strong> be a valid pointer to an array of <code>paramCount</code> bytes</p>
</li>
<li>
<p><a id="VUID-VkCudaLaunchInfoNV-pExtras-parameter" href="#VUID-VkCudaLaunchInfoNV-pExtras-parameter"></a> <span class="vuid">VUID-VkCudaLaunchInfoNV-pExtras-parameter</span><br>
 If <code>extraCount</code> is not <code>0</code>, and <code>pExtras</code> is not <code>NULL</code>, <code>pExtras</code> <strong>must</strong> be a valid pointer to an array of <code>extraCount</code> bytes</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>Kernel parameters of <code>function</code> are specified via <code>pParams</code>, very
much the same way as described in
<a href="https://docs.nvidia.com/cuda/cuda-driver-api/group__CUDA__EXEC.html#group__CUDA__EXEC_1gb8f3dc3031b40da29d5f9a7139e52e15">cuLaunchKernel</a></p>
</div>
<div class="paragraph">
<p>If <code>function</code> has N parameters, then <code>pParams</code> <strong>must</strong> be an array of
N pointers and <code>paramCount</code> <strong>must</strong> be set to N. Each of
<code>kernelParams</code>[0] through <code>kernelParams</code>[N-1] <strong>must</strong> point to a
region of memory from which the actual kernel parameter will be copied.
The number of kernel parameters and their offsets and sizes are not
specified here as that information is stored in the <a href="shaders.html#VkCudaFunctionNV" class="xref page">VkCudaFunctionNV</a>
object.</p>
</div>
<div class="paragraph">
<p>The application-owned memory pointed to by <code>pParams</code> and
<code>kernelParams</code>[0] through <code>kernelParams</code>[N-1] are consumed
immediately, and <strong>may</strong> be altered or freed after
<a href="#vkCmdCudaLaunchKernelNV">vkCmdCudaLaunchKernelNV</a> has returned.</p>
</div>
</div>
<div class="sect2">
<h3 id="cudadispatch_sharing_resources"><a class="anchor" href="#cudadispatch_sharing_resources"></a>Resources sharing from Vulkan to the CUDA Kernel</h3>
<div class="paragraph">
<p>Given that one key limitation of this extension is that Vulkan <strong>cannot</strong>
access, nor bind any global resource of CUDA modules, the only way to
exchange data with the kernel <strong>must</strong> be to <em>pass resources via the arguments
of the function</em>.</p>
</div>
<div class="paragraph">
<p>You can use <a href="../appendices/extensions.html#VK_KHR_buffer_device_address" class="xref page">VK_KHR_buffer_device_address</a> to write/read to/from a
<a href="resources.html#VkBuffer" class="xref page">VkBuffer</a> object.
<a href="../appendices/extensions.html#VK_KHR_buffer_device_address" class="xref page">VK_KHR_buffer_device_address</a> allows you to get the device address of the
buffer to pass it as an argument into <code>pParams</code>.
Application-side pointer arithmetic on the device address is legal, but will
not be bounds-checked on the device.</p>
</div>
<div class="paragraph">
<p>The corresponding argument of the CUDA function <strong>should</strong> be declared as a
pointer of the same type as the referenced buffer.
And the CUDA code <strong>may</strong> simply read or write to this buffer in the typical C
way.</p>
</div>
<div class="paragraph">
<p>You <strong>may</strong> also use <a href="../appendices/extensions.html#VK_NVX_image_view_handle" class="xref page">VK_NVX_image_view_handle</a> as another convenient way
to read/write from/to a <a href="resources.html#VkImage" class="xref page">VkImage</a>.</p>
</div>
<div class="paragraph">
<p>The corresponding argument of the CUDA function <strong>must</strong> be typed as
<code>cudaSurfaceObject_t</code>.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>You <strong>may</strong> then read from it by using the CUDA surface-read functions such
as <code>surf3Dread</code>/<code>surf2Dread</code>/<code>surf1Dread</code></p>
</li>
<li>
<p>You <strong>may</strong> then write to it by using the CUDA surface-write functions such
as <code>surf3Dwrite</code>/<code>surf2Dwrite</code>/<code>surf1Dwrite</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Please refer to CUDA
<a href="https://docs.nvidia.com/cuda/cuda-c-programming-guide/index.html%23surface-object-api-appendix">surface
object</a> documentation for more details</p>
</div>
<div class="paragraph">
<p>On Vulkan side, here is an example on how to setup
<a href="resources.html#VkImageViewHandleInfoNVX" class="xref page">VkImageViewHandleInfoNVX</a> to query the handle for
<code>cudaSurfaceObject_t</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">VkImageViewHandleInfoNVX imageViewHandleInfo = {VK_STRUCTURE_TYPE_IMAGE_VIEW_HANDLE_INFO_NVX};
imageViewHandleInfo.sampler = VK_NULL_HANDLE;
imageViewHandleInfo.descriptorType = VK_DESCRIPTOR_TYPE_STORAGE_IMAGE;
imageViewHandleInfo.imageView = imageViewIn; // the VkImageView we want to access
uint32_t myViewHandleIn = vkGetImageViewHandleNVX(m_device, &amp;imageViewHandleInfo);
imageViewHandleInfo.imageView = imageViewOut; // the VkImageView we want to access
uint32_t myViewHandleOut = vkGetImageViewHandleNVX(m_device, &amp;imageViewHandleInfo);</code></pre>
</div>
</div>
<div class="paragraph">
<p>Here is an example of how to declare parameters for <code>pParams</code></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">VkCudaLaunchInfoNV launchInfo = { VK_STRUCTURE_TYPE_CUDA_LAUNCH_INFO_NV };

int block_size = 8;
float dt = 1.0f / 60.0f;

const void* params[] =
{
  &amp;dt,
  &amp;uint32_t myViewHandleIn,
  &amp;uint32_t myViewHandleOut
};

launchInfo.function = cudaFunction; // CUDA function previously created
launchInfo.gridDimX = (volumeTexDimensionNonBoundary / block_size);
launchInfo.gridDimY = (volumeTexDimensionNonBoundary / block_size);
launchInfo.gridDimZ = (volumeTexDimensionNonBoundary / block_size);
launchInfo.blockDimX = block_size;
launchInfo.blockDimY = block_size;
launchInfo.blockDimZ = block_size;
launchInfo.sharedMemBytes = 0;
launchInfo.paramCount = 3;
launchInfo.pParams = &amp;params[0];
launchInfo.extraCount = 0;
launchInfo.pExtras = nullptr;

vkCmdCudaLaunchKernelNV(commandBuffer, &amp;launchInfo);</code></pre>
</div>
</div>
<div class="paragraph">
<p>In the CUDA kernel source code, here is an example on how arguments match
<code>pParams</code> and how we can use Surface object:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">extern "C"  __global__ void cudaFunction(
  float dt,
  cudaSurfaceObject_t volumeTexIn,
  cudaSurfaceObject_t volumeTexOut
  )
{
  int i = 1 + blockIdx.x * blockDim.x + threadIdx.x;
  int j = 1 + blockIdx.y * blockDim.y + threadIdx.y;
  int k = 1 + blockIdx.z * blockDim.z + threadIdx.z;

  float val;
  surf3Dread(&amp;val, volumeTexIn, i * sizeof(float), j, k);
  ...
  float result = ...;
  // write result
  surf3Dwrite(result, volumeTexOut, i * sizeof(float), j, k);
}</code></pre>
</div>
</div>
</div>
</div>
</div>
</article>
  </div>
</main>
</div>
<footer class="footer">
    <!--
  <p>This page was built using the Antora default UI.</p>
  <p>The source code for this UI is licensed under the terms of the MPL-2.0 license.</p>
    -->
</footer>
<script id="site-script" src="../../../_/js/site.js" data-ui-root-path="../../../_"></script>
<script async src="../../../_/js/vendor/highlight.js"></script>
<script src="../../../_/js/vendor/lunr.js"></script>
<script src="../../../_/js/search-ui.js" id="search-ui-script" data-site-root-path="../../.." data-snippet-length="100" data-stylesheet="../../../_/css/search.css"></script>
<script async src="../../../search-index.js"></script>
  </body>
</html>
