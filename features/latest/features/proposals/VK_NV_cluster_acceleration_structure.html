<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>VK_NV_cluster_acceleration_structure :: Vulkan Documentation Project</title>
    <meta name="generator" content="Antora 3.1.10">
    <script>
      !function (theme) {
        if (theme === 'dark') document.documentElement.classList.add('dark')
        else document.documentElement.classList.add('light')
      }(localStorage && localStorage.getItem('theme') || (matchMedia('(prefers-color-scheme: dark)')?.matches && 'dark'))
    </script>
    <link rel="stylesheet" href="../../../../_/css/site.css">
    <link rel="apple-touch-icon" sizes="180x180" href="../../../../_/img/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="../../../../_/img/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="../../../../_/img/favicon-16x16.png">
    <link rel="manifest" href="../../../../_/static/site.webmanifest">
    <link rel="mask-icon" href="../../../../_/img/safari-pinned-tab.svg" color="#a41e22">
    <meta name="msapplication-TileColor" content="#ffc40d">
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="../../../.."><img class="navbar-item" alt="Vulkan White Label" src="../../../../_/Vulkan_Docs.svg" /></a>
      <div class="navbar-item search hide-for-print">
        <div id="search-field" class="field has-filter">
          <label for="search-input"></label>
          <input id="search-input" type="text" placeholder="Search the docs">
          <label class="filter checkbox">
            <input type="checkbox" data-facet-filter="component:features" checked> In this component
          </label>
        </div>
      </div>
      <button class="navbar-burger" aria-controls="topbar-nav" aria-expanded="false" aria-label="Toggle main menu">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <!-- <a class="navbar-item" href="#">Home</a> -->
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Specs</a>
          <div class="navbar-dropdown is-right">
            <a class="navbar-item" href="../../../../spec/latest/chapters/introduction.html">Vulkan API</a>
            <a class="navbar-item" href="../../../../glsl/latest/index.html">GLSL</a>
            <a class="navbar-item" href="../../../../guide/latest/hlsl.html">HLSL</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Education</a>
          <div class="navbar-dropdown is-right">
            <a class="navbar-item" href="../../../../features/latest/features/index.html">Vulkan Feature Descriptions</a>
            <a class="navbar-item" href="../../../../guide/latest/index.html">Vulkan Guide</a>
            <a class="navbar-item" href="../../../../samples/latest/README.html">Vulkan Samples</a>
            <a class="navbar-item" href="../../../../tutorial/latest/index.html">Vulkan Tutorial</a>
            <a class="navbar-item" href="https://www.youtube.com/c/vulkan">YouTube</a>
            <a class="navbar-item" href="https://vulkan.org">More Info at Vulkan.org</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Feedback</a>
          <div class="navbar-dropdown is-right">
            <a class="navbar-item" href="https://github.com/KhronosGroup/Vulkan-Site/issues/new/choose" target="_blank">Report a Problem</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Community</a>
          <div class="navbar-dropdown is-right">
            <a class="navbar-item" href="https://discord.gg/vulkan">Vulkan Discord</a>
            <a class="navbar-item" href="https://reddit.com/r/vulkan">Reddit</a>
            <a class="navbar-item" href="https://stackoverflow.com/questions/tagged/vulkan">Stack Overflow</a>
            <a class="navbar-item" href="https://fosstodon.org/@vulkan">Mastodon</a>
          </div>
        </div>
      </div>
    </div>
    <label class="theme-toggler">
      <input type="checkbox" id="switch-theme-checkbox" name="switch-theme-checkbox"/>
      <span class="icon"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="moon" class="svg-inline--fa fa-moon moon" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512"><path fill="currentColor" d="M223.5 32C100 32 0 132.3 0 256S100 480 223.5 480c60.6 0 115.5-24.2 155.8-63.4c5-4.9 6.3-12.5 3.1-18.7s-10.1-9.7-17-8.5c-9.8 1.7-19.8 2.6-30.1 2.6c-96.9 0-175.5-78.8-175.5-176c0-65.8 36-123.1 89.3-153.3c6.1-3.5 9.2-10.5 7.7-17.3s-7.3-11.9-14.3-12.5c-6.3-.5-12.6-.8-19-.8z"></path>
        </svg>
        <svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="sun" class="svg-inline--fa fa-sun sun" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M361.5 1.2c5 2.1 8.6 6.6 9.6 11.9L391 121l107.9 19.8c5.3 1 9.8 4.6 11.9 9.6s1.5 10.7-1.6 15.2L446.9 256l62.3 90.3c3.1 4.5 3.7 10.2 1.6 15.2s-6.6 8.6-11.9 9.6L391 391 371.1 498.9c-1 5.3-4.6 9.8-9.6 11.9s-10.7 1.5-15.2-1.6L256 446.9l-90.3 62.3c-4.5 3.1-10.2 3.7-15.2 1.6s-8.6-6.6-9.6-11.9L121 391 13.1 371.1c-5.3-1-9.8-4.6-11.9-9.6s-1.5-10.7 1.6-15.2L65.1 256 2.8 165.7c-3.1-4.5-3.7-10.2-1.6-15.2s6.6-8.6 11.9-9.6L121 121 140.9 13.1c1-5.3 4.6-9.8 9.6-11.9s10.7-1.5 15.2 1.6L256 65.1 346.3 2.8c4.5-3.1 10.2-3.7 15.2-1.6zM160 256a96 96 0 1 1 192 0 96 96 0 1 1 -192 0zm224 0a128 128 0 1 0 -256 0 128 128 0 1 0 256 0z"></path>
        </svg></span>
    </label>
  </nav>
</header>
<script>
  window.onload = function() {
    let e = document.getElementById("switch-theme-checkbox")
    e.checked = document.documentElement.classList.contains("dark");
    e.checked ? e.parentElement.classList.add("active") : e.parentElement.classList.remove("active")
  }
  !function() {
    let e = document.getElementById("switch-theme-checkbox")
    e.checked = document.documentElement.classList.contains("dark")
    e.addEventListener("change", function() {
      if (document.documentElement.classList.contains("light")) {
        document.documentElement.classList.remove("light")
        document.documentElement.classList.add("dark")
      } else if (document.documentElement.classList.contains("dark")) {
        document.documentElement.classList.remove("dark")
        document.documentElement.classList.add("light")
      } else {
        if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {
          document.documentElement.classList.add("dark")
        } else {
          document.documentElement.classList.add("light")
        }
      }
      document.documentElement.setAttribute("data-theme", this.checked ? "dark" : "light"),
        function(e) {
          window.localStorage && window.localStorage.setItem("theme", e)
        }(this.checked ? "dark" : "light"), this.checked ? this.parentElement.classList.add("active") : this.parentElement.classList.remove("active")
    }.bind(e))
  }();
</script>
<div class="body">
<div class="nav-container" data-component="features" data-version="latest">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <button class="nav-menu-toggle" aria-label="Toggle expand/collapse all" style="display: none"></button>
    <h3 class="title"><a href="../index.html">Vulkan Feature Descriptions</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../index.html">Vulkan Roadmap and Feature Descriptions</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="Roadmap.html">Vulkan Roadmap</a>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Feature Descriptions</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="VK_AMDX_shader_enqueue.html">VK_AMDX_shader_enqueue</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="VK_AMD_anti_lag.html">VK_AMD_anti_lag</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="VK_AMD_shader_early_and_late_fragment_tests.html">VK_AMD_shader_early_and_late_fragment_tests</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="VK_ANDROID_external_format_resolve.html">VK_ANDROID_external_format_resolve</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="VK_ARM_pipeline_opacity_micromap.html">VK_ARM_pipeline_opacity_micromap</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="VK_ARM_render_pass_striped.html">VK_ARM_render_pass_striped</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="VK_EXT_attachment_feedback_loop_dynamic_state.html">VK_EXT_attachment_feedback_loop_dynamic_state</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="VK_EXT_attachment_feedback_loop_layout.html">VK_EXT_attachment_feedback_loop_layout</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="VK_EXT_calibrated_timestamps.html">VK_EXT_calibrated_timestamps</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="VK_EXT_depth_bias_control.html">VK_EXT_depth_bias_control</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="VK_EXT_depth_clamp_control.html">VK_EXT_depth_clamp_control</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="VK_EXT_descriptor_buffer.html">VK_EXT_descriptor_buffer</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="VK_EXT_device_fault.html">VK_EXT_device_fault</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="VK_EXT_device_generated_commands.html">VK_EXT_device_generated_commands</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="VK_EXT_dynamic_rendering_unused_attachments.html">VK_EXT_dynamic_rendering_unused_attachments</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="VK_EXT_extended_dynamic_state3.html">VK_EXT_extended_dynamic_state3</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="VK_EXT_external_memory_acquire_unmodified.html">VK_EXT_external_memory_acquire_unmodified</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="VK_EXT_external_memory_metal.html">VK_EXT_external_memory_metal</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="VK_EXT_fragment_density_map_offset.html">VK_EXT_fragment_density_map_offset</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="VK_EXT_frame_boundary.html">Proposal: <code>VK_EXT_frame_boundary</code></a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="VK_EXT_graphics_pipeline_library.html">VK_EXT_graphics_pipeline_library</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="VK_EXT_host_image_copy.html">VK_EXT_host_image_copy</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="VK_EXT_image_2d_array_of_3d.html">VK_EXT_image_2d_array_of_3d</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="VK_EXT_image_compression_control.html">VK_EXT_image_compression_control</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="VK_EXT_image_sliced_view_of_3d.html">VK_EXT_image_sliced_view_of_3d</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="VK_EXT_layer_settings.html">VK_EXT_layer_settings</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="VK_EXT_legacy_dithering.html">VK_EXT_legacy_dithering</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="VK_EXT_legacy_vertex_attributes.html">VK_EXT_legacy_vertex_attributes</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="VK_EXT_map_memory_placed.html">VK_EXT_map_memory_placed</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="VK_EXT_mesh_shader.html">VK_EXT_mesh_shader</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="VK_EXT_metal_objects.html">VK_EXT_metal_objects</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="VK_EXT_multisampled_render_to_single_sampled.html">VK_EXT_multisampled_render_to_single_sampled</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="VK_EXT_mutable_descriptor_type.html">VK_EXT_mutable_descriptor_type</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="VK_EXT_non_seamless_cube_map.html">VK_EXT_non_seamless_cube_map</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="VK_EXT_opacity_micromap.html">VK_EXT_opacity_micromap</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="VK_EXT_pipeline_library_group_handles.html">VK_EXT_pipeline_library_group_handles</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="VK_EXT_pipeline_protected_access.html">VK_EXT_pipeline_protected_access</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="VK_EXT_present_mode_fifo_latest_ready.html">VK_EXT_present_mode_fifo_latest_ready</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="VK_EXT_primitives_generated_query.html">VK_EXT_primitives_generated_query</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="VK_EXT_rasterization_order_attachment_access.html">VK_EXT_rasterization_order_attachment_access</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="VK_EXT_shader_module_identifier.html">VK_EXT_shader_module_identifier</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="VK_EXT_shader_object.html">VK_EXT_shader_object</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="VK_EXT_shader_replicated_composites.html">VK_EXT_shader_replicated_composites</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="VK_EXT_shader_tile_image.html">VK_EXT_shader_tile_image</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="VK_EXT_subpass_merge_feedback.html">VK_EXT_subpass_merge_feedback</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="VK_EXT_surface_maintenance1.html">VK_EXT_surface_maintenance1</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="VK_EXT_swapchain_maintenance1.html">VK_EXT_swapchain_maintenance1</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="VK_GOOGLE_surfaceless_query.html">VK_GOOGLE_surfaceless_query</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="VK_HUAWEI_cluster_culling_shader.html">VK_HUAWEI_cluster_culling_shader</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="VK_HUAWEI_invocation_mask.html">VK_HUAWEI_invocation_mask</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="VK_KHR_compute_shader_derivatives.html">VK_KHR_compute_shader_derivatives</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="VK_KHR_cooperative_matrix.html">VK_KHR_cooperative_matrix</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="VK_KHR_dynamic_rendering.html">VK_KHR_dynamic_rendering</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="VK_KHR_dynamic_rendering_local_read.html">VK_KHR_dynamic_rendering_local_read</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="VK_KHR_fragment_shader_barycentric.html">VK_KHR_fragment_shader_barycentric</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="VK_KHR_fragment_shading_rate.html">VK_KHR_fragment_shading_rate</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="VK_KHR_load_store_op_none.html">VK_KHR_load_store_op_none</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="VK_KHR_maintenance5.html">VK_KHR_maintenance5</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="VK_KHR_maintenance6.html">VK_KHR_maintenance6</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="VK_KHR_maintenance7.html">VK_KHR_maintenance7</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="VK_KHR_maintenance8.html">VK_KHR_maintenance8</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="VK_KHR_map_memory2.html">VK_KHR_map_memory2</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="VK_KHR_pipeline_binary.html">VK_KHR_pipeline_binary</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="VK_KHR_ray_tracing_position_fetch.html">VK_KHR_ray_tracing_position_fetch</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="VK_KHR_shader_bfloat16.html">VK_KHR_shader_bfloat16</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="VK_KHR_shader_expect_assume.html">VK_KHR_shader_expect_assume</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="VK_KHR_shader_float_controls2.html">VK_KHR_shader_float_controls2</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="VK_KHR_shader_integer_dot_product.html">VK_KHR_shader_integer_dot_product</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="VK_KHR_shader_maximal_reconvergence.html">VK_KHR_shader_maximal_reconvergence</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="VK_KHR_shader_quad_control.html">VK_KHR_shader_quad_control</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="VK_KHR_shader_relaxed_extended_instruction.html">VK_KHR_shader_relaxed_extended_instruction</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="VK_KHR_shader_subgroup_rotate.html">Subgroup rotation instruction</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="VK_KHR_vertex_attribute_divisor.html">VK_KHR_vertex_attribute_divisor</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="VK_KHR_video_decode_av1.html">VK_KHR_video_decode_av1</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="VK_KHR_video_decode_h264.html">VK_KHR_video_decode_h264</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="VK_KHR_video_decode_h265.html">VK_KHR_video_decode_h265</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="VK_KHR_video_decode_queue.html">VK_KHR_video_decode_queue</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="VK_KHR_video_encode_av1.html">VK_KHR_video_encode_av1</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="VK_KHR_video_encode_h264.html">VK_KHR_video_encode_h264</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="VK_KHR_video_encode_h265.html">VK_KHR_video_encode_h265</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="VK_KHR_video_encode_quantization_map.html">VK_KHR_video_encode_quantization_map</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="VK_KHR_video_encode_queue.html">VK_KHR_video_encode_queue</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="VK_KHR_video_maintenance1.html">VK_KHR_video_maintenance1</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="VK_KHR_video_maintenance2.html">VK_KHR_video_maintenance2</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="VK_KHR_video_queue.html">VK_KHR_video_queue</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="VK_LUNARG_direct_driver_loading.html">VK_LUNARG_direct_driver_loading</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="VK_MSFT_layered_driver.html">VK_MSFT_layered_driver</a>
  </li>
  <li class="nav-item is-current-page" data-depth="2">
    <a class="nav-link" href="VK_NV_cluster_acceleration_structure.html">VK_NV_cluster_acceleration_structure</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="VK_NV_cooperative_matrix2.html">VK_NV_cooperative_matrix2</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="VK_NV_cooperative_vector.html">VK_NV_cooperative_vector</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="VK_NV_display_stereo.html">VK_NV_display_stereo</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="VK_NV_external_compute_queue.html">VK_NV_external_compute_queue</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="VK_NV_partitioned_acceleration_structure.html">VK_NV_partitioned_acceleration_structure</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="VK_NV_ray_tracing_linear_swept_spheres.html">VK_NV_ray_tracing_linear_swept_spheres</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="VK_NV_ray_tracing_validation.html">VK_NV_ray_tracing_validation</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="VK_QCOM_image_processing.html">VK_QCOM_image_processing</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="VK_QCOM_tile_properties.html">VK_QCOM_tile_properties</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="VK_QCOM_tile_shading.html">VK_QCOM_tile_shading</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="VK_VERSION_1_4.html">Vulkan 1.4</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">Vulkan Feature Descriptions</span>
    <span class="version">latest</span>
  </div>
  <ul class="components">
    <li class="component">
      <div class="title"><a href="../../../../tutorial/latest/00_Introduction.html">Khronos Vulkan Tutorial</a></div>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../tutorial/latest/00_Introduction.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <div class="title"><a href="../../../../glsl/latest/index.html">OpenGL Shading Language Specification</a></div>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../glsl/latest/index.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component is-current">
      <div class="title"><a href="../index.html">Vulkan Feature Descriptions</a></div>
      <ul class="versions">
        <li class="version is-current is-latest">
          <a href="../index.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <div class="title"><a href="../../../../guide/latest/index.html">Vulkan Guide</a></div>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../guide/latest/index.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <div class="title"><a href="../../../../samples/latest/README.html">Vulkan Samples</a></div>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../samples/latest/README.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <div class="title"><a href="../../../../spec/latest/index.html">Vulkan Specification</a></div>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../spec/latest/index.html">latest</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="../../../../spec/latest/index.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="../index.html">Vulkan Feature Descriptions</a></li>
    <li>Feature Descriptions</li>
    <li><a href="VK_NV_cluster_acceleration_structure.html">VK_NV_cluster_acceleration_structure</a></li>
  </ul>
</nav>
</div>
  <div class="content">
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
<article class="doc">
<h1 class="page">VK_NV_cluster_acceleration_structure</h1>
<div id="toc" class="toc">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#_problem_statement">1. Problem Statement</a></li>
<li><a href="#_solution_space">2. Solution Space</a></li>
<li><a href="#_proposal">3. Proposal</a></li>
<li><a href="#_api_features">4. API Features</a>
<ul class="sectlevel2">
<li><a href="#_feature">4.1. Feature</a></li>
<li><a href="#_properties">4.2. Properties</a></li>
<li><a href="#_commands">4.3. Commands</a></li>
</ul>
</li>
<li><a href="#_issues">5. Issues</a></li>
</ul>
</div>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>This document introduces a new type of bottom level acceleration structure
that supports using pre-generated clusters of primitives which helps in reducing
acceleration structure build times.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_problem_statement"><a class="anchor" href="#_problem_statement"></a>1. Problem Statement</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Acceleration structure build times can pose a bottleneck in ray tracing
applications with extensive dynamic geometry. Examples include managing numerous
animated objects, implementing LOD systems, or handling dynamic
tessellation. As scenes become increasingly complex, these build times can
escalate significantly, impacting performance.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_solution_space"><a class="anchor" href="#_solution_space"></a>2. Solution Space</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The clustered geometry proposal seeks to resolve this challenge by allowing
applications to build bottom-level acceleration structures using pre-generated
clusters of primitives, significantly reducing build times.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_proposal"><a class="anchor" href="#_proposal"></a>3. Proposal</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This document proposes three new acceleration structure types:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Cluster Level Acceleration Structure (CLAS): A new type of acceleration
structure described in more detail below.</p>
</li>
<li>
<p>Cluster Template: A partially constructed CLAS which can be instantiated to
multiple cluster level acceleration structures.</p>
</li>
<li>
<p>Cluster BLAS: An alternative to the existing Bottom Level Acceleration
Structure (BLAS), constructed from references to CLAS structures.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>A CLAS is an intermediate acceleration structure created from
triangles, which can then be used to build Cluster BLAS. The Cluster
BLAS serves as an alternative to the traditional BLAS. The goal is for
applications to organize mesh geometry into CLAS primitives before
creating the Cluster BLAS. To optimize trace performance, geometry
should be grouped into CLAS based on spatial proximity.</p>
</div>
<div class="paragraph">
<p>A CLAS behaves similarly to a BLAS in many respects but has the
following differences:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Triangle and Vertex Limits: A CLAS can contain up to a small number
of triangles and vertices.</p>
</li>
<li>
<p>TLAS Integration: CLAS cannot be directly included in a TLAS. Instead, they are
referenced as part of a Cluster BLAS, which can be traced.</p>
</li>
<li>
<p>Geometry Indices: Indices in a CLAS can be specified per primitive that are local
to the CLAS and may be non-consecutive.</p>
</li>
<li>
<p>ClusterID: A CLAS can be assigned a user-defined 32-bit ClusterID, which can
be accessed from a hit shader.</p>
</li>
<li>
<p>Vertex positions in a CLAS can be quantized for better storage by implicitly
zeroing a variable number of floating point mantissa bits.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Cluster Templates are designed to efficiently instantiate CLAS in
memory. During the CLAS instantiation process from a Cluster Template, the actual
vertex positions are provided, and the ClusterID as well as the geometry index can
be offset uniformly. Cluster Templates perform as much pre-computation as
possible that is independent of final vertex positions, enabling reuse when
generating multiple CLAS instances. A Cluster Template is a partially
constructed CLAS with the following distinctions:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>It does not store or require vertex position data, however it can use it to
guide the spatial relationship among triangles.</p>
</li>
<li>
<p>Its size is smaller due to the absence of position information.</p>
</li>
<li>
<p>It cannot be used for tracing or as a basis for building other acceleration structures.</p>
</li>
<li>
<p>Bounding box information can be used in combination with the ability to zero some of
the floating point mantissa bits, to optimize the storage of the actual vertices at instantiation.</p>
</li>
<li>
<p>It retains non-positional properties similar to a CLAS, which are
inherited when the CLAS is instantiated.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>This extension provides a host-side query function to fetch the memory
requirements and a single versatile multi-indirect function for managing cluster
geometry which allows applications to generate CLAS geometry,
construct Cluster BLAS from CLAS lists, and move or copy CLAS and BLAS.
By sourcing inputs from device memory and processing multiple elements
simultaneously, the call reduces the host-side costs associated with
traditional acceleration structure functions and enables device-driven scene preparation.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_api_features"><a class="anchor" href="#_api_features"></a>4. API Features</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The following provides a basic overview of how this extension can be used:</p>
</div>
<div class="sect2">
<h3 id="_feature"><a class="anchor" href="#_feature"></a>4.1. Feature</h3>
<div class="paragraph">
<p>The following feature is exposed by this extension:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c hljs" data-lang="c">typedef struct VkPhysicalDeviceClusterAccelerationStructureFeaturesNV {
    VkStructureType                       sType;
    void*                                 pNext;
    VkBool32                              clusterAccelerationStructure;
} VkPhysicalDeviceClusterAccelerationStructureFeaturesNV;</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>clusterAccelerationStructure</code> is the core feature enabling this extension&#8217;s
functionality.</p>
</div>
</div>
<div class="sect2">
<h3 id="_properties"><a class="anchor" href="#_properties"></a>4.2. Properties</h3>
<div class="paragraph">
<p>The following properties are exposed by this extension:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c hljs" data-lang="c">typedef struct VkPhysicalDeviceClusterAccelerationStructurePropertiesNV {
    VkStructureType                       sType;
    void*                                 pNext;
    uint32_t                              maxVerticesPerCluster;
    uint32_t                              maxTrianglesPerCluster;
    uint32_t                              clusterScratchByteAlignment;
    uint32_t                              clusterByteAlignment;
    uint32_t                              clusterTemplateByteAlignment;
    uint32_t                              clusterBottomLevelByteAlignment;
    uint32_t                              clusterTemplateBoundsByteAlignment;
    uint32_t                              maxClusterGeometryIndex;
} VkPhysicalDeviceClusterAccelerationStructurePropertiesNV;</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>maxVerticesPerCluster</code> and <code>maxTrianglesPerCluster</code> specify the maximum limits
of vertices and triangles per cluster respectively.
The buffers and scratch memory used for building acceleration structures must
adhere to alignment requirements specified by other values in this structure.
<code>maxVerticesPerCluster</code> is the maximum geometry index possible for a
triangle in cluster acceleration structures.</p>
</div>
</div>
<div class="sect2">
<h3 id="_commands"><a class="anchor" href="#_commands"></a>4.3. Commands</h3>
<div class="paragraph">
<p>This extension provides a host-side query function to fetch the requirements and a
versatile multi-indirect call for managing cluster geometry. This call enables
applications to generate cluster geometry, construct Cluster BLAS from CLAS
lists, and move or copy CLAS and BLAS. By sourcing inputs from device memory
and processing multiple elements simultaneously, the call reduces the
host-side costs associated with traditional acceleration structure functions.</p>
</div>
<div class="sect3">
<h4 id="_checking_memory_requirements"><a class="anchor" href="#_checking_memory_requirements"></a>4.3.1. Checking memory requirements</h4>
<div class="paragraph">
<p>To determine the memory requirements for building or moving cluster acceleration
structures, use:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c hljs" data-lang="c">VKAPI_ATTR void VKAPI_CALL vkGetClusterAccelerationStructureBuildSizesNV(
    VkDevice                                    device,
    VkClusterAccelerationStructureInputInfoNV const* pInfo,
    VkAccelerationStructureBuildSizesInfoKHR*   pSizeInfo);</code></pre>
</div>
</div>
<div class="paragraph">
<p>where <code>pInfo</code> contains the parameters of the memory requirements query and
<code>pSizeInfo</code> contains the resulting memory requirements.</p>
</div>
<div class="paragraph">
<p>The <code>VkClusterAccelerationStructureInputInfoNV</code> structure is used in querying
memory requirements, performing the build or move operation. The word
"operation" below describes all these operations. The structure is defined as:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c hljs" data-lang="c">typedef struct VkClusterAccelerationStructureInputInfoNV {
    VkStructureType                       sType;
    void*                                 pNext;
    uint32_t                              maxAccelerationStructureCount;
    VkBuildAccelerationStructureFlagsKHR  flags;
    VkClusterAccelerationStructureOpTypeNV opType;
    VkClusterAccelerationStructureOpModeNV opMode;
    VkClusterAccelerationStructureOpInputNV opInput;
} VkClusterAccelerationStructureInputInfoNV;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>maxAccelerationStructureCount</code> is the maximum number of acceleration structures used in this operation.</p>
</li>
<li>
<p><code>flags</code> is a bitmask of <code>VkBuildAccelerationStructureFlagsKHR</code> specifying flags for the operation.</p>
</li>
<li>
<p><code>opType</code> is a <code>VkClusterAccelerationStructureOpTypeNV</code> value specifying the type of operation.</p>
</li>
<li>
<p><code>opMode</code> is a <code>VkClusterAccelerationStructureOpModeNV</code> value specifying the mode of operation.</p>
</li>
<li>
<p><code>opInput</code> is a <code>VkClusterAccelerationStructureOpInputNV</code> value specifying the upper bounds in the operation.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><code>VkClusterAccelerationStructureOpTypeNV</code> can be one of:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c hljs" data-lang="c">typedef enum VkClusterAccelerationStructureOpTypeNV {
    VK_CLUSTER_ACCELERATION_STRUCTURE_OP_TYPE_MOVE_OBJECTS_NV = 0,
    VK_CLUSTER_ACCELERATION_STRUCTURE_OP_TYPE_BUILD_CLUSTERS_BOTTOM_LEVEL_NV = 1,
    VK_CLUSTER_ACCELERATION_STRUCTURE_OP_TYPE_BUILD_TRIANGLE_CLUSTER_NV = 2,
    VK_CLUSTER_ACCELERATION_STRUCTURE_OP_TYPE_BUILD_TRIANGLE_CLUSTER_TEMPLATE_NV = 3,
    VK_CLUSTER_ACCELERATION_STRUCTURE_OP_TYPE_INSTANTIATE_TRIANGLE_CLUSTER_NV = 4,
    VK_CLUSTER_ACCELERATION_STRUCTURE_OP_TYPE_MAX_ENUM_NV = 0x7FFFFFFF
} VkClusterAccelerationStructureOpTypeNV;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>VK_CLUSTER_ACCELERATION_STRUCTURE_OP_TYPE_MOVE_OBJECTS_NV</code> means cluster acceleration structures (CLAS, Cluster Templates or Cluster BLAS) will be moved or copied.</p>
</li>
<li>
<p><code>VK_CLUSTER_ACCELERATION_STRUCTURE_OP_TYPE_BUILD_CLUSTERS_BOTTOM_LEVEL_NV</code> means a bottom level cluster acceleration structures will be built.</p>
</li>
<li>
<p><code>VK_CLUSTER_ACCELERATION_STRUCTURE_OP_TYPE_BUILD_TRIANGLE_CLUSTER_NV</code> means a cluster acceleration structures will be built.</p>
</li>
<li>
<p><code>VK_CLUSTER_ACCELERATION_STRUCTURE_OP_TYPE_BUILD_TRIANGLE_CLUSTER_TEMPLATE_NV</code> means a cluster template acceleration structures will be built.</p>
</li>
<li>
<p><code>VK_CLUSTER_ACCELERATION_STRUCTURE_OP_TYPE_INSTANTIATE_TRIANGLE_CLUSTER_NV</code> means a cluster template acceleration structures will be instantiated.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><code>VkClusterAccelerationStructureOpModeNV</code> can be one of:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c hljs" data-lang="c">typedef enum VkClusterAccelerationStructureOpModeNV {
    VK_CLUSTER_ACCELERATION_STRUCTURE_OP_MODE_IMPLICIT_DESTINATIONS_NV = 0,
    VK_CLUSTER_ACCELERATION_STRUCTURE_OP_MODE_EXPLICIT_DESTINATIONS_NV = 1,
    VK_CLUSTER_ACCELERATION_STRUCTURE_OP_MODE_COMPUTE_SIZES_NV = 2,
    VK_CLUSTER_ACCELERATION_STRUCTURE_OP_MODE_MAX_ENUM_NV = 0x7FFFFFFF
} VkClusterAccelerationStructureOpModeNV;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>VK_CLUSTER_ACCELERATION_STRUCTURE_OP_MODE_IMPLICIT_DESTINATIONS_NV</code> indicates that the
build or move operation will implicitly distribute built/moved structures in the user specified buffer (<code>VkClusterAccelerationStructureCommandsInfoNV::dstImplicitData</code>).</p>
</li>
<li>
<p><code>VK_CLUSTER_ACCELERATION_STRUCTURE_OP_MODE_EXPLICIT_DESTINATIONS_NV</code> indicates that the build
or move operation will explicitly write built/moved acceleration structures to the addresses specified in user specified buffer (<code>VkClusterAccelerationStructureCommandsInfoNV::dstAddressesArray</code>).</p>
</li>
<li>
<p><code>VK_CLUSTER_ACCELERATION_STRUCTURE_OP_MODE_COMPUTE_SIZES_NV</code> indicates that computed
cluster acceleration structure&#8217;s sizes will be written to user specified buffer (<code>VkClusterAccelerationStructureCommandsInfoNV::dstSizesArray</code>).</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><code>VkClusterAccelerationStructureOpInputNV</code> can be one of:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c hljs" data-lang="c">typedef union VkClusterAccelerationStructureOpInputNV {
    VkClusterAccelerationStructureClustersBottomLevelInputNV* pClustersBottomLevel;
    VkClusterAccelerationStructureTriangleClusterInputNV* pTriangleClusters;
    VkClusterAccelerationStructureMoveObjectsInputNV* pMoveObjects;
} VkClusterAccelerationStructureOpInputNV;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>pClustersBottomLevel</code> is a <code>VkClusterAccelerationStructureClustersBottomLevelInputNV</code> structure specifying an upper threshold
on the number of cluster level acceleration structures that will be used to build a bottom level acceleration structure:</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c hljs" data-lang="c">typedef struct VkClusterAccelerationStructureClustersBottomLevelInputNV {
    VkStructureType                       sType;
    void*                                 pNext;
    uint32_t                              maxTotalClusterCount;
    uint32_t                              maxClusterCountPerAccelerationStructure;
} VkClusterAccelerationStructureClustersBottomLevelInputNV;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>pTriangleClusters</code> is a <code>VkClusterAccelerationStructureTriangleClusterInputNV</code> structure specifying
an upper threshold on parameters to build a regular or template cluster acceleration structure, or to instantiate it:</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c hljs" data-lang="c">typedef struct VkClusterAccelerationStructureTriangleClusterInputNV {
    VkStructureType                       sType;
    void*                                 pNext;
    VkFormat                              vertexFormat;
    uint32_t                              maxGeometryIndexValue;
    uint32_t                              maxClusterUniqueGeometryCount;
    uint32_t                              maxClusterTriangleCount;
    uint32_t                              maxClusterVertexCount;
    uint32_t                              maxTotalTriangleCount;
    uint32_t                              maxTotalVertexCount;
    uint32_t                              minPositionTruncateBitCount;
} VkClusterAccelerationStructureTriangleClusterInputNV;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>pMoveObjects</code> is a <code>VkClusterAccelerationStructureMoveObjectsInputNV</code> structure specifying an upper
threshold on the number of bytes moved and the type of acceleration structure being moved. It also
specifies if there is an overlap in the move operation between source and destination acceleration structures:</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c hljs" data-lang="c">typedef struct VkClusterAccelerationStructureMoveObjectsInputNV {
    VkStructureType                       sType;
    void*                                 pNext;
    VkClusterAccelerationStructureTypeNV  type;
    VkBool32                              noMoveOverlap;
    VkDeviceSize                          maxMovedBytes;
} VkClusterAccelerationStructureMoveObjectsInputNV;</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_performing_build_or_move_operation"><a class="anchor" href="#_performing_build_or_move_operation"></a>4.3.2. Performing build or move operation</h4>
<div class="paragraph">
<p>To build or move a cluster acceleration structure, a cluster acceleration structure template or to instantiate a
cluster acceleration structure template call:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c hljs" data-lang="c">VKAPI_ATTR void VKAPI_CALL vkCmdBuildClusterAccelerationStructureIndirectNV(
    VkCommandBuffer                             commandBuffer,
    VkClusterAccelerationStructureCommandsInfoNV const* pCommandInfos);</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>pCommandInfos</code> is a pointer to a <code>VkClusterAccelerationStructureCommandsInfoNV</code> structure containing
parameters required for building or moving the cluster acceleration structure and is defined as:</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c hljs" data-lang="c">typedef struct VkClusterAccelerationStructureCommandsInfoNV {
    VkStructureType                       sType;
    void*                                 pNext;
    VkClusterAccelerationStructureInputInfoNV input;
    VkDeviceAddress                       dstImplicitData;
    VkDeviceAddress                       scratchData;
    VkStridedDeviceAddressRegionKHR       dstAddressesArray;
    VkStridedDeviceAddressRegionKHR       dstSizesArray;
    VkStridedDeviceAddressRegionKHR       srcInfosArray;
    VkDeviceAddress                       srcInfosCount;
    VkClusterAccelerationStructureAddressResolutionFlagsNV addressResolutionFlags;
} VkClusterAccelerationStructureCommandsInfoNV;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>input</code> is <code>VkClusterAccelerationStructureInputInfoNV</code> structure describing the build or move parameters for the cluster acceleration structure.</p>
</li>
<li>
<p><code>dstImplicitData</code> is the device address for memory where the implicit build of cluster acceleration structure will be saved and it must be provided if <code>input::opMode == VK_CLUSTER_ACCELERATION_STRUCTURE_OP_MODE_IMPLICIT_DESTINATIONS_NV</code>.</p>
</li>
<li>
<p><code>scratchData</code> is the device address of scratch memory that will be used during cluster acceleration structure move or build.</p>
</li>
<li>
<p><code>dstAddressesArray</code> is a <code>VkStridedDeviceAddressRegionKHR</code> where the individual addresses and stride of moved or built cluster
acceleration structures will be saved or read from depending on <code>input::opMode</code>.</p>
</li>
<li>
<p><code>dstSizesArray</code> is NULL or a VkStridedDeviceAddressRegionKHR containing sizes of moved or built cluster acceleration structures.</p>
</li>
<li>
<p><code>srcInfosArray</code> is a VkStridedDeviceAddressRegionKHR where input data for the build or move operation is read from. This is an input
to the implementation and is described in more detail below.</p>
</li>
<li>
<p><code>srcInfosCount</code> is the device address of memory containing the count of number of build or move operations to perform.</p>
</li>
<li>
<p><code>addressResolutionFlags</code> is a bitmask of <code>VkClusterAccelerationStructureAddressResolutionFlagBitsNV</code> values specifying
if an operation&#8217;s addresses are retrieved from the device through another level of indirection when reading corresponding
address in <code>VkClusterAccelerationStructureCommandsInfoNV</code>. It can be one of:</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c hljs" data-lang="c">- VK_CLUSTER_ACCELERATION_STRUCTURE_ADDRESS_RESOLUTION_INDIRECTED_DST_IMPLICIT_DATA_BIT_NV
- VK_CLUSTER_ACCELERATION_STRUCTURE_ADDRESS_RESOLUTION_INDIRECTED_SCRATCH_DATA_BIT_NV
- VK_CLUSTER_ACCELERATION_STRUCTURE_ADDRESS_RESOLUTION_INDIRECTED_DST_ADDRESS_ARRAY_BIT_NV
- VK_CLUSTER_ACCELERATION_STRUCTURE_ADDRESS_RESOLUTION_INDIRECTED_DST_SIZES_ARRAY_BIT_NV
- VK_CLUSTER_ACCELERATION_STRUCTURE_ADDRESS_RESOLUTION_INDIRECTED_SRC_INFOS_ARRAY_BIT_NV
- VK_CLUSTER_ACCELERATION_STRUCTURE_ADDRESS_RESOLUTION_INDIRECTED_SRC_INFOS_COUNT_BIT_NV</code></pre>
</div>
</div>
<div class="paragraph">
<p>Depending on <code>VkClusterAccelerationStructureInputInfoNV::opType</code>, <code>srcInfosArray</code> can contain structures of following types:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>VK_CLUSTER_ACCELERATION_STRUCTURE_OP_TYPE_MOVE_OBJECTS_NV</code> : <code>VkClusterAccelerationStructureMoveObjectsInfoNV</code></p>
</li>
<li>
<p><code>VK_CLUSTER_ACCELERATION_STRUCTURE_OP_TYPE_BUILD_CLUSTERS_BOTTOM_LEVEL_NV</code> : <code>VkClusterAccelerationStructureBuildClustersBottomLevelInfoNV</code></p>
</li>
<li>
<p><code>VK_CLUSTER_ACCELERATION_STRUCTURE_OP_TYPE_BUILD_TRIANGLE_CLUSTER_NV</code> : <code>VkClusterAccelerationStructureBuildTriangleClusterInfoNV</code></p>
</li>
<li>
<p><code>VK_CLUSTER_ACCELERATION_STRUCTURE_OP_TYPE_BUILD_TRIANGLE_CLUSTER_TEMPLATE_NV</code> : <code>VkClusterAccelerationStructureBuildTriangleClusterTemplateInfoNV</code></p>
</li>
<li>
<p><code>VK_CLUSTER_ACCELERATION_STRUCTURE_OP_TYPE_INSTANTIATE_TRIANGLE_CLUSTER_NV</code> : <code>VkClusterAccelerationStructureInstantiateClusterInfoNV</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>If performing a move operation, the source acceleration structure is specified in <code>srcInfosArray</code> with:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c hljs" data-lang="c">typedef struct VkClusterAccelerationStructureMoveObjectsInfoNV {
    VkDeviceAddress                       srcAccelerationStructure;
} VkClusterAccelerationStructureMoveObjectsInfoNV;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Depending on the <code>input::opMode</code>, the destination acceleration structure will be moved to the buffer
in  <code>VkClusterAccelerationStructureCommandsInfoNV::dstImplicitData</code> or <code>VkClusterAccelerationStructureCommandsInfoNV::dstAddressesArray</code>.</p>
</div>
<div class="paragraph">
<p>If creating a bottom level acceleration structure from clusters, the cluster references that make up the bottom level acceleration
structure are specified with below structure. Refer to the spec for more details on individual parameters:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c hljs" data-lang="c">typedef struct VkClusterAccelerationStructureBuildClustersBottomLevelInfoNV {
    uint32_t                              clusterReferencesCount;
    uint32_t                              clusterReferencesStride;
    VkDeviceAddress                       clusterReferences;
} VkClusterAccelerationStructureBuildClustersBottomLevelInfoNV;</code></pre>
</div>
</div>
<div class="paragraph">
<p>If building a triangle cluster, the input data, e.g. vertex data, index data, opacity micromaps etc., are specified with the below
structure. Refer to the spec for more details on individual parameters:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c hljs" data-lang="c">typedef struct VkClusterAccelerationStructureBuildTriangleClusterInfoNV {
    uint32_t                              clusterID;
    VkClusterAccelerationStructureClusterFlagsNV clusterFlags;
    uint32_t                              triangleCount:9;
    uint32_t                              vertexCount:9;
    uint32_t                              positionTruncateBitCount:6;
    uint32_t                              indexType:4;
    uint32_t                              opacityMicromapIndexType:4;
    VkClusterAccelerationStructureGeometryIndexAndGeometryFlagsNV baseGeometryIndexAndGeometryFlags;
    uint16_t                              indexBufferStride;
    uint16_t                              vertexBufferStride;
    uint16_t                              geometryIndexAndFlagsBufferStride;
    uint16_t                              opacityMicromapIndexBufferStride;
    VkDeviceAddress                       indexBuffer;
    VkDeviceAddress                       vertexBuffer;
    VkDeviceAddress                       geometryIndexAndFlagsBuffer;
    VkDeviceAddress                       opacityMicromapArray;
    VkDeviceAddress                       opacityMicromapIndexBuffer;
} VkClusterAccelerationStructureBuildTriangleClusterInfoNV;</code></pre>
</div>
</div>
<div class="paragraph">
<p>If building a triangle cluster template, the input data, e.g. vertex data, index data, opacity micromaps etc., are specified with below structure. Refer to the spec for more details on individual parameters:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c hljs" data-lang="c">typedef struct VkClusterAccelerationStructureBuildTriangleClusterTemplateInfoNV {
    uint32_t                              clusterID;
    VkClusterAccelerationStructureClusterFlagsNV clusterFlags;
    uint32_t                              triangleCount:9;
    uint32_t                              vertexCount:9;
    uint32_t                              positionTruncateBitCount:6;
    uint32_t                              indexType:4;
    uint32_t                              opacityMicromapIndexType:4;
    VkClusterAccelerationStructureGeometryIndexAndGeometryFlagsNV baseGeometryIndexAndGeometryFlags;
    uint16_t                              indexBufferStride;
    uint16_t                              vertexBufferStride;
    uint16_t                              geometryIndexAndFlagsBufferStride;
    uint16_t                              opacityMicromapIndexBufferStride;
    VkDeviceAddress                       indexBuffer;
    VkDeviceAddress                       vertexBuffer;
    VkDeviceAddress                       geometryIndexAndFlagsBuffer;
    VkDeviceAddress                       opacityMicromapArray;
    VkDeviceAddress                       opacityMicromapIndexBuffer;
    VkDeviceAddress                       instantiationBoundingBoxLimit;
} VkClusterAccelerationStructureBuildTriangleClusterTemplateInfoNV;</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>instantiationBoundingBoxLimit</code> is the address of a bounding box within which all instantiated clusters must lie. The bounding box is specified by six 32-bit floating-point values in the order MinX, MinY, MinZ, MaxX, MaxY, MaxZ.</p>
</div>
<div class="paragraph">
<p>If instantiating a triangle cluster template, the address of the template along with cluster specific values are specified with below structure. Refer to the spec for more details on individual parameters.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c hljs" data-lang="c">typedef struct VkClusterAccelerationStructureInstantiateClusterInfoNV {
    uint32_t                              clusterIdOffset;
    uint32_t                              geometryIndexOffset:24;
    uint32_t                              reserved:8;
    VkDeviceAddress                       clusterTemplateAddress;
    VkStridedDeviceAddressNV              vertexBuffer;
} VkClusterAccelerationStructureInstantiateClusterInfoNV;</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_issues"><a class="anchor" href="#_issues"></a>5. Issues</h2>
<div class="sectionbody">
<div class="paragraph">
<p>1) Why use a separate <code>VkRayTracingPipelineClusterAccelerationStructureCreateInfoNV</code> structure
to enable the feature instead of a pipeline bit?</p>
</div>
<div class="paragraph">
<p><strong>RESOLVED</strong>: Yes. The extension was originally provisional and we did not want to use a pipeline bit.
This should be revisited when the extension is promoted.</p>
</div>
<div class="paragraph">
<p>2) Do cluster acceleration structures support serialization/deserialization?
<strong>RESOLVED</strong>: No. The current specification does not support it but could be added if there is interest.</p>
</div>
</div>
</div>
</article>
  </div>
</main>
</div>
<script id="site-script" src="../../../../_/js/site.js" data-ui-root-path="../../../../_"></script>
<script async src="../../../../_/js/vendor/highlight.js"></script>
<script src="../../../../_/js/vendor/lunr.js"></script>
<script src="https://cdn.jsdelivr.net/pako/1.0.3/pako.min.js"></script>
<script src="../../../../_/js/search-ui.js" id="search-ui-script" data-site-root-path="../../../.." data-snippet-length="100" data-stylesheet="../../../../_/css/search.css"></script>
<script async src="../../../../search-index.js"></script>
  </body>
</html>
